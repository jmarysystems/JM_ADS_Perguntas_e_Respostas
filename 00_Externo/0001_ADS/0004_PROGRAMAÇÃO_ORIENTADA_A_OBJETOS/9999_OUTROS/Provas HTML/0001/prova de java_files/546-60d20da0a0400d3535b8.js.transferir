(window.webpackJsonp=window.webpackJsonp||[]).push([[546,16,25,36,39,46,49,56,60,127],{"+Zd/":function(e,t,n){},"+fEV":function(e,t){e.exports='<div class="slider-tab-navigation-small">\n  <div class="slider-tab-navigation-small__tabs-container">\n    <ul\n      class="slider-tab-navigation-small__tabs"\n      role="tablist"\n      aria-orientation="horizontal"\n      bb-arrow-key-navigation="{ wrap: true, layout: \'rows\', upEqualsLeft: true }"\n      bb-arrow-key-container\n    >\n      <li\n        id="{{\'slider-tab-\' + sliderTabNavigation.scope.tabs.transcludedSection.nameId}}"\n        analytics-id="{{::sliderTabNavigation.scope.tabs.transcludedSection.analyticsIdPrefix}}.li"\n        class="slider-tab-navigation-small__tab"\n        ng-click="sliderTabNavigation.goToTab(sliderTabNavigation.scope.tabs.transcludedSection)"\n        ng-class="{\'slider-tab-navigation-small__tab_active\': sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.transcludedSection.nameId}"\n        ng-keydown="sliderTabNavigation.handleTabKeyDown($event, sliderTabNavigation.scope.tabs.transcludedSection)"\n        role="tab"\n        aria-controls="browsable-section-panel"\n        tabindex="0"\n        aria-label="{{sliderTabNavigation.scope.tabs.transcludedSection.title}}"\n        aria-selected="{{sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.transcludedSection.nameId}}"\n        bb-arrow-key-destination\n      >\n        <div class="slider-tab-navigation-small__tab-icon">\n          <bb-svg-icon size="medium" icon="{{sliderTabNavigation.scope.tabs.transcludedSection.iconName}}"></bb-svg-icon>\n        </div>\n\n        <div class="slider-tab-navigation-small__tab-title">\n          {{sliderTabNavigation.scope.tabs.transcludedSection.title}}\n        </div>\n      </li>\n\n      <li\n        id="{{\'slider-tab-\' + sliderTabNavigation.scope.tabs.browsableSection.main.nameId}}"\n        analytics-id="{{::sliderTabNavigation.scope.tabs.browsableSection.main.analyticsIdPrefix}}.li"\n        class="slider-tab-navigation-small__tab"\n        ng-click="sliderTabNavigation.goToTab(sliderTabNavigation.scope.tabs.browsableSection.main)"\n        ng-class="{\'slider-tab-navigation-small__tab_active\': sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.browsableSection.main.nameId}"\n        ng-keydown="sliderTabNavigation.handleTabKeyDown($event, sliderTabNavigation.scope.tabs.browsableSection.main)"\n        role="tab"\n        aria-controls="browsable-section-panel"\n        tabindex="0"\n        aria-label="{{sliderTabNavigation.scope.tabs.browsableSection.main.title}}"\n        aria-selected="{{sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.browsableSection.main.nameId}}"\n        bb-arrow-key-destination\n      >\n        <div class="slider-tab-navigation-small__tab-icon">\n          <bb-svg-icon size="medium" icon="{{sliderTabNavigation.scope.tabs.browsableSection.main.iconName}}"></bb-svg-icon>\n        </div>\n\n        <div class="slider-tab-navigation-small__tab-title">\n          {{sliderTabNavigation.scope.tabs.browsableSection.main.title}}\n        </div>\n      </li>\n\n      <li\n        id="{{\'slider-tab-\' + tab.nameId}}"\n        analytics-id="{{::tab.analyticsIdPrefix}}.li"\n        class="slider-tab-navigation-small__tab"\n        ng-repeat="tab in sliderTabNavigation.scope.tabs.browsableSection.browsableTabs"\n        ng-click="sliderTabNavigation.goToTab(tab)"\n        ng-class="{\'slider-tab-navigation-small__tab_active\': sliderTabNavigation.activeTab.nameId === tab.nameId}"\n        ng-keydown="sliderTabNavigation.handleTabKeyDown($event, tab)"\n        role="tab"\n        aria-label="{{tab.title}}"\n        aria-controls="browsable-section-panel"\n        tabindex="0"\n        aria-selected="{{sliderTabNavigation.activeTab.nameId === tab.nameId}}"\n        bb-arrow-key-destination\n      >\n        <div class="slider-tab-navigation-small__tab-icon">\n          <bb-svg-icon size="medium" icon="{{tab.iconName}}"></bb-svg-icon>\n        </div>\n\n        <div class="slider-tab-navigation-small__tab-title">\n          {{tab.title}}\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div\n    id="browsable-section-panel"\n    class="slider-tab-navigation-small__tab-content"\n    aria-labelledby="{{\'slider-tab-\' + sliderTabNavigation.activeTab.nameId}}"\n  >\n    <div ng-if="sliderTabNavigation.shouldRenderTranscludedElement()">\n      <div ng-transclude></div>\n    </div>\n\n    <div ng-if="sliderTabNavigation.shouldRenderPeekRoutedElement()">\n      <div ui-view="slider-tab-navigation-view@"></div>\n    </div>\n  </div>\n</div>\n'},"+sRu":function(e,t,n){"use strict";var i;!function(e){e.IsSelected="is-selected",e.AnswerSelectedNotPosted="answer-selected-not-posted",e.AnswerNotSelected="answer-not-selected",e.CorrectAnswerSelected="correct-answer-selected",e.CorrectAnswerNotSelected="correct-answer-not-selected",e.IncorrectAnswerSelected="incorrect-answer-selected"}(i||(i={})),t.a=i},"+wu9":function(e,t){e.exports='<div class="typeahead-selected-options" ng-class="{\'empty\': selectedOptions.length === 0}" bb-load-bundle="components/directives/typeahead">\n  <ul bb-translate-attrs="{ \'aria-label\': selectedOptionsListLabel }">\n    <li ng-repeat="option in selectedOptions">\n      <span>{{::option.displayName}}</span>\n      <button class="button button--text"\n              ng-click="typeaheadSelectedOptions.removeOption(option)"\n              bb-translate-attrs="{ \'aria-label\': \'typeahead.typeahead-options.remove\' }"\n              translate-attrs-values="{ displayName: option.displayName }"\n              analytics-id="components.directives.typeaheadSelectedOptions.removeOption.button">\n        <bb-svg-icon size="small" icon="clear" />\n      </button>\n    </li>\n  </ul>\n</div>'},"/BCe":function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-forumlink" class="content-title"\n     bb-peek-sref="discussion.view.with-grading({contentId:\'{{targetContent.id}}\'})"\n     bb-prevent-click-if="targetContent.isConditionalReleaseLocked()" \n     aria-describedby="{{ariaDescribedBy}}"\n     analytics-id="course.link.item.forumLink.link"><span>{{ content.title }}</span></a>\n  <div ng-switch-default class="content-title">{{ content.title }}</div>\n</ng-switch>'},"/R3n":function(e,t){e.exports='<div>\n  <div class="name">\n    <ng-switch on="::content.getContentDisplay().linkAction()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n      <div ng-switch-when="resource/x-bb-folder">\n        <bb-content-item-folder></bb-content-item-folder>\n      </div>\n      <div ng-switch-when="contenturl">\n        \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n        <a bb-prevent-click-if="content.isConditionalReleaseLocked()"\n            ng-click="contentItemBase.markCompleted()"\n            ng-href="{{content.getContentDisplay().contentUrl()}}" target="_blank" rel="noopener noreferrer" class="content-title"\n            ng-class="{\'name-middle\': contentItemCourseOutline.shouldAlignMiddle()}"\n            aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n            analytics-id="content.item.course.outline.courseContent.link">\n          <span>{{ content.title }}</span>\n        </a>\n      </div>\n      <div ng-switch-when="ltilaunch">\n        <bb-content-item-ltilaunch></bb-content-item-ltilaunch>\n      </div>\n      <div ng-switch-when="scormlaunch">\n        <bb-content-item-scormlaunch></bb-content-item-scormlaunch>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-agn-link">\n        \x3c!-- open  edit page when an instructor(=entitledToDesignAssessment) is accessing an assignment in a complete course. page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           bb-peek-sref="gradebook-item.assignment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\' })"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment"\n           bb-peek-sref="assignment.view({assignmentId:content.id})" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           class="content-title"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.readOnly.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-assignment">\n        <a bb-peek-sref="assignment.view({assignmentId:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.assignment.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-document">\n        <a bb-peek-sref="content-manage.edit.document({id:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.document.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-page">\n        <bb-content-item-page></bb-content-item-page>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-test-link">\n        \x3c!-- open edit page when an instructor(=entitledToDesignAssessment) is accessing content. In a complete course, page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment" class="content-title"\n           bb-peek-sref="gradebook-item.assessment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\',\n                                 assessmentType: \'test\'})"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment" href="javascript:void(0);"\n           ng-click="contentItemBase.openAssessmentItem()" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.readOnly.link"><span>{{ content.title }}</span></a>\n      </div>\n      <a ng-switch-when="resource/x-bb-forumlink" bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n         bb-prevent-click-if="content.isConditionalReleaseLocked()"\n         class="content-title" aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n         analytics-id="content.item.courses.outline.gradebook.item.forum.link"><span>{{ content.title }}</span></a>\n      <div ng-switch-when="resource/x-bb-courselink">\n        <bb-course-link-item content="content" target-content="contentItemBase.targetContent" prefix="\'course.outline\'"/>\n      </div>\n      <div ng-switch-when="resource/x-bb-journallink">\n        <a bb-peek-sref="journal.view.with-participation({contentId:content.id})"\n          bb-prevent-click-if="content.isConditionalReleaseLocked()"\n          class="content-title" aria-describedby="activity-indicator-{{::content.id}}"\n          analytics-id="content.item.courses.outline.journal.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-default class="content-title">{{ content.title }}</div>\n      <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator"></bb-svg-icon>\n    </ng-switch>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span>{{content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: "m": this }}</span>\n    </span>\n    <span ng-if="contentItemCourseOutline.getExtraRequirementsSummary() !== null">\n      <span class="vertical-bar"></span>\n      <span bb-translate class="js-extra-requirements">{{::contentItemCourseOutline.getExtraRequirementsSummary()}}</span>\n    </span>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true"\n          class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span>{{content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: "m": this }}</span>\n    </span>\n    <span ng-if="contentItemCourseOutline.getExtraRequirementsSummary() !== null">\n      <span class="vertical-bar"></span>\n      <span bb-translate class="js-extra-requirements">{{::contentItemCourseOutline.getExtraRequirementsSummary()}}</span>\n    </span>\n  </div>\n  <div ng-if="contentItemBase.isPeerGradingConfigured" class="peer-review-due-date" bb-feature-toggle="peerAssessmentFeatureFlag" remove-from-dom="true">\n    <bb-svg-icon size="small" icon="peer-review"></bb-svg-icon>\n    <span bb-translate class="content-peer-review-due-date-label"\n          translate-values="{peerReviewsNumber: contentItemBase.peerReviews, datetime: contentItemBase.peerDueDate}">\n      components.directives.content-item-base.peer-review-due-date\n    </span>\n    <div ng-if="contentItemBase.contextCourseMembership.isStudentMembership()">\n      <button class="peer-review-info-tooltip"\n        bb-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-open-on-activation="true"\n        tooltip-disable-on-mouse-over="false"\n        bb-translate-attrs="{ \'title\': \'components.directives.content-item-base.peerReview.information-tooltip\' }"\n        analytics-id="components.directives.content-item-base.peerGrading.tooltip.button"\n      >\n        <bb-svg-icon class="stop-click-propagation" size="small" icon="information"></bb-svg-icon>\n      </button>\n    </div>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="guidance-wrapper">\n      <div class="group-name">\n        <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n        <span class="group-target-guided" bb-guidance-target component-key="contentGroupInfo"\n              ng-if="!contentItemBase.contextCourse.course.isComplete()">\n        </span>\n        <a ng-if="contentItemBase.hasViewGroupsAsAdmin"\n           class="js-groups-link"\n           href="javascript:void(0);"\n           ng-click="contentItemBase.editGroups()"\n           analytics-id="content.item.course.outline.contentItemBase.editGroups.link">\n          <bb-group-count content="content"></bb-group-count>\n        </a>\n        <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="js-groups-link">\n          <bb-group-count content="content"></bb-group-count>\n        </span>\n        <div ng-if="!(contentItemBase.canViewGroups || contentItemBase.hasViewGroupsAsAdmin)" class="student-group-enrollment">\n          <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n        </div>\n        \x3c!-- For complete course, will not show this guidance: LRN-107718 --\x3e\n        <span>\n          <bb-guidance ng-if="!contentItemBase.contextCourse.course.isComplete() && !contentItemBase.entitledToDesignAssessment" component-key="contentGroupInfo"\n                       class="guidance-element-group guidance-is-empty-student guidance-element-overlay push-left">\n            <span bb-translate="{{::contentItemCourseOutline.groupAssessmentFtueKey}}" translate-values="{title: contentItemCourseOutline.customCategory}"></span>\n          </bb-guidance>\n        </span>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    tabindex="0"\n    class="lock-info"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    open-panel-on-restricted="true"\n                                    enable-conditional-release="content.canAccessAdaptiveRelease()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control"\n       ng-class="{\'conditional-release-control-for-complete-course\': contentItemCourseOutline.isCourseCompletedAndInInstructorView()}">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemCourseOutline.canOpenConditionalRelease && contentItemCourseOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-disable-on-mouse-over="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-open-on-activation="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}.link">\n        <span bb-translate="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}"></span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},"/hmo":function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-blti-link" \n     bb-component-sref="{{prefix}}.engagement.edit({contentId:\'{{targetContent.id}}\'})"\n     class="content-title"\n     analytics-id="course.content.lti.link"><span>{{ content.title }}</span></a>\n</ng-switch>\n'},"/oLk":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-export",use:"icon-small-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-export"><path d="M7 9l8-8M12 1h3v3M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"0/Nk":function(e,t){e.exports='<div class="group-student-self-enroll-directive" bb-load-bundle="components/directives/group/group-student-enrollment">\n  <div ng-if="$ctrl.content.assignedGroups.length > 0">\n    <span ng-if="!$ctrl.isOpenEnrollment()" class="ellipse title">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </span>\n    <a ng-if="$ctrl.isSelfEnrollment && $ctrl.isOpenEnrollment()" class="self-enroll-link js-self-enroll-link"\n       href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()"\n       analytics-id="components.directives.group-student-enrollment.groupTitle.link">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </a>\n  </div>\n  <span ng-if="!($ctrl.content.assignedGroups.length > 0) && !$ctrl.isSelfEnrollment" class="ellipse title" bb-translate\n        translate-values="{title: components.directives.group-student-enrollment.unknown}">\n    components.directives.group-student-enrollment.unknown\n  </span>\n  <div ng-if="!($ctrl.content.assignedGroups.length > 0) && $ctrl.isSelfEnrollment">\n    <div ng-if="$ctrl.isOpenEnrollment()">\n      <a href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" class="self-enroll-link js-self-enroll-link"\n         bb-translate analytics-id="components.directives.group-student-enrollment.self-enroll-to-participate">components.directives.group-student-enrollment.self-enroll-to-participate</a>\n    </div>\n    <div ng-if="$ctrl.isBeforeEnrollment()" class="self-enroll-date" translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-starts</div>\n    <div ng-if="$ctrl.isOpenEnrollmentWithEnding()" class="self-enroll-date"\n         ng-class="{\'is-important\': $ctrl.selfEnrollGroupInfo.isEnrollmentDateImportant}"\n         translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closes</div>\n    <div ng-if="$ctrl.isAfterEnrollment()" class="self-enroll-date"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closed</div>\n  </div>\n</div>\n'},"00V8":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("xQgz"),s="ultra.components.directives.bbUiIcon.Folder";Object(i.a)(o.Folder,s,"bbUiIconFolder")},"01PJ":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-post",use:"icon-small-post-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-post"><path d="M9 15L1 9l14-8-6 14zM5 12L15 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 12v3l1.5-1.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"07HN":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    class="button-add-content"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.grades.button"\n  >\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>'},"0BVo":function(e,t){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.failedToUpload.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.failedToUpload.title" aria-describedby="failed-to-upload"\n          analytics-id-tag-prefix="course.grades.gradesUploadSettingsFailed">\n<div name="modal-contents">\n    <p id="failed-to-upload" translate-values="{ count: failedItemsCount, errorItems: failedItems }"\n       bb-translate="course.grades.grades-upload-settings.failedToUpload.content.plural"></p>\n</div>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button failed-to-upload-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsFailed.closeButton.button">\n      <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},"0Vbm":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),o=(n("kbFs"),n("6Fqm"),n("67oV"),n("+brj")),s=n("yC9S"),a=n("aHpC"),r=n("QzaB"),c="ultra.components.directives.searchBox";!function(){function e(e,t){this.browserStorage=e,this.$element=t}e.prototype.$onInit=function(){var e=this;this.localStorageKey&&this.browserStorage.getFromStorage(this.localStorageKey,o.a.LocalStorage).then((function(t){e.searchText(t)}))},e.prototype.searchText=function(e){return null!=e&&(this.onSearch({searchText:e}),this._searchText=e,this.localStorageKey&&(""===e?this.browserStorage.deleteFromStorage(this.localStorageKey,o.a.LocalStorage):this.browserStorage.saveToStorage(this.localStorageKey,e,o.a.LocalStorage))),this._searchText},e.prototype.clearSearchInput=function(){this.searchText(""),this.$element.find("input").focus()},e=Object(i.__decorate)([Object(s.a)({moduleName:c,componentName:"bbSearchBox",template:r,bindings:{onSearch:"&",localStorageKey:"@?",placeholderKey:"@",analyticsIdTagPrefix:"@?"},requireModules:[o.b]}),Object(i.__param)(0,Object(a.b)(o.c)),Object(i.__param)(1,Object(a.b)("$element"))],e)}()},"0lMW":function(e,t,n){},"0rzL":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("D57K"),o=(n("eWdw"),n("wHJ2")),s=n("pjml"),a=n("dJ97"),r=n("nbDY"),c=n.n(r),l=n("Bu0u"),d=n("UODz"),u="ultra.components.directives.submissionCard",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.ATTEMPT=new t("ATTEMPT"),t.GRADE=new t("GRADE"),t.INFO=new t("INFO"),t}(c.a),m=function(){function e(e){if(this.scope=e,!e.gradingColumn&&!e.gradeDetail)throw new l.a({message:"gradingColumn or gradeDetail must be provided."});if(this.scope.gradeDetail&&!this.scope.gradeDetail.column)throw new l.a({message:"gradeDetail.column must be provided to display attempt mode."});var t,n;switch(this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)&&(this.attempt=this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt,this.currentGradeStatus=this.scope.gradeDetail.ui.attempt.status),(!e.gradeDetail||e.gradeDetail&&!this.attempt)&&e.gradingColumn?this.scope.mode=p.INFO:e.gradeDetail&&this.attempt&&(this.scope.mode=p.ATTEMPT,this.scope.gradingColumn=this.scope.gradeDetail.column),e.iconClass=s.r.ContentHandler.UltraAssignment.iconClass,this.showLate=!e.showLate||e.showLate(),!this.showLate||e.gradeDetail&&this.attempt&&!this.attempt.isInProgress()||(e.iconClass+="-a"),e.mode){case p.INFO:n=e.gradingColumn.dueDate?"DUE":"NO_DUE_DATE",t=this.showLate?"UNOPENED_LATE":"UNOPENED";break;case p.ATTEMPT:n=this.attempt.status.toString(),e.hasAttempt=!0,t=s.C.AttemptStatus.InProgress.isEqualTo(this.attempt.status)&&this.showLate?"SUBMISSION_LATE":"SUBMISSION";break;case p.GRADE:}e.status="components.directives.submission-card.attemptStatus."+n,e.title="components.directives.submission-card.title."+t}return e.prototype.shouldExpandForRubricIcon=function(){return(this.scope.showRubricButton&&this.scope.showRubricButton()||this.scope.showRubricDiv&&this.scope.showRubricDiv())&&this.scope.gradingColumn.hasRubricAssociation&&this.scope.gradingColumn.hasRubricAssociation()},e.$inject=["scope"],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=d,this.scope={gradeDetail:"=?",gradingColumn:"=?",inline:"@?",clickable:"=?",showLate:"&?",showRubricButton:"&?",showRubricDiv:"&?"},this.link=function(e){e.submissionCard=t.$injector.instantiate(m,{scope:e})}}return e.$inject=["$injector"],e}();o.module(u,[a.a]).directive("bbSubmissionCard",["$injector",function(e){return e.instantiate(h)}])},"0vQT":function(e,t,n){"use strict";var i=n("D57K"),o=n("nbDY"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Correct=new t("correct"),t.Partial=new t("partial"),t.Incorrect=new t("incorrect"),t.FullCredit=new t("full-credit"),t}(n.n(o).a);t.a=s},"1/hr":function(e,t,n){},"10QP":function(e,t,n){},"15AK":function(e,t,n){"use strict";n.r(t);var i=n("D57K"),o=n("wHJ2"),s=n("5MwF"),a=n("pjml"),r=n("nsO7"),c=n("mnBQ"),l=n("0JpG"),d=n("k9iv"),u=n("DDBr"),p=n("eAnr"),m=n("TnpK"),h=n("Fvsw"),g=n("Qbdf"),b=n("bF8R"),f=n("fYJU"),v=n("R+Yw"),y=n("R4kC"),w=n("X/qj"),C=n("t6LE"),S=n("aHpC"),k=n("9hUw"),I=function(){function e(e,t,n,i,o,s,a,r){var c=this;this.$q=e,this.ultraStateService=t,this.gradebookPermissionService=n,this.feedbackService=i,this.currentUser=o,this.isGroupAttempt=s,this.userModel=a,this.peerService=r,this.bbml={},this.attemptGrader=null,this.onUploadSuccess=function(e){c.bbml.fileLocation=c.bbml.fileLocation||e.fileLocation,c.bbml.webLocation=c.bbml.webLocation||e.webLocation},this.feedbackTextDidChange=function(e){c.bbml.current=e.toBbML(),c.bbml.isDirty=e.isDirty},this.save=function(e){return void 0===e&&(e=!1),c.bbml.forSave=c.bbml.current,c.attempt?(c.attempt.feedbackToUser||(c.attempt.feedbackToUser={rawText:""}),c.attempt.feedbackToUser.rawText=c.bbml.forSave,c.attempt.feedbackToUser.fileLocation=c.attempt.feedbackToUser.fileLocation||c.bbml.fileLocation,c.attempt.feedbackToUser.webLocation=c.attempt.feedbackToUser.webLocation||c.bbml.webLocation,c.getCurrentColumn().peerGrading&&(c.attempt.status=e?C.AttemptStatus.Completed:null),c.attempt.$save(["feedbackToUser.rawText","feedbackToUser.fileLocation","feedbackToUser.webLocation","status"]).$asPromise().then((function(e){return c.bbml.initial=e.feedbackToUser.rawText,c.bbml.isDirty=!1,c.attempt.feedbackToUser.webLocation=e.feedbackToUser.webLocation,c.attempt.feedbackToUser.fileLocation=e.feedbackToUser.fileLocation,c.attempt.overrideStatus=e.overrideStatus,c.feedbackService.refreshAfterAssessmentAttemptFeedbackSave(e.feedbackToUser,e),e.feedbackToUser}))):c._loadAttempt().then((function(){if(c.attempt)return c.save()}))},this.getInitialBbml=function(){return c.bbml.initial}}return e.prototype.load=function(){var e=this;return this._loadAttempt().then((function(t){return e.populateFeedbackObject(t)}))},e.prototype.populateFeedbackObject=function(e){var t=e&&e.getFeedbackToUser();return this.bbml.initial=t?t.rawText:"",this.bbml.current=this.bbml.current||this.bbml.initial,this.bbml.fileLocation=t&&t.fileLocation||"",this.bbml.webLocation=t&&t.webLocation||"",t||{rawText:"",fileLocation:"",webLocation:"",displayText:""}},e.prototype.getCurrentColumn=function(){return this.ultraStateService.getCurrentResolvedValues().currentColumn},e.prototype.getCurrentCourse=function(){return this.ultraStateService.getCurrentResolvedValues().currentCourse},e.prototype.fetchGroupAttempt=function(){var e=this.ultraStateService.getCurrentUrlParams().attemptId;return this.getCurrentCourse().gradebook.groupAttempts.$find(e,{expand:"attempts,feedbackToUser"}).$asPromise()},e.prototype.fetchAttempt=function(){var e=this,t=this.ultraStateService.getCurrentUrlParams(),n=t.attemptId,i=t.gradeId,o=this.getCurrentColumn();return this.getCurrentCourse().gradebook.attempts.$find(n,{expand:"feedbackToUser"}).$asPromise().then((function(t){var n=e.gradebookPermissionService.canDelegatedReconcileAttempt(o),s=o.peerGrading&&t.userId===e.currentUser.userId;return n||s?o.grades.$new(i||t.gradeId).attempts.$add(t).$find(t.id).$asPromise().then((function(e){return e.stagedAttemptGrades.$fetch().$asPromise().then((function(){return e}))})):t})).then((function(t){return e.peerService.canPeerReviewAttempt(o,t)?e.userModel.$find(e.currentUser.userId,{fields:"avatar,familyName,givenName"}).$asPromise().then((function(n){return e.attemptGrader=n,t})):e.$q.when(t)}))},e.prototype._loadAttempt=function(){var e=this;return(this.isGroupAttempt?this.fetchGroupAttempt():this.fetchAttempt()).then((function(t){return e.attempt=t}))},e.prototype.feedbackIsDirty=function(){return this.bbml.isDirty},e.prototype.canEnterFeedback=function(){return this.attempt&&(this.gradebookPermissionService.canDelegatedEnterAttemptFeedback(this.getCurrentColumn(),this.attempt)||this.gradebookPermissionService.canDelegatedEnterAttemptGrades(this.getCurrentColumn(),this.attempt)||this.peerService.canPeerAddFeedbackToAttempt(this.getCurrentColumn(),this.attempt))},e.prototype.canViewAttemptGrades=function(){return this.attempt&&this.gradebookPermissionService.canViewGrades()},e.prototype.getStagedAttemptGrades=function(){return this.attempt&&"stagedAttemptGrades"in this.attempt&&this.attempt.stagedAttemptGrades.length>0?this.attempt.stagedAttemptGrades:null},e=Object(i.__decorate)([Object(i.__param)(0,Object(S.b)("$q")),Object(i.__param)(1,Object(S.b)(m.d)),Object(i.__param)(2,Object(S.b)(w.b)),Object(i.__param)(3,Object(S.b)(p.c)),Object(i.__param)(4,Object(S.b)(f.b)),Object(i.__param)(5,Object(S.b)("isGroupAttempt")),Object(i.__param)(6,Object(S.b)(a.Pb.serviceName)),Object(i.__param)(7,Object(S.b)(k.b))],e)}(),D=function(){function e(e,t,n){var i=this;this.ultraStateService=e,this.gradebookPermissionService=t,this.feedbackService=n,this.bbml={},this.onUploadSuccess=function(e){i.bbml.fileLocation=i.bbml.fileLocation||e.fileLocation,i.bbml.webLocation=i.bbml.webLocation||e.webLocation},this.feedbackTextDidChange=function(e){i.bbml.current=e.toBbML(),i.bbml.isDirty=e.isDirty},this.save=function(){i.bbml.forSave=i.bbml.current||"";var e=i.ultraStateService.getCurrentResolvedValues().currentCourse;i.attempt.feedbackToUser||(i.attempt.feedbackToUser={rawText:""});var t=e.gradebook.attempts.$buildRaw(i.attempt);return t.feedbackToUser.rawText=i.attempt.feedbackToUser.rawText=i.bbml.forSave,t.feedbackToUser.fileLocation=i.attempt.feedbackToUser.fileLocation=i.attempt.feedbackToUser.fileLocation||i.bbml.fileLocation,t.feedbackToUser.webLocation=i.attempt.feedbackToUser.fileLocation=i.attempt.feedbackToUser.webLocation||i.bbml.webLocation,t.$save(["feedbackToUser.rawText","feedbackToUser.fileLocation","feedbackToUser.webLocation"]).$asPromise().then((function(e){return i.bbml.initial=e.feedbackToUser.rawText,i.bbml.isDirty=!1,i.attempt.feedbackToUser.webLocation=e.feedbackToUser.webLocation,i.attempt.feedbackToUser.fileLocation=e.feedbackToUser.fileLocation,i.attempt.overrideStatus=e.overrideStatus,i.attempt.feedbackToUser.rawText=e.feedbackToUser.rawText,i.feedbackService.refreshAfterIndividualfeedbackSave(e),e.feedbackToUser}))},this.getInitialBbml=function(){return i.bbml.initial}}return e.prototype.feedbackIsDirty=function(){return this.bbml.isDirty},e.prototype.loadSync=function(e){this.attempt=e;var t=e.getGroupIndividualFeedbackToUser();return this.bbml.isDirty=!1,this.bbml.initial=t&&t.rawText,this.bbml.current=this.bbml.current||this.bbml.initial,this.bbml.fileLocation=t&&t.fileLocation||"",this.bbml.webLocation=t&&t.webLocation||"",t||{rawText:"",fileLocation:"",webLocation:"",displayText:""}},e.prototype.canEnterFeedback=function(){return this.gradebookPermissionService.canEnterGrades()||this.gradebookPermissionService.canEnterFeedback()},e.prototype.canViewAttemptGrades=function(){return this.gradebookPermissionService.canViewGrades()},e.$inject=[m.d,w.b,p.c],e}(),E=n("yC9S"),O=n("Q/M7"),T=n("kwLz"),$=n("6fZB"),A=n("7cYF"),x=n("oVrE"),P=n("X455"),G=n("lEL+"),L=n("wtKk"),R=n("nfhp");n.d(t,"FEEDBACK_PARAMS_UPDATED",(function(){return M})),n.d(t,"FEEDBACK_UPDATED",(function(){return j})),n.d(t,"moduleName",(function(){return _})),n.d(t,"componentName",(function(){return B})),n.d(t,"controllerName",(function(){return F})),n.d(t,"ASSESSMENT_FEEDBACK_SAVE",(function(){return N})),n.d(t,"ASSESSMENT_FEEDBACK_SAVED",(function(){return V})),n.d(t,"ASSESSMENT_FEEDBACK_CHANGED",(function(){return z})),n.d(t,"assessmentFeedbackModule",(function(){return U})),n.d(t,"AssessmentFeedback",(function(){return H})),n.d(t,"AssessmentFeedbackParams",(function(){return q})),n.d(t,"AssessmentFeedbackController",(function(){return K})),n.d(t,"template",(function(){return W})),n.d(t,"templateUrl",(function(){return R}));var M="feedbackParamsUpdated",j="FeedbackUpdated",_="ultra.course.assessment.feedback",B="assessmentFeedback",F="ultra.course.assessment.feedback",N="assessment-feedback:save",V="assessment-feedback:saved",z="assessment-feedback:changed",U=o.module(_,[p.a,c.a,c.a,u.a,y.a,k.a,P.a,G.a]),H=function(){function e(e,t,n,i,o,s,a,r,c,d,u,p){var m=this;this.$rootScope=e,this.$scope=t,this.$q=n,this.$injector=i,this.timeout=o,this.localize=s,this.contextUser=a,this.errorModalService=r,this.ultraSubmissionListService=c,this.ultraState=d,this.peerReviewService=u,this.currentCourseMembership=p,this.confirmedToClose=!1,this.tabKey=T.FeedbackPivotKey.General,this.isLoading=!1,this.isFeedbackAuthoringPayloadLoaded=!1,this.inline=!1,this.isInlineMode=!1,this.hideFeedbackFromPeerReviewer=!1,this.showTextForStudentSubmissionPage=!1,this.isCreateMode=function(){return!m.feedbackText.getInitialBbml()},this.getFormatUsername=function(e){return m.localize.formatUsernameSync(e,l.ILocaleUsernameFormat.Short,m.$scope,{noWrap:!0,noEscape:!0})}}return e.prototype.$onInit=function(){var e=this;this.isGroupSubmission()&&this.$scope.$on("$locationChangeSuccess",(function(){e.loadFeedbackTab()})),this.$scope.$on(M,(function(){e.buildFeedbackAuthoringPayload({},!0)})),this.$scope.assessmentFeedback=this,this.initializeFeedback(),this.$scope.$on("$stateChangeStart",(function(t){e.onShowCloseConfirmationModal(t)})),this.setRenderMode(),this.subscribeCancelNavigationEvents(),this.$scope.$on(N,(function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),e.$scope.assessmentFeedback.onClickSave(n,i)})),this.$scope.$on(A.b,(function(){e.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly&&e.$scope.assessmentFeedback.onClickEdit(),o.element("bb-feedback-authoring div.bb-editor").first().focus()}))},e.prototype.loadFeedbackTab=function(){var e=this.ultraState.getCurrentUrlParams().attemptId;!this.isGroupSubmission()||this.feedbackText.attempt&&this.feedbackText.attempt.id===e?this.buildFeedbackAuthoringPayload():this.initializeFeedback()},e.prototype.initializeFeedback=function(){this.feedbackText=this.$injector.instantiate(I,{isGroupAttempt:this.isGroupSubmission()}),this.feedbackParams=this.$injector.instantiate(q,{feedbackText:this.feedbackText,$scope:this.$scope}),this.isGroupSubmission()&&(this.feedbackTextIndividual=this.$injector.instantiate(D),this.feedbackParamsIndividual=this.$injector.instantiate(q,{feedbackText:this.feedbackTextIndividual,$scope:this.$scope})),this.isLoading=!0,this.initialize()},e.prototype.setRenderMode=function(){var e=this.ultraState.getCurrentUrlParams().mode;this.isInlineMode="inline"===e},e.prototype.subscribeCancelNavigationEvents=function(){var e=this;this.$scope.$on(L.a,(function(t,n,i){"feedback"===n&&(i.navigationPromise=e.$q((function(t){e.feedbackIsDirty()?(e.resumeNavigation=t,e.showCloseConfirmationModal()):t()})))}))},e.prototype.feedbackIsDirty=function(){var e,t,n,i,o,s,a,r,c=this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly;if(this.isGroupSubmission()){var l=this.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback;if(this.tabKey===T.FeedbackPivotKey.General)return null!=(null===(t=null===(e=this.feedbackText)||void 0===e?void 0:e.bbml)||void 0===t?void 0:t.current)&&(null===(i=null===(n=this.feedbackText)||void 0===n?void 0:n.bbml)||void 0===i?void 0:i.current)!==l&&!c;if(this.tabKey===T.FeedbackPivotKey.Individual)return null!=(null===(s=null===(o=this.feedbackTextIndividual)||void 0===o?void 0:o.bbml)||void 0===s?void 0:s.current)&&null!=l&&(null===(r=null===(a=this.feedbackTextIndividual)||void 0===a?void 0:a.bbml)||void 0===r?void 0:r.current)!==l&&!c}return!c&&this.feedbackParams.feedbackIsDirty()},e.prototype.onShowCloseConfirmationModal=function(e){this.confirmedToClose||!this.feedbackIsDirty()||this.isInlineMode||(e.preventDefault(),this.showCloseConfirmationModal())},e.prototype.isGroupSubmission=function(){return this.ultraState.getCurrentResolvedValues().currentContent.isGroupContent},e.prototype.initialize=function(){var e=this;try{this.initializeContent().then((function(){e.isLoading=!1,e.currentCourseMembership.isStudentMembership()&&!e.feedbackParams.gradeDetail||e.buildFeedbackAuthoringPayload({},!0),e.feedbackParams.gradeDetail&&e.$scope.$emit(z,e.feedbackIsDirty(),0===e.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback.length)})),this.peerReviewService.setContent(this.ultraState.getCurrentResolvedValues().currentContent)}catch(e){this.errorModalService.showDefaultErrorModal()}},e.prototype.initializeContent=function(){var e=this;return this.feedbackParams.loadAssessmentTitle(),this.feedbackParams.hideCancelSaveButtons=this.shouldHideCancelSaveButtons(),this.$q.all([this.feedbackParams.load(),this.feedbackParams.initializeCloudService()]).then((function(){return e.feedbackParams.loadCourseColorAndGradeDetail()}))},e.prototype.onClickSave=function(e,t){var n=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),this.confirmedToClose=!0,this.currentFeedbackParams.save().then((function(){if(n.$rootScope.$broadcast(j),n.buildFeedbackAuthoringPayload(),!n.isInlineMode)return s.a.features.differentiatedFeedback&&n.isGroupSubmission()||n.inline?(r.isBoolean(e)&&e&&n.closePanel(),void(n.confirmedToClose=!1)):void n.closePanel();n.resumeNavigation&&n.resumeNavigation()}))},e.prototype.onClickEdit=function(){this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly=!1,this.triggerFeedbackAuthoringComponentReRender()},e.prototype.onClickCancel=function(){s.a.features.differentiatedFeedback&&this.isGroupSubmission()||!this.isCreateMode()?this.onClickCancelEditMode():this.isInlineMode||this.performClosePanel()},Object.defineProperty(e.prototype,"currentFeedbackParams",{get:function(){return this.tabKey===T.FeedbackPivotKey.General?this.feedbackParams:this.feedbackParamsIndividual},enumerable:!0,configurable:!0}),e.prototype.onClickCancelEditMode=function(){this.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback?this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly=!0:this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly=!1,this.triggerFeedbackAuthoringComponentReRender()},e.prototype.shouldHideCancelSaveButtons=function(){return!(!this.feedbackParams.isPeerGrading()||this.feedbackParams.isReconciler())},e.prototype.showCloseConfirmationModal=function(){this.$scope.$broadcast("show-confirmation","assessment-feedback")},e.prototype.closeConfirmationModalDismissed=function(){this.resumeNavigation=null},e.prototype.dontSaveAction=function(){if(this.isInlineMode){if(!this.isCreateMode())return this.onClickCancelEditMode(),void this.resumeNavigation();this.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback="",this.triggerFeedbackAuthoringComponentReRender(),this.resumeNavigation()}else this.performClosePanel()},e.prototype.performClosePanel=function(){this.confirmedToClose=!0,this.closePanel()},e.prototype.closePanel=function(){this.ultraState.leavePeekState()},e.prototype.onTabChange=function(e){this.tabKey=e,this.buildFeedbackAuthoringPayload()},e.prototype.onFeedbackChanged=function(e){(0,this.currentFeedbackParams.getEditorConfig().onEditorContentChanged)(e),this.$scope.$emit(z,this.feedbackIsDirty(),0===e.toBbML().length)},e.prototype.getFeedbackConfigProps=function(e){var t=this.localize.getReactBabelfishParams(),n=t.locale,i=t.babelfishInstance,o=t.babelfishFormatter,s=e.pluginConfig,a=s.xsrfToken,r=s.courseId,c=s.apiBasePath,l=s.openKloudlessModal,d=s.onUploadSuccess;return{configProps:{showIconForReconciler:this.feedbackParams.isPeerGrading()&&this.feedbackParams.isReconciler(),hideFeedbackFromPeerReviewer:!!this.hideFeedbackFromPeerReviewer,isPeerGrading:this.feedbackParams.isPeerGrading(),isOrganization:this.feedbackParams.isOrganization,courseColorClass:this.feedbackParams.courseColorClass,primaryFeedbackConfigProps:{editorIsReadOnly:e.isReadOnly,onClickEdit:this.onClickEdit.bind(this),onFeedbackChange:this.onFeedbackChanged.bind(this),showPeerReviewerSpecificText:this.feedbackParams.isPeerGrading()&&!this.feedbackParams.isReconciler(),showTextForStudentSubmissionPage:!!this.showTextForStudentSubmissionPage},editorConfigProps:{hideCancelSaveButtons:this.feedbackParams.hideCancelSaveButtons,locale:n,xsrfToken:a,courseId:r,apiBasePath:c,babelfishInstance:i,babelfishFormatInstance:o,openKloudlessModal:function(){return Object($.a)(l())},onUploadSuccess:d,onClickCancel:this.onClickCancel.bind(this),onClickSave:this.onClickSave.bind(this)}}}},e.prototype.isSecondaryFeedbackLate=function(e){return!!this.feedbackParams.isPeerGrading()&&(!!e.grader&&(!this.ultraSubmissionListService.submissionList.rows.find((function(t){return t.membership.userId===e.grader.id})).hasDueDateException&&this.peerReviewService.isAfterPeerReviewDueDate(e.attemptLastGradedDate)))},e.prototype.isPrimaryFeedbackLate=function(e){return!(!this.feedbackParams.isPeerGrading()||!e)&&(!!this.currentCourseMembership.isStudentMembership()&&(!this.currentCourseMembership.isDueDateExcepted()&&this.peerReviewService.isAfterPeerReviewDueDate(e)))},e.prototype.getFeedbackTextAndAttemptDate=function(e,t){var n,i=e,o=t;return this.isInlineMode&&this.currentCourseMembership.isStudentMembership()&&!(null===(n=this.feedbackParams.gradeDetail)||void 0===n?void 0:n.isPosted())&&(i="",o=null),{rawTextFeedback:i,attemptLastGradedDate:o}},e.prototype.getFeedbackAuthoringPrimaryGraderFeedback=function(e){var t,n,i,o,s,a=this.getFeedbackTextAndAttemptDate(e.bbml,null===(n=null===(t=this.feedbackText)||void 0===t?void 0:t.attempt)||void 0===n?void 0:n.attemptLastGradedDate);return{primaryGraderFeedback:{rawTextFeedback:a.rawTextFeedback,attemptLastGradedDate:a.attemptLastGradedDate,isFeedbackEditable:e.isPrivileged,late:this.isPrimaryFeedbackLate(null===(o=null===(i=this.feedbackText)||void 0===i?void 0:i.attempt)||void 0===o?void 0:o.attemptLastGradedDate),grader:Object(x.a)(null===(s=this.feedbackText)||void 0===s?void 0:s.attemptGrader)}}},e.prototype.getFeedbackAuthoringSecondaryGradersFeedback=function(){var e=this,t=this.feedbackText.getStagedAttemptGrades();return{secondaryGradersFeedback:this.filterStagedAttemptGrades(t).map((function(t,n){var i=e.getFeedbackTextAndAttemptDate(t.feedbackToUser.rawText,t.grader?t.attemptLastGradedDate:null);return{rawTextFeedback:i.rawTextFeedback,attemptLastGradedDate:i.attemptLastGradedDate,id:t.stagedAttemptId,grader:Object(x.a)(t.grader),showAnonymousWhenNoUserData:!0,late:e.isSecondaryFeedbackLate(t),isFeedbackFromCurrentStudent:!1,showVisibleIcon:t.showFeedbackToStudent,listIndex:n+1,onClickChangeVisibility:function(){t.toggleVisibility().$then((function(){e.feedbackAuthoringPayload.secondaryGradersFeedback[n].showVisibleIcon=t.showFeedbackToStudent,e.triggerFeedbackAuthoringComponentReRender()}))}}}))}},e.prototype.filterStagedAttemptGrades=function(e){return e&&e.filter((function(e){return e.hasGraderFeedback}))||[]},e.prototype.getIndividualFeedbackAuthoringProps=function(){var e,t,n,i,o=this,s=!1;if(this.isIndividualFeedbackAuthoringEditView()){e=this.getUserIdFromParams();var a=this.ultraState.getCurrentUrlParams().groupId,c=r.find(this.ultraSubmissionListService.submissionList.rows,(function(e){return e.group.id===a&&!!e.group.memberships})),l=c?c.group.memberships:[],d=e?r.findIndex(l,(function(t){return t.userId===e})):0;e=l[d].userId,t=this.getFormatUsername(l[d].ui.user),l[d+1]&&(n=function(){o.ultraState.search("userId",l[d+1].userId)}),l[d-1]&&(i=function(){o.ultraState.search("userId",l[d-1].userId)}),s=!0}else e=this.contextUser.userId,t=this.getFormatUsername(this.contextUser.userModel);var u=this.getGroupIndividualAttempt(e);return this.feedbackParamsIndividual.loadTextSync(u),{panelTitle:t,configProps:{allowMultipleFeedbackNavigation:s,onNavigateToNextFeedback:n,onNavigateToPreviousFeedback:i}}},e.prototype.getGeneralFeedbackAuthoringProps=function(){var e=this.isGroupSubmission()&&this.isIndividualFeedbackAuthoringEditView(),t=this.getGeneralFeedbackTitleAndSubtitle();return{panelTitle:t.panelTitle,panelSubtitle:t.panelSubtitle,configProps:{allowMultipleFeedbackNavigation:e}}},e.prototype.getGeneralFeedbackTitleAndSubtitle=function(){var e,t;if(this.isGroupSubmission())if(this.isIndividualFeedbackAuthoringEditView()){var n=this.ultraState.getCurrentUrlParams().groupId;e=r.find(this.ultraSubmissionListService.submissionList.rows,(function(e){return e.group.id===n})).group.title}else{e=this.ultraState.getCurrentResolvedValues().currentContent.assignedGroups[0].groupTitle}else{var i=void 0;if(this.isIndividualFeedbackAuthoringEditView()&&!this.feedbackParams.isPeerGrading()){var o=this.getUserIdFromParams();i=r.find(this.ultraSubmissionListService.submissionList.rows,(function(e){return e.user.id===o})).user}else i=this.contextUser.userModel;e=this.getFormatUsername(i)}if(!s.a.features.differentiatedFeedback){var a=this.feedbackParams.isOrganization?"organization":"course";e=this.localize.translateSync({locale:this.localize.getLocale(this.$scope),key:this.feedbackText.canEnterFeedback()?a+".content.assessment.attempt.feedback.placeholder.privileged":a+".content.assessment.feedback.title"}),t=this.feedbackParams.assessmentTitle}return{panelTitle:e,panelSubtitle:t}},e.prototype.getFeedbackAuthoringGroupConfig=function(e){if(void 0===e&&(e=!1),e&&(this.tabKey=this.isOpenFromGroupAttempt()?T.FeedbackPivotKey.General:T.FeedbackPivotKey.Individual,s.a.features.differentiatedFeedback&&!this.isIndividualFeedbackAuthoringEditView())){var t=this.getGroupIndividualAttempt(this.contextUser.userId),n=this.feedbackParamsIndividual.loadTextSync(t),i=this.feedbackParams.feedbackText.getInitialBbml();!n||""===n||""!==i&&i||(this.tabKey=T.FeedbackPivotKey.Individual)}return{configProps:{isFeedbackForGroupSubmission:!0,onGroupTabChange:this.onTabChange.bind(this),initialSelectedTabKey:this.tabKey}}},e.prototype.buildFeedbackAuthoringPayload=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n={},i={};this.isGroupSubmission()&&(i=this.getFeedbackAuthoringGroupConfig(t)),n=this.tabKey===T.FeedbackPivotKey.Individual?this.getIndividualFeedbackAuthoringProps():this.getGeneralFeedbackAuthoringProps(),this.isFeedbackAuthoringPayloadLoaded=!0;var o=this.currentFeedbackParams.getEditorConfig();this.feedbackAuthoringPayload=r.merge({analyticsId:"assessment"},n,i,this.getFeedbackConfigProps(o),this.getFeedbackAuthoringPrimaryGraderFeedback(o),this.getFeedbackAuthoringSecondaryGradersFeedback(),e)},e.prototype.triggerFeedbackAuthoringComponentReRender=function(){this.feedbackAuthoringPayload=r.cloneDeep(this.feedbackAuthoringPayload)},e.prototype.isIndividualFeedbackAuthoringEditView=function(){return!!this.ultraSubmissionListService.submissionList},e.prototype.getGroupIndividualAttempt=function(e){return r.find(this.feedbackText.attempt.attempts,{userId:e})},e.prototype.isOpenFromGroupAttempt=function(){return!this.ultraSubmissionListService.submissionList||!this.getUserIdFromParams()},e.prototype.getUserIdFromParams=function(){var e=this.ultraState.getCurrentUrlParams().userId;return r.isArray(e)&&(e=e[0]),e},Object(i.__decorate)([Object(S.c)()],e.prototype,"onClickSave",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onClickEdit",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onClickCancel",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onTabChange",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onFeedbackChanged",null),e=Object(i.__decorate)([Object(E.a)({module:U,componentName:B,template:R,bindings:{inline:"<?",hideFeedbackFromPeerReviewer:"<",showTextForStudentSubmissionPage:"<?"}}),Object(i.__param)(0,Object(S.b)("$rootScope")),Object(i.__param)(1,Object(S.b)("$scope")),Object(i.__param)(2,Object(S.b)("$q")),Object(i.__param)(3,Object(S.b)("$injector")),Object(i.__param)(4,Object(S.b)(G.b)),Object(i.__param)(5,Object(S.b)(l.serviceName)),Object(i.__param)(6,Object(S.b)(f.b)),Object(i.__param)(7,Object(S.b)(d.c)),Object(i.__param)(8,Object(S.b)(y.b)),Object(i.__param)(9,Object(S.b)(m.d)),Object(i.__param)(10,Object(S.b)(k.b)),Object(i.__param)(11,Object(S.b)(P.d))],e)}(),q=function(){function e(e,t,n,i,o,a,r,c,l,d,u,p){var m=this;this.$q=e,this.localize=t,this.courseModel=n,this.ultraStateService=i,this.context=o,this.feedbackText=a,this.rteKloudlessService=r,this.$scope=c,this.contextUser=l,this.contextCourse=d,this.contentData=u,this.currentCourseMembership=p,this.placeholder="",this.webLocation="",this.fileLocation="",this.getPlaceholderLocalizeKey=function(){return m.canEnterFeedback()?"course.content.assessment.attempt.feedback.placeholder.privileged":m.getPlaceholderReadonlyLocalizeKey()},this.getTranslation=function(e){return m.localize.translate({locale:m.localize.getLocale(m.$scope),key:e})},this.loadPlaceholder=function(){var e=m.getPlaceholderLocalizeKey();return m.getTranslation(e).then((function(e){m.placeholder=e}))},this.loadText=function(){return m.feedbackText.load().then((function(e){return m.bbml=e.rawText,m.webLocation=e.webLocation,m.fileLocation=e.fileLocation,m.isEditorReadOnly=!m.canEnterFeedback()||!!e.rawText,e.rawText}))},this.loadTextSync=function(e){var t=m.feedbackText.loadSync(e);return m.bbml=t.rawText,m.webLocation=t.webLocation,m.fileLocation=t.fileLocation,m.isEditorReadOnly=!m.canEnterFeedback()||!!t.rawText,t.rawText},this.load=function(){m.ultraStateService.getCurrentUrlParams().contentId;return m.$q.all([m.getCurrentCourse(),m.loadText()]).then((function(e){var t=e[0];e[1];m.loadPlaceholder(),m.isOrganization=t.isOrganization,m.currentCourse=t}))},this.loadCourseColorAndGradeDetail=function(){var e=m.ultraStateService.getCurrentUrlParams().contentId;return m.currentCourse?m.$q.all([m.currentCourse.users.$find(m.contextUser.userId,{expand:"courseRole"}).$allow([404]).$asPromise(),m.currentCourseMembership.isStudentMembership()&&m.contentData.loadContentAndGrades({contentId:e,course:m.currentCourse})]).then((function(e){var t=e[0],n=e[1];m.courseColorClass=t.getCourseColorClass(),m.gradeDetail=null==n?void 0:n.gradeDetail})):m.$q.resolve(void 0)},this.loadAssessmentTitle=function(){var e=m.ultraStateService.getCurrentResolvedValues().currentContent;return m.assessmentTitle=e.title,e.title},this.canViewAttemptGrades=function(){return m.feedbackText.canViewAttemptGrades()},this.canEnterFeedback=function(){return m.feedbackText.canEnterFeedback()},this.getPluginConfig=function(){return{courseId:m.ultraStateService.getCurrentUrlParams().courseId,xsrfToken:m.context.xsrfToken,apiBasePath:Object(O.c)(s.a.apiBasePath),fileLocation:m.fileLocation,webLocation:m.webLocation,shouldEnableKloudless:m.rteKloudlessService.isCloudServiceAvailable,openKloudlessModal:m.rteKloudlessService.isCloudServiceAvailable?m.rteKloudlessService.getModalCallback(m.$scope):void 0,onUploadSuccess:m.feedbackText.onUploadSuccess.bind(m.feedbackText)}},this.getEditorConfig=function(){return{bbml:m.bbml,isReadOnly:m.isEditorReadOnly,isPrivileged:m.canEnterFeedback(),onEditorContentChanged:m.feedbackText.feedbackTextDidChange,pluginConfig:m.getPluginConfig()}},this.save=function(e){return void 0===e&&(e=!1),m.feedbackText.save(e).then((function(e){m.bbml=e.rawText,m.webLocation=e.webLocation,m.fileLocation=e.fileLocation,m.isEditorReadOnly=!!e.rawText}))},this.feedbackIsDirty=function(){return m.feedbackText.feedbackIsDirty()},this.isReconciler=function(){return m.ultraStateService.getCurrentResolvedValues().currentColumn.isUserReconciler(m.contextUser.userId)},this.isPeerGrading=function(){var e=m.ultraStateService.getCurrentResolvedValues().currentColumn;return null==e?void 0:e.peerGrading}}return e.prototype.getPlaceholderReadonlyLocalizeKey=function(){var e=this.ultraStateService.getCurrentResolvedValues().currentColumn;return e&&e.delegatedGrading?"course.content.assessment.attempt.feedback.placeholder.reconciledReadonly":"course.content.assessment.attempt.feedback.placeholder.readonly"},e.prototype.getCurrentCourse=function(){var e=this.ultraStateService.getCurrentUrlParams().courseId;return this.courseModel.$find(e).$asPromise()},e.prototype.initializeCloudService=function(){return this.rteKloudlessService.initialize()},e.$inject=["$q",l.serviceName,a.o.serviceName,m.d,h.b,"feedbackText",v.b,"$scope",f.b,g.e,b.b,P.d],e}(),K=function(){},W="<div>\n  <assessment-feedback></assessment-feedback>\n  <div ui-view></div>\n</div>";U.controller(F,K)},"1Niw":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    class="button-add-content js-show-add-options"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.editor.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="::addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>\n\x3c!--\n  The elements are kept around to trigger download actions.\n  The \'ng-hide\' class is added to prevent the buttons from interfering with AX (tab order, screen readers)\n--\x3e\n<ul class="element-list-add-menu angular-animate ng-hide">\n  <li>\n    <button type="button"\n            class="js-add-text-block"\n            ng-click="addContentButton.addTextBlock()"\n            analytics-id="components.directives.add-content-button.editor.addText.button">\n      <div>\n        <i class="icon-doc-pencil-2"></i>\n        <span bb-translate>components.directives.add-content-button.addContent</span>\n      </div>\n    </button>\n  </li>\n  <li ng-if="addContentButton.canEditUnsafeHtml">\n    <button type="button"\n            ng-click="addContentButton.addHtmlBlock()"\n            analytics-id="components.directives.add-content-button.editor.addHtml.button">\n      <div>\n        <bb-svg-icon size="small" icon="code"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.addHtml</span>\n      </div>\n    </button>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      click-enabled="true"\n      disable-drag="false"\n      class="js-file-upload"\n      web-location="{{webLocation}}"\n      file-location="{{fileLocation}}"\n      target-div="{{\'#\' + fileListViewId}}"\n      disallow-folder-uploads="true"\n      is-third-party-upload="false"\n      ignored-states="::ignoredStates()">\n        <button\n          type="button"\n          class="file-upload-button"\n          ng-click="addContentButton.assignPosition()"\n          aria-label="{{addContentButton.uploadAriaLabel}}"\n          analytics-id="components.directives.add-content-button.editor.fileUpload.button">\n          <div ng-if="!addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromComputer</span>\n          </div>\n          <div ng-if="addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromDevice</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="::addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="false"\n      monitor-leave="true"\n      target-div="{{\'#\' + fileListViewId}}"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      disable-drag="true"\n      is-third-party-upload="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      ignored-states="::ignoredStates()">\n      <button\n        type="button"\n        class="js-upload-from-kloudless"\n        ng-click="addContentButton.assignPosition()"\n        bb-kloudless\n        primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n        attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="false"\n        on-cancel-focus="!initialUpload ? addContentButton.focusAddButton : null"\n        analytics-id="components.directives.add-content-button.editor.uploadFromCloudStorage.button">\n          <div>\n            <i class="icon-cloud"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromCloudStorage</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n</ul>\n'},"2E9T":function(e,t){e.exports='<bb-svg-icon size="small" icon="add" class="js-add-plus add-circle-default"></bb-svg-icon>\n<bb-svg-icon size="small" icon="add" status="active" class="js-add-plus add-circle-active"></bb-svg-icon>'},"2a+M":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var i=n("D57K"),o=n("nsO7"),s=n("wHJ2"),a=n("nbDY"),r=n.n(a),c=n("0JpG"),l="ultra.services.dragDrop",d="dragDropService",u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.TOP=new t("TOP"),t.BOTTOM=new t("BOTTOM"),t.FOLDER=new t("FOLDER"),t.SELF=new t("SELF"),t}(r.a),p=function(){function t(e,t){var n=this;this.$timeout=e,this.bbLocalize=t,this.dragHoverClass="dz-drag-hover",this.dragElementSelector=".drag-element",this.onFolderClass="on-folder",this.onNestedFolderClass="on-nested-folder",this.originalElementClass="drag-element-original",this.movableElementClass="drag-element-movable",this.queuedScreenReaderMessages="",this.bbLocalize.loadBundle("components/services/drag-drop").then((function(){n.folderDepthMessageKey="components.services.drag-drop.folderDepthMessage"}))}return t.prototype.createDropPlaceholderElement=function(t){this.dropPlaceholderElement=e('<div class="dragdropplaceholder js-no-file-drop" style="height: '+t.height()+"px; width: "+t.width()+'px"></div>')},t.prototype.setDropTarget=function(e){this.lastDropTargetId=this.currentDropTargetId,this.currentDropTargetId=e},t.prototype.clearDropTarget=function(){this.setDropTarget(void 0)},t.prototype.isCurrentDropTarget=function(e){return this.currentDropTargetId===e},t.prototype.isNotSameDropTarget=function(){return this.currentDropTargetId!==this.lastDropTargetId},t.prototype.scrollDragDropItemsContainer=function(e,n){var i=this._getScrollingContainerElement();if(i){var o=e<t.SCROLLING_CONSTANTS.scrollZoneHeight,s=e>i.height()-t.SCROLLING_CONSTANTS.scrollZoneHeight,a=i.scrollTop();o?i.scrollTop(a-n):s&&i.scrollTop(a+n)}},t.prototype._getScrollingContainerElement=function(){var e=this,n=t.SCROLL_CONTAINERS_SELECTORS.map((function(t){return e.originalElement.closest(t)}));return o.find(n,(function(t){return e._elementHasScrollbar(t)}))},t.prototype._elementHasScrollbar=function(e){return e.get(0).scrollHeight>e.innerHeight()},t.SCROLLING_CONSTANTS={scrollZoneHeight:200,mouseInteractionDistanceToScroll:30,keyboardInteractionDistanceToScroll:200},t.SCROLL_CONTAINERS_SELECTORS=[".panel-wrap",".panel-content"],t.$inject=["$timeout",c.serviceName],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(p);s.module(l,[c.moduleName]).service(d,p)}).call(this,n("5iHu"))},"2bSy":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("wHJ2"),o=n("LN5R"),s=n("dF44"),a=n("qH3X"),r=n("KeOq"),c="ultra.components.directives.gradeGridColumnHeaderStudentReborn",l=function(){function e(e,t,n,i){var o=this;this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,e.studentsTotal=i.getRowCount(),e.$on(s.b.CELL_FOCUSED,(function(){t.find(".content").focus()})),[a.a.UPDATED_FILTER_CONDITION,a.a.GRADEBOOK_USER_SELECTED,a.a.GRADEBOOK_CLEAR_SELECTED].forEach((function(t){e.$on(t,(function(){o.scope.studentsTotal=i.getRowCount()}))}))}return e.$inject=["scope","element","attrs","gradeGridRebornController"],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=r,this.scope=!0,this.require="^"+o.a,this.link=function(e,n,i,o){e.gradeGridColumnHeaderStudentReborn=t.$injector.instantiate(l,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();i.module(c,[]).directive("bbGradeGridColumnHeaderStudentReborn",["$injector",function(e){return e.instantiate(d)}])},"2i58":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-content-market",use:"icon-small-content-market-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-market"><path d="M2 2h13l-1 8H4" stroke-width="2" stroke-linejoin="round" /><circle cx="13" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="4" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 6h11.5M7 2v8M11 2v8M1 1h1l2 12h9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"2o5C":function(e,t,n){"use strict";n.d(t,"d",(function(){return D})),n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return T}));var i=n("D57K"),o=n("wHJ2"),s=n("aHpC"),a=n("8W6D"),r=n("Sa5G"),c=n("tka7"),l=n("Iftj"),d=n("oi1r"),u=n("P2dS"),p=n("+4Px"),m=n("0JpG"),h=n("pjml"),g=n("lEL+"),b=n("TnpK"),f=n("JNtI"),v=n("MoIS"),y=n("jhBu"),w=n("X/qj"),C=n("Fvsw"),S=n("r6lH"),k=n("nmzr"),I=n("cR84"),D="ultra.features.course.grades.gradesSettings.controller",E="update-telemetry-settings",O="refresh-after-update-settings",T=function(){function e(e,t,n,i,s,c,d,u,p,m,h,g,b,f,v){var y=this;this.$scope=e,this.$rootScope=t,this.$q=n,this.course=i,this.$modal=s,this.localizeService=c,this.timeout=d,this.GradeNotationModel=u,this.ultraState=p,this.schemaService=m,this.categoryService=h,this.gradebookPermissionService=g,this.entitlementService=b,this.context=f,this.telemetry=v,this.isShowSettingPage=!0,this.isSchemaTitleEditable=!1,this.notations=[],this.isCodeValidate=!0,this.hasTelemetryData=!1,this.showAddNewCategory=!1,this.newCategoryName="",this.isInputBluredByCancelAdd=!1,this.isInputBlurredByCancelButton=!1,this.currentEditedCategory=null,this.focusNotationEventName="add-notation-button-focus",this.isPastZeroAssigned=!0,e.gradesSettings=this,this.courseId=this.ultraState.nextParams.courseId,this.hasGradebookModifyAccess=this.gradebookPermissionService.canModify(),i&&(m.loadSchemas(i).then((function(e){e.forEach((function(e){e.localizableTitle&&(e.ui.displayTitle=y.localizeService.translateSync({locale:y.localizeService.getLocale(y.$scope),key:e.ui.displayTitleKey}))})),y.schemas=e.filter((function(e){return l.ScaleType.Tabular.isEqualTo(e.scaleType)}))})),i.gradebook.settings.$resolve().$then((function(e){y.gradebookSettings=e,y.isPastZeroAssigned=e.countUnsubmittedWorkAsZero,y.isPastZeroCompleted=y.course.isComplete()})),this.categoryService.getOrLoadCategoriesForCourse(i.id,!0).then((function(e){y.categories=e})),i.gradebook.performancecodes.$refresh().$then((function(e){e.forEach((function(e){var t={model:e,id:y.generateNotationId(),isEditing:!1,code:e.code,description:e.description};y.notations.push(t)})),y.notations.permissions=e.permissions})),this.loadTelemetrySettings(i),this.$scope.$on(E,(function(e,t){y.studentFailingThreshold=t.studentFailingThreshold,y.studentAbsentThreshold=t.studentAbsentThreshold,y.studentAlertsEnabled=t.studentAlertsEnabled}))),this.validationManager={isEmpty:function(e){return!e},isNotationNumberOnly:function(e){return!Number.isNaN(Number(e))},isNotationExist:function(e){return y.notations.some((function(t){return t!==e&&t.code===e.code}))},isNotationSchemaDuplicate:function(e){return y.schemas[0].symbols.some((function(t){return t.symbol===e.code}))},isCategoryDuplicate:function(e,t){return y.categories.some((function(n){if(n===t)return!1;var i=n.localizableTitle.languageKey;return n.isUserDefined||(i=i.substr(0,i.indexOf("."))),i.toLocaleLowerCase()===e.toLocaleLowerCase()}))},execute:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=y.validationManager;return i[e]&&i[e].apply(i,[].slice.call(t,0))}},this.validationManager.execute(),this.entitlementService.hasCourseEntitlement(r.l.ModifyRubrics,this.courseId).then((function(t){e.hasRubricEditAccess=t})),this.context.getSystemInfo().$asPromise().then((function(e){e.telemetryEnabled&&y.telemetry.determinePanelSref(y.courseId).then((function(e){y.hasTelemetryData=!0}))})),e.$on("$stateChangeStart",(function(t,n,i,o,s){if(o.name.endsWith(k.GradeRoutes.GRADE_SETTING)&&!n.name.endsWith(k.GradeRoutes.GRADE_SETTING)&&e.gradesSettings.saveTelemetrySettings(),o.name===n.name||e.gradeSchemasPanelForm&&(!e.gradeSchemasPanelForm||e.gradeSchemasPanelForm.$dirty)){if(n.name.indexOf("rubric.mode")>1&&a.a.COPY.isEqualTo(a.a.parse(i.mode)))return!0;t.preventDefault()}else y.leaveEditMode(y.activeNotation,"confirm")})),e.$watch("gradeSchemasPanelForm.$dirty",(function(){y.isShowSettingPage||(e.gradeSchemasPanelForm&&e.gradeSchemasPanelForm.$dirty?(o.element(".bb-offcanvas-panel.peek .bb-close").hide(),o.element(".bb-offcanvas-panel.peek .panel-wrap").addClass("has-footer")):(o.element(".bb-offcanvas-panel.peek .bb-close").show(),o.element(".bb-offcanvas-panel.peek .panel-wrap").removeClass("has-footer")))}))}return e.prototype.loadTelemetrySettings=function(t){var n=this;t.preferences.getPreference(e.INITIAL_FAILING_PREF_ARGS).then((function(e){n.studentFailingThreshold=e.value&&!Number.isNaN(Number(e.value))?Number(e.value):void 0})),t.preferences.getPreference(e.INITIAL_ABSENT_PREF_ARGS).then((function(t){null==t.value?n.studentAbsentThreshold=e.STUDENT_ABSENT_DEFAULT:0===Number(t.value)||Number.isNaN(Number(t.value))?n.studentAbsentThreshold=void 0:n.studentAbsentThreshold=Number(t.value)})),t.preferences.getPreference(e.INITIAL_ENABLE_PREF_ARGS).then((function(e){n.studentAlertsEnabled=e.value}))},Object.defineProperty(e.prototype,"postOption",{get:function(){return this.gradebookSettings&&this.gradebookSettings.promptUserToPostWhenDone?"true":"false"},set:function(e){this.gradebookSettings.promptUserToPostWhenDone="true"===e},enumerable:!0,configurable:!0}),e.prototype.switchView=function(e,t){this.isShowSettingPage=e,t&&(this.currentViewSchema=t,this.originCurrentViewSchema=o.copy(this.currentViewSchema))},e.prototype.goToTelemetryView=function(){this.ultraState.goPeekState(k.TelemetryRoutes.INSTRUCTOR_CLASS)},e.prototype.toggleSchemaTitleEditable=function(){this.course.isComplete()||(!this.isSchemaTitleEditable||this.currentViewSchema.title&&this.currentViewSchema.title.length>0)&&(this.isSchemaTitleEditable?this.currentViewSchema.ui.displayTitle=this.currentViewSchema.title:this.currentViewSchema.localizableTitle?this.currentViewSchema.title=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:this.originCurrentViewSchema.ui.displayTitleKey}):this.currentViewSchema.title=this.originCurrentViewSchema.ui.displayTitle,this.isSchemaTitleEditable=!this.isSchemaTitleEditable)},e.prototype.adjustLowerBound=function(e,t){if(t<this.currentViewSchema.symbols.length-1){var n=this.currentViewSchema.symbols[t+1];n.upperBound=e.lowerBound,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2}e.absoluteTranslation=(e.lowerBound+e.upperBound)/2},e.prototype.isValidSymbolStr=function(e){for(var t=0,n=0;n<this.currentViewSchema.symbols.length;n++)this.currentViewSchema.symbols[n].symbol===e.symbol&&t++;return 1===t},e.prototype.addSymbol=function(e,t){var n=this;if(!(t<this.currentViewSchema.symbols.length-1))throw new Error("Can not add a symbol to the last symbol in the array.");var i=this.currentViewSchema.symbols[t+1],o=(i.lowerBound+i.upperBound)/2;this.currentViewSchema.symbols.splice(t+1,0,{schemaId:e.schemaId,lowerBound:o,upperBound:i.upperBound,absoluteTranslation:(o+i.upperBound)/2,symbol:void 0}),i.upperBound=o,i.absoluteTranslation=(i.lowerBound+i.upperBound)/2,this.currentViewSchema.symbols[t+2]=i,this.timeout((function(){n.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"add",index:t+1})}),this.$scope)},e.prototype.deleteSymbol=function(e,t){var n=this;if(!(t!==this.currentViewSchema.symbols.length-1&&this.currentViewSchema.symbols.length>2))throw new Error("Can not delete the two last symbols in the array.");var i=this.currentViewSchema.symbols[t+1];i.upperBound=e.upperBound,i.absoluteTranslation=(i.lowerBound+i.upperBound)/2,this.currentViewSchema.symbols.splice(t,1),this.timeout((function(){n.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"delete",index:t})}),this.$scope)},e.prototype.validate=function(){var e;return null===(e=this.$scope.gradeSchemasPanelForm)||void 0===e?void 0:e.$valid},e.prototype.cancel=function(){o.copy(this.originCurrentViewSchema.symbols,this.currentViewSchema.symbols),this.currentViewSchema.title=this.originCurrentViewSchema.title,this.currentViewSchema.localizableTitle?this.currentViewSchema.ui.displayTitle=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:this.originCurrentViewSchema.ui.displayTitleKey}):this.currentViewSchema.ui.displayTitle=this.originCurrentViewSchema.ui.displayTitle,this.$scope.gradeSchemasPanelForm.$setPristine()},e.prototype.save=function(){var e=this;this.currentViewSchema.$patch().$then((function(t){e.$rootScope.$broadcast("bb-grades-schema-save",t),e.originCurrentViewSchema=o.copy(e.currentViewSchema),e.originCurrentViewSchema.title=e.currentViewSchema.title,e.$scope.gradeSchemasPanelForm.$setPristine()}))},e.prototype.validateTelemetrySettings=function(){var e;return null===(e=this.$scope.telemetrySettingsForm)||void 0===e?void 0:e.$valid},e.prototype.saveTelemetrySettings=function(){if(!this.course)return this.$q.when(!0);var t={key:e.STUDENT_FAILING_PREFERENCE_KEY,value:this.studentFailingThreshold,visibleToStudents:!0},n={key:e.STUDENT_ABSENT_PREFERENCE_KEY,value:this.studentAbsentThreshold?this.studentAbsentThreshold:e.DISABLE_ABSENT_NOTICES,visibleToStudents:!0},i={key:e.STUDENT_ALERTS_ENABLED,value:this.studentAlertsEnabled,visibleToStudents:!0};return null!=this.studentFailingThreshold?this.$q.all([this.course.preferences.setPreference(t),this.course.preferences.setPreference(n),this.course.preferences.setPreference(i)]):this.$q.all([this.course.preferences.deletePreference(e.STUDENT_FAILING_PREFERENCE_KEY),this.course.preferences.setPreference(n),this.course.preferences.setPreference(i)])},e.prototype.getCourseColor=function(){return this.$scope.course.courseColorClass},e.prototype.addNewCategory=function(){var e=this;this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.isInputBluredByCancelAdd=!1,this.showAddNewCategory=!0,this.timeout((function(){o.element("#add-new-category-input").on("keydown",(function(t){t.keyCode!==p.u||t.shiftKey||(e.isInputBluredByCancelAdd=!0)}));var t=o.element("#cancel-add-category-button");t.on("mousedown",(function(){e.isInputBluredByCancelAdd=!0})),t.on("keydown",(function(t){t.keyCode===p.u&&t.shiftKey?e.isInputBluredByCancelAdd=!1:t.keyCode===p.u&&(e.isInputBluredByCancelAdd=!1,e.validateAndAddCategory())}))}),this.$scope,0,!1)},e.prototype.cancelAddNewCategory=function(){this.newCategoryName="",this.showAddNewCategory=!1,this.clearValidationForAddCategory()},e.prototype.editCategory=function(e){var t=this;this.showAddNewCategory&&this.cancelAddNewCategory(),this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.switchEditMode(e,!0),e.isUserDefined&&this.timeout((function(){o.element("#cancel-update-category-button-"+e.id).on("mousedown",(function(){t.isInputBlurredByCancelButton=!0}))}),this.$scope)},e.prototype.cancelEditCategory=function(e){this.switchEditMode(e,!1),this.clearValidationForUpdateCategory(e)},e.prototype.switchEditMode=function(e,t){var n=this;this.timeout((function(){n.isInputBlurredByCancelButton=!t,n.currentEditedCategory=t?e:null,n.newCategoryName=t?e.localizableTitle.languageKey:"",e.ui.isEditMode=t}),this.$scope),t&&this.timeout((function(){n.addEventHandlerForEditCategory(e)}),this.$scope)},e.prototype.validateCategory=function(e,t){var n=this.validationManager,i=n.execute("isEmpty",this.newCategoryName),o=!i&&n.execute("isCategoryDuplicate",this.newCategoryName,t),s=t?t.ui.form[e+t.id]:this.$scope.addCategoryForm[e];return s&&(i||o)&&(s.$setValidity("required",!i),s.$setValidity("nameDuplicate",!o),s.$setDirty()),!i&&!o},e.prototype.createCategory=function(){var e=this;this.isInputBluredByCancelAdd||this.course.gradebook.categories.$create({title:this.newCategoryName}).$then((function(t){var n=e.categories.length;if(n>0){e.categoryService.reorderCategories(e.categories,n-1),e.cancelAddNewCategory();var i=e.$scope.addCategoryForm["add-new-category-input"];i&&i.$setPristine(),e.categoryService.updateCategoriesForCourse(e.course.id,t),t.permissions={delete:!0,edit:!0},e.timeout((function(){e.addEventHandlerForEditCategory(t)}),e.$scope)}}))},e.prototype.addEventHandlerForEditCategory=function(e){var t=this;o.element("#update-category-input-"+e.id).on("keydown",(function(e){e.keyCode!==p.u||e.shiftKey||(t.isInputBlurredByCancelButton=!0)}));var n=o.element("#cancel-update-category-button-"+e.id);n.on("mousedown",(function(e){t.isInputBlurredByCancelButton=!0})),n.on("keydown",(function(n){n.keyCode===p.u&&n.shiftKey?t.isInputBlurredByCancelButton=!1:n.keyCode===p.u&&(t.isInputBlurredByCancelButton=!1,t.validateAndUpdateCategory(e))}))},e.prototype.deleteCategory=function(e){var t=this,n=this.categories[e];this.categories[e].$destroy().$allow(["400"]).$asPromise().then((function(e){e&&e.$response&&e.$response.data&&400===e.$response.data.status?t.$modal.open({template:I,scope:t.$scope,resolve:{translations:[m.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]}}):t.categoryService.deleteCategoriesForCourse(t.course.id,n)}))},e.prototype.updateCategory=function(e){var t=this;this.isInputBlurredByCancelButton||(e.localizableTitle.languageKey=this.newCategoryName,e.title=e.localizableTitle.languageKey,e.$save(["title"]).$then((function(){t.switchEditMode(e,!1),t.categoryService.updateCategoriesForCourse(t.course.id,e)})))},e.prototype.getCategoryIcon=function(e){return this.categoryService.getCategoryIcon(e)},e.prototype.validateAndAddCategory=function(){this.validateCategory("add-new-category-input")&&this.createCategory()},e.prototype.validateAndUpdateCategory=function(e){this.validateCategory("update-category-input-",e)&&this.updateCategory(e)},e.prototype.getCategoryMaxLength=function(){return 64},e.prototype.getCategoryMaxLengthDiff=function(){var e=this.$scope.addCategoryForm["add-new-category-input"].$error;return e&&e.maxlength?e.maxlength.diff:0},e.prototype.getCategoryMaxLengthDiffUpdate=function(e){var t=e.ui.form["update-category-input-"+e.id].$error;return t&&t.maxlength?t.maxlength.diff:0},e.prototype.showOptionsForCategory=function(e){return!h.E.GradeCategoryTitleEnum.Attendance.isEqualTo(e.title)&&(!e.permissions||(e.permissions.delete||e.permissions.edit))},e.prototype.getCategoryOverflowMenu=function(e){var t=this,n=[];return e.permissions&&e.permissions.edit&&n.push({icon:"draw",onClick:function(){t.editCategory(e)},labelKey:"global.edit"}),e.permissions&&e.permissions.delete&&n.push({icon:"trash",onClick:function(){t.deleteCategory(t.categories.indexOf(e))},confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return t.$q.when(f.a("x-bb-category-delete"))}},labelKey:"global.delete"}),n},e.prototype.clearValidationForAddCategory=function(){var e=this.$scope.addCategoryForm["add-new-category-input"];e&&(e.$setValidity("required",!0),e.$setValidity("nameDuplicate",!0),e.$setPristine())},e.prototype.clearValidationForUpdateCategory=function(e){var t=e.ui.form["update-category-input-"+e.id];t&&(t.$setValidity("required",!0),t.$setValidity("nameDuplicate",!0),t.$setPristine())},e.prototype.getCodeOverflowMenu=function(e){var t=this,n=[];return e.model.permissions&&e.model.permissions.update&&n.push({icon:"draw",onClick:this.updateNotation.bind(this,e),labelKey:"global.edit"}),e.model.permissions&&e.model.permissions.delete&&n.push({icon:"trash",onClick:this.deleteNotation.bind(this,e),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return t.$q.when(f.a("x-bb-grade-notation"))}},labelKey:"global.delete"}),n},Object.defineProperty(e.prototype,"isNotationEditing",{get:function(){return this.notations.some((function(e){return e.isEditing}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeNotation",{get:function(){return this.notations.filter((function(e){return e.isEditing}))[0]},enumerable:!0,configurable:!0}),e.prototype.showOptionsForNotation=function(e){var t=e.model.permissions;return!t||(t.delete||t.update)},e.prototype.createNotation=function(e){this.isNotationEditing||(e.stopPropagation(),this.buildNewNotation())},e.prototype.updateNotation=function(e){e.model.permissions.update&&!this.isNotationEditing&&(e.code=e.model.code,e.description=e.model.description,this.timeout((function(){e.isEditing=!0}),this.$scope))},e.prototype.leaveEditMode=function(e,t){this.isNotationEditing&&("cancel"===t?this.cancelEdit(e):(this.validateNotation(e),this.confirmEdit(e)),this.$scope.$broadcast("focus",this.focusNotationEventName))},e.prototype.confirmEdit=function(e){var t=this,n=this.isCodeValidate,i=!1;if(e.model.code===e.code&&e.model.description===e.description||(i=!0),n)e.isEditing=!1,e.model.code=e.code,e.model.description=e.description,e.model.id?i&&e.model.$save().$then((function(e){t.$scope.$emit("grade-notation-update",t.course.id),t.$rootScope.$broadcast("bb-reload-grid-view")})):this.course.gradebook.performancecodes.$create(e.model).$then((function(n){e.model=n,t.$scope.$emit("grade-notation-update",t.course.id),t.$rootScope.$broadcast("bb-reload-grid-view")}));else{var o=e.form["title-"+e.id],s=e.form["detail-"+e.id];o.$setTouched(),s.$setTouched()}},e.prototype.cancelEdit=function(e){e.isEditing=!1,""!==e.model.code&&""!==e.model.description||this.deleteNotation(e)},e.prototype.validateNotation=function(e){var t=e.form["title-"+e.id],n=e.form["detail-"+e.id],i=this.validationManager,o=i.execute("isEmpty",e.code),s=i.execute("isNotationNumberOnly",e.code),a=i.execute("isEmpty",e.description),r=i.execute("isNotationExist",e),c=i.execute("isNotationSchemaDuplicate",e),l=function(e){t.$setValidity("required","isNotationEmpty"!==e),t.$setValidity("notationNumberOnly","isNotationNumberOnly"!==e),t.$setValidity("notationExist","isNotationExist"!==e),t.$setValidity("notationSchemaDuplicate","isNotationSchemaDuplicate"!==e),n.$setValidity("required","descriptionEmpty"!==e)};o?l("isNotationEmpty"):s?l("isNotationNumberOnly"):r?l("isNotationExist"):c?l("isNotationSchemaDuplicate"):a?l("descriptionEmpty"):l(),t.$setDirty(),n.$setDirty(),this.isCodeValidate=!(o||s||a||r||c)},e.prototype.deleteNotation=function(e){var t=this,n=this.notations.indexOf(e);e.model.$destroy().$allow(["400"]).$asPromise().then((function(e){t.$scope.$emit("grade-notation-update",t.course.id),t.notations.splice(n,1),t.$rootScope.$broadcast("bb-reload-grid-view")}))},e.prototype.buildNewNotation=function(){var e={id:this.generateNotationId(),code:"",description:"",model:this.GradeNotationModel.$build({code:"",description:"",permissions:{delete:!0,update:!0}}),isEditing:!0};return this.notations.push(e),e},e.prototype.generateNotationId=function(){return"grade_notation_"+e.uid++},e.prototype.pastDueCheckboxEvent=function(){this.$scope.$broadcast(v.b,this.isPastZeroAssigned)},e.prototype.automaticZeroConfirm=function(e){var t;this.isPastZeroAssigned?(t={countUnsubmittedWorkAsZero:!0},delete this.gradebookSettings.retainAutoZero):(c.a.Retain.isEqualTo(e.choice)&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!0}),c.a.Delete.isEqualTo(e.choice)&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!1})),this.updatePastDueZero(t)},e.prototype.automaticZeroCancel=function(){this.isPastZeroAssigned=!this.isPastZeroAssigned},e.prototype.updatePastDueZero=function(e){var t=this;Object.assign(this.gradebookSettings,e),this.gradebookSettings.$patch().$then((function(){t.$rootScope.$broadcast(O)}))},e.STUDENT_FAILING_PREFERENCE_KEY="telem.threshold.failing.grade",e.STUDENT_ABSENT_PREFERENCE_KEY="telem.threshold.days.absent",e.STUDENT_ALERTS_ENABLED="telem.student.alerts.enabled",e.STUDENT_ABSENT_DEFAULT=5,e.DISABLE_ABSENT_NOTICES=0,e.INITIAL_FAILING_PREF_ARGS={key:e.STUDENT_FAILING_PREFERENCE_KEY},e.INITIAL_ABSENT_PREF_ARGS={key:e.STUDENT_ABSENT_PREFERENCE_KEY},e.INITIAL_ENABLE_PREF_ARGS={key:e.STUDENT_ALERTS_ENABLED,defaultValue:"true"},e.uid=0,e=Object(i.__decorate)([Object(i.__param)(0,Object(s.b)("$scope")),Object(i.__param)(1,Object(s.b)("$rootScope")),Object(i.__param)(2,Object(s.b)("$q")),Object(i.__param)(3,Object(s.b)("currentCourse")),Object(i.__param)(4,Object(s.b)("$modal")),Object(i.__param)(5,Object(s.b)(m.serviceName)),Object(i.__param)(6,Object(s.b)(g.b)),Object(i.__param)(7,Object(s.b)("GradeNotationModel")),Object(i.__param)(8,Object(s.b)(b.d)),Object(i.__param)(9,Object(s.b)(d.b)),Object(i.__param)(10,Object(s.b)(u.b)),Object(i.__param)(11,Object(s.b)(w.b)),Object(i.__param)(12,Object(s.b)(y.b)),Object(i.__param)(13,Object(s.b)(C.b)),Object(i.__param)(14,Object(s.b)(S.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(T)},"367g":function(e,t,n){},"3Jgm":function(e,t,n){"use strict";var i=n("D57K"),o=n("wHJ2"),s=n("pjml"),a=n("Qbdf"),r=n("k9iv"),c=n("0JpG"),l=n("TnpK"),d=n("Sa5G"),u=n("FBBZ"),p=n("5iHu");var m=n("Q/M7");n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g}));var h="ultra.components.services.partner",g="partner",b=function(){function e(e,t,n,i,o,s,a,r,c,l,d,u){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=i,this.cacheFactory=o,this.contextCourse=s,this.errorModalService=a,this.localizeService=r,this.ultraStateService=c,this.PartnerCourseModel=l,this.PartnerModel=d,this.PartnerStatusModel=u,this.shortMaxAge=5e3,this.partnerStatusCache=o.createCache("PartnerStatusCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnersCache=o.createCache("PartnersCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnerLinkedCoursesCache=o.createCache("PartnerLinkedCoursesCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}return e.prototype.getPartnerCloudStatus=function(e,t){if(void 0===t&&(t=!1),p("body").hasClass("bb-within-uia-test"))return this.$q.when({enabled:!1,userCloudProvisioned:!1});if(t)return this.PartnerStatusModel.getStatus(e);var n=this.partnerStatusCache.get("status");return n||(n={promise:this.PartnerStatusModel.getStatus(e)},this.partnerStatusCache.put("status",n)),n.promise},e.prototype.resetPartnerCloudStatus=function(){this.partnerStatusCache.removeAll()},e.prototype.getPartners=function(e,t){if(void 0===t&&(t=!1),t)return this.PartnerModel.getPartnersByType(e);var n=this.partnersCache.get(e);return n||(n={promise:this.PartnerModel.getPartnersByType(e)},this.partnersCache.put(e,n)),n.promise},e.prototype.getLinkedPartners=function(e,t){if(void 0===t&&(t=!1),t)return this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise();var n=this.partnerLinkedCoursesCache.get(e);return n||(n={promise:this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise()},this.partnerLinkedCoursesCache.put(e,n)),n.promise},e.prototype.launchPartner=function(e,t){e.toolProvider.available?u.o(e)?this._launchBrowseLink(e.browseContentLink):this._checkProvisioningAndLaunch(e,t):e.toolProvider.compatible?this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderNotConfigured"})):this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderIncompatible"}))},e.prototype._checkProvisioningAndLaunch=function(e,t){var n=this;this._getProvisioningCheckResult(e.providerId,t).then((function(t){var i;t.status?(i={partnerId:e.providerId,toolType:"browse",partnerTitle:u.h(e)},d.w.Inline.isEqualTo(n.$stateParams.mode)?i.mode=n.$stateParams.mode:(i.partnerParentId=n.$stateParams.parentId,i.position=n.$stateParams.position)):(i={partnerId:e.providerId,toolType:"partnerProvisioning",partnerTitle:n.localizeService.translateSync({locale:n.localizeService.getLocale(n.$rootScope),key:"course.partnerList.partnerProvisioning"}),partnerParentId:n.$stateParams.parentId},n.ultraStateService.current.name.indexOf("peek.books-and-tools")>=0&&(i.returnState="base.courses.peek.course.outline.peek.books-and-tools")),n.ultraStateService.goPeekState("partner-tool.tool",i)}))},e.prototype._getProvisioningCheckResult=function(e,t){return o.isDefined(t)?this.$q.when({status:t}):this.PartnerCourseModel.$new(this.contextCourse.courseId).updateProvisioning(e)},e.prototype._launchBrowseLink=function(e){var t=m.c(e.url);switch(this.$stateParams.parentId&&(t=m.a(t,"content_id",this.$stateParams.parentId)),e.target){case"_self":this._windowLocationAssign(t);break;case"_blank":this.$window.open(t)}},e.prototype._windowLocationAssign=function(e){this.$window.location.assign(e)},e.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",a.e,r.c,c.serviceName,l.d,s.W.serviceName,s.U.serviceName,s.Y.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(b);o.module(h,[a.b,r.b,c.moduleName,l.b,s.Q]).service(g,b)},"3KJb":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var i=n("D57K"),o=(n("s5UK"),n("nsO7")),s=n("nmzr"),a=n("+O05"),r=n("0JpG"),c=n("TnpK"),l="ultra.features.course.content.assessment.multipleAttempt.peek.controller",d=function(){function e(e,t,n,i){var s=this;this.$scope=e,this.contentData=t,this.bbLocalize=n,this.ultraState=i,this.attempts=[],e.multipleAttemptPeek=this,this.gradeDetail=t.gradeDetail,this.hasOverallGrade=t.gradeDetail.isPosted(),this.gradeDetail.attempts.$refresh({expand:"toolAttemptDetail"}).$then((function(e){return o.forEach(e,(function(e){e.isSubmitted()&&s.attempts.push(e)})),e})),this.hasDueDateAccommodation=this.contentData.courseContent.hasDueDateException(),this.viewOriginalityReport=this.ultraState.params.viewOriginalityReport}return e.prototype.getAttemptReviewStateRef=function(e,t){return void 0===t&&(t=!1),{name:this.contentData&&this.contentData.gradingColumn&&this.contentData.gradingColumn.isScorm()?"scorm-overview.student.attempt":"assessment.overview.attempt.review",args:{attemptId:e.id,columnId:this.contentData.gradingColumn.id,forceOpenFeedbackPanel:!this.viewOriginalityReport&&a.a.attemptHasFeedback(e),viewOriginalityReport:this.viewOriginalityReport}}},e.prototype.navigateToAssessmentOverview=function(){this.ultraState.goPeekState(s.AssessmentRoutes.ASSESSMENT_OVERVIEW,{contentId:this.contentData.gradingColumn.contentId})},Object.defineProperty(e.prototype,"panelSubTitle",{get:function(){return this.contentData.gradingColumn.columnName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelTitle",{get:function(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.content.assessment.overview.multiple-attempt.pageTitle"})},enumerable:!0,configurable:!0}),e.$inject=["$scope","contentData",r.serviceName,c.d],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(d)},"3Lzw":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-medium-upload",use:"icon-medium-upload-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-upload"><path d="M12 1v14M1 7v16h22V7h-4M1 7h4-4zM8 5l4-4 4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"3Nzc":function(e,t,n){"use strict";n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return G})),n.d(t,"b",(function(){return L})),n.d(t,"d",(function(){return R}));var i=n("D57K"),o=(n("pBKf"),n("KXuk"),n("nbDY")),s=n.n(o),a=n("5MwF"),r=n("VdDF"),c=n("nsO7"),l=n("wHJ2"),d=n("Fvsw"),u=n("Qbdf"),p=n("g7Mf"),m=n("jhBu"),h=n("XGja"),g=n("o5Lu"),b=n("X/qj"),f=n("0JpG"),v=n("pjml"),y=n("R4kC"),w=n("lEL+"),C=n("g5ln"),S=n("0Vbm"),k=n("tcMd"),I=n("gkef"),D=n("TnpK"),E=n("5uPl"),O=n("Sa5G"),T=n("+O05"),$=n("f8ya"),A=n("7cYF"),x=n("RWbl"),P="instructor-submission-list-view-refresh",G="instructor-scheduled-regrading-task-finish-event",L="instructor-submission-list-attempt-deleted-event",R="ultra.components.directives.grade.submissionList",M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Individual=new t("Individual"),t.Group=new t("Group"),t.Discussion=new t("Discussion"),t}(s.a),j=function(){function e(t,n,i,o,s,r,d,u,p,m,h,b,f,v,y,w,C){var S=this;this.scope=t,this.$q=n,this.windowSize=i,this.element=o,this.attrs=s,this.context=r,this.entitlementService=d,this.CourseModel=u,this.grade=p,this.gradebookPermissionService=m,this.localizeService=h,this.submissionListService=b,this.timeout=f,this.discussion=v,this.contextCourse=y,this.ultraState=w,this.originalityReportService=C,this.allMembershipsRetrievedFromServer=!1,this.cannotViewGroupsMsg="",this.canViewException=!1,this.canViewGroups=!1,this.currentlyLoading=!1,this.editing=!1,this.formId="",this.currentFocusInputNum=0,this.currentPage=0,this.assessmentExceptionNodeStyle=null,this.userCourseAvailableMap={},this.onInstructorSubmissionListViewRefresh=function(t,n,i){n.isGroupContent&&S.rows&&S.rows.length>0&&S.rows[0].group&&(S.rowsExpandStatus={},S.rows.forEach((function(e){S.rowsExpandStatus[e.group.id]=e.groupDetailsShown}))),S.rows=null,S.scope.$root.$broadcast("refresh-participants-count");var o=n.getDeployedAssessment();o&&o.gradingColumn.dueDate&&(S.column.dueDate=new Date(o.gradingColumn.dueDate)),S.column.summary.$fetch({groupId:S.scope.groupId}),S.mySelectedFilter.value===e.SHOW_NEEDS_GRADING_STUDENTS?(S.memberships=[],S.loadSubmissions()):S.loadRows(n,i)},this.onGradeInputBlur=function(e,t){S.currentFocusId&&S.currentFocusId===t&&(S.currentFocusId=null,S.currentFocusInputNum--),S.timeout((function(){S.editing=S.currentFocusInputNum>0}),S.scope,400,!0)},this.onGradeInputInFocus=function(e,t){S.currentFocusId&&S.currentFocusId===t||(S.currentFocusId=t,S.currentFocusInputNum++),S.editing=S.currentFocusInputNum>0},this.onGradeStatusChange=function(t,n){var i=!!S.column.ui.content&&S.column.ui.content.isSafeAssignEnabled();if(n.groupId)S.updateGroupRows(n.groupId,i);else{if(S.mySelectedFilter.value===e.SHOW_NEEDS_GRADING_STUDENTS)return S.memberships=[],void S.loadSubmissions();S.updateRows(n.gradeId,i)}},this.onSubmissionListColumnChange=function(e,t){S.column=t,S.unsubscribeOnRowsUpdated&&S.unsubscribeOnRowsUpdated(),S.unsubscribeOnRowsUpdated=S.submissionListService.addOnRowsUpdated(S.column.courseId,S.column.id,S.onSubmissionListRowsUpdated),S.memberships=[],S.loadSubmissions()},this.onAttemptDeleted=function(){S.memberships=[],S.loadSubmissions()},this.processUpdatedRows=function(e){e.forEach((function(e){var t=c.findIndex(S.allRows,(function(t){var n,i;return(null===(n=t.user)||void 0===n?void 0:n.id)===(null===(i=e.user)||void 0===i?void 0:i.id)}));t>=0&&(S.allRows[t]=e)})),S.filterLoadedBulkViewRows(S.searchText)},this.onSubmissionListRowsUpdated=function(){S.isGroup?S.processUpdatedGroupRows(S.submissionListService.submissionList.rows):S.processUpdatedRows(S.submissionListService.submissionList.rows)},this.onGroupChange=function(e,t){S.scope.groupId=t,S.memberships=[],S.loadSubmissions()},this.processUpdatedGroupRows=function(e){e.forEach((function(e){var t=c.findIndex(S.rows,(function(t){return t.group.id===e.group.id}));S.scope.$root.$broadcast("click-to-invoke-child-directive-init"),S.rows[t]=e}))},this.onFinishRender=l.noop,this.column=t.getColumn(),this.dueDateExceptionMap=new Map,this.canViewGroups=this.entitlementService.areAllEntitled([O.v.ViewGroups,O.f.ViewAsDesigner],this.contextCourse.courseId),this.canViewException=this.entitlementService.isEntitled(O.b.ViewException,this.contextCourse.courseId),this.localizeService.translate({locale:this.localizeService.getLocale(this.scope),key:"components.directives.grade.submission-list.cannotViewGroupsMsg"}).then((function(e){S.cannotViewGroupsMsg=e})),t.getForumId&&(this.formId=t.getForumId()),this.isExternalSubmission=T.a.isExternalSubmissionsAssessment(this.column.ui.content),this.loadData(),this.initFilter(),t.$on("submission-list-column-change",this.onSubmissionListColumnChange),t.$on("group-change",this.onGroupChange),t.$on(g.b,this.onGradeStatusChange),t.$on(P,this.onInstructorSubmissionListViewRefresh),t.$on("grade-input-in-focus",this.onGradeInputInFocus),t.$on("grade-input-blur",this.onGradeInputBlur),a.a.features.questionRegrading&&t.$on(G,(function(){S.column&&S.loadRows(S.column.ui.content,(function(){S.scope.$root.$broadcast(A.d)}))})),this.unsubscribeOnRowsUpdated=this.submissionListService.addOnRowsUpdated(this.column.courseId,this.column.id,this.onSubmissionListRowsUpdated),t.$on("$destroy",(function(){S.assessmentExceptionNodeStyle&&S.assessmentExceptionNodeStyle.remove(),S.unsubscribeOnRowsUpdated()})),t.$on(L,this.onAttemptDeleted),this.originalityReportService.setCourseContent(this.column.ui.content,!0),this.originalityReportService.fetchIsOriginalityEnabled().then((function(e){S.shouldShowOriginality=e}))}return e.prototype.initFilter=function(t){var n=this;this.availableFilters=[e.SHOW_ALL_STUDENTS,e.SHOW_NEEDS_GRADING_STUDENTS].map((function(e,t){return{index:t,name:n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),key:"components.directives.grade.submission-list.filter."+e}),nature:e,value:e}})),this.mySelectedFilter=t&&c.find(this.availableFilters,(function(e){return e.value===t}))||this.availableFilters[0]},e.prototype.getSearchBoxPlaceholderKey=function(){var e="components.directives.grade.submission-list.search";return M.Group.isEqualTo(this.mode)?e+"GroupPlaceholder":""+e+(this.contextCourse.course.isOrganization?"Participant":"Student")+"Placeholder"},e.prototype.loadData=function(){this.loadSubmissions()},e.prototype.isPeerGrading=function(){return!!a.a.features.peerAssessmentFeatureFlag&&this.column.peerGrading},e.prototype.hasAttemptBeenPostedOrCompleted=function(e){var t=this.rows[e];return t.isStatusComplete()&&!t.overrideToPost()&&!t.grade.isPastDueZero()},e.prototype.getNothingToGradeOrReconcileKey=function(e){return this.rows[e].isCurrentUserReconciler()?"nothingToReconcile":"nothingToGrade"},e.prototype.getAttemptsPeerStatus=function(){if(a.a.features.peerAssessmentFeatureFlag)return this.currentDate=r.a.parseStringToDate(this.context.getServerTime()),this.submissionDueDate=r.a.parseStringToDate(this.column.dueDate),this.peerReviewDueDate=r.a.parseStringToDate(this.rows[0].Column.ui.content.getDeployedAssessment().peerSettings.peerReviewDueDate),this.isInPeerSubmissionWindow?(this.status="status-submitted","submitted"):this.isAfterPeerReviewWindow?(this.status="status-needs-grading","needsGrading"):(this.status="status-in-peer-review","inPeerReview")},e.prototype.getPostedOrCompletedKey=function(){return a.a.features.peerAssessmentFeatureFlag&&this.isPeerGrading()?(this.status="status-is-posted","posted"):(this.status="status-is-complete","complete")},Object.defineProperty(e.prototype,"isInPeerSubmissionWindow",{get:function(){return r.a.isWithinDateRange(this.currentDate,{end:this.submissionDueDate,start:null},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAfterPeerReviewWindow",{get:function(){return r.a.isWithinDateRange(this.currentDate,{end:null,start:this.peerReviewDueDate},!0)},enumerable:!0,configurable:!0}),e.prototype.filterLoadedBulkViewRows=function(e){this.filterRows(e)},e.prototype.filterRows=function(e){var t=this;if(this.searchText=e,e){var n=e.split(/\s+/).map((function(e){return new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i")}));this.rows=this.allRows.filter((function(e){return t.isGroup?n.some((function(t){return t.test(e.group.title)})):n.some((function(t){return t.test(e.user.givenName)}))||n.some((function(t){return t.test(e.user.familyName)}))})),this.currentPage=0}else this.rows=this.allRows;this.setSubmissionListInGradeService(this.rows)},e.prototype.updateRows=function(e,t){var n,i,o={groupId:this.scope.groupId};if(e?(i=[this.getMembershipByGradeId(e)].filter((function(e){return e})),o.userIds=null===(n=i[0])||void 0===n?void 0:n.userId):(i=this.getMembershipsAll(),o.roleBucket=O.k.TAKING.toString()),this.column.anonymousGrading)return this.grade.loadAnonymousStudentRows(this.column).then(this.processUpdatedRows);if(i.length<=0)return Promise.resolve();return this.grade.loadCustomizedBulkViewRows(i,this.column,this.formId,o,t,!0).then(this.processUpdatedRows)},e.prototype.updateGroupRows=function(e,t){var n=c.find(this.rows,(function(t){return t.group.id===e})),i=this.getMembershipsFromRow(n),o=c.find(this.column.ui.content.assignedGroups,(function(e){return e.groupId===n.group.id}));this.canViewGroups?this.grade.loadGroupRows(this.course,[o],i,this.column,t).then(this.processUpdatedGroupRows):this.processUpdatedGroupRows([])},e.prototype.getMembershipsAll=function(){var e=this,t=[];return this.rows.forEach((function(n){if(n.group)n.group.memberships.forEach((function(n){var i=c.find(e.memberships,(function(e){return e.user.id===n.userId}));t.push(i)}));else{var i=c.find(e.memberships,(function(e){return e.user.id===n.user.id}));t.push(i)}})),t},e.prototype.getMembershipsFromRow=function(e){var t=this;return e.group.memberships.map((function(e){var n=c.findIndex(t.memberships,(function(t){return e.userId===t.userId}));return t.memberships[n]}))},e.prototype.getMembershipByGradeId=function(e){var t=c.findIndex(this.rows,(function(t){return t.grade&&t.grade.id===e}));if(t>-1){var n=this.rows[t],i=c.findIndex(this.memberships,(function(e){return n.user.id===e.userId}));return this.memberships[i]}return null},e.prototype.loadSubmissions=function(){var e=this;this.CourseModel.$find(this.column.courseId).$then((function(t){e.course=t,e.fetchMemberships().then((function(t){e.memberships=t,t.forEach((function(t){t.dueDateExceptionType===$.c.Unlimited&&e.dueDateExceptionMap.set(e.scope.groupId,!0),e.userCourseAvailableMap[t.userId]=t.isAvailable})),e.column&&e.loadRows(e.column.ui.content)}))}))},e.prototype.loadRows=function(e,t){e&&e.isGroupContent&&!e.isDiscussion()?this.loadAllGroupRows(e.assignedGroups,t):this.loadBulkViewRows(t)},e.prototype.loadBulkViewRows=function(e){var t=this;if(this.memberships.length>0&&(!this.scope.groupId||this.canViewGroups)){var n=void 0;if(this.column.anonymousGrading)n=this.grade.loadAnonymousStudentRows(this.column);else{var i={groupId:this.scope.groupId,roleBucket:O.k.TAKING.toString()},o=!!this.column.ui.content&&this.column.ui.content.isSafeAssignEnabled();n=this.grade.loadCustomizedBulkViewRows(this.memberships,this.column,this.formId,i,o,!0)}this.scope.$emit("bb-gradebook-item-show-spinner-child",!0),n.then((function(e){t.processLoadedBulkViewRows(e)})).finally((function(){t.finishLoadingBulkViewRows(e)}))}else this.rows=[],this.finishLoadingBulkViewRows(e)},e.prototype.processLoadedBulkViewRows=function(e){this.allRows=e,this.sortSubmissionList(this.allRows),this.setSubmissionListInGradeService(this.allRows),this.filterLoadedBulkViewRows(this.searchText)},e.prototype.finishLoadingBulkViewRows=function(e){var t=this;this.scope.$emit("bb-gradebook-item-show-spinner-child",!1),this.currentlyLoading=!1,this.scope.$root.$broadcast("submission-list-loaded"),e&&e(),a.a.features.perAssessmentSettings&&this.canViewException&&!this.column.anonymousGrading&&T.a.initAssessmentExceptionsIndicators(this.course,this.column.ui.content).then((function(e){t.assessmentExceptionNodeStyle=e}))},e.prototype.loadAllGroupRows=function(e,t){var n=this;this.scope.$emit("bb-gradebook-item-show-spinner-child",!0),this.canViewGroups?this.grade.loadGroupRows(this.course,e,this.memberships,this.column,this.column.ui.content&&this.column.ui.content.isSafeAssignEnabled()).then((function(e){n.processLoadedAllGroupRows(e)})).finally((function(){n.finishLoadingBulkViewRows(t)})):(this.processLoadedAllGroupRows([]),this.finishLoadingBulkViewRows(t))},e.prototype.processLoadedAllGroupRows=function(e){var t=this;this.allRows=e,this.rows=e,this.submissionListService.sortSubmissionList(this.rows),this.setSubmissionListInGradeService(this.rows),this.rowsExpandStatus&&(this.rows.forEach((function(e){e.groupDetailsShown=!!t.rowsExpandStatus[e.group.id]})),this.rowsExpandStatus=null)},e.prototype.fetchMemberships=function(){var e={fields:"courseCardColorIndex,id,isAvailable,dueDateExceptionType,timeLimitExceptionType,role,courseRole,user.id,user.userName,user.avatar,user.familyName,user.givenName,user.lastModifiedAt,userHasHidden,userId,isPreviewStudent",roleBucket:"taking",offset:this.memberships?this.memberships.length:0},t=this.course.memberships.$fetch(e).$asPromise();return this.scope.groupId&&this.canViewGroups?this.$q.all([t,this.course.groups.$new(this.scope.groupId).$fetch({expand:"memberships"}).$asPromise()]).then((function(e){var t=e[0],n=e[1],i=new Set(c.map(n.memberships,"userId")),o=t.filter((function(e){return i.has(e.userId)}));return o.paging=t.paging,o.paging.count=o.length,o.permissions=t.permissions,o})):t},Object.defineProperty(e.prototype,"isIndividual",{get:function(){return this.mode===M.Individual},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDiscussion",{get:function(){return this.mode===M.Discussion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGroup",{get:function(){return this.mode===M.Group},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalItems",{get:function(){return this.rows?this.rows.length:0},enumerable:!0,configurable:!0}),e.prototype.isGroupDiscussion=function(){return this.isDiscussion&&this.discussion.hasGroups()},e.prototype.showNoGroupViewMessage=function(){return this.isGroup&&!this.canViewGroups},e.prototype.isOverdue=function(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0},e.prototype.includeDueDateException=function(){return this.dueDateExceptionMap},e.prototype.setSubmissionListInGradeService=function(e){this.submissionListService.setSubmissionList(this.course.id,this.column.id,this.memberships,e)},e.prototype.onPageSizeChange=function(e){this.pageSize=e,this.pageSizeChange()},e.prototype.pageSizeChange=function(){l.noop()},e.prototype.pageChange=function(){l.noop()},e.prototype.changeFilter=function(e){l.noop()},e.prototype.onChangePage=function(){var e=this.getContainerElementAndCurrentElement(),t=e.scrollContainer,n=e.pageSizeSelector;t.animate({scrollTop:0},100,(function(){c.delay((function(){return h.b(t,n)}),300)}))},e.prototype.getContainerElementAndCurrentElement=function(){var e=this.windowSize.isSmallBreakpoint()?"#gradebook-item-panel-content":".student-submission-list",t=l.element(e),n=t.find("bb-page-size-selector button");return{scrollContainer:t,pageSizeSelector:n}},e.prototype.sortSubmissionList=function(e){this.submissionListService.sortSubmissionList(e)},e.SHOW_ALL_STUDENTS="showAllStudents",e.SHOW_NEEDS_GRADING_STUDENTS="showNeedsGradingStudents",e.$inject=["scope","$q",I.b,"element","attrs",d.b,m.b,v.o.serviceName,g.h,b.b,f.serviceName,y.b,w.b,p.c,u.e,D.d,E.b],e}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._totalItems=0,t}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return M.Individual},enumerable:!0,configurable:!0}),t.prototype.loadData=function(){l.noop()},t.prototype.filterLoadedBulkViewRows=function(e){this.searchText=e,this.rows=this.allRows},t.prototype.filterRows=function(e){this.searchText=e,this.currentPage=0,this.loadSubmissions()},t.prototype.fetchMemberships=function(){var e=this,t={fields:"courseCardColorIndex,id,isAvailable,dueDateExceptionType,timeLimitExceptionType,role,courseRole,user.id,user.userName,user.avatar,user.familyName,user.givenName,user.lastModifiedAt,userHasHidden,userId,isPreviewStudent",roleBucket:"taking",sort:["isPreviewStudent(asc)","user.familyName(asc)","user.givenName(asc)"].join(),offset:this.currentPage*this.pageSize,limit:this.pageSize,includeCount:!0,q:this.searchText};return this.mySelectedFilter.value===j.SHOW_NEEDS_GRADING_STUDENTS&&(t=Object(i.__assign)(Object(i.__assign)({},t),{filter:"needsGrading",columnId:this.column.id})),this.course.memberships.$fetch(t).$asPromise().then((function(t){return e._totalItems=t.paging.count||0,t}))},t.prototype.pageSizeChange=function(){this.loadSubmissions()},t.prototype.pageChange=function(){this.loadSubmissions()},t.prototype.sortSubmissionList=function(e){l.noop()},Object.defineProperty(t.prototype,"totalItems",{get:function(){return this._totalItems},enumerable:!0,configurable:!0}),t.prototype.onChangePage=function(){var e=this,t=this.getContainerElementAndCurrentElement(),n=t.scrollContainer,i=t.pageSizeSelector;n.animate({scrollTop:0},100,(function(){e.onFinishRender=function(){c.delay((function(){h.b(n,i),e.onFinishRender=l.noop}),500)},e.pageChange()}))},t.prototype.canDownloadAll=function(){return this.gradebookPermissionService.canViewBulkDownload()&&this.column&&!this.column.anonymousGrading},t.prototype.getDownloadOverflowMenu=function(){var e=this;return[{icon:"download",onClick:function(){e.gradesBulkDownload()},labelKey:"components.directives.grade.submission-list.downloadAll"}]},t.prototype.gradesBulkDownload=function(){this.ultraState.goPeekState("grades-bulk-download",{columnId:this.column.id})},t.prototype.overflowMenuLabel=function(){return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.grade.submission-list.submissionListMenuLabel"})},t.prototype.changeFilter=function(e){this.mySelectedFilter!==e&&(this.mySelectedFilter=e,this.currentPage=0,this.loadSubmissions())},t}(j),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return M.Group},enumerable:!0,configurable:!0}),t}(j),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return M.Discussion},enumerable:!0,configurable:!0}),t}(j),N=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=x,this.scope={getColumn:"&column",getForumId:"&?forumId",groupId:"=?"},this.link=function(e,n,i){var o,s=e.getColumn();o=s.isDiscussion()?F:s.ui.content&&s.ui.content.isGroupContent?B:_,e.submissionList=t.$injector.instantiate(o,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}(),V=function(){function e(t,n){var i=this;this.timeout=t,this.$parse=n,this.restrict="A",this.link=function(t,n,o){t.$last&&i.timeout((function(){var n=o[e.DIRECTIVE_NAME];n&&i.$parse(n)(t)}),t)}}return e.DIRECTIVE_NAME="bbOnFinishRender",e.$inject=[w.b,"$parse"],e}();l.module(R,[d.a,u.b,g.g,f.moduleName,y.a,p.b,C.a,S.a,k.a,I.a]).directive("bbSubmissionList",["$injector",function(e){return e.instantiate(N)}]).directive(V.DIRECTIVE_NAME,["$injector",function(e){return e.instantiate(V)}])},"3l3z":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var i=n("wHJ2"),o=n("nsO7"),s=n("lEL+"),a=n("5HCE"),r="ultra.components.directives.gradeGridMessageReborn",c=function(){function t(e,t,n,i,s){this.window=e,this.scope=t,this.element=n,this.attrs=i,this.timeout=s,s((function(){o.isUndefined(t.adjustPosition)||t.adjustPosition(n)}),t)}return t.prototype.mousedown=function(){e(this.window).trigger("click")},t.$inject=["$window","scope","element","attrs",s.b],t}(),l=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=a,this.link=function(e,n,i){e.gradeGridMessageReborn=t.$injector.instantiate(c,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(r,[]).directive("bbGradeGridMessageReborn",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},"3mUc":function(e,t){e.exports="<div\n  ng-class=\"{'validation-error' : showError()}\"\n  ng-transclude>\n</div>\n"},"5HCE":function(e,t){e.exports='<div role="alertdialog" aria-live="assertive">\n  <div class="validation-message-wrapper" tabindex="0">\n    <span bb-ax-alert="2000" class="validation-message" id="sr-message" bb-translate >components.directives.grade.validation.default</span>\n  </div>\n</div>'},"5L1M":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("wnlu"),s="ultra.components.directives.bbUiIcon.Textbook";Object(i.a)(o.a,s,"bbUiIconTextbook")},"5Tom":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var i=n("D57K"),o=(n("JfeD"),n("nYZ0")),s=n("fYJU"),a=n("0JpG"),r=n("TnpK"),c=n("0/Nk"),l=n("OI4n"),d=n("yC9S"),u=n("aHpC"),p="ultra.directives.group.group-student-enrollment",m=function(){function e(e,t,n,i,o){this.scope=e,this.contentService=t,this.currentUserService=n,this.localize=i,this.ultraState=o,this.isSelfEnrollment=!1}return e.prototype.$onInit=function(){this.render()},e.prototype.render=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,o,s;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0?(e=this.localize.getReactBabelfishParams(),t=e.locale,n=e.babelfishFormatter,o=this.content.selfEnrollmentGroups.filter((function(e){return e.group})).map((function(e){return e.group})),s=this,[4,l.getSelfEnrollmentGroupInfo(o,t,n)]):[3,2];case 1:return s.selfEnrollGroupInfo=i.sent(),this.isSelfEnrollment=this.selfEnrollGroupInfo.isSelfEnrollment,[3,3];case 2:this.isSelfEnrollment=!1,i.label=3;case 3:return[2]}}))}))},e.prototype.openContentEnrollPanel=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return this.fromView?this.ultraState.current.name.endsWith("discussion.view.with-grading.peek.discussion-details")?[4,this.ultraState.leavePeekState()]:[3,4]:[3,8];case 1:return e.sent(),[4,this.ultraState.leavePeekState()];case 2:return e.sent(),[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})];case 3:return e.sent(),[3,7];case 4:return[4,this.ultraState.leavePeekState()];case 5:return e.sent(),[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})];case 6:e.sent(),e.label=7;case 7:return[3,10];case 8:return[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id})];case 9:e.sent(),e.label=10;case 10:return[2]}}))}))},e.prototype.isBeforeEnrollment=function(){return this.selfEnrollGroupInfo&&"Before"===this.selfEnrollGroupInfo.enrollmentDateState},e.prototype.isOpenEnrollment=function(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState},e.prototype.isOpenEnrollmentWithEnding=function(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState&&null!=this.selfEnrollGroupInfo.relativeDate},e.prototype.isAfterEnrollment=function(){return this.selfEnrollGroupInfo&&"After"===this.selfEnrollGroupInfo.enrollmentDateState},e=Object(i.__decorate)([Object(d.a)({moduleName:p,componentName:"bbGroupStudentEnrollment",template:c,bindings:{content:"<",fromView:"@"},requireModules:[o.d,s.a,a.moduleName,r.b]}),Object(i.__param)(0,Object(u.b)("$scope")),Object(i.__param)(1,Object(u.b)(o.f)),Object(i.__param)(2,Object(u.b)(s.b)),Object(i.__param)(3,Object(u.b)(a.serviceName)),Object(i.__param)(4,Object(u.b)(r.d))],e)}()},"5XZZ":function(e,t){e.exports='<div class="assessment-question" ng-if="::!assessmentQuestion.questionRegradingEnabled">\n    <fieldset>\n      <div class="question-header"\n           ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n           ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n        <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                     class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                     aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                     size="medium"\n                     icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n        <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle" bb-translate="components.directives.assessment-question.question-title" translate-values="{index: assessmentQuestion.questionAttempt.visibleQuestionNumber}"></legend>\n\n        \x3c!--Question goal --\x3e\n        <a ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle && assessmentQuestion.hasGoals()" href="javascript:void(0);"\n           ng-click="assessmentQuestion.openQuestionGoals()"\n           class="question-goal"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.assessment-question.view-goal\', \'title\':\'components.directives.assessment-question.view-goal\'}"\n           analytics-id="components.directives.assessmentQuestion.viewGoal.link">\n          <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n        </a>\n\n        <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                           hide-grade="!assessmentQuestion.canViewGrades"\n                           input-id="{{::assessmentQuestion.elementId}}"\n                           is-privileged="false"\n                           ng-if="assessmentQuestion.questionConfig.hasPoints && assessmentQuestion.questionAttempt.isScoreVisible">\n        </bb-question-grade>\n      </div>\n      <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n    </fieldset>\n</div>\n\n<div class="assessment-question" ng-if="::assessmentQuestion.questionRegradingEnabled">\n  <fieldset>\n    <div class="question-header question-header-review"\n         ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n         ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n      <div>\n          <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                       class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                       aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                       size="medium"\n                       icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n          <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle" bb-translate="components.directives.assessment-question.question-title" translate-values="{index: assessmentQuestion.questionAttempt.visibleQuestionNumber}"></legend>\n          \x3c!--Question goal --\x3e\n          <a ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle && assessmentQuestion.hasGoals()" href="javascript:void(0);"\n            ng-click="assessmentQuestion.openQuestionGoals()"\n            class="question-goal"\n            bb-translate-attrs="{\'aria-label\':\'components.directives.assessment-question.view-goal\', \'title\':\'components.directives.assessment-question.view-goal\'}"\n            analytics-id="components.directives.assessmentQuestion.viewGoal.link">\n            <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n          </a>\n          <span class="question-full-credit-label"\n                bb-translate\n                ng-if="assessmentQuestion.questionAttempt.question.fullCredit && gradedQuestionAttempt.points && !isSmallBreakpoint">\n                components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given\n          </span>\n          <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                            hide-grade="!assessmentQuestion.canViewGrades"\n                            input-id="{{::assessmentQuestion.elementId}}"\n                            is-privileged="false"\n                            ng-if="assessmentQuestion.questionConfig.hasPoints && assessmentQuestion.questionAttempt.isScoreVisible">\n          </bb-question-grade>\n      </div>\n      <div ng-if="isSmallBreakpoint" class="question-grade-group">\n        <span class="question-full-credit-label"\n              bb-translate\n              ng-if="assessmentQuestion.questionAttempt.question.fullCredit && gradedQuestionAttempt.points">components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given</span>\n      </div>\n    </div>\n    <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n  </fieldset>\n</div>\n'},"5m/6":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-filter-options",use:"icon-small-filter-options-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-filter-options"><path d="M1 1h8M1 5h8M1 9h8M1 13h5M13 1v14M11 13l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"5uNO":function(e,t,n){},"5vTq":function(e,t){e.exports='<div class="grade-grid-cell grade-grid-body-cell student-column">\n  <div class="student-info">\n    <bb-user-avatar class="avatar" user="user"></bb-user-avatar>\n    <bb-username class="ellipse username" user="user" auto-update="true" format-sync="true" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n  </div>\n</div>\n'},"5zK3":function(e,t){e.exports='<form name="{{::\'top_grading_bar\' + gradeDetail.id}}">\n  <div class="multiple-submissions-grading-bar aggregate-grading-bar" bb-foundation-defer>\n    <div class="aggregate-grading-bar-inner">\n      <div class="aggregate-header">\n        <span class="aggregate-header-text" bb-translate>components.directives.grade.grading-bar.final-score</span>\n        <span ng-if="gradeDetail.isPosted()" class="details ellipsis posted">\n          <span class="posted-text" bb-translate>components.directives.grade.grading-bar.posted-no-date</span>\n        </span>\n        <span class="aggregate-header-sub-text" bb-translate>{{::gradingBar.getAggregationModelLabelKey()}}</span>\n      </div>\n\n      <div class="aggregate-grading-controls">\n        <div class="undo-override" ng-if="gradingBar.shouldShowUndoOverride()" ng-switch="gradingBar.canGrade()">\n          <a ng-switch-when="true"\n             ng-if="!gradeDetail.isPastDueZero()"\n             href="javascript:void(0);"\n             data-class="js-undo-override"\n             ng-click="gradingBar.undoOverride()"\n             bb-translate\n             analytics-id="components.directives.grade.grading-bar.undo-override">components.directives.grade.grading-bar.undo-override</a>\n          <span ng-switch-default class="override-indicator" bb-translate>components.directives.grade.grading-bar.readonly-override</span>\n          <span ng-if="gradeDetail.isPastDueZero()" class="override-indicator" bb-translate>components.directives.grade.grid.pastDueZero</span>\n        </div>\n\n        <bb-user-final-grade-input ng-if="::gradingBar.shouldShowFinalGradeInput()"\n                                  class="pill-position"\n                                  ng-hide="hideGrade()"\n                                  id="user-final-grade-input"\n                                  column="::column()"\n                                  grade="gradeDetail"\n                                  for-user="::user()"\n                                  readonly="::!gradingBar.canGrade()"\n                                  show-override-indicator="false">\n        </bb-user-final-grade-input>\n      </div>\n\n      <bb-overflow-menu element-id="{{\'menu-open-button_\' + gradeDetail.id}}"\n                        element-name="{{gradingBar.getLocalizedTextByKey(\'components.directives.grade.grading-bar.grade\')}}"\n                        menu-items="gradingBar.getOverflowMenuItems()"\n                        analytics-id-tag-prefix="components.directives.grade.grading-bar.overflowMenu">\n      </bb-overflow-menu>\n\n    </div>\n  </div>\n</form>\n'},"66CI":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-lock-circle",use:"icon-small-lock-circle-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock-circle"><g stroke-width="2"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8h6v3H5V8z" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 9h4v1H6z" /><path d="M6 8V5.7143C6 4.857 6.6667 4 8 4m0 0c.3333 0-.3333 0 0 0zm0 0c1.3333 0 2 .8571 2 1.7143V8" stroke-linecap="round" stroke-linejoin="round" /></g></symbol>'});o.add(s);e.exports=s},"66CP":function(e,t){e.exports='<div class="content-item-icon" bb-load-bundle="components/directives/element-image/element-image-accessibility">\n  <bb-ui-content-icon icon="contentItemIcon.iconName" color="{{contentItemIcon.iconColor}}" not-decorative="true"></bb-ui-content-icon>\n  <div class="content-item-icon__status" ng-if="contentItemIcon.showStatusIcon()">\n    <bb-svg-icon size="small" icon="{{contentItemIcon.getStatusIconName()}}"></bb-svg-icon>\n  </div>\n</div>\n'},"6CeR":function(e,t){e.exports='\x3c!-- Typeahead search box --\x3e\n<div class="grade-grid-search-box">\n  <bb-typeahead-search-box id="student-search-box"\n                           item-selected="gg.itemSelected(item)"\n                           type-ahead-search="gg.typeAheadSearch(searchText)"\n                           search="gg.search(searchText)"\n                           clear-search="gg.clearTypeAheadSearch()"\n                           input-placeholder="components.directives.grade.search-box.placeholder"\n                           sr-empty-results="components.directives.grade.search-box.emptyResults"\n                           sr-results-found="components.directives.grade.search-box.resultsFound"\n                           sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                           sr-label="components.directives.grade.search-box.placeholder"\n                           clear-aria-label="components.directives.grade.search-box.clear"\n                           icon="search">\n\n        <div bb-feature-toggle="!gradebookSearchFilterM2" remove-from-dom="true">\n          <bb-user-avatar class="typeahead-user-avatar" user="::item.data.user"></bb-user-avatar>\n          <div class="typeahead-student-name-id">\n            <bb-username class="typeahead-name ellipse" user="item.data.user" has-title-attr="true"></bb-username>\n            <div class="typeahead-id ellipse">{{::item.data.user.studentId}}</div>\n          </div>\n        </div>\n        <ng-switch on="item.type" bb-feature-toggle="gradebookSearchFilterM2" remove-from-dom="true">\n          <div ng-switch-when="user" class="element-card">\n            <bb-user-avatar class="typeahead-user-avatar" user="::item.data.user"></bb-user-avatar>\n            <div class="typeahead-student-name-id">\n              <bb-username class="typeahead-name ellipse" user="item.data.user" has-title-attr="true"></bb-username>\n              <div class="typeahead-id ellipse">{{::item.data.user.studentId}}</div>\n            </div>\n          </div>\n          <div ng-switch-when="column" class="element-card">\n            <div bb-content-item-icon content-column="item.data.getMetadata()" show-alert-icon="item.data.getMetadata().getNumMissingIfLate() > 0" class="element-image" ng-if="item.data.getMetadata()"></div>\n            <div class="typehead-title column-title ellipse">\n              <div class="ellipse grade-title">{{::item.data.getMetadata().columnName}}</div>\n              <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.columnName</div>\n            </div>\n          </div>\n          <div ng-switch-when="category" class="element-card">\n              <bb-ui-icon-document-multiple color="primary"></bb-ui-icon-document-multiple>\n              <div class="typehead-title category-title ellipse">\n                <div bb-translate class="ellipse grade-title" ng-if="!item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.localizableTitle.languageKey}}</div>\n                <div bb-translate class="ellipse grade-title" ng-if="item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.title.split(\'.\')[0]}}</div>\n                <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.category</div>\n              </div>\n          </div>\n          <div ng-switch-default="noResult" class="element-card">\n            <div class="no-result" bb-translate>components.directives.grade.search-box.noResultsFound</div>\n        </div>\n      </ng-switch>\n  </bb-typeahead-search-box>\n</div>\n<div id="grade-grid-container" class="grade-grid-container">\n  <div class="spinner bb-secondary-color-2" ng-if="!gg.initialized" aria-hidden="true"></div>\n  <div bb-feature-toggle="gradebookSearchFilterM3" remove-from-dom="true">\n    <div class="overall-grade-setup grade-search-filter-panel student-column" ng-if="gg.showFilterCriteria">\n      <bb-grade-grid-search-filter-reborn merged-courses="::gg.mergedCourses"></bb-grade-grid-search-filter-reborn>\n    </div>\n  </div>\n\n  <div id="grade-grid" bb-grid-reborn="gg.gridOptions"></div>\n  <div class="overall-grade-setup text-center" ng-if="gg.isOverallPanelShown && gg.canViewOverallPanel">\n    <bb-setup-overall-grade show-fixed-view="gg.canViewOverallPanel"></bb-setup-overall-grade>\n  </div>\n\n</div>\n'},"6Fqm":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-search",use:"icon-small-search-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-search"><circle cx="6.5" cy="6.5" r="5.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M15 15l-4.5-4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"6PP7":function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n    <li ng-if="col.isScorm()" role="presentation">\n      <a role="menuitem" \n         ng-click="col.previewScorm()"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.viewScorm">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewScorm</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canView() && !col.canEdit() && !col.isScorm()" role="presentation">\n      <a role="menuitem" \n          ng-click="col.viewOrEdit()" \n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.viewItem">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canEdit()" role="presentation">\n      <a  role="menuitem" \n          class="js-edit-column" \n          ng-click="col.viewOrEdit()" \n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.edit">\n        <bb-svg-icon size="small" icon="draw"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.edit</bb-translate>\n      </a>\n    </li>\n    <li ng-if="canPostGrades" role="presentation">\n      <a  role="menuitem" \n          class="js-post-column" \n          ng-click="col.postGrades()" \n          href="javascript:void(0);"  \n          bb-confirmation-needed="{{grade.getPostAllGradeConfirmationNeededStringsKey(col.data)}}"\n          modal-aria-type="alertdialog"\n          show-type="always"\n          analytics-id="components.directives.grade.grid.post">\n        <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.post</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.data.isQuestionAnalysisAvailable() && col.canViewQuestionAnalysis()"\n        remove-from-dom="true"\n        role="presentation">\n      <a  role="menuitem" \n          class="js-open-question-analysis" \n          ng-click="col.openQuestionAnalysisOverview()" \n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.openQuestionAnalysis">\n        <bb-svg-icon size="small" icon="question-analysis"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.openQuestionAnalysis</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.hasDownloads() && col.canDownloadAll()" role="presentation">\n      <a  role="menuitem" \n          class="js-download-all" \n          ng-click="col.openDownloadAll()" \n          href="javascript:void(0)"\n          analytics-id="components.directives.grade.grid.downloadAll">\n        <bb-svg-icon size="small" icon="download"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.downloadAll</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canDelete()" role="presentation">\n      <a class="js-delete-column"\n         href="javascript:void(0);"\n         ng-click="col.triggerDelete($event)"\n         ng-switch="!!col.data.contentId"\n         analytics-id="components.directives.grade.grid.deleteColumn.link"\n         role="button">\n        \x3c!-- Content column --\x3e\n        <bb-delete callback-function="col.deleteColumn()"\n                   class="ellipse"\n                   content-id="col.data.contentId"\n                   course-id="col.data.courseId"\n                   display-mode="controls"\n                   ng-switch-when="true"\n                   role="menuitem">\n        </bb-delete>\n        \x3c!-- Grading column --\x3e\n        <bb-delete class="ellipse"\n                   confirmation-handler="{{col.getConfirmationMessage()}}"\n                   delete-function="col.deleteColumn()"\n                   display-mode="controls"\n                   ng-switch-when="false"\n                   role="menuitem">\n        </bb-delete>\n      </a>\n    </li>\n  </ul>\n</div>\n'},"6SYN":function(e,t){e.exports='<form name="{{::\'top_grading_bar\' + attempt.id}}">\n    <div class="multiple-submissions-grading-bar attempt-grading-bar reconcile-attempt-bar" ng-class="{\'add-comment-expanded\': gradingBar.gradingCommentHandler.commentPanelOpen}" bb-foundation-defer>\n      <div\n        class="attempt-grading-bar-inner"\n        ng-class="{\'attempt-status-message-visible\': attemptStatus}"\n        ng-switch="gradingBar.hasPeekState()">\n\n        <a  href="javascript:void(0);"\n            class="attempt-info-container"\n            ng-switch-when="true"\n            ng-click="gradingBar.goToPeekState()"\n            analytics-id="components.directives.grade.gradingBar.goToPeekState.link">\n          <i class="icon submission-type-icon" bb-content-item-icon content-column="::column()"></i>\n          <div class="attempt-info">\n            <span id="reconcile-attempt-{{attempt.id}}" class="name ellipsis" ng-bind-html="::gradingBar.label"></span>\n              <span class="submission-details-wrap" ng-if="attempt">\n                \x3c!--submitted on time but not graded/posted--\x3e\n                <span class="details ellipsis submitted js-submitted-date" ng-if="!gradingBar.isSubmittedLate() && !attempt.isCompleted()" bb-translate translate-values="{date: attempt.attemptDate}">\n                  components.directives.grade.grading-bar.submit-date-without-timezone\n                </span>\n                \x3c!--submitted late but not yet graded/posted--\x3e\n                <span ng-if="gradingBar.isSubmittedLate() && !attempt.isCompleted()" class="show-hide-on-hover">\n                  <span class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                    components.directives.grade.grading-bar.submit-late-date-without-timezone\n                  </span>\n                  <span class="details ellipsis hide-on-hover text-alert-ax js-submitted-late-date" bb-translate translate-values="{lateness: gradingBar.localizedLateness}">\n                    components.directives.grade.grading-bar.submit-lateness\n                  </span>\n                </span>\n                \x3c!--attempt has been graded/posted--\x3e\n                <span ng-if="attempt.isCompleted()" class="show-hide-on-hover">\n                  \x3c!--submitted on time--\x3e\n                  <span ng-if="gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                    components.directives.grade.grading-bar.submit-late-date-without-timezone\n                  </span>\n                  \x3c!--submitted late--\x3e\n                  <span ng-if="!gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover js-submitted-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                    components.directives.grade.grading-bar.submit-date-without-timezone\n                  </span>\n                  <span class="details ellipsis hide-on-hover posted js-posted-indicator" bb-translate translate-values="{date: attempt.attemptLastGradedDate || \'\'}">\n                    components.directives.grade.grading-bar.posted-without-timezone\n                  </span>\n                </span>\n              </span>\n          </div>\n        </a>\n        <i ng-switch-default class="icon submission-type-icon" bb-content-item-icon content-column="::column()"></i>\n        <div ng-switch-default class="attempt-info">\n          <span class="name ellipsis" ng-bind-html="::gradingBar.label"></span>\n          <span class="submission-details-wrap" ng-if="attempt">\n            \x3c!--submitted on time but not graded/posted--\x3e\n            <span class="details ellipsis submitted js-submitted-date" ng-if="!gradingBar.isSubmittedLate() && !attempt.isCompleted()" bb-translate translate-values="{date: attempt.attemptDate}">\n              components.directives.grade.grading-bar.submit-date\n            </span>\n            \x3c!--submitted late but not yet graded/posted--\x3e\n            <span ng-if="gradingBar.isSubmittedLate() && !attempt.isCompleted()" class="show-hide-on-hover">\n              <span class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                components.directives.grade.grading-bar.submit-late-date\n              </span>\n              <span class="details ellipsis hide-on-hover text-alert-ax js-submitted-late-date" bb-translate translate-values="{lateness: gradingBar.localizedLateness}">\n                components.directives.grade.grading-bar.submit-lateness\n              </span>\n            </span>\n            \x3c!--attempt has been graded/posted--\x3e\n            <span ng-if="attempt.isCompleted()" class="show-hide-on-hover">\n              \x3c!--submitted late--\x3e\n              <span ng-if="gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                components.directives.grade.grading-bar.submit-late-date\n              </span>\n              \x3c!--submitted on time--\x3e\n              <span ng-if="!gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover js-submitted-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                components.directives.grade.grading-bar.submit-date\n              </span>\n              <span class="details ellipsis hide-on-hover posted js-posted-indicator" bb-translate translate-values="{date: attempt.attemptLastGradedDate || \'\'}">\n                components.directives.grade.grading-bar.posted\n              </span>\n            </span>\n          </span>\n          \x3c!-- BEGIN Enhance time limit --\x3e\n          <span class="information-about-time-limit show-hide-on-hover" ng-if="gradingBar.isShowExtraTime()">\n            <span class="exceeded-time attention hide-on-hover details small-medium-show">{{gradingBar.getExceedTime()}}</span>\n            <span class="questions-answered-correctly-after-time-limit attention show-on-hover details small-medium-hide" bb-translate translate-values="{count: gradingBar.getQuestionsAnsweredAfterSoftTimeLimit().length}">\n              components.directives.grade.grading-bar.questions-answered-after-soft-time-limit.plural\n            </span>\n          </span>\n          \x3c!--  END  Enhance time limit --\x3e\n        </div>\n\n        <div class="attempt-status-container" ng-if="attemptStatus">{{attemptStatus}}</div>\n\n        <div class="attempt-grading-actions">\n          \x3c!-- There is no override for non-group attempt grade. Therefore, if save-as-override is true, make the pill read-only --\x3e\n          <bb-user-attempt-grade-input\n            ng-class="{\'has-feedback\': gradingBar.canEnterGrades || gradingBar.canEnterFeedback || gradingBar.gradingCommentHandler.hasComment()}"\n            ng-hide="hideGrade()"\n            id="{{::\'attempt_\' + attempt.id}}"\n            input-aria-label="{{::gradingBar.getGradeInputAriaLabel()}}"\n            readonly="::(!gradingBar.canEnterGrades || saveAsOverride())"\n            column="::column()"\n            attempt="attempt"\n            for-user="::user()"\n            disable-rubric-eval-click="disableRubricAction">\n          </bb-user-attempt-grade-input>\n\n          \x3c!--When no comments exist this is either an \'add comment\' or \'empty comment\' button, otherwise it functions as a toggle button to bring the comments in/out of view--\x3e\n          <button class="toggle-feedback-button"\n                  ng-if="gradingBar.showCommentIcon()"\n                  ng-click="gradingBar.openFeedbackPanel()"\n                  ng-switch="gradingBar.getCommentIconType()"\n                  bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grading-bar.reconciler-feedback.aria-label.feedback-toggle-button\'}"\n                  translate-attrs-values="{attempt_index: attemptIndex}"\n                  analytics-id="components.directives.grade.gradingBar.reconcilerFeedback.toggle.button">\n            <bb-svg-icon ng-switch-when="add" size="medium" icon="add-feedback"></bb-svg-icon>\n            <bb-svg-icon ng-switch-when="view" ng-show="gradingBar.hasComment()" size="medium" icon="feedback" status="active"></bb-svg-icon>\n            <bb-svg-icon ng-switch-default size="medium" icon="feedback"></bb-svg-icon>\n          </button>\n          <bb-overflow-menu ng-show="gradingBar.showOverflowMenu()"\n                            element-id="{{\'attempt-menu-open-button_\' + attempt.id}}"\n                            element-name="{{gradingBar.getLocalizedTextByKey(\'components.directives.grade.grading-bar.grade\')}}"\n                            menu-items="gradingBar.getOverflowMenuItems()"\n                            analytics-id-tag-prefix="components.directives.grade.grading-bar.reconcile-attempt-grading.overflowMenu">\n          </bb-overflow-menu>\n        </div>\n      </div>\n    </div>\n  </form>'},"6TNA":function(e,t){e.exports='<span class="schema-grade">{{displayGrade.fullDisplayGrade}}</span>\n'},"6ZXc":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-medium-download",use:"icon-medium-download-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-download"><path d="M12 15V1M8 11l4 4 4-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 7v16h22V7h-4M1 7h4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"6sUD":function(e,t){e.exports='<div>\n  \x3c!-- Display a loading spinner if page is rendering --\x3e\n  <div class="telemetry-loading-anim" ng-if="telemetryPanelHeader.showSpinner">\n    <div class="spinner bb-secondary-color-2"/>\n  </div>\n  <header class="panel-header simple-header">\n    <div class="panel-titles-container">\n      <div class="panel-sub-title">{{ ::course().name }}</div>\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                type="button"\n                analytics-id="components.directives.telemetry.panel.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>components.directives.telemetry.panel.menu</span>\n        </button>\n        <h1 class="panel-title" ng-if="::titleKey" bb-translate>{{::titleKey}}</h1>\n        <h1 class="panel-title" ng-if="title">{{::title}}</h1>\n        \x3c!-- BUTTON 2 (displayed to the left of Button 1) --\x3e\n        <button ng-if="buttonTwoIcon" id="button-two"\n                aria-haspopup="true"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonTwoAriaLabel,\'title\': buttonTwoTitle}"\n                ng-click="buttonTwoCallback()"\n                ng-class="{ \'active\': mobileStudentListVisible }"\n                analytics-id="components.directives.telemetry.panel.buttonwTwo.button">\n          <i class="{{ ::buttonTwoIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonTwoTitle</span>\n        </button>\n        \x3c!-- BUTTON 1 (displayed on the far right) --\x3e\n        <button ng-if="buttonOneIcon"\n                id="button-one"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonOneAriaLabel,\'title\': buttonOneTitle}"\n                ng-click="buttonOneCallback()"\n                analytics-id="components.directives.telemetry.panel.buttonOne.button">\n          <i class="{{ ::buttonOneIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonOneTitle</span>\n        </button>\n      </div>\n    </div>\n  </header>\n</div>\n'},"6xt4":function(e,t){e.exports='<div\n  ng-switch="rootContent().isInForcedSequenceModule() || rootContent().isForcedSequenceModule() "\n  id="{{::addContentButton.getButtonWrapperId()}}"\n  tabindex="-1"\n>\n  <button\n    ng-switch-when="true"\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    bb-tooltip\n    enhanced-tooltip="true"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    bb-translate-attrs="{ title: \'course.outline.addForbidden.text\' }"\n    analytics-id="components.directives.add-content-button.course-outline.button"\n    >\n  </button>\n  <button\n    ng-switch-default\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    data-show-add-options\n    ng-click="addContentButton.toggleOverflowMenu()"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    analytics-id="components.directives.add-content-button.course-outline.addContentMenu.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible && !addContentButton.isEmptyFolder()"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  aria-labelledby="{{::addContentButton.getTargetId()}}"\n  analytics-id="components.directives.add-content-button.contextualMenu">\n</bb-ui-contextual-menu>\n<ul class="element-list-add-menu angular-animate small-block-grid-2 medium-block-grid-2 large-block-grid-3"\n    ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n    ng-show="addContentButton.isEmptyFolder()">\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-create"\n       bb-peek-sref="content-manage.create(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.link">\n      <div>\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.create</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="addContentButton.currentCourse.canCopy() && addContentButton.isEmptyFolder()">\n    <a class="content-import-button"\n       bb-peek-sref="content-manage.copy(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.import.link">\n      <div>\n        <bb-svg-icon size="small" icon="duplicate"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.copy</span>\n      </div>\n    </a>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      is-content="true"\n      primary-key="fileListViewLocalId"\n      skip-zip-file-check="true"\n      class="js-file-upload"\n      depth="depth()">\n      <button ng-if="addContentButton.isEmptyFolder()"\n              class="file-upload-button"\n              analytics-id="components.directives.add-content-button.course-outline.upload.button">\n        <div>\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n          <span bb-translate>components.directives.add-content-button.upload</span>\n        </div>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-market"\n       href="javascript:void(0);"\n       ng-click="addContentButton.openContentMarket()"\n       analytics-id="components.directives.add-content-button.course-outline.openContentMarket.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-market"></bb-svg-icon><span bb-translate>components.directives.add-content-button.contentMarket</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="::addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="true"\n      monitor-leave="true"\n      is-third-party-upload="true"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      cloud-upload-selected-content-id="addContentButton.positionForFiles.positionAfter"\n      primary-key="fileListViewId"\n      skip-zip-file-check="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      target-div="{{\'#\' + fileListViewId}}"\n      disable-drag="true"\n      ignored-states="[\'content-manage.import\']">\n      <button\n        class="doc-add-media clear ng-scope"\n        bb-kloudless\n        primary-key="fileListViewId"\n        attach-handler="addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="true"\n        on-files-selected="addContentButton.onFilesSelectedHandler"\n        analytics-id="components.directives.add-content-button.course-outline.importContentFromCloudStorage.button">\n        <bb-svg-icon size="small" icon="upload-cloud"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-collection"\n       bb-peek-sref="content-collection(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.contentCollection.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-collection"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.contentCollection</span>\n      </div>\n    </a>\n  </li>\n</ul>\n'},"70Xn":function(e,t){e.exports='<bb-modal class="notification automatic-zero-confirmation" \n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZero">\n  <div name="modal-contents">\n    \x3c!-- Instructions --\x3e\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.confirm"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.confirm\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.cancel"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.cancel\n  </button>\n</bb-modal>'},"7BzJ":function(e,t,n){},"7OC/":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var i=n("D57K"),o=n("wHJ2"),s=n("LN5R"),a=n("o5Lu"),r=n("lEL+"),c=n("TmUJ"),l=n("dF44"),d=n("+4Px"),u=n("qH3X"),p=n("8NsT"),m=n("6PP7"),h=n("LTOG"),g="ultra.components.directives.gradeGridColumnHeaderOverallReborn",b=function(t){function n(n,i,o,s,a,r,c,p){var m=t.call(this,i,p)||this;return m.rootScope=n,m.element=o,m.attrs=s,m.$compile=a,m.gradeGridRebornController=r,m.grade=c,m.canPostGrades=!1,m.initializeEventHandler(),m.menuScope=i.$new(!0),i.$watch("col",(function(e){i.columnMetadata=e.data,m.col=e,m.highlight(m.col),m.canPostGrades=m.grade.canPostGrades(e.gridData.course,e.data)})),i.$on(l.b.CELL_FOCUSED,(function(){o.find(".content").focus()})),o.find(".content").on("keydown",(function(t){if(t.keyCode===d.g)m.scope.$emit(l.b.LEAVE_GRID);else{if(!d.y(t))return;e(t.target).click()}t.preventDefault(),t.stopPropagation()})),o.find(".content").on("keyup",(function(e){d.y(e)&&(e.preventDefault(),e.stopPropagation())})),i.$on(u.a.FOCUSIN_CELL,(function(e,t){t.columnId===m.col.id&&(m.gradeGridRebornController.getElement().find(".is-active").removeClass("is-active"),m.element.find(".content").addClass("is-active"))})),i.$on(u.a.FOCUSOUT_CELL,(function(e,t){t.columnId===m.col.id&&m.element.find(".content").removeClass("is-active")})),m}return Object(i.__extends)(n,t),n.prototype.initializeEventHandler=function(){var e=this;this.element.find(".content-header-bg").focusin((function(){e.focusin()})).focusout((function(){e.focusout()}))},n.prototype.focusin=function(){this.rootScope.$broadcast(u.a.FOCUSIN_CELL,{columnId:this.col.id})},n.prototype.focusout=function(){this.rootScope.$broadcast(u.a.FOCUSOUT_CELL,{columnId:this.col.id})},Object.defineProperty(n.prototype,"possible",{get:function(){return 100},enumerable:!0,configurable:!0}),n.prototype.popupMenu=function(t){var n=this,i="grade-grid-column-header-menu-reborn-"+this.col.id;if(!this.gradeGridRebornController.isMenuExisting(i)){var o=e(t.target).closest(".grade-grid-header-cell").offset();o.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=function(e){var t=o.left+e.width(),i=n.gradeGridRebornController.getGradeGridContainerElementRight();t>i&&(o.left-=t-i+Object(c.a)()),e.offset(o)},this.gradeGridRebornController.popupMenu(i,m,this.menuScope),this.timeout((function(){var e=n.gradeGridRebornController.getPopupMenu();e.on("keydown",(function(t){t.keyCode===d.g||t.keyCode===d.u?(e.data("destroy")(),n.scope.$emit(l.b.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):d.y(t)&&n.scope.$emit(l.b.CELL_FOCUSED)})),n.gradeGridRebornController.getMenuitems().first().focus()}),this.menuScope,0,!1),t.preventDefault(),t.stopPropagation()}},n.$inject=["$rootScope","scope","element","attrs","$compile","gradeGridRebornController",a.h,r.b],n}(h.a),f=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=p,this.scope=!0,this.require="^"+s.a,this.link=function(e,n,i,o){e.gradeGridColumnHeaderOverallReborn=t.$injector.instantiate(b,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();o.module(g,[]).directive("bbGradeGridColumnHeaderOverallReborn",["$injector",function(e){return e.instantiate(f)}])}).call(this,n("5iHu"))},"7UH7":function(e,t){e.exports='<div class="text-editor" tabindex="-1" bb-load-bundle="components/directives/text-editor" bb-cache-compilation="basic-text-editor">\n  <label ng-if="inputLabelKey" class="text-editor-label" for="{{::elementId}}" bb-translate>{{::inputLabelKey}}</label>\n  <textarea id="{{::elementId}}"\n         class="read-mode editor-element"\n         name="{{::elementId}}"\n         tabindex="0"\n         type="text"\n         bb-validate-maxlength="{{::getInputMaxLength()}}"\n         ng-model="ngModel"\n         maxlength="{{::(getInputMaxLength() || \'\')}}"\n         ng-model-options="{ getterSetter: true }"\n         ng-disabled="{{::readonly()}}"\n         fng-blur="textEditor.onBlur()"\n         fng-focus="textEditor.onFocus()"\n         fng-keyup="textEditor.onChange($event)"\n         fng-keydown="textEditor.onKeydown($event)"\n         bb-translate-attrs="{ \'placeholder\': \'{{placeholderKey}}\' }"\n         aria-label="{{textEditor.getContentLabel()}}"\n         translate-attrs-values="{{::placeholderAttrsValues}}"\n         bb-focus-on="{{::focusOn}}"\n         ng-required="::fieldRequired()"\n         analytics-id="components.textEditor.basicEditor.textarea"></textarea>\n  <div bb-validation-messages\n       ng-if="::!noValidationMessage()"\n       for="{{::elementId}}" immediate="true">\n    <span ng-message="maxlengthImmediate">\n      <span bb-translate translate-values="{ diff: element.$errorImmediate.maxlengthImmediate.diff }">\n        components.directives.validation.messages.errors.maxlength.plural\n      </span>\n    </span>\n  </div>\n</div>\n'},"7cYF":function(e,t,n){"use strict";n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return $})),n.d(t,"a",(function(){return A})),n.d(t,"c",(function(){return x}));n("aSyE"),n("VcPJ");var i=n("nsO7"),o=n("wHJ2"),s=n("+O05"),a=n("k9iv"),r=n("o5Lu"),c=n("X/qj"),l=n("0JpG"),d=n("5RJJ"),u=n("pjml"),p=n("5uPl"),m=n("IjED"),h=n("lEL+"),g=n("TnpK"),b=n("Ed3w"),f=n("5MwF"),v=n("DYK3"),y=n("3Nzc"),w=n("yC9S"),C=n("p7NW"),S=n("nmzr"),k=n("R4kC"),I=n("fGDP"),D=n("cpZm"),E=n("15AK"),O=n("lmMM"),T="trigger_question_regrading-task",$="open-assessment-feedback-editor",A=function(){function e(e,t,n,i,o,a,r,c,l,d,u,p,m,h,g,k,O){var $=this;this.$rootScope=e,this.$scope=t,this.course=n,this.column=i,this.content=o,this.errorModalService=a,this._gradeService=r,this.gradebookPermissionService=c,this.bbLocalize=l,this.membershipService=d,this.timeout=u,this.ultraState=p,this.UserModel=m,this.originalityReportService=h,this.slideoutPanelService=g,this.scheduleTask=k,this.submissionListService=O,this.namesCarousel=Object.create(null),this.contentCarousel=Object.create(null),this.isFeedbackDirty=!1,this.isFeedbackEmpty=!0,this.attemptsWereDeleted=!1,this.isLoading=!0,this.isExternalSubmissions=!1,this.saveAsOverride=!0,this.isAnyQuestionEditing=!1,this.isQuestionRegradingBlocked=!1,this.confirmedClose=!1,this.gradedQuestionAttemptsByAttemptId=Object.create(null),this.hideFeedbackStudentHasLeft=!1,this.hideFeedbackFromPeerReviewer=!1,this.regradingNotifier=function(e){e||$.$rootScope.$broadcast(y.a)},this.doSlide=function(e){e&&$.$scope.$broadcast(E.ASSESSMENT_FEEDBACK_SAVE),$.isFeedbackDirty=!1,$.namesCarousel.slide($.slideOffset)},this.canViewGrades=this.gradebookPermissionService.canViewGrades(),this.canViewAttempts=this.gradebookPermissionService.canViewAttempts(),this.originalityReportService.setCourseContent(o,!0),this.isExternalSubmissions=s.a.isExternalSubmissionsAssessment(o),this.isAnyQuestionEditing=n.isComplete();var A=p.params;this.isOpenFromGridView=A.gradebookView===I.b.Grid,this.isOpenFromStudentList=A.gradebookView===I.b.List&&A.listViewType===D.b.id,this.membershipId=A.membershipId,this.$scope.$on("bb-update-question-grade",(function(e,t){$._onUpdateQuestionGrade(t)})),this.column.hasRubricAssociation()&&w.b.OnRootScope(this.$scope,C.d,(function(){return $.reloadGrade()})),f.a.features.questionRegrading&&this.shouldQueryRegradingTask(n,o)&&(this.scheduleTask.scheduleTask({courseId:n.id,taskName:b.a.QuestionRegrading,scope:t,delay:1e4,notifier:this.regradingNotifier}),this.isRefFromAssessment?t.$on(T,(function(){$.isAnyQuestionEditing?$.isQuestionRegradingBlocked=!0:$.reloadGrade(!0)})):t.$on(y.a,(function(){$.isAnyQuestionEditing?$.isQuestionRegradingBlocked=!0:$.reloadGrade(!0)})),t.$on(v.c,(function(e,n){t.$broadcast(v.b,n),$.isAnyQuestionEditing=!0})),t.$on(v.i,(function(e,n){$.isAnyQuestionEditing=!1,$.isQuestionRegradingBlocked&&(n!==v.d.CANCEL&&n!==v.d.SAVE_WITHOUT_REGRADING||$.reloadGrade(!0),$.isQuestionRegradingBlocked=!1),t.$applyAsync()}))),t.$on("$stateChangeStart",(function(e,t){t.name.indexOf(S.GradeRoutes.SUBMISSION_GRADING)<0&&($.attemptsWereDeleted&&$.$scope.$root.$broadcast("refresh-attempt-count"),f.a.features.questionRegrading&&$.isAnyQuestionEditing&&!$.course.isComplete()&&!$.confirmedClose&&(e.preventDefault(),$.$scope.$broadcast("show-confirmation","submission-question-regrading")))})),t.$on("$stateChangeSuccess",(function(e,t){$.slideoutPanelService.setSlideoutPanelState()}));var x=this.submissionListService.addOnRowsUpdated(n.id,this.column.id,this.onSubmissionListRowsUpdated);this.$scope.$on("$destroy",x),t.$on("$destroy",(function(){x(),$.originalityReportService.clearReport(),$.originalityReportService.clearCourseContent()})),t.namesCarouselInitialized=function(){return!!$.namesCarousel.id||void 0},t.$watch("::namesCarouselInitialized()",(function(){t.namesCarouselInitialized()&&$.onNamesCarouselInit()})),t.$on(E.ASSESSMENT_FEEDBACK_CHANGED,(function(e,t,n){$.isFeedbackDirty=t,$.isFeedbackEmpty=n})),t.$on(E.ASSESSMENT_FEEDBACK_SAVED,(function(){return $.isFeedbackDirty=!1}))}return e.prototype.onFeedbackIconClick=function(){this.$scope.$broadcast($)},e.prototype.onNamesCarouselInit=function(){this.namesCarousel.registerSlideStatusUpdater({className:{whenTrue:"as-prev",whenFalse:""},scopeVarName:"asPrevButton",predicate:function(e){return e.slideIndex>=0&&e.slideIndex===e.currentSlide-1}}),this.namesCarousel.registerSlideStatusUpdater({className:{whenTrue:"as-next",whenFalse:""},scopeVarName:"asNextButton",predicate:function(e){return e.slideIndex===e.currentSlide+1&&e.slideIndex<e.totalSlides}})},e.prototype.shouldQueryRegradingTask=function(e,t){return!e.isComplete()&&!t.isScorm()},Object.defineProperty(e.prototype,"isRefFromAssessment",{get:function(){return this.ultraState.current.name.indexOf(".peek.gradebook-item.assessment")>0},enumerable:!0,configurable:!0}),e.prototype.isSlidePanelOpen=function(){return this.slideoutPanelService.isOpen()},e.prototype.getAttemptDetail=function(e){return void 0===e&&(e=this.carouselHelper.currentRow),this.getAttempt(e)?this.getAttempt(e).getToolAttemptDetailItem(this.column.scoreProviderHandle):null},e.prototype.showAttemptCanvas=function(){var e=this.getAttempt(this.carouselHelper.currentRow);return!(null==e||!e.toolAttemptDetail||(null==e?void 0:e.isInProgress()))},e.prototype.hasContent=function(e){if(!e)return!1;var t=e.getToolAttemptDetailItem(this.column.scoreProviderHandle);return t&&t.assessment&&t.assessment.questionCount>0},e.prototype.canRenderSubmission=function(){return!(!(this.carouselHelper&&this.carouselHelper.ready&&this.carouselHelper.currentRow)||!this.isAttemptSet())},e.prototype.loadGradedQuestionAttempts=function(e){var t=this;return this.course.gradebook.attempts.$buildRaw(e).assessment.gradedQuestionAttempts.$refresh({expand:"questionAttempt.question,questionAttempt.question.usageCount,questionAttempt.question.sourceInfo,questionAttempt.answerCorrectness"}).$then((function(n){n.setPostStatusAndGroupAttemptId(e),t.gradedQuestionAttemptsByAttemptId[e.id]=n}))},e.prototype.setSaveAsOverride=function(){if(this.column&&this.column.isScorm())this.saveAsOverride=!1;else{var e=this.getAttemptDetail();e&&(this.saveAsOverride=e.assessment.hasAnswerableQuestions)}},e.prototype.getQuestionsForAttempt=function(){var e=this.getAttempt(this.carouselHelper.currentRow);if(!o.isUndefined(e))return s.a.getQuestionsForAttempt(e,this.column.scoreProviderHandle)},e.prototype._onUpdateQuestionGrade=function(e){var t=0,n=this.gradedQuestionAttempts,o=Object(i.findIndex)(n,(function(t){return t.questionAttempt.id===e.questionAttempt.id}));if(-1!==o){n[o]=e;var s=this.getAttemptDetail();n.forEach((function(e){e.questionAttempt.attemptStatus.toString()===u.C.AttemptStatus.Completed.toString()&&t++})),t!==n.length&&s.status.toString()!==u.C.AttemptStatus.Completed.toString()||this.reloadGrade()}},e.prototype.closeWithoutSaving=function(){this.confirmedClose=!0,this.ultraState.leavePeekState(this.ultraState.current.name)},e.prototype.showOverflowMenu=function(){return this.gradebookPermissionService.canDelegatedEnterAttemptFeedback(this.column,this.getAttempt(this.carouselHelper.currentRow))&&!this.isSlidePanelOpen()},e.prototype.isPeerGradingAndAnonymousUser=function(e){return!1},e.prototype.transitionTo=function(e){this.slideOffset=e,this.isFeedbackDirty&&f.a.features.peerAssessmentFeatureFlag?this.$scope.$broadcast(O.a,"assessment-feedback-save-changes"):this.doSlide()},e.prototype.onCarouselLabelClick=function(e,t){e.preventDefault(),e.stopPropagation();var n=t-this.carouselHelper.currentSlideIndex;this.transitionTo(n)},e.$inject=["$rootScope","$scope","currentCourse","currentColumn","currentContent",a.c,r.h,c.b,l.serviceName,d.b,h.b,g.d,u.Pb.serviceName,p.b,m.b,b.c,k.b],e}(),x=function(){function e(e,t){this.ready=!1,this.submissionGradingController=e,this.mergeRows(t)}return e.prototype.mergeRows=function(e){var t=this,n=e.filter((function(e){return null!=e.grade&&e.attemptCount>0})),o=this.rows?this.rows.reduce((function(e,t){return e[t.membership&&t.membership.id]=t,e}),{}):{};n.forEach((function(e,t){var i=e.membership&&e.membership.id;i in o&&(n[t]=o[i])})),this.rows=n,this.currentSlideIndex=Object(i.findIndex)(this.rows,(function(e){return t.submissionGradingController.findIndex(e)})),this.currentSlideIndex<=0&&(this.currentSlideIndex=0)},e.prototype.disableSliderNavigation=function(){return this.submissionGradingController.isSlidePanelOpen()},e.prototype.showPrevArrow=function(){return this.currentSlideIndex>0&&!this.disableSliderNavigation()},e.prototype.showNextArrow=function(){return this.currentSlideIndex<this.rows.length-1&&!this.disableSliderNavigation()},e.prototype.isPrevious=function(e){return e>=0&&e===this.currentSlideIndex-1},e.prototype.isCurrent=function(e){return e===this.currentSlideIndex},e.prototype.isNext=function(e){return e===this.currentSlideIndex+1&&e<this.rows.length},e.prototype.updateSlide=function(e){this.submissionGradingController.isAnyQuestionEditing=!1,e>=0&&e<this.rows.length&&this.currentSlideIndex!==e&&(this.currentRow.hasBeenViewed=!0,this.currentSlideIndex=e,this.submissionGradingController.onSlideUpdate())},e.prototype.findRowByGradeId=function(e){return this.rows.find((function(t){return t.grade.id===e}))},e.prototype.findRowIndexByGrade=function(e){return this.rows.findIndex((function(t){return t.grade.id===e.id}))},e.prototype.updateRowGradeByGrade=function(e){var t=this.findRowIndexByGrade(e);this.rows[t].grade=e},Object.defineProperty(e.prototype,"initialSlide",{get:function(){return this.currentSlideIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRow",{get:function(){return this.rows[this.currentSlideIndex]},enumerable:!0,configurable:!0}),e}()},"7u+5":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("Otwn"),s="ultra.components.directives.bbUiIcon.Assignment";Object(i.a)(o.Assignment,s,"bbUiIconAssignment")},"8+lX":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-replies",use:"icon-small-replies-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-replies"><path d="M1 5h14v10H1v-4" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3L1 5l2 2" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"810X":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var i=n("wHJ2"),o=n("LN5R"),s=n("pjml"),a=n("0JpG"),r=n("lEL+"),c=n("+4Px"),l=n("dF44"),d=n("5vTq"),u=n("kkz3"),p="ultra.components.directives.gradeGridColumnStudentReborn",m=function(){function t(e,t,n,i,o,s){var r=this;this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,this.bbLocalize=o,this.timeout=s,e.$watch("row",(function(t){var n=i.getGridData().getRowById(t.id).metadata;e.user=n.user,e.fullName=r.bbLocalize.formatUsernameSync(e.user,a.ILocaleUsernameFormat.Short,e,{noWrap:!0}),e.isUserCourseAvailable=n.isAvailable,e.courseRole=r.getLocalizedRoleNameByCourseRole(n.courseRole)})),this.element.find("bb-username, bb-user-avatar").click((function(t){r.popupMenu(t,e.user)})),e.$on(l.b.ENTER_CELL,(function(e,t){t.find("bb-username").click()}))}return t.prototype.popupMenu=function(t,n){var i=this,o="grade-grid-column-student-card-reborn-"+n.id;if(!this.gradeGridRebornController.isMenuExisting(o)){var s=e(t.target).closest(".grade-grid-cell").offset();s.top+=20,s.left+=30;var a=this.scope.$new(!1);a.waiting=200,a.adjustPosition=function(e){s.top+e.height()>i.gradeGridRebornController.getGradeGridContainerElementBottom()&&(s.top-=60),e.offset(s)},this.gradeGridRebornController.popupMenu(o,u,a),this.timeout((function(){var t=e("#"+o);t.on("keydown",(function(e){e.keyCode!==c.g&&e.keyCode!==c.u||(t.data("destroy")(),e.preventDefault(),e.stopPropagation())})),a.$on("$destroy",(function(){return i.scope.$emit(l.b.LEAVE_CELL)})),t.focus()}),a,0,!1),t.preventDefault(),t.stopPropagation()}},t.prototype.getLocalizedRoleNameByCourseRole=function(e){return e.identifier&&e.identifier.toString()in s.y.toBeLocalizedRoleLabels?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:s.y.toBeLocalizedRoleLabels[e.identifier.toString()]}):e.courseName.rawValue},t.$inject=["scope","element","attrs","gradeGridRebornController",a.serviceName,r.b],t}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=d,this.scope=!0,this.require="^"+o.a,this.link=function(e,n,i,o){e.gradeGridColumnStudentReborn=t.$injector.instantiate(m,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();i.module(p,[]).directive("bbGradeGridColumnStudentReborn",["$injector",function(e){return e.instantiate(h)}])}).call(this,n("5iHu"))},"8NsT":function(e,t){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content content-header-bg"\n       ng-click="gradeGridColumnHeaderOverallReborn.popupMenu($event)"\n       tabindex="0"\n       role="columnheader"\n       aria-describedby="summary-points-{{::columnMetadata.id}}"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderOverallReborn.popupMenu"\n  >\n    <div bb-content-item-icon content-column="columnMetadata" class="element-image" role="presentation"></div>\n    <div class="grade-grid-header-title grade-name">\n      <bb-svg-icon class="visibility-icon"\n                   ng-if="!columnMetadata.visible"\n                   size="small"\n                   icon="invisible"\n                   role="img"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n      ></bb-svg-icon>\n      <span class="ellipse" title="{{::columnMetadata.columnName}}">{{::columnMetadata.columnName}}</span>\n    </div>\n  </div>\n  <div class="grade-grid-header-summary" tabindex="1" id="summary-points-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse points"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.points.plural\'}" translate-attrs-values="{count: gradeGridColumnHeaderOverallReborn.possible}"\n          bb-translate translate-values="{count: gradeGridColumnHeaderOverallReborn.possible}">components.directives.grade.grid.points.plural</span>\n    <span class="sr-only"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="1" ng-if="columnMetadata.isCalculated()" id="summary-info-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse items-count"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}" translate-attrs-values="{count: columnMetadata.itemsCount}"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n</div>\n'},"8sWK":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-groups",use:"icon-small-groups-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-groups"><path d="M12 15s-1-2-4-2M4 15s1-2 4-2M8 13c1.6569 0 3-1.3431 3-3S9.6569 7 8 7s-3 1.3431-3 3 1.3431 3 3 3zM12 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM1 7s1-2 3-2 3 2 3 2M9 7s1-2 3-2 3 2 3 2M4 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"9Fiv":function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var i=n("gK/k"),o=n("dF44"),s=n("lEL+"),a=n("0JpG"),r=n("X/qj"),c=n("+4Px"),l=n("5Dl8"),d=n("yC9S"),u=n("5iHu"),p=n("nsO7"),m=n("s52B"),h="rbGridContainer",g=function(){function e(e,t,n,i,o,s){this.position=e,this.columns=t,this.grid=n,this.timeout=i,this.bbLocalize=o,this.gradebookPermissionService=s,this.renderedRows=[],this.nextRenderedRows=[],this.renderedColumns=[],this.nextRenderedColumns=[],this.scrollTop=0,this.scrollLeft=0,this.id=n.id+"-container-"+e,this.rows=n.options.rows,this.totalWidth=this.initColumnsPosition(t,!1),this.totalHeight=n.options.rowHeight*n.options.rows.length,this.isMain="center"===e,this.headerBorder=n.options.headerBorder,this.rowBorder=n.options.rowBorder,this.callbacks=n.options.callbacks}return e.prototype.initColumnsPosition=function(e,t){void 0===e&&(e=this.columns),void 0===t&&(t=!0);for(var n=[],i=0,o=0;o<e.length;o++){var s=e[o];s.accumulativeWidth=i,t&&n.push(".rb-column-position-"+s.id+" {left: "+Object(l.b)(i)+";}"),i+=s.columnWidth}if(t){u("style#"+this.id).remove();var a=u('<style scoped id="'+this.id+'"></style>');a.text(n.join("\n")),this.grid.$element.prepend(a)}return i},e.prototype.getContainerStyle=function(){var e,t=this.grid.containers.left,n=this.grid.containers.right;return this.isMain?{left:Object(l.b)(t&&t.totalWidth),right:Object(l.b)(n&&n.totalWidth+this.grid.scrollbarWidth)}:((e={})[this.position]="0",e)},e.prototype.getHeaderCanvasStyle=function(){return{width:Object(l.b)(this.totalWidth),height:Object(l.b)(this.grid.options.headerHeight)}},e.prototype.getBodyCanvasStyle=function(){return{width:Object(l.b)(this.totalWidth),height:Object(l.b)(this.totalHeight)}},e.prototype.getBodyStyle=function(){return{"overflow-x":this.hasHScrollbar?"scroll":"hidden","overflow-y":this.hasVScrollbar?"scroll":"hidden"}},e.prototype.init=function(e,t){var n=this;this.scope=e,this.element=t,t.addClass(this.id),this.header=this.element.find(".rb-grid-header"),this.body=this.element.find(".rb-grid-body"),this.timeout((function(){n.canAddColumn()&&(n.columnAdder=new b(n.element.find(".rb-add-column"),n)),n.adjustRows(),n.adjustColumns(),n.addEventListeners()}),this.scope)},e.prototype.toggleFirstAddColumnPlaceholder=function(e){this.element.find(".rb-add-column-placeholder.first")[e?"show":"hide"]()},e.prototype.resetColumns=function(e){this.columns=e,this.totalWidth=this.initColumnsPosition(e,!1),this.adjustColumns()},e.prototype.resetRows=function(e){this.rows=e,this.totalHeight=this.grid.options.rowHeight*this.rows.length,this.adjustRows()},e.prototype.addEventListeners=function(){this.element.on("wheel",this.handleWheel.bind(this)),this.body.on("scroll",this.handleScroll.bind(this))},e.prototype.handleScroll=function(){var e=this.body.scrollLeft(),t=this.body.scrollTop();this.grid.scrollContainers({scrollLeft:e!==this.scrollLeft?e:-1,scrollTop:t!==this.scrollTop?t:-1})},e.prototype.handleWheel=function(e){if(this.body[0].scrollWidth!==this.body[0].clientWidth||this.body[0].scrollHeight!==this.body[0].clientHeight){var t=e.originalEvent,n=t.deltaX,i=t.deltaY;if(1===t.deltaMode){var o=parseInt(this.element.css("font-size"),10);n*=o,i*=o}if(!(this.atTop()&&i<0||this.atBottom()&&i>0||this.atLeft()&&n<0||this.atRight()&&n>0||0===n&&0===i)){e.preventDefault(),e.stopPropagation();var s=-1,a=-1;0!==i&&(s=Math.max(0,Math.min(this.scrollTop+i,this.getMaxScrollTop()))),0!==n&&(a=Math.max(0,Math.min(this.scrollLeft+n,this.getMaxScrollLeft()))),this.grid.scrollContainers({scrollTop:s,scrollLeft:a})}}},e.prototype.scrollHorizontally=function(e){this.body.scrollLeft(e),this.header.scrollLeft(e),this.scrollLeft=e,this.adjustColumns()},e.prototype.scrollVertically=function(e){this.body.scrollTop(e),this.scrollTop=e,this.adjustRows()},e.prototype.canAddColumn=function(){return this.isMain&&this.grid.canAddColumn()&&this.gradebookPermissionService.canModify()},e.prototype.getVisibleColRange=function(){for(var e=0,t=this.columns.length,n=0,i=0;n<this.columns.length;n++)if((i+=this.columns[n].columnWidth)>=this.scrollLeft){e=n;break}for(n=0,i=0;n<this.columns.length;n++)if((i+=this.columns[n].columnWidth)>=this.scrollLeft+this.body[0].clientWidth){t=n+1+o.a;break}return{start:e,end:t}},e.prototype.calculateNextRenderedColumns=function(){var e=this.getVisibleColRange(),t=e.start,n=e.end;this.nextRenderedColumns=this.columns.slice(t,n)},e.prototype.adjustColumns=function(){this.calculateNextRenderedColumns(),this.grid.debounceRefresh()},e.prototype.getVisibleRowRange=function(){var e=Math.ceil(this.body[0].clientHeight/this.grid.options.rowHeight)+o.e,t=Math.floor(this.scrollTop/this.grid.options.rowHeight);return{start:t,end:t+e}},e.prototype.calculateNextRenderedRows=function(){var e=this.getVisibleRowRange(),t=e.start,n=e.end;this.nextRenderedRows=this.rows.slice(t,n)},e.prototype.isRowOutOfBound=function(e){var t=this.getVisibleRowRange(),n=t.start,i=t.end;return{top:e<=n,bottom:e+o.e>=i}},e.prototype.isColOutOfBound=function(e){var t=this.getVisibleColRange(),n=t.start,i=t.end;return{left:e<=n,right:e+o.a+1>=i}},e.prototype.adjustRows=function(){this.calculateNextRenderedRows(),this.grid.debounceRefresh()},e.prototype.applyData=function(){this.renderedRows=this.nextRenderedRows,this.renderedColumns=this.nextRenderedColumns},e.prototype.getMaxScrollTop=function(){return this.totalHeight-this.body[0].clientHeight},e.prototype.getMaxScrollLeft=function(){return this.totalWidth-this.body[0].clientWidth},e.prototype.getTopRowScrollTop=function(e){return this.grid.options.rowHeight*e},e.prototype.getBottomRowScrollTop=function(e){return Math.max(0,this.grid.options.rowHeight*(e+1)-this.body[0].clientHeight)},e.prototype.getLeftColScrollLeft=function(e){return e.accumulativeWidth},e.prototype.getRightColScrollLeft=function(e){return Math.max(0,e.accumulativeWidth+e.columnWidth-this.body[0].clientWidth)},e.prototype.atTop=function(){return 0===this.scrollTop},e.prototype.atBottom=function(){return this.scrollTop===this.getMaxScrollTop()},e.prototype.atLeft=function(){return!this.isMain||0===this.scrollLeft},e.prototype.atRight=function(){return!this.isMain||this.scrollLeft===this.getMaxScrollLeft()},e.$inject=["position","columns","grid",s.b,a.serviceName,r.b],e}(),b=function(){function e(e,t){var n=this;this.element=e,this.container=t,this.grid=t.grid,this.scope=t.scope,this.bbLocalize=t.bbLocalize,e.css("height","calc(100% - "+Object(l.b)(this.grid.scrollbarWidth)),this.button=e.find(".button"),this.firstPlaceholder=this.container.element.find(".rb-add-column-placeholder.first"),this.button.on("keydown",(function(e){var t;n.grid.previousCell.tabPressed=!1;var i=n.container.currentColumn;if(c.z(e)||e.keyCode===c.j||e.keyCode===c.g){var s=i||n.grid.containers.left.columns.slice(-1)[0],a=n.container.columns.indexOf(s);a>=0&&n.container.isColOutOfBound(a).left?n.grid.scroll({scrollLeft:n.container.getLeftColScrollLeft(s)},(function(){n.grid.$scope.$broadcast(o.b.FOCUS_CELL,t,s)})):n.grid.$scope.$broadcast(o.b.FOCUS_CELL,t,s)}else{if(!c.A(e)&&e.keyCode!==c.s)return;var r=n.grid.getFocusableColumns(),l=NaN,d=NaN;i?(i=r[(r.indexOf(i)+1)%r.length])===r[0]&&(t=n.container.rows[0],d=0):i=n.container.columns[0];var u=n.container.columns.indexOf(i);n.container.isColOutOfBound(u).right&&(l=n.container.getRightColScrollLeft(i)),p.isNaN(l)&&p.isNaN(d)?n.grid.$scope.$broadcast(o.b.FOCUS_CELL,t,i):n.grid.scroll({scrollTop:d,scrollLeft:l},(function(){return n.grid.$scope.$broadcast(o.b.FOCUS_CELL,t,i)}))}n.hide(),e.preventDefault(),e.stopPropagation()})),d.b.OnWindow("click",(function(e){u(e.target).closest(n.button).length||(n.button.removeClass("active"),n.hide())}),this.container.scope),this.container.scope.$on(o.b.SCROLL_H,(function(){n.hide()})),this.container.scope.$on(o.b.SCROLL_V,(function(){n.button.hasClass("active")&&n.hide()}))}return e.prototype.enter=function(e,t){this.button.hasClass("active")||this.show(u(e.target),t)},e.prototype.leave=function(){this.button.hasClass("active")||this.hide()},e.prototype.show=function(e,t){void 0===e&&(e=this.firstPlaceholder),this.element.show(),this.element.offset(e.offset()),this.element.css("opacity","1"),this.container.currentColumn=t||this.grid.containers.left.columns.slice(-1)[0],this.addAriaLabel()},e.prototype.hide=function(){this.element.hide(),this.element.css("opacity","0")},e.prototype.onClick=function(e){this.button.toggleClass("active"),this.button.hasClass("active")&&this.container.callbacks.column(e,this.container.currentColumn)},e.prototype.addAriaLabel=function(){var e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.lastAddButtonAriaLabel",params:{columnName:this.container.currentColumn.data.columnName},noWrap:!0,noEscape:!0});this.button.attr("aria-label",e)},e}(),f=function(){},v=function(){function e(e){this.$injector=e,this.replace=!0,this.restrict="A",this.require=["^"+i.a,h],this.template=m,this.controller=f,this.scope=!0,this.link=function(e,t,n,i){var o=i[0],s=i[1];o.initPromise.then((function(){var i=o.containers[n[h]];i.init(e,t),e.container=i,e.grid=o,s.container=i}))}}return e.$inject=["$injector"],e}()},"9KIl":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var i=n("wHJ2"),o=n("nsO7"),s=n("X/qj"),a=n("LN5R"),r=n("o5Lu"),c=n("pjml"),l=n("lEL+"),d=n("0JpG"),u=n("T1pL"),p=n("dF44"),m=n("qH3X"),h=n("TmUJ"),g=n("+4Px"),b=n("wJOA"),f=n("mWXo"),v="ultra.components.directives.gradeGridColumnOverallReborn",y=function(){function t(e,t,n,i,s,a,r,c,l,d,u,h,g){var b=this;this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=s,this.gradebookPermissionService=a,this.$compile=r,this.scope=c,this.element=l,this.attrs=d,this.gradeGridRebornController=u,this.timeout=h,this.bbLocalize=g,this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),c.$watchGroup(["row","col"],(function(e){b.changeRecord(e)})),c.$on(m.a.REFRESH,(function(e,t){var n=t.rowId,i=t.columnIds;o.forEach(i,(function(e){b.scope.row.id===n&&b.cell.column.id===e&&(b.initializeCell(n,e),b.initializeUI(),b.initializeGradeDetail(b.cell.data),b.scope.$broadcast(m.a.REFRESH_OVERALL_EDITOR))}))})),c.$on(p.b.ENTER_CELL,(function(e,t){return t.find(".grade-grid-cell").click()})),c.$on("$destroy",(function(){}))}return t.prototype.changeRecord=function(e){var t=e[0],n=e[1];this.initializeCell(t.id,n.id),this.initializeState(),this.initializeUI(),this.initializeGradeDetail(this.cell.data)},t.prototype.initializeEventHandler=function(){var e=this;this.element.parents(".rb-cell").focusin((function(){e.focusin()})).focusout((function(){e.focusout()})),this.element.children(".grade-grid-cell").mousedown((function(){return e.mousedown()}))},t.prototype.focusin=function(){this.rootScope.$broadcast(m.a.FOCUSIN_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.focusout=function(){this.rootScope.$broadcast(m.a.FOCUSOUT_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.initializeUI=function(){var e=this.element.children(".grade-grid-cell");this.isLoading||this.isEditing?e.children(".score").hide():e.children(".overall-display-grade").show()},t.prototype.initializeGradeDetail=function(e){this._gradeDetail=o.isUndefined(e)||o.isNull(e)?void 0:this.gradeService.gradeDetailToPercentage(e.grade);var t=this.extractGradeFromGradeDetail(this.gradeDetail);this.setUpScreenReader(this.cell,t)},t.prototype.extractGradeFromGradeDetail=function(e){return e&&e.displayGrade&&e.displayGrade.perfCode&&e.displayGrade.perfCode.code||e&&e.getScore()},Object.defineProperty(t.prototype,"disabledEditor",{get:function(){return!this.canBeEdited&&o.isEmpty(this.extractGradeFromGradeDetail(this.gradeDetail))},enumerable:!0,configurable:!0}),t.prototype.initializeState=function(){this._isEditing=!1},t.prototype.initializeCell=function(e,t){this.cell=this.gridData.getCell(e,t),this._oldScore=this._score=void 0},Object.defineProperty(t.prototype,"isReady",{get:function(){return!o.isUndefined(this.cell)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return!this.isReady||!this.cell.isLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){if(this.isReady){if(o.isUndefined(this._score)){var e=this.gradeDetail&&this.gradeDetail.getScore();e=e?this.bbLocalize.formatNumberSync(Math.round(100*parseFloat(e))/100,this.scope,{maximumFractionDigits:r.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL}):e,o.isEmpty(e)&&this.gradeDetail&&!o.isUndefined(this.gradeDetail.displayGrade.perfCode)&&(e=this.gradeDetail.displayGrade.perfCode.code),this._oldScore=this._score=e}return this._score}},set:function(e){this._score=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadonly",{get:function(){if(this.isReady)return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditing",{get:function(){return this._isEditing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gradeDetail",{get:function(){return this._gradeDetail},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointsPossible",{get:function(){return this.gradeDetail?this._gradeDetail.pointsPossible:100},enumerable:!0,configurable:!0}),t.prototype.insertCellEditor=function(){var e=this;this.editorScope=this.scope.$new(!1,this.scope),this.$compile(t.OVERALL_EDITOR_TEMPLATE)(this.editorScope,(function(t){return e.element.children(".grade-grid-body-cell").append(t)})),this.timeout((function(){e.addInputKeyEventListeners();var t=e.scope.$on(p.b.SCROLL_H,(function(){e.closeEditor(),t(),n(),e.scope.$apply()})),n=e.scope.$on(p.b.SCROLL_V,(function(){e.closeEditor(),n(),t(),e.scope.$apply()}))}),this.scope,200)},t.prototype.removeCellEditor=function(){this.element.find("#bb-grade-grid-overall-editor-reborn").remove()},t.prototype.gotoNextCell=function(){var e=this;this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then((function(){e.scope.$emit(p.b.ENTER_NEXT_CELL)}))},t.prototype.mousedown=function(){e(this.window).trigger("click")},t.prototype.isConfirmDialogExisting=function(){return!!e(".grade-grid-group-confirm-dialog").length},Object.defineProperty(t.prototype,"canBeEdited",{get:function(){return!this.gridData.course.isComplete()&&!o.isUndefined(this.cell)&&this.gradebookPermissionService.canOverrideGrades()},enumerable:!0,configurable:!0}),t.prototype.enterEditor=function(e){this.isConfirmDialogExisting()||!this.canBeEdited||this.isLoading||this._isEditing||(this._isEditing=!0,this.element.find(".overall-display-grade").hide(),this.insertCellEditor(),this.popupMenu(e))},t.prototype.popupMenu=function(t){var n=this,i="grade-grid-notation-menu-reborn-"+this.scope.row.id+"-"+this.scope.col.id;if((this.scope.col.gradeNotations.length||this.gradeDetail&&this.gradeDetail.displayGrade&&this.gradeDetail.displayGrade.isOverride)&&!this.gradeGridRebornController.isMenuExisting(i)){var o=e(t.target).closest(".grade-grid-cell").offset();o.top+=60;var s=this.scope.$new(!1);s.adjustPosition=function(e){var t=o.left+e.width(),i=o.top+e.height(),s=n.gradeGridRebornController.getGradeGridContainerElementRight(),a=n.gradeGridRebornController.getGradeGridContainerElementBottom();t>s&&(o.left-=t-s+Object(h.a)()),i>a&&(o.top-=e.height()+40),e.offset(o)},this.gradeGridRebornController.popupMenu(i,f,s),this.addMenuKeyEventListeners(),t.preventDefault(),t.stopPropagation()}},t.prototype.addInputKeyEventListeners=function(){var e=this;this.element.find("#bb-grade-grid-overall-editor-reborn input").on("keydown",(function(t){var n=e.gradeGridRebornController.getMenuitems();if(g.A(t))n.first().focus();else{if(!g.z(t))return;n.last().focus()}t.preventDefault(),t.stopPropagation()}))},t.prototype.addMenuKeyEventListeners=function(){var t=this;this.timeout((function(){var n=t.gradeGridRebornController.getPopupMenu();n.on("keydown",(function(i){var o=t.gradeGridRebornController.getMenuitems();if(g.A(i))(s=o.index(e(i.target))+1)<o.length?o.eq(s).focus():t.element.find(".grade-grid-cell").trigger("click",!0);else if(g.z(i)){var s;(s=o.index(e(i.target))-1)>=0?o.eq(s).focus():t.element.find(".grade-grid-cell").trigger("click",!0)}else if(g.y(i))t.scope.$emit(p.b.LEAVE_CELL);else{if(i.keyCode!==g.g)return;n.data("destroy")(),t.scope.$emit(p.b.LEAVE_CELL)}i.preventDefault(),i.stopPropagation()}))}),this.scope,0,!1)},t.prototype.onInputBlur=function(e,t){var n=this;if(!this.isLoading&&this._isEditing&&(this.closeEditor(),e)){this.score=t;var i=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],s=this.createGradeSubmission(i,this.gradeService.parseGrade(this.score,i,this.scope));if(this.score){var a=o.find(this.cell.column.gradeNotations,(function(e){return e.code===n.score}));a&&(s.perfCodeId=a.id)}this.saveGrade(s)}},t.prototype.closeEditor=function(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.element.find(".overall-display-grade").show())},t.prototype.isDirty=function(){if(o.isUndefined(this._oldScore)&&!o.isEmpty(this.score))return!0;if(!o.isUndefined(this._oldScore)){var e=this.bbLocalize.parseNumberSync(this._oldScore,this.scope),t=this.bbLocalize.parseNumberSync(this.score,this.scope);return o.isNaN(e)||o.isNaN(t)?this._oldScore!==this.score:e!==t}return!1},t.prototype.createGradeSubmission=function(e,t){var n=this.gradeService.createGradeSubmission(this.cell.column.data,t,e);return n.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),n},t.prototype.saveGrade=function(e){var t=this;if(this.isDirty()){if(o.isUndefined(e)){var n=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId];e=this.createGradeSubmission(n,this.gradeService.parseGrade(this.score,n,this.scope))}this.gradeService.saveGrade(e,this.cell.data&&this.cell.data.grade,void 0,{userId:this.cell.row.metadata.user.id}).then((function(e){return t.cell.column.data.summary.$fetch()})).then((function(){t.gridData.refreshDataCell(t.cell.row,t.cell.column),t.rootScope.$broadcast(p.b.DATA_UPDATE),t.nextDeferred&&(t.nextDeferred.resolve(),t.nextDeferred=void 0)}))}else this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)},t.prototype.undoOverride=function(){this.score="",this.saveGrade()},t.prototype.selectNotation=function(e){this.score=e.code;var t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],n=this.createGradeSubmission(t,this.score);n.perfCodeId=e.id,this.saveGrade(n)},t.prototype.setUpScreenReader=function(e,t){var n=e&&e.row&&e.row.metadata.user,i=n&&n.givenName.concat(n&&n.familyName),o=e&&e.column.data.columnName,s=!this.gridData.course.isComplete();if(t){var a=this.gradeService.getGradeToDisplay(e.data.grade.displayGrade,this.scope,this.gridData.getSchema()[e.column.data.gradingSchemaId].scaleType);this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:s?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:i,assignmentName:o,grade:a||t},noWrap:!0,noEscape:!0})}else this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:s?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:i,assignmentName:o},noWrap:!0,noEscape:!0})},t.OVERALL_EDITOR_TEMPLATE='<div bb-grade-grid-overall-editor-reborn id="bb-grade-grid-overall-editor-reborn" class="editor"></div>',t.$inject=["$rootScope","$window","$q",c.o.serviceName,r.h,s.b,"$compile","scope","element","attrs","gradeGridRebornController",l.b,d.serviceName],t}(),w=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=b,this.scope=!0,this.require="^"+a.a,this.link=function(e,n,i,o){e.gradeGridColumnOverallReborn=t.$injector.instantiate(y,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();i.module(v,[u.a]).directive("bbGradeGridColumnOverallReborn",["$injector",function(e){return e.instantiate(w)}])}).call(this,n("5iHu"))},"9Zs+":function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-calculation"\n         bb-peek-sref="gradebook-item.calculation({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addCalculation">\n        <bb-svg-icon size="small" icon="calculation"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addCalculation</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-item"\n         bb-peek-sref="grade-item.create({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addItem">\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addItem</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation" ng-if="!attendanceColumnExists && attendanceIsAvailable">\n      <a role="menuitem"\n         bb-peek-sref="attendance"\n         analytics-id="components.directives.grade.grid.addAttendance">\n        <bb-svg-icon size="small" icon="attendance" ></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addAttendance</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>'},"9cvu":function(e,t){e.exports='<div bb-load-bundle="components/directives/page-size-selection">\n  <div bb-foundation-defer class="select-wrapper">\n    <button\n      class="js-items-per-page-selector"\n      data-dropdown="{{::$ctrl.componentId}}"\n      bb-click-focus=".item-selected > a"\n      bb-translate-attrs="{\'aria-label\': \'components.directives.pageSizeSelection.itemsPerPage\'}"\n      aria-describedby="{{::$ctrl.componentDescribeId}}"\n      analytics-id="components.directives.pageSizeSelection.itemsPerPage.button"\n    >\n      <div class="select-value">\n        <span id="{{::$ctrl.componentDescribeId}}">\n          {{$ctrl.mySelectedPageSize.name}}\n        </span>\n      </div>\n    </button>\n    <bb-dropdown list-id="{{::$ctrl.componentId}}"\n      list-kind="filter"\n      item-list="$ctrl.availablePageSizes"\n      selected-item="$ctrl.mySelectedPageSize"\n      click-function="$ctrl.changePageSize(item)"\n      analytics-id-tag-prefix="components.directives.pageSizeSelection.itemsPerPage.dropdown">\n    </bb-dropdown>\n  </div>\n  <span bb-translate="components.directives.pageSizeSelection.itemsPerPage"></span>\n</div>'},"9hUw":function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return S}));var i=n("D57K"),o=n("VdDF"),s=n("gm4d"),a=n("6VGE"),r=n.n(a),c=n("wHJ2"),l=n("JfV0"),d=n("nsO7"),u=n("t6LE"),p=n("9OUN"),m=n("aHpC"),h=n("nmzr"),g=n("TnpK"),b=n("fYJU"),f=n("12mu"),v=n("0JpG"),y=n("U50L"),w=n("Fvsw"),C="ultra.components.services.assessment.peerReview",S="peerReview",k=function(){function e(e,t,n,i,o,s,a){this.$rootScope=e,this.$ngRedux=t,this.localizeService=n,this.contextUser=i,this.modal=o,this.ultraState=s,this.context=a,this.reviewableAttemptsOnly=[]}return e.prototype.setContent=function(e,t){var n;void 0===t&&(t=!1);var i=null===(n=this.content)||void 0===n?void 0:n.id;this.content=e,this.peerGrading&&i!==this.content.id&&t&&(this.unsubscribeFromReduxStore&&this.unsubscribeFromReduxStore(),this.subscribeToReduxStore(),this.loadGradebookAttemptsByColumnId({courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,reviewableAttemptsOnly:!0}))},e.prototype.subscribeToReduxStore=function(){var e=this;this.unsubscribeFromReduxStore=this.$ngRedux.connect((function(t){var n=e.content.courseId,i=e.deployedAssessment.gradingColumn.id,o=e.contextUser.userId;return{reviewableAttemptsOnly:Object(d.sortBy)(l.select.gradebookAttempt.getReviewableGradebookAttempts(t,n,i,o),["delegatedGraderOrder"])}}),(function(e){return Object(p.bindActionCreators)({assignNewAttemptForPeerReview:l.actions.gradebookAttempt.assignNewAttemptForPeerReview,loadGradebookAttemptsByColumnId:l.actions.gradebookAttempt.loadGradebookAttemptsByColumnId},e)}))(this)},e.prototype.canPeerViewAttempt=function(e,t){var n;if(!this.peerGrading||e.contentId!==(null===(n=this.content)||void 0===n?void 0:n.id)||null==e.contentId||!t)return!1;var i=this.reviewableAttempts.some((function(e){return e.id===t.id})),o=this.contextUser.userId===t.userId;return!!(i||o)},e.prototype.canDelegatedReconcileAttempt=function(e){return e.delegatedGrading&&e.isUserReconciler(this.contextUser.userId)},e.prototype.canPeerReviewAttempt=function(e,t){return this.canPeerViewAttempt(e,t)&&t.userId!==this.contextUser.userId&&!this.canDelegatedReconcileAttempt(e)},e.prototype.canPeerAddFeedbackToAttempt=function(e,t){return this.canPeerReviewAttempt(e,t)&&!t.isReconciled()&&!u.AttemptStatus.Completed.isEqualTo(t.status)},Object.defineProperty(e.prototype,"completedPeerReviews",{get:function(){var e;return(null===(e=this.reviewableAttempts)||void 0===e?void 0:e.length)?this.reviewableAttempts.filter((function(e){return u.AttemptStatus.Completed.isEqualTo(null==e?void 0:e.status)})).length:0},enumerable:!0,configurable:!0}),e.prototype.openNotEnoughStudentSubmissionsModal=function(){var e=this.$rootScope.$new();e.translateOpts={title:{key:"components.services.peer-review.modal.error-not-enough-submissions.title"}},e.descriptionKey="components.services.peer-review.modal.error-not-enough-submissions.description";var t={scope:e,template:y,resolve:{translations:[v.serviceName,function(e){return e.loadBundle("components/services/peer-review")}]}};this.modal.open(t)},e.prototype.assignNewPeerReview=function(){var e,t;return Object(i.__awaiter)(this,void 0,Promise,(function(){var n,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!s.a.peerAssessmentFeatureFlag)return[2,Promise.resolve(null)];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.assignNewAttemptForPeerReview({courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,userId:this.contextUser.userId})];case 2:return i.sent(),(null===(e=this.reviewableAttempts)||void 0===e?void 0:e.length)>0&&(n=null===(t=this.reviewableAttempts)||void 0===t?void 0:t[this.reviewableAttempts.length-1]),[2,Promise.resolve(n)];case 3:throw(o=i.sent())instanceof l.AssessmentConflictNotEnoughPeerReviews&&this.openNotEnoughStudentSubmissionsModal(),o;case 4:return[2]}}))}))},e.prototype.navigateToPeerReview=function(e){return Object(i.__awaiter)(this,void 0,Promise,(function(){var t,n,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e,s.a.peerAssessmentFeatureFlag?(void 0===e&&(t=this.reviewableAttempts.length<this.numOfPeerReviewsToComplete?this.reviewableAttempts.length:this.reviewableAttempts.length-1),this.reviewableAttempts[t]?(n=this.reviewableAttempts[t],[3,3]):[3,1]):[2,Promise.resolve()];case 1:if(void 0!==e)throw Error("Cannot create a new peer review with a specified index.");return[4,this.assignNewPeerReview()];case 2:n=i.sent(),i.label=3;case 3:return o={courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,userId:this.contextUser.userId,attemptId:null==n?void 0:n.id,gradeId:null==n?void 0:n.gradeId,initialPeerIndex:t},this.ultraState.goPeekState(h.AssessmentRoutes.ASSESSMENT_PEER_GRADING,o),[2]}}))}))},e.prototype.loadReviewableAttempts=function(){this.peerGrading&&this.loadGradebookAttemptsByColumnId&&this.loadGradebookAttemptsByColumnId({courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,reviewableAttemptsOnly:!0})},Object.defineProperty(e.prototype,"reviewableAttempts",{get:function(){return this.reviewableAttemptsOnly},enumerable:!0,configurable:!0}),e.prototype.numberOfLatePeerReviews=function(){var e=this;return s.a.peerAssessmentFeatureFlag?this.reviewableAttempts.filter((function(t){return!o.a.isWithinDateRange(t.attemptLastGradedDate,{end:e.peerReviewDueDate,start:null})})).length:null},e.prototype.getPeerReviewProgess=function(e){return{isPeerGrading:this.peerGrading,completedPeerReviews:e,totalPeerReviews:this.numOfPeerReviewsToComplete}},Object.defineProperty(e.prototype,"deployedAssessment",{get:function(){var e;return(null===(e=this.content)||void 0===e?void 0:e.contentDetail)&&this.content.getDeployedAssessment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peerGrading",{get:function(){var e;return!!s.a.peerAssessmentFeatureFlag&&!!(null===(e=this.deployedAssessment)||void 0===e?void 0:e.gradingColumn.peerGrading)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfPeerReviewsToComplete",{get:function(){var e,t;return this.peerGrading?null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.peerSettings)||void 0===t?void 0:t.peerReviewsPerStudent:null},enumerable:!0,configurable:!0}),e.prototype.parseCurrentStringToDateAndMemoize=function(e){return o.a.parseStringToDate(e)},Object.defineProperty(e.prototype,"peerReviewDueDate",{get:function(){var e,t;return this.peerGrading?this.parseCurrentStringToDateAndMemoize(null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.peerSettings)||void 0===t?void 0:t.peerReviewDueDate):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInPeerReviewWindow",{get:function(){return o.a.isWithinDateRange(this.context.getServerTime(),{end:this.peerReviewDueDate,start:this.deployedAssessment.gradingColumn.dueDate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAfterPeerReviewWindow",{get:function(){return o.a.isWithinDateRange(this.context.getServerTime(),{end:null,start:this.peerReviewDueDate},!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowLatePeerReviews",{get:function(){var e,t;return!!this.peerGrading&&!!(null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.peerSettings)||void 0===t?void 0:t.allowLatePeerReviews)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPeerGradingConfigured",{get:function(){return!!this.peerGrading&&(null!=this.numOfPeerReviewsToComplete&&null!=this.peerReviewDueDate)},enumerable:!0,configurable:!0}),e.prototype.isAfterPeerReviewDueDate=function(e){var t,n=null!==(t=o.a.parseStringToDate(e))&&void 0!==t?t:new Date;return o.a.isWithinDateRange(n,{end:null,start:this.peerReviewDueDate},!1)},Object(i.__decorate)([r.a],e.prototype,"parseCurrentStringToDateAndMemoize",null),e=Object(i.__decorate)([Object(i.__param)(0,Object(m.b)("$rootScope")),Object(i.__param)(1,Object(m.b)("$ngRedux")),Object(i.__param)(2,Object(m.b)(v.serviceName)),Object(i.__param)(3,Object(m.b)(b.b)),Object(i.__param)(4,Object(m.b)(f.b)),Object(i.__param)(5,Object(m.b)(g.d)),Object(i.__param)(6,Object(m.b)(w.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(k);c.module(C,[v.moduleName,b.a,f.a,g.b,w.a]).service(S,k)},"9hp7":function(e,t){e.exports='<div bb-load-bundle="components/directives/add-content-button">\n  <div class="add-element no-select js-add-content-button {{::contextArea + \'-add-button\'}}"\n       ng-class="{\n         \'force-show-add-button\': addContentButton.isForceShowAddButton && addContentButton.isForceShowAddButton(),\n         \'is-active\': addContentButton.isMenuVisible,\n         \'button-visible\': addContentButton.isButtonVisible,\n         hide: hideDividerLines() && !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)\n       }"\n       ng-keydown="addContentButton.onKeydown($event)">\n    <template></template>\n  </div>\n  <div id="{{::fileListViewId}}">\n    <bb-progress display-results="false" primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId" target-div="{{::\'#\' + fileListViewId}}"></bb-progress>\n  </div>\n</div>'},A51O:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-arrow-right",use:"icon-small-arrow-right-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-right"><path d="M5 1l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},AVdi:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));n("dY8P"),n("5uNO"),n("w0/N"),n("6BRP"),n("zexu");var i=n("nsO7"),o=n("wHJ2"),s=n("0JpG"),a=n("BJLZ"),r=n("Sa5G"),c=n("XGja"),l=n("yMoE"),d=n("o5Lu"),u=n("dd1C"),p=n("+4Px"),m=n("pjml"),h=n("lEL+"),g=n("t3AZ"),b=n("TnpK"),f=n("m2KQ"),v=n("ho2F"),y="ultra.components.directives.grade.gradeInput",w=function(){function t(n,i,o,s,a,r,c,d,u,m,h,g,b,f,v){var y=this;this.$compile=n,this.$q=i,this.$injector=o,this.scope=s,this.element=a,this.attrs=r,this.form=c,this.bbLocalize=d,this.grade=u,this.AttemptModel=m,this.GradeModel=h,this.GroupAttemptModel=g,this.CourseModel=b,this.timeout=f,this.ultraState=v,this.alertScreenReaderNewGrade=!1,this.gradeDisplayItem=this.$injector.instantiate(l.a,{gradeDetail:this.scope.gradeDetail,scope:this.scope}),this.id=this.attrs.id,this.isSaving=!1,this.wrapperDiv=this.element.find("."+t.WRAPPER_CLASS),this.inputElement=this.wrapperDiv.find("input"),this.isWrapperDivClickHandled=!1,this.gradeNotationsWrapperSelector=this.scope.gradeNotationsWrapperSelector||"body",this.inputElementBluredByTab=!1,this.isProcessingFocusEvent=!1,this.wrapperDiv.on("click",(function(){y.isRubricEvalMode()||(y.isWrapperDivClickHandled=!0,y.scope.onClick&&!y.isReadOnly()&&y.scope.onClick(),y.wrapperDiv.addClass(t.WRAPPER_FOCUS_CLASS),y.inputElement.is(":focus")||(y.inputElement.focus(),y.inputElement.select()))})),this.inputElement.on("click",(function(t){e("#performanceCodes-"+y.id).hasClass("f-open-dropdown")&&(t.preventDefault(),t.stopPropagation())})),this.inputElement.on("focus",(function(n){if(!y.isProcessingFocusEvent){y.isProcessingFocusEvent=!0;try{n.preventDefault(),n.stopPropagation(),y.wrapperDiv.addClass(t.WRAPPER_FOCUS_CLASS),y.inputElement.select(),y.scope.$emit("grade-input-in-focus",y.id);var i=e("#performanceCodes-"+y.id);y.scope.offsetTop&&y.scope.offsetTop()||i.addClass("show"),y.isWrapperDivClickHandled||y.timeout((function(){i&&!i.hasClass("f-open-dropdown")&&(y.inputElement.trigger("click.fndtn.dropdown"),y.scope.offsetTop&&y.repositionGradeNotationDropdown(i))}),y.scope,0,!1)}finally{y.isProcessingFocusEvent=!1}}})),this.inputElement.on("keydown",(function(t){var n=e("#performanceCodes-"+y.id);if(n&&n.hasClass("f-open-dropdown")&&t.keyCode===p.u&&!t.shiftKey){y.inputElementBluredByTab=!0;var i=n.find(":tabbable");i&&(i.first().focus(),t.preventDefault(),t.stopPropagation())}else(t.keyCode===p.f||t.keyCode===p.m||t.keyCode===p.u&&!t.shiftKey)&&(t.preventDefault(),y.inputElement.is(":focus")&&y.inputElement.trigger("click.fndtn.dropdown"),y.$q.when(y.validateAndSave()).finally((function(){y.setFocusOnNextTabbableElement()})))})),this.element.foundation(),this.scope.$watch("::column",(function(e){e&&(y.courseId=e.courseId,y.gradeDisplayItem.init(e).then((function(){y.attrs.gradeDetail&&y.scope.$watchGroup(["gradeDetail.id","gradeDetail.displayGrade","gradeDetail.ui.attempt.displayGrade","isGroupGradeInProgress()","isGroupGradeMultiple()","column.gradingSchemaId","column.possible"],(function(e){y.isSaving||y.refreshInputBox()}))})),e.externalGrade?y.errorMessageKey="components.directives.grade.grade-input.errorMessage.overallGrade":y.errorMessageKey="components.directives.grade.grade-input.errorMessage.default")}))}return t.prototype.isFormDirty=function(){return this.form[this.id].$dirty},t.prototype.isFormValid=function(){return this.form[this.id].$valid},t.prototype.repositionGradeNotationDropdown=function(e){var t=this.inputElement.closest(this.gradeNotationsWrapperSelector).height(),n=e.position()&&e.position().top,i=n+e.height();if(this.scope.offsetTop&&this.scope.offsetTop()){var o=n+2*this.scope.offsetTop();e.css("top",o),e.addClass("show"),i=o+e.height()}i>t&&this.scope.$root.$broadcast("performance-dropdown-container-height-update",i-t+30)},t.prototype.showGradeNotationDropdown=function(){var t=this;e("#performanceCodes-"+this.id).length>0&&e("#performanceCodes-"+this.id).remove();var n=this.$compile(v)(this.scope);this.inputElement.closest(this.gradeNotationsWrapperSelector).append(n),this.scope.offsetTop&&this.isWrapperDivClickHandled&&this.repositionGradeNotationDropdown(n),n.on("keydown",(function(i){if(i.keyCode!==p.u||i.shiftKey)i.keyCode===p.g&&(i.preventDefault(),i.stopPropagation(),t.inputElement.trigger("click.fndtn.dropdown"),t.timeout((function(){e("#performanceCodes-"+t.id).remove()}),t.scope,0,!1),t.$q.when(t.validateAndSave()).finally((function(){t.setFocusOnNextTabbableElement()})));else{var o=n.find(":tabbable");o.last().is(":focus")&&(i.preventDefault(),o.eq(0).focus())}})),this.element.foundation()},t.prototype.refreshInputBox=function(){var e=this.scope.gradeDetail&&this.scope.gradeDetail.id,t=this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade,n=this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress(),i=this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple(),o=this.scope.column.gradingSchemaId;this.gradeDisplayItem.schema.id!==o&&this.gradeDisplayItem.init(this.scope.column),e&&t?(this.gradeDisplayItem.displayGrade=t,this.updateGradeColor()):n?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):i?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):t?(this.gradeDisplayItem.displayGrade=t,this.updateGradeColor()):(this.gradeDisplayItem.displayGrade=null,this.updateGradeColor())},t.prototype.shouldShowTotalPoints=function(){return(this.gradeDisplayItem.shouldShowTotalPoints()||this.hasFocus()||this.form[this.id]&&this.isFormDirty())&&(!this.isMultipleShown()&&!this.isInProgressShown()||(this.isMultipleShown()||this.isInProgressShown())&&this.hasFocus())&&!this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue)},t.prototype.isReadOnly=function(){return this.scope.readOnly&&this.scope.readOnly()},t.prototype.hasFocus=function(){return this.inputElement.is(":focus")||this.wrapperDiv.hasClass(t.WRAPPER_FOCUS_CLASS)},t.prototype.validateAndSave=function(){var e=this;if(this.wrapperDiv.removeClass(t.WRAPPER_FOCUS_CLASS),this.scope.$emit("grade-input-blur",this.id),this.shouldShowPastDueZeroIndicator()&&""===this.form[this.id].$viewValue&&(this.gradeDisplayItem.displayValue="0",this.form[this.id].$setPristine()),this.isFormValid())if(this.isFormDirty()){if(this.scope.forGroup&&this.isReservedWord(this.form[this.id].$viewValue))this.wrapperDiv.removeClass(this.inputColorClass);else if(!this.isSaving){var n=this._save();return this.scope.$emit("grade-input-save-promise",n),n.then((function(t){e.form[e.id]&&e.form[e.id].$setPristine(),e.alertScreenReaderNewGrade=!0,e.scope.$emit("bb-grade-input-save",t,e.scope.column.id,e.scope.forUser&&e.scope.forUser.id),e.refreshInputBox()})).finally((function(){e.isSaving=!1})),n}}else this.refreshInputBox()},t.prototype._validate=function(){var e=this,t=this.grade.createGradeSubmission(this.scope.column,this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema);t.clearGrade=this.isGradeErased();var n=this.grade.validateGrade(t,this.scope);return this.$q.when(n).then((function(t){e.form[e.id].$setValidity("invalidGrade",t)}))},t.prototype.getPerfCodeFromDisplayValue=function(e){var t=null;if(e){var n=this.scope.gradeNotations?this.scope.gradeNotations():[];if(n.length>0){var o=i.find(n,(function(t){return t.code===e}));o&&(t=o.id)}}return t},t.prototype._save=function(){var e=this,t=this.$q.when();this.isSaving=!0,this.perfCodeId=this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue);var n=this.perfCodeId?this.gradeDisplayItem.displayValue:this.grade.parseGrade(this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema,this.scope),o=this.grade.createGradeSubmission(this.scope.column,n,this.gradeDisplayItem.schema);if(this.perfCodeId&&(o.perfCodeId=this.perfCodeId),this.scope.column&&this.scope.column.externalGrade&&this.scope.gradeDetail){var s=this.scope.gradeDetail.pointsPossible||this.scope.column.possible,a=o.gradeValue;if(s&&s>0&&a&&a.isNumeric){var c=parseFloat(a.grade);a.grade=String(100*c/s)}}return o.clearGrade=this.isGradeErased(),this.isGradeErased()&&(this.scope.column.isAssignment()||this.scope.column.isDiscussion())&&(this.scope.forGroup?this.scope.forGroup&&!this.scope.gradeDetail.ui.groupAttempt&&(t=this.scope.column.getContentGroupIdToGroupAttempt({expand:"attempts,toolAttemptDetail,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor"}).then((function(t){i.values(t.lookup).forEach((function(t){t[0].groupId===e.scope.forGroup.id&&(e.scope.gradeDetail.ui.groupAttempt=t[0])}))}))):t=this.$q.when()),t.then((function(){var t=e.scope.override&&e.scope.override()&&!(e.isGradeErased()&&(e.scope.column.isAssignment()||e.scope.column.isDiscussion()))?null:e.scope.gradeDetail&&(e.scope.gradeDetail.ui.groupAttempt||e.scope.gradeDetail.ui.attempt),n=!(!e.scope.gradeDetail||!e.scope.gradeDetail.isPosted()),i=e.isGradeErased(),s=e.scope.gradeDetail;return e.scope.column.externalGrade&&s&&(s=e.grade.percentageToGradeDetail(s,e.scope.column.possible)),e.grade.saveGrade(o,s,t,{userId:e.scope.forUser&&e.scope.forUser.id,group:e.scope.forGroup}).then((function(t){if(e.scope.column.externalGrade&&t.displayGrade&&t.displayGrade.isOverride&&(t.pointsPossible=100),t instanceof e.AttemptModel)e.scope.gradeDetail.displayGrade=t.displayGrade,i&&(e.scope.gradeDetail.manualStatus=r.r.NoOverride),e.scope.gradeDetail.ui.attempt=t;else if(t instanceof e.GroupAttemptModel)e.gradeDisplayItem.displayGrade=t.displayGrade,e.scope.gradeDetail.displayGrade=t.displayGrade;else if(t instanceof e.GradeModel){var o=e.scope.gradeDetail?e.scope.gradeDetail.permissions:null;e.scope.gradeDetail=t,o&&(e.scope.gradeDetail.permissions=o),e.scope.column.externalGrade&&t.displayGrade&&!t.displayGrade.isOverride&&(e.scope.gradeDetail=e.grade.gradeDetailToPercentage(e.scope.gradeDetail)),e.scope.column.externalGrade&&(e.gradeDisplayItem.gradeDetail=e.scope.gradeDetail)}else t[0]instanceof e.GradeModel&&(e.scope.gradeDetail.displayGrade=t[0].displayGrade);return(e.scope.column.isAssignment()||e.scope.column.isDiscussion())&&!i&&n&&(t.isPosted&&!t.isPosted()||t.isCompleted&&!t.isCompleted()||t[0]&&t[0].isReadyToPost&&t[0].isReadyToPost())?e._postGrade(t):t}))}))},t.prototype._postGrade=function(e){var t=this;return this.scope.forGroup?this.scope.column.postReadyGroupAttempts({groupAssociationId:this.scope.gradeDetail.ui.groupAttempt.groupAssociationId}).then((function(n){return t.scope.gradeDetail.manualStatus=r.r.IsPosted,e instanceof Array&&e.forEach((function(e){e.manualStatus=r.r.IsPosted})),e})):this.scope.gradeDetail.postReadyGrades().then((function(n){return t.scope.gradeDetail.manualStatus=r.r.IsPosted,e.status=m.C.AttemptStatus.Completed,e}))},t.prototype.isMultipleShown=function(){return this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()},t.prototype.isInProgressShown=function(){return this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()},t.prototype.gradeValueOnChange=function(){var e=this;this.$q.when(this._validate()).then((function(){e.scope.hasGradeAndIsValid=e.form[e.id].$valid&&!!e.gradeDisplayItem.displayValue}))},t.prototype.onFocus=function(){this.canOverrideByGradeNotation()&&this.showGradeNotationDropdown(),this.isFormValid()&&!this.isFormDirty()&&(this.gradeDisplayItem.displayValue=this.gradeDisplayItem.parsedValue)},t.prototype.shouldShowOverrideIndicator=function(){return!(null==this.scope.enableOverrideIndicator||!this.scope.enableOverrideIndicator||!this.scope.gradeDetail)&&(!this.shouldShowPastDueZeroIndicator()&&this.grade.isRubricGradeOverridden(this.scope.gradeDetail,this.scope.gradeDetail.ui.attempt,this.scope.column,this.scope.forGroup))},t.prototype.shouldShowPastDueZeroIndicator=function(){return this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.scoredByAutomaticZero},t.prototype.isRubricAssociated=function(){return this.scope.column.hasRubricAssociation()},t.prototype.isRubricEvalMode=function(){return!!this.scope.enableRubricEvalAction&&this.scope.enableRubricEvalAction()&&this.isRubricAssociated()},t.prototype.openRubricEvaluation=function(){var e,t,n,i=this;!this.isRubricAssociated()||this.scope.disableRubricEvalClick&&this.scope.disableRubricEvalClick()||(n=(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.groupAssociationId)?(null===(t=this.scope.forUser)||void 0===t?void 0:t.id)||null:this.scope.gradeDetail.user&&(this.scope.gradeDetail.user.$pk||this.scope.gradeDetail.user.id)||null,this.timeout((function(){i.ultraState.goPeekState("rubric-evaluation",{userId:n,groupId:i.scope.forGroup?i.scope.forGroup.id:null,columnId:i.scope.column.id})}),this.scope,0,!1))},t.prototype.updateGradeColor=function(){this.wrapperDiv.removeClass(this.inputColorClass),!this.gradeDisplayItem.displayValue||this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()||this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()||(this.inputColorClass=this.gradeDisplayItem.getGradeColor(),this.wrapperDiv.addClass(this.inputColorClass))},t.prototype.isGradeErased=function(){return this.isFormDirty()&&this.gradeDisplayItem.wasValueErased},t.prototype.setFocusOnNextTabbableElement=function(){var e=this;this.timeout((function(){c.b(null,e.inputElement)}),this.scope,0,!1)},t.prototype.isReservedWord=function(e){var t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}).toLocaleLowerCase(),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}).toLocaleLowerCase(),i=e.toLocaleLowerCase();return i===t||i===n},t.prototype.getGradeInputAriaLabelKey=function(){if(this.scope.forUser||this.scope.forGroup){var e="components.directives.grade.grade-input.aria.",t=this.shouldShowOverrideIndicator()?"overrideScoreInput":"scoreInput";return this.shouldShowPastDueZeroIndicator()&&(t="pastDueZeroScoreInput"),e+=t,this.scope.forGroup&&(e+="Group"),e+=this.gradeDisplayItem.displayValue?"Graded":"Empty"}},t.prototype.canOverrideByGradeNotation=function(){var e=this.scope.gradeNotations?this.scope.gradeNotations():[];return this.scope.canOverrideByGradeNotation&&this.scope.canOverrideByGradeNotation()&&(e&&e.length>0||this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.isOverride)},t.prototype.getAriaDescribeById=function(){return"invalidGradeAriaDescribeById_"+this.scope.forUser.id},t.prototype.clickGradeNotation=function(e,t){t.stopPropagation(),this.gradeDisplayItem.displayValue=e.code,this.perfCodeId=e.id,this.afterClickDropdownListItem()},t.prototype.undoOverride=function(){this.gradeDisplayItem.displayValue="",this.perfCodeId=null,this.afterClickDropdownListItem()},t.prototype.afterClickDropdownListItem=function(){var t=this;this.form[this.id].$setDirty(!0),this.form[this.id].$setValidity("invalidGrade",!0),this.timeout((function(){e("#performanceCodes-"+t.id).remove()}),this.scope,0,!1),this.$q.when(this.validateAndSave()).finally((function(){t.setFocusOnNextTabbableElement()}))},t.prototype.onBlur=function(t){var n=this;this.isWrapperDivClickHandled=!1;var o=[];t&&t.relatedTarget&&t.relatedTarget.classList&&(o=t.relatedTarget.classList),this.inputElementBluredByTab||i.includes(o,"performance-code-potion")||(this.timeout((function(){n.inputElementBluredByTab=!1,e("#performanceCodes-"+n.id).remove()}),this.scope,0,!1),this.validateAndSave())},t.WRAPPER_CLASS="wrapping-input-style",t.WRAPPER_FOCUS_CLASS="wrapping-input-style-focus",t.$inject=["$compile","$q","$injector","scope","element","attrs","form",s.serviceName,d.h,m.C.serviceName,m.G.serviceName,m.H.serviceName,m.o.serviceName,h.b,b.d],t}(),C=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.restrict="E",this.template=f,this.require="^form",this.scope={column:"=",enableRubricEvalAction:"&?",disableRubricEvalClick:"&?",forUser:"=?",forGroup:"=?",gradeDetail:"=",hasGradeAndIsValid:"=?",isGroupGradeMultiple:"&?",isGroupGradeInProgress:"&?",notAllowEmptyString:"&?",onClick:"&",onBlur:"&",override:"&?",readOnly:"&?",enableOverrideIndicator:"=?",canOverrideByGradeNotation:"&?",gradeNotations:"&?",gradeNotationsWrapperSelector:"@?",offsetTop:"&?"},this.link=function(e,t,i,o){if(!i.id&&!i.column)throw new Error("Id and Column are required.");if(!i.gradeDetail)throw new Error("A grade object must be provided");if(i.gradeDetail&&!i.forUser&&!i.forGroup)throw new Error("forUser or forGroup is required.");e.gradeInput=n.$injector.instantiate(w,{scope:e,element:t,attrs:i,form:o})}}return e.$inject=["$injector"],e}();o.module(y,["puElasticInput",a.a,u.a,g.a,b.b]).directive("bbGradeInput",["$injector",function(e){return e.instantiate(C)}])}).call(this,n("5iHu"))},"Aw+3":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-feedback",use:"icon-small-feedback-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-feedback"><path d="M1 1h14v12h-4l-3 2-3-2H1V1zM4 4h8M4 7h8M4 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},B8C9:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-medium-menu",use:"icon-medium-menu-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-menu"><path d="M4.5 12c0 .8284-.6716 1.5-1.5 1.5s-1.5-.6716-1.5-1.5.6716-1.5 1.5-1.5 1.5.6716 1.5 1.5zM13.5 12c0 .8284-.6716 1.5-1.5 1.5s-1.5-.6716-1.5-1.5.6716-1.5 1.5-1.5 1.5.6716 1.5 1.5zM22.5 12c0 .8284-.6716 1.5-1.5 1.5s-1.5-.6716-1.5-1.5.6716-1.5 1.5-1.5 1.5.6716 1.5 1.5z" stroke-width="3" stroke-miterlimit="10" /></symbol>'});o.add(s);e.exports=s},BJLZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("5iHu"),o=n("wHJ2"),s=n("e6jQ"),a=n("lEL+"),r="ultra.directives.accessibility.alert",c=function(){function e(e,t){var n=this;this.$injector=e,this.timeout=t,this.restrict="A",this.link=function(e,t,o){n.alertContainerId=o.alertId?o.alertId:s.a(),e.$on("$destroy",(function(){i("#"+n.alertContainerId).remove()})),e.$watch((function(){return t.html()}),(function(t){n.alertArea.html("");var i=Number(o.bbAxAlert)||0;null!=t&&""!==t&&(0===i?n.trigger(t):n.timeout(n.trigger.bind(n,t),e,i,!1))}))},this.trigger=function(e){n.alertArea.append(i('<div id="'+n.alertContainerId+'"></div>').append(e))},this.alertArea=i("body > .ax-alert-area"),0===this.alertArea.length&&(i("body").append('<div class="ax-alert-area" role="alert" aria-atomic="false" aria-live="assertive"></div>'),this.alertArea=i("body > .ax-alert-area"))}return e.$inject=["$injector",a.b],e}();o.module(r,[a.a]).directive("bbAxAlert",["$injector",function(e){return e.instantiate(c)}])},BLb8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return a}));var i=function(e,t){t?e.$broadcast("refresh-items",t):e.$broadcast("refresh-items")},o=function(e,t){e.$on("refresh-items",t)},s=function(e,t){e.$on("close-scorm-launch-frame",t)},a=function(e,t){e.content.$fetch().$asPromise().then((function(n){n===e.content?i(e,t):e.content=n}))}},BMpZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),o=n("aHpC"),s=n("yC9S"),a=(n("DlnX"),n("IgL1")),r="ultra.components.directives.buttonComplexTooltip";!function(){function e(e,t){this.$scope=e,this.$rootScope=t}e.prototype.$onInit=function(){this.$scope.buttonComplexTooltip=this},e.prototype.getToolTipTemplate=function(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'},e=Object(i.__decorate)([Object(s.a)({moduleName:r,componentName:"bbButtonComplexTooltip",template:a}),Object(i.__param)(0,Object(o.b)("$scope")),Object(i.__param)(1,Object(o.b)("$rootScope"))],e)}()},BXQP:function(e,t){e.exports='<div class="timestamp" bb-load-bundle="components/directives/duration" ng-cloak bb-cache-compilation="duration-directive">\n  <div ng-if="!duration.needAgo()">\n    <div class="js-split-datetime" ng-if="duration.separateDatetime()">\n      <span class="date" ng-bind="duration.date"></span>\n      <span class="time" ng-bind="duration.time"></span>\n    </div>\n    <bb-datetime ng-if="!duration.separateDatetime()" ng-class="{\'date\':duration.date}" value="date" format="Short"></bb-datetime>\n  </div>\n  <div ng-if="duration.needAgo()"\n       class="js-duration-ago"\n       bb-translate="components.directives.duration.agoText"\n       translate-values="{durationDate: duration.date, durationTime: duration.time}"></div>\n</div>'},BiyI:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-add-plus",use:"icon-small-add-plus-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add-plus"><path d="M8 5v6M11 8H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},C2vp:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"k",(function(){return b})),n.d(t,"j",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"i",(function(){return w})),n.d(t,"a",(function(){return C})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return k})),n.d(t,"d",(function(){return I})),n.d(t,"b",(function(){return D}));var i,o=n("D57K"),s=n("X/qj"),a=n("FBBZ"),r=n("pjml"),c=n("nsO7"),l=n("TnpK"),d=n("yMoE"),u=n("A0nf"),p=n("8jzW"),m=n("vhkR"),h=n("nmzr");!function(e){e[e.UNLOADED=0]="UNLOADED",e[e.WAITING=1]="WAITING",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED"}(i||(i={}));var g=function(){function e(e,t,n,o,s,a,r,c,l,d,u,p){void 0===u&&(u=null),void 0===p&&(p=i.UNLOADED),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=o,this.scoreProviderHelper=s,this.ultraState=a,this.gradebookPermissionService=r,this.gridData=c,this.row=l,this.column=d,this.data=u,this.loadState=p}return Object.defineProperty(e.prototype,"isUnloaded",{get:function(){return this.loadState===i.UNLOADED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWaiting",{get:function(){return this.loadState===i.WAITING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this.loadState===i.LOADING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this.loadState===i.LOADED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPosted",{get:function(){return!c.isNull(this.data)&&this.data.grade.isPosted()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNewSubmission",{get:function(){return!c.isNull(this.data)&&this.data.needsGradingAttemptCount>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPastDueZero",{get:function(){return!c.isNull(this.data)&&this.data.grade.isPastDueZero()},enumerable:!0,configurable:!0}),e.prototype.setLoadState=function(e){this.loadState=e},e.prototype.getScore=function(e){var t=this.getGrade();if(null!=t){var n=t.displayGrade,i=this.column.data,o=this.getGridData().getSchema()[i.gradingSchemaId],s=this.$injector.instantiate(d.a,{scope:e,gradeDetail:t});return s.init(i,o),s.displayGrade=n,s.parsedValue}},e.prototype.getGrade=function(){return c.isNull(this.data)?void 0:this.data.grade},e.prototype.view=function(){throw new Error("Unsupported operation exception")},e.prototype.post=function(){return this.data&&this.column.data.grades.$new(this.data.grade.id).postReadyGrades()},Object.defineProperty(e.prototype,"canBeView",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadyToPost",{get:function(){return!this.isPosted},enumerable:!0,configurable:!0}),e.prototype.canPost=function(){return this.gradebookPermissionService.canPostGrades(null,this.column.data)},e.prototype.getGridData=function(){return this.gridData},Object.defineProperty(e.prototype,"isCleanAttemptGrade",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedAutoPost",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canBeEdited",{get:function(){return this.column.data.delegatedGrading?this.canPost():!this.isAnonymousGrading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnonymousGrading",{get:function(){return this.column.data.anonymousGrading},enumerable:!0,configurable:!0}),e}(),b=function(e){function t(t,n,o,s,a,r,c,l,d,u){return e.call(this,t,n,o,s,a,r,c,l,d,u,null,i.LOADED)||this}return Object(o.__extends)(t,e),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(g),f=function(e){function t(t,n,i,o,s,a,r,c,l,d){return e.call(this,t,n,i,o,s,a,r,c,l,d)||this}return Object(o.__extends)(t,e),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(g),v=function(e){function t(t,n,i,o,s,a,r,c,l,d){return e.call(this,t,n,i,o,s,a,r,c,l,d)||this}return Object(o.__extends)(t,e),t.prototype.canPost=function(){return!1},Object.defineProperty(t.prototype,"canBeEdited",{get:function(){return!1},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(g),y=function(e){function t(t,n,i,o,s,a,r,c,l,d){return e.call(this,t,n,i,o,s,a,r,c,l,d)||this}return Object(o.__extends)(t,e),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(g),w=function(e){function t(t,n,i,o,s,a,r,c,l,d){return e.call(this,t,n,i,o,s,a,r,c,l,d)||this}return Object(o.__extends)(t,e),Object.defineProperty(t.prototype,"canBeView",{get:function(){return this.gradebookPermissionService.canViewGrades()},enumerable:!0,configurable:!0}),t.prototype.view=function(){this.ultraState.goPeekState(h.GradeRoutes.GRADE_AND_FEEDBACK,{columnId:this.column.id,userId:this.row.metadata.user.id})},t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(y),C=function(e){function t(t,n,i,o,s,a,r,c,l,d){return e.call(this,t,n,i,o,s,a,r,c,l,d)||this}return Object(o.__extends)(t,e),t.prototype.getGroupId=function(){},Object.defineProperty(t.prototype,"canBeView",{get:function(){return this.gradebookPermissionService.canViewAttempts()&&!!this.data&&this.data.attemptCount>0},enumerable:!0,configurable:!0}),t.prototype.view=function(){var e=this;if(null!=this.column.data.linkId&&(u.a.PartnerCloud.isEqualTo(this.column.data.scoreProviderHandle)||u.a.LTILink.isEqualTo(this.column.data.scoreProviderHandle)))this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.column.id).grades.$new(this.data.grade.id).attempts.$fetch().$then((function(t){var n=a.d({gradableItemId:e.column.id,courseId:e.gridData.course.id,attemptId:t[0].id,membershipId:e.row.metadata.id,linkId:e.column.data.linkId});e.ltiService.launch(n)}));else{var t={courseId:this.gridData.course.id,columnId:this.column.id,gradeId:this.data.grade.id,contentId:this.column.data.contentId,userId:this.row.metadata.user.id};if(this.column.data.isAttemptBased&&this.column.data.isMultipleAttempts())this.ultraState.goPeekState(h.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT,t);else{if(this.data.grade.lastAttemptId)t.attemptId=this.data.grade.lastAttemptId;else if(this.data.grade.attempts&&this.data.grade.attempts.length){var n=c.last(this.data.grade.attempts);t.attemptId=n&&n.id}else if(this.data.grade.groupAttempts&&this.data.grade.groupAttempts.length){n=c.last(this.data.grade.groupAttempts);t.attemptId=n&&n.id}t.groupId=this.getGroupId(),this.scoreProviderHelper.gradingStateRef(this.column.data,this.data.grade,t,p.a.GoToState)}}},t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(y),S=function(e){function t(t,n,i,o,s,a,r,c,l,d,u){var p=e.call(this,t,n,i,o,s,a,r,c,l,d)||this;return p._group=u,p}return Object(o.__extends)(t,e),t.prototype.getGroupId=function(){return this.group.groupId},Object.defineProperty(t.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column","group"],t}(C),k=function(e){function t(t,n,i,o,s,a,r,c,l,d,u){return e.call(this,t,n,i,o,s,a,r,c,l,d,u)||this}return Object(o.__extends)(t,e),Object.defineProperty(t.prototype,"canBeView",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.view=function(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id,disGroupId:this.getGroupId()})},Object.defineProperty(t.prototype,"isCleanAttemptGrade",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNeedAutoPost",{get:function(){return!0},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column","group"],t}(S),I=function(e){function t(t,n,i,o,s,a,r,c,l,d){return e.call(this,t,n,i,o,s,a,r,c,l,d)||this}return Object(o.__extends)(t,e),Object.defineProperty(t.prototype,"canBeView",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.view=function(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id})},Object.defineProperty(t.prototype,"isCleanAttemptGrade",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNeedAutoPost",{get:function(){return!0},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(C),D=function(e){function t(t,n,i,o,s,a,r,c,l,d){return e.call(this,t,n,i,o,s,a,r,c,l,d)||this}return Object(o.__extends)(t,e),Object.defineProperty(t.prototype,"isAttendance",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canBeView",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.view=function(){var e=this.row.metadata.user.id,t=this.row.metadata.id;this.ultraState.goPeekState("attendance-student-records",{userId:e,membershipId:t})},t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,s.b,"gridData","row","column"],t}(y)},C36k:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("VPci"),n("67oV");var i=n("wHJ2"),o=n("+4Px"),s=n("e6jQ"),a=n("GbAM"),r=n("lEL+"),c=n("0JpG"),l=n("GwhK"),d="ultra.components.directives.typeahead-search-box",u=function(){function e(e,t,n,i,o){var a=this;this.scope=e,this.$rootScope=t,this.element=n,this.timeout=i,this.bbLocalize=o,this.showResults=!1,this.searchValue="",this.isFocus=!1,this.srLabel=e.srLabel,this.inputPlaceholder=e.inputPlaceholder||"",this.srEmptyResults=e.srEmptyResults||"",this.srResultsFound=e.srResultsFound,this.srNoResultsFound=e.srNoResultsFound,this.clearAriaLabel=e.clearAriaLabel,this.icon=e.icon,this.randomElementId=this.scope.randomElementId||s.a(),this.srResultsFound&&this.srNoResultsFound&&this.clearAriaLabel||this.bbLocalize.loadBundle("components/directives/typeahead").then((function(){a.srResultsFound="typeahead.resultsFound",a.srNoResultsFound="typeahead.noResultsFound",a.clearAriaLabel="typeahead.clear"})),e.$on("typeahead-search-box-clear",(function(){e.typeaheadSearchBox.showResults=!1,e.typeaheadSearchBox.searchResults=[],e.typeaheadSearchBox.searchValue=""}))}return e.prototype.onSearchValueChange=function(){this.searchValue.length>0?this.typeAheadSearch(this.searchValue):this.clear()},e.prototype.itemSelected=function(e){var t=this.scope.itemSelected({item:e});this.showResults=!1,this.searchResults=[],i.isString(t)?this.searchValue=t:this.searchValue="",this.element.find("input").focus()},e.prototype.search=function(e){if(this.searchValue.length>0){var t=this.scope.search({searchText:e});t&&(this.showResults=!1,this.searchResults=[],i.isString(t)?this.searchValue=t:this.searchValue="")}},e.prototype.typeAheadSearch=function(e){var t=this;this.scope.typeAheadSearch({searchText:e}).then((function(e){t.searchResults=e,t.showResults=e.length>0,t.getSearchResultsAlert(t.showResults)}))},e.prototype.getSearchResultsAlert=function(e){var t=this,n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:e?this.srResultsFound:this.srNoResultsFound,noWrap:!0,noEscape:!0});this.timeout((function(){t.$rootScope.$broadcast(a.b,n)}),this.scope,1e3)},e.prototype.handleUpAndDownArrow=function(e){this.showResults||(this.showResults=!0);var t=i.element(e.target);t.hasClass("typeahead-search-entry")?(t=e.keyCode===o.d?t.next():t.prev()).focus():this.element.find(".typeahead-search-entry:first").focus(),e.preventDefault()},e.prototype.onInputBoxKeyDown=function(e){e.keyCode===o.f?this.search(this.searchValue):e.keyCode===o.d||e.keyCode===o.v?this.handleUpAndDownArrow(e):e.keyCode===o.g&&this.showResults&&(this.showResults=!1,e.stopPropagation(),e.preventDefault())},e.prototype.onFocusInputBox=function(e){this.searchResults&&this.searchResults.length>0&&(this.showResults=!0)},e.prototype.onFocusClearBtn=function(e){this.isFocus=!0},e.prototype.onBlurClearBtn=function(e){document.activeElement!==e.currentTarget&&(this.showResults=!1,this.isFocus=!1)},e.prototype.onClickOutside=function(){this.showResults=!1},e.prototype.onInputBoxClick=function(){this.showResults=!0},e.prototype.onResultEntryKeyDown=function(e,t){e.keyCode===o.f||e.keyCode===o.t?this.itemSelected(t):e.keyCode===o.d||e.keyCode===o.v?this.handleUpAndDownArrow(e):e.keyCode===o.u?this.showResults=!1:e.keyCode===o.g&&(this.showResults=!1,this.element.find("input").focus(),e.stopPropagation(),e.preventDefault())},e.prototype.onResultEntryClick=function(e,t){this.itemSelected(t)},e.prototype.clear=function(){var e=this,t=this.searchValue;this.showResults=!1,this.searchResults=[],this.searchValue="",this.timeout((function(){(e.scope.clearSearch||i.noop)({searchText:t})}),this.scope,50)},e.$inject=["scope","$rootScope","element",r.b,c.serviceName],e}(),p=function(){function e(e,t){var n=this;this.$interpolate=e,this.$injector=t,this.restrict="E",this.template=l,this.scope={itemSelected:"&",search:"&",typeAheadSearch:"&",inputPlaceholder:"@?",clearSearch:"&",srEmptyResults:"@",srLabel:"@",srResultsFound:"@?",srNoResultsFound:"@?",clearAriaLabel:"@?",icon:"@?",randomElementId:"@?"},this.transclude=!0,this.replace=!0,this.link=function(e,t){e.typeaheadSearchBox=n.$injector.instantiate(u,{scope:e,element:t})}}return e.$inject=["$interpolate","$injector"],e}();i.module(d,[]).directive("bbTypeaheadSearchBox",["$injector",function(e){return e.instantiate(p)}]).directive("typeaheadInject",(function(){return{link:function(e,t,n,i,o){if(o){var s=e.$new();o(s,(function(e){t.empty(),t.append(e),t.on("$destroy",(function(){s.$destroy()}))}))}}}}))},CCbZ:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Q}));var i,o=n("D57K"),s=(n("yOHj"),n("Gg10"),n("uj+y"),n("Lrq8"),n("jagb"),n("xoIb"),n("B8C9"),n("fUKT"),n("01PJ"),n("XSys"),n("5MwF")),a=n("f4B+"),r=n("nsO7"),c=n("wHJ2"),l=n("Np64"),d=n("z6Q5"),u=n("IWgv"),p=n("J0Qq"),m=n("ap1t"),h=n("AVdi"),g=n("o5Lu"),b=n("+4Px"),f=n("0JpG"),v=n("pjml"),y=n("wgY5"),w=n("5uPl"),C=n("JNtI"),S=n("p7NW"),k=n("TnpK"),I=n("MzGC"),D=n("Uw4B"),E=n("gkef"),O=n("nawZ"),T=n("d2bc"),$=n("+O05"),A=n("Kpdw"),x=n("Sa5G"),P=n("15AK"),G=n("aHpC"),L=n("uFkY"),R=n("X/qj"),M=n("jhBu"),j=n("9hUw"),_=n("12mu"),B=n("5zK3"),F=n("vEAu"),N=n("FwQ6"),V=n("gYaZ"),z=n("ck5r"),U=n("6SYN"),H=n("WByw"),q=n("IoN1"),K=n("Cs2n"),W="toggleUserList",Q="ultra.components.directives.grade.gradingBar";function J(e,t){return e.find(".grading-bar").append(t)}!function(e){e[e.Expanded=0]="Expanded",e[e.Collapsed=1]="Collapsed",e[e.NotRendered=2]="NotRendered"}(i||(i={}));var Z=function(){function e(e,t,n,i,o,s,a,r,c,l,d,u,p){var m=this;void 0===p&&(p=!1),this.$rootScope=e,this.scope=t,this.element=n,this.$compile=i,this.$sce=o,this.localize=s,this.ultraState=a,this.windowSize=r,this.originalityService=c,this.entitlementService=l,this.gradebookPermission=d,this.peerReviewService=u,this.isDelegatedHandler=p,this.updateAttemptFeedback=function(e,t,n){t&&m.scope.attempt&&m.scope.attempt.id===n.id&&(m.scope.attempt.feedbackToUser=t)},this.deletingAttempt=!1,this.canEnterFeedback=this.gradebookPermission.canDelegatedEnterAttemptFeedback(this.scope.column(),this.scope.attempt),this.canEnterGrades=this.gradebookPermission.canDelegatedEnterAttemptGrades(this.scope.column(),this.scope.attempt),this.peerReviewService.canPeerAddFeedbackToAttempt(this.scope.column(),this.scope.attempt),this.canOverrideGrades=this.entitlementService.isEntitled(T.a.AllGrading),p||(this.scope.gradingBar=this,this.setTemplate()),Object(L.d)(this.scope,this.updateAttemptFeedback),this.toolAttemptDetailItemEx=this.scope.attempt&&this.scope.attempt.toolAttemptDetail&&this.scope.attempt.getToolAttemptDetailItemEx(this.scope.column().scoreProviderHandle),this.setLocalizedLateness()}return e.prototype.setTemplate=function(){var e=this.scope.isPrivileged()?N:V;J(this.element,this.$compile(e)(this.scope))},e.prototype.setLocalizedLateness=function(){this.isSubmittedLate()&&(this.localizedLateness=this.localize.formatDurationBetweenSync(this.scope.column().dueDate,this.scope.attempt.attemptDate,this.scope))},e.prototype.showCommentIcon=function(){return this._showCommentIconForFeedbackPanel()},e.prototype.canAddComment=function(){return this.canEnterGrades||this.canEnterFeedback},e.prototype.getCommentIconType=function(){return this.hasComment()||this.hasNonPrivilegedGroupIndividualFeedback()?"view":this.canAddComment()?"add":"empty"},e.prototype._showCommentIconForFeedbackPanel=function(){var e=!c.isDefined(this.scope.showComment)||this.scope.showComment(),t=this.isPrivileged()&&(this.entitlementService.isEntitled(T.a.AllGrading)||this.peerReviewService.canPeerViewAttempt(this.scope.column(),this.scope.attempt)||this.scope.attempt.isGraded()&&(this.entitlementService.isEntitled(T.a.ViewGrades)||this.entitlementService.isEntitled(T.a.EnterFeedback))),n=!this.isPrivileged()&&($.a.studentCanViewAttemptGradeAndFeedback(this.scope.attempt,this.scope.gradeDetail)||!!this.scope.hasOverallGrade||this.peerReviewService.canPeerViewAttempt(this.scope.column(),this.scope.attempt));return e&&(t||n)},e.prototype.hasComment=function(){return $.a.attemptHasFeedback(this.scope.attempt)},e.prototype.hasNonPrivilegedGroupIndividualFeedback=function(){if(!this.isPrivileged()){var e=this.scope.attempt.attempts;return e&&e.length>0&&!!r.get(e[0].getGroupIndividualFeedbackToUser(),"rawText")}return!1},e.prototype.saveComment=function(e){return this.scope.attempt.feedbackToUser||(this.scope.attempt.feedbackToUser={rawText:""}),this.scope.attempt.feedbackToUser.rawText=e.rawText,this.scope.attempt.withParams({expand:"toolAttemptDetail"}).$patch().$asPromise().then((function(e){return e.feedbackToUser}))},e.prototype.deleteAttempt=function(){var e=this;this.deletingAttempt=!0,this.scope.attempt.$destroy().$then((function(){e.deletingAttempt=!1,e.scope.onDelete&&e.scope.onDelete()}))},e.prototype.tryAddAccomodationsIconForOverflowMenu=function(e){var t=this.scope.row&&this.scope.row.Column,n=t&&$.a.canViewAssessmentException(t.isScorm(),$.a.isExternalSubmissionsAssessment(t.ui.content),this.entitlementService.isEntitled(O.a.ViewException),t.anonymousGrading);s.a.features.perAssessmentSettings&&n&&e.unshift({icon:"accommodations",labelKey:"components.directives.grade.grading-bar.menu.exceptions",onClick:this.openEditPerAssessmentPanel.bind(this),uniqueId:"edit-per-assessment"})},e.prototype.tryAddSafeAssignIconForOverflowMenu=function(e){this.originalityService.isSafeAssignEnabled()&&e.push({icon:"safe-assign",labelKey:"components.directives.grade.grading-bar.menu.originality",onClick:this.openOriginalitySection.bind(this),show:this.showSafeAssignButton.bind(this),disable:this.disableSafeAssignButton.bind(this)})},e.prototype.tryAddDrawOrVisibleIconForOverflowMenu=function(e){if(this.entitlementService.isEntitled(T.a.ViewGrades)&&!this.scope.disableFeedbackButtons){var t=void 0,n=void 0;this.entitlementService.isEntitled(T.a.EnterFeedback)||this.entitlementService.isEntitled(T.a.AllGrading)?(t="draw",n="components.directives.grade.grading-bar.menu.edit-comment"):(t="visible",n="components.directives.grade.grading-bar.menu.view-comment"),e.push({icon:t,labelKey:n,onClick:this.openFeedbackPanel.bind(this)})}},e.prototype.tryAddTrashIconForOverflowMenu=function(e){this.entitlementService.isEntitled(T.a.AllGrading)&&e.push({icon:"trash",labelKey:"global.delete",disable:this.deleteAttemptProcessing.bind(this),onClick:this.deleteAttempt.bind(this),confirmationOptions:C.a("x-bb-delete-attempt")})},e.prototype.getOverflowMenuItems=function(){var e=[];return this.isPrivileged()?(this.tryAddAccomodationsIconForOverflowMenu(e),this.tryAddSafeAssignIconForOverflowMenu(e),this.tryAddDrawOrVisibleIconForOverflowMenu(e),this.tryAddTrashIconForOverflowMenu(e),e):e},e.prototype.disableSafeAssignButton=function(){return!this.showSafeAssignButton()||(this.windowSize.isLargeBreakpoint()?!this.originalityService.originality.overallOriginalityProcessed||this.originalityService.openOriginalityReport:!this.originalityService.originality.overallOriginalityProcessed)},e.prototype.showSafeAssignButton=function(){return this.originalityService.originality&&this.originalityService.originality.hasAttachments()},e.prototype.deleteAttemptProcessing=function(){return this.deletingAttempt},e.prototype.openOriginalitySection=function(){return this.windowSize.isLargeBreakpoint()?this.originalityService.openOriginalityReport=!0:this.ultraState.goPeekState("originality-report")},e.prototype.openFeedbackPanel=function(e,t){var n=this.scope.commentPeekSref&&this.scope.commentPeekSref();if(n)this.ultraState.goPeekState(n.name,n.args);else{var i={attemptId:this.scope.attempt.id};if(e&&Object.assign(i,{userId:e}),t)return this.ultraState.search("attemptId",i.attemptId),this.ultraState.search("userId",i.userId),this.scope.$broadcast(W),void this.$rootScope.$broadcast(P.FEEDBACK_PARAMS_UPDATED);this.ultraState.goPeekState("assessment-submission-feedback",i)}},e.prototype.openEditPerAssessmentPanel=function(){var e,t={columnId:this.scope.column().id};this.scope.user()?(t.userId=this.scope.user().id,e="per-assessment-settings"):this.scope.row&&this.scope.row.group&&(t.groupId=this.scope.row.group.id,e="per-assessment-group-settings"),this.ultraState.goPeekState(e,t)},e.prototype.isSubmittedLate=function(){return(!this.scope.hasDueDateAccommodation||!this.scope.hasDueDateAccommodation())&&(this.scope.attempt&&y(this.scope.attempt.attemptDate).isAfter(this.scope.column().dueDate))},e.prototype.isShowExtraTime=function(){return!!this.toolAttemptDetailItemEx&&this.toolAttemptDetailItemEx.needAttention()},e.prototype.isCompleted=function(){return!!this.toolAttemptDetailItemEx&&this.toolAttemptDetailItemEx.isCompleted()},e.prototype.getExceedTime=function(){return this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.grade.grading-bar.exceed-time.plural",params:{exceedTime:this.toolAttemptDetailItemEx?this.toolAttemptDetailItemEx.getExceedTime():0}})},e.prototype.getQuestionsAnsweredAfterSoftTimeLimit=function(){return this.toolAttemptDetailItemEx?this.toolAttemptDetailItemEx.getQuestionsAnsweredAfterSoftTimeLimit():[]},e.prototype.isPrivileged=function(){return this.scope.isPrivileged&&this.scope.isPrivileged()||!1},e.prototype.canGrade=function(){return this.scope.attempt&&this.scope.attempt.isGradable(this.scope.column().scoreProviderHandle)?this.canEnterGrades:this.canOverrideGrades},e.prototype.showOverflowMenu=function(){return(!c.isDefined(this.scope.showOverflowMenu)||this.scope.showOverflowMenu())&&this.getOverflowMenuItems().length>0},e.prototype.goToPeekState=function(){this.hasPeekState()&&this.ultraState.goPeekState(this.scope.peekSref().name,this.scope.peekSref().args)},e.prototype.hasPeekState=function(){return null!=this.scope.peekSref&&null!=this.scope.peekSref()&&!!this.scope.peekSref().name},Object.defineProperty(e.prototype,"label",{get:function(){return this.$sce.trustAsHtml(this.scope.attemptIndex?this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.grade.grading-bar.submission-x",params:{index:this.scope.attemptIndex}}):this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.grade.grading-bar.submission"}))},enumerable:!0,configurable:!0}),e=Object(o.__decorate)([Object(o.__param)(0,Object(G.b)("$rootScope")),Object(o.__param)(1,Object(G.b)("scope")),Object(o.__param)(2,Object(G.b)("element")),Object(o.__param)(3,Object(G.b)("$compile")),Object(o.__param)(4,Object(G.b)("$sce")),Object(o.__param)(5,Object(G.b)(f.serviceName)),Object(o.__param)(6,Object(G.b)(k.d)),Object(o.__param)(7,Object(G.b)(E.b)),Object(o.__param)(8,Object(G.b)(w.b)),Object(o.__param)(9,Object(G.b)(M.b)),Object(o.__param)(10,Object(G.b)(R.b)),Object(o.__param)(11,Object(G.b)(j.b))],e)}(),Y=function(){function e(e,t,n,i,o,s,a,r){var c=this;if(void 0===r&&(r=!1),this.scope=e,this.element=t,this.$compile=n,this.grade=i,this.entitlementService=o,this.gradebookService=s,this.GradeModel=a,this.isDelegatedHandler=r,this.canViewGrades=this.entitlementService.isEntitled(T.a.ViewGrades),this.scope.isPrivileged()&&this.scope.$on("bb-grade-input-save",(function(e,t){if(t instanceof c.GradeModel&&(null==t?void 0:t.id)===c.scope.gradeDetail.id){var n=t;n.attempts=c.scope.gradeDetail.attempts,n.ui.attempt=c.scope.gradeDetail.ui.attempt,n.permissions=c.scope.gradeDetail.permissions,c.scope.gradeDetail=n}})),!r){this.scope.gradingBar=this;var l=this.scope.isPrivileged()?B:F;J(this.element,this.$compile(l)(this.scope))}}return e.prototype.saveComment=function(e){return{}},e.prototype.showPostButton=function(){return this.scope.gradeDetail.isReadyToPost()},e.prototype.postGrade=function(){var e=this;if(this.scope.row&&this.scope.row.group)this.scope.column().postReadyGroupAttempts({groupAssociationId:this.scope.gradeDetail.groupAttempts[0].groupAssociationId}).then((function(){e.scope.$root.$broadcast("grade-post-ready-attempts",e.scope.gradeDetail,e.scope.row.group.id),e.scope.onUpdate&&e.scope.onUpdate()}));else{var t=this.scope.gradeDetail.ui.attempt&&this.scope.gradeDetail.ui.attempt.id;this.scope.gradeDetail.postReadyGrades().then((function(){e.grade.loadGrade({gradeQueryParams:{includeUnpostedGrade:!0},courseId:e.scope.column().courseId,column:e.scope.column(),userId:e.scope.user().id,attemptQueryParams:{attemptId:t,expand:"toolAttemptDetail"}},c.isDefined(t)).then((function(t){t.attempts=e.scope.gradeDetail.attempts,e.scope.gradeDetail=t,e.scope.onUpdate&&e.scope.onUpdate({newGrade:e.scope.gradeDetail}),e.scope.$root.$broadcast("grade-post-ready-attempts",e.scope.gradeDetail)}))}))}},e.prototype.undoOverride=function(){var e=this;this.scope.gradeDetail.manualGrade="-",this.scope.gradeDetail.$patch(["manualGrade"]).$then((function(t){e.scope.$emit("bb-grade-input-save",t,t.columnId)}))},e.prototype.canGrade=function(){return this.canViewGrades&&this.canOverrideGrades()},e.prototype.canEnterFeedback=function(){return this.entitlementService.isEntitled(T.a.EnterFeedback)},e.prototype.canEnterGrades=function(){return this.entitlementService.isEntitled(T.a.AllGrading)},e.prototype.canOverrideGrades=function(){return this.entitlementService.isEntitled(T.a.AllGrading)},e.prototype.canPostGrades=function(){return this.gradebookService.canPostGrades()},e.prototype.tryAddPostIconForOverflowMenu=function(e){!this.scope.column().anonymousGrading&&this.canPostGrades()&&e.push({icon:"post",labelKey:"components.directives.grade.grading-bar.menu.post",show:this.showPostButton.bind(this),onClick:this.postGrade.bind(this),confirmationOptions:C.a("grading-bar-post-grade")})},e.prototype.getOverflowMenuItems=function(){var e=[];return this.tryAddPostIconForOverflowMenu(e),e},e.prototype.getAggregationModelLabelKey=function(){return this.scope.column()&&this.scope.column().aggregationModel?A.AttemptAggregationModel.parseModel(this.scope.column().aggregationModel).getLabelKey():null},e.prototype.showOverrideIndicator=function(){return this.scope.showOverrideIndicator&&this.scope.showOverrideIndicator()&&this.scope.gradeDetail.isPosted()&&this.scope.gradeDetail.isOverrideGrade()},e.prototype.shouldShowFinalGradeInput=function(){return this.scope.gradeDetail&&this.scope.column().canSeeFinalGrade(this.scope.user())},e.prototype.shouldShowUndoOverride=function(){return this.scope.gradeDetail&&(this.scope.column().delegatedGrading?this.scope.gradeDetail.isOverrideGrade()&&this.scope.column().isUserReconciler(this.scope.user().id):this.scope.gradeDetail.isOverrideGrade())},e=Object(o.__decorate)([Object(o.__param)(0,Object(G.b)("scope")),Object(o.__param)(1,Object(G.b)("element")),Object(o.__param)(2,Object(G.b)("$compile")),Object(o.__param)(3,Object(G.b)(g.h)),Object(o.__param)(4,Object(G.b)(M.b)),Object(o.__param)(5,Object(G.b)(R.b)),Object(o.__param)(6,Object(G.b)(v.G.serviceName))],e)}(),X=function(){function e(e,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){var f=this;this.$rootScope=e,this.scope=t,this.element=n,this.$compile=i,this.$sce=o,this.$q=s,this.grade=a,this.entitlementService=r,this.gradebookPermission=c,this.localize=l,this.batchApi=d,this.ultraState=u,this.windowSize=p,this.originalityReport=m,this.peerReviewService=h,this.modal=g,this.GradeModel=b,this.userList=[],this.isGroupSubmission=!1,this.showDetail=!1,this.MAX_USERS_VISIBLE=5,this.showAllUsers=!1,this.updateIndividualFeedbackStatus=function(e,t){var n=f.getIndividualAttempt(t.userId);if(n.feedbackToUser=t.feedbackToUser,n.overrideStatus=t.overrideStatus,f.isGroupSubmission){var i=f.gradeGroupAttempts.find((function(e){return e.userId===n.userId}));i&&(i.feedbackToUser=n.feedbackToUser,i.overrideStatus=n.overrideStatus)}},this.scope.gradingBar=this,this.attemptGradingHandler=new Z(e,t,n,i,o,l,u,p,m,r,c,h,!0),this.aggregateGradingHandler=new Y(t,n,i,a,r,c,b,!0);var v=this.scope.isPrivileged()?q:H;J(this.element,this.$compile(v)(this.scope)),this.setLocalizedLateness(),this.isGroupSubmission=!!this.scope.row&&!!this.scope.row.group,this.userList=this.scope.userList?this.scope.userList:[],this.isGroupSubmission&&(this.gradeGroupAttempts=this.scope.attempt.attempts,this.scope.$watch((function(){return f.scope.row.group}),(function(){f.slideChanged()})),Object(L.e)(this.scope,this.updateIndividualFeedbackStatus)),this.scope.$on(W,(function(){f.toggleUserList()}))}return e.prototype.isPeerGrading=function(){var e;return!!(null===(e=this.scope.peerReviewProgress)||void 0===e?void 0:e.isPeerGrading)},Object.defineProperty(e.prototype,"completedPeerReviews",{get:function(){var e;return null===(e=this.scope.peerReviewProgress)||void 0===e?void 0:e.completedPeerReviews},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalPeerReviews",{get:function(){var e;return null===(e=this.scope.peerReviewProgress)||void 0===e?void 0:e.totalPeerReviews},enumerable:!0,configurable:!0}),e.prototype.showSubmissionInfo=function(){return!this.isPeerGrading()||this.scope.isPrivileged()&&this.entitlementService.isEntitled(T.a.ModifyGradebook)},e.prototype.disableFeedbackInput=function(){return!!this.scope.disableFeedbackInput},e.prototype.peerReviewStatus=function(){return this.completedPeerReviews===this.totalPeerReviews?x.y.Completed:this.completedPeerReviews>0?x.y.Started:x.y.NotStarted},e.prototype.slideChanged=function(){this.showDetail=!1,this.userList=this.scope.userList?this.scope.userList:[],this._visibleUsersCount=this.userList.length>this.MAX_USERS_VISIBLE?this.MAX_USERS_VISIBLE:this.userList.length,this.gradeGroupAttempts=this.scope.attempt.attempts},Object.defineProperty(e.prototype,"visibleUsersCount",{get:function(){return void 0!==this._visibleUsersCount?this._visibleUsersCount:this.userList.length>this.MAX_USERS_VISIBLE?this.MAX_USERS_VISIBLE:this.userList.length},enumerable:!0,configurable:!0}),e.prototype.canSeeGradePillForStudentReviewer=function(){return!this.isPeerGrading()||this.entitlementService.isEntitled(T.a.ModifyGradebook)},e.prototype.hiddenUsersCount=function(){return this.userList.length-this.MAX_USERS_VISIBLE},e.prototype.shouldShowMoreOrLess=function(){return this.userList.length>this.MAX_USERS_VISIBLE},e.prototype.showMoreOrLess=function(){return this.userList.length>this.visibleUsersCount?"More":"Less"},e.prototype.showMoreOrLessControl=function(){this._visibleUsersCount=this.userList.length>this.visibleUsersCount?this.userList.length:this.MAX_USERS_VISIBLE},e.prototype.showMoreOrLessTranslationKey=function(){return"components.directives.grade.grading-bar.userList.show"+this.showMoreOrLess()+"Users.plural"},e.prototype.toggleUserList=function(){this.showDetail=!this.showDetail,this.showDetail||(this._visibleUsersCount=this.userList.length>this.MAX_USERS_VISIBLE?this.MAX_USERS_VISIBLE:this.userList.length)},e.prototype.groupAccordingStatus=function(){return!!this.showDetail},e.prototype.getGroupIndividualCommentIconType=function(e){return this.hasGroupIndividualComment(this.getIndividualAttempt(e))?"view":this.attemptGradingHandler.canAddComment()?"add":"empty"},e.prototype.getIndividualAttempt=function(e){return this.isGroupSubmission?this.gradeGroupAttempts.find((function(t){return t.userId===e})):null},e.prototype.hasGroupIndividualComment=function(e){return e&&e.overrideStatus===v.C.OverrideStatus.FeedbackOverride&&!!r.get(e,"feedbackToUser.rawText")},e.prototype.isUserCourseAvailable=function(e){var t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])},e.prototype.setLocalizedLateness=function(){this.isSubmittedLate()&&(this.localizedLateness=this.localize.formatDurationBetweenSync(this.scope.column().dueDate,this.scope.attempt.attemptDate,this.scope))},e.prototype.saveComment=function(e){return this.attemptGradingHandler.saveComment(e)},e.prototype.isSubmittedLate=function(){return this.attemptGradingHandler.isSubmittedLate()},e.prototype.deleteAttempt=function(){this.attemptGradingHandler.deleteAttempt()},e.prototype.postGrade=function(){this.aggregateGradingHandler.postGrade()},e.prototype.openFeedbackPanel=function(e,t){this.scope.onFeedbackIconClick?this.scope.onFeedbackIconClick():this.attemptGradingHandler.openFeedbackPanel(e,t)},e.prototype.hasComment=function(){return this.attemptGradingHandler.hasComment()},e.prototype.isOverride=function(){var e=this.scope.gradeDetail&&this.scope.gradeDetail.isOverrideGrade();return e||!!(this.scope.row&&this.scope.row.group&&this.scope.row.group.memberships)&&this.scope.row.group.memberships.some((function(e){return!(!e.ui||!e.ui.gradeDetail)&&e.ui.gradeDetail.isOverrideGrade()}))},e.prototype.shouldShowOverrideIndicator=function(){return this.isOverride()&&!this.scope.hideGrade()},e.prototype.undoOverride=function(){var e=this;this.scope.row&&this.scope.row.group?this.batchApi.performBatch((function(){return e.$q.all(e.scope.row.group.memberships.map((function(e){var t=e.ui.gradeDetail;return t.manualGrade="-",t.withParams({clearCommentsIfRevertOverrides:!1}).$patch(["manualGrade"]).$asPromise()}))).then((function(t){e.scope.$emit("bb-grade-input-save",t,e.scope.column().id),e.scope.$emit(S.b)}))})):(this.aggregateGradingHandler.undoOverride(),this.scope.$emit(S.b))},e.prototype.canGrade=function(){return this.scope.gradeDetail.user&&this.scope.column().anonymousGrading||this.scope.attempt&&this.scope.attempt.isGradable(this.scope.column().scoreProviderHandle)?this.attemptGradingHandler.canGrade():this.aggregateGradingHandler.canGrade()},e.prototype.openDeletePeerSubmissionWarning=function(){var e=this;this.scope.attempt.stagedAttemptGrades.$refresh().$asPromise().then((function(t){var n=t.map((function(e){return e.grader})),i=e.scope.$new();i.translateOpts={title:{key:"components.directives.grade.grading-bar.modal.title"}};var o=n.length>0,s=e.peerReviewService.isInPeerReviewWindow||e.peerReviewService.isAfterPeerReviewWindow;i.descriptionKey=o&&s?"components.directives.grade.grading-bar.modal.description":"components.directives.confirmation-needed.instructions-x-bb-delete-attempt";var a=e.deleteAttempt.bind(e);i.deleteOnClick=function(e){a(),e()},i.graders=n;var r={scope:i,template:z};e.modal.open(r)}))},e.prototype.tryAddTrashIconForOverflowMenu=function(e){this.entitlementService.isEntitled(T.a.AllGrading)&&this.isPeerGrading()?e.push({icon:"trash",labelKey:"global.delete",disable:this.attemptGradingHandler.deleteAttemptProcessing.bind(this),onClick:this.openDeletePeerSubmissionWarning.bind(this)}):this.attemptGradingHandler.tryAddTrashIconForOverflowMenu(e)},e.prototype.getOverflowMenuItems=function(){var e=this.aggregateGradingHandler.getOverflowMenuItems();return this.attemptGradingHandler.isPrivileged()?(this.attemptGradingHandler.tryAddAccomodationsIconForOverflowMenu(e),this.attemptGradingHandler.tryAddSafeAssignIconForOverflowMenu(e),this.attemptGradingHandler.tryAddDrawOrVisibleIconForOverflowMenu(e),this.tryAddTrashIconForOverflowMenu(e),e):e},e.prototype.getLocalizedTextByKey=function(e){return this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:e,noWrap:!0})},e.prototype.showOverflowMenu=function(){return!(s.a.features.peerAssessmentFeatureFlag&&this.isPeerGrading()&&this.scope.gradeDetail.user.isStudent())&&this.attemptGradingHandler.showOverflowMenu()},e.prototype.isShowExtraTime=function(){return this.attemptGradingHandler.isShowExtraTime()},e.prototype.isCompleted=function(){return this.attemptGradingHandler.isCompleted()},e.prototype.getExceedTime=function(){return this.attemptGradingHandler.getExceedTime()},e.prototype.getQuestionsAnsweredAfterSoftTimeLimit=function(){return this.attemptGradingHandler.getQuestionsAnsweredAfterSoftTimeLimit()},e.prototype.showCommentIcon=function(){return this.attemptGradingHandler.showCommentIcon()},e.prototype.getCommentIconType=function(){return this.attemptGradingHandler.getCommentIconType()},e=Object(o.__decorate)([Object(o.__param)(0,Object(G.b)("$rootScope")),Object(o.__param)(1,Object(G.b)("scope")),Object(o.__param)(2,Object(G.b)("element")),Object(o.__param)(3,Object(G.b)("$compile")),Object(o.__param)(4,Object(G.b)("$sce")),Object(o.__param)(5,Object(G.b)("$q")),Object(o.__param)(6,Object(G.b)(g.h)),Object(o.__param)(7,Object(G.b)(M.b)),Object(o.__param)(8,Object(G.b)(R.b)),Object(o.__param)(9,Object(G.b)(f.serviceName)),Object(o.__param)(10,Object(G.b)(d.b)),Object(o.__param)(11,Object(G.b)(k.d)),Object(o.__param)(12,Object(G.b)(E.b)),Object(o.__param)(13,Object(G.b)(w.b)),Object(o.__param)(14,Object(G.b)(j.b)),Object(o.__param)(15,Object(G.b)(_.b)),Object(o.__param)(16,Object(G.b)(v.G.serviceName))],e)}(),ee=(function(){function t(e,t,n,i,o,s){var a=this;this.element=e,this.commentBbml=t,this.saveCommentFunc=n,this.timeout=i,this.scope=o,this.ultraState=s,this.commentPanelOpen=!1,this.editState=!1,this.isSaving=!1,this.textEditorOptions={deleteOnNoText:!1,focusOnInit:!1,maintainOriginalTextOnRefresh:!0,saveOnBlur:function(){return!1},showCancelButton:function(){return!0},showSaveButton:function(){return!0},showDeleteButton:function(){return!1},showEditButton:function(){return!1},placeholderKey:"components.directives.grade.grading-bar.instructor-comments.placeholder",onSaveFunc:function(){a.save()},onCancelFunc:function(){a.cancelComment()},disableInlineEditing:!0},this.commentBbml=this.commentBbml||{rawText:"",displayText:""},this.currentComment=r.assign({rawText:"",displayText:""},t),this.editState=!1,e.on("keydown",(function(e){if(a.inEditState())if(e.keyCode===b.u){e.preventDefault();var t=[a.element.find(".add-comment-container .editor-element").get()[0],a.element.find(".add-comment-container .js-text-editor-cancel").get()[0],a.element.find(".add-comment-container .js-text-editor-save").get()[0]],n=t.indexOf(e.target);e.shiftKey?l.a(n,t).previous().focus():l.a(n,t).next().focus()}else e.keyCode===b.g&&e.stopPropagation()}))}t.prototype.inEditState=function(){return this.editState},t.prototype.enableEditing=function(){this.editState=!0,this.focusEditor()},t.prototype.disableEditing=function(){this.editState=!1},t.prototype.onFeedbackTextClick=function(t){if(!this.inEditState()){var n=e(t.target);n.is("button")||n.parent().is("button")||n.is("a")||n.parent().is("a")||this.enableEditing()}},t.prototype.focusEditor=function(){var e=this,t=this.element.find(".editor-element");t.focus(),t.is(":focus")||this.timeout((function(){e.element.find(".editor-element").focus()}),this.scope)},t.prototype.adjustTabindex=function(){var e=this.commentPanelOpen?0:-1;this.element.find(".editor-element").attr("tabindex",e),this.element.find(".add-comment button").attr("tabindex",e)},t.prototype.getComment=function(){return this.currentComment},t.prototype.isEditorReadOnly=function(){return!this.inEditState()&&this.hasComment()||this.isSaving},t.prototype.canGrade=function(){return!x.s.None.isEqualTo(this.scope.gradeDetail.gradeScoreDesignation)},t.prototype.toggleComments=function(){this.commentPanelOpen=!this.commentPanelOpen,this.adjustTabindex(),this.commentPanelOpen?this.canGrade()&&this.enableEditing():(this.cancelComment(),this.element.find(".toggle-comments-button").focus())},t.prototype.openCommentsAndEnableEditing=function(){var e=this;this.commentPanelOpen=!0,this.adjustTabindex(),this.timeout((function(){e.enableEditing()}),this.scope)},t.prototype.cancelComment=function(){this.hasComment()||(this.commentPanelOpen=!1),this.disableEditing(),r.assign(this.currentComment,this.commentBbml)},t.prototype.save=function(){var e=this;this.saveCommentFunc&&(this.currentComment.displayText=a.a.text(this.currentComment.rawText),r.assign(this.commentBbml,this.currentComment),this.timeout((function(){e.isSaving=!0,e.disableEditing(),e.hasComment()||e.toggleComments()}),this.scope),this.saveUntilNoTempFilesRemain(this.commentBbml).then((function(t){e.isSaving=!1,e.commentBbml=t,e.currentComment=t})))},t.prototype.saveUntilNoTempFilesRemain=function(e){var t=this;return this.saveCommentFunc(e).then((function(e){return RegExp(/src=\S+\/sessions\//).test(e.rawText)?(e.rawText+=" ",t.saveUntilNoTempFilesRemain(e)):e}))},t.prototype.hasComment=function(){return!!this.commentBbml&&!!this.commentBbml.rawText},t.prototype._goToCommentLinkedPeekState=function(){this.hasCommentLinkedPeekState()&&this.ultraState.goPeekState(this.scope.commentPeekSref().name,this.scope.commentPeekSref().args)},t.prototype.hasCommentLinkedPeekState=function(){return null!=this.scope.commentPeekSref&&null!=this.scope.commentPeekSref()}}(),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t.prototype.setTemplate=function(){if(!this.scope.attemptIndex)throw new Error("`attemptIndex` is required for grading bar when in reconciliation mode.");J(this.element,this.$compile(U)(this.scope))},t.prototype.getGradeInputAriaLabel=function(){return this.localize.translateSync({key:"components.directives.grade.grading-bar.reconcile-grade-attempt-input-aria-label",params:{student:this.scope.user(),attempt_index:this.scope.attemptIndex},locale:this.localize.getLocale(this.scope),noWrap:!0})},t}(Z)),te=function(){function e(e,t){var n=this;this.$compile=e,this.$injector=t,this.restrict="E",this.scope={isPrivileged:"&",isReconcile:"&",saveAsOverride:"&",attempt:"=",gradeDetail:"=",hideRubricIcon:"=?",row:"=",column:"&",hasDueDateAccommodation:"&",onUpdate:"&?",onDelete:"&?",hideGrade:"&?",user:"&",peerReviewProgress:"<?",disableFeedbackInput:"<?",disableFeedbackButtons:"<?",onFeedbackIconClick:"&?",attemptIndex:"@",attemptStatus:"@",peekSref:"&",showOverrideIndicator:"&",showOverflowMenu:"&?",showComment:"&?",commentPeekSref:"&?",disableRubricAction:"&?",selectedUser:"=?",selectedText:"@?",userList:"=?",isExceptionAttempt:"=?",getUserCourseAvailabilities:"&?userCourseAvailabilities",hasOverallGrade:"<?"},this.link=function(e,t,i){if(t.append(n.$compile(K)(e)),e.column())if(e.isReconcile())e.gradingBar=n.$injector.instantiate(ee,{scope:e,element:t,isDelegate:!1});else if(e.column().isMultipleAttempts()||e.isExceptionAttempt)if(e.gradeDetail&&!e.attempt)e.gradingBar=n.$injector.instantiate(Y,{scope:e,element:t});else{if(!e.attempt||e.gradeDetail)throw new Error("For multiple attempt assessment, gradeDetail or attempt has to be set, not both nor none");e.gradingBar=n.$injector.instantiate(Z,{scope:e,element:t})}else e.gradingBar=n.$injector.instantiate(X,{scope:e,element:t,attrs:i})}}return e=Object(o.__decorate)([Object(o.__param)(0,Object(G.b)("$compile")),Object(o.__param)(1,Object(G.b)("$injector"))],e)}();c.module(Q,[u.a,p.a,m.c,h.a,f.moduleName,C.b,E.a,I.a,D.a,w.a,M.a,R.a,j.a,_.a]).directive("bbGradingBar",["$injector",function(e){return e.instantiate(te)}])}).call(this,n("5iHu"))},CG4K:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-custom-toggle-grid",use:"icon-custom-toggle-grid-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-grid"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12M1 12V0M6 12V0M11 12V0" /></symbol>'});o.add(s);e.exports=s},CME4:function(e,t){e.exports='<div class="assessment-question" ng-class="\'js-question-type-\' + assessmentQuestion.getType()">\n  <form name="questionForm"\n        bb-autosave\n        save-func="assessmentQuestion.persist()"\n        validation-func="assessmentQuestion.validate()"\n        delay-autosave="assessmentQuestion.suppressAutosave"\n        novalidate>\n    <fieldset role="presentation">\n      <div class="question-header"\n           ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n           ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n        <legend\n          class="question-label"\n          ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle"\n          bb-translate="components.directives.assessment-question.question-title"\n          translate-values="{index: questionAttempt.visibleQuestionNumber}"\n          role="presentation"\n        ></legend>\n\n        \x3c!--Question goal --\x3e\n        <a ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle && assessmentQuestion.hasGoals()" href="javascript:void(0);"\n           ng-click="assessmentQuestion.openQuestionGoals()"\n           class="question-goal"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.assessment-question.view-goal\', \'title\':\'components.directives.assessment-question.view-goal\'}"\n           analytics-id="components.directives.assessment-question.view-goal.link">\n          <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n        </a>\n\n        <div class="point-value" ng-if="assessmentQuestion.questionConfig.hasPoints" bb-translate="components.directives.assessment-question.number-of-points.plural" translate-values="{numberOfPoints: questionAttempt.question.points}"></div>\n      </div>\n\n      <div class="question-content"></div>\n    </fieldset>\n  </form>\n</div>\n'},Cs2n:function(e,t){e.exports='<div class="grading-bar"\n     bb-load-bundle="components/directives/grade/grading-bar">\n    \x3c!--Template will be appended here--\x3e\n</div>\n\n'},"D8d/":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var i=n("wHJ2"),o=n("0JpG"),s=n("A+IJ"),a=n("2a+M"),r=n("pjml"),c=n("lEL+"),l=n("GbAM"),d=n("W6wm"),u="ultra.components.directives.bbDropHandler",p=function(){function t(e,t,n,i,o,s,r,c){var l=this;this.scope=e,this.element=t,this.$rootScope=i,this.$q=o,this.timeout=s,this.dragDropService=r,this.bbLocalizeService=c,this.isDraggingOverFolder=!1,this.isEmptyTarget="emptyTarget"in n,this.dropTargetElement=t.closest(this.dragDropService.dragElementSelector),e.$on("bb-drag-move",(function(){if(l.isEnabledForReordering()&&l.isNotSameDropTarget()&&l.isOnSamePanel()){var e=t.offset(),n=t.height()+e.top,i=t.width()+e.left;l.dragDropService.pointerPosition.left>=e.left&&l.dragDropService.pointerPosition.left<=i&&l.dragDropService.pointerPosition.top>=e.top&&l.dragDropService.pointerPosition.top<=n?l.dragOverFunc(l.dragDropService.pointerPosition.top):l.dragLeaveFunc()}})),e.$on("bb-drag-end",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&l.dropHandlerFunc()})),t.on("drop",(function(t){t.originalEvent.dataTransfer.files&&t.originalEvent.dataTransfer.files.length>0&&e.onFileDropHandler&&e.onFileDropHandler()(t.originalEvent.dataTransfer.files,e.content())})),e.$on("bb-drag-cancel",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&(e.content().id===l.dragDropService.currentDragId&&(l.dragDropService.positionBefore=e.content().id),l.dropHandlerFunc())})),e.$on("keyboard-drag-start",(function(){l.isEnabledForReordering()&&e.content().id===l.dragDropService.currentDragId&&(l.dragPosition=a.b.SELF,l.dragDropService.originalElement=t.closest(l.dragDropService.dragElementSelector),l.dragDropService.currentDragElement=l.dragDropService.originalElement.clone(),l.dragDropService.originalElement.addClass(l.dragDropService.originalElementClass),l.dragDropService.currentDragElement.addClass(l.dragDropService.movableElementClass),l.dragDropService.originalElement.addClass(l.dragDropService.dragHoverClass),l.dragDropService.setDropTarget(e.content().id))})),e.$on("keyboard-drag-end",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&l.timeout((function(){l.dragDropService.originalElement&&l.dragDropService.originalElement.removeClass(l.dragDropService.originalElementClass),a.b.FOLDER.isEqualTo(l.dragPosition)?l.dragDropService.positionAfter=e.content().id:a.b.TOP.isEqualTo(l.dragPosition)?(l.dragDropService.positionBefore=e.content().id,l.dragDropService.positionAfter=null):(l.dragDropService.positionAfter=e.content().id,l.dragDropService.positionBefore=null),l.dropTargetElement.removeClass(l.dragDropService.dragHoverClass),l.dragDropService.currentDragElement&&l.dragDropService.currentDragElement.remove(),l.isDropPreventedByContentDepthRules().then((function(t){if(!l.isDnDPreventedInDiscussionContext()&&!t&&!l._isDroppingInSamePlace()){var n={dragContentId:l.dragDropService.currentDragId,dragElement:l.dragDropService.currentDragElement,parentFolderId:l.scope.content().parentId,positionAfterId:l.dragDropService.positionAfter,positionBeforeId:l.dragDropService.positionBefore,rootScope:l.$rootScope,targetFolderId:l.scope.content().id};e.onMoveHandler()(n)}l._keyboardEndDragAndClearValues()}))}),e)})),e.$on("keyboard-drag-cancel",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._keyboardEndDragAndClearValues(),l.dropTargetElement.removeClass(l.dragDropService.dragHoverClass),l.dragDropService.originalElement.removeClass(l.dragDropService.originalElementClass),l.dragDropService.currentDragElement.remove())})),e.$on("keyboard-drag-up",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._removeKeyboardPlaceholderAndStyling(),l.isEmptyTarget&&(l.dragPosition=a.b.TOP),a.b.SELF.isEqualTo(l.dragPosition)||a.b.TOP.isEqualTo(l.dragPosition)?e.previousContentId&&e.previousContentId()?l.keyboardMoveUpToItem(e.previousContentId()):e.content().depth>1?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),l.keyboardMoveOntoFolder(e.content().parentId)):(l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):a.b.FOLDER.isEqualTo(l.dragPosition)?l._keyboardMoveAboveThisItem():a.b.BOTTOM.isEqualTo(l.dragPosition)&&l.isDropPreventedByContentDepthRules().then((function(t){l.isAFolder()?!0!==e.isFolderOpen()||!l.isNotSameDropTarget()||l.isDnDPreventedInDiscussionContext()||t?!1!==e.isFolderOpen()||!l.isNotSameDropTarget()||l.isDnDPreventedInDiscussionContext()||t||l.keyboardMoveOntoFolder(l.scope.content().id):(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),l.keyboardMoveIntoFolderAsLastItem()):l._keyboardMoveAboveThisItem()})))})),e.$on("keyboard-drag-down",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._removeKeyboardPlaceholderAndStyling(),l.isEmptyTarget&&(l.dragPosition=a.b.BOTTOM),a.b.SELF.isEqualTo(l.dragPosition)||a.b.BOTTOM.isEqualTo(l.dragPosition)?e.nextContentId&&e.nextContentId()?l.keyboardMoveDownToItem(e.nextContentId()):e.content().depth>1?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),l.keyboardMoveBelowItem(e.content().parentId)):(l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):a.b.FOLDER.isEqualTo(l.dragPosition)?l.isDropPreventedByContentDepthRules().then((function(t){e.isFolderOpen&&!0===e.isFolderOpen()&&l.isNotSameDropTarget()&&!l.isDnDPreventedInDiscussionContext()&&!t?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),l.keyboardMoveIntoFolderAsFirstItem()):l._keyboardMoveBelowThisItem()})):a.b.TOP.isEqualTo(l.dragPosition)&&l.isDropPreventedByContentDepthRules().then((function(e){l.isAFolder()&&l.isNotSameDropTarget()&&!l.isDnDPreventedInDiscussionContext()&&!e?l.keyboardMoveOntoFolder(l.scope.content().id):l._keyboardMoveBelowThisItem()})))})),e.$on("keyboard-drag-right",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&a.b.FOLDER.isEqualTo(l.dragPosition)&&e.isFolderOpen&&!1===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)})),e.$on("keyboard-drag-left",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&a.b.FOLDER.isEqualTo(l.dragPosition)&&e.isFolderOpen&&!0===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)})),e.$on("keyboard-move-up-to-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),e.content().id===l.dragDropService.currentDragId?(l.dragPosition=a.b.SELF,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l.isAFolder()?l.scope.isFolderOpen&&!0===l.scope.isFolderOpen()?l.keyboardMoveIntoFolderAsLastItem():(l.dragPosition=a.b.FOLDER,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l._keyboardMoveAboveThisItem())})),e.$on("keyboard-move-down-to-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),e.content().id===l.dragDropService.currentDragId?(l.dragPosition=a.b.SELF,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l.isAFolder()?l.keyboardMoveOntoFolder(l.scope.content().id):l._keyboardMoveBelowThisItem())})),e.$on("keyboard-move-above-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l._keyboardMoveAboveThisItem())})),e.$on("keyboard-move-below-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l._keyboardMoveBelowThisItem())})),e.$on("keyboard-move-onto-folder",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l.dragPosition=a.b.FOLDER,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation())})),e.$on("remove-placeholder",(function(){l.isEnabledForReordering()&&l.dragDropService.dropPlaceholderElement&&l.dragDropService.dropPlaceholderElement.remove(),l.isEmptyTarget&&l.element.children("bb-add-content-button").show()}))}return t.prototype._keyboardMoveBelowThisItem=function(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.content().id):this.scope.nextContentId&&this.scope.nextContentId()===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.nextContentId()):(this.dragPosition=a.b.BOTTOM,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())},t.prototype._keyboardMoveAboveThisItem=function(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.content().id):this.scope.previousContentId&&this.scope.previousContentId()===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.previousContentId()):(this.dragPosition=a.b.TOP,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())},t.prototype._informScreenReaderOfNewLocation=function(){var e=this.element.find("[bb-drag-handle]").eq(0).attr("drag-item-name"),t="";if(""!==this.dragDropService.queuedScreenReaderMessages&&(t+=this.dragDropService.queuedScreenReaderMessages,t+=" "),-1!==this.dragDropService.currentDropTargetId.indexOf("blank"))return t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-only-item-in-folder",noWrap:!0}),this.$rootScope.$broadcast(l.a,t),void(this.dragDropService.queuedScreenReaderMessages="");this.scope.previousContentId&&this.scope.previousContentId()||!a.b.TOP.isEqualTo(this.dragPosition)&&!a.b.SELF.isEqualTo(this.dragPosition)?this.scope.nextContentId&&this.scope.nextContentId()||!a.b.BOTTOM.isEqualTo(this.dragPosition)&&!a.b.SELF.isEqualTo(this.dragPosition)||(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-end-of-list",noWrap:!0}),t+=" "):(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-top-of-list",noWrap:!0}),t+=" "),a.b.SELF.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-self",noWrap:!0}):a.b.FOLDER.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-folder",params:{itemName:e},noWrap:!0}):a.b.TOP.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-above",params:{itemName:e},noWrap:!0}):a.b.BOTTOM.isEqualTo(this.dragPosition)&&(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-below",params:{itemName:e},noWrap:!0})),this.$rootScope.$broadcast(l.a,t),this.dragDropService.queuedScreenReaderMessages=""},t.prototype._applyKeyboardPlaceholderAndStyling=function(){var e=this.dropTargetElement;a.b.SELF.isEqualTo(this.dragPosition)?this.dropTargetElement.addClass(this.dragDropService.dragHoverClass):a.b.FOLDER.isEqualTo(this.dragPosition)?(this.dropTargetElement.before(this.dragDropService.currentDragElement),this.dragDropService.currentDragElement&&(1===this.scope.content().depth?this.dragDropService.currentDragElement.addClass(this.dragDropService.onFolderClass):2===this.scope.content().depth&&this.dragDropService.currentDragElement.addClass(this.dragDropService.onNestedFolderClass))):a.b.BOTTOM.isEqualTo(this.dragPosition)?(e=this.dragDropService.currentDragElement,this.dropTargetElement.after(this.dragDropService.currentDragElement)):a.b.TOP.isEqualTo(this.dragPosition)&&(e=this.dragDropService.currentDragElement,this.dropTargetElement.before(this.dragDropService.currentDragElement)),this._scrollContainer(e)},t.prototype._removeKeyboardPlaceholderAndStyling=function(){this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&(this.dragDropService.currentDragElement.removeClass(this.dragDropService.onFolderClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.onNestedFolderClass),this.dragDropService.currentDragElement.remove())},t.prototype._scrollContainer=function(e){this.dragDropService.scrollDragDropItemsContainer(e.offset().top,a.a.SCROLLING_CONSTANTS.keyboardInteractionDistanceToScroll)},t.prototype._keyboardEndDragAndClearValues=function(){var t=this;this.timeout((function(){e('[bb-drag-handle][drag-item-id="'+t.dragDropService.currentDragId+'"]').focus(),t.dragDropService.clearDropTarget(),t.dragDropService.currentDragId=void 0,t.dragDropService.currentDragType=void 0,t.dragDropService.isKeyboardDragging=!1}),this.scope,0,!1)},t.prototype.isDropPreventedByContentDepthRules=function(){var e=this;if(void 0!==this.dragDropService.currentDragHasFolderChild)return this.dragDropService.currentDragHasFolderChild.then((function(t){return r.r.ContentHandler.Folder.isEqualTo(e.dragDropService.currentDragType)&&(e.isDraggingOverFolder&&e.scope.content().depth===s.l||e.scope.content().depth>s.l||e.isDraggingOverFolder&&t)}));var t=this.$q.defer();return t.resolve(!1),t.promise},t.prototype.isDnDPreventedInDiscussionContext=function(){var e=this;return d.a.Discussions===e.dragDropService.currentDragContext&&r.r.ContentHandler.Folder.isEqualTo(e.dragDropService.currentDragType)&&(this.isDraggingOverFolder&&this.scope.content().depth===s.k||this.scope.content().depth>s.k)},t.prototype.dragOverFunc=function(e){var t=this;if(this.dragDropService.currentDragId&&this.dragDropService.currentDragId!==this.scope.content().id){this.dragDropService.setDropTarget(this.scope.content().id),!this.folderHoverTimeout&&this.scope.isFolderOpen&&!1===this.scope.isFolderOpen()&&(this.dropTargetElement.addClass(this.dragDropService.dragHoverClass),this.folderHoverTimeout=this.timeout((function(){t.isDropPreventedByContentDepthRules().then((function(e){e||t.isDnDPreventedInDiscussionContext()?(t.dragDropService.isShowingDepthMessage=!0,t.$rootScope.$broadcast("show-override-message",t.bbLocalizeService.translateSync({locale:t.bbLocalizeService.getLocale(t.scope),key:t.dragDropService.folderDepthMessageKey}),t.scope.content().id)):(t.scope.$emit("toggle-folder-by-id",t.scope.content().id),t.wasFolderOpened=!0)}))}),this.scope,1500)),this.dragDropService.isShowingDepthMessage&&this.dragDropService.isNotSameDropTarget()&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());var n=e,i=this.element.offset().top+this.element.height()/2,o=this.dragPosition;this.isAFolder()&&(this.isDraggingOverFolder=!0),this.scope.content().id.indexOf("placeholder")>-1?(this.dragDropService.positionAfter=this.scope.content().parentId,this.dragDropService.positionBefore=void 0,this.dragPosition=a.b.BOTTOM):n<=i?(this.dragDropService.positionBefore=this.scope.content().id,this.dragDropService.positionAfter=void 0,this.dragPosition=a.b.TOP):(this.dragDropService.positionAfter=this.scope.content().id,this.dragDropService.positionBefore=void 0,this.dragPosition=a.b.BOTTOM),(this.dragDropService.isNotSameDropTarget()||this.dragPosition!==o)&&(this._moveDropPlaceholderElement(),this.isEmptyTarget&&this.element.children().hide())}},t.prototype._moveDropPlaceholderElement=function(){var e=this;if(this.$rootScope.$broadcast("remove-placeholder"),this.dragDropService.currentDragId!==this.dragDropService.currentDropTargetId){e.dragDropService.positionBefore&&e.dragDropService.currentDropTargetId!==e.dragDropService.idOfNextItem?this.dropTargetElement.before(this.dragDropService.dropPlaceholderElement):e.dragDropService.currentDropTargetId.indexOf("placeholder")>-1&&e.dragDropService.idOfNextItem===e.dragDropService.currentDropTargetId||!e.dragDropService.positionAfter||e.dragDropService.currentDropTargetId===e.dragDropService.idOfPreviousItem||this.dropTargetElement.after(this.dragDropService.dropPlaceholderElement)}},t.prototype._isDroppingInSamePlace=function(){if(null!=this.dragDropService.positionAfter&&this.scope.previousContentId&&this.dragDropService.positionAfter===this.scope.previousContentId()||this.dragDropService.positionAfter===this.dragDropService.currentDragId||null!=this.dragDropService.positionBefore&&this.scope.nextContentId&&this.dragDropService.positionBefore===this.scope.nextContentId()||this.dragDropService.positionBefore===this.dragDropService.currentDragId)return!0},t.prototype.dropHandlerFunc=function(){var e=this;this.timeout.cancel(this.folderHoverTimeout),this.dropTargetElement.parents("[data-parent-id]").last().removeAttr("style"),this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("remove-placeholder"),this.$rootScope.$broadcast("file-drag-restore"),this.dragDropService.isShowingDepthMessage&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());var t={dragContentId:this.dragDropService.currentDragId,originalElement:this.dragDropService.originalElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};this.isDropPreventedByContentDepthRules().then((function(n){e._isDroppingInSamePlace()||e.isDnDPreventedInDiscussionContext()?e.dropCleanupFunc():!n&&e.isDraggingOverFolder?e.scope.$$phase||e.scope.$root&&e.scope.$root.$$phase?(e.scope.onMoveIntoFolderHandler()(t),e.dropCleanupFunc()):e.scope.$apply((function(){e.scope.onMoveIntoFolderHandler()(t),e.dropCleanupFunc()})):n?e.dropCleanupFunc():e.scope.$$phase||e.scope.$root&&e.scope.$root.$$phase?(e.scope.onMoveHandler()(t),e.dropCleanupFunc()):e.scope.$apply((function(){e.scope.onMoveHandler()(t),e.dropCleanupFunc()})),e.isDraggingOverFolder=!1}))},t.prototype.dropCleanupFunc=function(){this.wasFolderOpened&&(this.wasFolderOpened=!1,this.scope.$emit("toggle-folder-by-id",this.scope.content().id)),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove()},t.prototype.dragLeaveFunc=function(){var e=this;this.isDraggingOverFolder=!1,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.timeout.cancel(this.folderHoverTimeout),this.folderHoverTimeout=void 0,this.isDropPreventedByContentDepthRules().then((function(t){t&&(e.dragDropService.isShowingDepthMessage=!1,e.broadcastShowOverrideMessage())}))},t.prototype.broadcastShowOverrideMessage=function(){var e=this;this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id):this.scope.$apply((function(){return e.$rootScope.$broadcast("show-override-message",void 0,e.scope.content().id)}))},t.prototype.keyboardMoveUpToItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-up-to-item",e)}),this.scope)},t.prototype.keyboardMoveDownToItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-down-to-item",e)}),this.scope)},t.prototype.keyboardMoveBelowItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-below-item",e)}),this.scope)},t.prototype.keyboardMoveAboveItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-above-item",e)}),this.scope)},t.prototype.keyboardMoveOntoFolder=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-onto-folder",e)}),this.scope)},t.prototype.keyboardMoveIntoFolderAsLastItem=function(){var e=this.scope.content().children;e.length>0?this.keyboardMoveBelowItem(e[e.length-1].id):this.keyboardMoveBelowItem(this.scope.content().id+"blank")},t.prototype.keyboardMoveIntoFolderAsFirstItem=function(){var e=this.scope.content().children;e.length>0?this.keyboardMoveAboveItem(e[0].id):this.keyboardMoveAboveItem(this.scope.content().id+"blank")},t.prototype.isNotSameDropTarget=function(){return this.scope.content().id!==this.dragDropService.currentDragId},t.prototype.isOnSamePanel=function(){return this.element.closest(".panel-content").is(this.dragDropService.originalElement.closest(".panel-content"))},t.prototype.isEnabledForReordering=function(){return!(this.scope.disableForReordering&&this.scope.disableForReordering())},t.prototype.isAFolder=function(){return null!=this.scope.isFolderOpen},t.$inject=["scope","element","attrs","$rootScope","$q",c.b,a.d,o.serviceName],t}(),m=function(){function e(e){var t=this;this.$injector=e,this.scope={onMoveIntoFolderHandler:"&?",onMoveHandler:"&",onFileDropHandler:"&",isFolderOpen:"&?",content:"&",previousContentId:"&?",nextContentId:"&?",disableForReordering:"&?"},this.restrict="A",this.link=function(e,n,i){e.dropHandlerDirective=t.$injector.instantiate(p,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(u,[a.c,c.a]).directive("bbDropHandler",["$injector",function(e){return e.instantiate(m)}])}).call(this,n("5iHu"))},DAbe:function(e,t){e.exports="<div ng-transclude></div>"},DDBr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("wHJ2"),o=n("0JpG"),s=n("kwLz"),a=n("1ZbL"),r="ultra.components.directives.feedback.feedbackList",c={Class:s.FeedbackList,bindingNames:["analyticsId","configProps","secondaryGradersFeedback"],renderLocalized:!0};i.module(r,[o.moduleName]).component("bbFeedbackList",Object(a.a)(c))},DXZ4:function(e,t,n){},DYK3:function(e,t,n){"use strict";n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return V})),n.d(t,"i",(function(){return z})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return U})),n.d(t,"h",(function(){return K})),n.d(t,"e",(function(){return W})),n.d(t,"f",(function(){return Q})),n.d(t,"g",(function(){return J}));var i,o=n("D57K"),s=(n("Yi7M"),n("bBUr"),n("sZYy"),n("ykC+"),n("5iHu")),a=n("nsO7"),r=n("e0uO"),c=n("+sRu"),l=n("0vQT"),d=n("A0nf"),u=n("vYaK"),p=n("t6LE"),m=n("Sa5G"),h=n("RNuw"),g=n("X/qj"),b=n("yC9S"),f=n("0JpG"),v=n("e6jQ"),y=n("lEL+"),w=n("TnpK"),C=n("Qbdf"),S=n("Fvsw"),k=n("Ed3w"),I=n("O94r"),D=n.n(I),E=n("5MwF"),O=n("pzAO"),T=n.n(O),$=n("Vng8"),A=n("R+Yw"),x=n("vhkR"),P=n("aHpC"),G=n("Q/M7"),L=n("JfV0"),R=n("3Nzc"),M=n("CME4"),j=n("y0xW"),_=n("5XZZ"),B=n("+O05"),F=10,N="question-attempt_exit-question-regrading-editing-mode",V="question-attempt_close-other-editing-question",z="question-attempt_save-or-cancel-regrading-question";!function(e){e.CANCEL="cancel",e.SAVE="save",e.SAVE_WITHOUT_REGRADING="save-without-regrading"}(i||(i={}));var U=function(){function e(e){this.$injector=e}return e.prototype.createQuestion=function(e,t,n){return{title:e,questionText:{},points:F,positionBefore:t.positionBefore,positionAfter:t.positionAfter}},e.prototype.getHandlerByMode=function(e,t,n){switch(e.mode().toString()){case r.a.QuestionReview.toString():return this.getQuestionReviewHandler(e,t,n);case r.a.AttemptAuthoring.toString():return this.getAttemptAuthoringHandler(e,t,n);case r.a.AttemptGrading.toString():return this.getAttemptGradingHandler(e,t,n);case r.a.AttemptReview.toString():return this.getAttemptReviewHandler(e,t,n);default:throw new Error("Invalid mode provided")}},e.prototype.getQuestionReviewHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.prototype.getAttemptAuthoringHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.prototype.getAttemptGradingHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.prototype.getAttemptReviewHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.$inject=["$injector"],e}(),H=function(){function e(e,t,n,i,o,s,a,r,c){var l;this.$compile=e,this.$window=t,this.attrs=n,this.element=i,this.gradebookPermissionService=o,this.scope=s,this.timeout=a,this.localizeService=r,this.settingsDefault=c,this.canEnterGrades=!1,this.canViewGrades=!1,this.elementId="assessment-question_"+v.a(),this.formName=this.elementId+"_form",this.questionConfig={hasPoints:!0,hasQuestionCountTitle:!0,points:F,showQuestionControls:!0},this.questionSpecificTemplateReady=!1,this.questionRegradingEnabled=E.a.features.questionRegrading,this.canEnterGrades=this.gradebookPermissionService.canEnterGrades(),this.canViewGrades=this.gradebookPermissionService.canViewGrades(),c&&(this.questionConfig=c),this.questionAttempt=null===(l=this.scope.gradedQuestionAttempt)||void 0===l?void 0:l.questionAttempt,b.b.OnWindow("drop.document dragover.document",(function(e){e.preventDefault()}),s)}return e.prototype.insertQuestionSpecificTemplate=function(e){var t=this;this.timeout((function(){var n=s(e),i=t.element.find(".question-container");i.length>0?n.insertAfter(i):t.element.find(".question-content").prepend(n),t.$compile(n)(t.scope),t.questionSpecificTemplateReady=!0}),this.scope,0,!1)},e.$inject=[],e=Object(o.__decorate)([Object(o.__param)(0,Object(P.b)("$compile")),Object(o.__param)(1,Object(P.b)("$window")),Object(o.__param)(2,Object(P.b)("attrs")),Object(o.__param)(3,Object(P.b)("element")),Object(o.__param)(4,Object(P.b)(g.b)),Object(o.__param)(5,Object(P.b)("scope")),Object(o.__param)(6,Object(P.b)(y.b)),Object(o.__param)(7,Object(P.b)(f.serviceName))],e)}(),q=function(e){function t(t,n,i,o,s,a,r,c,l){var u,p=e.call(this,t,n,i,o,s,a,r,c,l)||this;return p.$compile=t,p.$window=n,p.attrs=i,p.element=o,p.gradebookPermissionService=s,p.scope=a,p.timeout=r,p.localizeService=c,p.settingsDefault=l,p.attempt=p.scope.attempt,p.toolAttemptDetailItem=null===(u=p.attempt)||void 0===u?void 0:u.getToolAttemptDetailItemEx(d.a.Test),p}return Object(o.__extends)(t,e),t.prototype.getAnswerResult=function(){return this.isFullCredit()?l.a.FullCredit:this.isCorrect()?l.a.Correct:this.isPartiallyCorrect()?l.a.Partial:l.a.Incorrect},t.prototype.getAnswerStyles=function(e,t,n){var i;return D()(((i={})[c.a.IsSelected]=e,i[c.a.AnswerNotSelected]=!e&&!t,i[c.a.CorrectAnswerSelected]=n&&e&&t,i[c.a.CorrectAnswerNotSelected]=n&&!e&&t,i[c.a.IncorrectAnswerSelected]=n&&e&&!t,i))},t.prototype.getAutomatedQuestionFeedback=function(){var e,t;return null===(t=null===(e=this.questionAttempt)||void 0===e?void 0:e.automatedFeedback)||void 0===t?void 0:t.rawText},t.prototype.getCorrectnessColor=function(){return this.isFullCredit()||this.isCorrect()?"correct":this.isPartiallyCorrect()?"partial":"incorrect"},t.prototype.getCorrectnessIcon=function(){return this.isFullCredit()||this.isCorrect()?"check-circle":this.isPartiallyCorrect()?"partial-credit":"close-circle"},t.prototype.getCorrectnessName=function(){return this.isFullCredit()||this.isCorrect()?this.localizeService.translateSync({key:"components.directives.assessment-question.status.correct",locale:this.localizeService.getLocale(this.scope)}):this.isPartiallyCorrect()?this.localizeService.translateSync({key:"components.directives.assessment-question.status.partial",locale:this.localizeService.getLocale(this.scope)}):this.localizeService.translateSync({key:"components.directives.assessment-question.status.incorrect",locale:this.localizeService.getLocale(this.scope)})},t.prototype.isCorrect=function(){return this.questionAttempt.correct},t.prototype.wasAnsweredLate=function(){var e;return!!((null===(e=this.toolAttemptDetailItem)||void 0===e?void 0:e.needAttention())&&this.isAnsweredAfterSoftTimeLimit())},t.prototype.isAnsweredAfterSoftTimeLimit=function(){return this.toolAttemptDetailItem.isAnsweredAfterSoftTimeLimit(this.questionAttempt)},t.prototype.isFullCredit=function(){return this.questionAttempt.question.fullCredit},t.prototype.isPartiallyCorrect=function(){return this.questionAttempt.partiallyCorrect},t.$inject=[],t=Object(o.__decorate)([Object(o.__param)(0,Object(P.b)("$compile")),Object(o.__param)(1,Object(P.b)("$window")),Object(o.__param)(2,Object(P.b)("attrs")),Object(o.__param)(3,Object(P.b)("element")),Object(o.__param)(4,Object(P.b)(g.b)),Object(o.__param)(5,Object(P.b)("scope")),Object(o.__param)(6,Object(P.b)(y.b)),Object(o.__param)(7,Object(P.b)(f.serviceName))],t)}(H),K=function(e){function t(t,n,i,o,s,a,r,c,l,d,u){var p=e.call(this,t,i,o,s,a,r,c,l,u)||this;return p.$compile=t,p.$sce=n,p.$window=i,p.attrs=o,p.element=s,p.gradebookPermissionService=a,p.scope=r,p.timeout=c,p.localizeService=l,p.ultraState=d,p.settingsDefault=u,p.question=p.scope.question,s.append(t(_)(r)),p}return Object(o.__extends)(t,e),t.$inject=[],t=Object(o.__decorate)([Object(o.__param)(0,Object(P.b)("$compile")),Object(o.__param)(1,Object(P.b)("$sce")),Object(o.__param)(2,Object(P.b)("$window")),Object(o.__param)(3,Object(P.b)("attrs")),Object(o.__param)(4,Object(P.b)("element")),Object(o.__param)(5,Object(P.b)(g.b)),Object(o.__param)(6,Object(P.b)("scope")),Object(o.__param)(7,Object(P.b)(y.b)),Object(o.__param)(8,Object(P.b)(f.serviceName)),Object(o.__param)(9,Object(P.b)(w.d))],t)}(H),W=function(e){function t(t,n,i,s,a,r,c,l,d,u,p){var m=e.call(this,t,n,i,a,r,l,d,c,p)||this;m.$compile=t,m.$window=n,m.attrs=i,m.CourseModel=s,m.element=a,m.gradebookPermissionService=r,m.localizeService=c,m.scope=l,m.timeout=d,m.ultraState=u,m.settingsDefault=p,m.readOnly=!1,m.attemptIsDirty=!1,m.suppressAutosave=!1,a.append(t(M)(l)),l.questionAttempt.question.ui=Object(o.__assign)(Object(o.__assign)({},l.questionAttempt.question.ui),{positionId:m.elementId});var g=s.$new(u.params.courseId).gradebook.attempts.$new(m.scope.questionAttempt.attemptId);return m.scope.questionAttempt=g.assessment.answers.$buildRaw(m.scope.questionAttempt),l.$emit("bb-register-question-attempt-handlers",(function(){return m.attemptIsDirty}),(function(){return m.scope.questionAttempt}),m.prepareGivenAnswer),h.a(m.scope,m.scope.questionForm,(function(){m.attemptIsDirty=!0})),m.attemptQuestion=m.scope.questionAttempt.question,m.autoSaveCount=0,m.element.attr("autosaved",m.autoSaveCount),l.$on("bb-assessment-attempt-question-readonly",(function(e,t){m.readOnly=t})),m.initializeGivenAnswer(),m}return Object(o.__extends)(t,e),t.prototype.prepareGivenAnswer=function(e){},t.prototype.persist=function(){var e=this;if(this.scope.questionAttempt.questionType.toString()!==m.A.PresentationOnly.toString())return this.prepareGivenAnswer(this.scope.questionAttempt),this.scope.questionAttempt.$patch(["questionType","givenAnswer","givenAnswers"]).$asPromise().then((function(t){return e.incrementAutoSaveCount(),e.setDirtyAndUpdateGivenAnswer(t)}))},t.prototype.validate=function(){return!0},t.prototype.getCurrentForm=function(){return this.scope.questionForm},t.prototype.getType=function(){return this.attemptQuestion.questionType.toString()},t.prototype.hasGoals=function(){return this.attemptQuestion&&this.attemptQuestion.alignedGoals&&this.attemptQuestion.alignedGoals.length},t.prototype.incrementAutoSaveCount=function(){this.element.attr("autosaved",this.autoSaveCount+=1)},t.prototype.openQuestionGoals=function(){this.ultraState.goPeekState("question-goal-alignment-for-student",{questionId:this.scope.questionAttempt.questionId,questionIndex:this.scope.questionAttempt.visibleQuestionNumber})},t.$inject=[],t=Object(o.__decorate)([Object(o.__param)(0,Object(P.b)("$compile")),Object(o.__param)(1,Object(P.b)("$window")),Object(o.__param)(2,Object(P.b)("attrs")),Object(o.__param)(3,Object(P.b)(u.serviceName)),Object(o.__param)(4,Object(P.b)("element")),Object(o.__param)(5,Object(P.b)(g.b)),Object(o.__param)(6,Object(P.b)(f.serviceName)),Object(o.__param)(7,Object(P.b)("scope")),Object(o.__param)(8,Object(P.b)(y.b)),Object(o.__param)(9,Object(P.b)(w.d))],t)}(H),Q=function(e){function t(t,n,s,a,r,c,l,d,u,p,m,h,g,b,f,v){var y=e.call(this,t,s,a,r,c,l,d,u,v)||this;return y.$compile=t,y.$sce=n,y.$window=s,y.attrs=a,y.element=r,y.gradebookPermissionService=c,y.scope=l,y.timeout=d,y.localizeService=u,y.contextCourse=p,y.$ngRedux=m,y.scheduleTask=h,y.ltiService=g,y.KloudlessModalService=b,y.contextService=f,y.settingsDefault=v,y.isEditing=!1,y.refreshingAnswers=!1,y.saveRegradingQuestion=function(e,t){return Object(o.__awaiter)(y,void 0,void 0,(function(){var n,s=this;return Object(o.__generator)(this,(function(o){return Object($.shouldShowRegradingWarning)(e,t)?this.cancelOrSaveEditingQuestion(i.SAVE):this.cancelOrSaveEditingQuestion(i.SAVE_WITHOUT_REGRADING),this.questionAttempt.question=t,void 0===this.questionAttempt.question.ui&&(this.questionAttempt.question.ui={}),this.questionAttempt.question.ui.prevQuestion=e,this.updateQuestionView(),this.scope.$applyAsync(),this.timeout((function(){s.refreshingAnswers=!1}),this.scope,0),n=t.sourceInfo?t.sourceInfo.id:this.scope.assessmentId(),[2,Object(L.persistQuestion)(e,t,{assessmentId:n,courseId:this.contextCourse.courseId}).then((function(n){if(Object($.shouldShowRegradingWarning)(e,t)){s.scheduleTask.scheduleTask({courseId:s.contextCourse.courseId,taskName:k.a.QuestionRegrading,scope:s.scope.$root,notifier:function(){s.scope.$root.$broadcast(R.a)},delay:1e4},!1)}return n})).catch((function(){s.questionAttempt.question=e,s.destroyEditingQuestion(),s.scope.$applyAsync()}))]}))}))},y.questionTitle=y.localizeService.translateSync({key:"components.directives.assessment-question.question-title",params:{index:y.questionAttempt.visibleQuestionNumber},locale:y.localizeService.getLocale(y.scope)}),y.renderQuestionAttempt(),l.$on(V,(function(e,t){t!==y.scope.index()&&y.isEditing&&y.destroyEditingQuestion()})),y}return Object(o.__extends)(t,e),t.prototype.trustAsHtml=function(e){return this.$sce.trustAsHtml(e)},t.prototype.getQuestionRegradingOverflowMenu=function(){var e=this;return[{icon:"draw",labelKey:"components.directives.attempt-canvas.freeform-response.grade.question.regrade",onClick:function(){return Object(o.__awaiter)(e,void 0,void 0,(function(){return Object(o.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.editRespondedQuestion(this.questionAttempt.question)];case 1:return e.sent(),[2]}}))}))}}]},Object.defineProperty(t.prototype,"isCurrentCourseComplete",{get:function(){return this.contextCourse.course.isComplete()},enumerable:!0,configurable:!0}),t.prototype.updateQuestionView=function(){var e=this.questionAttempt.questionType;L.QuestionType.Essay.isEqualTo(e)&&L.QuestionType.PresentationOnly.isEqualTo(e)||(this.refreshingAnswers=!0,this.constructViewHelper())},t.prototype.getRegradingContainer=function(){return this.element.find(".regrading-container")[0]},t.prototype.destroyEditingQuestion=function(){this.isEditing=!1,T.a.destroyReactControl(this.getRegradingContainer())},t.prototype.cancelOrSaveEditingQuestion=function(e){this.destroyEditingQuestion(),this.scope.$emit(z,e)},t.prototype.renderQuestionAttempt=function(){this.element.append(this.$compile(j)(this.scope))},t.prototype.editRespondedQuestion=function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(o.__generator)(this,(function(i){switch(i.label){case 0:return this.closeOtherEditing(),this.isEditing=!0,[4,this.buildQuestionProps(e)];case 1:return t=i.sent(),this.timeout((function(){T.a.renderQuestion(n.getRegradingContainer(),n.$ngRedux,n.localizeService.getLocale(n.scope),n.localizeService.intl,n.localizeService.frmt,t,n.contextCourse.course.isOrganization,(function(){n.element.find(".grade").find("input").focus()}))}),this.scope,0),[2]}}))}))},t.prototype.closeOtherEditing=function(){this.scope.$emit(N,this.scope.index())},t.prototype.buildPluginsConfig=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e;return Object(o.__generator)(this,(function(t){switch(t.label){case 0:return(e={}).contentMarket={apiBasePath:Object(G.c)(E.a.apiBasePath),babelfishInstance:this.localizeService.intl,babelfishFormatInstance:this.localizeService.frmt,getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService),locale:this.localizeService.getLocale(this.scope),openContentMarket:this.ltiService.getOpenContentMarketConf(this.scope),xsrfToken:this.contextService.xsrfToken},[4,this.KloudlessModalService.initialize()];case 1:return t.sent(),this.KloudlessModalService.isCloudServiceAvailable&&(e.insertKloudlessFile={openKloudlessModal:this.KloudlessModalService.getModalCallback(this.scope)}),e.insertYoutubeVideo={babelfishInstance:this.localizeService.intl,babelfishFormatInstance:this.localizeService.frmt,courseId:this.contextCourse.courseId,getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService)},[2,e]}}))}))},t.prototype.buildQuestionProps=function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n,s=this;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=Object.assign(e,{assessmentId:this.scope.assessmentId(),permissions:{edit:!0}}),L.QuestionType.Matching.isEqualTo(e.questionType)&&e.answers.forEach((function(e){e.ui={id:Object(v.b)()}})),n={courseId:this.contextCourse.courseId,persistQuestion:this.saveRegradingQuestion,deleteQuestion:a.noop,openGoals:a.noop,onQuestionMadeDirty:a.noop,question:t},[4,this.buildPluginsConfig()];case 1:return[2,(n.pluginsConfig=o.sent(),n.questionBeingEditedId=e.id,n.onQuestionEdit=a.noop,n.isAnyQuestionDirty=!1,n.hasSubmissions=!0,n.questionTitle=this.questionTitle,n.hasQuestionEditPermissions=!0,n.onQuestionEditCancel=function(){s.cancelOrSaveEditingQuestion(i.CANCEL)},n)]}}))}))},t.prototype.allowCollapsingOfAutomatedFeedbackIfShown=function(){return!0},t.prototype.canShowCorrectAnswerRelatedDetail=function(){return!this.refreshingAnswers},t.prototype.canShowQuestionScoreRelatedDetail=function(){return p.AttemptStatus.Completed.isEqualTo(this.questionAttempt.attemptStatus)},t.$inject=[],t=Object(o.__decorate)([Object(o.__param)(0,Object(P.b)("$compile")),Object(o.__param)(1,Object(P.b)("$sce")),Object(o.__param)(2,Object(P.b)("$window")),Object(o.__param)(3,Object(P.b)("attrs")),Object(o.__param)(4,Object(P.b)("element")),Object(o.__param)(5,Object(P.b)(g.b)),Object(o.__param)(6,Object(P.b)("scope")),Object(o.__param)(7,Object(P.b)(y.b)),Object(o.__param)(8,Object(P.b)(f.serviceName)),Object(o.__param)(9,Object(P.b)(C.e)),Object(o.__param)(10,Object(P.b)("$ngRedux")),Object(o.__param)(11,Object(P.b)(k.c)),Object(o.__param)(12,Object(P.b)(x.c)),Object(o.__param)(13,Object(P.b)(A.b)),Object(o.__param)(14,Object(P.b)(S.b))],t)}(q),J=function(e){function t(t,n,i,o,s,a,r,c,l,d,u){var p=e.call(this,t,i,o,s,a,r,c,d,u)||this;return p.$compile=t,p.$sce=n,p.$window=i,p.attrs=o,p.element=s,p.gradebookPermissionService=a,p.scope=r,p.timeout=c,p.ultraState=l,p.localizeService=d,p.settingsDefault=u,p.attemptQuestion=p.questionAttempt.question,s.append(t(_)(r)),p}return Object(o.__extends)(t,e),t.prototype.trustAsHtml=function(e){return this.$sce.trustAsHtml(e)},t.prototype.hasGoals=function(){return this.attemptQuestion&&this.attemptQuestion.alignedGoals&&this.attemptQuestion.alignedGoals.length},t.prototype.openQuestionGoals=function(){this.ultraState.goPeekState("question-goal-alignment-for-student",{questionId:this.questionAttempt.questionId,questionIndex:this.questionAttempt.visibleQuestionNumber})},t.prototype.allowCollapsingOfAutomatedFeedbackIfShown=function(){return!1},t.prototype.canShowCorrectAnswerRelatedDetail=function(){return B.a.studentCanViewAttemptResults(this.attempt)&&this.questionAttempt.isCorrectAnswersVisible},t.prototype.canShowQuestionScoreRelatedDetail=function(){return B.a.studentCanViewAttemptResults(this.attempt)&&this.questionAttempt.isScoreVisible},t.prototype.wasAnsweredLate=function(){return this.canShowQuestionScoreRelatedDetail()&&e.prototype.wasAnsweredLate.call(this)},t.$inject=[],t=Object(o.__decorate)([Object(o.__param)(0,Object(P.b)("$compile")),Object(o.__param)(1,Object(P.b)("$sce")),Object(o.__param)(2,Object(P.b)("$window")),Object(o.__param)(3,Object(P.b)("attrs")),Object(o.__param)(4,Object(P.b)("element")),Object(o.__param)(5,Object(P.b)(g.b)),Object(o.__param)(6,Object(P.b)("scope")),Object(o.__param)(7,Object(P.b)(y.b)),Object(o.__param)(8,Object(P.b)(w.d)),Object(o.__param)(9,Object(P.b)(f.serviceName))],t)}(q)},De5J:function(e,t,n){},E7GM:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="grade-grid-group-confirm-dialog" aria-haspopup="true" role="dialog">\n  <div class="message-wrapper">\n    <div class="message">\n      <span bb-translate>components.directives.grade.grid.confirmContent</span>\n    </div>\n    <div class="buttons">\n      <button class="button" \n              ng-click="saveGroup()" \n              bb-translate  \n              analytics-id="components.directives.grade.grid.yes">components.directives.grade.grid.yes</button>\n      <button class="button button--secondary" \n              ng-click="saveOne()" \n              ng-disabled="isSaveOneDisabled" \n              analytics-id="components.directives.grade.grid.no"\n              bb-translate>components.directives.grade.grid.no</button>\n    </div>\n  </div>\n</div>'},EGJL:function(e,t){e.exports='<div ng-class="{\'is-restricted\': graderColumn.column.isHidden() && !graderColumn.column.externalGrade, \'grader-column\': true}">\n  <div class="row tabular-row js-row grader-column-item" bb-click-to-invoke-child="a.bb-click-target" aria-describedby="guidance-moment-grade-click">\n    <div ng-class="{\'medium-5\': !graderColumn.isCourseView, \'medium-4\': graderColumn.isCourseView}" class="columns">\n      <div class="element-card">\n        <div bb-content-item-icon show-alert-icon="graderColumn.showAlertIcon()" content-column="graderColumn.column" class="element-image" ng-if="graderColumn.column"></div>\n        <div class="element-details">\n          <div ng-class="{\'gradebook-overall-grade-title\': graderColumn.column.externalGrade}">\n            <bb-svg-icon\n              id="{{graderColumn.column.id + \'grade-not-visible-icon\'}}"\n              size="small"\n              ng-if="graderColumn.column.externalGrade && !graderColumn.column.visible"\n              icon="invisible"\n              class="visibility-icon"\n              role="img"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n            ></bb-svg-icon>\n            <span class="name ellipse" ng-if="graderColumn.itemLinkIsClickable">\n              <a  class="bb-click-target"\n                  ng-click="graderColumn.handleColumnClick()"\n                  href="javascript:void(0);"\n                  bb-key-hide-ftue="grades.grader.base.column.clickItem"\n                  id="{{\'graderColumn_\' + graderColumn.course.courseId}}"\n                  analytics-id="components.directives.grade.graderColumn.name.link"\n                  ng-attr-aria-describedby="{{graderColumn.column.externalGrade && !graderColumn.column.visible ? graderColumn.column.id + \'grade-not-visible-icon\' : undefined}}">\n                  {{graderColumn.column.columnName}}\n              </a>\n            </span>\n          </div>\n          <span class="name ellipsis" ng-if="!graderColumn.itemLinkIsClickable">\n            <span id="{{ \'graderColumn_\' + graderColumn.course.courseId}}">{{graderColumn.column.columnName}}</span>\n          </span>\n          <div class="name-controls" ng-if="::!graderColumn.column.isOffline()">\n            <span class="secondary-text" ng-if="::graderColumn.column.seemsAttemptBased()">\n              <span ng-if="graderColumn.column.dueDate && graderColumn.numMissingStudents">\n                <span class="items-missing" bb-translate translate-values="{missingCount: graderColumn.numMissingStudents}">components.directives.grade.grader-column.studentsMissing.plural</span>\n                <span ng-if="!graderColumn.column.isOffline()">|</span>\n              </span>\n              <span ng-if="graderColumn.column.summary.numStudentSubmissions && graderColumn.column.summary.numEligibleToBeGraded">\n                <bb-translate ng-if="graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{participatedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsParticipated.plural</bb-translate>\n                <bb-translate ng-if="!graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{submittedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsSubmitted.plural</bb-translate>\n              </span>\n            </span>\n            <span class="secondary-text" ng-if="::graderColumn.column.isAttendance() && graderColumn.column.summary.averageGradeForStudents">\n                <span bb-translate translate-values="{percentage: graderColumn.column.summary.averageGradeForStudents}">components.directives.grade.grader-column.attendance.average</span>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="graderColumn.isCourseView" class="date columns medium-2 large-2 hide-for-small-only">\n      <bb-datetime ng-if="!graderColumn.column.isAttendance()" format="Short" value="graderColumn.column.dueDate">\n      </bb-datetime>\n      <span ng-if="graderColumn.column.isAttendance()" bb-translate>components.directives.grade.grader-column.attendance.ongoing</span>\n    </div>\n\n    <div ng-class="{\'grade-status-container columns medium-7\': !graderColumn.isCourseView, \'columns medium-5 course-only-grade-status-container\': graderColumn.isCourseView}">\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}" ng-if="!graderColumn.column.isAttendance()">\n        <div ng-switch="graderColumn.column.isCollectExternalSubmissions()">\n          \x3c!-- External submission statuses are calculated differently from others since the instructor is initiating the attempt\n          when they go to grade the user. Therefore, we want to include people who have no submission as ready to be graded //--\x3e\n          <div ng-switch-when="true">\n            <div ng-switch="graderColumn.column.summary.getStatus().toString()">\n              <div class="grade-count" ng-switch-when="NEEDS_GRADING">\n                <span bb-translate translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0">|</span>\n                <span class="grade-posted-count-before" ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0"\n                      bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">\n                  components.directives.grade.grader-column.statuses.numToPost.plural\n                </span>\n              </div>\n              <span ng-switch-when="NEEDS_POSTING">\n                <span bb-translate ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0"\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0">|</span>\n                <span bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">\n                  components.directives.grade.grader-column.statuses.numToPost.plural\n                </span>\n              </span>\n              <span ng-switch-when="ALL_GRADED">\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.allGraded\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                <span bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span ng-switch-when="NOTHING_TO_GRADE">\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.nothingToGrade\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </div>\n          </div>\n          <div ng-switch-default>\n            <div ng-switch="graderColumn.column.summary.getStatus().toString()" ng-if="::!graderColumn.column.isCalculated()">\n              <div class="grade-count js-grade-progress-needs-grading" ng-switch-when="NEEDS_GRADING">\n                <span ng-if="::graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.column.summary.numStudentsNeedsGrading}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="::!graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.getNumberOfSubmissionsNeedsGrading()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0">|</span>\n                <span class="grade-posted-count-before" ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0" bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">components.directives.grade.grader-column.statuses.numToPost.plural</span>\n              </div>\n              <span class="js-grade-progress-needs-posting" ng-switch-when="NEEDS_POSTING" bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">components.directives.grade.grader-column.statuses.numToPost.plural</span>\n              <span class="js-grade-progress-all-graded" ng-switch-when="ALL_GRADED" bb-translate>components.directives.grade.grader-column.statuses.allGraded</span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                <span bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span class="js-grade-progress-nothing-to-show" ng-switch-when="NOTHING_TO_GRADE" bb-translate>components.directives.grade.grader-column.statuses.nothingToGrade</span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </div>\n            <div ng-if="::graderColumn.column.isCalculated()">\x3c!-- Needed for spacing --\x3e</div>\n          </div>\n        </div>\n      </div>\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}"\n           ng-if="graderColumn.column.isAttendance()" bb-translate>\n        components.directives.grade.grader-column.attendance.markAttendance\n      </div>\n      <div class="grade-status" ng-class="{\'columns medium-5 course-only-grade-status\': graderColumn.isCourseView}">\n        <div ng-if="::!graderColumn.column.isCalculated()">\n          <div ng-if="!graderColumn.course.isComplete() && graderColumn.column.summary.hasGradesToPost() && graderColumn.canPostGrades" class="post">\n            <button class="button button--secondary send-grade" bb-confirmation-needed="{{graderColumn.grade.getPostAllGradeConfirmationNeededStringsKey(graderColumn.column)}}"\n                    modal-aria-type="alertdialog" show-type="always" ng-click="graderColumn.postGrades()"\n                    bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.postGrades\'}"\n                    translate-attrs-values="{courseName: graderColumn.course.name, columnName: graderColumn.column.columnName}"\n                    bb-translate="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGrades\' : \'components.directives.grade.grader-column.actions.basePostGrades\'}}"\n                    analytics-id="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGrades\' : \'components.directives.grade.grader-column.actions.basePostGrades\'}}" >\n            </button>\n          </div>\n        </div>\n        <div ng-if="::graderColumn.column.isCalculated()">\x3c!-- Needed for spacing --\x3e</div>\n      </div>\n    </div>\n    <div ng-if="(graderColumn.showOverflowMenu || graderColumn.showDragControls) && !graderColumn.isRestrictedGroupContent"\n        class="columns medium-1 large-1 last-row-item item-controls dots" bb-foundation-defer>\n\n      \x3c!-- disable if its a group and has user is not entitled --\x3e\n      <button bb-drag-handle ng-if="graderColumn.showDragControls"\n              drag-item-id="{{::graderColumn.column.id}}"\n              drag-item-name="{{graderColumn.column.columnName}}"\n              class="super-clear small button icon js-drag-handle drag-drop-button"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.reorder-grader-item\', \'title\': \'components.directives.grade.grader-column.aria-label.move-tip\'}"\n              translate-attrs-values="{columnName: graderColumn.column.columnName}"\n              analytics-id="components.directives.grade.graderColumn.reorderItem.button" >\n        <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n      </button>\n\n      \x3c!-- disable if its a group and has user is not entitled --\x3e\n      <div ng-if="graderColumn.showOverflowMenu" class="overflow-menu-container right">\n        <bb-overflow-menu element-id="{{graderColumn.overflowMenuId}}"\n                          element-name="{{graderColumn.column.columnName}}"\n                          menu-items="graderColumn.getOverflowMenuItems()"\n                          analytics-id-tag-prefix="components.directives.grade.grader-column.overflowMenu">\n        </bb-overflow-menu>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="graderColumn.showConversionMessage">\n    <bb-course-access-alert course="course"\n                            alert-type="graderColumn.getAlertType()"\n                            confirm-callback="graderColumn.closeConversionTooltip()"\n                            timeout-callback="graderColumn.closeConversionTooltip()">\n    </bb-course-access-alert>\n  </div>\n</div>\n<bb-add-content-button\n                      position-after="graderColumn.column.id" item-name="graderColumn.column.columnName"\n                      context-area="graderColumn.contextArea"\n                      ng-if="graderColumn.isCourseView && !graderColumn.course.isComplete() && graderColumn.canModify"\n                      show-add-attendance="attendanceIsAvailable() && !attendanceColumnExists()">\n</bb-add-content-button>\n'},ELoy:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("px9Z"),n("De5J"),n("GkCm");var i=n("wHJ2"),o=n("lEL+"),s=n("6sUD"),a="ultra.directives.telemetry.panel.header",r=function(){function e(t,n){var i=this;this.scope=t,this.timeout=n,this.showSpinner=!1,this.spinnerTimeout=this.timeout((function(){i.showSpinner=!0}),this.scope,e.WAIT_TIME_TO_SHOW_SPINNER),this.scope.$watch("::panelDataLoaded()",(function(e){e&&i.dataLoaded()}))}return e.prototype.dataLoaded=function(){this.timeout.cancel(this.spinnerTimeout),this.showSpinner=!1},e.$inject=["scope",o.b],e.WAIT_TIME_TO_SHOW_SPINNER=1e3,e}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=s,this.transclude=!0,this.scope={course:"&",panelDataLoaded:"&",titleKey:"@?",title:"@?",buttonOneIcon:"@",buttonOneCallback:"&",buttonOneAriaLabel:"@",buttonOneTitle:"@",buttonTwoIcon:"@",buttonTwoCallback:"&",buttonTwoAriaLabel:"@",buttonTwoTitle:"@"},this.link=function(e){e.telemetryPanelHeader=t.$injector.instantiate(r,{scope:e})}}return e.$inject=["$injector"],e}();i.module(a,[]).directive("bbTelemetryPanelHeader",["$injector",function(e){return e.instantiate(c)}])},Ed3w:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return i}));var i,o=n("D57K"),s=n("wHJ2"),a=n("pjml"),r=n("lEL+"),c=n("nsO7"),l="ultra.services.schedule-task",d="schedule-task";!function(e){e.QuestionRegrading="regradingTasks"}(i||(i={}));var u=new Map,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(t,e),t}(function(){function e(e,t){this.timeout=e,this.scheduleTaskModel=t}return e.prototype.scheduleTask=function(e,t){var n=this,i=e.courseId,o=e.taskName,a=e.scope,r=e.notifier,l=void 0===r?c.noop:r,d=e.delay,p=void 0===d?2e3:d;void 0===t&&(t=!1);var m=u.get(i);if(!m||!m.has(o)){s.isUndefined(m)&&(m=new Set),u.set(i,m.add(o));var h=function(e){l(e),m.delete(o)};a.$on("$destroy",(function(){m.delete(o)})),t?this.timedTask({courseId:i,taskName:o,scope:a,notifier:h,delay:p}):this.fireInitialRequest(i,o).then((function(e){n.hasInCompleteTasks(e)&&s.isDefined(a)?n.timedTask({courseId:i,taskName:o,scope:a,notifier:h,delay:p}):h(!0)}))}},e.prototype.timedTask=function(e){var t=this,n=e.courseId,i=e.taskName,o=e.scope,s=e.notifier,a=void 0===s?c.noop:s,r=e.delay;this.timeout((function(){t.requestTask(n,i).then((function(e){t.hasInCompleteTasks(e)?t.timedTask({courseId:n,taskName:i,scope:o,notifier:a,delay:r}):a(!1)}))}),o,r)},e.prototype.fireInitialRequest=function(e,t){return this.requestTask(e,t)},e.prototype.requestTask=function(e,t){return this.scheduleTaskModel.$collection().$fetch({courseId:e,filterBy:t}).$asPromise()},e.prototype.hasInCompleteTasks=function(e){return e.some((function(e){return!a.rb.QueueTaskStatus.CompleteErrors.isEqualTo(e.taskStatus)&&!a.rb.QueueTaskStatus.Complete.isEqualTo(e.taskStatus)}))},e.$inject=[r.b,a.rb.serviceName],e}());s.module(l,[r.a]).service(d,p)},Efpj:function(e,t){e.exports='<div class="grades-list instructor-wrapper">\n  <div class="row tabular-list-header course-grades-column-headers" ng-if="courseGradesGraderList.columns.length > 0">\n    <div class="columns small-6 medium-4 large-4 tabular-list-header-offset"><span bb-translate>components.directives.grade.course-grades-grader-list.headers.name</span></div>\n    <div class="columns hide-for-small-only medium-2 large-2"><span bb-translate>components.directives.grade.course-grades-grader-list.headers.dueDate</span></div>\n    <div class="columns hide-for-small-only medium-3 large-3 end course-grades-column-progress-header"><span bb-translate>components.directives.grade.course-grades-grader-list.headers.progress</span></div>\n  </div>\n\n\n  <div bb-mouse-leave-enter="course-gradebook">\n\n    <bb-add-content-button position-before="\'start\'" item-name="courseGradesGraderList.columns[0].columnName"\n                           context-area="courseGradesGraderList.contextArea"\n                           show-menu-override="!courseGradesGraderList.hasColumns"\n                           always-show="isFirst"\n                           show-add-attendance="attendanceIsAvailable() && !courseGradesGraderList.attendanceColumnExists"\n                           ng-if="courseGradesGraderList.contextArea && !course().isComplete() && courseGradesGraderList.canModify" bb-key-hide-ftue="grades.grader.course.column.add"></bb-add-content-button>\n    \x3c!-- set keep-guidance-when-focusout to be true then add bb-key-hide-ftue="grades.grader.course.column.add" on its preceding element --\x3e\n    <div bb-guidance-target component-key="grades.grader.course.column.add" keep-guidance-when-focusout="true" aria-describedby="guidance-moment-grade-add"></div>\n\n    <bb-guidance id="guidance-moment-grade-add" component-key="grades.grader.course.column.add"\n                 class="grades-list-guidance guidance-element-overlay" role="tooltip">\n      <bb-translate>components.directives.grade.course-grades-grader.ftue.add</bb-translate>\n    </bb-guidance>\n\n    <div class="grade-list-columns">\n      <div class="drag-element" ng-class="{\'no-hover\': (course().isComplete() || (column.isAttendance() && !attendanceIsAvailable)), \'last-tabular-row-container\': $last}"\n           ng-repeat="column in courseGradesGraderList.columns track by column.id" bb-content-item-mouseover>\n        <div bb-drop-handler on-move-handler="courseGradesGraderList.onMoveGraderItem" content="column"\n             next-content-id="courseGradesGraderList.columns[$index+1].id"\n             previous-content-id="courseGradesGraderList.columns[$index-1].id">\n\n          <bb-grader-column column="column"\n                            course="course()"\n                            is-course-view="true"\n                            category-map="courseGradesGraderList.categoryMap"\n                            attendance-column-exists="courseGradesGraderList.attendanceColumnExists"\n                            attendance-is-available="attendanceIsAvailable()">\n          </bb-grader-column>\n        </div>\n      </div>\n    </div>\n\n    <bb-setup-overall-grade ng-if="showSetupOverallColumn && courseGradesGraderList.canModify"></bb-setup-overall-grade>\n  </div>\n</div>\n'},Et3n:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),o=n("0JpG"),s=n("yC9S"),a=n("dL5/"),r="ultra.directives.group.group-count";!function(){function e(){}e.prototype.$onInit=function(){},e.prototype.isSelfEnrollment=function(){return!!(this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0)&&this.content.selfEnrollmentGroups.some((function(e){return e.group&&!e.group.groupSetId}))},e=Object(i.__decorate)([Object(s.a)({moduleName:r,componentName:"bbGroupCount",template:a,bindings:{content:"<"},requireModules:[o.moduleName]})],e)}()},FH9J:function(e,t){e.exports='<div ng-switch="$ctrl.icon">\n  <bb-ui-icon-assignment ng-switch-when="assignment" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-assignment>\n  <bb-ui-icon-attendance ng-switch-when="attendance" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-attendance>\n  <bb-ui-icon-audio ng-switch-when="audio" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-audio>\n  <bb-ui-icon-blog ng-switch-when="blog" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-blog>\n  <bb-ui-icon-calculation ng-switch-when="calculation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-calculation>\n  <bb-ui-icon-discussion ng-switch-when="discussion" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-discussion>\n  <bb-ui-icon-document-blank ng-switch-when="document-blank" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-blank>\n  <bb-ui-icon-document-text ng-switch-when="document-text" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-text>\n  <bb-ui-icon-folder ng-switch-when="folder|folder-open" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-folder>\n  <bb-ui-icon-homework ng-switch-when="homework" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-homework>\n  <bb-ui-icon-journal ng-switch-when="journal" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-journal>\n  <bb-ui-icon-learning-module ng-switch-when="learning-module" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-learning-module>\n  <bb-ui-icon-link ng-switch-when="link" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-link>\n  <bb-ui-icon-lti ng-switch-when="lti" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-lti>\n  <bb-ui-icon-overall-grade ng-switch-when="overall-grade" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-overall-grade>\n  <bb-ui-icon-pdf ng-switch-when="pdf" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-pdf>\n  <bb-ui-icon-photo ng-switch-when="photo" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-photo>\n  <bb-ui-icon-presentation ng-switch-when="presentation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-presentation>\n  <bb-ui-icon-scormengine ng-switch-when="scormengine" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-scormengine>\n  <bb-ui-icon-spreadsheet ng-switch-when="spreadsheet" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-spreadsheet>\n  <bb-ui-icon-survey ng-switch-when="survey" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-survey>\n  <bb-ui-icon-test ng-switch-when="test|quiz|exam" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-test>\n  <bb-ui-icon-textbook ng-switch-when="textbook" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-textbook>\n  <bb-ui-icon-video ng-switch-when="video" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-video>\n  <bb-ui-icon-zip ng-switch-when="zip" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-zip>\n  <bb-ui-icon-document-blank ng-switch-default color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-blank>\n</div>'},FwQ6:function(e,t){e.exports='<form name="{{::\'top_grading_bar\' + attempt.id}}">\n  <div class="multiple-submissions-grading-bar attempt-grading-bar" ng-class="{\'add-comment-expanded\': gradingBar.gradingCommentHandler.commentPanelOpen}" bb-foundation-defer>\n    <div\n      class="attempt-grading-bar-inner"\n      bb-click-to-invoke-child="a.attempt-info-container"\n      ng-class="{\'attempt-status-message-visible\': attemptStatus}"\n      ng-switch="gradingBar.hasPeekState()">\n\n      <a  href="javascript:void(0);"\n          class="attempt-info-container"\n          ng-switch-when="true"\n          ng-click="gradingBar.goToPeekState()"\n          analytics-id="components.directives.grade.gradingBar.goToPeekState.link"\n      >\n        <i class="icon submission-type-icon" bb-content-item-icon content-column="::column()"></i>\n        <div class="attempt-info">\n          <span class="name ellipsis" ng-bind-html="::gradingBar.label"></span>\n            <span class="submission-details-wrap" ng-if="attempt">\n              \x3c!--submitted on time but not graded/posted--\x3e\n              <span class="details ellipsis submitted js-submitted-date" ng-if="!gradingBar.isSubmittedLate() && attempt.isPrePostGrade()" bb-translate translate-values="{date: attempt.attemptDate}">\n                components.directives.grade.grading-bar.submit-date-without-timezone\n              </span>\n              \x3c!--submitted late but not yet graded/posted--\x3e\n              <span ng-if="gradingBar.isSubmittedLate() && attempt.isPrePostGrade()" class="show-hide-on-hover">\n                <span class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                  components.directives.grade.grading-bar.submit-late-date-without-timezone\n                </span>\n                <span class="details ellipsis hide-on-hover text-alert-ax js-submitted-late-date" bb-translate translate-values="{lateness: gradingBar.localizedLateness}">\n                  components.directives.grade.grading-bar.submit-lateness\n                </span>\n              </span>\n              \x3c!--attempt has been graded/posted--\x3e\n              <span ng-if="attempt.isDisplayablePostedGrade()" class="show-hide-on-hover">\n              \x3c!--submitted on time--\x3e\n                <span ng-if="gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                  components.directives.grade.grading-bar.submit-late-date-without-timezone\n                </span>\n                \x3c!--submitted late--\x3e\n                <span ng-if="!gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover js-submitted-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n                  components.directives.grade.grading-bar.submit-date-without-timezone\n                </span>\n                <span class="details ellipsis hide-on-hover posted js-posted-indicator" bb-translate translate-values="{date: attempt.attemptLastGradedDate || \'\'}">\n                  components.directives.grade.grading-bar.posted-without-timezone\n                </span>\n              </span>\n            </span>\n        </div>\n      </a>\n      <i ng-switch-default class="icon submission-type-icon" bb-content-item-icon content-column="::column()"></i>\n      <div ng-switch-default class="attempt-info">\n        <span class="name ellipsis" ng-bind-html="gradingBar.label"></span>\n        <span class="submission-details-wrap" ng-if="attempt">\n          \x3c!--submitted on time but not graded/posted--\x3e\n          <span class="details ellipsis submitted js-submitted-date" ng-if="!gradingBar.isSubmittedLate() && attempt.isPrePostGrade()" bb-translate translate-values="{date: attempt.attemptDate}">\n            components.directives.grade.grading-bar.submit-date\n          </span>\n          \x3c!--submitted late but not yet graded/posted--\x3e\n          <span ng-if="gradingBar.isSubmittedLate() && attempt.isPrePostGrade()" class="show-hide-on-hover">\n            <span class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n              components.directives.grade.grading-bar.submit-late-date\n            </span>\n            <span class="details ellipsis hide-on-hover text-alert-ax js-submitted-late-date" bb-translate translate-values="{lateness: gradingBar.localizedLateness}">\n              components.directives.grade.grading-bar.submit-lateness\n            </span>\n          </span>\n          \x3c!--attempt has been graded/posted--\x3e\n          <span ng-if="attempt.isDisplayablePostedGrade()" class="show-hide-on-hover">\n            \x3c!--submitted late--\x3e\n            <span ng-if="gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n              components.directives.grade.grading-bar.submit-late-date\n            </span>\n            \x3c!--submitted on time--\x3e\n            <span ng-if="!gradingBar.isSubmittedLate()" class="details ellipsis submitted show-on-hover js-submitted-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n              components.directives.grade.grading-bar.submit-date\n            </span>\n            <span class="details ellipsis hide-on-hover posted js-posted-indicator" bb-translate translate-values="{date: attempt.attemptLastGradedDate || \'\'}">\n              components.directives.grade.grading-bar.posted\n            </span>\n          </span>\n        </span>\n        \x3c!-- BEGIN Enhance time limit --\x3e\n        <span class="information-about-time-limit show-hide-on-hover" ng-if="gradingBar.isShowExtraTime()">\n          <span class="exceeded-time attention hide-on-hover details small-medium-show">{{gradingBar.getExceedTime()}}</span>\n          <span class="questions-answered-correctly-after-time-limit attention show-on-hover details small-medium-hide" bb-translate translate-values="{count: gradingBar.getQuestionsAnsweredAfterSoftTimeLimit().length}">\n            components.directives.grade.grading-bar.questions-answered-after-soft-time-limit.plural\n          </span>\n        </span>\n        \x3c!--  END  Enhance time limit --\x3e\n      </div>\n\n      <div class="attempt-status-container" ng-if="attemptStatus">{{attemptStatus}}</div>\n\n      <div class="attempt-grading-actions">\n        \x3c!-- There is no override for non-group attempt grade. Therefore, if save-as-override is true, make the pill read-only --\x3e\n        <bb-user-attempt-grade-input\n          class="pill-spacing"\n          ng-class="{\'has-feedback\': (gradingBar.canEnterGrades || gradingBar.canEnterFeedback || gradingBar.gradingCommentHandler.hasComment()) && !disableFeedbackButtons}"\n          ng-hide="hideGrade()"\n          id="{{::\'attempt_\' + attempt.id}}"\n          readonly="::(!gradingBar.canEnterGrades || saveAsOverride())"\n          column="::column()"\n          attempt="attempt"\n          for-user="::user()"\n          disable-rubric-eval-click="disableRubricAction()">\n        </bb-user-attempt-grade-input>\n\n        \x3c!--When no comments exist this is either an \'add comment\' or \'empty comment\' button, otherwise it functions as a toggle button to bring the comments in/out of view--\x3e\n        <button class="toggle-comments-button"\n                ng-if="gradingBar.showCommentIcon() && !disableFeedbackButtons"\n                ng-click="gradingBar.openFeedbackPanel()"\n                ng-switch="gradingBar.getCommentIconType()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grading-bar.instructor-comments.aria-label.comments-toggle-button\'}"\n                analytics-id="components.directives.grade.gradingBar.instructorComments.toggle.button">\n          <bb-svg-icon ng-switch-when="add" size="medium" icon="add-feedback"></bb-svg-icon>\n          <bb-svg-icon ng-switch-when="view" ng-show="gradingBar.hasComment()" size="medium" icon="feedback" status="active"></bb-svg-icon>\n          <bb-svg-icon ng-switch-default size="medium" icon="feedback"></bb-svg-icon>\n        </button>\n        <bb-overflow-menu ng-show="gradingBar.showOverflowMenu()"\n                          element-id="{{\'attempt-menu-open-button_\' + attempt.id}}"\n                          element-name="{{gradingBar.getLocalizedTextByKey(\'components.directives.grade.grading-bar.grade\')}}"\n                          menu-items="gradingBar.getOverflowMenuItems()"\n                          analytics-id-tag-prefix="components.directives.grade.grading-bar.multipleSubmissions.overflowMenu">\n        </bb-overflow-menu>\n      </div>\n    </div>\n  </div>\n</form>\n'},Gg10:function(e,t,n){},GkCm:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-main-menu",use:"icon-small-main-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-main-menu"><path d="M1 3h14M15 8H1M1 13h14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},GwhK:function(e,t){e.exports='<div class="typeahead-search" bb-click-outside="typeaheadSearchBox.onClickOutside()" is-active="true" bb-load-bundle="components/directives/typeahead">\n  <label for="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}">\n    <bb-svg-icon ng-if="::typeaheadSearchBox.icon" icon="{{::typeaheadSearchBox.icon}}" size="small" class="magnifying-glass"></bb-svg-icon>\n    <span ng-if="::typeaheadSearchBox.srLabel" class="sr-only" bb-translate="{{::typeaheadSearchBox.srLabel}}"></span>\n  </label>\n  <input aria-describedby="requiredPrompt" type="text" id="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}"\n         ng-model="typeaheadSearchBox.searchValue"\n         ng-model-options="{ debounce: 250 }"\n         role="combobox"\n         aria-activedescendant="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-0"\n         aria-autocomplete="list"\n         aria-owns="typeahead-search-autocomplete"\n         name="typeaheadSearchBox"\n         autocomplete="off"\n         ng-keydown="typeaheadSearchBox.onInputBoxKeyDown($event)"\n         ng-click="typeaheadSearchBox.onInputBoxClick($event)"\n         ng-change="typeaheadSearchBox.onSearchValueChange()"\n         ng-focus="typeaheadSearchBox.onFocusInputBox($event)"\n         bb-translate-attrs="{\'placeholder\': \'{{typeaheadSearchBox.inputPlaceholder}}\'}"\n         class="truncated"\n         ng-class="{\'not-empty with-clear-btn\': typeaheadSearchBox.searchValue, \'empty\': !typeaheadSearchBox.searchValue,\n                    \'with-icon\': typeaheadSearchBox.icon, \'is-active\': typeaheadSearchBox.isFocus}"\n         analytics-id="components.directives.typeheadSearchBox.input.text"/>\n    <button class="typeahead-clear-button" bb-translate-attrs="{\'aria-label\': \'{{typeaheadSearchBox.clearAriaLabel}}\'}"\n            tabindex="0"\n            ng-show="typeaheadSearchBox.searchValue"\n            ng-click="typeaheadSearchBox.clear()"\n            ng-focus="typeaheadSearchBox.onFocusClearBtn($event)"\n            ng-blur="typeaheadSearchBox.onBlurClearBtn($event)"\n            analytics-id="components.directives.typeheadSearchBox.clearAriaLabel.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  <span id="requiredPrompt" class="sr-only" bb-translate="{{::typeaheadSearchBox.srEmptyResults}}"></span>\n  <div id="typeahead-search-autocomplete" class="typeahead-search-autocomplete adding"\n       ng-if="typeaheadSearchBox.showResults"\n       role="listbox"\n       tabindex="-1">\n    <div class="typeahead-search-entry" ng-repeat="item in typeaheadSearchBox.searchResults"\n         role="option"\n         tabindex="-1"\n         id="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-{{$index}}"\n         ng-keydown="typeaheadSearchBox.onResultEntryKeyDown($event, item)"\n         ng-click="typeaheadSearchBox.onResultEntryClick($event, item)"\n         analytics-id="components.directives.typeheadSearchBox.onResultEntryClick">\n      <typeahead-inject></typeahead-inject>\n    </div>\n  </div>\n</div>'},"H/mg":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),o=n("wHJ2"),s=n("ERkP"),a=n("1ZbL"),r=n("Dz4E"),c="ultra.components.directives.react-toolkit.contextual-menu",l={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.show?s.createElement(r.ContextualMenu,{items:this.props.items,directionalHint:this.props.directionalHint,target:document.getElementById(this.props.targetId),onDismiss:this.props.dismiss,labelElementId:this.props.ariaLabelledby,analyticsId:this.props.analyticsId}):null},t}(s.Component),bindingNames:["items","targetId","show","dismiss","directionalHint"],attributes:["ariaLabelledby","analyticsId"]};o.module(c,[]).component("bbUiContextualMenu",Object(a.a)(l))},HCOL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("OhrW"),s="ultra.components.directives.bbUiIcon.DocumentText";Object(i.a)(o.DocumentText,s,"bbUiIconDocumentText")},HGKz:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("Ul6e"),s="ultra.components.directives.bbUiIcon.Spreadsheet";Object(i.a)(o.Spreadsheet,s,"bbUiIconSpreadsheet")},HHPc:function(e,t){e.exports='<div class="multiple-attempt-grading attempt-list-peek assessment-exception" bb-first-time-container>\n  <div class="panel-wrap">\n    <header class="panel-header simple-header">\n      <div class="panel-titles-container">\n        <div class="panel-sub-title">{{ ::multipleAttemptPeek.panelSubTitle }}</div>\n        <div class="black-header-contents">\n          <button class="left-off-canvas-toggle menu-toggle standard-button dark-background" type="button" analytics-id="base.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n          <h1 class="panel-title" title="{{ ::multipleAttemptPeek.panelTitle }}">\n            {{ ::multipleAttemptPeek.panelTitle }}\n          </h1>\n        </div>\n      </div>\n    </header>\n    <section class="panel-content">\n      <div>\n        <bb-grading-bar is-priviledge="false"\n                        column="::multipleAttemptPeek.contentData.gradingColumn"\n                        grade-detail="::multipleAttemptPeek.gradeDetail"\n                        show-override-indicator="true"></bb-grading-bar>\n      </div>\n      <ol class="multiple-attempts-list">\n        <li ng-repeat="attempt in multipleAttemptPeek.attempts">\n          <bb-grading-bar is-privileged="false"\n                    column="::multipleAttemptPeek.contentData.gradingColumn"\n                    attempt="::attempt"\n                    has-overall-grade="multipleAttemptPeek.hasOverallGrade"\n                    attempt-index="{{$index + 1}}"\n                    comment-peek-sref="multipleAttemptPeek.getAttemptReviewStateRef(attempt, true)"\n                    peek-sref="multipleAttemptPeek.getAttemptReviewStateRef(attempt)"\n                    has-due-date-accommodation="multipleAttemptPeek.hasDueDateAccommodation">\n          </bb-grading-bar>\n        </li>\n      </ol>\n    </section>\n  </div>\n  <footer class="panel-footer">\n    <a href="javascript:void(0);"\n       ng-click="multipleAttemptPeek.navigateToAssessmentOverview()"\n       class="button button--secondary multiple-attempt-footer-button"\n       analytics-id="course.content.assessment.overview.multipleAttempt.navigateToAssessmentOverview.link">\n      <bb-svg-icon class="multiple-attempt-footer-icon" size="small" icon="arrow-left"></bb-svg-icon>\n      <span bb-translate="course.content.assessment.overview.multiple-attempt.backButtonLabel"></span>\n    </a>\n  </footer>\n</div>\n'},HjsN:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var i=n("D57K"),o=(n("wnWX"),n("dCrD")),s=n("Oyr+"),a="allCloudUploadsCompleteEvent",r="failed",c=function(e){function t(t,n,i){var o=e.call(this,t,n,i)||this;return o.cloudUploadPromises=[],o.onFilesSelectedHandler=function(e){var t=[];e.forEach((function(e){var n={id:e.id,deferred:o.$q.defer()};t.push(n.deferred),o.cloudUploadPromises.push(n)})),o.$q.all(t.map((function(e){return e.promise}))).then((function(){o.scope.$emit(a)}),(function(e){o.scope.$emit(a,e)}))},o.resolveFileUploadDeferred=function(e,t){var n=o.cloudUploadPromises.findIndex((function(t){return t.id===e}));return n>=0&&(t?o.cloudUploadPromises[n].deferred.reject(t):o.cloudUploadPromises[n].deferred.resolve(),o.cloudUploadPromises.splice(n,1),!0)},o.cloudUploadAttachHandler=function(e,t,n,i){var s=o.scope.attachHandler||o.defaultAttachHandler,a=o.$q.defer();return s(e,t,n,i).then((function(){o.resolveFileUploadDeferred(t.ui.fileId)&&a.resolve()})),a.promise},n.$on(s.e,(function(e,t,n,i,a){i===s.c.Error?o.resolveFileUploadDeferred(t,r):i===s.c.Cancel&&o.resolveFileUploadDeferred(t)})),o}return Object(i.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(o.a)},HwkA:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-custom-toggle-table",use:"icon-custom-toggle-table-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-table"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12" /></symbol>'});o.add(s);e.exports=s},IAsK:function(e,t,n){},"IR+Z":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("wHJ2"),o=n("Oyr+"),s=n("0JpG"),a=n("Vsv2"),r=n("zXZW"),c=n("pjml"),l=n("12mu"),d=n("lEL+"),u=n("U2yl"),p=n("Poqp"),m="ultra.directives.bbKloudless",h=function(){function e(e,t,n,i,o,s,r,c){this.scope=e,this.$q=t,this.$exceptionHandler=n,this.bbLocalize=i,this.$modal=o,this.CloudDriveModel=s,this.CloudDriveTaskModel=r,this.timeout=c,this.provider=a.a.KLOUDLESS.toString(),this.bbLocalize.loadBundle("components/directives/kloudless")}return e.prototype.getFileId=function(e){return e.account+"|"+e.id},e.prototype.onFileSelect=function(e){this.scope.$emit(o.d,e,this.scope.primaryKey&&this.scope.primaryKey()),this.scope.onFilesSelected&&this.scope.onFilesSelected(e)},e.prototype.getDownloadFileInfo=function(e){var t=this.getFileId(e);return this.CloudDriveModel.$new("Kloudless").contents.$new(t).$fetch({accessToken:this.accessToken}).$asPromise()},e.prototype.downloadFiles=function(e,t,n,i){var s=this,a={accessToken:this.accessToken,expand:"mimeType,isMedia"};this.scope.fileLocation&&(a.fileLocation=this.scope.fileLocation),this.scope.webLocation&&(a.webLocation=this.scope.webLocation),(n?this.CloudDriveTaskModel.$new(i||e.id):this.CloudDriveModel.$new("Kloudless").contents.$new(i||e.id).download).$fetch(a).$then((function(n){if("COMPLETE"===n.status)var i=s.scope.$on(o.e,(function(a,r,c){c!==o.c.UploadProgressComplete||e.ui.fileId&&r!==e.ui.fileId||(s.attachHandler(n,e,t),i())}));else s.timeout((function(){s.downloadFiles(e,t,!0,n.taskId)}),s.scope,2e3);(n.completePercentage<100||"COMPLETE"===n.status)&&s.scope.$root.$broadcast(o.e,e.ui.index,n.completePercentage,null,o.c.UpdateProgress,e.inProgressFileId,e.ui.targetDiv,e.ui.fileId)}),(function(t){s.displayUploadError(),s.scope.$root.$broadcast(o.e,e.ui.fileId,e,o.c.Error,e.ui.targetDiv,s.scope.primaryKey&&s.scope.primaryKey()),s.$exceptionHandler(t,"source")}))},e.prototype.attachHandler=function(e,t,n){var i=this.$q.defer(),o={fileName:null,fileLocation:null};return e&&(o.fileName=e.fileName,o.fileLocation=e.fileLocation,o.webLocation=e.webLocation,o.mimeType=e.mimeType,o.isMedia=e.isMedia),this.scope.attachHandler(o,t,this.scope.isUploadMultipleFiles,void 0,n).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},e.prototype.displayUploadError=function(){this.$modal.open({template:u,scope:this.scope})},e.$inject=["scope","$q","$exceptionHandler",s.serviceName,l.b,c.j.serviceName,c.k.serviceName,d.b],e}(),g=function(){function e(e,t,n,o){var s=this;this.$injector=e,this.$q=t,this.$modal=n,this.CloudDriveService=o,this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?",onFilesSelected:"=?",onCancelFocus:"=?"},this.restrict="A",this.link=function(e,t,n){var o=s,r=a.a.KLOUDLESS.toString();e.kloudless=s.$injector.instantiate(h,{scope:e}),e.folderBranchCounts=0,e.isInitialized=!!o.CloudDriveService.cloudDriveStorage[r],e.isInitialized||o.CloudDriveService.initializeCloudDrive(a.a.KLOUDLESS);var c=function(t){var n=[];if(t&&t.length>0){for(var i=0;i<t.length;i++)n.push(e.kloudless.getDownloadFileInfo(t[i]));o.$q.all(n).then((function(t){o.CloudDriveService.isGettingFilesInfo=!1,e.kloudless.onFileSelect(t),t.length>1&&(e.isUploadMultipleFiles=!0)}),(function(){o.CloudDriveService.isGettingFilesInfo=!1}))}};t.on("click",(function(){e.disableClick&&e.disableClick()||!e.isInitialized||(o.CloudDriveService.cloudDriveStorage[r].openFilePicker(e,e.allowMultiple).then((function(n){if((n||[]).length>0){if(!n[0]||!n[0].bearer_token||!n[0].bearer_token.key)return void s.$modal.open({template:p,scope:e});e.kloudless.accessToken=n[0].bearer_token.key,o.CloudDriveService.isGettingFilesInfo=!0,i.isDefined(e.allowMultiple)&&!1===e.allowMultiple&&n.length>1?c([n[0]]):c(n)}else e.onCancelFocus?e.onCancelFocus():t.focus()})),e.$on("$destroy",(function(){o.CloudDriveService.isGettingFilesInfo=!1,t.off("click")})))})),e.$on("downloadFile",(function(t,n,i){n.ui.primaryKey===(e.primaryKey&&e.primaryKey())&&n.file.$url().indexOf("Kloudless")>=0&&e.kloudless.downloadFiles(n,i)}))}}return e.$inject=["$injector","$q","$modal",a.c],e}();i.module(m,[s.moduleName,a.b,r.a,l.a,d.a]).directive("bbKloudless",["$injector",function(e){return e.instantiate(g)}])},IWgv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("xS64"),n("66CI"),n("vcLy"),n("KXuk");var i=n("wHJ2"),o=n("pjml"),s=n("0JpG"),a=n("mCEN"),r=n("bMxM"),c=n("TnpK"),l=n("66CP"),d="ultra.components.directives.content.contentItemIcon",u=function(){function e(e,t,n,i,s,a,r){var c=this;this.scope=e,this.$q=t,this.element=n,this.bbLocalize=i,this.contentIconService=s,this.ColumnModel=a,this.$state=r,this.iconName="document-blank",this.iconColor="primary",this.iconNameForLocalization="document-blank";var l,d=[],u=o.r.ContentHandler,p=e.$watch((function(){return e.contentColumn}),(function(){var t=e.bbContentItemIcon&&e.bbContentItemIcon.contentHandler&&e.bbContentItemIcon.contentHandler.toString();if(t)switch(t){case u.LtiLink.toString():l="bbContentItemIcon",d=["showAlertIcon"];break;case u.CourseLink.toString():if(e.bbContentItemIcon.contentDetail)var n=c.scope.$watch((function(){return e.bbContentItemIcon.id}),(function(t){t&&(e.bbContentItemIcon.getLinkContentSource().$then((function(e){c.contentIconService.getIconClass(e).then((function(e){e&&(c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName))}))})),n())}));else c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e.bbContentItemIcon.getContentHandlerByIconUrl().iconClass),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName);break;case u.RusticiScorm.toString():d=[(l="bbContentItemIcon")+".contentDetail['"+t+"'].gradebookItems[0].gradingColumn.gradebookCategory.id"];break;default:d=[(l="bbContentItemIcon")+".contentHandler",l+".ui.isOpen",l+".contentDetail['"+u.File.toString()+"'].file.mimeType",l+".contentDetail['"+u.TestLink.toString()+"'].test.gradingColumn.gradebookCategory.id",l+".contentDetail['"+u.TestLink.toString()+"'].assignment.gradingColumn.gradebookCategory.id"]}else e.contentColumn&&(d=[(l="contentColumn")+".scoreProviderHandle",l+".calculationType",l+".externalGrade",l+".visible",l+".summary.numStudentsGraded()",l+".summary.numStudentSubmissions()",l+".categoryTitle",l+".dueDate"]);var i=e.$watchGroup(d,(function(){var t=e[l];if(t){(t instanceof c.ColumnModel?c.contentIconService.getColumnIconClass(t):c.contentIconService.getIconClass(t)).then((function(e){e&&(c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName));var n=u.Folder.isEqualTo(t.contentHandler),o=u.Unknown.isEqualTo(t.contentHandler),s=u.File.isEqualTo(t.contentHandler),r=u.LtiLink.isEqualTo(t.contentHandler),l=u.RusticiScorm.isEqualTo(t.contentHandler),d=u.TestLink.isEqualTo(t.contentHandler);n||o||t instanceof a||s||r||l||d||i(),p()}))}}))}))}return e.prototype.showStatusIcon=function(){return this.scope.bbContentItemIcon&&this.scope.bbContentItemIcon.canEdit&&!this.$state.includes("**.content-navigator-placeholder.**")&&!this.scope.bbContentItemIcon.canEdit()&&(this.scope.bbContentItemIcon.isConditionalReleaseLocked()||this.scope.bbContentItemIcon.isStarted()||this.scope.bbContentItemIcon.isCompleted())},e.prototype.getStatusIconName=function(){return this.scope.bbContentItemIcon.isStarted()?"started":this.scope.bbContentItemIcon.isCompleted()?"complete":"lock-circle"},e.$inject=["scope","$q","element",s.serviceName,r.b,o.F.serviceName,c.d],e}(),p=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=l,this.scope={bbContentItemIcon:"=",contentColumn:"=",showAlertIcon:"="},this.link=function(e,n){e.contentItemIcon=t.$injector.instantiate(u,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(d,[a.a,r.a,c.b]).directive("bbContentItemIcon",["$injector",function(e){return e.instantiate(p)}])},IgL1:function(e,t){e.exports='<button bb-complex-tooltip=""\n  enhanced-tooltip="true"\n  tooltip-position="top-center"\n  tooltip-disable-on-mouse-over="false"\n  tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n  tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n  tooltip-scope="buttonComplexTooltip.$scope"\n  tooltip-template="{{ buttonComplexTooltip.getToolTipTemplate() }}"\n  tooltip-open-on-activation="true"\n  tooltip-auto-update="true"\n  tooltip-always-underline="false"\n  analytics-id="components.directives.content-item-base.conditionalRelease.date.link"\n  tooltip-center-content="true"\n  title="components.directives.grade.grader-column.statuses.restricted">\n  <bb-svg-icon size="small" icon="information" status="default"></bb-svg-icon>\n</button>\n'},IjED:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("D57K"),o=n("nsO7"),s=n("nbDY"),a=n.n(s),r=n("TnpK"),c="ultra.services.slideoutPanel",l="slideoutPanel",d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.RubricEvaluation=new t("rubric-evaluation"),t.RubricView=new t("rubric-view"),t.AssessmentSubmissionFeedback=new t("assessment-submission-feedback"),t.DiscussionFeedback=new t("discussion-feedback"),t}(a.a),u=function(){function e(e){var t=this;this.ultraState=e,this.slideoutPanelIsOpen=!1,this.getMostRecentPanelState=function(e){return e.split(".").pop()},this.isPanelClosing=function(e,n){return t._doesStateRequireSlidePanel(t.getMostRecentPanelState(e))&&!t._doesStateRequireSlidePanel(t.getMostRecentPanelState(n))},this.setSlideoutPanelState=function(){t.slideoutPanelIsOpen=t._doesStateRequireSlidePanel(t.getMostRecentPanelState(t.ultraState.current.name))},this.isOpen=function(){return t.setSlideoutPanelState(),t.slideoutPanelIsOpen},this.setSlideoutPanelState()}return e.prototype.isRubricState=function(){return this.getMostRecentPanelState(this.ultraState.current.name)===d.RubricEvaluation.toString()||this.getMostRecentPanelState(this.ultraState.current.name)===d.RubricView.toString()},e.prototype._doesStateRequireSlidePanel=function(e){return o.some(d.getValues(),(function(t){return e===t.toString()}))},e.$inject=[r.d],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(u);angular.module(c,[]).service(l,u)},IoN1:function(e,t){e.exports='<form name="{{::\'top_grading_bar\' + gradeDetail.id}}" bb-first-time-container>\n  <div class="single-submission-grading-bar attempt-grading-bar" ng-class="{\'add-comment-expanded\': gradingBar.gradingCommentHandler.commentPanelOpen}" bb-foundation-defer>\n    <div class="attempt-grading-bar-inner">\n\n      <i class="icon submission-type-icon" bb-content-item-icon content-column="::column()"></i>\n\n      <div class="attempt-info">\n        <span class="name ellipsis" bb-translate>components.directives.grade.grading-bar.submission</span>\n        <span class="submission-details-wrap peer-grading-flex-line" ng-class="{\'show-hide-on-hover\': (gradeDetail.isPosted() && !gradingBar.isPeerGrading())}" ng-if="attempt && gradingBar.showSubmissionInfo()">\n          \x3c!--submitted on time but not graded/posted--\x3e\n          <span class="details ellipsis submitted js-submitted-date" ng-if="!gradingBar.isSubmittedLate() && !gradeDetail.isPosted()" bb-translate translate-values="{date: attempt.attemptDate}">\n            components.directives.grade.grading-bar.submit-date\n          </span>\n\n          \x3c!--submitted late but not yet graded/posted--\x3e\n          <span ng-if="gradingBar.isSubmittedLate() && !gradeDetail.isPosted()" class="show-hide-on-hover">\n            <span class="details ellipsis submitted show-on-hover text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n              components.directives.grade.grading-bar.submit-late-date\n            </span>\n            <span class="details ellipsis hide-on-hover text-alert-ax js-submitted-late-date" bb-translate translate-values="{lateness: gradingBar.localizedLateness}">\n              components.directives.grade.grading-bar.submit-lateness\n            </span>\n          </span>\n\n          \x3c!--attempt has been graded/posted--\x3e\n          <span ng-if="gradeDetail.isPosted()" class="show-hide-on-hover">\n            \x3c!--submitted late--\x3e\n            <span ng-if="gradingBar.isSubmittedLate()" ng-class="{\'show-on-hover\': !column().anonymousGrading}" class="details ellipsis submitted text-alert-ax js-submitted-late-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n              components.directives.grade.grading-bar.submit-late-date\n            </span>\n            \x3c!--submitted on time--\x3e\n            <span ng-if="!gradingBar.isSubmittedLate()" ng-class="{\'show-on-hover\': !column().anonymousGrading}" class="details ellipsis submitted js-submitted-date"  bb-translate translate-values="{date: attempt.attemptDate}">\n              components.directives.grade.grading-bar.submit-date\n            </span>\n            \x3c!--posted with an attempt graded date--\x3e\n            <span ng-if="attempt.attemptLastGradedDate && !column().anonymousGrading" class="details ellipsis hide-on-hover posted js-posted-indicator" bb-translate translate-values="{date: attempt.attemptLastGradedDate}">\n              components.directives.grade.grading-bar.posted\n            </span>\n            \x3c!--overridden without an attempt graded date--\x3e\n            <span ng-if="!attempt.attemptLastGradedDate && !column().anonymousGrading" class="details ellipsis hide-on-hover posted js-posted-indicator">\n              <span class="posted-text" bb-translate>components.directives.grade.grading-bar.posted-no-date</span>\n            </span>\n          </span>\n          <span class="peer-grading-submission-details" ng-if="gradingBar.isPeerGrading()" ng-switch="gradingBar.peerReviewStatus()">\n            <span class="peer-grading-icon-alignment" ng-switch-when="Started">\n              <bb-svg-icon class="peer-grading-status-icon started" size="small" icon="started"></bb-svg-icon>\n              <span class="peer-grading-status-text peer-grading-icon-padding" bb-translate translate-values="{peerReviewsCompleted: gradingBar.completedPeerReviews, peerReviewsPerStudent: gradingBar.totalPeerReviews}">components.directives.grade.grading-bar.peerGrading.completed</span>\n            </span>\n            <span class="peer-grading-icon-alignment" ng-switch-when="Completed">\n              <bb-svg-icon class="peer-grading-status-icon completed" size="small" icon="complete"></bb-svg-icon>\n              <span class="peer-grading-status-text peer-grading-icon-padding" bb-translate translate-values="{peerReviewsCompleted: gradingBar.completedPeerReviews, peerReviewsPerStudent: gradingBar.totalPeerReviews}">components.directives.grade.grading-bar.peerGrading.completed</span>\n            </span>\n             <span class="not-started" ng-switch-default>\n              <span class="peer-grading-status-text" bb-translate>components.directives.grade.grading-bar.peerGrading.notStarted</span>\n            </span>\n          </span>\n        </span>\n        \x3c!-- BEGIN Enhance time limit --\x3e\n        <span class="information-about-time-limit show-hide-on-hover" ng-if="gradingBar.isShowExtraTime() && gradingBar.showSubmissionInfo()">\n          <span class="exceeded-time attention hide-on-hover details small-medium-show">{{gradingBar.getExceedTime()}}</span>\n          <span class="questions-answered-correctly-after-time-limit attention show-on-hover details small-medium-hide" bb-translate translate-values="{count: gradingBar.getQuestionsAnsweredAfterSoftTimeLimit().length}">\n            components.directives.grade.grading-bar.questions-answered-after-soft-time-limit.plural\n          </span>\n        </span>\n        \x3c!--  END  Enhance time limit --\x3e\n      </div>\n\n      <div class="undo-override" ng-if="gradingBar.shouldShowOverrideIndicator()" ng-switch="gradingBar.canGrade()">\n        <a ng-switch-when="true"\n        ng-if="!gradeDetail.isPastDueZero()"\n        href="javascript:void(0);"\n        data-class="js-undo-override"\n        ng-click="gradingBar.undoOverride()"\n        analytics-id="components.directives.grade.grading-bar.undo-override"\n        bb-translate>components.directives.grade.grading-bar.undo-override</a>\n        <span ng-switch-default class="override-indicator" bb-translate>components.directives.grade.grading-bar.readonly-override</span>\n      </div>\n\n      <div class="attempt-grading-actions">\n        <bb-grade-input\n          ng-if="gradingBar.canGrade() && gradeDetail.user && !column().anonymousGrading && !column().delegatedGrading"\n          ng-hide="hideGrade()"\n          ng-class="{\'has-feedback\': (gradingBar.canGrade() || gradingBar.gradingCommentHandler.hasComment()) && !disableFeedbackButtons}"\n          class="pill-spacing"\n          id="grading-bar-grade-input"\n          grade-detail="gradeDetail"\n          for-user="::user()"\n          column="::column()"\n          override="saveAsOverride()"\n          enable-rubric-eval-action="true"\n          disable-rubric-eval-click="disableRubricAction()">\n        </bb-grade-input>\n        \x3c!-- Group grading pill --\x3e\n        <bb-grade-input\n          ng-if="gradingBar.canGrade() && row.group && !column().delegatedGrading"\n          ng-hide="hideGrade()"\n          id="grading-bar-group-grade-input"\n          grade-detail="gradeDetail"\n          for-group="row.group"\n          column="::column()"\n          override="saveAsOverride()"\n          enable-rubric-eval-action="true"\n          disable-rubric-eval-click="disableRubricAction()"\n          class="group-grading-input-pill pill-spacing"\n          ng-class="{\'has-feedback\': (gradingBar.canGrade() || gradingBar.gradingCommentHandler.hasComment()) && !disableFeedbackButtons}"\n          is-group-grade-multiple="row.grade.ui.isGroupGradeMultiple"\n          is-group-grade-in-progress="row.isGroupGradeInProgress">\n        </bb-grade-input>\n        \x3c!-- For anonymous grading show attempt grading pill --\x3e\n        <bb-user-attempt-grade-input\n          ng-if="gradingBar.canGrade() && gradeDetail.user && (column().anonymousGrading || column().delegatedGrading)"\n          ng-hide="hideGrade()"\n          ng-class="{\'has-feedback\': (gradingBar.canGrade() || gradingBar.canEnterFeedback || gradingBar.gradingCommentHandler.hasComment()) && !disableFeedbackButtons}"\n          class="pill-spacing"\n          id="user-attempt-grade-input"\n          attempt="attempt"\n          grade-detail="gradeDetail"\n          for-user="::user()"\n          column="::column()"\n          enable-rubric-eval-action="true"\n          disable-rubric-eval-click="disableRubricAction()">\n        </bb-user-attempt-grade-input>\n        \x3c!-- For read only grade pill --\x3e\n        <bb-display-grade-pill\n          ng-if="!gradingBar.canGrade() && gradingBar.canSeeGradePillForStudentReviewer()"\n          ng-class="{\'has-feedback\': gradingBar.gradingCommentHandler.hasComment() && !disableFeedbackButtons}"\n          class="pill-spacing"\n          id="{{::\'display_grade_\' + gradeDetail.id || row.group.id}}"\n          column="::column()"\n          grade="gradeDetail"\n          hideRubricIcon="hideRubricIcon"\n          disable-rubric-eval-click="disableRubricAction()">\n        </bb-display-grade-pill>\n\n        <button class="toggle-comments-button"\n                ng-if="gradingBar.showCommentIcon() && !gradingBar.disableFeedbackInput() && !disableFeedbackButtons"\n                ng-click="gradingBar.openFeedbackPanel(gradeDetail.user.id)"\n                ng-switch="gradingBar.getCommentIconType()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grading-bar.instructor-comments.aria-label.comments-toggle-button\'}"\n                analytics-id="components.directives.grade.gradingBar.instructorComments.toggle.button" >\n          <bb-svg-icon ng-switch-when="add" size="medium" icon="add-feedback"></bb-svg-icon>\n          <bb-svg-icon ng-switch-when="view" size="medium" icon="feedback" status="active"></bb-svg-icon>\n          <bb-svg-icon ng-switch-default size="medium" icon="feedback"></bb-svg-icon>\n        </button>\n        \x3c!-- For some pages in peer grading, the icon is still desired to be in the grading bar, but it would not perform any   --\x3e\n        \x3c!-- actions. In order to be AX compliant, the button is removed and a simple div with the icon is used instead. Only   --\x3e\n        \x3c!-- the view icon is needed here because a student can only submit feedback once per review.                           --\x3e\n        <div ng-if="gradingBar.showCommentIcon() && gradingBar.disableFeedbackInput()">\n          <bb-svg-icon class="attempt-grading-has-feedback super-clear" icon="feedback" size="medium" status="active"></bb-svg-icon>\n        </div>\n\n        \x3c!-- Grading bar more students arrow icon --\x3e\n        <div bb-feature-toggle="differentiatedFeedback" remove-from-dom="true" ng-if="gradingBar.isGroupSubmission">\n          <button bb-guidance-target component-key="group-individual-feedback-ftue"\n                  id="{{ \'according_toggle_button\' + attempt.id }}"\n                  class="add-feedback-button"\n                  ng-click="gradingBar.toggleUserList()"\n                  type="button"\n                  role="button"\n                  aria-selected="{{ gradingBar.groupAccordingStatus() }}"\n                  aria-expanded="{{ gradingBar.groupAccordingStatus() }}"\n                  aria-controls="{{ \'according_toggle_panel\' + attempt.id }}"\n                  analytics-id="components.directives.grade.gradingBar.userList.toggle.button">\n            <span class="sr-only" bb-translate translate-values="{group: row.group.title}">\n              components.directives.grade.grading-bar.button.accordion-button\n            </span>\n            <bb-svg-icon size="custom"\n                         icon="arrow-down"\n                         class="grading-bar-arrow"\n                         ng-class="{\'rotate-arrow\': gradingBar.showDetail}"\n                         aria-hidden="true"\n                         role="presentation">\n            </bb-svg-icon>\n          </button>\n          <bb-guidance component-key="group-individual-feedback-ftue"\n                       id="guidance-moment-item-individual-feedback"\n                       class="guidance-element-overlay" role="tooltip">\n            <bb-translate>components.directives.grade.grading-bar.individual-feedback-ftue</bb-translate>\n          </bb-guidance>\n        </div>\n\n        <bb-overflow-menu ng-show="gradingBar.showOverflowMenu()"\n                          element-id="{{\'attempt-menu-open-button_\' + attempt.id}}"\n                          element-name="{{gradingBar.getLocalizedTextByKey(\'components.directives.grade.grading-bar.grade\')}}"\n                          menu-items="gradingBar.getOverflowMenuItems()"\n                          analytics-id-tag-prefix="components.directives.grade.grading-bar.single-submission-attempt-privileged.overflowMenu">\n        </bb-overflow-menu>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Group Member Lists --\x3e\n  <div id="{{ \'according_toggle_panel\' + attempt.id }}"\n       class="single-submission-grading-bar attempt-grading-bar user-list-style"\n       ng-if=" gradingBar.isGroupSubmission && gradingBar.userList && gradingBar.showDetail "\n       aria-labelledby="{{ \'according_toggle_button\' + attempt.id }}" bb-focus="true" tabindex="0">\n    \x3c!-- Submission list user list --\x3e\n    <ul>\n      <li ng-repeat="user in gradingBar.userList | limitTo:gradingBar.visibleUsersCount track by $index"\n          class="user-row js-user-{{::user.id}} user-list-top-border"\n          role="presentation">\n        <div class="user-list-wrapper attempt-grading-bar-inner">\n          \x3c!-- Avatar --\x3e\n          <div class="user-avatar">\n            <bb-avatar user="user" auto-update="true" inactive="!gradingBar.isUserCourseAvailable(user.id)"></bb-avatar>\n          </div>\n          \x3c!-- User name --\x3e\n          <div class="attempt-info user-name ellipsis" tabindex="0">\n            <bb-username user="user" format="short" auto-update="true"></bb-username>\n            <div ng-if="selectedUser === user" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n          \x3c!-- User action: open feedback --\x3e\n          <div class="attempt-grading-actions">\n            <button id="individual-comments{{::user.id}}"\n                    class="individual-feedback-icon"\n                    role="button"\n                    type="button"\n                    ng-if="gradingBar.showCommentIcon()"\n                    ng-click="gradingBar.openFeedbackPanel(user.id, true)"\n                    ng-switch="gradingBar.getGroupIndividualCommentIconType(user.id)"\n                    bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grading-bar.instructor-comments.aria-label.comments-toggle-button\'}"\n                    analytics-id="components.directives.grade.gradingBar.openFeedback.panel.button" >\n              <bb-svg-icon ng-switch-when="add" size="medium" icon="add-feedback"></bb-svg-icon>\n              <bb-svg-icon ng-switch-when="view" size="medium" icon="feedback" status="active"></bb-svg-icon>\n              <bb-svg-icon ng-switch-default size="medium" icon="feedback"></bb-svg-icon>\n            </button>\n          </div>\n        </div>\n      </li>\n      \x3c!-- Show more button --\x3e\n      <li ng-if="gradingBar.shouldShowMoreOrLess()"\n          class="show-all-users user-row">\n        <div class="user-list-wrapper attempt-grading-bar-inner">\n          <div class="show-more-actions">\n            <button class="button button--text text"\n                    ng-class="{\'show-more-button\': gradingBar.userList.length > gradingBar.visibleUsersCount,\n                               \'show-less-button\': gradingBar.userList.length === gradingBar.visibleUsersCount}"\n                    ng-click="gradingBar.showMoreOrLessControl()"\n                    bb-click-focus="li.user-row div.user-list-wrapper div.attempt-info.user-name"\n                    index-to-focus="{{ gradingBar.userList.length > gradingBar.visibleUsersCount ? 0 : gradingBar.MAX_USERS_VISIBLE }}"\n                    bb-translate="{{ gradingBar.showMoreOrLessTranslationKey() }}"\n                    translate-values="{count: gradingBar.hiddenUsersCount()}"\n                    analytics-id="{{ gradingBar.showMoreOrLessTranslationKey() }}" >\n            </button>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n</form>\n'},J8YL:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options" data-show-add-options ng-click="addContentButton.toggleMenu()"\n     ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n     aria-expanded="{{addContentButton.isMenuVisible}}" aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n     aria-label="{{addContentButton.addButtonAriaLabel}}"\n     ng-focus="addContentButton.showButton()" ng-blur="addContentButton.hideButton()"\n     analytics-id="components.directives.add-content-button.assignment.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        allow-multiple="true"\n        monitor-leave="true"\n        disable-drag="disableDrag && disableDrag()"\n        target-div="{{\'#\' + fileListViewId}}"\n        hide-transclude-during-upload="false"\n        is-third-party-upload="false"\n        disallow-folder-uploads="true"\n        skip-zip-file-check="true"\n        ignored-states="::ignoredStates()"\n        position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.fileUpload.link" >\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon><span bb-translate analytics-id="course.content.buildContentArea.addFiles">course.content.buildContentArea.addFiles</span>\n        </a>\n      </bb-file-upload>\n    </li>\n    <li ng-if="!addContentButton.isMobile">\n      \x3c!-- Skip zip file check, assignment does not support unzip file(LRN-101238) --\x3e\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}"\n                      position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-one-drive primary-key="fileListViewId"\n           is-flatten="false"\n           attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n           ignored-states="::ignoredStates()"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n           ng-click="addContentButton.toggleMenu(\'OneDriveUpload\')"\n           analytics-id="components.directives.add-content-button.assignment.oneDrive.link">\n          <div>\n            <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n          </div>\n        </a>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},JGCs:function(e,t,n){},JfeD:function(e,t,n){},JiEj:function(e,t){e.exports='<div bb-load-bundle="components/directives/content/learning-module/learning-module-base-item" class="base-content-item bb-lm-base-item"\n  bb-cache-compilation="lm-base-item">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" ng-paste="$event.stopPropagation()">\n    <div ng-switch on="content.ui.importPlaceholder">\n      \x3c!-- Import placeholder  --\x3e\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n\n      \x3c!-- Non-imported content --\x3e\n      <div ng-switch-default class="drag-element-row" ng-class="{\'is-restricted\': content.canEdit() && content.isHiddenFromStudents(), \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canEdit()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n\n              <ng-switch on="content.ui.isUploading">\n                \x3c!-- Uploading section begin --\x3e\n\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n                \x3c!-- Uploading section end --\x3e\n\n                <div class="outline-item-inner" ng-switch-default>\n\n                  <div class="lm-header-section">\n                    \x3c!-- Learning Module title section begin --\x3e\n\n                    \x3c!-- Learning Module title editor --\x3e\n                    <div class="lm-header-row" bb-click-to-invoke-child=".list-tree-toggle button">\n                      \x3c!-- Header row section --\x3e\n                      <div class="lm-title-text-editor">\n                        <div class="editable-title-container" ng-show="!baseItem.titleEditMode">\n                          \x3c!-- Conditional release section begin --\x3e\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isConditionalReleaseLocked()">\n                            <bb-svg-icon size="small" icon="lock"></bb-svg-icon>\n                          </div>\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isForcedSequenceModule() && content.state === \'Started\'">\n                            <bb-svg-icon size="small" icon="started" status="success"></bb-svg-icon>\n                          </div>\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isForcedSequenceModule() && content.state === \'Completed\'">\n                            <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                          </div>\n                          \x3c!-- Conditional release section end --\x3e\n                          \x3c!-- Attach event only at Instructor View --\x3e\n                          <div ng-if="::content.canEdit()" class="lm-title-instructor">\n                            <h3 class="sr-only" tabindex="-1">{{content.title}}</h3>\n                            <h3 class="lm-title secondary-title ellipse" ng-click="baseItem.enterTitleEditMode($event)" tabindex="-1" aria-hidden="true"\n                                analytics-id="components.directives.learningModule.baseItem.enterTitleEditMode.header">\n                            {{content.title}}\n                            </h3>\n                            <button ng-if="::content.canEdit()" class="button super-clear edit-title" type="button"\n                                ng-click="baseItem.enterTitleEditMode($event)"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.base-item.edit-title\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                analytics-id="course.learning.module.base.item.editTitle.button"\n                                >\n                                <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n                            </button>\n                          </div>\n\n                          \x3c!-- Just display title at Student View --\x3e\n                          <div class="lm-title-student" ng-if="::(!content.canEdit())">\n                            <button class="lm-title secondary-title ellipse"\n                                tabindex="0"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                aria-expanded="{{isOpen}}"\n                                title="{{::content.title}}"\n                                ng-click="!content.isConditionalReleaseLocked() && baseItem.toggleLM()"\n                                analytics-id="course.learning.module.base.item.toggleLm.button">\n                              {{::content.title}}\n                            </button>\n                            <div ng-if="content.isConditionalReleaseLocked()"\n                              role="tooltip"\n                              tabindex="0"\n                              class="lock-info"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-open-on-activation="true"\n                              tooltip-disable-on-mouse-over="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.lock-info</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div ng-show="baseItem.titleEditMode" bb-click-outside="baseItem.exitTitleEditMode()" ng-if="::content.canEdit()">\n                          <div class="lm-input">\n                            <input name="learning-module-title" class="lm-header-title lm-title" type="text" autocapitalize="off" ng-keydown="baseItem.onTitlePressKey($event)"\n                              maxlength="{{::baseItem.titleMaxLength}}" ng-model="content.title" ng-model-options="{ getterSetter: true }"\n                              ng-blur="baseItem.exitTitleEditMode($event)" ng-change="baseItem.onChangeTitle()" ng-click="$event.stopPropagation()"\n                              aria-required="true"\n                              bb-translate-attrs="{\'aria-label\': \'components.directives.header.placeholder.x-bb-lesson\'}"\n                              ng-required="true"\n                              analytics-id="course.learning.module.base.item.learningModuleTitle.input.text">\n                          </div>\n                        </div>\n                        \x3c!-- Learning Module visibility selector  --\x3e\n                        <div class="lm-visibility-selector" ng-if="content.canEdit() || (baseItem.isCourseCompletedAndInInstructorView() && content.isConditionalRelease())">\n                          <bb-content-visibility-selector ng-if="::content.canEdit()" content="content" is-visibility-selector-enabled="true" onchange-func="baseItem.onChangeVisibility()"\n                            open-panel-on-restricted="true" disable-restricted="false" enable-conditional-release="true">\n                          </bb-content-visibility-selector>\n                          <div class="rules" ng-if="(content.canEdit() || baseItem.isCourseCompletedAndInInstructorView()) && content.isConditionalRelease()">\n                            <a href="javascript:void(0);"\n                              ng-click="baseItem.canOpenConditionalRelease && baseItem.openConditionalRelease()"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n                              tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n                              tooltip-auto-update="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n                              analytics-id="components.directives.content-item-base.conditionalRelease.{{baseItem.conditionalRelease.conditionType}}.link">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.{{baseItem.conditionalRelease.conditionType}}</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </a>\n                          </div>\n                        </div>\n                        \x3c!-- Learning Module control section begin --\x3e\n                        \x3c!-- for student --\x3e\n                        \x3c!-- <div ng-if="::(!content.canEdit())">\n                          <span class="lm-counting">{{baseItem.completed}} / {{baseItem.count}}</span>\n                        </div> --\x3e\n                        \x3c!-- for instructor --\x3e\n                        <div ng-if="::(content.canEdit() && canMove)" ng-show="!baseItem.titleEditMode" class="lm-drag-button">\n                          <button bb-drag-handle drag-item-id="{{content.id}}"\n                                  drag-item-name="{{content.title}}"\n                                  drag-item-type="{{content.contentHandler}}"\n                                  drag-item-context="{{contextArea}}"\n                                  class="super-clear small button icon js-drag-handle"\n                                  translate-attrs-values="{contentTitle: content.title}"\n                                  bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                                  analytics-id="course.learning.module.base.item.move.button">\n                            <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n                          </button>\n                        </div>\n                        <div bb-foundation-defer>\n                          <bb-overflow-menu ng-if="::(content.canDelete() || content.canEdit() || content.hasConversation() && !content.isConditionalReleaseLocked())"\n                                            element-id="{{::(\'learning-module\' + baseItem.controlId)}}"\n                                            element-name="{{content.title}}"\n                                            menu-items="baseItem.getOverflowMenu()"\n                                            analytics-id-tag-prefix="components.directives.learning-module.base-item.overflowMenu">\n                          </bb-overflow-menu>\n                        </div>\n                      </div>\n\n                      \x3c!-- Learning Module control section end --\x3e\n                      <div class="list-tree-toggle" ng-if="::(content.canEdit() || !content.isRestricted())">\n                        <button class="button super-clear" ng-click="baseItem.toggleLM()" aria-controls="{{::\'learning-module-contents-\' + content.id}}"\n                          aria-expanded="{{isOpen}}"\n                          bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\',\n                          title: isOpen ? \'components.directives.learning-module.base-item.collapse\' : \'components.directives.learning-module.base-item.expand\'}"\n                          translate-attrs-values="{learningModuleName: content.title}"\n                          analytics-id="course.learning.module.base.item.toggleLm.button"\n                          >\n                          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n                    \x3c!-- Learning Module title section end --\x3e\n                  </div>\n                  \x3c!-- Learning Module description section begin --\x3e\n                  <div class="lm-description"  ng-if="::(content.canEdit() || content.description)" ng-show="isOpen">\n                    \x3c!-- Displays at instructor view  --\x3e\n\n                    <div ng-if="::(content.canEdit())">\n                      <div class="lm-add-description" ng-if="!content.description && !baseItem.descriptionEditMode">\n                        <button type="button"\n                                class="lm-add-description-btn"\n                                ng-click="baseItem.editDescription()"\n                                bb-translate-attrs="{\'aria-label\': baseItem.toggleAriaLabel}"\n                                analytics-id="course.learning.module.base.item.lmAddDescription.button">\n                          <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n                          <span bb-translate>components.directives.learning-module.base-item.add-description</span>\n                        </button>\n                      </div>\n\n                      <div ng-show="baseItem.descriptionEditMode" is-active="baseItem.descriptionEditMode" bb-click-outside="baseItem.saveDescription()">\n                        <form>\n                          <bb-basic-text-editor ng-model="content.description"\n                            element-id="{{::(\'lm-editor\' + content.id)}}"\n                            class="lm-description-editor"\n                            ng-class="{focused: baseItem.descriptionEditMode}"\n                            input-max-length="250"\n                            read-only="false"\n                            should-prevent-line-breaking="false"\n                            >\n                          </bb-basic-text-editor>\n                          <div class="buttons-2 equal-buttons panel-footer-right">\n                              <button class="button button--secondary js-cancel js-secondary-button non-first-focus"\n                                      ng-click="baseItem.cancelDescriptionEdit()"\n                                      bb-translate\n                                      ng-mousedown="$event.preventDefault()"\n                                      type="button"\n                                      analytics-id="components.directives.save-buttons.cancel">components.directives.save-buttons.cancel</button>\n                              <button class="button js-save js-primary-button non-first-focus"\n                                      ng-disabled="!baseItem.isDescriptionEdited()"\n                                      ng-click="baseItem.saveDescription()"\n                                      bb-translate\n                                      ng-mousedown="$event.preventDefault()"\n                                      type="button"\n                                      analytics-id="components.directives.save-buttons.notSaved">components.directives.save-buttons.notSaved</button>\n                            </div>\n                        </form>\n                      </div>\n\n                      <div class="description-show-text-container"\n                           ng-show="content.description && !baseItem.descriptionEditMode"\n                           ng-click="baseItem.onDescriptionClicked()"\n                           analytics-id="components.directives.learning-module.base-item.descriptionClicked"\n                      >\n                        <p class="description-show-text">\n                          {{content.description}}\n                        </p>\n                        <button class="description-editor"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.base-item.edit-description\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                analytics-id="course.learning.module.base.item.editDescription.button">\n                            <bb-svg-icon icon="draw" size="small" aria-hidden="true"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n\n                    \x3c!-- Displays at student view --\x3e\n                    <div ng-if="::(!content.canEdit())">\n                      <div>\n                        <p class="description-show-text">\n                          {{content.description}}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- Learning Module description section end --\x3e\n              </ng-switch>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},JuVx:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("D57K"),o=n("Sa5G"),s=n("jhBu"),a=n("oi1r"),r=n("pjml"),c=n("nsO7"),l=n("C2vp"),d=n("cbVV"),u=n("qH3X"),p=n("o5Lu"),m=n("yC9S"),h=n("aHpC"),g=function(){function e(e,t){this.cells=e,this.metadata=t}return e.prototype.isCellExisting=function(e){return this.isCellExistingByColumnId(e.column.id)},e.prototype.isCellExistingByColumnId=function(e){return!c.isUndefined(this.cells[e])},e.prototype.insertDataCell=function(e){this.isCellExisting(e)||(this.cells[e.column.id]=e)},e.prototype.deleteDataCellByColumnId=function(e){this.isCellExistingByColumnId(e)&&delete this.cells[e]},e}(),b=function(){function e(e,t,n,i,o,s,a){var r=this;this.$rootScope=e,this.$injector=t,this.$q=n,this.CourseModel=i,this.entitlementService=o,this.schemaService=s,this.gradeGridRebornDirectiveScope=a,this._canViewGrades=!1,this.schemas={},this.dataMap={},this.columns=[],this.columnIdGroupsMap={},this.allGroupMemberships=[],this.groupIdUserIdMap={},this.requestQueue=[],this.canViewGroups=!1,m.b.OnRootScope(this.$rootScope,p.a,(function(e,t){var n=r.getColumnMetadatas().find((function(e){return e.id===t}));n&&r.$rootScope.$broadcast(p.c,n)}))}return Object.defineProperty(e.prototype,"canViewGrades",{get:function(){return this._canViewGrades},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"course",{get:function(){return this._course},enumerable:!0,configurable:!0}),e.prototype.getSchema=function(){return this.schemas},e.prototype.getColumnIdGroupsMap=function(){return this.columnIdGroupsMap},e.prototype.getAllGroupMemberships=function(){return this.allGroupMemberships},e.prototype.getGroupIdUserIdMap=function(){return this.groupIdUserIdMap},e.prototype.initializeSchemas=function(e){var t=this;e.forEach((function(e){t.schemas[e.id]=e}))},e.prototype.initialize=function(e,t){var n=this;return this._course=e,this.courseId=e.id,this.columnMetadatas=t,this.canViewGroups=this.entitlementService.isEntitled(o.v.ViewGroups,this.courseId),this.$q.all([this.loadSchemas(this.courseId),this.fetchMemberships(this._course),this.entitlementService.hasAnyCourseEntitlement([o.u.ViewGrades,o.u.ViewGrades],e.id),this.canViewGroups?this.initializeGroupsMemberships():this.$q.when()]).then((function(e){return n.initializeSchemas(e[0]),n._canViewGrades=e[2],e[1]})).then((function(e){return e.filter((function(e){return e.isStudentMembership()}))})).then((function(e){n.insertRows(e);var t=!1;n.columns=n.getColumnMetadatas().map((function(e){return e.externalGrade&&(t=e.externalGrade),n.insertColumnByMetadata(e)}));var i=n.createStudentColumn(t);return n.insertColumn(i,!0),{rows:e,columns:n.columns}}))},e.prototype.getAssignedGroupsByColumnId=function(e){return this.columnIdGroupsMap[e]},e.prototype.loadSchemas=function(e){return this.schemaService.loadSchemas(e)},e.prototype.fetchMemberships=function(e){return e.memberships.$refresh({fields:"role,courseRole,childCourseId,user,id,isAvailable,dueDateExceptionType",sort:["isPreviewStudent(asc)","user.familyName(asc)","user.givenName(asc)"].join()}).$asPromise()},e.prototype.initializeColumnIdGroupsMap=function(e){var t=this;this.columnIdGroupsMap={},c.isEmpty(this.getColumnMetadatas())||this.getColumnMetadatas().forEach((function(n){n.contentId&&!n.isScorm()&&e[n.contentId]&&(t.columnIdGroupsMap[n.id]=e[n.contentId])}))},e.prototype.initializeGroupsMemberships=function(){var e=this;return this.allGroupMemberships=[],this.getGroupsMemberships().then((function(){e.initializeGroupIdUserIdMap()}))},e.prototype.initializeGroupIdUserIdMap=function(){var e=this;this.groupIdUserIdMap={};var t={};this.allGroupMemberships.forEach((function(n){e.groupIdUserIdMap[n.id]=n.memberships.map((function(e){return e.userId})),n.assignedContents.forEach((function(e){(t[e.contentId]=t[e.contentId]||[]).push(e)}))})),this.initializeColumnIdGroupsMap(t)},e.prototype.getGroupsMemberships=function(){var e=this;return this.course.groups.$refresh({offset:this.allGroupMemberships.length,limit:1e4,fields:"id,memberships,assignedContents"}).$asPromise().then((function(t){return e.allGroupMemberships=e.allGroupMemberships.concat(t),t.paging.nextPage?e.getGroupsMemberships():e.allGroupMemberships}))},e.prototype.fetchGradeBulkView=function(e,t,n){return e.gradebook.bulkView.$fetch({membershipIds:t,columnIds:n,expand:"attempts,lastAttemptId,needsGradingAttemptCount,groupAttempts",timestamp:(new Date).getTime()}).$asPromise()},e.prototype.createColumnByColumnMetadata=function(e){return e.externalGrade?this.createOverallColumn(e):e.isCalculated()?this.createCalculationColumn(e):e.isOffline()?this.createOfflineItemColumn(e):e.isDiscussion()?c.isEmpty(this.columnIdGroupsMap[e.id])?this.createDiscussionItemColumn(e):this.createGroupDiscussionGradeColumn(e,this.columnIdGroupsMap[e.id]):e.isAttendance()?this.createAttendanceItemColumn(e):this.columnIdGroupsMap[e.id]?this.createGroupTestGradeColumn(e,this.columnIdGroupsMap[e.id]):e.seemsAttemptBased()&&e.scoreProviderHandle?this.createAttemptBasedItemGradeColumn(e):e.scoreProviderHandle?this.createItemGradeColumn(e):this.createOfflineItemColumn(e)},e.prototype.createStudentColumn=function(t){return this.$injector.instantiate(d.l,{gridData:this,data:{id:e.COLUMN_STUDENT},headerTemplate:"<bb-grade-grid-column-header-student-reborn></bb-grade-grid-column-header-student-reborn>",cellTemplate:"<bb-grade-grid-column-student-reborn></bb-grade-grid-column-student-reborn>",columnWidth:220,position:"left",border:!t})},e.prototype.createOverallColumn=function(t){return this.$injector.instantiate(d.k,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-overall-reborn></bb-grade-grid-column-header-overall-reborn>",cellTemplate:"<bb-grade-grid-column-overall-reborn></bb-grade-grid-column-overall-reborn>",columnWidth:e.COLUMN_WIDTH,position:"left",border:!0})},e.prototype.createCalculationColumn=function(t){return this.$injector.instantiate(d.d,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createItemGradeColumn=function(t){return this.$injector.instantiate(d.i,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createOfflineItemColumn=function(t){return this.$injector.instantiate(d.j,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createDiscussionItemColumn=function(t){return this.$injector.instantiate(d.e,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createAttendanceItemColumn=function(t){return this.$injector.instantiate(d.b,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createAttemptBasedItemGradeColumn=function(t){return this.$injector.instantiate(d.a,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createGroupTestGradeColumn=function(t,n){return this.$injector.instantiate(d.h,{groups:n,gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createGroupDiscussionGradeColumn=function(t,n){return this.$injector.instantiate(d.f,{groups:n,gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.getColumnMetadata=function(e){return c.find(this.columnMetadatas,(function(t){return t.id===e}))},e.prototype.getColumnMetadataByContentId=function(e){return c.find(this.columnMetadatas,(function(t){return t.contentId===e}))},e.prototype.isColumnMetadataExisting=function(e){return!c.isUndefined(this.getColumnMetadata(e))},e.prototype.getColumnMetadatas=function(){return this.columnMetadatas},e.prototype.getRowById=function(e){return this.dataMap[e]},e.prototype.getRowByUserId=function(e){return c.find(c.values(this.dataMap),(function(t){return t.metadata.user.id===e}))},e.prototype.getGroupById=function(e){return this.allGroupMemberships.find((function(t){return t.id===e}))},e.prototype.getCell=function(e,t){return this.dataMap[e].cells[t]},e.prototype.insertRows=function(e){var t=this;e.forEach((function(e){return t.insertRow(e)}))},e.prototype.insertRow=function(e){this.dataMap[e.id]=new g({},e)},e.prototype.createCell=function(t,n){if(n.id===e.COLUMN_STUDENT)return this.$injector.instantiate(l.k,{gridData:this,row:t,column:n});var i=n.data;return i.externalGrade?this.$injector.instantiate(l.j,{gridData:this,row:t,column:n}):i.isCalculated()?this.$injector.instantiate(l.c,{gridData:this,row:t,column:n}):i.isOffline()?this.$injector.instantiate(l.i,{gridData:this,row:t,column:n}):i.isDiscussion()?n instanceof d.g&&n.userIdGroupIdMap[t.metadata.user.id]?this.$injector.instantiate(l.f,{gridData:this,row:t,column:n,group:n.getGroupById(n.userIdGroupIdMap[t.metadata.user.id])}):this.$injector.instantiate(l.d,{gridData:this,row:t,column:n}):i.isAttendance()?this.$injector.instantiate(l.b,{gridData:this,row:t,column:n}):n instanceof d.g&&n.userIdGroupIdMap[t.metadata.user.id]?this.$injector.instantiate(l.e,{gridData:this,row:t,column:n,group:n.getGroupById(n.userIdGroupIdMap[t.metadata.user.id])}):i.seemsAttemptBased()?this.$injector.instantiate(l.a,{gridData:this,row:t,column:n}):this.$injector.instantiate(l.g,{gridData:this,row:t,column:n})},e.prototype.insertColumn=function(e,t){void 0===t&&(t=!1),t?this.columns.unshift(e):this.columns.push(e),this.insertDataCells(e)},e.prototype.insertDataCells=function(e){var t=this;c.forOwn(this.dataMap,(function(n,i){return n.insertDataCell(t.createCell(n,e))}))},e.prototype.insertColumnByMetadata=function(e){var t=this.createColumnByColumnMetadata(e);return this.insertColumn(t),t},e.prototype.updateColumnByMetadata=function(e){this.isColumnExisting(e.id)&&this.deleteColumnById(e.id);var t=this.createColumnByColumnMetadata(e);return this.insertColumnAtIndex(t,this.getColumnMetadataIndexInColumnMetadatas(e)+1),this.insertDataCells(t),t},e.prototype.refreshDataCell=function(e,t){c.isUndefined(e)||(e.deleteDataCellByColumnId(t.id),e.insertDataCell(this.createCell(e,t)))},e.prototype.deleteColumn=function(e){this.deleteColumnById(e.id)},e.prototype.deleteColumnById=function(e){var t=this,n=c.remove(this.columns,(function(t){return t.id===e}));this.deleteDataCellsByColumnId(e),n&&n[0]&&n[0].data&&n[0].data.contentId&&(n=c.remove(this.columns,(function(e){return e.data&&e.data.contentId===n[0].data.contentId}))).forEach((function(e){return t.deleteDataCellsByColumnId(e.id)}))},e.prototype.deleteDataCellsByColumnId=function(e){c.forOwn(this.dataMap,(function(t,n){return t.deleteDataCellByColumnId(e)}))},e.prototype.getColumnMetadataIndexInColumnMetadatas=function(e){return c.findIndex(this.columnMetadatas,(function(t){return e.id===t.id}))},e.prototype.insertColumnAtIndex=function(e,t){this.columns.splice(t,0,e)},e.prototype.getColumn=function(e){return c.find(this.columns,(function(t){return t.id===e}))},e.prototype.getColumns=function(){return this.columns},e.prototype.isColumnExisting=function(e){return!c.isUndefined(this.getColumn(e))},e.prototype.getRowCount=function(){return c.keys(this.dataMap).length},e.prototype.loadData=function(t,n){if(!c.isEmpty(t)&&!c.isEmpty(n)&&!c.isEmpty(n.filter((function(t){return t.id!==e.COLUMN_STUDENT})))){var i=this.filterRowsAndColumns(t.map((function(e){return e.id})),n.map((function(e){return e.id})),(function(e){return e.isUnloaded||e.isWaiting})),o=i[0],s=i[1];c.isEmpty(o)||c.isEmpty(s)||this.prepareFetchGrades(o,e.ROW_NUMBER_PER_REQUEST,s,e.COLUMN_NUMBER_PER_REQUEST)}},e.prototype.filterRowsAndColumns=function(e,t,n){var i=this.filterRows(e,t,n);return[i,this.filterColumns(i,t,n)]},e.prototype.filterRows=function(e,t,n){var i=this,o=[];return e.forEach((function(e){var s=i.dataMap[e];c.find(t,(function(e){return n(s.cells[e])}))&&o.push(e)})),o},e.prototype.filterColumns=function(e,t,n){var i=this,o=[];return t.forEach((function(t){c.find(e,(function(e){return n(i.dataMap[e].cells[t])}))&&o.push(t)})),o},e.prototype.prepareFetchGrades=function(e,t,n,i){var o=this,s=c.isEmpty(this.requestQueue),a=[];c.chunk(e,t<=0?e.length:t).forEach((function(e){c.chunk(n,i<=0?n.length:i).forEach((function(t){s?o.requestQueue.push([e,t]):a.push([e,t]),o.markWaiting(e,t)}))})),this.requestQueue=a.concat(this.requestQueue),s&&this.fetchGrades()},e.prototype.fetchGrades=function(){for(var t=0;t<e.REQUEST_WORKER_NUMBER;t++)this.fetchGrade()},e.prototype.fetchGrade=function(){var e,t=this;if(!c.isEmpty(this.requestQueue)){var n=this.requestQueue.shift(),i=n[0],o=n[1];e=this.filterRowsAndColumns(i,o,(function(e){return e.isWaiting})),i=e[0],o=e[1],c.isEmpty(i)||c.isEmpty(o)?this.fetchGrade():(this.markLoading(i,o),this.fetchGradeBulkView(this.CourseModel.$new(this.courseId),i,o).then((function(e){t.assignGrade(e),t.markLoaded(i,o),t.fetchGrade()})))}},e.prototype.assignGrade=function(e){var t=this;e.bulkViewUsers.forEach((function(e){var n=t.dataMap[e.courseMembershipId];e.grades.forEach((function(e){var t=n.cells[e.columnId];t.isLoading&&(t.data=e)}))}))},e.prototype.markWaiting=function(e,t){var n=this;e.forEach((function(e){return t.forEach((function(t){var i=n.dataMap[e].cells[t];i.isUnloaded&&i.setLoadState(l.h.WAITING)}))}))},e.prototype.markLoading=function(e,t){var n=this;e.forEach((function(e){return t.forEach((function(t){var i=n.dataMap[e].cells[t];i.isWaiting&&i.setLoadState(l.h.LOADING)}))}))},e.prototype.markLoaded=function(e,t){var n=this;e.forEach((function(e){return t.forEach((function(t){var i=n.dataMap[e].cells[t];i.isLoading&&i.setLoadState(l.h.LOADED)}))})),this.broadcastRefreshEvent(e,t)},e.prototype.broadcastRefreshEvent=function(e,t){var n=this;e.forEach((function(e){var i=t.filter((function(t){return n.dataMap[e].cells[t].isLoaded}));n.gradeGridRebornDirectiveScope.$broadcast(u.a.REFRESH,{rowId:e,columnIds:i})}))},e.prototype.refreshAllColumns=function(){var e=this;c.forEach(this.getColumnMetadatas(),(function(t){return e.updateColumnByMetadata(t)}))},e.prototype.addUpdatedColumnFlag=function(e){var t=this;c.forEach(e,(function(e){var n=c.find(t.columns,(function(t){return t.id===e}));n&&(n.isUpdated=!0)}))},e.prototype.destory=function(){this.requestQueue=[]},e.COLUMN_WIDTH=142,e.COLUMN_STUDENT="COLUMN_STUDENT",e.REQUEST_WORKER_NUMBER=5,e.ROW_NUMBER_PER_REQUEST=0,e.COLUMN_NUMBER_PER_REQUEST=0,e=Object(i.__decorate)([Object(i.__param)(0,Object(h.b)("$rootScope")),Object(i.__param)(1,Object(h.b)("$injector")),Object(i.__param)(2,Object(h.b)("$q")),Object(i.__param)(3,Object(h.b)(r.o.serviceName)),Object(i.__param)(4,Object(h.b)(s.b)),Object(i.__param)(5,Object(h.b)(a.b)),Object(i.__param)(6,Object(h.b)("gradeGridRebornDirectiveScope"))],e)}()},Jwnl:function(e,t){e.exports='\x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n<button ng-if="!contentItemBase.isEngagementOutline()"\n        class="content-title" ng-class="{\'name-middle\': contentItemFolder.shouldAlignMiddle()}"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-expanded="{{content.ui.isOpen}}"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        bb-translate-attrs="{\'aria-label\':\'components.directives.content-item-base.aria-label.toggle-folder\'}"\n        translate-attrs-values="{folderName: content.title}"\n        analytics-id="content.item.folder.toggleFolder.button"><span>{{ content.title }}</span></button>\n<button ng-if="contentItemBase.isEngagementOutline()"\n        class="content-title name"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        aria-expanded="{{content.ui.isOpen}}"\n        analytics-id="content.item.folder.engagementOutline.toggleFolder.button"><span>{{ content.title }}</span></button>'},KKAh:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("BY8f"),s="ultra.components.directives.bbUiIcon.Journal";Object(i.a)(o.Journal,s,"bbUiIconJournal")},KXuk:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-complete",use:"icon-small-complete-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-complete"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8l2 3 4-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},KeOq:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content student-content student-column" role="columnheader" tabindex="0">\n    <div class="ellipse left-bold location" course-org-token-resolver bb-translate>components.directives.grade.grid.students</div>\n  </div>\n  <div class="summary student-column"></div>\n  <div class="summary student-column">\n    <span bb-translate course-org-token-resolver translate-values="{count: studentsTotal}">components.directives.grade.grid.studentsSummary.plural</span>\n  </div>\n</div>\n'},KmIE:function(e,t,n){},"L+81":function(e,t,n){"use strict";n("zhNR"),n("Siqh"),n("Xc1Q");var i=n("lx16"),o=n("wHJ2"),s=n("kC07"),a=n("D8d/"),r=n("pjml"),c=n("lEL+"),l=n("yGpi"),d=n("D57K"),u=(n("Zahr"),n("lwNT"),n("vcLy"),n("KXuk"),n("Sa5G")),p=n("0JpG"),m=n("MKP7"),h=n("JNtI"),g=n("Ocaa"),b=n("pIXs"),f=n("aTRN"),v=n("nYZ0"),y=n("w9Zy"),w=n("TnpK"),C=n("X455"),S=n("oi1r"),k=n("jhBu"),I=n("JiEj"),D=n("aHpC"),E=n("+4Px"),O=n("e6jQ"),T=n("BLb8"),$="ultraUi.components.directives.content.learningModule.learningModuleBaseItem",A=function(){function e(e,t,n,i,o,s,a,r,c,l,d,p){var m=this;this.scope=e,this.element=t,this.attrs=n,this.localizeService=i,this.$q=o,this.contentService=s,this.offcanvasService=a,this.timeout=r,this.ultraState=c,this.contextCourseMembership=l,this.entitlementService=p,this.titleEditMode=!1,this.descriptionEditMode=!1,this.isEditButtonHovering=!1,this.lmTitlePlaceholder=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.learning-module.base-item.title-placeholder"}),this.description="",this.controlId=Object(O.a)(),this.titleMaxLength=250,this.isGettingConfirmationOptions=!1,this.descriptionCache="",this.titleCache="",this.conditionalRelease=d.instantiate(f.a,{scope:e}),e.content.title||(e.content.title=this.lmTitlePlaceholder),e.content.description=e.content.description?e.content.description:"",this.scope.$on("refresh-conditional-release-rules",(function(e,t){m.scope.content.id===t.id&&m.conditionalRelease.getConditions(t)})),this.scope.$on("bb-update-CR-tooltip",(function(e,t,n,i){t&&(m.rulesCriteria&&m.rulesCriteria.gradeColumnId)===t.id&&m.conditionalRelease.getConditions(m.scope.content,n,i)})),(e.content.isConditionalReleaseLocked()||e.content.isConditionalRelease()||e.content.isForcedSequenceModule())&&this.conditionalRelease.getConditions(e.content),this.entitlementService.hasCourseEntitlement(u.f.ModifyContent,this.scope.content.courseId).then((function(e){m.entitledToModifyContent=e})),this.scope.$on("update-state",(function(t,n){var i;if(n&&e.content.isForcedSequenceModule()&&!m.contextCourseMembership.isActAsInstructorMembership()&&(e.content.id===n.parentId||e.content.children&&e.content.children.some((function(e){return e.id===n.parentId&&(i=e,!0)})))){var s=[e.content.$fetch().$asPromise(),e.content.getChildren({limit:e.content.children.length+1}).$asPromise()];i&&i.children&&s.push(i.getChildren({limit:i.children.length+1}).$asPromise()),o.all(s).then((function(t){var n=t[1],o=t[2];n.forEach((function(t,i){var o=e.content.children.findIndex((function(e){return e.id===t.id}));-1!==o&&(n[i].ui=e.content.children[o].ui,n[i]=Object.assign(e.content.children[o],n[i]))})),i&&o&&o.forEach((function(e,t){var n=i.children.findIndex((function(t){return t.id===e.id}));-1!==n&&(i.children[n]=Object.assign(i.children[n],o[t]))}))}))}})),Object(T.c)(this.scope,(function(e,t){m.scope.content.isConditionalReleaseLocked()&&m.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(T.d)(m.scope,t)})),Object(T.b)(this.scope,(function(e){m.scope.content.isConditionalReleaseLocked()&&Object(T.d)(m.scope)}))}return e.prototype.enterTitleEditMode=function(e){e.stopPropagation(),this.titleEditMode=!0,this.titleCache=this.scope.content.title,this.offcanvasService.safeFocus(this.element.find("input.lm-title"))},e.prototype.exitTitleEditMode=function(e){this.titleEditMode=!1,this.scope.content.title?this.scope.content.title!==this.titleCache&&this.onChangeTitle():this.scope.content.title=this.titleCache},e.prototype.onTitlePressKey=function(e){e.keyCode===E.f&&this.exitTitleEditMode()},e.prototype.onChangeTitle=function(){this.scope.content.title.trim()&&this._persistContent(this.scope.content,["title"])},e.prototype.onChangeVisibility=function(){this._updateVisibility(this.scope.content)},e.prototype._updateVisibility=function(e){e.visibility=this.contentService.determineVisibility(e.isAvailable);var t=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],n=e.getAssociatedGradingColumn();(n||this.scope.content.isForcedSequenceModule())&&(this.scope.content.isForcedSequenceModule()&&e.applyForcedSequence(!1),n&&(n.visible=e.isAvailable),t.push("contentDetail")),this._persistContent(e,t)},e.prototype.deleteContent=function(){this.scope.$emit("deleteContent",this.scope.content)},e.prototype.getOverflowMenu=function(){var e=this;return[{icon:"trash",labelKey:"global.delete",show:function(){return e.scope.content.canDelete()},onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return e.isGettingConfirmationOptions=!0,e.getDeleteConfirmationKeyAndShowType().then((function(t){var n=t.confirmationKey.replace(/^resource\//,"");return e.isGettingConfirmationOptions=!1,e.$q.when(h.a(n))}))}}}]},e.prototype.getDeleteConfirmationKeyAndShowType=function(){var e=this;return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then((function(t){return{confirmationKey:e.scope.content.ui.deleteConfirmationKey,showType:e.scope.content.ui.modalShowType}}))},e.prototype.toggleLM=function(){this.scope.toggleFunc&&this.scope.toggleFunc()},e.prototype.isDescriptionEdited=function(){return this.descriptionCache!==this.scope.content.description},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.entitledToModifyContent},Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.onDescriptionClicked=function(){this.editDescription(),this.descriptionCache=this.scope.content.description},e.prototype.editDescription=function(){var e=this;this.descriptionEditMode=!0,this.timeout((function(){e.element.find(".lm-description textarea").focus()}),this.scope,0)},e.prototype.cancelDescriptionEdit=function(){this.scope.content.description=this.descriptionCache,this.descriptionEditMode=!1},e.prototype.saveDescription=function(){this.descriptionEditMode=!1;this._persistContent(this.scope.content,["description"]),this.descriptionCache=""},e.prototype._persistContent=function(e,t){var n=this;e.withParams({fields:"id",expand:"gradebookCategory"}).$save(t).$asPromise().then((function(){n.scope.$root.$broadcast("content-update",e)}))},e.prototype.openConditionalRelease=function(){this.ultraState.goPeekState("conditional-release",{id:this.scope.content.id})},e.$inject=["scope","element","attrs",p.serviceName,"$q",v.f,y.e,c.b,w.d,C.d,"$injector",k.b],Object(d.__decorate)([Object(D.a)(2e3)],e.prototype,"onChangeTitle",null),e}(),x=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=I,this.scope={content:"=",canToggle:"&",toggleFunc:"&",canMove:"=",contextArea:"=",isOpen:"="},this.link=function(e,n,i){e.baseItem=t.$injector.instantiate(A,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();o.module($,[m.a,b.a,v.d,g.a,y.d,c.a,w.b,S.a,k.a]).directive("bbLearningModuleBaseItem",["$injector",function(e){return e.instantiate(x)}]),n.d(t,"a",(function(){return P}));var P="ultra.directives.folder",G=function(){function e(e,t,n,i){var o=this;this.scope=e,this.element=t,this.timeout=n,this.contextCourseMembership=i,this.showEmptyMenu=!0,this.showMenuOverride=!1,this.showOutlineOverride=!1,this.isOpen=!1,this.toggleLabelKey="components.directives.folder.aria-label.open",this.initialChildrenLength=0,this.FOLDER_CONTENTS_SELECTOR=".folder-contents",this.contextArea=e.contextArea,this.loadMoreChildren=e.loadMoreChildren,this.contents=e.contents,this.content.ui?this.content.ui.isOpen=!1:this.content.ui={isOpen:!1},e.$on("toggle-folder",(function(e,t){o.canToggle()&&t===o.content&&o.toggleFolder()})),e.$on("toggle-folder-by-id",(function(t,n){o.canToggle()&&n===o.content.id&&(o.scope.$$phase||o.scope.$root&&o.scope.$root.$$phase?o.toggleFolder():e.$apply((function(){o.toggleFolder()})))})),e.$on("close-folder-immediately-by-id",(function(e,t){o.isOpen&&o.canToggle()&&t===o.content.id&&o._closeFolderImmediately()})),e.$on("bb-drag-start",(function(){o.isOpen&&o.canToggle()&&(null==o.content.children||0===o.content.children.length)&&o._closeFolderImmediately()})),e.$on("close-all-add-menus",(function(e,t){if(o.isOpen&&(null==o.content.children||0===o.content.children.length)&&o.content.id!==t){if(o.content.isLearningModule())return;o.toggleFolder()}})),e.$on("showContentImportProgress",(function(t,n,i){o.content.id!==i||0!==o.content.children.length||o.showOutlineOverride||(o.showOutlineOverride=!0,o.timeout((function(){o.scope.$broadcast("showContentImportProgress",n,i)}),e))})),e.$on("keyboard-drag-move",(function(e,t){o.content.id+"blank"===t?o.showEmptyMenu=!1:o.showEmptyMenu=!0})),e.$on("keyboard-drag-lost-focus",(function(){o.showEmptyMenu=!0})),e.$on("keyboard-drag-end",(function(){o.showEmptyMenu=!0}))}return e.prototype._closeFolderImmediately=function(){var e=this;this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).hide(),this.isOpen=!1,this.content.ui.isOpen=!1):this.scope.$apply((function(){e.element.children(".folder").children(e.FOLDER_CONTENTS_SELECTOR).hide(),e.isOpen=!1,e.content.ui.isOpen=!1}))},e.prototype.toggleFolder=function(){var e=this;this.isOpen||null!=this.content.children&&0!==this.content.children.length||this.loadMoreChildren(this.content).$then((function(){e.content.children&&0===e.content.children.length&&!e.contextCourseMembership.isActAsInstructorMembership()&&e.scope.content.state!==r.r.StateType.Completed&&e.scope.content.updateState(r.r.StateType.Completed,!0)})),this.isOpen=this.content.ui.isOpen=!this.content.ui.isOpen,this.content.children?this.content.children.$then((function(){e.initialChildrenLength=e.content.children.length,0===e.content.children.length?(e._calculateDurationAndToggle(),e.showMenuOverride=!0,(e.isOpen||e.isOpen&&e.content.isLearningModule())&&e.scope.$root.$broadcast("close-all-add-menus",e.content.id)):e.timeout((function(){e._calculateDurationAndToggle(),e.showMenuOverride=!1}),e.scope),e.scope.$watch((function(){return e.content.children&&e.content.children.length}),(function(t,n){e.showMenuOverride=0===t,0===t&&t!==n&&e.isOpen&&e.scope.$root.$broadcast("close-all-add-menus",e.content.id)}))})):(this._calculateDurationAndToggle(),this.showMenuOverride=!0),this.toggleLabelKey=this.isOpen?"components.directives.folder.aria-label.close":"components.directives.folder.aria-label.open"},e.prototype._calculateDurationAndToggle=function(){var e=this.isOpen?1e3:2e3,t=this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).outerHeight(),n=Math.round(1.17*t),i=Math.min(e,n);this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).slideToggle(i)},e.prototype.canToggle=function(){return this.content.canEdit()||!this.content.isRestricted()},Object.defineProperty(e.prototype,"content",{get:function(){return this.scope.content},enumerable:!0,configurable:!0}),e.$inject=["scope","element",c.b,C.d],e}(),L=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.scope={content:"=",contextArea:"=",canCreate:"=",contents:"=",canMove:"=",loadMoreChildren:"=",nextContentId:"=?",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=",previousContentId:"=?",canCopyImport:"=?",rootContent:"&?"},this.compile=function(e){return{pre:function(e,n){e.folder=t.$injector.instantiate(G,{scope:e,element:n})}}},this.template=l}return e.$inject=["$injector"],e}();o.module(P,[s.b,a.a,i.a,c.a,$]).directive("bbFolder",["$injector",function(e){return e.instantiate(L)}])},L2Kv:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var i=n("D57K"),o=n("nsO7"),s=n("gK/k"),a=n("9Fiv"),r=n("+4Px"),c=n("dF44"),l=n("lEL+"),d="rbGridCell",u=function(){},p=function(){function t(t,n,i,o,s,a){var l=this;this.scope=t,this.element=n,this.grid=i,this.container=o,this.$q=s,this.timeout=a,this.setTabindex(),n.on("keydown",(function(t){var n=l.getHandler(t);n&&(l.grid.previousCell=l,l.tabPressed=t.keyCode===r.u,r.x(t)&&e(document.body).removeClass("hide-focus-outline"),n.call(l),t.preventDefault(),t.stopPropagation())})),t.$on(c.b.FOCUS_CELL,(function(e,t,n){l.scope.row===t&&l.scope.col===n&&(l.handleFocus(),l.grid.cellFocusDeferred&&l.grid.cellFocusDeferred.resolve(l))})),t.$on(c.b.LEAVE_CELL,(function(){l.handleFocus()})),t.$on(c.b.ENTER_NEXT_CELL,(function(){l.grid.cellFocusDeferred=new function(){var e=this;this.promise=new Promise((function(t){return e.resolve=t}))},l.goForth(),l.grid.cellFocusDeferred.promise.then((function(e){e.handleEnter(),l.grid.cellFocusDeferred=null}))}))}return t.prototype.setTabindex=function(){this.scope.col.focusable&&this.element.attr("tabindex",0)},t.prototype.goLeft=function(){var e=this;o.debounce((function(){e.removeFocus();var t=e.scope.row,n=e.scope.col,i=e.container.rows,o=e.grid.getFocusableColumns(),s=o[(o.indexOf(n)-1+o.length)%o.length];if("right"===e.container.position&&e.scope.$first)e.grid.scrollToRight((function(){return e.notifyFocus(t,s)}));else if(s===o[o.length-1]){if(t){var a=i.indexOf(t)-1;t=i[a];var r=NaN;e.container.isRowOutOfBound(a).top&&(r=e.container.getTopRowScrollTop(a)),e.grid.scrollToRightWithTop(r,(function(){return e.notifyFocus(t,s)}))}}else{var c=e.container.columns.indexOf(s),l=c>=0;e.container.isColOutOfBound(c).left?e.grid.scroll({scrollLeft:l?e.container.getLeftColScrollLeft(s):0},(function(){return e.notifyFocus(t,s)})):e.notifyFocus(t,s)}}),c.c)()},t.prototype.goRight=function(){var e=this;o.debounce((function(){e.removeFocus();var t=e.scope,n=t.row,i=t.col,o=e.container.rows,s=e.grid.getFocusableColumns(),a=s[(s.indexOf(i)+1)%s.length];if("left"===e.container.position&&e.scope.$last)e.grid.scrollToLeft((function(){return e.notifyFocus(n,a)}));else if(a!==s[0]){var r=e.container.columns.indexOf(a);e.container.isColOutOfBound(r).right?e.grid.scroll({scrollLeft:e.container.getRightColScrollLeft(a)},(function(){return e.notifyFocus(n,a)})):e.notifyFocus(n,a)}else{var c=-1,l=o[0];if(void 0===n)c=0;else{var d=o.indexOf(n)+1;(l=o[d])&&e.container.isRowOutOfBound(d).bottom&&(c=e.container.getBottomRowScrollTop(d))}e.grid.scroll({scrollLeft:0,scrollTop:c},(function(){return e.notifyFocus(l,a)}))}}),c.c)()},t.prototype.goUp=function(e){var t=this;void 0===e&&(e=!1),o.debounce((function(e){t.removeFocus();var n=t.scope,i=n.row,o=n.col,s=t.container.rows,a=s.indexOf(i)-1;if(i){var r=s[a];r?t.container.isRowOutOfBound(a).top?t.grid.scroll({scrollTop:t.container.getTopRowScrollTop(a)},(function(){return t.notifyFocus(r,o)})):t.notifyFocus(r,o):e?t.grid.scrollToBottom((function(){return t.notifyFocus(s[s.length-1],o)})):t.notifyFocus(void 0,o)}else t.grid.scrollToBottom((function(){return t.notifyFocus(s[s.length-1],o)}))}),c.c)(e)},t.prototype.goDown=function(e){var t=this;void 0===e&&(e=!1),o.debounce((function(e){t.removeFocus();var n=t.scope,i=n.row,o=n.col,s=t.container.rows,a=s.indexOf(i)+1,r=s[a];if(r){if(void 0===i)return void t.grid.scrollToTop((function(){return t.notifyFocus(r,o)}));t.container.isRowOutOfBound(a).bottom?t.grid.scroll({scrollTop:t.container.getBottomRowScrollTop(a)},(function(){return t.notifyFocus(r,o)})):t.notifyFocus(r,o)}else e?(r=s[0],t.grid.scrollToTop((function(){return t.notifyFocus(r,o)}))):t.notifyFocus(r,o)}),c.c)(e)},t.prototype.goForth=function(){this.goDown(!0)},t.prototype.goBack=function(){this.goUp(!0)},t.prototype.removeFocus=function(){this.container.element.find(".rb-ax-focus-placeholder").focus()},t.prototype.notifyFocus=function(e,t){this.grid.$scope.$broadcast(c.b.FOCUS_CELL,e,t)},t.prototype.handleFocus=function(){this.element.focus()},t.prototype.isFirst=function(){var e=this.scope,t=e.row,n=e.col,i=this.grid.getFocusableColumns();return void 0===t&&n===i[0]},t.prototype.isLast=function(){var e=this.scope,t=e.row,n=e.col,i=this.container.rows,o=this.grid.getFocusableColumns();return t===i[i.length-1]&&n===o[o.length-1]},t.prototype.getHandler=function(e){return r.z(e)&&!this.isFirst()?this.goBack:r.A(e)&&!this.isLast()?this.goForth:e.keyCode===r.j?this.goLeft:e.keyCode===r.s?this.goRight:e.keyCode===r.v?this.goUp:e.keyCode===r.d?this.goDown:r.y(e)?this.handleEnter:e.keyCode===r.g?this.element.is(e.target)?this.handleEscape:this.handleFocus:void 0},t.prototype.handleEnter=function(){this.scope.$broadcast(c.b.ENTER_CELL,this.element)},t.prototype.handleEscape=function(){this.scope.$emit(c.b.LEAVE_GRID)},t.$inject=["scope","element","grid","container","$q",l.b],t}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.setTabindex=function(){this.scope.col.focusable&&this.element.attr("tabindex",this.scope.col.headerFocusable?0:-1)},t.prototype.goBack=function(){this.goLeft()},t.prototype.goForth=function(){var e=this,t=this.scope,n=t.row,i=t.col;this.canAddColumn()?this.container.canAddColumn()?this.notifyFocus(n,i):this.grid.scrollToLeft((function(){return e.notifyFocus(n,i)})):this.goRight()},t.prototype.handleFocus=function(){var n=this.grid.previousCell,i=this.grid.containers.center.columnAdder;n.tabPressed&&n instanceof t&&n.canAddColumn()&&this.canAddColumn()?(this.container.canAddColumn()?i.show(this.element.find(".rb-add-column-placeholder"),this.scope.col):i.show(),i.button.focus()):this.scope.col.headerFocusable?e.prototype.handleFocus.call(this):this.scope.$broadcast(c.b.CELL_FOCUSED,this.element)},t.prototype.canAddColumn=function(){return this.container.canAddColumn()||this.grid.canAddColumn()&&"left"===this.container.position&&this.scope.$last},t}(p),h=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.templates=Object.create(null),this.restrict="A",this.require=["^"+s.a,"^"+a.c,d],this.controller=u,this.transclude=!0,this.link=function(e,t,i,o,s){var a=e.$eval(i[d]);(n.templates[a]=n.templates[a]||n.$compile(a))(e,(function(e){return t.append(e)})),s((function(e){return t.append(e)}));var r=o[0],c=o[1];o[2].cellNavigator=n.$injector.instantiate(e.row?p:m,{scope:e,element:t,grid:r,container:c.container})}}return e.$inject=["$injector","$compile"],e}()}).call(this,n("5iHu"))},"LC/l":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-beast-analytics",use:"icon-small-beast-analytics-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-beast-analytics"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 8V1M8 8l5-4M8 8l4.5 4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},LN5R:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return _}));n("wAzH"),n("KXuk"),n("Tt7N"),n("01PJ"),n("Vdys"),n("xoIb"),n("Lrq8"),n("VCKY"),n("6Fqm");var i=n("5MwF"),o=n("cbVV"),s=n("JuVx"),a=n("qH3X"),r=n("wHJ2"),c=n("nsO7"),l=n("pjml"),d=n("yC9S"),u=n("2bSy"),p=n("810X"),m=n("7OC/"),h=n("9KIl"),g=n("kN1T"),b=n("xcel"),f=n("y+vt"),v=n("0JpG"),y=n("gK/k"),w=n("lEL+"),C=n("hkqm"),S=n("X/qj"),k=n("ROik"),I=n("AVdi"),D=n("o5Lu"),E=n("YGwN"),O=n("C36k"),T=n("s+Z7"),$=n("+4Px"),A=n("6CeR"),x=n("9Zs+"),P=n("dF44"),G=n("TmUJ"),L=n("2o5C"),R=n("fGDP"),M=n("uFkY"),j="ultra.components.directives.gradeGridReborn",_="bbGradeGridReborn",B=function(){function t(e,t,n,i,s,r,l,u,p,m,h,g,b){var f,v=this;this.gradeService=e,this.gradebookPermissionService=t,this.$injector=n,this.$q=i,this.$scope=s,this.$element=r,this.$attrs=l,this.bbLocalize=u,this.$compile=p,this.CourseModel=m,this.GradeColumn=h,this.timeout=g,this.toast=b,this.headerHeight=150,this.rowHeight=80,this.showFilterCriteria=!1,this.mergedCourses=[],this.initialized=!1,d.b.OnWindow("resize",c.debounce(this.setContainerHeight.bind(this),100),s),this.setContainerHeight(),(f=this.mergedCourses).push.apply(f,this.$scope.mergedCourses),s.$on(a.a.FOCUSIN_CELL,(function(e,t){v.activeColumnId=t.columnId})),s.$on(a.a.FOCUSOUT_CELL,(function(e,t){v.activeColumnId=void 0})),this.initialize(),this.setupSearchFilterListener(),this.setupColumnChangeListener(),this.$scope.$on("bb-change-overall-panel-visibility",(function(e,t,n){v.gridData.course.id!==t||v.gridData.course.isComplete()||(v.isOverallPanelShown=n)})),this.$scope.$on("grade-notation-cache-update",(function(e,t){v.updateOverallNotation()})),this.$scope.$on("bb-grades-schema-save",(function(e,t){v.refreshSchema(t)})),d.b.OnRootScope(this.$scope,"bb-grade-input-save",(function(e,t,n,i){var s=v.gridData.getColumn(n),a=s.data;a.$fetch().$asPromise().then((function(){return a.summary.$fetch().$asPromise()})).then((function(){if(s instanceof o.c)return v.updateAffectedColumns(v.getAffectedColumns(s))})).then((function(){if(i){var e=v.gridData.getRowByUserId(i);v.refreshDataCell(e,s)}else v.gridData.updateColumnByMetadata(a),v.$scope.$broadcast(P.b.COLUMN)}))})),this.$scope.$on(M.a,(function(e,t,n,i,o){var s=v.gridData.getRowById(n),a=v.gridData.getColumn(t);v.refreshDataCell(s,a)})),this.$scope.$on("course.grades.gradebook-item.submission.grade-status-change",(function(e,t){var n=v.gridData.getRowByUserId(t.userId),i=v.gridData.getColumn(t.columnId),s=i.data;s.$fetch().$asPromise().then((function(){return s.summary.$fetch().$asPromise()})).then((function(){if(i instanceof o.c)return v.updateAffectedColumns(v.getAffectedColumns(i))})).then((function(){i instanceof o.h?v.refreshDataCells(v.gridData.getGroupIdUserIdMap()[t.groupId].map((function(e){return v.gridData.getRowByUserId(e)})),[i]):v.refreshDataCell(n,i)}))})),this.$scope.$on("bb-reload-grid-view",(function(e){v.$scope.$emit("grade-notation-update",v.gridData.course.id)})),this.$scope.$on(L.b,(function(){v.refreshColumns()})),this.$scope.$on(R.a,(function(e,t){v.refreshColumns((function(){v.gridData.addUpdatedColumnFlag(t)}))})),this.canViewOverallPanel=t.canModify()}return t.prototype.updateAffectedColumns=function(e){var t=this;return this.$q.all(e.map((function(e){var t=e.data;return t.$fetch().$asPromise().then((function(){return t.summary.$fetch().$asPromise()}))}))).then((function(){e.forEach((function(e){return t.gridData.updateColumnByMetadata(e.data)}))}))},t.prototype.initialize=function(){var e=this;this.$q.all([this.bbLocalize.loadBundle("components/directives/grade/grade-grid"),this.bbLocalize.loadBundle("components/directives/grade/grade-input")]).then((function(){e.gridData=e.$injector.instantiate(s.a,{gradeGridRebornDirectiveScope:e.$scope}),e.gridData.initialize(e.$scope.course(),e.$scope.columnMetadatas).then((function(t){e.gridData.course.isComplete()?e.isOverallPanelShown=!1:e.gradeService.needsToSetupOverall(e.gridData.getColumnMetadatas(),e.gridData.course.id).then((function(t){e.isOverallPanelShown=t})),e.availableRowSelectedOptions=t.rows,e.availableColumnSelectedOptions=t.columns,e.gridOptions={rows:t.rows,columns:t.columns,rowHeight:e.rowHeight,headerHeight:e.headerHeight,headerContentHeight:89,headerBorder:!0,rowBorder:!0,callbacks:{data:function(t,n){return e.gridData.loadData(t,n)},column:e.gridData.course.isComplete()?void 0:function(t,n){return e.onClickAddColumnButton(t,n)}}},e.initialized=!0,e.handleMergedCourse()}))}))},t.prototype.refreshSchema=function(e){var t=this;this.gridData.getSchema()[e.id]=e,c.forEach(this.gridData.getColumnMetadatas(),(function(e){var n=t.gridData.getSchema()[e.gradingSchemaId];n&&n.scaleType&&l.I.ScaleType.Tabular.isEqualTo(n.scaleType)&&t.gridData.updateColumnByMetadata(e)})),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.refreshDataCells=function(e,t){var n=this;c.forEach(e,(function(e){c.forEach(t,(function(t){n.gridData.refreshDataCell(e,t)}))})),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.refreshDataCell=function(e,t){this.gridData.refreshDataCell(e,t),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.addStudentColumnBorder=function(e){e.externalGrade&&!this.gridData.isColumnExisting(e.id)&&this.gridData.getColumn(s.a.COLUMN_STUDENT).deleteBorder()},t.prototype.deleteStudentColumnBorder=function(e){e.externalGrade&&this.gridData.getColumn(s.a.COLUMN_STUDENT).addBorder()},t.prototype.updateOverallNotation=function(){var e=c.find(this.gridData.getColumns(),(function(e){return e instanceof o.k}));e&&(e.loadNotation(),this.gridData.updateColumnByMetadata(e.data)&&this.$scope.$broadcast(P.b.COLUMN))},t.prototype.getAffectedColumnsBeforeEdit=function(e){var t=this.gridData.getColumn(e.id),n=[];return t instanceof o.i&&(n=t.affectedColumnsBeforeEdit),n},t.prototype.getAffectedColumns=function(e){var t=e.findAffectedColumns(),n=c.find(this.gridData.getColumns(),(function(e){return e instanceof o.k}));return n&&t.push(n),t},t.prototype.setupSearchFilterListener=function(){var e=this;this.$scope.$on(a.a.UPDATED_FILTER_CONDITION,(function(t){var n=e.getFilterUserIds();e.$scope.$emit(a.a.GRADEBOOK_USER_SELECTED,n)})),i.a.features.gradebookSearchFilterM3?(this.$scope.$on(a.a.GRADEBOOK_USER_SELECTED,(function(t,n){var i=e.availableRowSelectedOptions;n&&n.length>0?e.$scope.$broadcast(P.b.ROW,c.intersectionWith(i,n,(function(e,t){return e.userId===t}))):i.length!==e.gridOptions.rows.length&&(e.searchedResult&&"user"===e.searchedResult.type?e.$scope.$broadcast(P.b.ROW,[]):e.$scope.$broadcast(P.b.ROW,i))})),this.$scope.$on(a.a.GRADEBOOK_CLEAR_SELECTED,(function(t,n){if(n)e.clearCheckedMergedCourse();else{var i=e.getAvailableRowSelectedOptions();e.availableRowSelectedOptions&&e.availableRowSelectedOptions.length!==e.gridOptions.rows.length&&e.$scope.$broadcast(P.b.ROW,i),e.filteredColumns&&e.filteredColumns.length!==e.availableColumnSelectedOptions.length&&e.$scope.$broadcast(P.b.COLUMN,e.availableColumnSelectedOptions),e.ids&&(e.ids=null)}e.handleMergedCourse()}))):(this.$scope.$on(a.a.GRADEBOOK_USER_SELECTED,(function(t,n){var i=e.availableRowSelectedOptions;n?(e.filteredColumns&&e.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED),e.$scope.$broadcast(P.b.ROW,c.intersectionWith(i,n,(function(e,t){return e.userId===t})))):i.length!==e.gridOptions.rows.length&&e.$scope.$broadcast(P.b.ROW,i)})),this.$scope.$on(a.a.GRADEBOOK_CLEAR_SELECTED,(function(t){e.availableRowSelectedOptions&&e.availableRowSelectedOptions.length!==e.gridOptions.rows.length&&e.$scope.$broadcast(P.b.ROW,e.availableRowSelectedOptions),e.filteredColumns&&e.filteredColumns.length!==e.availableColumnSelectedOptions.length&&(e.$scope.$broadcast(P.b.COLUMN,e.availableColumnSelectedOptions),e.clearFilteredColumns()),e.ids&&(e.ids=null)}))),this.$scope.$on(a.a.GRADEBOOK_COLUMN_SELECTED,(function(t,n){i.a.features.gradebookSearchFilterM3||e.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED);var o=e.availableColumnSelectedOptions;e.filterColumns((function(e,t){return c.filter(e,(function(e){return e.filterByColumId(t)}))}),n,o)})),this.$scope.$on(a.a.GRADEBOOK_CATEGORY_SELECTED,(function(t,n){i.a.features.gradebookSearchFilterM3||e.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED);var o=e.availableColumnSelectedOptions;e.ids=n,e.filterColumns((function(e,t){return c.filter(e,(function(e){return e.filterByCategoryId(t)}))}),n,o)})),this.$scope.$on(a.a.SHOW_FILTER_CRITERIA,(function(t,n){e.showFilterCriteria=n})),this.$scope.$on(a.a.CLOSE_FILTER_PANEL,(function(t,n){e.showFilterCriteria=n}))},t.prototype.setupColumnChangeListener=function(){var e=this;this.$scope.$on(D.c,(function(t,n,i){n.summary.$fetch().$asPromise().then((function(){e.addStudentColumnBorder(n),e.updateColumns(n),e.updateFilteredColumns(),e.updateCategroyColumns(),e.filteredColumns&&e.toast.show({messageKey:"components.directives.grade.grid.newItemAdded",icon:"icon-check",toastStatus:"success"})}))})),this.$scope.$on("content-update",(function(t,n){if(n.isScorm()){var i=n.getScormGradebookItems().map((function(t){return e.$scope.course().gradebook.columns.$buildRaw(t.gradingColumn)}));e.$q.all(i.map((function(e){return e.ui={content:n},e.summary.$fetch().$asPromise()}))).then((function(){i.forEach((function(t){return e.updateColumns(t)}))}))}if(n.isDiscussion()){var o=e.gridData.getColumnMetadataByContentId(n.id);c.isUndefined(o)||e.gridData.initializeGroupsMemberships().then((function(){return o.summary.$fetch().$asPromise()})).then((function(){e.updateColumns(o)}))}})),this.$scope.$on("bb-delete-column",(function(t,n){var i=e.gridData.getColumn(n.id);e.deleteStudentColumnBorder(n);var s=e.$q.when();if(i instanceof o.c){var r=e.getAffectedColumns(i);s=e.$q.all(r.map((function(e){return e.data.$fetch().$asPromise()}))).then((function(){r.forEach((function(t){return e.gridData.updateColumnByMetadata(t.data)}))}))}s.then((function(){e.gridData.deleteColumnById(n.id),c.remove(e.filteredColumns,(function(e){return e.data.id===n.id})),e.$scope.$broadcast(P.b.COLUMN),e.timeout((function(){var t=e.$element.find(":focus").parents("bb-grade-grid-column-header-reborn").data("col");c.isUndefined(t)||e.$scope.$broadcast(a.a.FOCUSIN_CELL,{columnId:t.id})}),e.$scope,0,!1)}))})),this.$scope.$on("attempt-base-content-update",(function(t,n){e.updateAttempBaseContent(n)})),this.$scope.$on("attempt-base-content-update-by-regrading",(function(t,n){e.updateAttempBaseContent(n)}))},t.prototype.updateAttempBaseContent=function(e){var t=this,n=this.gridData.getColumnMetadataByContentId(e.id);c.isUndefined(n)||n.$fetch().$asPromise().then((function(){t.gridData.initializeGroupsMemberships().then((function(){return n.summary.$fetch().$asPromise()})).then((function(){t.updateColumns(n)}))}))},t.prototype.updateColumns=function(e){var t=this,n=this.getAffectedColumnsBeforeEdit(e),i=this.gridData.updateColumnByMetadata(e);if(i instanceof o.c){var s=i.findAffectedColumns();s=c.unionBy(n,s,"id");var a=c.find(this.gridData.getColumns(),(function(e){return e instanceof o.k}));a&&s.push(a),this.$q.all(s.map((function(e){return e.data.$fetch().$asPromise()}))).then((function(){s.forEach((function(e){return t.gridData.updateColumnByMetadata(e.data)})),t.$scope.$broadcast(P.b.COLUMN)}))}else this.$scope.$broadcast(P.b.COLUMN)},t.prototype.setContainerHeight=function(){var t=e(".course-grades-header-buttons-wrapper");this.$element.find(".grade-grid-container").css("top",t.offset().top+t.outerHeight())},t.prototype.getRowCount=function(){var e=this.getFilterUserIds();return this.searchedResult&&"user"===this.searchedResult.type?1:e&&e.length>0?e.length:this.getGridData().getRowCount()},t.prototype.getGridData=function(){return this.gridData},t.prototype.getElement=function(){return this.$element},t.prototype.onClickAddColumnButton=function(t,n){var i=this,o=c.isUndefined(n)||"left"===n.position?"start":n.id,s="grade-grid-add-column-menu-reborn-"+o;if(!this.isMenuExisting(s)){var a=e(t.target).offset();a&&(a.top+=30);var r=this.$scope.$new(!0);r.adjustPosition=function(e){var t=a.left+e.width(),n=i.getGradeGridContainerElementRight();t>n&&(a.left-=t-n+Object(G.a)()),e.offset(a)},r.positionAfter=o,r.attendanceColumnExists=this.isAttendanceExisting(),r.attendanceIsAvailable=this.attendanceIsAvailable,this.popupMenu(s,x,r),this.timeout((function(){var o=i.getPopupMenu();o.on("keydown",(function(s){s.keyCode===$.g||s.keyCode===$.u?(o.data("destroy")(),e(t.target).click(),e(t.target).focus(),s.preventDefault(),s.stopPropagation()):$.y(s)&&i.$scope.$broadcast(P.b.FOCUS_CELL,void 0,n)})),i.getMenuitems().first().focus()}),r,0,!1),t.preventDefault(),t.stopPropagation()}},t.prototype.getPopupMenu=function(){return this.$element.find("[bb-grade-grid-menu-reborn]")},t.prototype.getMenuitems=function(){return this.getPopupMenu().find("li>:tabbable")},t.prototype.getGradeGridContainerElement=function(){return this.$element.children("#grade-grid-container")},t.prototype.getGradeGridContainerElementRight=function(){var e=this.getGradeGridContainerElement();return e.offset().left+e.width()},t.prototype.getGradeGridContainerElementBottom=function(){var e=this.getGradeGridContainerElement();return e.offset().top+e.height()},t.prototype.popupMenu=function(e,t,n,i){n.id=e,this.showMenu(t,n,i)},t.prototype.isMenuExisting=function(e){return!!this.$element.children("#"+e).length},t.prototype.showMenu=function(e,t,n){var i=this;this.$compile(e)(t,(function(e){i.$element.append(e),c.isUndefined(n)||e.offset(n)}))},t.prototype.isAttendanceExisting=function(){var e=this;return!!this.availableColumnSelectedOptions.find((function(t){return e.gridData.getColumnMetadata(t.id)&&e.gridData.getColumnMetadata(t.id).isAttendance()}))},Object.defineProperty(t.prototype,"attendanceIsAvailable",{get:function(){return this.$scope.attendanceIsAvailable&&this.$scope.attendanceIsAvailable()},enumerable:!0,configurable:!0}),t.prototype.itemSelected=function(e){switch(this.searchedResult=e,e.type){case"user":return this.updateMergedCourseHiddenStatus(e),this.$scope.$broadcast(a.a.GRADEBOOK_USER_SELECTED,[e.data.user.id]),this.getUsernameByUserId(e.data.user.id);case"column":return i.a.features.gradebookSearchFilterM2?(this.$scope.$emit(a.a.GRADEBOOK_COLUMN_SELECTED,[e.data.id]),e.data.getMetadata().columnName):void 0;case"category":if(i.a.features.gradebookSearchFilterM2)return this.$scope.$emit(a.a.GRADEBOOK_CATEGORY_SELECTED,[e.id]),this.getCategoryTitle(e.data.getMetadata().gradebookCategory)}},t.prototype.typeAheadSearch=function(e){var t=this.$q.defer(),n=new RegExp("^.*"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+".*$","i"),o=[],s=this.userSearchedResults(n,e);if(c.forEach(s,(function(e){o.push({type:"user",data:e})})),i.a.features.gradebookSearchFilterM2){var a=this.columnSearchedResults(n,e);c.forEach(a,(function(e){o.push({type:"column",data:e})}));var r=this.categorySearchedResults(n,e);c.forEach(r,(function(e){o.push({type:"category",data:e,id:e.data.gradebookCategory.id})})),0===o.length&&o.push({type:"noResult",data:null})}return t.resolve(o),t.promise},t.prototype.userSearchedResults=function(e,t){var n=[function(n){var i=function(n,i){return e.test(n)&&0===n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())&&t.length>i};return i(n.user.givenName+" "+n.user.familyName,n.user.givenName.length)||i(""+n.user.familyName+n.user.givenName,n.user.familyName.length)},function(t){return e.test(""+t.user.givenName)},function(t){return e.test(""+t.user.familyName)},function(t){return t.user.studentId&&e.test(t.user.studentId)}],i=this.getAvailableRowSelectedOptions();return c.orderBy(i.filter((function(e){var i=0,o=n.findIndex((function(t){return t(e)}));switch(o){case 1:i=e.user.givenName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());break;case 2:i=e.user.familyName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())+.5;break;case 3:i=e.user.studentId.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())+1e3}return e.ui._weight=i,o>=0})),["ui._weight","user.givenName","user.familyName"],["asc","asc","asc"])},t.prototype.columnSearchedResults=function(e,t){var n=[function(t){return e.test(""+t.data.columnName)}];return c.orderBy(c.filter(this.availableColumnSelectedOptions,(function(e){return!(e instanceof o.l||e instanceof o.k)})).filter((function(e){var i=0,o=n.findIndex((function(t){return t(e)}));return-1!==o&&(i=e.data.columnName&&e.data.columnName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=i,o>=0})),["weight","data.columnName"],["asc","asc"])},t.prototype.categorySearchedResults=function(e,t){var n=this,i=[function(t){var i=n.getCategoryTitle(t.data.gradebookCategory);return e.test(""+i)}],o=c(this.availableColumnSelectedOptions).filter((function(e){return!!e.data.gradebookCategory})).uniqBy((function(e){return e.data.gradebookCategory.id})).value();return c.orderBy(o.filter((function(e){var o=0,s=i.findIndex((function(t){return t(e)})),a=n.getCategoryTitle(e.data.gradebookCategory);return-1!==s&&(o=a.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=o,s>=0})),["weight","data.categoryTitle"],["asc","asc"])},t.prototype.search=function(e){var t=this.getAvailableRowSelectedOptions().find((function(t){return(t.user.givenName+" "+t.user.familyName).toLocaleLowerCase()===e.toLocaleLowerCase()||(""+t.user.familyName+t.user.givenName).toLocaleLowerCase()===e.toLocaleLowerCase()||t.user.studentId&&t.user.studentId.toLocaleLowerCase()===e.toLocaleLowerCase()})),n=this.availableColumnSelectedOptions.find((function(t){return(""+t.data.columnName).toLocaleLowerCase()===e.toLocaleLowerCase()})),i=this.availableColumnSelectedOptions.find((function(t){return t.data.gradebookCategory&&(""+t.data.gradebookCategory.title).toLocaleLowerCase()===e.toLocaleLowerCase()}));return t?this.itemSelected({type:"user",data:t}):n?this.itemSelected({type:"column",data:n}):i?this.itemSelected({type:"category",data:i,id:i.data.gradebookCategory.id}):void 0},t.prototype.clearTypeAheadSearch=function(){i.a.features.gradebookSearchFilterM2||i.a.features.gradebookSearchFilterM3?(this.searchedResult=null,c.forEach(this.mergedCourses,(function(e){e.ui.hidden=!1})),this.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED)):this.$scope.$broadcast(a.a.GRADEBOOK_USER_SELECTED)},t.prototype.getUsernameByUserId=function(e){return this.$element.find(".typeahead-student-name-id .typeahead-name.course_user"+e).text()},t.prototype.getCategoryTitle=function(e){return e.isUserDefined?e.title:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:e.localizableTitle.languageKey})},t.prototype.refreshColumns=function(e){void 0===e&&(e=c.noop),this.gridData.refreshAllColumns(),e(),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.filterColumns=function(e,t,n){t&&(this.filteredColumns=e(n,t),this.$scope.$broadcast(P.b.COLUMN,this.filteredColumns))},t.prototype.updateFilteredColumns=function(){var e=c.find(this.filteredColumns,(function(e){return e instanceof o.k}));this.filteredColumns&&!e&&(this.filteredColumns.push(c.find(this.availableColumnSelectedOptions,(function(e){return e instanceof o.k}))),this.$scope.$broadcast(P.b.COLUMN,this.filteredColumns))},t.prototype.updateCategroyColumns=function(){var e=this.availableColumnSelectedOptions;this.filterColumns((function(e,t){return c.filter(e,(function(e){return e.filterByCategoryId(t)}))}),this.ids,e)},t.prototype.clearFilteredColumns=function(){this.filteredColumns&&(this.filteredColumns=null)},t.prototype.handleMergedCourse=function(){var e=this;this.mergedCourses.forEach((function(t){e.availableRowSelectedOptions&&(c.find(e.availableRowSelectedOptions,(function(e){return e.childCourseId===t.id}))||(t.ui.hidden=!0))}))},t.prototype.getCheckedMergedCourseUserIds=function(){var e=this.getFilteredRowSelectedOptions();return c.map(e,(function(e){return e.userId}))},t.prototype.getCheckedMergeCourseIds=function(){return c.filter(this.mergedCourses,(function(e){return e.ui.checked})).map((function(e){return e.id}))},t.prototype.getFilteredRowSelectedOptions=function(){var e=this.getCheckedMergeCourseIds();return this.availableRowSelectedOptions&&this.availableRowSelectedOptions.filter((function(t){return c.find(e,(function(e){return e===t.childCourseId}))}))},t.prototype.getAvailableRowSelectedOptions=function(){return this.getCheckedMergedCourseUserIds().length>0?this.getFilteredRowSelectedOptions():this.availableRowSelectedOptions},t.prototype.updateMergedCourseHiddenStatus=function(e){this.mergedCourses&&c.forEach(this.mergedCourses,(function(t){t.ui.checked||(t.id!==e.data.childCourseId?t.ui.hidden=!0:t.ui.hidden=!1)}))},t.prototype.filteredResultsInCheckedMergedCourse=function(){if(this.searchedResult&&this.searchedResult.data)return this.filteredUserInCheckedMergedCourse()?[this.searchedResult.data.user.id]:null},t.prototype.clearCheckedMergedCourse=function(){var e=this;c.forEach(this.mergedCourses,(function(t){t.ui.checked=!1,e.searchedResult&&"user"===e.searchedResult.type?t.id!==e.searchedResult.data.childCourseId&&(t.ui.hidden=!0):t.ui.hidden=!1})),this.$scope.$emit(a.a.GRADEBOOK_CLEAR_SELECTED),this.searchedResult&&this.filterByResultsType()},t.prototype.getFilterUserIds=function(){var e=this.getCheckedMergeCourseIds(),t=null,n=null;return this.searchedResult&&"user"===this.searchedResult.type?(t=this.filteredResultsInCheckedMergedCourse(),n=e&&e.length>0?[]:[this.searchedResult.data.user.id]):n=this.getCheckedMergedCourseUserIds(),t||n},t.prototype.filteredUserInCheckedMergedCourse=function(){var e=this,t=this.getCheckedMergedCourseUserIds();return c.some(t,(function(t){return t===e.searchedResult.data.user.id}))},t.prototype.filterByResultsType=function(){switch(this.searchedResult.type){case"user":return void this.$scope.$emit(a.a.GRADEBOOK_USER_SELECTED,[this.searchedResult.data.user.id]);case"column":return void this.$scope.$emit(a.a.GRADEBOOK_COLUMN_SELECTED,[this.searchedResult.data.id]);case"category":this.$scope.$emit(a.a.GRADEBOOK_CATEGORY_SELECTED,[this.searchedResult.id])}},t.$inject=[D.h,S.b,"$injector","$q","$scope","$element","$attrs",v.serviceName,"$compile",l.o.serviceName,l.F.serviceName,w.b,C.b],t}(),F=function(){function e(e){this.$injector=e,this.restrict="E",this.template=A,this.controller=B,this.controllerAs="gg",this.scope={course:"&",columnMetadatas:"<columns",attendanceIsAvailable:"&?",mergedCourses:"<"}}return e.$inject=["$injector"],e}();r.module(j,[y.b,u.a,p.a,m.a,h.a,g.a,b.a,f.a,k.a,I.a,O.a,T.a,S.a,C.a,E.a]).directive(_,["$injector",function(e){return e.instantiate(F)}])}).call(this,n("5iHu"))},LTOG:function(e,t,n){"use strict";(function(e){var n=function(){function t(e,t){this.scope=e,this.timeout=t}return t.prototype.highlight=function(t){t.isUpdated?(e(".rb-col-"+t.id).addClass("highlighted"),delete t.isUpdated,this.timeout((function(){e(".rb-col-"+t.id).removeClass("highlighted")}),this.scope,6e3,!1)):e(".rb-col-"+t.id).removeClass("highlighted")},t}();t.a=n}).call(this,n("5iHu"))},LdA1:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var i=n("D57K"),o=(n("KCTV"),n("wHJ2")),s=n("aHpC"),a=n("JfV0"),r=n("0JpG"),c=n("Fvsw"),l=n("hqh6"),d=n("wgY5"),u=n("e6jQ"),p=n("T0fj"),m=n("q0yA"),h="ultra.directives.contentVisibilityRulesOptions",g=function(){function t(e,t,n,i,o,s){this.$ngRedux=e,this.scope=t,this.element=n,this.form=i,this.context=o,this.bbLocalize=s,this.id=u.a(),this.scope.contentVisibilityRulesOptions=this,this.dateFrom=i.dateFrom,this.timeFrom=i.timeFrom,this.dateUntil=i.dateUntil,this.timeUntil=i.timeUntil,this.subscribeToReduxChanges();var a=this.bbLocalize.getAppLocaleISO();this.getLocaleSettings&&this.getLocaleSettings({locale:a}),this.startDateSelect=!!this.scope.startDate,this.untilDateSelect=!!this.scope.endDate,this.setWatchers(),this.setValidators();var r=u.a();this.dateFromContainer=r+"-date-from-container",this.dateUntilContainer=r+"-date-until-container"}return t.prototype.shouldFocus=function(e){return void 0!==this.scope.dateFieldFocus&&"undefined"!==this.scope.dateFieldFocus&&this.scope.dateFieldFocus===e},t.prototype.handleCheckClick=function(t){var n=e(t.target),i=this.element.find(".from-check").prop("checked"),o=this.element.find(".until-check").prop("checked");if(this.scope.$emit("date-selection-changed",i,o),this.scope.isAllowedEmpty?i||o||this.form.dateFrom.$setValidity("startAndOrEndDate",!0):i||o?this.form.dateFrom.$setValidity("startAndOrEndDate",!0):(this.form.dateFrom.$setTouched(),this.form.dateFrom.$setValidity("startAndOrEndDate",!1)),this.form.dateUntil.$validate(),this.form.timeUntil.$validate(),this.form.dateFrom.$validate(),this.form.timeFrom.$validate(),n.hasClass("from-check")&&i)this.scope.startDate=this.context.getServerTime(),this.scope.startTime=this.context.getServerTime();else if(n.hasClass("until-check")&&o){var s=this.scope.startDate>this.context.getServerTime()?this.scope.startDate:this.context.getServerTime();this.scope.endDate=this.addDays(s,1),this.scope.endTime=this.addDays(s,1)}this.updateStartAndEndTime()},t.prototype.addDays=function(e,t){return new Date(e.getTime()+24*t*60*60*1e3)},t.prototype.setErrorString=function(e,t){var n=(t?"start":"end")+(e?"DateValidationError":"TimeValidationError");return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.content-visibility."+n})},t.prototype.isDateRequired=function(e){var t=this.element.find("#from-check-"+this.id).prop("checked"),n=this.element.find("#until-check-"+this.id).prop("checked");return!!(e?t:n)},t.prototype.setWatchers=function(){var e=this;this.scope.$watch("startDate",(function(t){e.isValidDate(t)&&e.scope.startTime!==t&&(e.scope.startTime=t),e.onChange()})),this.scope.$watch("startTime",(function(t){e.isValidDate(t)&&e.scope.startDate!==t&&(e.scope.startDate=t),e.onChange()})),this.scope.$watch("endDate",(function(t){e.isValidDate(t)&&e.scope.endTime!==t&&(e.scope.endTime=t),e.onChange()})),this.scope.$watch("endTime",(function(t){e.isValidDate(t)&&e.scope.endDate!==t&&(e.scope.endDate=t),e.onChange()})),this.scope.$watch("startDateSelect",(function(t){e.scope.isAllowedEmpty&&(e.startDateSelect=t),!1===t&&e.scope.isAllowedEmpty&&(e.scope.startTime=null,e.scope.startDate=null)})),this.scope.$watch("untilDateSelect",(function(t){e.scope.isAllowedEmpty&&(e.untilDateSelect=t),!1===t&&e.scope.isAllowedEmpty&&(e.scope.endTime=null,e.scope.endDate=null)}))},t.prototype.setValidators=function(){var e=this,t=this.scope.$watch("form.dateFrom",(function(n,i){e.form.dateFrom&&(e.scope.isAllowedEmpty?e.form.dateFrom.$validators.required=function(t){return!e.startDateSelect||e.startDateSelect&&null!=t||e.scope.isAllowedEmpty&&null===t}:e.form.dateFrom.$validators.required=function(t){return!e.startDateSelect||e.startDateSelect&&null!=t},e.form.timeFrom.$validators.required=function(t){return!e.startDateSelect||e.startDateSelect&&""!==e.timeFrom.$viewValue},e.scope.isAllowedEmpty?e.form.dateUntil.$validators.required=function(t){return!e.untilDateSelect||e.untilDateSelect&&null!=t||e.scope.isAllowedEmpty&&null===t}:e.form.dateUntil.$validators.required=function(t){return!e.untilDateSelect||e.untilDateSelect&&null!=t},e.form.timeUntil.$validators.required=function(){return!e.untilDateSelect||e.untilDateSelect&&""!==e.timeUntil.$viewValue},e.form.dateFrom.$validators.untilAfterStart=function(t){return e.form.dateUntil.$setTouched(),e.form.dateUntil.$validate(),!0},e.form.dateFrom.$validators.startBeforeDueDate=function(t){return!e.startDateSelect||t&&e.isDueDateAfterStartDate(t)},e.form.dateUntil.$validators.untilAfterStart=function(t){return!e.untilDateSelect||!e.startDateSelect||!e.isStartDateValid()||t&&e.isValidDateOrder(e.scope.startDate,t)},e.form.dateUntil.$validators.untilDueDate=function(t){return!e.untilDateSelect||t&&e.isDueDateBeforeEndDate(t)},e.onChange(),e.element.find(".restricted-form").focusout((function(){e.form.$setDirty(),e.form.dateFrom.$validate(),e.form.timeFrom.$validate(),e.form.dateUntil.$validate(),e.form.timeUntil.$validate()})),t())}))},t.prototype.onChange=function(){this.scope.onchangeFunc&&this.scope.onchangeFunc()},t.prototype.onBlur=function(){this.scope.onblurFunc&&this.scope.onblurFunc()},t.prototype.noDateErrorsExist=function(){return this.isStartDateValid()&&this.isEndDateValid()},t.prototype.isStartDateError=function(){return this.startDateSelect&&!this.scope.startDate},t.prototype.isStartAndOrEndDateError=function(){return!this.startDateSelect&&!this.untilDateSelect&&!this.scope.endDate},t.prototype.isStartDateValid=function(){return!this.isStartDateError()&&!this.isStartAndOrEndDateError()&&this.isDueDateAfterStartDate(this.scope.startDate)},t.prototype.isEndDateError=function(){return this.untilDateSelect&&!this.scope.endDate},t.prototype.isEndDateBeforeError=function(){return this.untilDateSelect&&this.scope.endDate&&this.startDateSelect&&!this.isValidDateOrder(this.scope.startDate,this.scope.endDate)},t.prototype.isEndDateValid=function(){return!this.isEndDateError()&&!this.isEndDateBeforeError()&&!this.isDueDateBeforeEndDate(this.scope.endDate)},t.prototype.isValidDate=function(e){return e&&!Number.isNaN(e.getTime())},t.prototype.updateStartAndEndTime=function(){this.startDateSelect||(this.scope.startDate=null,this.scope.startTime=null),this.untilDateSelect||(this.scope.endDate=null,this.scope.endTime=null),this.noDateErrorsExist()&&(this.onChange(),this.onBlur())},t.prototype.isValidDateOrder=function(e,t){if(null==e||null==t)return!1;var n=new Date(e.getTime()),i=new Date(t.getTime());return n.setSeconds(0,0),i.setSeconds(0,0),d(i).isAfter(n)},t.prototype.isDueDateBeforeEndDate=function(e){return null==this.scope.dueDate||d(this.scope.dueDate).isBefore(e)},t.prototype.isDueDateAfterStartDate=function(e){return null==this.scope.dueDate||d(this.scope.dueDate).isAfter(e)},t.prototype.subscribeToReduxChanges=function(){var e=this,t=this.$ngRedux.connect((function(t){return{localeSettings:a.select.locale.getLocaleSettings(t,e.bbLocalize.getAppLocaleISO())}}),(function(e){return{getLocaleSettings:function(t){return e(a.actions.locale.getLocaleSettings(t))}}}))(this);this.scope.$on("$destroy",t)},t=Object(i.__decorate)([Object(i.__param)(0,Object(s.b)("$ngRedux")),Object(i.__param)(1,Object(s.b)("scope")),Object(i.__param)(2,Object(s.b)("element")),Object(i.__param)(3,Object(s.b)("form")),Object(i.__param)(4,Object(s.b)(c.b)),Object(i.__param)(5,Object(s.b)(r.serviceName))],t)}(),b=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.require="^form",this.scope={startDate:"=?",startTime:"=?",startDateSelect:"=?",endDate:"=?",endTime:"=?",untilDateSelect:"=?",onblurFunc:"&?",onchangeFunc:"&?",isReadOnlyMode:"&?",dateFieldFocus:"@?",isAllowedEmpty:"=?",dueDate:"<"},this.template=m,this.transclude={customStartDateAndTimeValidationMessages:"?bbContentVisibilityCustomStartDateAndTimeValidationMessages",customEndDateAndTimeValidationMessages:"?bbContentVisibilityCustomEndDateAndTimeValidationMessages"},this.link=function(e,n,i,o){e.contentVisibilityRulesOptions=t.$injector.instantiate(g,{scope:e,element:n,form:o})}}return e.$inject=["$injector"],e}();o.module(h,[c.a,l.a,p.a]).directive("bbContentVisibilityRulesOptions",["$injector",function(e){return e.instantiate(b)}])}).call(this,n("5iHu"))},LecS:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("IAsK");var i=n("wHJ2"),o=n("pjml"),s=n("/hmo"),a="ultra.directives.lti",r=function(){function e(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=s,this.link=function(e,t){var n=e.$watch("targetContent.contentHandler",(function(t){null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())}));!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then((function(){e.content.description=e.targetContent.description})))}}return e.$inject=[o.o.serviceName],e}();i.module(a,[]).directive("bbLtiLinkItem",["$injector",function(e){return e.instantiate(r)}])},Lrq8:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-medium-add-feedback",use:"icon-medium-add-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-add-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM12 6v10M7 11h10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},MKP7:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("D57K"),o=n("7UH7"),s=n("wHJ2"),a=n("/KQw"),r=n("0JpG"),c=n("TnpK"),l=n("+4Px"),d=n("e6jQ"),u=n("tecA"),p="ultra.directives.basicTextEditor",m=function(e){function t(t,n,i,o,s,a){var r=e.call(this,n,i,o,s,a)||this;return r.shouldPreventLineBreaking=!0,n.$on(u.b,(function(){r.updateOriginalValues(),r.isTextTouched=!1})),n.shouldPreventLineBreaking&&(r.shouldPreventLineBreaking=n.shouldPreventLineBreaking()),r}return Object(i.__extends)(t,e),t.prototype.onKeydown=function(e){this.shouldPreventLineBreaking&&e.keyCode===l.f&&(e.stopPropagation(),e.preventDefault())},t.$inject=["$q","scope","element","ctrl",r.serviceName,c.d],t}(u.a),h=function(){function e(e){var t=this;this.$injector=e,this.require=["ngModel"],this.replace=!0,this.restrict="E",this.scope={placeholderKey:"@",placeholderAttrsValues:"@",elementId:"@",readonly:"&",getInputMaxLength:"&?inputMaxLength",onchangeFunc:"&?",onblurFunc:"&?",onFocusFunc:"&",ngModel:"=",fieldRequired:"&?",plainText:"=?",validationMessage:"@?",focusOn:"@?",noValidationMessage:"&?",direction:"&?",shouldPreventLineBreaking:"&?"},this.link=function(e,n,i,o){var s=o[0];e.textEditor=t.$injector.instantiate(m,{scope:e,element:n,ctrl:s}),e.elementId||(e.elementId="text-editor-"+d.a())},this.template=o}return e.$inject=["$injector"],e}();s.module(p,[a.a,r.moduleName,c.b]).directive("bbBasicTextEditor",["$injector",function(e){return e.instantiate(h)}])},MoIS:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));n("V/65");var i=n("wHJ2"),o=n("0JpG"),s=n("tka7"),a=n("70Xn"),r=n("tmbA"),c="ultraUi.components.directives.grade.pastDueZero",l="bb-past-due-zero-confirmation",d="bb-past-due-zero-settings",u="course.grades.pastDue.confirmationNeeded.",p=function(){function e(e,t,n,i,o){var s=this;this.scope=e,this.element=t,this.attrs=n,this.$modal=i,this.bbLocalize=o,this.scope.$on(l,(function(e,t){s.displayPastDueConfirmation(t)})),this.scope.$on(d,(function(e,t){s.isPastZeroAssigned=t,s.displayPastDueConfirmation()}))}return e.prototype.displayPastDueConfirmation=function(e){var t=this;e?this.initModalTranslateOptions(e):this.initModalTranslateOptions();var n=!1;this.$modal.open({template:e?a:r,scope:this.scope,resolve:{translations:[o.serviceName,function(e){return e.loadBundle("course/grades/pastDue/confirmationNeeded")}]},controller:["$scope",o.serviceName,function(e,i){e.okAction=function(){e.$close(),n=!0},e.cancelAction=function(){e.$close(),n=!1,t.scope.cancelCallback&&t.scope.cancelCallback()}}]}).result.then((function(){n&&t.scope.confirmCallback&&(t.isPastZeroAssigned?t.scope.confirmCallback():t.scope.confirmCallback({args:{choice:t.scope.modalTranslateOptions.choiceModal}}))}),(function(){t.scope.dismissCallback&&t.scope.dismissCallback()}))},e.prototype.initModalTranslateOptions=function(e){if(e)return this.scope.modalTranslateOptions={title:{key:u+"title"},instructions:{key:u+e+".instructions"}};var t=this.isPastZeroAssigned?"assign":"unassign";if(this.scope.modalTranslateOptions={title:{key:u+t+".title"},instructions:{key:u+t+".instructions"},confirm:{key:u+t+".confirm"},cancel:{key:u+t+".cancel"}},!this.isPastZeroAssigned){var n=[{id:"past-due-unassign-retain",name:"pastDueUnassignZero",value:s.a.Retain.toString(),localizedKey:u+"unassign.choices.retain"},{id:"past-due-unassign-delete",name:"pastDueUnassignZero",value:s.a.Delete.toString(),localizedKey:u+"unassign.choices.delete",descriptionKey:u+"unassign.choices.instructions"}];Object.assign(this.scope.modalTranslateOptions,{choices:n,choiceModal:n[0].value})}return this.scope.modalTranslateOptions},e.$inject=["scope","element","attrs","$modal",o.serviceName],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.scope={confirmCallback:"&?",cancelCallback:"&?",dismissCallback:"&?"},this.link=function(e,n,i){e.pastDueZero=t.$injector.instantiate(p,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[]).directive("bbPastDueZero",["$injector",function(e){return e.instantiate(m)}])},MzGC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("D57K"),o=n("wHJ2"),s=n("gIKX"),a=n("0JpG"),r=n("yMoE"),c=n("o5Lu"),l=n("8jzW"),d=n("lEL+"),u=n("TnpK"),p="ultra.components.directives.grade.input.userAttemptGradeInput",m=function(e){function t(t,n,i,o,s,a,r,c,l,d){var u=e.call(this,t,n,i,o,s,a,r,c,l)||this;return u.$injector=n,u.scope=i,u.bbLocalize=a,u.scoreProviderHelper=d,u}return Object(i.__extends)(t,e),t.prototype.afterSave=function(e){this.gradeDisplayItem.displayGrade=e.displayGrade,this.scope.attempt.displayGrade=e.displayGrade},t.prototype.getRubricEvalStateAndArgs=function(){return{state:this.scoreProviderHelper.gradingWithRubricStateRef(this.scope.column().scoreProviderHandle,null),args:{userId:this.scope.forUser().$pk||this.scope.forUser().id,groupId:null,courseId:this.scope.column().courseId,columnId:this.scope.column().id,contentId:this.scope.column().contentId,gradeId:this.scope.attempt.gradeId,attemptId:this.scope.attempt.id}}},t.prototype.getWatchGroup=function(){return e.prototype.getWatchGroup.call(this).concat(["attempt.id","attempt.displayGrade"])},t.prototype.instantiateGradeDisplayItem=function(){return this.$injector.instantiate(r.a,{gradeDetail:null,scope:this.scope})},t.prototype.isRubricEvalMode=function(){return this.isRubricAssociated()},t.prototype.refreshInputBox=function(){e.prototype.refreshInputBox.call(this),this.gradeDisplayItem.displayGrade=this.getDisplayGrade(),this.updateGradeColor()},t.prototype.getDisplayGrade=function(){var e,t;return(null===(t=null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.displayGrade)||void 0===t?void 0:t.score)?this.scope.gradeDetail.displayGrade:this.scope.attempt.displayGrade},t.prototype.setupGradeSubmission=function(){var e=this.createGradeSubmissionNow();return e.attemptId=this.scope.attempt.id,e.userId=this.scope.forUser().id,e.clearGrade&&(e.setAttemptToEmpty=!0),this.$q.when(e)},t.$inject=["$q","$injector","scope","element","form",a.serviceName,c.h,d.b,u.d,l.c],t}(s.b),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.require="^form",this.template=s.d,this.scope={attempt:"=",gradeDetail:"=",column:"&",disableRubricEvalClick:"&?",forUser:"&",id:"@",inputAriaLabel:"@?",readonly:"&"},this.link=function(e,n,i,o){e.input=t.$injector.instantiate(m,{scope:e,element:n,form:o})}}return e.$inject=["$injector"],e}();o.module(p,[s.c]).directive("bbUserAttemptGradeInput",["$injector",function(e){return e.instantiate(h)}])},NZ4S:function(e,t){e.exports='<bb-modal role="alertdialog" class="notification upload-disallowed-file-type upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.fileTypeError.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.fileTypeError.title" aria-describedby="gradebook-upload-failed"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n  <div name="modal-contents">\n    <p id="gradebook-upload-failed" bb-translate="course.grades.grades-upload-settings.fileTypeError.content"></p>\n  </div>\n  <a name="modal-footer-help-link" \n     href="" \n     bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n     target="_blank" \n     bb-translate="course.grades.grades-upload-settings.helpButton" \n     rel="noopener noreferrer"\n     analytics-id="course.grades.grades-upload-settings.helpButton">\n  </a>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsError.closeButton.button">\n    <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},Np64:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n("nsO7");function o(e,t){var n=i.findIndex(e,t);if(null!=n){var o=e.splice(n,1)[0];e.splice(0,0,o)}}function s(e,t){var n=t.length-1;return{next:function(){return t[e<n?e+1:0]},previous:function(){return t[e<=0?n:e-1]}}}},Nyb7:function(e,t){e.exports='<div class="complex-statistic-contents"></div>'},O3Pz:function(e,t){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.getCourseColorClass()}}"\n       ng-class="{ \'pending\': displayGrade.attempt.isNeedsGrading() }"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target">\n    <span class="value" bb-translate>{{displayGrade.attemptStatus}}</span>\n  </div>\n</div>\n'},Ocaa:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var i=n("D57K"),o=(n("0lMW"),n("gORw"),n("wHJ2")),s=n("nbDY"),a=n.n(s),r=n("0JpG"),c=n("2a+M"),l=n("+4Px"),d=n("pjml"),u=n("lEL+"),p=n("GbAM"),m=n("Qbdf"),h=n("nYZ0"),g=n("W6wm"),b="ultra.components.directives.bbDragHandle",f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Vertical=new t("vertical"),t.Horizontal=new t("horizontal"),t.Omnidirectional=new t("omnidirectional"),t}(a.a),v=function(){function t(t,n,i,o,s,a){var r=this;this.$rootScope=t,this.bbLocalizeService=n,this.dragDropService=i,this.timeout=o,this.currentCourseService=s,this.contentService=a,this.bbDragMoveTimeoutId=null,this.scope={dragItemId:"@",dragItemName:"@",dragItemType:"@",dragDirection:"@?",dragItemContext:"@?"},this.restrict="A",this.link=function(t,n,i){r.dragDirection=f.parse(t.dragDirection)||f.Vertical,r.dragDropService.currentDragContext=t.dragItemContext,e(n).parent().attr("role","application"),n.on("mousedown",(function(i){function o(e){e.stopImmediatePropagation()}i.preventDefault(),document.addEventListener("click",o,!0),r.dragStart(i,n,t),e(document).on("mousemove.reorder",(function(e){r.dragMove(e,t)})),e(document).on("mouseup.reorder",(function(i){r.dragEnd(i,n),e(document).off("mousemove.reorder"),e(document).off("mouseup.reorder"),n.on("$destroy",(function(){document.removeEventListener("click",o,!0)})),r.timeout((function(){document.removeEventListener("click",o,!0)}),t,0,!1)}))})),n.on("keydown",(function(n){if(n.stopPropagation(),n.keyCode===l.f||n.keyCode===l.t)if(n.preventDefault(),r.dragDropService.isKeyboardDragging){var i=r.bbLocalizeService.translateSync({locale:r.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-stopped",noWrap:!0});r.$rootScope.$broadcast(p.a,i),e(document.body).removeClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-end")}else{r.dragDropService.isKeyboardDragging=!0,r.dragDropService.currentDragId=t.dragItemId,r.dragDropService.currentDragType=t.dragItemType,r.contentHasFolderChild(t),r.dragDropService.currentDropTargetId=t.dragItemId,r.dragDropService.positionBefore=t.dragItemId,e(document.body).addClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-start");var o=r.bbLocalizeService.translateSync({locale:r.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-started",params:{itemName:t.dragItemName},noWrap:!0});r.$rootScope.$broadcast(p.a,o)}else if(n.keyCode===l.v)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-up");else if(n.keyCode===l.d)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-down");else if(n.keyCode===l.s)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-right");else if(n.keyCode===l.j)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-left");else if(n.keyCode===l.g&&(n.preventDefault(),r.dragDropService.isKeyboardDragging)){var s=r.bbLocalizeService.translateSync({locale:r.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-canceled"});r.$rootScope.$broadcast(p.a,s),e(document.body).removeClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-cancel")}})),n.on("blur",(function(){r.dragDropService.isKeyboardDragging&&(e(document.body).removeClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-cancel"))}));var o=function(e){r.dragStart(e,n,t)},s=function(e){r.dragMove(e,t)},a=function(e){r.dragEnd(e,n)},c=function(){r.dragCancel()};n[0].addEventListener("touchstart",o,!1),n[0].addEventListener("touchmove",s,!1),n[0].addEventListener("touchend",a,!1),n[0].addEventListener("touchcancel",c,!1),t.$on("$destroy",(function(){n[0].removeEventListener("touchstart",o,!1),n[0].removeEventListener("touchmove",s,!1),n[0].removeEventListener("touchend",a,!1),n[0].removeEventListener("touchcancel",c,!1)}))}}return t.prototype.contentHasFolderChild=function(e){var t=this;if(d.r.ContentHandler.Folder.isEqualTo(e.dragItemType)&&g.a.Discussions!==t.dragDropService.currentDragContext){var n=d.r.ContentRootNode.ROOT,i=this.currentCourseService.course,o=this.contentService.findRootNode(i,n);this.contentService.getContentInContentTree(o,i.courseId,this.dragDropService.currentDragId).then((function(e){e.content&&(t.dragDropService.currentDragHasFolderChild=e.content.getChildren().$asPromise().then((function(e){return e.some((function(e){return e.isUiFolder()}))})))}))}},t.prototype.dragStart=function(t,n,i){if(this.dragDropService.currentDragElement){var o=e(".f-open-dropdown");o.length>0&&window.Foundation.libs.dropdown.close(o),this.dragDropService.currentDragElement.remove()}this.$rootScope.$broadcast("bb-drag-start"),e(document.body).addClass("bb-is-dragging"),this.dragDropService.originalElement=n.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.idOfPreviousItem=this.dragDropService.originalElement.prev(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.dragDropService.idOfNextItem=this.dragDropService.originalElement.next(".drag-element").find("[drag-item-id]").attr("drag-item-id");var s=e(".f-open-dropdown");(s.length>0&&window.Foundation.libs.dropdown.close(s),this.$rootScope.$broadcast("foundation-offcanvas-close-panel"),d.r.ContentHandler.Folder.isEqualTo(i.dragItemType))&&(this.$rootScope.$broadcast("close-folder-immediately-by-id",i.dragItemId),this.dragDropService.currentDragElement.find(".img-icon-folder-open").removeClass("img-icon-folder-open").addClass("img-icon-folder"));this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass).addClass("mouse-touch-drag"),this.dragDropService.originalElement.after(this.dragDropService.currentDragElement),this.dragDropService.currentDragId=i.dragItemId,this.dragDropService.currentDragType=i.dragItemType,this.contentHasFolderChild(i),this.dragDropService.currentDropTargetId=i.dragItemId,this.dragDropService.positionBefore=i.dragItemId,this.dragDropService.createDropPlaceholderElement(this.dragDropService.currentDragElement),this.dragMove(t,i)},t.prototype.dragEnd=function(t,n){e(document.body).removeClass("bb-is-dragging"),t.preventDefault(),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.movableElementClass),this.dragDropService.currentDragElement.removeAttr("style"),this.$rootScope.$broadcast("bb-drag-end")},t.prototype.dragCancel=function(){this.$rootScope.$broadcast("bb-drag-cancel"),e(document.body).removeClass("bb-is-dragging")},t.prototype.dragMove=function(e,t){var n=this;e.preventDefault();var i,o,s,a,r=this.dragDropService.currentDragElement.find("[bb-drag-handle]"),l=this.dragDropService.originalElement.find("[bb-drag-handle]").offset(),d=r.offset(),u=this.dragDropService.currentDragElement.offset(),p=d.left-u.left,m=d.top-u.top,h=p+r.width()/2,g=m+r.height()/2,b=f.Horizontal.isEqualTo(this.dragDirection)||f.Omnidirectional.isEqualTo(this.dragDirection),v=f.Vertical.isEqualTo(this.dragDirection)||f.Omnidirectional.isEqualTo(this.dragDirection);e.touches?(i=b?e.touches[0].pageX-h:u.left,o=v?e.touches[0].pageY-g:u.top,s=b?e.touches[0].pageX:l.left,a=v?e.touches[0].pageY:l.top):(i=b?e.pageX-h:u.left,o=v?e.pageY-g:u.top,s=b?e.pageX:l.left,a=v?e.pageY:l.top),this.dragDropService.currentDragElement.offset({left:i,top:o}),this.dragDropService.pointerPosition={left:s,top:a},this.dragDropService.scrollDragDropItemsContainer(this.dragDropService.pointerPosition.top,c.a.SCROLLING_CONSTANTS.mouseInteractionDistanceToScroll),this.timeout.cancel(this.bbDragMoveTimeoutId),this.bbDragMoveTimeoutId=this.timeout((function(){n.$rootScope.$broadcast("bb-drag-move")}),t,150,!1)},t.$inject=["$rootScope",r.serviceName,c.d,u.b,m.e,h.f],t}();o.module(b,[r.moduleName,c.c,u.a,m.b,h.d]).directive("bbDragHandle",["$injector",function(e){return e.instantiate(v)}])}).call(this,n("5iHu"))},P2DR:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-one-drive",use:"icon-small-one-drive-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-one-drive"><path d="M4 12s-3 0-3-2.5S3 7 3 7s-.4041-2.5 1.5-3.5C6.4041 2.5 8 4 8 4s2-1.5 4 0 1 4 1 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M13 14H6s-2 0-2-2 2-2 2-2 0-2 1.5-2.5S10 8 10 8s1.5-1.5 3 0 .5 3 .5 3 1.5 0 1.5 1.5-2 1.5-2 1.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},Poqp:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.kloudless.modal.authorizationRequiredTitle"\n          analytics-id-tag-prefix="components.directives.kloudless.authorizationRequired">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.kloudless.modal.authorizationRequiredMessage</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="global.close">\n    <bb-translate>global.close</bb-translate>\n  </button>\n</bb-modal>\n'},Q6Ow:function(e,t,n){},Qc1G:function(e,t,n){},QzaB:function(e,t){e.exports='<div bb-load-bundle="components/directives/search-box">\n  <bb-svg-icon size="small" icon="search"></bb-svg-icon>\n  <input \n    bb-translate-attrs="{ \'placeholder\': \'{{::$ctrl.placeholderKey}}\', \'aria-label\': \'{{::$ctrl.placeholderKey}}\'}"\n    type="text"\n    ng-model="$ctrl.searchText" \n    ng-model-options="{debounce: 800, getterSetter: true}"\n    analytics-id="{{::$ctrl.analyticsIdTagPrefix}}.input.text"\n  />\n  <button bb-translate-attrs="{\'aria-label\': \'components.directives.search-box.clearSearch\'}"\n    ng-if="$ctrl._searchText"\n    ng-click="$ctrl.clearSearchInput()"\n    analytics-id="{{::$ctrl.analyticsIdTagPrefix}}.clear.button"\n  >\n    <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n  </button>\n</div>\n'},"R+Yw":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var i=n("Vsv2"),o=n("pjml"),s="ultraUi.components.services.cloudDrive.rteKloudlessModal",a="RteKloudlessService",r=i.a.KLOUDLESS.toString(),c=function(){function e(e,t,n){this.$q=e,this.cloudDriveService=t,this.CloudDriveModel=n}return e.prototype.initialize=function(){var e=this;return this.cloudDriveService.isCloudServiceAvailable(i.a.parse(r)).then((function(t){return e.isCloudServiceAvailable=t}))},e.prototype.openFilePicker=function(e){var t=this;return this.cloudDriveService.cloudDriveStorage[r].openFilePicker(e,!0).then((function(e){if(e){var n=[];return e.forEach((function(i){var o=function(e){return e.account+"|"+e.id}(i),s=t.CloudDriveModel.$new(r).contents.$new(o).$fetch({accessToken:e[0].bearer_token.key}).$asPromise();n.push(s)})),t.$q.all(n).then((function(t){return t.map((function(t){return{id:t.id,kloudlessAccessToken:e[0].bearer_token.key,name:t.name,size:t.size,type:t.type,updatedTime:t.updatedTime,webLocation:t.webLocation}}))}))}return t.$q.reject()}))},e.prototype.getModalCallback=function(e){var t=this;return function(){return t.cloudDriveService.cloudDriveStorage[r]?t.openFilePicker(e):t.cloudDriveService.initializeCloudDrive(i.a.KLOUDLESS).then((function(){return t.openFilePicker(e)}))}},e.$inject=["$q",i.c,o.j.serviceName],e}();angular.module(s,[i.b]).service(a,c)},R4kC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var i=n("D57K"),o=n("nsO7"),s=n("wHJ2"),a=n("pjml"),r=n("aHpC"),c=n("jhBu"),l=n("o5Lu"),d=n("Sa5G"),u=n("JfV0"),p="ultra.services.submissionList",m="submissionList",h=["courseCardColorIndex","id","isAvailable","dueDateExceptionType","timeLimitExceptionType","role","courseRole","user.id","user.userName","user.avatar","user.familyName","user.givenName","user.lastModifiedAt","userHasHidden","userId","isPreviewStudent"].join(),g=["isPreviewStudent(asc)","user.familyName(asc)","user.givenName(asc)"].join(),b=function(){function e(e,t,n,i,o,s){this.$rootScope=e,this.$q=t,this.CourseModel=n,this.gradeService=i,this.entitlementService=o,this.$ngRedux=s,this.listeners=new Map,this.subscribeToRedux()}return e.prototype.subscribeToRedux=function(){this.$ngRedux.connect(null,(function(e){return{loadMembership:function(t,n){return e(u.actions.courseMembership.loadCourseMembershipByMemberId(t,n))}}}))(this)},e.prototype.setSubmissionList=function(e,t,n,i){this.submissionList&&this.submissionList.courseId===e&&this.submissionList.columnId===t||(this.submissionList=Object.create(null)),this.submissionList.courseId=e,this.submissionList.columnId=t,this.submissionList.memberships=n,this.submissionList.rows=i||[],this.submissionList.canViewGroups=this.entitlementService.areAllEntitled([d.v.ViewGroups,d.f.ViewAsDesigner],e)},e.prototype.getListeners=function(e,t){var n=e+"|"+t;return this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n)},e.prototype.notifyRowsListeners=function(){this.submissionList&&this.getListeners(this.submissionList.courseId,this.submissionList.columnId).forEach((function(e){return e()}))},e.prototype.addOnRowsUpdated=function(e,t,n){var i=this;return this.getListeners(e,t).add(n),function(){i.removeOnRowsUpdated(e,t,n)}},e.prototype.removeOnRowsUpdated=function(e,t,n){this.getListeners(e,t).delete(n)},e.prototype.refreshAttempts=function(e,t,n){var i,o,s,a,r,c,l,d,u,p=this;return e!==(null===(i=this.submissionList)||void 0===i?void 0:i.courseId)||t!==(null===(o=this.submissionList)||void 0===o?void 0:o.columnId)?this.$q.when():("attemptId"in n?u=null===(a=null===(s=this.submissionList)||void 0===s?void 0:s.rows)||void 0===a?void 0:a.find((function(e){var t,i;return null===(i=null===(t=e.grade)||void 0===t?void 0:t.attempts)||void 0===i?void 0:i.some((function(e){return(null==e?void 0:e.id)===n.attemptId}))})):"userId"in n?u=null===(c=null===(r=this.submissionList)||void 0===r?void 0:r.rows)||void 0===c?void 0:c.find((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===n.userId})):"groupId"in n&&(u=null===(d=null===(l=this.submissionList)||void 0===l?void 0:l.rows)||void 0===d?void 0:d.find((function(e){var t;return(null===(t=e.group)||void 0===t?void 0:t.id)===n.groupId}))),u?this.loadAttempt(e,u).then((function(e){if(1===(null==e?void 0:e.length)){var t=e[0];u.grade=t.grade,u.attemptCount=t.attemptCount,u.lastAttemptDate=t.lastAttemptDate,u.attemptsReadyToPost=t.attemptsReadyToPost,p.notifyRowsListeners()}})):this.$q.when())},e.prototype.loadAttempt=function(e,t){var n;return(null===(n=t.group)||void 0===n?void 0:n.id)?this.loadGroupAttempt(e,t):this.loadIndividualAttempt(t)},e.prototype.loadGroupAttempt=function(e,t){var n,i,o,s,a,r,c=this;if(!this.submissionList.canViewGroups)return this.$q.when();var l=null===(n=t.group)||void 0===n?void 0:n.memberships.map((function(e){return c.submissionList.memberships.find((function(t){return t.userId===e.userId}))})).filter((function(e){return!!e})),d=null===(s=null===(o=null===(i=t.Column.ui)||void 0===i?void 0:i.content)||void 0===o?void 0:o.assignedGroups)||void 0===s?void 0:s.find((function(e){return e.groupId===t.group.id}));return this.gradeService.loadGroupRows(this.CourseModel.$new(e),[d],l,t.Column,null===(r=null===(a=t.Column.ui)||void 0===a?void 0:a.content)||void 0===r?void 0:r.isSafeAssignEnabled())},e.prototype.loadIndividualAttempt=function(e){var t,n;return this.gradeService.loadCustomizedBulkViewRows([e.membership],e.Column,null,null,null===(n=null===(t=e.Column.ui)||void 0===t?void 0:t.content)||void 0===n?void 0:n.isSafeAssignEnabled())},e.prototype.sortSubmissionList=function(e){var t=this;e&&e.sort((function(e,n){return t.getBucketNum(e)-t.getBucketNum(n)||(e.group?e.group.title.localeCompare(n.group.title):e.user.givenName.localeCompare(n.user.givenName))}))},e.prototype.getBucketNum=function(e){return e.RowStatus.valueOf()},e.prototype.fetchMemberships=function(e,t){var n=o.merge({fields:h,roleBucket:"taking",sort:g},t);return e.memberships.$fetch(n).$asPromise()},e.prototype.fetchMembership=function(e,t){var n=this;return this.$q.resolve(this.loadMembership(e.id,t).then((function(t){var i=e.memberships.$build(t);return n.$rootScope.$emit("course-"+e.id+"-memberships-after-fetch",[i]),i})))},e=Object(i.__decorate)([Object(i.__param)(0,Object(r.b)("$rootScope")),Object(i.__param)(1,Object(r.b)("$q")),Object(i.__param)(2,Object(r.b)(a.o.serviceName)),Object(i.__param)(3,Object(r.b)(l.h)),Object(i.__param)(4,Object(r.b)(c.b)),Object(i.__param)(5,Object(r.b)("$ngRedux"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(b);s.module(p,[c.a,l.g]).service(m,b)},ROik:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var i=n("wHJ2"),o=n("LN5R"),s=n("nsO7"),a=n("yC9S"),r=n("lEL+"),c=n("dF44"),l=n("+4Px"),d=n("DAbe"),u="ultra.components.directives.gradeGridMenuReborn",p=function(){function t(t,n,i,o,a){var r=this;this.scope=t,this.element=n,this.attrs=i,this.gradeGridRebornController=o,this.timeout=a,n.data("destroy",(function(){if(s.isUndefined(t.onBeforeDestroy)||t.onBeforeDestroy(n),n.remove(),a.cancel(r.timeoutRef),r.scrollHDeregistration&&r.scrollHDeregistration(),r.scrollVDeregistration&&r.scrollVDeregistration(),!1===t.autoDestroy){var i=e(window);i.off("click."+t.id),i.off("blur."+t.id)}else t.$destroy()})),t.keepOthers||e("[bb-grade-grid-menu-reborn]").each((function(t,i){i!==n[0]&&e(i).data("destroy")()})),n.mousedown((function(t){e(t.target).closest("button:disabled").length&&t.preventDefault()})),s.isUndefined(t.waiting)?this.listenOnWindow():a((function(){r.listenOnWindow()}),t,t.waiting,!1),this.timeoutRef=a((function(){r.scrollHDeregistration=t.$on(c.b.SCROLL_H,(function(){a((function(){return n.data("destroy")()}),t,0,!1)})),r.scrollVDeregistration=t.$on(c.b.SCROLL_V,(function(){a((function(){return n.data("destroy")()}),t,0,!1)}))}),t,200,!1),a((function(){s.isUndefined(t.adjustPosition)||t.adjustPosition(n)}),t,0,!1)}return t.prototype.listenOnWindow=function(){var t=this,n=function(n,i){i||e(n.target).closest("button:disabled").length||t.element.data("destroy")()};if(!1===this.scope.autoDestroy){var i=e(window);i.on("click."+this.scope.id,n),i.on("blur."+this.scope.id,n)}else a.b.OnWindow("click",n,this.scope),a.b.OnWindow("blur",(function(e){t.element.data("destroy")()}),this.scope)},t.$inject=["scope","element","attrs","gradeGridRebornController",r.b],t}(),m=function(){function t(t,n){var i=this;this.$injector=t,this.timeout=n,this.restrict="A",this.template=d,this.require="^"+o.a,this.transclude=!0,this.link=function(t,n,o,s){t.gradeGridMenuReborn=i.$injector.instantiate(p,{scope:t,element:n,attrs:o,gradeGridRebornController:s}),i.timeout((function(){n.on("keydown",(function(t){var i=n.find("li>:tabbable"),o=e(t.target);if(t.keyCode===l.v)i.eq((i.index(o)-1+i.length)%i.length).focus();else if(t.keyCode===l.d)i.eq((i.index(o)+1)%i.length).focus();else{if(!l.y(t))return;o.click()}t.preventDefault(),t.stopPropagation()}))}),t,0,!1)}}return t.$inject=["$injector",r.b],t}();i.module(u,[]).directive("bbGradeGridMenuReborn",["$injector",function(e){return e.instantiate(m)}])}).call(this,n("5iHu"))},RPq7:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n("D57K"),o=n("wHJ2"),s=n("nbDY"),a=n.n(s),r=n("lEL+"),c="ultra.directives.contentItemMouseover",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Top=new t("TOP"),t.Bottom=new t("BOTTOM"),t.Default=new t("DEFAULT"),t}(a.a),d=function(){function e(e,t,n){var i=this;this.scope=e,this.element=t,this.timeout=n,this.lastPosition=l.Default,this.lastTime=0,t.mouseover((function(){i.recalculatePosition()})),t.mousemove((function(e){Date.now()-i.lastTime>1e3?(i.timeout.cancel(i.lastMousemoveTimeout),i.handleMousemove(e)):(i.timeout.cancel(i.lastMousemoveTimeout),i.lastMousemoveTimeout=i.timeout((function(){i.handleMousemove(e)}),i.scope,100,!1))})),t.mouseleave((function(){i.timeout.cancel(i.lastMousemoveTimeout),i.lastPosition=l.Default})),e.$on("content-outline-hover-end",(function(){i.timeout.cancel(i.lastMousemoveTimeout),i.lastPosition=l.Default}))}return e.prototype.handleMousemove=function(e){null!=this.elementOffset&&null!=this.elementHeight||this.recalculatePosition(),this.lastTime=Date.now(),e.pageY-this.elementOffset>this.elementHeight/2?(this.lastPosition.isEqualTo(l.Bottom)||this.broadcastPosition(l.Bottom),this.lastPosition=l.Bottom):(this.lastPosition.isEqualTo(l.Top)||this.broadcastPosition(l.Top),this.lastPosition=l.Top)},e.prototype.broadcastPosition=function(e){this.scope.$emit("content-item-mouseover",{element:this.element,relativeMousePosition:e})},e.prototype.recalculatePosition=function(){this.elementHeight=this.element.outerHeight(),this.elementOffset=this.element.offset().top},e.$inject=["scope","element",r.b],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.scope={canCreate:"&"},this.link=function(e,n){e.canCreate&&e.canCreate()&&(e.contentItemMouseover=t.$injector.instantiate(d,{scope:e,element:n}))}}return e.$inject=["$injector"],e}();o.module(c,[r.a]).directive("bbContentItemMouseover",["$injector",function(e){return e.instantiate(u)}])},RWbl:function(e,t){e.exports='<div bb-load-bundle="components/directives/grade/submission-list">\n  <div class="submission-list-header">\n    <div class="search-filter">\n      <bb-search-box\n        on-search="submissionList.filterRows(searchText)"\n        placeholder-key="{{::submissionList.getSearchBoxPlaceholderKey()}}"\n        analytics-id-tag-prefix="components.directives.grade.submissionList.filter">\n      </bb-search-box>\n      <div class="submission-list-filter" ng-if="submissionList.isIndividual">\n        <span bb-translate="components.directives.grade.submission-list.filter.label"></span>\n        <div class="select-wrapper">\n          <div bb-foundation-defer>\n            <button data-dropdown="submission-list-filter"\n              bb-click-focus=".item-selected > a"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.submission-list.filter.label\'}"\n              aria-describedby="filter-name"\n              analytics-id="components.directives.grade.submissionList.filter.button">\n              <div class="select-value">\n                <span id="filter-name">{{submissionList.mySelectedFilter.name}}</span>\n              </div>\n            </button>\n            <bb-dropdown list-id="submission-list-filter"\n              list-kind="filter"\n              item-list="submissionList.availableFilters"\n              selected-item="submissionList.mySelectedFilter"\n              click-function="submissionList.changeFilter(item)"\n              analytics-id-tag-prefix="components.directives.grade.submission-list.changeFilter">\n            </bb-dropdown>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="page-size-selector-wrapper">\n      <bb-page-size-selector\n        ng-if="::submissionList"\n        local-storage-key="SUBMISSION_LIST_SELECTED_PAGE_SIZE"\n        on-change="submissionList.onPageSizeChange(pageSize)"\n      ></bb-page-size-selector>\n    </div>\n  </div>\n  <form class="assessment-exception" name="submission-list" bb-intersection-observer ng-switch="::submissionList.mode" ng-class="::{\'is-group-submission\': submissionList.isGroup}">\n    <div class="row tabular-list-header course-grades-column-headers course-grades-instructor">\n      <div class="columns medium-4 tabular-list-header-offset hide-for-small-only"><span bb-translate>course.grades.gradebook-item.headers.student</span></div>\n      <div class="columns medium-6">\n        <div class="row">\n          <div class="columns js-status-column hide-for-small-only" ng-class="::submissionList.isPeerGrading() ? \'medium-3\' : \'medium-5\'">\n            <span ng-if="::!submissionList.isDiscussion" bb-translate>course.grades.gradebook-item.headers.submission</span>\n            <span ng-if="::submissionList.isDiscussion" bb-translate>course.engagement.grade.headers.participation</span>\n          </div>\n          <div ng-if="::submissionList.isPeerGrading()" class="columns medium-3 js-peer-column hide-for-small-only">\n            <span bb-translate>course.grades.gradebook-item.headers.peerGrading</span>\n          </div>\n          <div class="columns js-grade-column hide-for-small-only" ng-if="!submissionList.column.anonymousGrading" ng-class="::submissionList.isPeerGrading() ? \'medium-4\' : \'medium-5\'">\n            <span bb-translate>course.grades.gradebook-item.headers.graded</span>\n          </div>\n          <div class="columns medium-2 small-1 hide-for-small-only end">\n            <span class="js-originality-column" ng-if="::submissionList.shouldShowOriginality" bb-translate>course.grades.gradebook-item.headers.originality</span>\n          </div>\n        </div>\n      </div>\n      <div remove-from-dom="true"\n            class="columns medium-2 small-12 overflow-menu-div"\n            ng-if="::submissionList.canDownloadAll()"\n            bb-foundation-defer>\n          <bb-overflow-menu class="overflow-menu"\n                          menu-items="::submissionList.getDownloadOverflowMenu()"\n                          element-id="submission-list-overflow-menu"\n                          element-name="{{::submissionList.overflowMenuLabel()}}"\n                          analytics-id-tag-prefix="course.grades.gradebookItem.headers.submissionList">\n          </bb-overflow-menu>\n        <button class="download-link button-anchor"\n            bb-translate="components.directives.grade.submission-list.downloadAll"\n            href="javascript:void(0);"\n            ng-click="submissionList.gradesBulkDownload()"\n            analytics-id="components.directives.grade.submission-list.downloadAll"/>\n      </div>\n    </div>\n    <div id="cannotViewGroupsMsg" ng-if="submissionList.showNoGroupViewMessage()">{{submissionList.cannotViewGroupsMsg}}</div>\n    <div ng-class="{\'last-tabular-row-container\':$last}"\n         ng-switch-default\n         ng-repeat="row in submissionList.rows track by row.id"\n         bb-on-finish-render="submissionList.onFinishRender()">\n      <div bb-intersection-observable="{debounce:200}" class="js-submission-list-row">\n        <bb-submission-list-row column="::submissionList.column" course="::submissionList.course"\n                                user-course-available-map="submissionList.userCourseAvailableMap"\n                                editing="submissionList.editing" row="row" index="$index"\n                                ng-class="{\'bb-user-avatar-alert\': row.isLate()}"\n                                ng-switch="submissionList.isExternalSubmission">\n          <span class="mobile-submissions-header status-header"\n                bb-translate="{{::!submissionList.isDiscussion ? \'course.grades.gradebook-item.headers.submission\' : \'course.engagement.grade.headers.participation\'}}"></span>\n          <div ng-switch-when="true">\n            <span class="status-to-grade"\n                  ng-if="!row.isStatusComplete(submissionList.isExternalSubmission) && !row.isStatusToPost() && !row.overrideToPost() && row.isStatusAttemptsToGrade(submissionList.isExternalSubmission)"\n                  bb-translate translate-values="::{gradeCount: 1}">\n                  components.directives.grade.submission-list.gradingStatus.toGrade.plural</span>\n            <span class="status-to-post"\n                  ng-if="row.isStatusToPost() || row.overrideToPost()"\n                  bb-translate translate-values="::{postCount: 1}">\n                  components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n            <div class="status-is-complete" ng-if="row.isStatusComplete(submissionList.isExternalSubmission) && !row.overrideToPost()">\n              <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n              <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n            </div>\n          </div>\n          <div ng-switch-default>\n            <div ng-switch="row.grade.attempts && row.grade.attempts.length > 0">\n              <div ng-switch-when="true">\n                <span class="status-nothing-to-grade"\n                      ng-if="row.isStatusNothingToGrade() && !row.isStatusToPost() && !row.isStatusComplete() && !row.overrideToPost() && !submissionList.isPeerGrading()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.{{submissionList.getNothingToGradeOrReconcileKey($index)}}</span>\n                <span class="status-to-reconcile"\n                      ng-if="row.isStatusAttemptsToReconcile() && !submissionList.isPeerGrading()"\n                      bb-translate translate-values="::{gradeCount: row.grade.attempts.getNumAttemptsToReconcile()}">\n                      components.directives.grade.submission-list.gradingStatus.attemptsToReconcile.plural</span>\n                <span class="status-to-grade"\n                      ng-if="row.isStatusAttemptsToGrade() && !submissionList.isPeerGrading()"\n                      bb-translate translate-values="::{gradeCount: row.grade.attempts.getNumAttemptsToGrade()}">\n                      components.directives.grade.submission-list.gradingStatus.attemptsToGrade.plural</span>\n                <span class="{{submissionList.status}}"\n                      ng-if="submissionList.isPeerGrading() && !(row.isMultipleStatus() || row.isStatusToPost() || row.overrideToPost()) && (row.isStatusAttemptsToGrade() || row.isStatusAttemptsToReconcile())"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.{{submissionList.getAttemptsPeerStatus()}}</span>\n                <span class="vertical-bar" ng-if="row.isMultipleStatus() && !submissionList.isPeerGrading()"></span>\n                <span class="status-to-post"\n                      ng-if="row.isMultipleStatus() || row.isStatusToPost() || row.overrideToPost()"\n                      bb-translate translate-values="::{postCount: 1}">\n                      components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n                <div class="{{submissionList.status}}"\n                      ng-if="submissionList.hasAttemptBeenPostedOrCompleted($index)">\n                      <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n                      <span bb-translate>components.directives.grade.submission-list.gradingStatus.{{submissionList.getPostedOrCompletedKey()}}</span>\n                </div>\n              </div>\n            <div ng-switch-default>\n              <span class="status-nothing-to-grade" ng-if="!row.isOverdue() && !row.isCurrentUserReconciler() && !submissionList.isPeerGrading()"\n                    bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n              <span class="status-nothing-to-grade" ng-if="!row.isOverdue() && row.isCurrentUserReconciler()  && !submissionList.isPeerGrading()"\n                    bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToReconcile</span>\n              <span class="status-no-submission" ng-if="row.isOverdue() || (!row.isOverdue() && submissionList.isPeerGrading())"\n                    bb-translate>components.directives.grade.submission-list.gradingStatus.noSubmission</span>\n              <span class="vertical-bar" ng-if="row.overrideToPost()"></span>\n              <span class="status-to-post"\n                    ng-if="row.overrideToPost()"\n                    bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n            </div>\n          </div>\n        </div>\n        </bb-submission-list-row>\n      </div>\n    </div>\n    <div ng-class="{\'last-tabular-row-container\':$last}"\n         ng-switch-when="Group"\n         ng-repeat="row in submissionList.rows | limitTo: submissionList.pageSize: submissionList.currentPage*submissionList.pageSize track by row.id">\n      <div bb-intersection-observable="{debounce:200}">\n        <bb-group-submission-list-row column="::submissionList.column" course="::submissionList.course"\n                                      user-course-available-map="submissionList.userCourseAvailableMap"\n                                      editing="submissionList.editing" row="row" index="$index"\n                                      ng-class="{\'bb-user-avatar-alert\': row.isLate()}"\n                                      ng-switch="submissionList.isExternalSubmission">\n          <span class="mobile-submissions-header status-header"\n                bb-translate="{{::!submissionList.isDiscussion ? \'course.grades.gradebook-item.headers.submission\' : \'course.engagement.grade.headers.participation\'}}"></span>\n          <div ng-switch-when="true">\n            <span class="status-to-grade" ng-if="!row.isGroupStatusComplete(submissionList.isExternalSubmission) && !row.isGroupStatusToPost()\n            && !row.overrideToPost() && row.isGroupStatusAttemptsToGrade(submissionList.isExternalSubmission)"\n                  bb-translate translate-values="{gradeCount: 1}">components.directives.grade.submission-list.gradingStatus.toGrade.plural</span>\n            <span class="status-to-post" ng-if="row.isGroupStatusToPost() || row.overrideToPost()"\n                  bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n            <div class="status-is-complete" ng-if="row.isGroupStatusComplete(submissionList.isExternalSubmission) && !row.overrideToPost()">\n              <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n              <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n            </div>\n          </div>\n          <div ng-switch-default>\n            <div ng-switch="row.hasGroupAttempts()">\n              \x3c!--TODO need to account for multiple attempts as a group; right now only looking at the single group attempt entry in code below--\x3e\n              <div ng-switch-when="true">\n                <span class="status-nothing-to-grade"\n                      ng-if="row.isGroupStatusNothingToGrade() && !row.isGroupStatusToPost() && !row.isGroupStatusComplete() && !row.overrideToPost()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n                <span class="status-to-grade"\n                      ng-if="row.isGroupStatusAttemptsToGrade()"\n                      bb-translate translate-values="{gradeCount: 1}">components.directives.grade.submission-list.gradingStatus.attemptsToGrade.plural</span>\n                <span class="vertical-bar" ng-if="row.isMultipleStatus()"></span>\n                <span class="status-to-post"\n                      ng-if="row.isMultipleStatus() || row.isGroupStatusToPost() || row.overrideToPost()"\n                      bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n                <div class="status-is-complete" ng-if="row.isGroupStatusComplete() && !row.overrideToPost()">\n                  <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n                </div>\n              </div>\n              <div ng-switch-default>\n                <span class="status-nothing-to-grade"\n                      ng-if="::!row.isOverdue()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n                <span class="status-no-submission"\n                      ng-if="::row.isOverdue()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.noSubmission</span>\n                <span class="vertical-bar" ng-if="row.overrideToPost()"></span>\n                <span class="status-to-post"\n                      ng-if="row.overrideToPost()"\n                      bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n              </div>\n            </div>\n          </div>\n        </bb-group-submission-list-row>\n      </div>\n    </div>\n    <div ng-class="{\'last-tabular-row-container\':$last}"\n         ng-switch-when="Discussion"\n         ng-repeat="row in submissionList.rows | limitTo: submissionList.pageSize: submissionList.currentPage*submissionList.pageSize track by row.id">\n      <div bb-intersection-observable="{debounce:200}">\n        <bb-submission-list-row column="submissionList.column" course="submissionList.course"\n                                user-course-available-map = "submissionList.userCourseAvailableMap"\n                                include-due-date-exception="submissionList.includeDueDateException()"\n                                is-group-discussion="submissionList.isGroupDiscussion()"\n                                editing="submissionList.editing" row="row" index="$index">\n          <span class="status-to-grade"\n                ng-if="row.isStatusAttemptsToGrade()"\n                bb-translate translate-values="{gradeCount: 1}">components.directives.grade.submission-list.gradingStatus.toGrade.plural</span>\n          <div class="status-is-complete" ng-if="row.isStatusComplete()">\n            <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n            <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n          </div>\n          <span class="status-nothing-to-grade"\n                ng-if="row.isStatusNothingToGrade() && !row.isOverdue() && !row.isStatusComplete()"\n                bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n          <span class="status-no-participation"\n                ng-if="row.isStatusNothingToGrade() && row.isOverdue() && !row.isStatusComplete()"\n                bb-translate>components.directives.grade.submission-list.participation.noParticipation</span>\n          <span class="vertical-bar" ng-if="row.isStatusNothingToGrade() && row.isStatusToPost()"></span>\n          <span class="status-to-post" ng-if="(row.isStatusNothingToGrade() && row.isStatusToPost()) || (row.isStatusToPost())"\n                bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural\n          </span>\n        </bb-submission-list-row>\n      </div>\n    </div>\n  </form>\n  <bb-pagination\n    total-items="submissionList.totalItems"\n    page-size="submissionList.pageSize"\n    current-page="submissionList.currentPage"\n    on-change-page="submissionList.onChangePage()"\n  ></bb-pagination>\n</div>\n'},S6sW:function(e,t){e.exports='<ng-switch on="displayGrade.shouldShowPointsPossible()">\n  <span ng-switch-when="true" ng-bind-html="displayGrade.fullDisplayGrade"></span>\n  <span ng-switch-default><strong>{{displayGrade.fullDisplayGrade}}</strong></span>\n</ng-switch>'},SE1T:function(e,t){e.exports='<button class="button-add-content js-show-add-options"\n        data-show-add-options\n        ng-click="addContentButton.addGroup()"\n        ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n        aria-label="{{addContentButton.addButtonAriaLabel}}"\n        ng-focus="addContentButton.showButton()"\n        ng-blur="addContentButton.hideButton()"\n        analytics-id="components.directives.add-content-button.course-group.button">\n</button>\n'},SP9a:function(e,t,n){},Siqh:function(e,t,n){},Sq3Z:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-activity-indicator",use:"icon-small-activity-indicator-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-activity-indicator"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="2" stroke-width="4" /></symbol>'});o.add(s);e.exports=s},T0fj:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("uDsz"),n("7BzJ"),n("Vrsv");var i=n("5iHu"),o=n("wHJ2"),s=n("0JpG"),a=n("xqn/"),r=n("lEL+"),c=n("e6jQ"),l=n("yC9S"),d=n("oQrK"),u="ultra.components.directives.timepicker";i.fn.timepicker.Constructor.prototype.elementKeydown=i.fn.timepicker.Constructor.prototype.blurElement=i.fn.timepicker.Constructor.prototype.highlightUnit=function(){return!0};var p=function(){function e(e,t,n,o,a,r,u,p){var m=this;(this.scope=e,this.$element=t,this.attrs=n,this.model=o,this.bbLocalize=a,this.bbValidateTime=r,this.timeout=u,this.$compile=p,null==n.bbValidateTime)&&(n.bbValidateTime="short",this.bbValidateTime[0].compile(t,n,void 0)(e,t,n,o));if(!d.a.detect().desktop()&&window.Modernizr.inputtypes.time){if(n.$set("type","time"),t.removeAttr("placeholder"),n.bbTranslateAttrs){var h=e.$eval(n.bbTranslateAttrs);h.placeholder&&(delete h.placeholder,n.bbTranslateAttrs=JSON.stringify(h))}}else{var g;this.bbLocalize.loadBundle("components/directives/timepicker").then((function(){null==n.placeholder&&(null==n.placeholderDate?n.$set("placeholder",m.bbLocalize.translateSync({locale:m.bbLocalize.getLocale(m.scope),key:"components.directives.timepicker.timeFormatPlaceholder"})):(n.placeholderDate&&m.formatAndSetPlaceholder(new Date(n.placeholderDate.replace(/("|\')/g,""))),n.$observe("placeholderDate",(function(e){e&&(m.placeholderDate=new Date(e.replace(/("|\')/g,"")),m.formatAndSetPlaceholder(m.placeholderDate))}))));var e=m.bbLocalize.translateSync({locale:m.bbLocalize.getLocale(m.scope),key:"components.directives.timepicker.timeFormatHint"}),o="timepicker_"+c.a();g=i('<div class="hide" id="'+o+'">'+e+"</div>"),t.parent().append(g),t.attr("aria-labelledby",o)}));var b=this.$compile('<i aria-hidden="true"><bb-svg-icon size="small" icon="away"></bb-svg-icon></i>')(this.scope);t.before(b),t.keypress((function(e){13===e.which&&(e.preventDefault(),b.click())})),t.parent().addClass("input-group").find("i").addClass("input-group-addon");var f=this.bbLocalize.getLocale(this.scope),v=a.getTimePatternSync(s.ILocaleTimeFormat.Short,e).indexOf("a")>-1;"ar-sa"===f&&(v=!1);var y=t.timepicker({defaultTime:!1,disableMousewheel:!0,lockTabs:!0,minuteStep:1,showMeridian:v,showWidgetOnAddonClick:!0}).data("timepicker"),w=this.bbLocalize.getDayPeriodsFormatSync(f);y.meridianAm=w.am,y.meridianPm=w.pm;var C=function(){t.prop("disabled")||t.prop("readonly")?b.remove():t.prev()!==b&&(t.before(b),b.click((function(){y.showWidget()})))};n.$observe("disabled",(function(e){C()})),n.$observe("readonly",(function(e){C()})),y.$widget.attr("aria-hidden","true"),e.$watch((function(){return o.$modelValue}),(function(e,t){!e&&t?y.$element.val(""):!t&&e&&y.setDefaultTime(y.defaultTime)})),e.$watch((function(){return o.$viewValue}),(function(t){e.$emit("time-view-value-is-empty",o.$name,o.$dirty&&o.$isEmpty(t))})),y.defaultTime="current",y.$element.on("show.timepicker",(function(){y.$widget.find("a").attr("tabindex","-1"),y.$element.val()?y.setTime(y.$element.val()):y.setDefaultTime(m.placeholderDate||y.defaultTime),0===y.$widget.find(".timepicker-timezone").length&&y.$widget.append(m.$compile('<div class="divider"></div>\n                           <div class="timepicker-timezone" bb-translate translate-values="{datetime: timepicker.model.$modelValue}">global.timezone.short</div>')(m.scope))})),y.$element.on("focusin",(function(e){y.$element.prop("readonly")||y.$element.prop("disabled")||y.showWidget()})),y.$element.on("focusout",(function(t){m.timeout((function(){0===y.$widget.find(":focus").length&&!y.$element.is(":focus")&&i(":focus").length>0&&y.hideWidget()}),e,0,!1)})),y.$widget.on("focusin",(function(e){e.stopImmediatePropagation()})),y.$widget.on("focusout",(function(t){m.timeout((function(){0===y.$widget.find(":focus").length&&!y.$element.is(":focus")&&i(":focus").length>0&&y.hideWidget()}),e,0,!1)})),y.$element.on("hide.timepicker",(function(){y.$widget.find(":focus").length>0&&t.focus()}));var S=function(){y.place()};e.$on("$destroy",(function(){y.remove(),t.parents(".panel-wrap").eq(0).unbind("scroll",S),g&&g.remove()})),l.b.OnWindow("scroll",S,e),t.parents(".panel-wrap").eq(0).bind("scroll",S)}}return e.prototype.formatAndSetPlaceholder=function(e){var t=this.bbLocalize.formatTimeSync(e,s.ILocaleTimeFormat.Short,this.scope);this.attrs.$set("placeholder",t)},e.$inject=["scope","element","attrs","model",s.serviceName,a.a+"Directive",r.b,"$compile"],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.scope={},this.link=function(e,n,i,o){e.timepicker=t.$injector.instantiate(p,{scope:e,element:n,attrs:i,model:o})}}return e.$inject=["$injector"],e}();o.module(u,[s.moduleName,a.b,r.a]).directive("bbTimePicker",["$injector",function(e){return e.instantiate(m)}])},T1pL:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var i=n("wHJ2"),o=n("nsO7"),s=n("o5Lu"),a=n("3l3z"),r=n("LN5R"),c=n("TmUJ"),l=n("qH3X"),d=n("+4Px"),u=n("lEL+"),p=n("dF44"),m=n("TUWB"),h="ultra.components.directives.gradeGridOverallEditorReborn",g=function(){function t(e,t,n,i,o,s,a,r){var c=this;this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=o,this.gradeGridRebornController=s,this.gradeService=a,this.timeout=r,this.initialize(),n.$on(l.a.REFRESH_OVERALL_EDITOR,(function(){c.initialize()})),n.$on("$destroy",(function(){c.removeErrorMessage()}))}return t.prototype.initialize=function(){var e=this;this.score=this.scope.gradeGridColumnOverallReborn.score,this.element.find("input").focus(),this.element.find(".wrapping-input-style").css({"border-color":"#c36fd3"}),this.timeout((function(){e.element.find("input").select()}),this.scope,0,!1),this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.removeErrorMessage=function(){this.element.removeClass("validation-alert"),o.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),o.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)},t.prototype.createErrorMessage=function(){var e=this;if(this.messageElement&&this.removeErrorMessage(),o.isUndefined(this.messageElement)){this.element.addClass("validation-alert");var n=this.element.parent(".grade-grid-cell").offset();n.top+=60,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=function(t){var i=n.left+t.width(),o=n.top+t.height(),s=e.gradeGridRebornController.getGradeGridContainerElementRight(),a=e.gradeGridRebornController.getGradeGridContainerElementBottom();i>s&&(n.left-=i-s+Object(c.a)()),o>a&&(n.top-=t.height()+40),e.messageElement.offset(n)},this.$compile(t.CELL_MESSAGE_TEMPLATE)(this.messageScope,(function(t){e.messageElement=t,e.element.parents("bb-grade-grid-reborn").append(e.messageElement)}))}},Object.defineProperty(t.prototype,"isValidated",{get:function(){return this._isValidated},set:function(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage()},enumerable:!0,configurable:!0}),t.prototype.stopPropagation=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.mousedown=function(){e(this.window).trigger("click")},Object.defineProperty(t.prototype,"isHiddenPointsPossible",{get:function(){return!(o.isUndefined(this.score)||/^-?\d*(\.\d+)?$/.test(this.score))},enumerable:!0,configurable:!0}),t.prototype.onChange=function(){var e=this;this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.onInputBlur=function(){this.scope.gradeGridColumnOverallReborn.onInputBlur(this.isValidated,this.score)},t.prototype.checkValue=function(e){var t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)},t.prototype.onKeydown=function(t){d.y(t)?(this.scope.gradeGridColumnOverallReborn.gotoNextCell(),e(t.target).blur(),this.mousedown(),t.preventDefault(),t.stopPropagation()):t.keyCode===d.g?(e(t.target).blur(),this.mousedown(),this.scope.$emit(p.b.LEAVE_CELL)):d.x(t)&&(!this.score||t.keyCode!==d.j&&t.keyCode!==d.s?this.mousedown():t.stopPropagation())},t.$inject=["$compile","$window","scope","element","attrs","gradeGridRebornController",s.h,u.b],t.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>',t}(),b=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=m,this.require="^"+r.a,this.link=function(e,n,i,o){e.gradeGridOverallEditorReborn=t.$injector.instantiate(g,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();i.module(h,[a.a]).directive("bbGradeGridOverallEditorReborn",["$injector",function(e){return e.instantiate(b)}])}).call(this,n("5iHu"))},TML7:function(e,t){e.exports='<div class="rb-grid">\n  <style scoped id="rb-grid"></style>\n  <style scoped id="rb-grid-rows-initial-position"></style>\n\n  <div ng-if="grid.containers.left" rb-grid-container="left" id="rb-grid-container-left"></div>\n\n  <div rb-grid-container="center"></div>\n\n  <div ng-if="grid.containers.right" rb-grid-container="right"></div>\n\n  <div ng-transclude></div>\n\n</div>\n'},TOu5:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},TUWB:function(e,t){e.exports='<div class="wrapping-input-style no-hover">\n  <div>\n    <input autocomplete="off" pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px" pu-elastic-input-width-delta="8"\n           ng-blur="gradeGridOverallEditorReborn.onInputBlur()"\n           placeholder="--" ng-model="gradeGridOverallEditorReborn.score"\n           ng-mousedown="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-click="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-change="gradeGridOverallEditorReborn.onChange()"\n           ng-keydown="gradeGridOverallEditorReborn.onKeydown($event)" spellcheck="false" \n           analytics-id="components.directives.grade.grid.overAll.input.text"/>\n  </div>\n  <div ng-mousedown="gradeGridOverallEditorReborn.mousedown()" ng-class="{hidden: gradeGridOverallEditorReborn.isHiddenPointsPossible}">\n    <span class="slash"></span><span class="possible" ng-bind="gradeGridColumnOverallReborn.pointsPossible"></span>\n  </div>\n</div>\n'},TZd2:function(e,t){e.exports='<div class="pagination"\n  bb-load-bundle="components/directives/pagination"\n  ng-if="$ctrl.pageCount > 1"\n  >\n  <div>\n    <button ng-click="$ctrl.previousPage()"\n      class="prev-page"\n      ng-disabled="!$ctrl.canNavigate(-1)"\n      bb-translate-attrs="{\'aria-label\': \'components.directives.pagination.prevPage\'}"\n      analytics-id="components.directives.pagination.prevPage.button">\n      <bb-svg-icon size="small" icon="arrow-left" ></bb-svg-icon>\n    </button>\n    <span bb-translate="components.directives.pagination.page"></span>\n    <div bb-foundation-defer class="select-wrapper">\n      <button data-dropdown="{{::$ctrl.componentId}}"\n        bb-click-focus=".item-selected > a"\n        bb-translate-attrs="{\'aria-label\': \'components.directives.pagination.page\'}"\n        aria-describedby="{{::$ctrl.componentDescribeId}}"\n        analytics-id="components.directives.pagination.page.button">\n        <div class="select-value">\n          <span id="{{::$ctrl.componentDescribeId}}">{{$ctrl.mySelectedPage.name}}</span>\n        </div>\n      </button>\n      <bb-dropdown list-id="{{::$ctrl.componentId}}"\n        list-kind="filter"\n        item-list="$ctrl.availablePages"\n        selected-item="$ctrl.mySelectedPage"\n        simplified-max-items-per-page="$ctrl.maxItemsInDropdown || 10"\n        force-above="true"\n        click-function="$ctrl.changePage(item)"\n        analytics-id-tag-prefix="components.directives.pagination.changePage">\n      </bb-dropdown>\n    </div>\n    <span bb-translate="components.directives.pagination.ofPageCount"\n          translate-values="{pageCount: $ctrl.pageCount}"\n          class="js-page-count">\n    </span>\n    <button ng-click="$ctrl.nextPage()"\n      class="next-page"\n      ng-disabled="!$ctrl.canNavigate(1)"\n      bb-translate-attrs="{\'aria-label\': \'components.directives.pagination.nextPage\'}"\n      analytics-id="components.directives.pagination.nextPage.button">\n      <bb-svg-icon size="small" icon="arrow-right"></bb-svg-icon>\n    </button>\n  </div>\n</div>'},TmUJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i,o=n("5iHu");function s(){if(null==i){var e=o('<div style="width:100px; height:100px; overflow:hidden; position:absolute; top:-200px; left:-200px;"><div class="inner" style="height:200px;"></div>'),t=e.find(".inner");o("body").append(e);var n=t.innerWidth();e.css("overflow","auto");var s=t.innerWidth();o(e).remove(),i=n-s}return i}},Tn43:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));n("367g"),n("Aw+3"),n("8+lX"),n("aAQ7"),n("UyCM");var i=n("wHJ2"),o=n("nsO7"),s=n("en1n"),a=n("0JpG"),r=n("suMx"),c=n("jciN"),l=n("JNtI"),d=n("+e2k"),u=n("+g6d"),p=n("TnpK"),m=n("g7Mf"),h=n("r6lH"),g=n("ELoy"),b=n("pjml"),f=n("f4B+"),v=n("nmzr"),y=n("yC9S"),w=n("Wqh6"),C="ultra.components.directives.discussion",S=function(){function t(e,t,n,i,s,a,r,c,l,d){var u=this;this.$window=e,this.$sce=t,this.scope=n,this.element=i,this.$stateParams=s,this.bbLocalize=a,this.telemetry=r,this.discussion=c,this.ultraState=l,this.courseModel=d,n.isLoaded=!1,n.courseId=n.content().courseId,n.contentId=n.content().id,n.isGroupDiscussion=n.content().isGroupContent,this.createDfiReport(n.courseId,n.contentId),y.b.OnWindow("resize",o.debounce((function(){(u.scope.displayNonParticipants||u.scope.displayNonParticipantGroup)&&(u.updateNonParticipantView(),u.scope.$apply())}),150),n)}return t.prototype.createDfiReport=function(e,t,n){var i=this;(n?this.telemetry.loadDiscussionActivityData(e,t,n):this.telemetry.loadDiscussionActivityData(e,t)).then((function(e){i.scope.discussionData=e,i.scope.header=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.discussion.insights.header",params:{title:i.scope.content().title},noEscape:!0,noWrap:!0}),i.scope.course=i.courseModel.$find(i.scope.courseId),i.scope.isSingleGroup=!!n,i.scope.groups=i.scope.discussionData.groups,i.scope.isGradable=!!i.scope.discussionData.gradeColumnId,i.scope.gradingColumn=i.scope.discussionData.gradeColumnId,i.scope.viewedOnlyCount=i.scope.discussionData.viewedOnlyCount,i.scope.avgCommentsPerStudent=i.scope.discussionData.avgCommentsPerStudent?i.scope.discussionData.avgCommentsPerStudent:0,i.scope.avgWordCountPerComment=i.scope.discussionData.avgWordCountPerComment?i.scope.discussionData.avgWordCountPerComment:0,i.scope.avgGradeOfDiscussion=i.scope.discussionData.avgGrade?i.scope.discussionData.avgGrade/100:0,i.scope.numberOfCommentsToDisplay=1,i.scope.topComments=[],i.scope.displayTopComments=!1,i.scope.topParticipants=[],i.scope.displayTopParticipants=!1,i.scope.nonParticipants=[],i.scope.showNonparticipant=[],i.scope.showLargeNonparticipantPanel=!0,i.scope.minHeightForTopBoxes="auto",i.scope.nonParticipants=i.getNonParticipants(),i.scope.displayNonParticipants=!!i.scope.nonParticipants.length&&!i.scope.isGroupDiscussion,i.scope.displayNonParticipantGroups=!!i.scope.nonParticipants.length&&i.scope.isGroupDiscussion&&!i.scope.isSingleGroup,i.scope.displayNonParticipantGroup=!!i.scope.nonParticipants.length&&i.scope.isGroupDiscussion&&i.scope.isSingleGroup,i.scope.nonParticipantGroups=i.scope.displayNonParticipantGroups?i.getNonParticipantGroups():[],i.scope.totalNonParticipants=i.scope.nonParticipants.length,i.scope.totalParticipants=i.scope.discussionData.totalParticipants+i.scope.totalNonParticipants,i.scope.displayedNonParticipants=24,i.scope.additionalNonParticipants=i.scope.totalNonParticipants,i.scope.currentPanelWidth=0,i.scope.lastPanelWidth=-1,i.scope.isLoaded=!0;for(var t=0;t<i.scope.displayedNonParticipants;t++)i.scope.showNonparticipant[t]=!0;i.getTopComments(),i.getTopParticipants(),i.getParticipantBarChart(),i.updateNonParticipantView(),i.scope.overflowItems=i.getOverflowMenu(),i.scope.statisticsConfig=i.getSummaryInsightNumbers(),i.scope.topCommentsColumns=i.scope.displayTopComments&&i.scope.displayTopParticipants?"small-12 medium-8 large-9":"small-12",i.scope.topParticipantColumns=i.scope.displayTopComments&&i.scope.displayTopParticipants?"small-12 medium-4 large-3":"small-12"}))},t.prototype.getSummaryInsightNumbers=function(){var e=this.bbLocalize.getLocale(this.scope),t=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.numParticipants"}),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.formattedParticipation",params:{count:this.scope.totalParticipants-this.scope.totalNonParticipants,total:this.scope.totalParticipants},noWrap:!0}),i=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgComments"}),o=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgCount"}),s=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgGrade"}),a=this.scope.isGradable&&this.scope.avgGradeOfDiscussion>0?this.bbLocalize.formatPercentageSync(this.scope.avgGradeOfDiscussion,this.scope):this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.na"}),r=[];return r.push({title:t,data:n}),r.push({title:i,data:this.bbLocalize.formatNumberSync(this.scope.avgCommentsPerStudent,this.scope).toString()}),this.scope.avgWordCountPerComment&&this.scope.avgWordCountPerComment>0&&r.push({title:o,data:this.bbLocalize.formatNumberSync(this.scope.avgWordCountPerComment,this.scope).toString()}),this.scope.isGradable&&r.push({title:s,data:a}),r},t.prototype.getParticipantBarChart=function(){var t=0,n=0,i=100,o=this.scope.totalParticipants-this.scope.totalNonParticipants;this.scope.totalParticipants>0?i=100-((t=Math.floor((this.scope.totalParticipants-this.scope.totalNonParticipants)/this.scope.totalParticipants*100))+(n=Math.floor(this.scope.viewedOnlyCount/this.scope.totalParticipants*100))):(t=0,n=0,i=100),e(".bar-chart .participated").attr("style","width: "+t+"%"),e(".bar-chart .opened").attr("style","width: "+n+"%"),e(".bar-chart .unopened").attr("style","width: "+i+"%");var s=this.scope.totalNonParticipants-this.scope.viewedOnlyCount;this.scope.barchartNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartNonParticipants",params:{count:s},noWrap:!0}),this.scope.barchartOpenedNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartOpenedNonParticipants",params:{count:this.scope.viewedOnlyCount},noWrap:!0}),this.scope.barchartParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartParticipants",params:{count:o},noWrap:!0}),this.scope.percentParticipatedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentParticipated",params:{percent:this.bbLocalize.formatPercentageSync(t/100,this.scope)},noWrap:!0}),this.scope.percentOpenedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentOpened",params:{percent:this.bbLocalize.formatPercentageSync((n+t)/100,this.scope)},noWrap:!0})},t.prototype.getNonParticipantGroups=function(){var e=this,t=[];return this.scope.nonParticipants.length>0&&i.forEach(this.scope.groups,(function(n){var o={id:n.id,name:n.name,nonParticipants:[],total:0,hidden:0};i.forEach(e.scope.nonParticipants,(function(t){t.group.id===n.id&&(t.localizedName=e.bbLocalize.formatUsernameSync(t,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),o.nonParticipants.push(t),o.total++)})),o.hidden=o.total>4?o.total-4:0,o.total>0&&t.push(o)})),t},t.prototype.getTopComments=function(){var e=this;this.scope.numberOfCommentsToDisplay=s.h()?3:5,this.scope.discussionData.topComments.forEach((function(t){var n={user:t.user,message:f.a.text(t.message),messageId:t.messageId,numReplies:t.numReplies};n.user.localizedName=e.bbLocalize.formatUsernameSync(t.user,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.user.avatarData=t.user,e.scope.topComments.push(n),e.scope.displayTopComments=!0}))},t.prototype.getTopParticipants=function(){var e=this;this.scope.discussionData.topParticipants.forEach((function(t){var n={user:t.user,numComments:t.numComments,numReplies:t.numReplies};n.user.localizedName=e.bbLocalize.formatUsernameSync(t.user,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.user.avatarData=t.user,e.scope.topParticipants.push(n),e.scope.displayTopParticipants=!0}))},t.prototype.getNonParticipants=function(){var e=this,t=[];return this.scope.discussionData.nonParticipants.forEach((function(n){n.avatarData=n,n.localizedName=e.bbLocalize.formatUsernameSync(n,a.ILocaleUsernameFormat.Short,null,{noWrap:!1,noEscape:!0}),n.localizedNameWithoutWrap=e.bbLocalize.formatUsernameSync(n,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.push(n)})),t},t.prototype.toggleIndividualNonParticipantDisplay=function(){var e=this;o.defer((function(){var t=i.element("#discussion-insights").find(".non-participant-box").innerWidth()-30;t=t<1118?t:1118;var n=2*Math.ceil((t+20)/126);e.scope.displayedNonParticipants=0;for(var o=0;o<18;o++)o<n&&o<e.scope.totalNonParticipants?(e.scope.showNonparticipant[o]=!0,e.scope.displayedNonParticipants++):e.scope.showNonparticipant[o]=!1;e.scope.additionalNonParticipants=e.scope.totalNonParticipants>e.scope.displayedNonParticipants?e.scope.totalNonParticipants-e.scope.displayedNonParticipants:0,e.scope.nonParticipationSummary=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.discussion.insights.nonParticipationSummary",params:{count:e.scope.displayedNonParticipants,total:e.scope.totalNonParticipants},noWrap:!0}),e.setNonParticipantMargin(t)}))},t.prototype.setNonParticipantMargin=function(t){var n=e("li.non-participant"),i=Math.floor(t/126),o=126*i+106,s=i-1>0?20+(t-o-2)/i:20+t-o;e(n).css("margin-right",s),e(n[i]).css("margin-right","2px"),2*i+1<=n.length&&e(n[2*i+1]).css("margin-right","2px")},t.prototype.updateNonParticipantView=function(){var e=this.bbLocalize.getLocale(this.scope);this.scope.nonParticipantsOptions=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.nonparticipantsOptions"}),this.scope.numberOfCommentsToDisplay=s.h()?3:5,this.scope.currentPanelWidth=i.element("#discussion-insights").find(".non-participant-box").innerWidth(),this.scope.currentPanelWidth!==this.scope.lastPanelWidth&&(s.h()?this.scope.showLargeNonparticipantPanel=!1:(this.scope.showLargeNonparticipantPanel=!0,this.toggleIndividualNonParticipantDisplay())),this.scope.lastPanelWidth=this.scope.currentPanelWidth},t.prototype.getSafeHtml=function(e){return this.$sce.trustAsHtml(e)},t.prototype.hasNavScrollbar=function(){var e=i.element(".group-selector")[0];return!!(e&&e.scrollWidth>e.clientWidth)},t.prototype.goToDiscussion=function(e){e?(this.discussion.groupId=e,this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,disGroupId:e,courseId:this.scope.courseId})):this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,courseId:this.scope.courseId})},t.prototype.goToGrade=function(e){this.scope.isGradable&&!this.scope.isGroupDiscussion&&this.ultraState.goPeekState("submission-list",{columnId:this.scope.gradingColumn,participantId:e,contentId:this.scope.contentId})},t.prototype.goToMessage=function(e){this.ultraState.goPeekState(v.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e})},t.prototype.isFocusedNonparticipant=function(t){return e(document.activeElement).is(i.element(e("a#non-participant-link-"+t)))},t.prototype.sortNamesAlphabetically=function(e){var t="";return e.sort((function(e,t){return e.givenName+e.familyName<t.givenName+t.familyName?-1:1})).forEach((function(e){t+=e.id+","})),t.slice(0,-1)},t.prototype.goToMessageAll=function(){var e=this.sortNamesAlphabetically(this.scope.nonParticipants);this.ultraState.goPeekState(v.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e,conversationPerRecipient:!0})},t.prototype.updateDfiPanel=function(t,n,i){e(".group-selector .selected").removeClass("selected"),e(t.target).addClass("selected"),n?(this.discussion.groupId=n,this.scope.currentGroupId=n,this.scope.currentGroupName=i,this.createDfiReport(this.scope.courseId,this.scope.contentId,n),this.updateNonParticipantView()):(this.discussion.groupId=void 0,this.scope.currentGroupId=void 0,this.scope.currentGroupName=void 0,this.createDfiReport(this.scope.courseId,this.scope.contentId))},t.prototype.updateMessagesCount=function(){i.element("bb-overflow-menu.ddm-nonparticipant-options:visible").find("#ddm-nonparticipant-options_messages span").text(this.scope.overflowItems[0].labelKey).attr("analytics-id",this.scope.overflowItems[0].labelKey)},t.prototype.getOverflowMenu=function(){var e=this;return[{icon:"messages",labelKey:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.messageNonParticipants",params:{count:this.scope.totalNonParticipants},noWrap:!0}),onClick:function(){e.goToMessageAll()}}]},t.$inject=["$window","$sce","scope","element","$stateParams",a.serviceName,h.b,m.c,p.d,b.o.serviceName],t}(),k=function(){function e(e){var t=this;this.$injector=e,this.restrict="EA",this.template=w,this.scope={content:"&"},this.link=function(e,n,i){e.discussionInsights=t.$injector.instantiate(S,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(C,[r.a,c.a,l.b,d.a,u.a,h.a,g.a,p.b]).directive("bbDiscussionInsights",["$injector",function(e){return e.instantiate(k)}])}).call(this,n("5iHu"))},Tt7N:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-calculation",use:"icon-small-calculation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calculation"><path d="M4 2v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="10" cy="10" r=".5" /><circle cx="14" cy="14" r=".5" /><path d="M2 10l4 4M2 14l4-4M14 10l-4 4M14 4h-4M6 4H2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},TuNX:function(e,t){e.exports='<bb-modal class="notification proctoring-modal" analytics-id-tag-prefix="components.services.proctoring">\n  <div name="modal-contents">\n    <p bb-translate>{{::requirementsText}}</p>\n    <p ng-bind-html="::downloadText"></p>\n    <p bb-translate>{{::browserText}}</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          role="button"\n          class="button js-primary-button proctoring-modal-button"\n          ng-click="$parent.$dismiss()"\n          bb-translate-attrs="{\'aria-label\':\'components.services.proctoring.modal.continue\'}"\n          analytics-id="components.services.proctoring.modal.continue.button"\n  >\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n    <bb-translate>components.services.proctoring.modal.continue</bb-translate>\n  </button>\n</bb-modal>\n'},U2yl:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.kloudless.modal.errorTitle"\n          analytics-id-tag-prefix="components.directives.kloudless">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.kloudless.modal.errorFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.kloudless.modal.cancelUploadText">\n    <bb-translate>components.directives.kloudless.modal.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},U50L:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-aria-type="alertdialog"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-enough-submissions">\n  <div name="modal-contents">\n    <p bb-translate>{{::descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},UGfE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("wHJ2"),o=n("pjml"),s=n("/BCe"),a="ultra.directives.courseLinkItem",r=function(){function e(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=s,this.link=function(e,t){var n=e.$watch("targetContent.contentHandler",(function(t){null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())}));!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then((function(){e.content.description=e.targetContent.description}))),e.ariaDescribedBy="content-item-icon-"+e.content.id,e.content.ui.hasIndicator&&(e.ariaDescribedBy+=" activity-indicator-"+e.content.id)}}return e.$inject=[o.o.serviceName],e}();i.module(a,[]).directive("bbCourseLinkItem",["$injector",function(e){return e.instantiate(r)}])},UODz:function(e,t){e.exports='<div class="submission-card" ng-class="{\'is-late\': isLate, \'inline\': inline}" bb-load-bundle="components/directives/submission-card">\n  <div class="panel" ng-class="{\'clickable-panel\': clickable}">\n    <i ng-if="!inline" class="{{iconClass}}"></i>\n    <div class="info" ng-class="{\'completed\': submissionCard.attempt.isCompleted(), \'rubric-icon-spacing\': submissionCard.shouldExpandForRubricIcon()}">\n      <span class="name ellipsis" bb-translate ng-if="!inline">{{title}}</span>\n      <span class="detail">\n        <span class="test-status ellipsis" ng-show="!!status">\n          <span class="inline-status" ng-if="inline && !hasAttempt && showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.late\n          </span>\n          <span class="inline-status" ng-if="inline && !hasAttempt && !showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.new\n          </span>\n          <span ng-if="inline && !hasAttempt"> - </span>\n          <span bb-translate class="status">{{status}}</span>\n          <ng-switch on="submissionCard.attempt.status" ng-if="submissionCard.attempt">\n            <bb-datetime class="date" format="Short" ng-switch-when="COMPLETED" value="::submissionCard.attempt.attemptLastGradedDate"></bb-datetime>\n            <bb-datetime class="date" format="Short" ng-switch-default value="::submissionCard.attempt.attemptDate"></bb-datetime>\n          </ng-switch>\n          <bb-datetime class="date" format="Short" ng-if="!submissionCard.attempt && gradingColumn.dueDate" value="::gradingColumn.dueDate"></bb-datetime>\n        </span>\n      </span>\n    </div>\n    <div class="grade-container">\n      <ng-switch on="gradeDetail.isPosted()">\n        <bb-display-grade ng-switch-when="true"\n                          grade-detail="gradeDetail"\n                          column="gradingColumn"\n                          display-type="GradeColor"\n                          show-rubric-button="showRubricButton()"\n                          show-rubric-div="showRubricDiv()"></bb-display-grade>\n        <bb-display-grade ng-switch-default\n                          attempt="submissionCard.attempt"\n                          display-type="AttemptStatus"></bb-display-grade>\n      </ng-switch>\n    </div>\n  </div>\n</div>\n'},UeHE:function(e,t){e.exports='<div ng-if="::addContentButton.isCloudServiceAvailable">\n  <bb-file-upload\n    allow-multiple="true"\n    monitor-leave="true"\n    target-div="{{\'#\' + fileListViewId}}"\n    hide-transclude-during-upload="false"\n    click-enabled="false"\n    primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n    skip-zip-file-check="true"\n    disable-drag="true"\n    is-third-party-upload="true"\n    third-party-download-handler="addContentButton.downloadFile"\n    ignored-states="::ignoredStates()">\n    <button ng-click="addContentButton.assignPosition()"\n            class="doc-add-media clear ng-scope"\n            bb-kloudless\n            primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n            attach-handler="addContentButton.cloudUploadAttachHandler"\n            web-location="{{webLocation}}"\n            file-location="{{fileLocation}}"\n            allow-multiple="true"\n            on-files-selected="addContentButton.onFilesSelectedHandler"\n            analytics-id="components.directives.add-content-button.cloud-upload.button">\n      <div class="import-action-header">\n        <i class="icon-cloud add-content-cloud-upload-icon"></i>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n        <div class="action-details" bb-translate="components.directives.add-content-button.importContentFromCloudStorage.description"></div>\n      </div>\n    </button>\n  </bb-file-upload>\n</div>'},Ui4O:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n  ng-click="gradeGridColumnReborn.enterEditor($event)"\n  analytics-id="components.directives.grade.grid.gradeGridColumnReborn.enterEdit"\n>\n  <div class="score hide" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n    <div id="displayedScore" class="hide">\n      <span id="display" class="hide"></span>\n      <span id="posted"  class="grade-posted-symbol hide" bb-translate>components.directives.grade.grid.postedLabel</span>\n      <span id="pastDueZero" class="past-due-zero-symbol hide" bb-translate>components.directives.grade.grid.pastDueZero</span>\n      <span id="slash" class="slash hide"></span>\n      <span id="pointsPossible" class="pointsPossible hide"></span>\n    </div>\n\n    <div id="gradeNow" class="hide" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n      <a href="javascript:void(0);"\n         tabindex="-1"\n         analytics-id="components.directives.grade.grid.gradeNow"\n         bb-translate>components.directives.grade.grid.gradeNow</a>\n    </div>\n\n    <div id="newSubmission" class="hide">\n      <span class="new-submission" bb-translate>components.directives.grade.grid.newSubmissionLabel</span>\n    </div>\n\n    <span id="blank" class="sr-only">\n        {{gradeGridColumnReborn.ariaLabelContent}}\n    </span>\n  </div>\n  <div id="group" class="group-label" ng-if="!gradeGridColumnReborn.isRestrictedGroupContent">{{gradeGridColumnReborn.group.groupTitle}}</div>\n  <div id="ungraded" class="ungraded hide">\n    <span class="ellipse">{{gradeGridColumnReborn.ungraded}}</span>\n  </div>\n  <div class="anonymous hide">\n    <div\n      bb-tooltip\n      enhanced-tooltip="true"\n      tooltip-position="bottom-center"\n      bb-translate-attrs="{ title: \'components.directives.grade.grid.anonymous.tooltip\' }">\n      <span bb-translate>components.directives.grade.grid.anonymous.label</span>\n    </div>\n  </div>\n</div>\n'},Uw4B:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("D57K"),o=n("wHJ2"),s=n("gIKX"),a=n("0JpG"),r=n("yMoE"),c=n("o5Lu"),l=n("lEL+"),d=n("TnpK"),u="ultra.components.directives.grade.input.userFinalGradeInput",p=function(e){function t(t,n,i,o,s,a,r,c,l){var d=e.call(this,t,n,i,o,s,a,r,c,l)||this;return d.$injector=n,d.scope=i,d.bbLocalize=a,d}return Object(i.__extends)(t,e),t.prototype.afterSave=function(e){this.scope.grade=e},t.prototype.getAriaLabelKey=function(){return e.prototype.getAriaLabelKey.call(this,!0)},t.prototype.getRubricEvalStateAndArgs=function(){return null},t.prototype.getWatchGroup=function(){return e.prototype.getWatchGroup.call(this).concat(["grade.id","grade.displayGrade"])},t.prototype.instantiateGradeDisplayItem=function(){return this.$injector.instantiate(r.a,{scope:this.scope,gradeDetail:this.scope.grade})},t.prototype.isRubricEvalMode=function(){return!1},t.prototype.refreshInputBox=function(){e.prototype.refreshInputBox.call(this),this.gradeDisplayItem.displayGrade=this.scope.grade.displayGrade,this.updateGradeColor()},t.prototype.setupGradeSubmission=function(){var e=this.createGradeSubmissionNow();return e.userId=this.scope.forUser().id,e.gradeId=this.scope.grade.id,e.clearGrade&&(e.setGradeToEmpty=!0),this.$q.when(e)},Object.defineProperty(t.prototype,"totalPoints",{get:function(){return this.scope.grade.pointsPossible},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector","scope","element","form",a.serviceName,c.h,l.b,d.d],t}(s.b),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.require="^form",this.template=s.d,this.scope={column:"&",forUser:"&",grade:"=",id:"@",inputAriaLabel:"@?",showOverrideIndicator:"&?",readonly:"&"},this.link=function(e,n,i,o){e.input=t.$injector.instantiate(p,{scope:e,element:n,form:o})}}return e.$inject=["$injector"],e}();o.module(u,[s.c]).directive("bbUserFinalGradeInput",["$injector",function(e){return e.instantiate(m)}])},UyCM:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-messages",use:"icon-small-messages-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-messages"><path d="M1 3h14v10H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 3l7 7 7-7M1 13l5-5M15 13l-5-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"V/65":function(e,t,n){},VCKY:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},VPci:function(e,t,n){},VTbC:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("36Bh"),s="ultra.components.directives.bbUiIcon.Link";Object(i.a)(o.Link,s,"bbUiIconLink")},"VV+j":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("MTZf"),s="ultra.components.directives.bbUiIcon.Scormengine";Object(i.a)(o.Scormengine,s,"bbUiIconScormengine")},VcPJ:function(e,t,n){},Vrsv:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-away",use:"icon-small-away-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-away"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 10L8 8V4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},WAgA:function(e,t){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.wrongDelimiter.title\'}" \n    modal-title-key="course.grades.grades-upload-settings.wrongFormat.title" aria-describedby="wrong-format-content"\n    analytics-id-tag-prefix="course.grades.gradesUploadSettingsWrongFormat">\n    <div name="modal-contents">\n        <p id="wrong-format-content" bb-translate="course.grades.grades-upload-settings.wrongFormat.content"></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettingsWrongFormat.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},WByw:function(e,t){e.exports='<div bb-foundation-defer\n     class="single-submission-grading-bar attempt-grading-bar"\n     ng-class="{\'add-comment-expanded\': gradingBar.gradingCommentHandler.commentPanelOpen}">\n  <div bb-translate class="override-notification" ng-if="::gradingBar.aggregateGradingHandler.showOverrideIndicator()">\n    components.directives.grade.grading-bar.override-notification.single-submission\n  </div>\n  <div class="attempt-grading-bar-inner">\n\n    <i bb-content-item-icon class="icon submission-type-icon" content-column="::column()"></i>\n    <div class="attempt-info">\n      <span bb-translate class="name ellipsis">components.directives.grade.grading-bar.final-score</span>\n      <span class="submission-details-wrap peer-grading-flex-line" ng-if="attempt">\n        <span bb-translate class="details ellipsis submitted js-submitted-date" ng-if="!gradingBar.isSubmittedLate()"\n              translate-values="{date: attempt.attemptDate}">\n          components.directives.grade.grading-bar.submit-date\n        </span>\n        <span bb-translate\n              class="details ellipsis submitted text-alert-ax js-submitted-late-date"\n              ng-if="gradingBar.isSubmittedLate()" translate-values="{date: attempt.attemptDate}">\n          components.directives.grade.grading-bar.submit-late-date\n        </span>\n         <span class="peer-grading-submission-details" ng-if="::gradingBar.isPeerGrading()"\n               ng-switch="gradingBar.peerReviewStatus()">\n          <span class="peer-grading-icon-alignment" ng-switch-when="Started">\n            <bb-svg-icon class="peer-grading-status-icon started" icon="started" size="small"></bb-svg-icon>\n            <span bb-translate class="peer-grading-status-text peer-grading-icon-padding"\n                  translate-values="{peerReviewsCompleted: gradingBar.completedPeerReviews, peerReviewsPerStudent: gradingBar.totalPeerReviews}">components.directives.grade.grading-bar.peerGrading.completed</span>\n          </span>\n          <span class="peer-grading-icon-alignment" ng-switch-when="Completed">\n            <bb-svg-icon class="peer-grading-status-icon completed" icon="complete" size="small"></bb-svg-icon>\n            <span bb-translate class="peer-grading-status-text peer-grading-icon-padding"\n                  translate-values="{peerReviewsCompleted: gradingBar.completedPeerReviews, peerReviewsPerStudent: gradingBar.totalPeerReviews}">components.directives.grade.grading-bar.peerGrading.completed</span>\n          </span>\n           <span class="not-started" ng-switch-default>\n            <span bb-translate class="peer-grading-status-text">components.directives.grade.grading-bar.peerGrading.notStarted</span>\n          </span>\n        </span>\n      </span>\n      \x3c!-- BEGIN Enhance time limit --\x3e\n      <span class="information-about-time-limit show-hide-on-hover"\n            ng-if="gradingBar.isCompleted() && gradingBar.isShowExtraTime()">\n        <span\n          class="exceeded-time attention hide-on-hover details small-medium-show">{{gradingBar.getExceedTime()}}</span>\n        <span bb-translate\n              class="questions-answered-correctly-after-time-limit attention show-on-hover details small-medium-hide"\n              translate-values="{count: gradingBar.getQuestionsAnsweredAfterSoftTimeLimit().length}">\n          components.directives.grade.grading-bar.questions-answered-after-soft-time-limit.plural\n        </span>\n      </span>\n      \x3c!--  END  Enhance time limit --\x3e\n    </div>\n\n    <div class="attempt-grading-actions">\n      <bb-display-grade-pill class="pill-spacing"\n                             column="::column()"\n                             disable-rubric-eval-click="disableRubricAction()"\n                             grade="::gradeDetail"\n                             ng-class="{\'has-feedback\': gradingBar.gradingCommentHandler.hasComment() && gradeDetail.isPosted()}"\n                             ng-hide="hideGrade()">\n      </bb-display-grade-pill>\n      <button analytics-id="components.directives.grade.gradingBar.feedbackPanel.open.button"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grading-bar.instructor-comments.aria-label.comments-toggle-button\'}"\n              class="button super-clear toggle-comments-button"\n              ng-click="gradingBar.openFeedbackPanel()"\n              ng-if="gradingBar.showCommentIcon() && !disableFeedbackButtons  && !gradingBar.disableFeedbackInput()"\n              ng-switch="gradingBar.getCommentIconType()">\n        <bb-svg-icon icon="feedback" ng-switch-when="view" size="medium" status="active"></bb-svg-icon>\n        \x3c!-- For non-privileged users, anything that is not \'view\' should just show an empty feedback icon --\x3e\n        <bb-svg-icon icon="feedback" ng-switch-default size="medium"></bb-svg-icon>\n      </button>\n      <bb-overflow-menu analytics-id-tag-prefix="components.directives.grade.grading-bar.single-submission-attempt.overflowMenu"\n                        element-id="{{\'attempt-menu-open-button_\' + attempt.id}}"\n                        element-name="{{gradingBar.getLocalizedTextByKey(\'components.directives.grade.grading-bar.grade\')}}"\n                        menu-items="gradingBar.getOverflowMenuItems()"\n                        ng-show="gradingBar.showOverflowMenu()">\n      </bb-overflow-menu>\n    </div>\n  </div>\n</div>\n'},WXD6:function(e,t,n){},Wqh6:function(e,t){e.exports='<div class="panel-wrap telemetry-panel">\n  <bb-telemetry-panel-header title="{{header}}"\n                           course="course"\n                           panel-data-loaded="true">\n  </bb-telemetry-panel-header>\n\n  <nav class="group-selector" ng-class="{\'horizontal-scroll\': discussionInsights.hasNavScrollbar()}" ng-if="isGroupDiscussion">\n    <ul class="group-list">\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.overall-link"\n          tabindex="0">\n        <a href="javascript:void(0);"\n           class="overall-link selected"\n           ng-click="discussionInsights.updateDfiPanel($event)"\n           bb-translate="components.directives.discussion.insights.overall"\n           analytics-id="components.directives.discussion.insights.overall">\n        </a>\n      </li>\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.group-menu-link"\n          tabindex="0"\n          ng-repeat="group in ::groups">\n        <a href="javascript:void(0);"\n           class="group-menu-link"\n           ng-click="discussionInsights.updateDfiPanel($event, group.id, group.name)"\n           analytics-id="components.directives.discussion.insights.group.link">\n          {{group.name}}\n        </a>\n      </li>\n    </ul>\n  </nav>\n\n  <section id="discussion-insights" class="panel-content discussion-insights" bb-foundation-defer>\n    <div class="insights">\n      <div class="insight-summary row collapse summary-box">\n        <div class="column small-12">\n          <bb-statistics\n            config="statisticsConfig"\n            ng-if="isLoaded"\n            small-per-row="1"\n            large-per-row="4"></bb-statistics>\n        </div>\n      </div>\n\n      <div class="participation-chart-container">\n        <div class="bar-chart">\n          <span class="participated"\n                aria-label="{{barchartParticipants}}"\n                title="{{barchartParticipants}}"></span>\n          <span class="opened"\n                aria-label="{{barchartOpenedNonParticipants}}"\n                title="{{barchartOpenedNonParticipants}}"></span>\n          <span class="unopened"\n                aria-label="{{barchartNonParticipants}}"\n                title="{{barchartNonParticipants}}"></span>\n        </div>\n        <div class="legend">\n          <div class="participatedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentParticipatedCaption)"></div>\n          <div class="openedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentOpenedCaption)"></div>\n        </div>\n      </div>\n\n      <div class="non-participant-groups row" ng-if="displayNonParticipantGroups">\n        <div class="column small-12 non-participant-box clearfix" bb-foundation-defer>\n          <h3 class="stat-title"\n              bb-translate="components.directives.discussion.insights.groupNonParticipants"\n              translate-values="{count: totalNonParticipants}"></h3>\n          <div class="float-right">\n            <bb-overflow-menu class="ddm-nonparticipant-options"\n                              element-id="ddm-nonparticipant-options"\n                              element-name={{nonParticipantsOptions}}\n                              on-menu-toggle="discussionInsights.updateMessagesCount()"\n                              menu-items="discussionInsights.getOverflowMenu()"\n                              analytics-id-tag-prefix="components.directives.discussion.insights.nonParticipantsGroups.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n\n          <div class="group-nonparticipants" ng-repeat="nonParticipantGroup in nonParticipantGroups track by nonParticipantGroup.id">\n            <div class="group-heading child-is-invokable" bb-click-to-invoke-child="a.group-link">\n              <a class="group-link"\n                 href="javascript:void(0);"\n                 ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 analytics-id="components.directives.discussion.insights.nonParticipantGroup.link">\n                {{nonParticipantGroup.name}}\n              </a>\n            </div>\n            <div class="nonparticipant-in-group-container"\n                 ng-class="nonParticipantGroup.total > 3 ? \'space-evenly\' : \'set-margin\' ">\n              <div class="nonparticipant-in-group child-is-invokable"\n                   bb-click-to-invoke-child="a.group-non-participant-link"\n                   ng-repeat="nonParticipant in nonParticipantGroup.nonParticipants | limitTo: 4 track by nonParticipant.id">\n                <bb-avatar user="nonParticipant"></bb-avatar>\n                <a class="group-non-participant-link"\n                   href="javascript:void(0);"\n                   aria-label="{{nonParticipant.localizedName}}"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipant.link">\n                  {{nonParticipant.localizedName}}\n                </a>\n              </div>\n            </div>\n            <div class="count-link">\n              <a ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 ng-show="nonParticipantGroup.hidden > 0"\n                 href="javascript:void(0);"\n                 bb-translate="components.directives.discussion.insights.moreLink"\n                 translate-values="{count: nonParticipantGroup.hidden}"\n                 analytics-id="components.directives.discussion.insights.moreLink">\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="non-participants row" ng-show="(displayNonParticipants || displayNonParticipantGroup)">\n        <div class="column small-12 non-participant-box clearfix" ng-if="showLargeNonparticipantPanel" bb-foundation-defer>\n          <h3 class="stat-title" bb-translate="components.directives.discussion.insights.nonParticipants"></h3>\n          <div class="float-right">\n            <bb-overflow-menu class="ddm-nonparticipant-options"\n                              element-id="ddm-nonparticipant-options"\n                              element-name={{nonParticipantsOptions}}\n                              on-menu-toggle="discussionInsights.updateMessagesCount()"\n                              menu-items="discussionInsights.getOverflowMenu()"\n                              analytics-id-tag-prefix="components.directives.discussion.insights.nonParticipants.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n          <ul class="non-participant-list clearfix">\n            <li class="non-participant child-is-invokable"\n                bb-click-to-invoke-child="a.non-participant-link"\n                tabindex="-1"\n                ng-show="showNonparticipant[$index]"\n                ng-repeat="nonParticipant in nonParticipants | limitTo: 18 track by nonParticipant.id">\n              <div class="non-participant-cell"\n                   ng-class="{\'show-focus-outline\': discussionInsights.isFocusedNonparticipant(nonParticipant.id)}">\n                <a class="non-participant-link hide-focus-outline"\n                   bb-translate-attrs="{\'aria-label\':\'{{nonParticipant.localizedNameWithoutWrap}}\'}"\n                   id="non-participant-link-{{nonParticipant.id}}"\n                   tabindex="0"\n                   href="javascript:void(0);"\n                   ng-focus="true"\n                   ng-blur="true"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipantLink.link">\n                  <bb-avatar class="non-participant-avatar" user="nonParticipant.avatarData"></bb-avatar>\n                </a>\n                <span class="byline stacked" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.localizedName)"></span>\n              </div>\n            </li>\n          </ul>\n          <label class="summary-line">{{nonParticipationSummary}}</label>\n        </div>\n        <div class="column small-12 non-participant-box clearfix" ng-if="!showLargeNonparticipantPanel">\n          <h3 class="stat-title subheader">{{barchartNonParticipants}}</h3>\n          <button class="messageAllButton button"\n                  bb-translate="components.directives.discussion.insights.messageAll"\n                  bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageAll\'}"\n                  ng-click="discussionInsights.goToMessageAll()"\n                  analytics-id="components.directives.discussion.insights.messageAll">\n            </button>\n        </div>\n      </div>\n\n      <div class="row equal-height" ng-if="displayTopComments || displayTopParticipants">\n        <div class="top-comments column {{topCommentsColumns}} student-list-box" ng-if="displayTopComments">\n          <h3 class="stat-title subheader"\n              id="most-replies-heading"\n              bb-translate="components.directives.discussion.insights.mostReplies"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-comment-row child-is-invokable"\n                 bb-click-to-invoke-child="a.discussion-link"\n                 ng-class="{\'last\':$last}"\n                 ng-repeat="comment in topComments | limitTo: numberOfCommentsToDisplay | orderBy: \'-numReplies\'">\n              <a href="javascript:void(0);"\n                 class="discussion-link"\n                 ng-click="discussionInsights.goToDiscussion(comment.user.group.id)"\n                 aria-labelledby="comment-user-{{comment.user.id}} most-replies-heading"\n                 aria-describedby="comment-message-{{comment.user.id}}\n                 comment-replies-{{comment.user.id}}"\n                 analytics-id="components.directives.discussion.insights.goToDiscussion.link">\n                <bb-avatar class="top-participant-avatar" user="comment.user.avatarData"></bb-avatar>\n                <div class="comment-info">\n                  <div class="comment-message ellipsis" id="comment-message-{{comment.user.id}}">{{comment.message}}</div>\n                  <div class="byline ellipsis">\n                    <span id="comment-user-{{comment.user.id}}">\n                      <bb-translate>components.directives.discussion.insights.by</bb-translate> {{comment.user.localizedName}}\n                      <span ng-show="isGroupDiscussion"><bb-translate>components.directives.discussion.insights.inGroup</bb-translate> {{comment.user.group.name}}</span>\n                    </span> |\n                    <span id="comment-replies-{{comment.user.id}}"> {{comment.numReplies}} <bb-translate>components.directives.discussion.insights.replies</bb-translate></span>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class="top-participants column {{topParticipantColumns}} student-list-box" ng-if="displayTopParticipants">\n          <h3 id="top-heading" class="stat-title subheader" bb-translate="components.directives.discussion.insights.topParticipants"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-participants-row child-is-invokable"\n                 bb-click-to-invoke-child="a.grading-panel-link"\n                 ng-class="{\'last\':$last, \'not-graded\': (!isGradable || isGroupDiscussion), \'group-row\':isGroupDiscussion}"\n                 ng-repeat="participant in topParticipants | limitTo: numberOfCommentsToDisplay | orderBy: \'-numComments\'">\n              <a href="javascript:void(0);"\n                 class="grading-panel-link"\n                 aria-labelledby="user-{{participant.user.id}} top-heading"\n                 aria-describedby="span-replies-{{participant.user.id}} span-feedback-{{participant.user.id}}"\n                 ng-class="{\'not-graded\': (!isGradable || isGroupDiscussion)}"\n                 ng-click="discussionInsights.goToGrade(participant.user.id)"\n                 analytics-id="components.directives.discussion.insights.goToGrade.link">\n                <bb-avatar class="comment-avatar" user="participant.user.avatarData"></bb-avatar>\n                <div class="top-participant-info ellipsis" ng-class="{\'not-graded\': !isGradable}">\n                  <span class="discussion-insights-heading" id="user-{{participant.user.id}}">{{participant.user.localizedName}}</span><br>\n                  <span class="ellipsis" ng-show="isGroupDiscussion">{{participant.user.group.name}}</span><br ng-show="isGroupDiscussion">\n                  <span class="byline" id="span-feedback-{{participant.user.id}}">\n                    <bb-svg-icon class="top-participant-icon" size="small" icon="feedback" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.feedback\'}"></bb-svg-icon>\n                    {{participant.numComments}}\n                  </span>\n                  <span class="byline" id="span-replies-{{participant.user.id}}">\n                  <bb-svg-icon class="top-participant-icon" size="small" icon="replies" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.replies\'}"></bb-svg-icon>\n                    {{participant.numReplies}}\n                  </span>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ui-view="telemetry-discussion-forum-insights-base@"></div>\n  </section>\n</div>\n'},XSys:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-accommodations",use:"icon-small-accommodations-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodations"><path d="M2 1h12v14l-6-2-6 2V1zM5 4h6M5 7h6M5 10h6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},Xc1Q:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-arrow-down",use:"icon-small-arrow-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-down"><path d="M1 4l7 7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},YGwN:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("fWA+"),s="ultra.components.directives.bbUiIcon.DocumentMultiple";Object(i.a)(o.a,s,"bbUiIconDocumentMultiple")},YHe3:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g}));var i=n("D57K"),o=n("wHJ2"),s=n("pjml"),a=n("TnpK"),r=n("Q/M7"),c=n("12mu"),l=n("0JpG"),d=n("nYZ0"),u=n("Qbdf"),p=n("OMme"),m=n("TuNX"),h="ultra.components.services.proctoring",g="proctoring",b={Respondus:"respondus"},f=function(){function t(e,t,n,i,o,s,a,r,c,l,d,u){this.$q=e,this.$rootScope=t,this.$sce=n,this.$window=i,this.CourseModel=o,this.CourseContentModel=s,this.ProctoringServicesModel=a,this.modal=r,this.contentService=c,this.contextCourse=l,this.localize=d,this.ultraState=u}return t.prototype.getBooksAndToolsDescription=function(e){return"components.services.proctoring.booksAndTools."+b[e.vendor]+".description"},t.prototype.getProctoringServices=function(){var e=this.$q.defer();return this.ProctoringServicesModel.$search({"availability.available":"Yes"}).$allow(["400-599"]).$asPromise().then((function(t){t.$response&&t.$response.status>=400?e.resolve([]):e.resolve(t)}),(function(){return e.resolve([])})),e.promise},t.prototype.getProctoringOutlineSummaryText=function(e,t){var n="components.services.proctoring.outline.";if(e.getProctoringServiceHandle()){if(e.isSecureBrowserRequiredToTake()){var i=t?".instructor":".student";return e.isWebcamRequired()?n+b[e.getProctoringServiceVendor()]+i+".secureBrowserAndWebcamRequired":n+b[e.getProctoringServiceVendor()]+i+".secureBrowserRequired"}return null}return null},t.prototype.getProctoringAssessmentSettingsText=function(e){return"components.services.proctoring.settings."+b[e]+".toolLink"},t.prototype.getProctoringAssessmentSettingsRequirementsText=function(e){var t="components.services.proctoring.settings.";return e.getProctoringServiceHandle()&&e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+b[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+b[e.getProctoringServiceVendor()]+".secureBrowserRequired":null},t.prototype.getProctoringOverviewBrowserText=function(e){return e.isSecureBrowserRequiredToTake()?"components.services.proctoring.overview."+b[e.getProctoringServiceVendor()]+".browser":null},t.prototype.getProctoringOverviewRequirementsText=function(e){var t="components.services.proctoring.overview.";return e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+b[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+b[e.getProctoringServiceVendor()]+".secureBrowserRequired":null},t.prototype.getProctoringOverviewDownloadText=function(e){return e.getProctoringDownloadUrl()?"components.services.proctoring.overview."+b[e.getProctoringServiceVendor()]+".downloadBrowser":null},t.prototype.openProctoringLTITool=function(e,t){var n="/webapps/assessment/controller/proctoring/launchProctoringSettings?proctoring_svc_id="+e.id+"&course_id="+this.contextCourse.courseId;t&&(n+="&content_id="+t.id);var i={toolHref:r.c(n)};t&&t.title&&t.title.length>0&&(i.toolSubtitle=t.title),this.ultraState.goPeekState("proctoring-lti-tool",i)},t.prototype.getProctoringReviewButtonText=function(e){return"components.services.proctoring.delivery.review."+b[e]+".reviewResults"},t.prototype.getProctoringReviewDownloadText=function(e){return"components.services.proctoring.delivery.review."+b[e]+".download"},t.prototype.getProctoringModalRequirementsText=function(e){return"components.services.proctoring.modal."+b[e]+".requirements"},t.prototype.getProctoringModalDownloadText=function(e){return"components.services.proctoring.modal."+b[e]+".download"},t.prototype.getProctoringModalBrowserText=function(e){return"components.services.proctoring.modal."+b[e]+".browser"},t.prototype.openProctoringModal=function(e,t){var n=this,i=this.ultraState.getCurrentUrlParams();setTimeout((function(){var o=n.$rootScope.$new(!0);n.proctoringModal=n.modal.open({scope:o,template:m,backdrop:"static"});var s=n.ultraState.prev.name.lastIndexOf("peek.");n.peekState=s?n.ultraState.prev.name.substr(s+5):n.ultraState.prev.name,n.proctoringModal.dismiss=n.openOverviewPeekPanel.bind(n),n.courseId=i.courseId,n.contentId=i.contentId,o.requirementsText=n.getProctoringModalRequirementsText(e.getProctoringServiceVendor()),o.downloadText=n.$sce.trustAsHtml(n.localize.translateSync({key:n.getProctoringModalDownloadText(e.getProctoringServiceVendor()),params:{downloadUrl:e.getProctoringDownloadUrl()},locale:t,noWrap:!0,noEscape:!0})),o.browserText=n.getProctoringModalBrowserText(e.getProctoringServiceVendor())}),3e3)},t.prototype.openOverviewPeekPanel=function(){this.ultraState.goPeekState(this.peekState,this.ultraState.prevParams),this.proctoringModal.close()},t.prototype.getSecureBbEditorOptions=function(e){return this.ultraState.current.name===p.a&&(e.attachment=!1,e.image=!1,e.youtubeVideo=!1,e.video=!1,e.contentMarket=!1),e},t.prototype.handleProctoredAssessmentClose=function(e){"Respondus"===e.getProctoringServiceVendor()?r.p(r.c("/ultra/proctoring/close?rldbsm=1&rldbxb=1")):this.$window.close()},t.prototype.openRespondusProctoringLaunchLink=function(t){if(e("#respondus-iframe").remove(),t.startsWith("data:text/plain,")){var n='<iframe src="data://text/plain,'+t.substring("data:text/plain,".length)+'" id="respondus-iframe" style="display:none"></iframe>';this.createRespondusIFrameAndSetLocation(n)}else this.setRespondusWindowLocation(t)},t.prototype.createRespondusIFrameAndSetLocation=function(t){document.body.appendChild(e(t)[0])},t.prototype.setRespondusWindowLocation=function(e){this.$window.location.assign(e)},t.$inject=["$q","$rootScope","$sce","$window",s.o.serviceName,s.r.serviceName,s.nb.serviceName,c.b,d.f,u.e,l.serviceName,a.d],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(f);o.module(h,["ngSanitize",d.d,l.moduleName,c.a,a.b,u.b]).service(g,f)}).call(this,n("5iHu"))},Ybms:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-duplicate",use:"icon-small-duplicate-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-duplicate"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 4h11v11H1z" /><path d="M12 12h3V1H4v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},Yi7M:function(e,t,n){},Ylhg:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("13AT"),s="ultra.components.directives.bbUiIcon.Lti";Object(i.a)(o.Lti,s,"bbUiIconLti")},Youf:function(e,t){e.exports='<a class="content-title" \n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}" \n   ng-click="contentItemLtiLaunch.ltiLaunch()" \n   href="javascript:void(0);"\n   analytics-id="content.item.ltilaunch.link"><span>{{ content.title }}</span></a>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && !contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.broken-link</span>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.approval-required</span>'},Zahr:function(e,t,n){},ZkU4:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var i=n("D57K"),o=(n("FwJ5"),n("nsO7")),s=n("dCrD"),a=n("Oyr+"),r="show-cloud-upload-progress",c=function(e){function t(t,n,i){var o=e.call(this,t,n,i)||this;if(o.uploadFile=function(){o.saveLocationForFileUpload(),o.element.find(".file-upload").click()},o.uploadCloudFile=function(){o.saveLocationForFileUpload(),o.scope.isButtonLocationChangable&&o.scope.$emit(r,o.positionForFiles.positionAfter),o.element.find(".doc-add-media").click()},o.openContentMarket=function(){var e=o.scope.rootContent(),t=o.getInsertLocationData();o.contentSvc.getParentFolder(t.parentId,o.contextCourse.courseId,e).$then((function(e){if(e.children){var n=""+e.children.getInsertionIndex(t.positionBefore,t.positionAfter,!0,e.hasMoreChildren);o.ultraState.goPeekState("content-market",{position:n,parentId:t.parentId,positionBefore:t.positionBefore,positionAfter:t.positionAfter,depth:t.depth})}}))},o.initContextMenuItems(),n.$on("always-show-time-expires",(function(){o.turnOffAlwaysShow()})),n.isButtonLocationChangable&&n.$on("change-add-content-button-position",(function(e,t){t.reopen&&!o.isMenuVisible&&o.toggleOverflowMenu()})),n.$on(a.e,(function(e,t,i){if(i===a.c.OutlineAddContentButtonFileSelected&&t===n.fileListViewLocalId){var s=o.positionForFiles||o.getInsertLocationData();o.closeMenu(),n.$emit(a.e,s.parentId,s.positionBefore,s.positionAfter,s.depth,t,n.content,a.c.AssignDropTarget),o.assignPosition()}})),o.scope.isRenderByDefault&&o.scope.isRenderByDefault())var s=o.scope.$watch("addContentButton.isMenuVisible",(function(e){e&&(o.scope.addContentButton.removeDefaultRenderClass=!0,s())}));return o.scope.$watch("parentId()",(function(e,t){e!==t&&o.initContextMenuItems()})),o}return Object(i.__extends)(t,e),t.prototype.toggleOverflowMenu=function(){var e=this;this.initContextMenuItems().then((function(){e.toggleMenu()})).catch((function(){}))},t.prototype.initContextMenuItems=function(){var e=this,t=this.element.closest("[data-base-state-name]").data("baseStateName"),n=this.getInsertLocationData();return this.$q.all({isCloudServiceAvailable:this.isCloudServiceAvailablePromise,createHref:this.ultraState.peekHref("content-manage.create",n,t),copyHref:this.ultraState.peekHref("content-manage.copy",n,t),contentCollectionHref:this.ultraState.peekHref("content-collection",n,t)}).then((function(t){var n=e.bbLocalize.getLocale(e.scope);e.items=[{key:"create",className:"js-create",href:t.createHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.create"}),iconProps:{iconName:"add",iconSize:"small"}},{key:"copy",className:"js-copy",href:t.copyHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.copy"}),iconProps:{iconName:"duplicate",iconSize:"small"}},{key:"upload-file",className:"js-upload-file",onClick:e.uploadFile,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.upload"}),iconProps:{iconName:"upload",iconSize:"small"}},{key:"content-market",className:"js-content-market",onClick:e.openContentMarket,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.contentMarket"}),iconProps:{iconName:"content-market",iconSize:"small"}},{key:"upload-cloud-file",className:"js-upload-cloud-file",onClick:e.uploadCloudFile,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.importContentFromCloudStorage.title"}),iconProps:{iconName:"upload-cloud",iconSize:"small"}},{key:"content-collection",className:"js-content-collection",href:t.contentCollectionHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.contentCollection"}),iconProps:{iconName:"content-collection",iconSize:"small"}}],e.isCloudServiceAvailable||Object(o.remove)(e.items,(function(e){return"upload-cloud-file"===e.key})),e.currentCourse.canCopy()||Object(o.remove)(e.items,(function(e){return"copy"===e.key}))}))},t.prototype.saveLocationForFileUpload=function(){this.scope.isButtonLocationChangable&&(this.positionForFiles=this.getInsertLocationData())},t.$inject=["$injector","scope","element"],t}(s.a)},a8oS:function(e,t){e.exports='<div class="content-outline" bb-load-bundle="components/directives/content/content-outline">\n  <bb-add-content-button ng-if="!hideAddMenuOverride && canCreate"\n                         can-create-all-contents="canCreateAllContents"\n                         is-render-by-default="contentOutline.parentFolder.depth === 0"\n                         show-menu-override="contentOutline.shouldShowMenuOverride()"\n                         parent-id="contentOutline.parentFolder.id" root-content="contentOutline.parentFolder"\n                         position-before="\'start\'" item-name="contents[0].title"\n                         depth="(contentOutline.parentFolder.depth + 1)"\n                         always-show="contentOutline.shouldShowAddButton()" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport">\n  </bb-add-content-button>\n  <div class="add-element" ng-if="hideAddMenuOverride && !canCreate"> </div>\n  <div ng-if="contents">\n    <div class="content-outline-scroll-container"\n         bb-infinite-scroll="contentOutline.loadMoreChildren(contentOutline.parentFolder)"\n         infinite-scroll-immediate-check="true" infinite-scroll-disabled="contentOutline.isAllContentsLoaded()"\n         infinite-scroll-container="contentOutline.getScrollContainerSelector()"\n         infinite-scroll-listen-for-event="content-outline-infinite-scroll-check"\n         infinite-scroll-current-count="contents.length" infinite-scroll-total-count="contents.paging.count"\n         infinite-scroll-load-limit="contents.paging.limit"\n         infinite-scroll-tray-id="content-outline-{{::contentOutline.parentFolder.id}}"\n         infinite-scroll-focusable-children-selector=".content-title"\n         infinite-scroll-localization-keys-prefix="components.directives.content.content-outline.infiniteScroll.{{::contentOutline.contextArea === \'discussions\' ? \'discussions\' : \'content\'}}"\n         infinite-scroll-force-show-ancestor-selector="{{::contentOutline.getScrollForceShowSelector()}}"\n         sortable-parent>\n      <div class="content-outline-scroll-list" data-parent-id="{{::contentOutline.parentFolder.id}}">\n        <div class="js-content-div drag-element"\n             ng-class="{\'is-restricted\': content.canViewAsInstructor() && content.isHiddenFromStudents(), \'last\': $last, \'has-conversation-indicator\': content.ui.hasIndicator}"\n             ng-repeat="content in contents track by contentOutline.getContentTrackingId(content)" data-content-id="{{content.id}}"\n             ng-mouseenter="contentOutline.placeAddButton(content)">\n\n          <ng-switch on="(content.isFolder() && !content.isBbPage()) || content.isLearningModule()">\n            <div ng-switch-when="true">\n              <bb-folder root-content="contentOutline.parentFolder"\n                         on-file-drop-handler="contentOutline.onFileDropHandler"\n                         on-move-handler="contentOutline.onMoveHandler"\n                         on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" contents="contents"\n                         content="content" next-content-id="contents[$index + 1].id"\n                         previous-content-id="contents[$index - 1].id"\n                         load-more-children="contentOutline.loadMoreChildren" can-create="canCreate"\n                         can-move="contentOutline.canMove" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport"></bb-folder>\n            </div>\n            <div ng-switch-when="false" bb-drag drag-item="::content.id" can-move="contentOutline.canMove">\n              <div ng-if="!content.isGroupContent || content.assignedGroups.length >= 0 || contentOutline.canMove">\n                <div bb-drop-handler on-file-drop-handler="contentOutline.onFileDropHandler"\n                     on-move-handler="contentOutline.onMoveHandler"\n                     on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" content="content"\n                     root-content="contentOutline.parentFolder" next-content-id="contents[$index + 1].id"\n                     previous-content-id="contents[$index - 1].id">\n                  <div class="row collapse element-list-row js-course-skip-link-target" can-create="canCreate"\n                       can-move="contentOutline.canMove" bb-content-item-mouseover>\n                    <bb-content-item-base contents="contents" content="content" context-area="contentOutline.contextArea"\n                                          can-move="contentOutline.canMove"></bb-content-item-base>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </ng-switch>\n          <div id="add-button-placeholder{{content.id}}"\n               class="add-element-container"\n               ng-if="::canCreate">\n            <div ng-if="contentOutline.isAddContentButtonUnattached(content.id)"\n                 id="add-button-line{{content.id}}" class="add-element" tabindex="0" role="button"\n                 ng-class="{\'mobile-center-content-button\': contentOutline.isMobileDevice()}"\n                 aria-label="{{::contentOutline.getAddButtonLineLabel(content.title)}}"\n                 ng-focus="contentOutline.placeAddButton(content, true)">\n              <bb-svg-icon size="small" icon="add" class="mobile-add-content-icon" ng-if="contentOutline.isMobileDevice()"></bb-svg-icon>\n            </div>\n          </div>\n          <bb-progress\n              ng-if="contentOutline.cloudUploadInProgress[content.id]"\n              target-div="#progress{{content.id}}"\n              primary-key="\'progress\' + content.id"\n              display-results="false"\n          >\n          </bb-progress>\n        </div>\n        <div class="drag-element">\n          <div drag-item-id="{{contentOutline.placeholderContent.id}}"></div>\n          <div class="drop-placeholder" bb-drop-handler content="contentOutline.placeholderContent"\n               on-move-handler="contentOutline.onMoveHandler"\n               on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- LRN-123904: For file upload content items `positionAfter` is set to `content.id` in course-outline.html. But when file upload is\n  in progress, `content.id` stays undefined. As a result `positionAfter` receives undefined.\n  `positionAfter` value is not used when `content.id` is not available. i.e.: When upload-in-progress file is very first item - `positionAfter` value is not\n  available, therefore `positionBefore` is used instead. --\x3e\n  <bb-add-content-button\n    class="movable-add-content-button movable-add-content-button-folder{{::contentOutline.parentFolder.id}}"\n    ng-hide="!contentOutline.addContentButtonLocation"\n    ng-if="::canCreate && !content.ui.importPlaceholder"\n    can-create-all-contents="canCreateAllContents"\n    content="contentOutline.addContentButtonLocation"\n    root-content="contentOutline.parentFolder"\n    is-button-location-changable="true"\n    parent-id="contentOutline.parentFolder.id"\n    position-after="contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter"\n    position-before="(contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter) ? null : contentOutline.addContentButtonLocation.positionBefore"\n    item-name="contentOutline.addContentButtonLocation.title"\n    depth="contentOutline.addContentButtonLocation.depth"\n    context-area="contentOutline.contextArea"\n    can-copy-import="canCopyImport">\n  </bb-add-content-button>\n</div>\n'},aSyE:function(e,t){e.exports='<div class="test-grading uit-submission-grading-wrapper" ng-class="{\'slide-panel-open\': grading.isSlidePanelOpen()}">\n  <div class="panel-wrap">\n    <header class="panel-header">\n      <div class="columns medium-12 large-10">\n        <h1 class="panel-title" bb-translate>course.grades.submission-grading.title</h1>\n        <button class="left-off-canvas-toggle menu-toggle"\n                analytics-id="course.grades.submissionGrading.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>course.grades.submission-grading.menu</span>\n        </button>\n      </div>\n    </header>\n    <section class="panel-content slide names-slider">\n      \x3c!-- TODO: Check if title should be editable & update can-edit & max-length --\x3e\n      <bb-panel-header\n        content="grading.column"\n        panel-title="grading.column.columnName"\n        can-edit="false"\n        show-visibility="false"\n        disable-restricted="true"\n        show-conversations="false"\n        show-course="true"\n        show-delete="false"\n        has-slider="true"\n        show-submissions-grading="::!grading.isOpenFromStudentList"\n        summary="grading.column.summary"></bb-panel-header>\n\n      \x3c!-- START slide toggle --\x3e\n      <div class="panel-content-slide-toggle slide-toogle-container" ng-if="grading.canViewAttempts">\n        \x3c!-- left arrow --\x3e\n        <div class="panel-content-left-trigger center-icon carousel-arrow"\n             ng-attr-aria-disabled="{{!grading.carouselHelper.showPrevArrow()}}"\n             ng-disabled="!grading.carouselHelper.showPrevArrow()"\n             ng-if="::!grading.isOpenFromStudentList">\n          <button ng-show="grading.carouselHelper.showPrevArrow()"\n                  bb-translate-attrs="{\'aria-label\': \'course.grades.submission-grading.previous\'}"\n                  ng-click="grading.transitionTo(-1)"\n                  analytics-id="course.grades.submissionGrading.previousSubmission.button">\n            <bb-svg-icon size="medium" icon="back-arrow" role="presentation"></bb-svg-icon>\n          </button>\n        </div>\n\n        <div class="panel-content-center-trigger single-user" ng-if="!grading.groupId && grading.isOpenFromStudentList">\n          <span class="slider-name page-title assessment-exception">\n            <bb-username user="grading.carouselHelper.currentRow.user" format="short"></bb-username>\n          </span>\n        </div>\n\n        <div class="panel-content-center-trigger single-group" ng-if="grading.groupId && grading.isOpenFromStudentList">\n          <span class="slider-name" ng-class="\'slick_title\' + grading.groupId" bb-foundation-defer>\n            <bb-multi-user-usercard ng-show="grading.carouselHelper.currentRow.group.ui.users.length"\n                                    class="group-header"\n                                    users="grading.carouselHelper.currentRow.group.ui.users"\n                                    view="\'group-users\'"\n                                    group-users-title="grading.carouselHelper.currentRow.group.title"\n                                    list-header="grading.carouselHelper.currentRow.group.ui.membersText"\n                                    selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                    selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                    user-course-availabilities="grading.userCourseAvailabilities">\n            </bb-multi-user-usercard>\n            <span bb-feature-toggle="differentiatedFeedback" remove-from-dom="true"\n                  ng-if="grading.carouselHelper.currentRow.group.ui.users.length"\n                  bb-translate\n                  translate-values="{number: grading.carouselHelper.currentRow.group.ui.users.length}">\n              course.grades.submission-grading.members.pural\n            </span>\n          </span>\n        </div>\n\n        <div class="panel-content-center-trigger" ng-show="grading.carouselHelper.ready" ng-if="::!grading.isOpenFromStudentList">\n          <ul class="names-slide" ng-if="!grading.groupId"\n              bb-carousel="grading.namesCarousel"\n              slides-to-show="3"\n              before-slide-change="grading.contentCarousel.slide($direction)"\n              responsive="[{ media: \'small-only\', options: { slidesToShow: 1 } }]"\n              support-swipe="true"\n              initial-slide="grading.carouselHelper.initialSlide">\n            <li class="no-select" bb-carousel-slide ng-repeat="row in grading.carouselHelper.rows track by $index">\n              \x3c!-- since we use lazy loading (first show 1 row, then other rows), the data of $index = 0 will change, need auto-update="true" --\x3e\n              <button class="slider-name page-title"\n                      ng-if="$visible"\n                      ng-click="grading.onCarouselLabelClick($event, $index)"\n                      analytics-id="course.grades.submissionGrading.user.button">\n                \x3c!-- Peer grading has a unique label for anonymous "Peer X", so use that in this case instead\n                of the default anonymous handled by bb-username directive --\x3e\n                <span ng-if="::grading.isPeerGradingAndAnonymousUser(row.user)"\n                      class="js-carousel-peer-username"\n                      bb-translate="course.grades.submission-grading.peer"\n                      translate-values="{peerNumber: $index + 1}"></span>\n                <bb-username ng-if="::!grading.isPeerGradingAndAnonymousUser(row.user)"\n                             user="row.user"\n                             format="short"\n                             class="ellipse username js-carousel-username"\n                             ng-attr-auto-update="{{::$index === 0}}"></bb-username>\n              </button>\n              <span class="slider-name page-title assessment-exception"\n                    ng-if="$visible">\n                <span ng-if="::grading.isPeerGradingAndAnonymousUser(row.user)"\n                      class="js-carousel-peer-username"\n                      bb-translate\n                      translate-values="{peerNumber: $index + 1}">course.grades.submission-grading.peer</span>\n                <bb-username ng-if="::!grading.isPeerGradingAndAnonymousUser(row.user)"\n                             user="row.user"\n                             format="short"\n                             class="ellipse username js-carousel-username"\n                             ng-attr-auto-update="{{::$index === 0}}"></bb-username>\n              </span>\n            </li>\n          </ul>\n          \x3c!-- Group Card --\x3e\n          <ul class="names-slide" ng-if="grading.groupId && !grading.isOpenFromStudentList"\n              bb-carousel="grading.namesCarousel"\n              slides-to-show="3" focus-on-select="true"\n              before-slide-change="grading.contentCarousel.slide($direction)"\n              prev-arrow=".panel-content-left-trigger" next-arrow=".panel-content-right-trigger" as-nav-for=".student-submission-content-wrapper"\n              responsive="[{ media: \'small-only\', options: { slidesToShow: 1 } }]"\n              initial-slide="grading.carouselHelper.initialSlide">\n            <li class="no-select group" bb-carousel-slide ng-repeat="row in grading.carouselHelper.rows track by $index">\n              <button class="slider-name page-title ellipse"\n                      ng-if="$visible"\n                      analytics-id="course.grades.submissionGrading.group.button">\n                <bdi>{{row.group.title}}</bdi>\n              </button>\n              <span class="slider-name group-title ellipse" ng-if="grading.carouselHelper.isCurrent($index)" ng-class="\'slick_title\' + grading.groupId" bb-foundation-defer>\n                <bb-multi-user-usercard ng-show="grading.carouselHelper.currentRow.group.ui.users.length"\n                                        users="grading.carouselHelper.currentRow.group.ui.users"\n                                        view="\'group-users\'"\n                                        group-users-title="row.group.title"\n                                        list-header="grading.carouselHelper.currentRow.group.ui.membersText"\n                                        selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                        selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                        user-course-availabilities="grading.userCourseAvailabilities">\n                </bb-multi-user-usercard>\n                \x3c!-- Group submissions sub title --\x3e\n                <span bb-feature-toggle="differentiatedFeedback" remove-from-dom="true"\n                      ng-if="grading.carouselHelper.currentRow.group.ui.users.length"\n                      bb-translate\n                      translate-values="{number: grading.carouselHelper.currentRow.group.ui.users.length}">\n                  course.grades.submission-grading.members.pural\n                </span>\n              </span>\n            </li>\n          </ul>\n        </div>\n\n        \x3c!-- right arrow --\x3e\n        <div class="panel-content-right-trigger center-icon carousel-arrow"\n             ng-attr-aria-disabled="{{!grading.carouselHelper.showNextArrow()}}"\n             ng-disabled="!grading.carouselHelper.showNextArrow()"\n             ng-if="::!grading.isOpenFromStudentList">\n          <button ng-show="grading.carouselHelper.showNextArrow()"\n                  bb-translate-attrs="{\'aria-label\': \'course.grades.submission-grading.next\'}"\n                  ng-click="grading.transitionTo(1)"\n                  analytics-id="course.grades.submissionGrading.nextSubmission.button">\n            <bb-svg-icon size="medium" icon="forward-arrow" role="presentation"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n      \x3c!-- END slide toggle --\x3e\n\n      \x3c!-- submission content: single slide slick navigated by slick toggle above --\x3e\n      <div class="student-submission-content-wrapper" ready="{{grading.carouselHelper.ready}}" ng-show="grading.carouselHelper.ready"\n           bb-sliding="grading.contentCarousel"\n           after-sliding="grading.carouselHelper.updateSlide(grading.namesCarousel.currentSlide)"\n      >\n        <div class="slider-submission-content">\n            <div class="slider-bar-container" ng-if="grading.canRenderSubmission()"\n                 ng-switch="::grading.column.isMultipleAttempts() || grading.hasExceptionAttempts"\n                 ng-class="::{\'grading-bar-double\': grading.column.isMultipleAttempts() || grading.hasExceptionAttempts}">\n\n              <div class="grading-bar-wrapper">\n                \x3c!-- final score  & attempt grading bars for multiple attempt assessment --\x3e\n                <bb-grading-bar ng-switch-when="true"\n                                is-exception-attempt="grading.hasExceptionAttempts"\n                                is-privileged="true"\n                                column="::grading.column"\n                                grade-detail="grading.carouselHelper.currentRow.grade"\n                                user="grading.carouselHelper.currentRow.user"\n                                on-update="grading.afterGradingBarUpdate(newGrade)"\n                                on-delete="grading.afterGradingBarDelete()"\n                                has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                                hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"></bb-grading-bar>\n                <div ng-switch-when="true">\n                  <bb-grading-bar\n                    is-exception-attempt="grading.hasExceptionAttempts"\n                    is-privileged="true"\n                    disable-feedback-buttons="!grading.column.isScorm()"\n                    disable-rubric-action="!grading.column.isScorm()"\n                    column="grading.column"\n                    attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                    attempt-index="{{grading.getAttemptIndex(grading.carouselHelper.currentRow)}}"\n                    user="grading.carouselHelper.currentRow.user"\n                    save-as-override="grading.saveAsOverride"\n                    has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                    on-update="grading.afterGradingBarUpdate(newGrade)"\n                    on-delete="grading.afterGradingBarDelete()"\n                    hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"\n                    show-comment="!grading.isSlidePanelOpen()"\n                    show-overflow-menu="grading.showOverflowMenu()">\n                  </bb-grading-bar>\n                </div>\n\n                \x3c!-- grading bar for single attempt assessment --\x3e\n                <div ng-switch-default>\n                  \x3c!-- grading bar for non-peer single attempt assessments --\x3e\n                  <bb-grading-bar ng-if="!grading.isPeerGrading()"\n                                  is-exception-attempt="grading.hasExceptionAttempts"\n                                  is-privileged="true"\n                                  disable-feedback-buttons="!grading.column.isScorm()"\n                                  disable-rubric-action="!grading.column.isScorm()"\n                                  row="grading.carouselHelper.currentRow"\n                                  column="::grading.column"\n                                  grade-detail="grading.carouselHelper.currentRow.grade"\n                                  attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                                  user="grading.carouselHelper.currentRow.user"\n                                  on-update="grading.afterGradingBarUpdate(newGrade)"\n                                  on-delete="grading.afterGradingBarDelete()"\n                                  save-as-override="grading.saveAsOverride"\n                                  has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                                  hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"\n                                  show-comment="!grading.isSlidePanelOpen()"\n                                  show-overflow-menu="grading.showOverflowMenu()"\n                                  selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                  selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                  user-list="grading.carouselHelper.currentRow.group.ui.users"\n                                  user-course-availabilities="grading.userCourseAvailabilities"></bb-grading-bar>\n\n                  \x3c!-- grading bar for peer assessments --\x3e\n                  <bb-grading-bar ng-if="grading.isPeerGrading()"\n                                  is-exception-attempt="grading.hasExceptionAttempts"\n                                  is-privileged="true"\n                                  disable-feedback-buttons="!grading.column.isScorm()"\n                                  disable-rubric-action="!grading.column.isScorm()"\n                                  row="grading.carouselHelper.currentRow"\n                                  column="::grading.column"\n                                  peer-review-progress="::grading.getPeerReviewProgress()"\n                                  on-feedback-icon-click="::grading.onFeedbackIconClick()"\n                                  disable-feedback-input="::grading.disableFeedbackInput()"\n                                  grade-detail="grading.carouselHelper.currentRow.grade"\n                                  attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                                  user="grading.carouselHelper.currentRow.user"\n                                  on-update="grading.afterGradingBarUpdate(newGrade)"\n                                  on-delete="grading.afterGradingBarDelete()"\n                                  save-as-override="grading.saveAsOverride"\n                                  has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                                  hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"\n                                  show-comment="!grading.isSlidePanelOpen()"\n                                  show-overflow-menu="grading.showOverflowMenu()"\n                                  selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                  selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                  user-list="grading.carouselHelper.currentRow.group.ui.users"\n                                  user-course-availabilities="grading.userCourseAvailabilities"></bb-grading-bar>\n                </div>\n              </div>\n\n              \x3c!-- assessment specific submission content --\x3e\n              <div class="slider-bar-content" ng-if="!grading.column.isScorm()" ng-switch="grading.isExternalSubmissions">\n                <div class="slider-bar-content-attempt" ng-switch-when="true">\n                  <bb-external-submission-canvas\n                    attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                    class="slider-bar-content-attempt"\n                    has-rubric-association="grading.column.hasRubricAssociation()"\n                    questions="::grading.getQuestionsForAttempt()"\n                    is-any-question-editing="grading.isAnyQuestionEditing"\n                    use-navigation="true"\n                  ></bb-external-submission-canvas>\n                </div>\n                <div class="slider-bar-content-attempt" ng-switch-default>\n                  <bb-attempt-canvas-with-navigation attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                                                     has-rubric-association="grading.column.hasRubricAssociation()"\n                                                     class="submission-grading-attempt-canvas-with-navigation slider-bar-content-attempt"\n                                                     graded-question-attempts="grading.gradedQuestionAttempts"\n                                                     canvas-type="\'grade\'"\n                                                     is-any-question-editing="grading.isAnyQuestionEditing"\n                                                     score-provider-handle="grading.getScoreProviderHandle()"\n                                                     ng-if="grading.getAttempt(grading.carouselHelper.currentRow) && !grading.getAttempt(grading.carouselHelper.currentRow).isInProgress() && grading.getAttempt(grading.carouselHelper.currentRow).toolAttemptDetail">\n                  </bb-attempt-canvas-with-navigation>\n                </div>\n              </div>\n\n              <div ng-if="grading.column.isScorm() && grading.attemptDetail" id="scorm-report">\n                <bb-scorm-submission\n                  submission-detail="grading.attemptDetail"\n                  class-average-time="grading.classAverageTime"\n                  is-organization="grading.course.isOrganization">\n                </bb-scorm-submission>\n              </div>\n            </div>\n\n            <div class="is-empty-page is-empty-fade angular-animate" ng-if="!grading.isLoading && grading.carouselHelper.currentRow.hasNoSubmissions()">\n              <div class="is-empty-wrapper">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/delete-illustration.svg" bb-translate bb-translate-attrs="{\'alt\':\'course.grades.submission-grading.attemptDeleted\'}"/>\n                  <h1 class="is-empty-heading js-grading-attempt-deleted" bb-translate>course.grades.submission-grading.attemptDeleted</h1>\n                </div>\n              </div>\n            </div>\n        </div>\n\n      </div>\n\n      <div class="spinner bb-secondary-color-2" ng-if="grading.isLoading" aria-hidden="true"></div>\n    </section>\n  </div>\n\n  <div ui-view="submission-grading-peek"></div>\n  <footer ng-if="grading.showPeerSaveSubmitButtons()"  class="submit-footer panel-footer show-on-full autosave-footer">\n    <div class="panel-footer-right equal-buttons buttons-2 save-and-submit">\n      <button\n        ng-click="grading.saveFeedback()"\n        ng-class="{disabled: !grading.isFeedbackDirty}"\n        ng-disabled="!grading.isFeedbackDirty"\n        class="button button--secondary js-save-draft-button"\n        analytics-id="assessment.feedbackAuthoring.components.feedbackBody.content.primaryFeedback.graderFeedback.feedbackEditor.saveAndClose"\n        bb-translate>course.content.assessment.footer.buttons.saveAndClose</button>\n      <button class="button js-send-draft-button"\n        ng-click="grading.submitFeedback()"\n        ng-class="{disabled: grading.isFeedbackEmpty}"\n        ng-disabled="grading.isFeedbackEmpty"\n        analytics-id="assessment.feedbackAuthoring.components.feedbackBody.content.primaryFeedback.graderFeedback.feedbackEditor.submit"\n        bb-translate>course.content.assessment.footer.buttons.submit</button>\n    </div>\n  </footer>\n</div>\n<div class="hide"\n     bb-confirmation-needed="x-bb-close-without-saving"\n     show-type="always"\n     modal-name="submission-question-regrading"\n     ng-click="grading.closeWithoutSaving()"\n     analytics-id="course.grades.submission-grading.confirmClose"\n    ></div>\n<div class="hide"\n    bb-confirmation-needed="x-bb-save-changes"\n    show-type="always"\n    modal-name="assessment-feedback-save-changes"\n    other-choice-action="grading.doSlide()"\n    ng-click="grading.doSlide(true)"\n    analytics-id="course.content.assessment.assessmentFeedback.saveChanges"\n></div>\n'},aTRN:function(e,t,n){"use strict";var i=n("D57K"),o=n("pjml"),s=n("aHpC"),a=n("nbDY"),r=n.n(a),c=n("4GL6"),l=n("0JpG"),d=n("oi1r"),u=n("TnpK"),p=n("Qbdf"),m=n("X455"),h=n("nsO7"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Multiple=new t("multiple-conditions"),t.Performance=new t("performance"),t.ForcedSequence=new t("forced-sequence"),t.Date=new t("date"),t.None=new t("none"),t}(r.a),b=function(){function e(e,t,n,i,o,s,a){var r=this;this.localizeService=e,this.schemaService=t,this.courseModel=n,this.contextCourse=i,this.contextCourseMembership=o,this.scope=a,this.isPerformanceConditionInvalid=!1,this.role=h.memoize((function(){return r.contextCourseMembership.courseMembership&&r.contextCourseMembership.courseMembership.isActAsInstructorMembership()?"instructor":"student"})),this.courseId=i.courseId?i.courseId:s.params.courseId}return e.prototype.getConditions=function(e,t,n){this.content=e;var i=e.adaptiveReleaseRules&&e.adaptiveReleaseRules.rules;if(i&&i.length||e.isForcedSequenceModule())if(this.getConditionType(i),this.getPerformanceCriteria()?this.getPerformanceCondition(t,n):this.performanceToolTips=null,this.getDateCriteria()?this.getDateCondition():this.dateToolTips=null,e.isForcedSequenceModule()&&this.contextCourseMembership.courseMembership.isActAsInstructorMembership()||e.isForcedSequenceItem()){var o=e.isForcedSequenceModule()?"module":"item";e.isForcedSequenceItem()&&0===e.position&&(o="first-"+o),this.forcedSequenceTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.content-item-base.conditionalRelease."+this.role()+"-forced-sequence-"+o+"-tooltip",noWrap:!0,noEscape:!0}),this.updatetooltipScope()}else this.forcedSequenceTips=null},e.prototype.getConditionType=function(e){e&&e[0]&&e[0].criteria&&(this.allCriteria=e[0].criteria);var t=this.getPerformanceCriteria(),n=this.getDateCriteria(),i=this.content&&(this.content.isForcedSequenceModule()||this.content.isForcedSequenceItem()),o=[t,n,i].filter((function(e){return!!e})).length;this.conditionType=o>=2?g.Multiple.toString():t?g.Performance.toString():n?g.Date.toString():i?g.ForcedSequence.toString():g.None.toString()},e.prototype.getPerformanceCriteria=function(){return this.getCriteriaByType("Grade_Range")||this.getCriteriaByType("Grade_Range_Percentage")},e.prototype.getDateCriteria=function(){return this.getCriteriaByType("Date_Range")},e.prototype.getCriteriaByType=function(e){return this.allCriteria&&this.allCriteria.find((function(t){return t.type===e}))},e.prototype.getPerformanceCondition=function(e,t){var n=this;this.gradeCriteria=this.getPerformanceCriteria();var i=this.gradeCriteria&&this.gradeCriteria.minScore,s=this.gradeCriteria&&this.gradeCriteria.maxScore,a=this.gradeCriteria&&this.gradeCriteria.gradeColumnId,r="",c="";if(!a||t){var l="components.directives.content-item-base.conditionalRelease."+this.role()+"-missing-column-error";return this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:l,noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!0,void this.updatetooltipScope()}this.courseModel.$new(this.courseId||this.content.courseId).gradebook.columns.$find(a).$allow([403]).$then((function(t){if(t.$response&&403===t.$response.status)return n.performanceToolTips=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),key:"components.directives.content-item-base.conditionalRelease.student-missing-column-error",noWrap:!0,noEscape:!0}),n.isPerformanceConditionInvalid=!0,void n.updatetooltipScope();var a="components.directives.content-item-base.conditionalRelease."+n.role()+"-lock-tooltip";a+=void 0===s?"-common":i===s?"-equal":"-custom";var l=e||t&&t.columnName;n.schemaService.loadSchemas(n.courseId).then((function(e){var d=e&&e.find((function(e){return e.id===t.gradingSchemaId}))||{};n.gradeCriteria&&"Grade_Range"===n.gradeCriteria.type&&(void 0!==s||o.I.ScaleType.Score.isEqualTo(d.scaleType)||o.I.ScaleType.Complete.isEqualTo(d.scaleType))&&(r=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:i||0},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0}),c=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:s||t.possible},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0})),n.gradeCriteria&&"Grade_Range_Percentage"===n.gradeCriteria.type&&(void 0!==s||o.I.ScaleType.Percent.isEqualTo(d.scaleType)?(r=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:i||0},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0}),c=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:s||t.possible},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0})):o.I.ScaleType.Tabular.isEqualTo(d.scaleType)&&(d.symbols.sort((function(e,t){return e.absoluteTranslation-t.absoluteTranslation})),d.symbols.forEach((function(e){e.absoluteTranslation>=i&&(i=e.symbol,r=i)})))),n.getPerformanceToolTips(a,r,c,l)}))}))},e.prototype.getDateCondition=function(){if(this.dateCriteria=this.getDateCriteria(),this.dateCriteria){var e=null;this.dateCriteria.start&&this.dateCriteria.end?e="both":this.dateCriteria.start?e="showon":this.dateCriteria.end&&(e="hideafter");var t="components.directives.content-item-base.conditionalRelease."+this.role()+"-"+e+"-date-tooltip";this.dateToolTips=e&&this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:t,params:{showon:new Date(this.dateCriteria.start),hideafter:new Date(this.dateCriteria.end)},noWrap:!0,noEscape:!0}),this.updatetooltipScope()}},e.prototype.getPerformanceToolTips=function(e,t,n,i,o){void 0===o&&(o=""),this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:e,params:{minScore:t,maxScore:n,title:i},noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!1,this.updatetooltipScope()},e.prototype.updatetooltipScope=function(){angular.isUndefined(this.tooltipScope)&&(this.tooltipScope=this.scope.$new(!0)),this.tooltipScope.items=[],this.performanceToolTips&&(this.tooltipScope.items.push(this.performanceToolTips),this.isPerformanceConditionInvalid)?this.tooltips=this.performanceToolTips:(this.dateToolTips&&this.tooltipScope.items.push(this.dateToolTips),this.forcedSequenceTips&&this.tooltipScope.items.push(this.forcedSequenceTips),this.tooltips=this.tooltipScope.items.join(" "))},e.prototype.getConditionalReleaseComplexTooltipTemplate=function(){return c.a("conditional-release-tooltip")},e=Object(i.__decorate)([Object(i.__param)(0,Object(s.b)(l.serviceName)),Object(i.__param)(1,Object(s.b)(d.b)),Object(i.__param)(2,Object(s.b)(o.o.serviceName)),Object(i.__param)(3,Object(s.b)(p.e)),Object(i.__param)(4,Object(s.b)(m.d)),Object(i.__param)(5,Object(s.b)(u.d)),Object(i.__param)(6,Object(s.b)("scope"))],e)}();t.a=b},ap1t:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y}));var i=n("D57K"),o=(n("Q6Ow"),n("wHJ2")),s=n("en1n"),a=n("0JpG"),r=n("Fvsw"),c=n("X/qj"),l=n("yMoE"),d=n("pjml"),u=n("TnpK"),p=n("g66W"),m=n("fYJU"),h=n("ooAF"),g=n("nmzr"),b=n("aHpC"),f="ultra.components.directives.grade.displayGradePill",v="--",y="na",w=function(){function e(e,t,n,i,o,a,r,c,d){var u=this;this.$injector=e,this.$sce=t,this.scope=n,this.element=i,this.bbLocalize=o,this.context=a,this.ultraState=r,this.gradebookPermissionService=c,this.contextUser=d,this.colorCss="";var p=this.scope.column()&&this.scope.column().courseId;this.bundlePromise=o.loadBundle("components/directives/grade/display-grade"),this.canViewGradebook=this.hasViewGradebook(p),this.isStudent=d.userModel.isStudent(),this.canViewGrades=this.hasViewGrades(p),this.canViewGrades?(this.scope.$watch("::column()",(function(e){if(e)u.scope.$watchGroup(["attempt()","grade()"],(function(){var e=u.scope.attempt&&u.scope.attempt(),t=u.scope.grade&&u.scope.grade(),n=u.gradeDisplayItem=u.$injector.instantiate(l.a,{gradeDetail:t,scope:u.scope});n.init(u.scope.column()).then((function(){var i;u.schema=n.schema,u.schema&&(u.scaleType=n.schema.scaleType),e?i=e.displayGrade:t&&u.schema&&(i=t.displayGrade),n.displayGrade=i,u.setFullDisplayValue()}))}))})),this.scope.$watch((function(){return s.d()}),(function(){u.displayValue&&u.setFullDisplayValue()}))):(this.displayValue=v,this.colorCss=y)}return e.prototype.hasViewGradebook=function(e){return this.gradebookPermissionService.canView(e)},e.prototype.hasViewGrades=function(e){return this.isStudent||this.gradebookPermissionService.canViewGrades(e)},e.prototype.shouldShowPendingForGrade=function(){var e=this.scope.grade;return e&&e()&&!e().isPosted()&&e().hasAttempts()},e.prototype.shouldShowPendingForAttempt=function(){var e=this.scope.attempt;return e&&e()&&e().isNeedsGrading()},e.prototype.shouldRenderInlineRubric=function(){var e=this.scope.grade;return this.rubricEvaluationIsComplete()||this.shouldShowPendingForGrade()||this.shouldShowPendingForAttempt()||e().isPastDueZero()},e.prototype.setNoSubmitView=function(){var e=this;this.schema&&this.scaleType&&(d.I.ScaleType.Percent.isEqualTo(this.scaleType)?this.displayValue=v+" %":d.I.ScaleType.Score.isEqualTo(this.scaleType)?this.bundlePromise.then((function(){e.displayValue=v+e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.display-grade.total",params:{total:e.scope.grade&&e.scope.grade()&&e.scope.grade().pointsPossible||e.scope.column().possible},noWrap:!0})})):this.displayValue=v)},e.prototype.setFullDisplayValue=function(){var e=this;this.displayValue=this.gradeDisplayItem&&this.gradeDisplayItem.displayValue,this.gradeDisplayItem.displayValue?(this.shouldShowPossiblePoints()?this.bundlePromise.then((function(){e.displayValue=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.display-grade.score",params:{grade:e.gradeDisplayItem.displayValue,possible:e.scope.grade&&e.scope.grade().pointsPossible||e.scope.column().possible},noWrap:!0,noEscape:!0})})):this.displayValue=this.gradeDisplayItem.displayValue,this.colorCss=this.gradeDisplayItem.getGradeColor()):this.isStudent&&(this.shouldShowPendingForGrade()||this.shouldShowPendingForAttempt())?(this.colorCss=y+" pending",this.bundlePromise.then((function(){e.displayValue=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.display-grade.pending-grade",noWrap:!0})}))):(this.colorCss=this.isStudent?y+" no-attempt":"",this.setNoSubmitView())},Object.defineProperty(e.prototype,"cursorClass",{get:function(){return this.scope.cursor?"cursor-"+this.scope.cursor:""},enumerable:!0,configurable:!0}),e.prototype.shouldShowPossiblePoints=function(){return!this.isSmallBP()&&this.gradeDisplayItem&&this.gradeDisplayItem.shouldShowTotalPoints()},e.prototype.isSmallBP=function(){return s.a.Small.isEqualTo(s.c())},e.prototype.shouldShowRubricButton=function(){return!(this.scope.hideRubricIcon||!this.scope.column()||!this.scope.column().hasRubricAssociation())&&(!(!this.scope.column().isDiscussion()&&!this.scope.column().isJournal())||(null!=this.scope.attempt||!(!(this.scope.column().isSingleAttempt()&&this.scope.grade()&&this.scope.grade().ui.attempt)||d.C.AttemptStatus.InProgress.isEqualTo(this.scope.grade().ui.attempt.status))))},e.prototype.rubricEvaluationIsComplete=function(){var e=this.scope.column();if(e&&e.hasRubricAssociation()){var t=this.scope.attempt?this.scope.attempt():this.scope.grade().ui.attempt;return e.getRubricAssociation().isWithEvaluations&&(t&&t.isCompleted()||e.isDiscussion()||e.isJournal())}return!1},e.prototype.openRubricEvaluation=function(e){if(!this.scope.disableRubricEvalClick||!this.scope.disableRubricEvalClick()){e.stopPropagation();var t=this.getRubricStateRef();this.ultraState.current.name.endsWith("peek.assessment-submission-feedback")&&this.ultraState.leavePeekState(this.ultraState.current.name),this.ultraState.goPeekState(t.state,t.args)}},e.prototype.getRubricStateRef=function(){var e,t;(this.scope.grade||this.scope.attempt)&&(e=this.scope.attempt?this.scope.attempt().id:null,this.scope.grade&&this.scope.grade().ui&&this.scope.grade().ui.attempt&&this.scope.grade().ui.attempt.id&&(e=this.scope.grade().ui.attempt.id||this.scope.grade().ui.attempt.groupAttemptId),t=this.scope.attempt?this.scope.attempt().groupId:null,this.scope.grade&&this.scope.grade().ui.groupAttempt&&(t=this.scope.grade().ui.groupAttempt.groupId));var n={state:"",args:{attemptId:e||null,columnId:this.scope.column().id||null,contentId:this.scope.column().contentId||null,courseId:this.scope.column().courseId}},i="inline-rubric";if(this.scope.isManualStatusPosted||this.gradeDisplayItem.displayValue&&"0"!==this.gradeDisplayItem.displayValue||this.scope.isExternalSubmission||this.scope.column().isCollectExternalSubmissions()||(i=this.shouldRenderInlineRubric()?"inline-rubric":"peek.rubric-view"),this.canViewGradebook||this.scope.column().isDiscussion()||this.scope.column().isJournal()){var o=this.rubricEvaluationIsComplete()?"rubric-evaluation":"rubric-view";n.args.groupId=t||null,n.args.userId=this.scope.grade&&this.scope.grade().user&&(this.scope.grade().user.$pk||this.scope.grade().user.id)||null,n.state=o,this.scope.column().isDiscussion()&&(n.state="discussion.view.with-grading.peek."+o),this.scope.column().isJournal()&&(n.state=this.rubricEvaluationIsComplete()?g.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_EVALUATION:g.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_VIEW)}else n.args.groupId=t||null,n.state=g.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+"."+i;return p.e(this.ultraState.current.name,".peek.course.grades")&&(this.scope.column().isCollectExternalSubmissions()?(n.state=g.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+".inline-rubric",n.args.skipTransitionEvents=!0):n.state="assessment.overview"),n},e=Object(i.__decorate)([Object(i.__param)(0,Object(b.b)("$injector")),Object(i.__param)(1,Object(b.b)("$sce")),Object(i.__param)(2,Object(b.b)("scope")),Object(i.__param)(3,Object(b.b)("element")),Object(i.__param)(4,Object(b.b)(a.serviceName)),Object(i.__param)(5,Object(b.b)(r.b)),Object(i.__param)(6,Object(b.b)(u.d)),Object(i.__param)(7,Object(b.b)(c.b)),Object(i.__param)(8,Object(b.b)(m.b))],e)}(),C=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=h,this.scope={attempt:"&?",column:"&",disableRubricEvalClick:"&?",grade:"&?",isManualStatusPosted:"<?",cursor:"@?",hideRubricIcon:"=?",isExternalSubmission:"=?",rubricStateOverride:"@?"},this.link=function(e,n){if(!e.attempt&&!e.grade)throw new Error("An attempt or grade must be included on scope");if(e.attempt&&e.grade)throw new Error("An attempt or grade should be included on scope, not both");if(!e.column)throw new Error("A column must be included on scope");e.displayGradePill=t.$injector.instantiate(w,{scope:e,element:n})}}return e.$inject=["$injector"],e}();o.module(f,[d.Q,c.a]).directive("bbDisplayGradePill",["$injector",function(e){return e.instantiate(C)}])},bBUr:function(e,t,n){},bVj5:function(e,t,n){},bhWV:function(e,t,n){"use strict";n("Sq3Z"),n("1NX5"),n("uAJz");var i=n("wHJ2"),o=n("wy9x"),s=n("ga7A"),a=n("Is+C"),r=n("yV5t"),c="ultra.components.directives.content.contentItem.contentItemType.contentItemScormlaunch",l=function(){function e(e,t){this.scope=e,this.scormService=t}return e.prototype.scormLaunch=function(){if(!this.scope.content.isScorm())throw new Error("Attempted to launch a non-SCORM content item. "+this.scope.content.contentHandler.toString());this.scormService.scormLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0})},e.$inject=["scope",a.c],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=r,this.scope=!1,this.link=function(e,n,i){e.contentItemScormLaunch=t.$injector.instantiate(l,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[a.b]).directive("bbContentItemScormlaunch",["$injector",function(e){return e.instantiate(d)}]);var u=n("z+6U"),p=n("jhBu"),m=n("YHe3"),h=n("TnpK"),g=n("pjml"),b=n("/R3n"),f=n("Sa5G");n.d(t,"a",(function(){return v}));var v="ultra.components.directives.content.contentItem.contentItemCourseOutline",y=function(){function e(e,t,n,i){var o=this;this.scope=e,this.entitlementService=t,this.proctoringService=n,this.ultraState=i,this.customCategory="",this.entitlementService.hasCourseEntitlement(f.f.ModifyContent,this.scope.content.courseId).then((function(e){o.entitledToModifyContent=e}))}return Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.shouldAlignMiddle=function(){var e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))},e.prototype.openConditionalRelease=function(){if(!this.isCourseCompletedAndInInstructorView()){var e=this.scope.content.id;this.scope.content&&this.scope.content.contentHandler&&this.scope.content.contentDetail&&g.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.getLinkContentSource().$then((function(t){e=t.id})),this.ultraState.goPeekState("conditional-release",{id:e})}},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()},e.prototype.getExtraRequirementsSummary=function(){return this.proctoringService.getProctoringOutlineSummaryText(this.scope.content,this.entitledToModifyContent)},e.$inject=["scope",p.b,m.b,h.d],e}(),w=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=b,this.scope=!1,this.link=function(e){if(e.contentItemCourseOutline=t.$injector.instantiate(y,{scope:e}),e.content.getAssociatedGradingColumn()){var n=e.content.getAssociatedGradingColumn().gradebookCategory;n&&!n.isUserDefined?(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+n.title,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+n.title):(e.contentItemCourseOutline.customCategory=n&&n.title,e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description.custom",e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title.custom")}else e.contentItemBase.courseLinkContentHandler.isEqualTo(e.content.contentHandler)&&(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+g.E.GradeCategoryTitleEnum.Discussion,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+g.E.GradeCategoryTitleEnum.Discussion)}}return e.$inject=["$injector"],e}();i.module(v,[o.a,s.a,u.a,c,m.a,h.b]).directive("bbContentItemCourseOutline",["$injector",function(e){return e.instantiate(w)}])},c2Z8:function(e,t){e.exports='<div class="bb-statistics">\n  <ul class="statistics-list total-items-{{::statistics.total}} small-per-row-{{::statistics.smallPerRow}} large-per-row-{{::statistics.largePerRow}}">\n    <li ng-repeat="item in statistics.config">\n      <div class="statistics-item-container" ng-class="{\'no-default-padding\': item.noDefaultPadding, \'full-height\': !item.complexScope}">\n        <div class="stat-title" ng-attr-title="{{ item.hover ? item.hover : undefined }}" bb-translate>{{::item.title}}</div>\n        <div ng-if="::!item.complexScope" bb-simple-statistic item="::item"></div>\n        <div ng-if="::item.complexScope" bb-complex-statistic item="::item"></div>\n      </div>\n    </li>\n  </ul>\n</div>'},"c7N/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("D57K"),o=n("Fvsw"),s=n("jhBu"),a=n("aHpC"),r=n("Sa5G"),c="ultra.components.services.unsafe-html",l="unsafe-html",d=function(){function e(e,t){this.contextService=e,this.entitlementService=t}return e.prototype.hasEditUnsafeHtmlPermission=function(){return this.entitlementService.hasCourseEntitlement(r.H.Modify)},e.prototype.isAlternateDomainConfigured=function(){return this.contextService.getSystemInfo().alternateDomainConfigured},e.prototype.canEditUnsafeHtml=function(){var e=this;return this.hasEditUnsafeHtmlPermission().then((function(t){return t&&e.isAlternateDomainConfigured()}))},e=Object(i.__decorate)([Object(i.__param)(0,Object(a.b)(o.b)),Object(i.__param)(1,Object(a.b)(s.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(d);angular.module(c,[o.a,s.a]).service(l,d)},"cH+F":function(e,t){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.colorClass || \'na\'}} overall-grade"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target"\n       ng-class="{\'defaultCursor\': displayGrade.cursorDefault}">\n    <span ng-if="!displayGrade.noGradeToDisplay()" class="sr-only" bb-translate>{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}</span>\n    <span ng-if="!overallGradePeekSref" class="value">{{displayGrade.fullDisplayGrade}}</span>\n    <a class="overall-grade value" \n       ng-if="overallGradePeekSref" \n       bb-peek-sref="{{overallGradePeekSref}}"\n       analytics-id="components.directives.grade.display-grade.overallGrade.link">\n      {{displayGrade.fullDisplayGrade}}\n    </a>  \n  </div>\n</div>\n'},cMgu:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("3yh1"),s="ultra.components.directives.bbUiIcon.LearningModule";Object(i.a)(o.LearningModule,s,"bbUiIconLearningModule")},cR84:function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.grades.settings.categorySettings.deleteAlert.title\'}"\n          modal-title-key="course.grades.settings.categorySettings.deleteAlert.title"\n          analytics-id-tag-prefix="course.grades.settings.categorySettings.deleteAlert">\n  <div name="modal-contents">\n    <bb-translate>course.grades.settings.categorySettings.deleteAlert.content</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$dismiss()" \n          class="button js-primary-button"\n          analytics-id="course.grades.settings.categorySettings.deleteAlert.ok.button">\n    <span bb-translate="course.grades.settings.categorySettings.deleteAlert.ok-button"></span>\n  </button>\n</bb-modal>'},cbVV:function(e,t,n){"use strict";(function(e){n.d(t,"l",(function(){return v})),n.d(t,"k",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return C})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return k})),n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return D})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return O})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return $}));var i=n("D57K"),o=n("nsO7"),s=n("yC9S"),a=n("Sa5G"),r=n("jhBu"),c=n("o5Lu"),l=n("X/qj"),d=n("vhkR"),u=n("Is+C"),p=n("Mc6f"),m=n("8jzW"),h=n("hkqm"),g=n("TnpK"),b=n("dF44"),f=function(){function t(e,t,n,i,o,s,r,c,l,d,u,p,m,h,g,b){var f=this;this.rootScope=e,this.gridData=t,this.data=n,this.headerTemplate=i,this.cellTemplate=o,this.columnWidth=s,this.position=r,this.border=c,this.ltiService=l,this.entitlementService=d,this.gradeService=u,this.gradebookPermissionService=p,this.scormService=m,this.scoreProviderHelper=h,this.toast=g,this.ultraState=b,this.id=n.id;var v=this.getCourse().id;this.entitlementService.hasCourseEntitlement(a.j.DeleteAssessment,v).then((function(e){f.canDeleteAssessment=e})),this.entitlementService.hasCourseEntitlement(a.f.DeleteContent,v).then((function(e){f.canDeleteContent=e})),this.entitlementService.hasCourseEntitlement(a.j.ModifyAssessment,v).then((function(e){f.canModifyAssessment=e})),this.entitlementService.hasCourseEntitlement(a.f.ModifyContent,v).then((function(e){f.canModifyContent=e})),this.entitlementService.hasCourseEntitlement(a.j.ViewAssessment,v).then((function(e){f.canViewAssessment=e})),this.entitlementService.hasCourseEntitlement(a.f.ViewAsDesigner,v).then((function(e){f.canViewContentDesigner=e}))}return t.prototype.getCourse=function(){return this.gridData.course},t.prototype.hasContextMenuOptions=function(){return this.isScorm()||this.canView()||this.gradeService.canPostGrades(this.gridData.course,this.data)||this.data.isQuestionAnalysisAvailable()&&this.canViewQuestionAnalysis()||this.canDelete()},t.prototype.isAssessment=function(){return a.B.Test.isEqualTo(this.data.scoreProviderHandle)},t.prototype.canView=function(){return!this.data.scoreProviderHandle||(this.isAssessment()?this.canViewAssessment:this.canViewContentDesigner)},t.prototype.canEdit=function(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canModifyAssessment:this.canModifyContent:this.gradebookPermissionService.canModify())},t.prototype.canDelete=function(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canDeleteAssessment:this.canDeleteContent:this.gradebookPermissionService.canModify())},t.prototype.deleteColumn=function(){throw new Error("Unsupported operation exception")},t.prototype.deleteColumnFromGridData=function(){this.gridData.deleteColumn(this)},t.prototype.getConfirmationMessage=function(){throw new Error("Unsupported operation exception")},t.prototype.viewOrEdit=function(){if(a.B.PartnerCloud.isEqualTo(this.data.scoreProviderHandle))this.ltiService.ltiLaunch({courseId:this.data.courseId,contentId:this.data.contentId,linkType:a.g.PartnerCloud,linkRefId:this.data.linkId});else{var e=this.data.scoreProviderHandle;e&&!this.scoreProviderHelper.supportsOverall(e)||(this.scoreProviderHelper.supportsExternalEdit(e)?this.ltiService.ltiEditColumn(this.data):this.openEditState())}},t.prototype.canViewQuestionAnalysis=function(){return this.gradebookPermissionService.canViewGrades()},t.prototype.openQuestionAnalysisOverview=function(){throw new Error("Unsupported operation exception")},t.prototype.hasDownloads=function(){return a.B.Test.isEqualTo(this.data.scoreProviderHandle)},t.prototype.canDownloadAll=function(){return!1},t.prototype.openDownloadAll=function(){this.ultraState.goPeekState("grades-bulk-download",{columnId:this.id})},t.prototype.previewScorm=function(){this.isScorm()&&this.scormService.scormLaunch({courseId:this.data.courseId,contentId:this.data.contentId,showPreLaunchPanel:!1})},t.prototype.openEditState=function(){throw new Error("Unsupported operation exception")},t.prototype.postGrades=function(){var e=this;this.data.postReadyGrades().then((function(){return e.toast.show({messageKey:"components.directives.grade.grid.gradesPosted",icon:"icon-check",toastStatus:"success"}),e.data.anonymousGrading?e.data.$fetch().$asPromise().then((function(){return e.data.summary.$fetch().$asPromise()})):e.data.summary.$fetch().$asPromise()})).then((function(){e.gridData.updateColumnByMetadata(e.data)&&e.rootScope.$broadcast(b.b.COLUMN)}))},t.prototype.isShowSummary=function(){return!0},t.prototype.isScorm=function(){return this.data&&this.data.isScorm()},t.prototype.onClick=function(){},t.prototype.triggerDelete=function(t){t.target===t.currentTarget&&(e(t.target).find("a").click(),t.preventDefault(),t.stopPropagation())},t.prototype.getMetadata=function(){return this.data},t.prototype.filterByColumId=function(e){return e.indexOf(this.id)>-1},t.prototype.filterByCategoryId=function(e){return!!this.data.gradebookCategory&&e.indexOf(this.data.gradebookCategoryId)>-1},t}(),v=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){return e.call(this,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b)||this}return Object(i.__extends)(t,e),t.prototype.addBorder=function(){this.border=!0},t.prototype.deleteBorder=function(){this.border=!1},t.prototype.filterByColumId=function(e){return!0},t.prototype.filterByCategoryId=function(e){return!0},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,g.d],t}(f),y=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b,f){var v=e.call(this,t,n,i,o,s,a,r,c,l,d,u,p,m,g,b,f)||this;return v.notationService=h,v.gradeNotations=[],v.loadNotation(),v}return Object(i.__extends)(t,e),t.prototype.loadNotation=function(){var e=this;this.notationService.getGradeNotationsMap(this.gridData.course.id,!0).then((function(t){e.gradeNotations=t}))},t.prototype.openEditState=function(){this.ultraState.goPeekState("gradebook-item.overall-grade",{columnId:this.id,gradeitemView:"details"})},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.prototype.getConfirmationMessage=function(){return"x-bb-grade-calculation"},t.prototype.filterByColumId=function(e){return!0},t.prototype.filterByCategoryId=function(e){return!0},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,p.b,m.c,h.b,g.d],t}(f),w=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){return e.call(this,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b)||this}return Object(i.__extends)(t,e),t.prototype.refreshAffectedColumns=function(){var e=this;this.findAffectedColumns().forEach((function(t){return e.gridData.updateColumnByMetadata(t.data)}))},t.prototype.findAffectedColumns=function(e){var n=this;void 0===e&&(e=[]);var i=o.differenceBy(this.gridData.getColumns().filter((function(e){return e instanceof t&&e.isAffected(n)})),e,"id"),s=o.unionBy([],i,"id");return e=o.unionBy(i,e,"id"),i.forEach((function(t){s=o.unionBy(s,t.findAffectedColumns(e),"id")})),s},t}(f),C=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){return e.call(this,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b)||this}return Object(i.__extends)(t,e),t.prototype.isAffected=function(e){var t=this.data.calculatedFormula&&this.data.calculatedFormula.aliases;return!o.isUndefined(t)&&(!o.isUndefined(o.findKey(t,(function(t){return t===e.id})))||!o.isUndefined(o.findKey(t,(function(t){return e.data.gradebookCategory&&t===e.data.gradebookCategory.id}))))},t.prototype.openEditState=function(){this.ultraState.goPeekState("gradebook-item.calculation",{columnId:this.id,gradeitemView:"details"})},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.prototype.getConfirmationMessage=function(){return"x-bb-grade-calculation"},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,g.d],t}(w),S=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){var f=e.call(this,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b)||this;return f._affectedColumnsBeforeEdit=[],f}return Object(i.__extends)(t,e),t.prototype.getConfirmationMessage=function(){return"x-bb-grade-column"},t.prototype.stashAffectedColumnsBeforeEdit=function(){this._affectedColumnsBeforeEdit=this.findAffectedColumns()},Object.defineProperty(t.prototype,"affectedColumnsBeforeEdit",{get:function(){return this._affectedColumnsBeforeEdit},enumerable:!0,configurable:!0}),t.prototype.isAffected=function(e){return!1},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,g.d],t}(w),k=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){return e.call(this,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b)||this}return Object(i.__extends)(t,e),t.prototype.openEditState=function(){this.stashAffectedColumnsBeforeEdit(),this.ultraState.goPeekState("grade-item.edit",{id:this.id})},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,g.d],t}(S),I=function(e){function t(t,n,i,o,a,r,c,l,d,u,p,m,h,g,b,f){var v=e.call(this,t,n,i,o,a,r,c,l,d,u,p,m,h,g,b,f)||this;return v.checkIfAttendanceRecordsExist(),s.b.OnRootScope(t,"$stateChangeSuccess",(function(e,t,n,i){i.name.indexOf("attendance")>=0&&v.checkIfAttendanceRecordsExist()})),v}return Object(i.__extends)(t,e),t.prototype.canDelete=function(){return e.prototype.canDelete.call(this)&&this.showAttendanceDeleteOption},Object.defineProperty(t.prototype,"canBePost",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.openEditState=function(){this.stashAffectedColumnsBeforeEdit();var e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,m.a.GoToState)},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.prototype.checkIfAttendanceIsAvailable=function(){if(this.gridData.course.tools){var e=this.gridData.course.tools.getToolById("bb-attendance");if(e&&e.toolEnabledSetting.isAvailable)return!0}return!1},t.prototype.checkIfAttendanceRecordsExist=function(){var e=this;this.showAttendanceDeleteOption=!1,this.checkIfAttendanceIsAvailable()&&this.gridData.course.attendanceRecordsExist().then((function(t){e.showAttendanceDeleteOption=!t}))},t}(S),D=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){return e.call(this,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b)||this}return Object(i.__extends)(t,e),t.prototype.canDownloadAll=function(){return(!this.data||!this.data.anonymousGrading)&&this.gradebookPermissionService.canViewBulkDownload()},t.prototype.openEditState=function(){this.stashAffectedColumnsBeforeEdit();var e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,m.a.GoToState)},t.prototype.deleteColumn=function(){this.rootScope.$broadcast("bb-delete-column",this.data)},t.prototype.openQuestionAnalysisOverview=function(){this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.data.contentId})},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,g.d],t}(S),E=function(e){function t(t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b,f){var v=e.call(this,t,i,o,s,a,r,c,l,d,u,p,m,h,g,b,f)||this;return v.groups=n,v._userIdGroupIdMap={},v.initializeUserIdGroupIdMap(),v}return Object(i.__extends)(t,e),t.prototype.initializeUserIdGroupIdMap=function(){var e=this,t=this.gridData.getColumnIdGroupsMap()[this.id];o.isEmpty(t)||t.forEach((function(t){var n=e.gridData.getGroupIdUserIdMap()[t.groupId];o.isEmpty(n)||n.forEach((function(n){e._userIdGroupIdMap[n]=t.groupId}))}))},t.prototype.canDownloadAll=function(){return!1},Object.defineProperty(t.prototype,"userIdGroupIdMap",{get:function(){return this._userIdGroupIdMap},enumerable:!0,configurable:!0}),t.prototype.getGroupById=function(e){return o.find(this.groups,(function(t){return t.groupId===e}))},t.$inject=["$rootScope","groups","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,g.d],t}(D),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(E),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(E),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(D)}).call(this,n("5iHu"))},ck5r:function(e,t){e.exports='<bb-modal class="notification"\n          modal-aria-type="alertdialog"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.directives.grade.gradingBar.modal.deletePeerSubmissionWarning">\n  <div name="modal-contents">\n    <p bb-translate>{{::descriptionKey}}</p>\n    <ul class="modal-row">\n      <li ng-repeat="grader in graders" class="item">\n        <bb-username user="grader" format="long" auto-update="true"></bb-username>\n      </li>\n    </ul>\n  </div>\n  <button name="modal-footer-button-secondary"\n          ng-click="$parent.$dismiss()"\n          class="button button--secondary js-secondary-button"\n          bb-translate\n          analytics-id="components.directives.grade.gradingBar.modal.cancel">components.directives.grade.grading-bar.modal.cancel</button>\n  <button name="modal-footer-button-primary"\n          ng-click="deleteOnClick($parent.$close())"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.directives.grade.gradingBar.modal.continue">components.directives.grade.grading-bar.modal.continue</button>\n</bb-modal>\n\n'},cpZm:function(e,t,n){"use strict";var i=n("D57K"),o=n("wHJ2"),s=n("ERkP"),a=n("8unJ"),r=n("1ZbL"),c=n("tN4z"),l=n("TUnR"),d=n("MC1S"),u=n("uDfI"),p=n("JfV0"),m="ultra.components.services.gradebookListViewTabs",h=function(e){var t=e.onChange,n=e.value,o=e.tabs,a=e.localize,r=e.analyticsId,m=e.ftue,h=s.useState(),g=h[0],b=h[1],f=Object(u.useDispatch)(),v=Object(l.useShowGuidance)(null==m?void 0:m.componentKey)[0];return s.createElement("div",{className:"gradebook-list-view-tabs"},s.createElement(c.AnalyticsJssThemeProvider,null,s.createElement(c.AnalyticsTabs,{onChange:t,value:n,analyticsId:r+".gradebook.listViewTabs"},o&&o.map((function(e){var t={analyticsId:r+".gradebook.listViewTab."+e.id,className:"js-gradebook-tab-"+e.id,key:e.id,value:e.id,label:a.translate(e.displayKey)};return e.id===(null==m?void 0:m.targetId)&&(t.innerRef=b),s.createElement(c.AnalyticsTab,Object(i.__assign)({},t))}))),v&&g&&s.createElement(l.GuidanceTeachingBubble,{componentKey:m.componentKey,onDismiss:function(){f(p.actions.userPreference.persistUserPreference({key:m.componentKey,value:"1"}))},targetElement:g,headline:a.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceHeader"),calloutProps:{directionalHint:d.DirectionalHint.bottomAutoEdge},analyticsId:r+".ftue"},a.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceBody"),s.createElement(c.AnalyticsPrimaryButton,{analyticsId:r+".gradebook.PrimaryButton",className:"ftue-action",onClick:function(){f(p.actions.userPreference.persistUserPreference({key:m.componentKey,value:"1"})),m.action()}},a.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceTry")))))},g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return s.createElement(h,Object(i.__assign)({},this.props))},t}(s.Component),b={Class:Object(a.localizedComponentWrapper)(g),attributes:["analyticsId"],bindingNames:["value","onChange","tabs","ftue"],renderLocalized:!0,withProvider:!0};o.module(m,[]).component("bbUiGradebookListViewTabs",Object(r.a)(b));n("+Zd/");var f=n("aHpC");n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w}));var v="ultra.components.directives.gradebookListViewTabs",y={id:"assignments",ariaLabel:"components.directives.grade.course-grades-grader.views.gradableItemsListView",displayKey:"components.directives.grade.course-grades-grader.views.gradableItemsListViewTabLabel"},w={id:"students",ariaLabel:"components.directives.grade.course-grades-grader.views.studentListView",displayKey:"components.directives.grade.course-grades-grader.views.studentListViewTabLabel"},C=[y,w],S="students",k="ftue.grades.grader.studentlistview",I='<bb-ui-gradebook-list-view-tabs\n                            value="gradebookListViewTabs.scope.selectedTab"\n                            on-change="gradebookListViewTabs.onTabChange"\n                            tabs="gradebookListViewTabs.tabs"\n                            ftue="gradebookListViewTabs.ftue">\n                      </bb-ui-gradebook-list-view-tabs>',D=function(){function e(e){var t=this;this.scope=e,this.onTabChange=function(e,n){var i=t.tabs.find((function(e){return e.id===n}));t.scope.onTabChanged&&t.scope.onTabChanged(i.id),t.scope.$apply()},this.tabs=C,this.ftue={componentKey:k,targetId:S,action:function(){t.scope.onTabChanged(S)}}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(f.b)("scope"))],e)}(),E=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=I,this.scope={onTabChanged:"<?",selectedTab:"="},this.link=function(e){e.gradebookListViewTabs=t.$injector.instantiate(D,{scope:e})}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(f.b)("$injector"))],e)}();angular.module(v,[m]).directive("bbGradebookListViewTabs",["$injector",function(e){return e.instantiate(E)}])},dCrD:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("D57K"),o=n("nbDY"),s=n.n(o),a=n("Oyr+"),r=n("0JpG"),c=n("RPq7"),l=n("Qbdf"),d=n("nYZ0"),u=n("Vsv2"),p=n("A+IJ"),m=n("+4Px"),h=n("pjml"),g=n("3Jgm"),b=n("e6jQ"),f=n("lEL+"),v=n("TnpK"),y=n("PoQW"),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Unzip=new t("Unzip"),t.Website=new t("Website"),t.Default=new t("Default"),t}(s.a),C=function(){function e(e,t,n){var i=this;this.scope=t,this.element=n,this.alwaysShow=!1,this.isButtonVisible=!1,this.isMobile=!1,this.isUploadMultipleFiles=!1,this.removeDefaultRenderClass=!1,this.uuid=Object(b.b)(),this.downloadFile=function(e){i.scope.$broadcast("downloadFile",e,i.positionForFiles)},this.defaultAttachHandler=function(e,t,n,o,s){var a=o||i.$q.defer(),r={parentId:void 0,positionBefore:"start",positionAfter:void 0,depth:0};return i.isUploadMultipleFiles=n,i.insertLocation=s||i.getInsertLocationData(),r=t.ui&&t.ui.parentId?{parentId:t.ui.parentId,positionBefore:t.ui.positionBefore,positionAfter:t.ui.positionAfter,depth:t.ui.depth}:i.insertLocation,"folder"===t.type?(i.closeMenu(),!t.ui||t.ui.depth<=p.l?i._addFolderToCourseOutline(t,r).then((function(e){t.ui={parentId:e.id,positionBefore:"start",depth:1+Number(e.depth)},a.resolve(t)}),(function(e){a.reject(e)})):a.resolve()):i._addContentToCourseOutline(t,e,r).then((function(e){var n=null==s?void 0:s.positionAfter;i.scope.$root.$broadcast("uploadComplete",t,n),e.$save().$then((function(n){t.ui&&t.ui.needUnzip&&(e=n),a.resolve()}))})),a.promise},this.toggleAddContentMenu=function(){i.isEmptyFolder()?i.scope.$emit("toggle-folder-by-id",i.scope.content.id):i.isMenuVisible=!i.isMenuVisible,i.timeout((function(){i.scope.$apply()}),i.scope)},this.hideAddContentMenu=function(e){null===e.target.closest("#"+i.getButtonWrapperId())&&(i.isMenuVisible=!1,i.timeout((function(){i.scope.$apply()}),i.scope))},this.$q=e.get("$q"),this.$rootScope=e.get("$rootScope"),this.bbLocalize=e.get(r.serviceName),this.cloudDriveService=e.get(u.c),this.timeout=e.get(f.b),this.contentSvc=e.get(d.f),this.CourseModel=e.get(h.o.serviceName),this.PartnerService=e.get(g.b),this.ultraState=e.get(v.d),this.contextCourse=e.get(l.e),this.scope.addMenuId=b.a(),this.showMenuOverride=this.scope.showMenuOverride,this.alwaysShow=this.scope.alwaysShow,this.currentCourse=this.contextCourse.course,this.isMobile=!this.cloudDriveService.isShowOneDrive,this.isCloudServiceAvailablePromise=this.cloudDriveService.isCloudServiceAvailable(u.a.KLOUDLESS).then((function(e){return i.isCloudServiceAvailable=e})),this.bbLocalize.loadBundle("components/directives/add-content-button").then((function(){var e="content";i.scope.itemIndex&&null!=i.scope.itemIndex()?e="item-index":"grades"===i.scope.contextArea?e="grades":"course-group"===i.scope.contextArea?e="group":"bbml-editor-single-file"===i.scope.contextArea&&(i.scope.addContentButton.isMenuVisible=!0),i.isMenuVisible=!1,i.addButtonAriaLabel=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label"});var t="components.directives.add-content-button.aria-label.content."+(i.isMobile?"yourDevice":"yourComputer");if(i.uploadAriaLabel=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:t}),i.scope.itemName||i.scope.itemType){i.scope.$watchGroup(["itemName()","itemType()","itemIndex()"],(function(t){var n=t[0],o=t[1],s=t[2];if(n||o){var a=o?o+"-":"",r=i.scope.positionAfter?"after":"before";i.addButtonAriaLabel=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label-item-name-"+a+r,params:{itemName:n,itemIndex:s},noWrap:!0,noEscape:!0})}}))}})),n.mouseover((function(){i.$rootScope.$broadcast("mouseover-add-content-button"),i.scope.$apply((function(){i.scope.addContentButton.showButton()}))})),this.scope.$on("close-all-add-menus",(function(){i.showMenuOverride?i.isEmptyFolder()&&i.scope.content.ui.isOpen&&(i.scope.addContentButton.isMenuVisible=!0):i.scope.addContentButton.isMenuVisible=!1})),this.scope.showBothButtons&&this.scope.showBothButtons()||this.scope.$on("mouseover-add-content-button",(function(){i.scope.addContentButton.hideButton()})),this.scope.$on("content-item-hover",(function(e,t){i.scope.addContentButton.hideButton();var o=function(){var e;return(e=n.closest(".folder-contents").find("bb-add-content-button").first().is(n)?n.closest(".folder-contents").find(".js-content-div .element-list-row").first():n.closest(".js-content-div").next(".js-content-div").find(".element-list-row").first()).hasClass("element-list-row")||(e=n.next().find(".js-content-div").first().find(".element-list-row")),!!e.is(t.element)&&i.scope.addContentButton.showButton()},s=function(){var e=!1;n.closest(".js-content-div").find(".element-list-row").first().is(t.element)&&(e=!0),n.closest(".folder").is(t.element.parent(".folder"))&&(e=!1),t.element.hasClass("js-parent")&&t.element.hasClass("open")&&(e=!1),i.scope.addContentButton.isButtonVisible!==e&&(i.scope.addContentButton.isButtonVisible=e)};i.scope.showBothButtons&&i.scope.showBothButtons()?o()||s():t.relativeMousePosition.isEqualTo(c.a.Top)?o():s()})),this.scope.$on("content-outline-hover-end",(function(){i.scope.addContentButton.hideButton()})),this.scope.$watch("alwaysShow",(function(e){i.alwaysShow=e})),n.on("drop",(function(e){i.closeMenu(),i.scope.$emit(a.e,i.scope.parentId(),i.scope.positionBefore&&i.scope.positionBefore(),i.scope.positionAfter&&i.scope.positionAfter(),i.scope.depth(),void 0,i.scope.content,a.c.AssignDropTarget)})),this.scope.$on("$stateChangeStart",(function(){i.ultraState.includes("**.content-manage.import.**")?i.isMenuVisible=i.isEmptyFolder():i.isEmptyFolder()?i.isMenuVisible=!0:i.isMenuVisible=!1,i.timeout((function(){i.scope.$apply()}),i.scope)})),this.scope.$on(a.b,(function(){i.closeMenu()})),this.isMenuVisible=this.scope.showMenuOverride,null!=this.scope.showMenuOverride&&this.scope.$watch((function(){return i.scope.showMenuOverride}),(function(e){i.scope.addContentButton.isMenuVisible=e,i.showMenuOverride=e})),this.getInsertLocationData()}return e.prototype.onKeydown=function(e){e.keyCode===m.g&&this.isMenuVisible&&(this.closeMenu(),this.element.find("a.js-show-add-options").focus(),e.stopPropagation(),e.preventDefault())},e.prototype.showButton=function(){this.isButtonVisible=!0},e.prototype.hideButton=function(){this.isButtonVisible=!1},e.prototype.turnOffAlwaysShow=function(){this.alwaysShow=!1},e.prototype.toggleMenu=function(){var e=this;if(this.showMenuOverride)this.showMenuOverride&&this.isEmptyFolder()&&this.scope.$emit("toggle-folder-by-id",this.scope.content.id);else{var t=this.isMenuVisible;t||this.$rootScope.$broadcast("close-all-add-menus"),this.isMenuVisible||this.timeout((function(){e.element.scrollintoview({duration:250})}),this.scope,0,!1),this.isMenuVisible=!t}},e.prototype.isForceShowAddButton=function(){return this.scope.forceShowAddButton},e.prototype.closeMenu=function(){this.isMenuVisible&&this.toggleMenu()},e.prototype.getInsertLocationData=function(){return this.insertLocation={parentId:this.scope.parentId(),positionBefore:this.scope.positionBefore&&this.scope.positionBefore(),positionAfter:this.scope.positionAfter&&this.scope.positionAfter(),depth:this.scope.depth(),contentId:"create"}},e.prototype.assignPosition=function(){this.closeMenu(),this.scope.$emit("bb-bbml-editor-assign-position",this.getInsertLocationData())},e.prototype._addFolderToCourseOutline=function(e,t){var n=this;return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,t.parentId,t.positionBefore,t.positionAfter,!0).then((function(i){var o=i.content;return o.parentId=t.parentId,o.positionBefore=t.positionBefore,o.positionAfter=t.positionAfter,o.isAvailable=!1,o.depth=t.depth,o.description="",o.title=e.name,o.contentDetail={"resource/x-bb-folder":{isFolder:!0}},o.courseId=n.contextCourse.courseId,o.contentHandler=h.r.ContentHandler.Folder,o.$save().$asPromise()}))},e.prototype._addContentToCourseOutline=function(e,t,n){var i=this;return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,n.parentId,n.positionBefore,n.positionAfter,!0).then((function(e){return e.content})).then((function(o){return o.parentId=n.parentId,o.positionBefore=n.positionBefore,o.positionAfter=n.positionAfter,o.isAvailable=!1,o.depth=n.depth,o.description="",o.title=t.fileName,o.contentHandler=h.r.ContentHandler.File,o.contentDetail={"resource/x-bb-file":{file:{fileName:t.fileName,fileLocation:t.fileLocation}}},e.ui&&e.ui.needUnzip&&(o.contentDetail["resource/x-bb-file"].action=w.Unzip.toString()),o.courseId=i.contextCourse.courseId,o.$asPromise()}))},e.prototype.getTargetId=function(){return"addContentButton-"+this.uuid},e.prototype.getButtonWrapperId=function(){return"addContentButtonWrapper-"+this.uuid},e.prototype.getDirectionalHint=function(){return y.DirectionalHint.bottomCenter},e.prototype.isEmptyFolder=function(){var e=this.scope,t=e.content,n=e.folderNestedButton;return!!(t&&t.isFolder()&&t.children&&0===t.children.length&&n&&n())},e}()},dF44:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c}));var i="rb_grid_",o={CELL_FOCUSED:i+"cell_focused",COLUMN:i+"column",DATA_UPDATE:i+"data_update",ENTER_CELL:i+"enter_cell",ENTER_NEXT_CELL:i+"enter_next_cell",FOCUS_CELL:i+"focus_cell",LEAVE_CELL:i+"leave_cell",LEAVE_GRID:i+"leave_grid",ROW:i+"row",SCROLL_H:i+"scroll_h",SCROLL_V:i+"scroll_v"},s=2,a=2,r=50,c=50},dJ97:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n("D57K"),o=(n("pGPW"),n("w0/N"),n("wHJ2")),s=n("nbDY"),a=n.n(s),r=n("Fvsw"),c=n("yMoE"),l=n("X/qj"),d=n("oi1r"),u=n("o5Lu"),p=n("0JpG"),m=n("pjml"),h=n("fYJU"),g=n("O3Pz"),b=n("cH+F"),f=n("6TNA"),v=n("S6sW"),y=n("pHHL"),w="ultra.grade.display",C=function(e){function t(t,n){var i=e.call(this,t)||this;return i.template=n,i}return Object(i.__extends)(t,e),t.prototype.getTemplateHtml=function(){return this.template.template},t.AttemptStatus=new t("AttemptStatus",{template:g}),t.FinalBase=new t("FinalBase",{template:b}),t.Column=new t("Column",{template:f}),t.Course=new t("Course",{template:v}),t.GradeColor=new t("GradeColor",{template:y}),t}(a.a),S=function(){function e(t,n,i,s,a,r,l,d,u,p){var m=this;this.scope=t,this.attrs=n,this.$q=i,this.$injector=s,this.gradebookPermissionService=r,this.localize=l,this.context=d,this.schemaService=u,this.contextUser=p,this.fullDisplayGrade=e.NO_GRADE_DISPLAY,this.bundlePromise=l.loadBundle("components/directives/grade/display-grade"),this.courseColorClass=t.courseColorClass,this.cursorPointer=t.cursorPointer&&t.cursorPointer(),this.cursorDefault=t.cursorDefault&&t.cursorDefault(),this.isStudent=p.userModel.isStudent(),this.isStudent||r.canViewGrades(this.scope.course&&this.scope.course().id)?(this.scope.$watch("::column",(function(e){if(e){var t=function(e){var t,n=m.scope.$watch("gradeDetail",(function(i){i&&(m.schemaGrade=a.getGradeToDisplay(i.displayGrade,m.scope,m.schema.scaleType),m.setFullDisplayGrade(),(C.GradeColor.isEqualTo(m.scope.gradeType)||C.FinalBase.isEqualTo(m.scope.gradeType))&&(m.gradeDisplayItem=s.instantiate(c.a,{gradeDetail:i,scope:m.scope}),m.scope.$watch("::column",(function(t){t&&m.gradeDisplayItem.init(t,e).then((function(){m.gradeDisplayItem.displayGrade=m.scope.showNotGraded&&m.scope.showNotGraded()?null:i.displayGrade,m.gradeDisplayItem.displayValue&&(m.colorClass=m.gradeDisplayItem.getGradeColor())}))}))),n(),t())}));t=m.scope.$watch("summary",(function(e){m.colorClass="na",e&&(m.schemaGrade=e.averageGradeForStudentsSchemaValue,m.setFullDisplayGrade(),C.FinalBase.isEqualTo(m.scope.gradeType)&&!o.isUndefined(e.averageGradeForStudents)&&(m.colorClass=a.getPercentileColor(e.averageGradeForStudents)),n())}),!0)};m.scope.schema?(m.schema=m.scope.schema,t(m.scope.schema)):u.loadGradeSchema(e).then((function(e){m.schema=e,t()}))}})),C.AttemptStatus.isEqualTo(this.scope.displayType)&&(this.courseColorClass="na",this.attempt?this.attempt.isNeedsGrading()?this.attemptStatus="components.directives.grade.display-grade.pending-grade":this.attempt.isInProgress()&&(this.attemptStatus="components.directives.grade.display-grade.NA"):this.attemptStatus="components.directives.grade.display-grade.NA")):(this.fullDisplayGrade=this.attemptStatus=e.NO_GRADE_DISPLAY,this.colorClass="na")}return e.prototype.setFullDisplayGrade=function(){var t,n=this;if(this.schema&&this.schema.scaleType&&(m.I.ScaleType.Tabular.isEqualTo(this.schema.scaleType)||m.I.ScaleType.Text.isEqualTo(this.schema.scaleType)||m.I.ScaleType.Complete.isEqualTo(this.schema.scaleType)))this.fullDisplayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.schemaGrade||e.NO_GRADE_DISPLAY;else if(t=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.getSchemaGrade(),this.shouldShowPointsPossible()){var i="components.directives.grade.display-grade.";i+=C.Course.isEqualTo(this.scope.gradeType)?"course-score":"score",this.bundlePromise.then((function(){n.fullDisplayGrade=n.localize.translateSync({locale:n.localize.getLocale(n.scope),key:i,params:{grade:t,possible:n.scope.gradeDetail&&n.scope.gradeDetail.pointsPossible||n.scope.column.possible},noWrap:!0})}))}else this.schema&&m.I.ScaleType.Percent.isEqualTo(this.schema.scaleType)&&t!==e.NO_GRADE_DISPLAY?this.bundlePromise.then((function(){n.fullDisplayGrade=n.localize.translateSync({locale:n.localize.getLocale(n.scope),key:"components.directives.grade.display-grade.percent",params:{grade:t},noWrap:!0})})):this.fullDisplayGrade=t},Object.defineProperty(e.prototype,"attempt",{get:function(){return this.scope.attempt&&this.scope.attempt()||this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)},enumerable:!0,configurable:!0}),e.prototype.getSchemaGrade=function(){var t;try{var n=this.schemaGrade.replace(/[^0-9.,]/g,"");t=this.localize.parseNumberSync(n)}catch(e){t=null}return null!=t&&this.localize.formatNumberSync(t,this.scope,{maximumFractionDigits:u.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})||e.NO_GRADE_DISPLAY},e.prototype.shouldShowPointsPossible=function(){return this.schema&&this.schema.scaleType&&m.I.ScaleType.Score.isEqualTo(this.schema.scaleType)&&(m.F.CalculationType.NonCalculated.isEqualTo(this.scope.column.calculationType)||this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible>0)},e.prototype.getCourseColorClass=function(){return this.courseColorClass},e.prototype.noGradeToDisplay=function(){return this.fullDisplayGrade===e.NO_GRADE_DISPLAY},e.prototype.getNoGradeDisplay=function(){return e.NO_GRADE_DISPLAY},e.prototype.shouldShowRubricButton=function(){return this.scope.showRubricButton&&this.scope.showRubricButton()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricDiv=function(){return this.scope.showRubricDiv&&this.scope.showRubricDiv()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricEvaluation=function(){return this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()&&null!=this.attempt&&this.attempt.isCompleted()&&!this.scope.gradeDetail.isOverrideGrade()},e.NO_GRADE_DISPLAY="--",e.$inject=["scope","attrs","$q","$injector",u.h,l.b,p.serviceName,r.b,d.b,h.b],e}(),k=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="E",this.scope={attempt:"&?",gradeDetail:"=",summary:"=",column:"=",schema:"=?",displayType:"@",finalGrade:"&?",translateKey:"@",courseColorClass:"=",isGroupGradeMultiple:"&?",showNotGraded:"&?",overallGradePeekSref:"@?",showRubricButton:"&?",showRubricDiv:"&?",cursorPointer:"&?",cursorDefault:"&?",course:"&?"},this.link=function(e,t,i){e.displayGrade=n.$injector.instantiate(S,{scope:e,attrs:i}),e.gradeType=C.parse(e.displayType)||C.Column,t.append(n.$compile(e.gradeType.getTemplateHtml())(e))}}return e.$inject=["$injector","$compile"],e}();o.module(w,[u.g,l.a]).directive("bbDisplayGrade",["$injector",function(e){return e.instantiate(k)}])},"dL5/":function(e,t){e.exports='<span class="group-count-directive" bb-load-bundle="components/directives/group/group-count">\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="!$ctrl.isSelfEnrollment()">components.directives.group-count.groups.plural</bb-translate>\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="$ctrl.isSelfEnrollment()">components.directives.group-count.groups.selfEnroll.plural</bb-translate>\n</span>\n'},dd1C:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n("zAxy"),n("10QP");var i=n("wHJ2"),o=n("0JpG"),s=n("e6jQ"),a=n("GbAM"),r=n("3mUc"),c="ultra.components.directives.grade.inlineValidation",l=function(){function t(t,n,i,o,a){var r=this;this.scope=t,this.element=n,this.attrs=i,this.$compile=o,this.bbLocalize=a,this.scope.$on("$destroy",(function(){r.element.off(),r.element=null,e("#"+r.scope.tooltipId).remove()}));var c=s.a();t.tooltipId="inline-validation-tooltip-"+c,t.alertTextId="inline-validation-alert-text-"+c,this.updateErrorMessage(),this.scope.focusableElement=this.element.find(":tabbable, input:enabled"),this.setupEventHandlers(),t.$watch((function(){return r.scope.focusableElement.val()}),(function(e){null!=e&&r.checkErrors()})),t.$watch((function(){return r.scope.showError()}),(function(e){r.checkErrors()})),t.$watch("errorMessage",(function(e){return r.updateErrorMessage()}))}return t.prototype.tooltipExists=function(){return 0!==e("#"+this.scope.tooltipId).length},t.prototype.updateErrorMessage=function(){var e=this;this.scope.errorMessage?this.scope.errorMessageRefined=this.scope.errorMessage:this.bbLocalize.loadBundle("components/directives/grade/inline-validation").then((function(){e.scope.errorMessageRefined=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.inline-validation.default"})}))},t.prototype.checkErrors=function(){this.scope.showError()?this.showErrorTip():this.hideErrorTip()},t.prototype.setupEventHandlers=function(){var e=this;this.scope.focusableElement.on("focus",(function(){e.checkErrors()})).on("blur",(function(){e.hideErrorTip()})),this.scope.$on("bb-inline-validation-check",(function(){e.checkErrors()}))},t.prototype.showErrorTip=function(){if(this.scope.focusableElement[0]===document.activeElement){this.tooltipExists()||e("body").append(this.$compile('\n          <div id="'+this.scope.tooltipId+'"\n            class="tooltip inline-validation f-dropdown content inline-validation-tooltip">\n            <span class="validation-message" ng-bind="errorMessageRefined" aria-role="text"></span>\n            <span class="nub"></span>\n          </div>\n        ')(this.scope));var t=this.element.children().first(),n=e("#"+this.scope.tooltipId);window.Foundation.libs.tooltip.reposition(t,n,t.attr("class")),n.show(),this.scope.$root.$broadcast(a.a,this.scope.errorMessageRefined)}},t.prototype.hideErrorTip=function(){e("#"+this.scope.tooltipId).hide()},t.$inject=["scope","element","attrs","$compile",o.serviceName],t}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.transclude=!0,this.template=r,this.scope={showError:"&",errorMessage:"@"},this.link=function(e,n,i,o){e.inlineValidation=t.$injector.instantiate(l,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[o.moduleName]).directive("bbInlineValidation",["$injector",function(e){return e.instantiate(d)}])}).call(this,n("5iHu"))},dkOF:function(e,t,n){},e0uO:function(e,t,n){"use strict";var i=n("D57K"),o=n("nbDY"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.QuestionReview=new t("QuestionReview"),t.AttemptAuthoring=new t("AttemptAuthoring"),t.AttemptGrading=new t("AttemptGrading"),t.AttemptReview=new t("AttemptReview"),t}(n.n(o).a);t.a=s},e7Kn:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var i=n("D57K"),o=(n("1/hr"),n("wHJ2")),s=n("lx16"),a=n("0JpG"),r=n("kC07"),c=n("RPq7"),l=n("nYZ0"),d=n("LdA1"),u=n("sLTT"),p=n("D8d/"),m=n("L+81"),h=n("lr7J"),g=n("aHpC"),b=n("pjml"),f=n("rtZE"),v=n("ZkU4"),y=n("lEL+"),w=n("gkef"),C=n("5MwF"),S=n("oQrK"),k=n("EcEN"),I=n("a8oS"),D=n("W6wm"),E="ultra.directives.contentOutline",O=function(){function t(t,n,i,o,s,a,r,c){var l=this;this.scope=t,this.element=n,this.attrs=i,this.ContentService=o,this.CourseContentModel=s,this.timeout=a,this.windowService=r,this.localizeService=c,this.cloudUploadInProgress={},this.showContentImportProgress=!1,this.LARGE_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap",this.SMALL_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap .panel-content",this.getContentTrackingId=function(e){return null!=e.id?e.id:(e.ui.tempId||(e.ui.tempId=l.getTempId()),e.ui.tempId)},this.contextArea=t.contextArea,this.addContentButtonLocation=null,this.loadMoreChildren=t.loadMoreChildren,this.parentFolder=t.parentFolder,this.onFileDropHandler=t.onFileDropHandler,this.onMoveHandler=t.onMoveHandler,this.onMoveIntoFolderHandler=t.onMoveIntoFolderHandler,this.canMove=t.canMove&&(!t.contents.permissions||t.contents.permissions.move),this.showMenuOverride=!1,null!=t.contents&&"function"==typeof t.contents.$asPromise&&t.contents.$asPromise().then((function(){l.showMenuOverride=0===t.contents.length})),this.placeholderContent=this.CourseContentModel.$buildRaw({id:this.parentFolder&&this.parentFolder.id&&this.parentFolder.id+"_placeholder",parentId:this.parentFolder&&this.parentFolder.id,contentHandler:b.r.ContentHandler.Unknown.toString(),depth:this.parentFolder&&this.parentFolder.depth&&this.parentFolder.depth+1}),t.$watch("contents.length",(function(i,o){l.showMenuOverride=0===i,l.placeholderContent.id=l.parentFolder&&l.parentFolder.id&&l.parentFolder.id+"_placeholder",l.placeholderContent.parentId=l.parentFolder&&l.parentFolder.id,l.resetMovableAddContentButton(n),i<o&&(t.$emit("content-outline-infinite-scroll-check"),e("#add-button"+l.scope.parentFolder.id).appendTo(e("#add-button-container"+l.scope.parentFolder.id)))})),t.$eval(i.showContentImportProgress)&&this.addImportPlaceholder(),t.$on("bb-drag-start",(function(){l.resetMovableAddContentButton(n)})),t.$on("keyboard-drag-start",(function(){l.resetMovableAddContentButton(n)})),t.$on("showContentImportProgress",(function(e,t,n){"-1"!==n&&l.parentFolder.id!==n||l.addImportPlaceholder()})),t.$on(v.b,(function(e,t){l.cloudUploadInProgress[t]||(l.cloudUploadInProgress[t]=!0)}))}return t.prototype.resetMovableAddContentButton=function(e){this.addContentButtonLocation=null,e.append(this.getMovableAddContentButton())},t.prototype.addImportPlaceholder=function(){var t=this;this.ContentService.getOrMakeContentInContentTree(this.parentFolder,this.parentFolder.courseId,void 0,this.parentFolder.id,"start").then((function(n){n.content.ui.importPlaceholder=!0,t.timeout((function(){e(".placeholder-container").closest(".js-content-div").scrollintoview({duration:300})}),t.scope,0,!1)}))},t.prototype.getScrollContainerSelector=function(){return this.windowService.isLargeBreakpoint()?this.LARGE_CONTAINER_SELECTOR:this.SMALL_CONTAINER_SELECTOR},t.prototype.getScrollForceShowSelector=function(){return"."+r.a},t.prototype.isAllContentsLoaded=function(){return!!(this.scope.contents&&this.scope.contents.paging&&this.scope.contents.paging.count)&&this.scope.contents.length>=this.scope.contents.paging.count},t.prototype.isAddContentButtonUnattached=function(e){return!this.addContentButtonLocation||e!==this.addContentButtonLocation.id},t.prototype.placeAddButton=function(t,n){void 0===n&&(n=!1);var i=this.parentFolder?".movable-add-content-button-folder"+this.parentFolder.id:"";if(this.isAddContentButtonUnattached(t.id)&&this.contextArea!==D.a.Discussions&&void 0!==t.id){var o=!!document.querySelector(".ms-ContextualMenu-list.is-open");!n&&o||(this.getMovableAddContentButton().appendTo(e("#add-button-placeholder"+t.id)),this.addContentButtonLocation=t,this.scope.$broadcast("change-add-content-button-position",{reopen:o}),n&&this.element.find(".movable-add-content-button.movable-add-content-button"+i+" .button-add-content.js-show-add-options").focus())}},t.prototype.getMovableAddContentButton=function(){var e=this.parentFolder?".movable-add-content-button-folder"+this.parentFolder.id:"";return this.element.find(".movable-add-content-button"+e)},t.prototype.getAddButtonLineLabel=function(e){return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.add-content-button.aria-label.content.add-button-label-item-name-after",params:{itemName:e},noWrap:!0,noEscape:!0})},t.prototype.isMobileDevice=function(){return S.a.detect().mobile()},t.prototype.shouldShowMenuOverride=function(){return this.parentFolder&&0===this.parentFolder.depth?!C.a.features.learningModule&&this.showMenuOverride:this.showMenuOverride},t.prototype.shouldShowAddButton=function(){return this.scope.isFirst||this.scope.contents&&0===this.scope.contents.length},t.prototype.hasId=function(e){return this.scope.contents.some((function(t){return t.ui.tempId===e||t.id===e}))},t.prototype.getTempId=function(){for(var e,t=!1;!t;)e=Object(k.v4)(),t=!this.hasId(e);return e},t=Object(i.__decorate)([Object(i.__param)(0,Object(g.b)("scope")),Object(i.__param)(1,Object(g.b)("element")),Object(i.__param)(2,Object(g.b)("attrs")),Object(i.__param)(3,Object(g.b)(l.f)),Object(i.__param)(4,Object(g.b)(b.r.serviceName)),Object(i.__param)(5,Object(g.b)(y.b)),Object(i.__param)(6,Object(g.b)(w.b)),Object(i.__param)(7,Object(g.b)(a.serviceName))],t)}(),T=function(){function e(e,t){var n=this;this.link=e,this.recursionHelper=t,this.replace=!0,this.restrict="E",this.scope={canCreate:"=",contents:"=",contextArea:"=",loadMoreChildren:"=",isFirst:"=",parentFolder:"=",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=?",canMove:"=",canCreateAllContents:"=?",canCopyImport:"=?",hideAddMenuOverride:"=?"},this.compile=function(e){return n.recursionHelper.compile("content-outline-directive",e,n.link)},this.template=I}return e.$inject=["link",f.b],e}();o.module(E,[s.a,r.b,u.a,d.a,c.b,l.d,p.a,m.a,h.b,f.a,w.a]).directive("bbContentOutline",["$injector",l.f,function(e,t){return e.instantiate(T,{link:function(t,n,i){t.contentOutline=e.instantiate(O,{scope:t,element:n,attrs:i})}})}])}).call(this,n("5iHu"))},eAnr:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u}));var i=n("D57K"),o=n("wHJ2"),s=n("BOxd"),a=n("g7Mf"),r=n("TnpK"),c=n("uFkY"),l="ultra.services.feedback",d="feedbackService",u="engagement-submissions-list:reload-on-feedback-save",p=function(){function e(e,t){var n=this;this.$q=e,this.$sce=t,this.emptyFeedback=function(){return n.$q.when({})},this.fetchAttemptFeedback=function(e){return e.grade.attempts.$fetch().$asPromise().then((function(t){return e.grade.attempts=t,{feedbackToUser:t[0]&&t[0].feedbackToUser,feedback:n.$sce.trustAsHtml(t[0]&&t[0].feedbackToUser?t[0].feedbackToUser.rawText:"")}}))},this.findAttemptFeedback=function(e){var t=e.attemptsReadyToPost[0];return e.grade.attempts.$find(t.id).$asPromise().then((function(e){return e.feedbackToUser?{feedbackToUser:e.feedbackToUser,feedback:e.feedbackToUser.rawText}:n.emptyFeedback()}))},this.resolveGradeFeedback=function(e){return n.$q.when({feedbackToUser:e.grade.instructorFeedback,feedback:n.$sce.trustAsHtml(e.grade.instructorFeedback.rawText)})}}return e.$inject=["$q","$sce"],e}(),m=function(){function e(e,t,n,i,o){var a=this;this.$injector=e,this.$q=t,this.$rootScope=n,this.discussionService=i,this.ultraStateService=o,this.loadFeedbackFromRow=function(e){return e&&e.grade?a.hasGradeFeedback(e)?a.loadHelper.resolveGradeFeedback(e):a.needsGrading(e)&&a.hasAttemptReadyToPost(e)?a.loadHelper.findAttemptFeedback(e):a.loadHelper.fetchAttemptFeedback(e):a.loadHelper.emptyFeedback()},this.needsGrading=function(e){return e.grade&&s.a.NeedsGrading.isEqualTo(e.grade.status)},this.hasAttemptReadyToPost=function(e){return e.attemptsReadyToPost&&e.attemptsReadyToPost[0]},this.hasGradeFeedback=function(e){return e.grade&&e.grade.instructorFeedback},this.refreshDiscussionPanel=function(){a.$rootScope.$broadcast("reload-discussion-panel")},this.refreshAfterEngagementFeedbackSave=function(e){a.$rootScope.$broadcast(u,e)},this.refreshAfterAssessmentAttemptFeedbackSave=function(e,t){return Object(c.b)(a.$rootScope,e,t)},this.refreshAfterIndividualfeedbackSave=function(e){return Object(c.c)(a.$rootScope,e)},this.refreshGradeGridView=function(e,t){a.$rootScope.$broadcast(c.a,a.getCurrentColumn().id,t,null,e)},this.getCurrentColumn=function(){return a.discussionService.column},this.getOrCreateGrade=function(e){var t=a.getCurrentColumn().grades,n=t.find((function(t){return t.user.$pk===e.user.id}));return n?a.$q.when(n):t.$new().withParams({userId:e.user.id}).$save().$asPromise()},this.loadHelper=e.instantiate(p)}return e.$inject=["$injector","$q","$rootScope",a.c,r.d],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(m);o.module(l,[]).service(d,m)},eWdw:function(e,t,n){},fGDP:function(e,t,n){"use strict";var i=n("D57K"),o=(n("HwkA"),n("CG4K"),n("8wib"),n("6ZXc"),n("3Lzw"),n("5m/6"),n("nsO7")),s=n("wHJ2"),a=n("en1n"),r=n("5MwF"),c=(n("s4xR"),n("lx16")),l=n("RPq7"),d=n("D8d/"),u=n("pKNj"),p=n("X/qj"),m=n("o5Lu"),h=n("P2dS"),g=n("ujI6"),b=n("0JpG"),f=n("lEL+"),v=n("Efpj"),y="ultra.components.directives.grade.courseGradesGraderList",w=function(){function e(e,t,n,i,o){var s=this;this.scope=e,this.attrs=t,this.gradebookPermissionService=n,this.grade=i,this.categoryService=o,this.categoryMap={},this.onMoveGraderItem=function(e){var t=s.findGraderItemById(e.dragContentId),n=t.positionBeforeId?t.positionBeforeId:null,i=t.positionAfterId?t.positionAfterId:null,o=s.columns.indexOfItemById(e.dragContentId),a=null;return e.positionBeforeId?(-1!==(a=s.columns.indexOfItemById(e.positionBeforeId))&&-1!==o&&o<a&&a--,t.positionBeforeId=e.positionBeforeId):e.positionAfterId&&(-1!==(a=s.columns.indexOfItemById(e.positionAfterId))&&-1!==o&&o>a&&a++,t.positionAfterId=e.positionAfterId),null==a||o===a||-1===o||-1===a?(t.positionBeforeId=n,void(t.positionAfterId=i)):(s.columns.splice(a,0,s.columns.splice(o,1)[0]),t.$patch())},this.canModify=this.gradebookPermissionService.canModify(),this.contextArea="grades",this.columns=e.columns,this.course=e.course(),this.hasColumns=!0,this.categoryService.getOrLoadCategoriesForCourse(this.scope.course().id).then((function(e){e.forEach((function(e){s.categoryMap[e.id]=e}))})),e.$watch("columns",(function(t){t&&(s.columns=t,s.hasColumns=0!==t.length,s.attendanceColumnExists=!!s.columns.find((function(e){return e.isAttendance()})),e.$broadcast("update-content-menu"))})),e.$watch("columns.length",(function(t){s.attendanceColumnExists=!!s.columns.find((function(e){return e.isAttendance()})),s.hasColumns=0!==t,e.$broadcast("update-content-menu")})),e.$on("content-item-mouseover",(function(t,n){e.$apply((function(){e.$broadcast("content-item-hover",n)}))})),e.$on("course-gradebook-mouse-leave",(function(){e.$broadcast("content-outline-hover-end")})),e.$on("attempt-base-content-update",(function(e,t){var n=s.columns.filter((function(e){return t.id===e.contentId}));n.length>0&&n.forEach((function(e){e.$fetch()}))}))}return e.prototype.findGraderItemById=function(e){return o.find(this.columns,(function(t){return t.id===e}))},e.$inject=["scope","attrs",p.b,m.h,h.b],e}(),C=function(){function e(e,t){var n=this;this.$injector=e,this.timeout=t,this.restrict="E",this.template=v,this.scope={course:"&",columns:"=",showSetupOverallColumn:"=",isFirst:"=",attendanceIsAvailable:"&"},this.link=function(e,t,i){n.timeout((function(){e.courseGradesGraderList=n.$injector.instantiate(w,{scope:e,element:t,attrs:i})}),e)}}return e.$inject=["$injector",f.b],e}();s.module(y,[u.a,g.c,c.a,l.b,d.a]).directive("bbCourseGradesGraderList",["$injector",b.serviceName,function(e,t){return t.loadBundle("components/directives/grade/course-grades-grader-list"),e.instantiate(C)}]);var S=n("jhBu"),k=n("lr7J"),I=n("pjml"),D=n("TnpK"),E=n("yC9S"),O=n("aHpC"),T=n("oQrK"),$=n("LN5R"),A=n("qH3X"),x=n("2o5C"),P=n("kp/p"),G=n("ERkP"),L=n("1ZbL"),R=n("tN4z"),M=n("ZQFV"),j={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.analyticsId,n=e.courseId,i=e.currentUserId;return G.createElement(R.AnalyticsJssThemeProvider,null,G.createElement(M.StudentListView,{analyticsId:t,courseId:n,currentUserId:i}))},t}(G.Component),attributes:["analyticsId"],bindingNames:["courseId","currentUserId"],renderLocalized:!0,withProvider:!0};s.module("ultra.directives.grade.studentListViewTable",[]).component("bbStudentListViewTable",Object(L.a)(j));var _=n("fYJU"),B='<bb-student-list-view-table\n                        analytics-id="components.directives.grades.studentListView"\n                        course-id="studentListView.scope.courseId"\n                        current-user-id="studentListView.currentUserId"\n                      ></bb-student-list-view-table>',F=function(){function e(e,t){this.scope=e,this.currentUserId=t.userId}return e=Object(i.__decorate)([Object(i.__param)(0,Object(O.b)("scope")),Object(i.__param)(1,Object(O.b)(_.b))],e)}(),N=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=B,this.scope={courseId:"<"},this.link=function(e){e.studentListView=t.$injector.instantiate(F,{scope:e})}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(O.b)("$injector"))],e)}();angular.module("ultra.components.directives.studentListView",["ultra.directives.grade.studentListViewTable"]).directive("bbStudentListView",["$injector",function(e){return e.instantiate(N)}]);var V={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.analyticsId,n=e.showFixedView;return G.createElement(M.OverallGradeSetup,{analyticsId:t,showFixedView:n})},t}(G.Component),attributes:["analyticsId"],bindingNames:["showFixedView"],renderLocalized:!0,withProvider:!0};s.module("ultra.directives.grade.overallGradeSetup",[]).component("bbOverallGradeSetup",Object(L.a)(V));var z='<bb-overall-grade-setup\n                        analytics-id="components.directives.grade.overall-panel"\n                        show-fixed-view="showFixedView">\n                      </bb-overall-grade-setup>',U=function(){function e(e){this.$injector=e,this.restrict="E",this.template=z,this.scope={showFixedView:"<"}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(O.b)("$injector"))],e)}();angular.module("ultra.components.directives.setupOverallGrade",["ultra.directives.grade.overallGradeSetup"]).directive("bbSetupOverallGrade",["$injector",function(e){return e.instantiate(U)}]);var H=n("cpZm"),q=n("Sa5G"),K=n("po/h");n.d(t,"c",(function(){return Q})),n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return W}));var W,Q="ultra.directives.grade.courseGradesGrader",J="after-update-grades";!function(e){e.List="list",e.Grid="grid"}(W||(W={}));var Z=new Set([W.List,W.Grid]),Y=W.List,X=new Set([H.a.id,H.b.id]),ee=H.a.id,te=function(){function e(e,t,n,i,o,s,a,c,l,d){var u=this;this.$modal=e,this.$location=t,this.scope=n,this.$q=i,this.entitlementService=o,this.grade=s,this.gradebookPermissionService=a,this.categoryService=c,this.ultraState=l,this.timeout=d,this.GRADE_COLUMN_LOAD_LIMIT=1e3,this.GRADE_COLUMN_RENDER_LIMIT=50,this.currentlyLoading=!1,this.categoryTitleMap={},this.allCategoriesLoaded=!1,this.isDesktop=!1,this.firstRender=!0,this.canDownloadGradebook=!1,this.canUploadGradebook=!1,this.showFilterCriteriaSettings=!1,this.mergedCourses=[],this.changeListViewType=function(e){X.has(e)&&(u.currentTabId=e)},this.handleLocationChanged=function(){var e,t=null===(e=u.$location.search())||void 0===e?void 0:e.gradebookView;Z.has(t)?u.view=t:u.view=Y};var p=l.params.gradebookView,h=l.params.listViewType;Z.has(p)?this.view=p:this.view=Y,X.has(h)?this.currentTabId=h:this.currentTabId=ee,this._setupColumnUpdateResponder(),this._setupColumnDeleteResponder(),this._setupViewChange(),this._setupBreakpointChange(),this._setupListViewTypeChange(),this.isDesktop=T.a.detect().desktop(),this.userHasViewGradebookPermission=this.gradebookPermissionService.canView(),n.$on("bb-update-category-icon",(function(e,t,n){t.categoryTitle=u.categoryTitleMap[n]})),n.$on(x.b,(function(){u.expandColumnSummaries(u.allColumns)})),n.$on(A.a.CLOSE_FILTER_PANEL,(function(e,t){u.showFilterCriteriaSettings=t,u.scope.$root.$broadcast(A.a.SHOW_FILTER_CRITERIA,u.showFilterCriteriaSettings)})),n.$on(A.a.UPDATED_FILTER_CONDITION,(function(e){u.updateFilteredCount()})),n.$on(A.a.GRADEBOOK_CLEAR_SELECTED,(function(e){u.updateFilteredCount()})),E.b.OnRootScope(n,m.b,(function(e,t){var n=u.allColumns.find((function(e){return e.id===t.columnId}));n&&(n.summary.$fetch(),u.scope.$root.$broadcast("bb-update-summary"),u.scope.$root.$broadcast("bb-update-category-icon",n),u._replaceOrInsertColumnWrapper(n),n.$fetch())})),this.canUploadGradebook=a.canModify(),this.scope.courseGrades.course.$then((function(e){e.isToolAvailable("bb-attendance").then((function(e){u.attendanceIsAvailable=e})),u._loadColumns(),u.course=e,r.a.features.gradebookSearchFilterM3&&u._loadMergedCourse(),u.canDownloadGradebook=a.canViewGrades()&&u.entitlementService.isEntitled("course.gradebook-data.export.EXECUTE",u.course.id)}))}return Object.defineProperty(e.prototype,"squareToggleValue",{get:function(){return this.isGridView?W.Grid:W.List},set:function(e){this.view=e},enumerable:!0,configurable:!0}),e.prototype.renderMoreColumns=function(){if(this.currentlyLoading||this.firstRender)this.firstRender=!1;else if(this.columns.length<this.allColumns.length){var e=this.addColumns();this.scope.$root.$broadcast(k.a,"course-grades-grader",e)}},e.prototype.addColumns=function(){var e=this,t=this.$q.defer();return this.timeout((function(){var n,i=e.columns.length;e.allColumns.length-i>e.GRADE_COLUMN_RENDER_LIMIT?(n=e.columns).push.apply(n,e.allColumns.$slice(i,i+e.GRADE_COLUMN_RENDER_LIMIT)):e.columns=e.allColumns,t.resolve()}),this.scope,1e3),t.promise},e.prototype.showFilterCriteriaPanel=function(){this.showFilterCriteriaSettings=!this.showFilterCriteriaSettings,this.scope.$root.$broadcast(A.a.SHOW_FILTER_CRITERIA,this.showFilterCriteriaSettings)},e.prototype.updateFilteredCount=function(){this.filteredCount=this.mergedCourses.filter((function(e){return!0===e.ui.checked})).length},e.prototype.calculateCanAddOverallGrade=function(e,t){this.gradebookPermissionService.canModify()?(!t||this.course.id===t)&&!this.course.isComplete()?this.showSetupOverallColumn=e:this.showSetupOverallColumn=!1:this.showSetupOverallColumn=!1},e.prototype._loadColumns=function(){var e=this;this.currentlyLoading=!0;var t=this.grade.loadColumns(this.scope.courseGrades.course,!0,{expand:"collectExternalSubmissions",limit:this.GRADE_COLUMN_LOAD_LIMIT,offset:this.allColumns?this.allColumns.length:0});this.scope.$root.$broadcast(k.a,"course-grades-grader",t),t.then((function(e){return e.attachRelatedContentsByScoreProviderHandle(q.B.Scorm)})).then((function(t){e.allColumns&&e.allColumns.length>0?e.allColumns.concat(t):e.allColumns=t,e.totalColumnCount=t.paging.count,t.paging.nextPage?e._loadColumns():(e.currentlyLoading=!1,e.loadCategories(),e.grade.needsToSetupOverall(e.allColumns,e.course.id).then((function(t){e.calculateCanAddOverallGrade(t)})),e.allColumns.length>e.GRADE_COLUMN_RENDER_LIMIT?e.columns=e.allColumns.$slice(0,e.GRADE_COLUMN_RENDER_LIMIT):e.columns=e.allColumns,e.expandColumnSummaries(e.allColumns))}))},e.prototype.expandColumnSummaries=function(e){var t=e.paging&&e.paging.count||1e3,n=this.course.gradebook.summaries.expandingColumns(e);return this.$q.all(o.range(0,t,1e3).map((function(e){return n.$fetch({limit:1e3,offset:e,excludeCalculations:!0}).$asPromise()}))).then((function(){return e}))},e.prototype.loadCategories=function(){var e=this;this.categoryService.getOrLoadCategoriesForCourse(this.scope.courseGrades.course.id).then((function(t){t.forEach((function(t){e.categoryTitleMap[t.id]=t.title})),e.allColumns&&e.allColumns.forEach((function(t){t.gradebookCategoryId&&(t.categoryTitle=e.categoryTitleMap[t.gradebookCategoryId])})),e.allCategoriesLoaded=!0}))},e.prototype._loadMergedCourse=function(){var e=this;this.entitlementService.isEntitled(q.j.ViewChildCourse,this.course.id)&&this.course.getChildrenCourses().then((function(t){var n,i=o.sortBy(t,(function(e){return e.childCourse.name}));(n=e.mergedCourses).push.apply(n,i),e.mergedCourses.forEach((function(e){e.ui={checked:!1,hidden:!1}}))}))},e.prototype._setupColumnUpdateResponder=function(){var e=this;this.scope.$on(m.c,(function(t,n){e._replaceOrInsertColumnWrapper(n),n.summary.$fetch()})),this.scope.$on("content-update",(function(t,n){n.isScorm()&&n.getScormGradebookItems().forEach((function(t){var i=e.course.gradebook.columns.$buildRaw(t.gradingColumn);i.ui={content:n},e._replaceOrInsertColumnWrapper(i),i.summary.$fetch()}))})),this.scope.$on("bb-change-overall-panel-visibility",(function(t,n,i){e.calculateCanAddOverallGrade(i,n)})),this.scope.$on("$stateChangeStart",(function(t,n,i,o){o.name.indexOf("attendance")>-1&&!e.columns.find((function(e){return e.isAttendance()}))&&e._loadColumns()})),this.scope.$on(P.b,(function(t,n){e.grade.loadColumns(e.scope.courseGrades.course,!0).then((function(t){e.allColumns=t,e.allColumns.forEach((function(e){return e.summary.$fetch()})),e.scope.$broadcast(J,n)}))}))},e.prototype._replaceOrInsertColumnWrapper=function(e){var t=this._replaceOrInsertColumn(this.allColumns,e);this.columns!==this.allColumns&&t<this.columns.length&&this._replaceOrInsertColumn(this.columns,e)},e.prototype._replaceOrInsertColumn=function(e,t){var n=o.findIndex(e,(function(e){return e.id===t.id}));return n>-1?e[n]=t:(t.positionBeforeId?n="start"===s.lowercase(t.positionBeforeId)?0:o.findIndex(e,(function(e){return t.positionBeforeId===e.id})):t.positionAfterId&&("start"===s.lowercase(t.positionAfterId)?n=0:"end"===s.lowercase(t.positionAfterId)?n=e.length:(n=o.findIndex(e,(function(e){return t.positionAfterId===e.id})))>=0&&n++),n>=e.length||n<0?e.push(t):e.splice(n,0,t),this.totalColumnCount++),n>-1?n:0},e.prototype._removeColumn=function(e,t){var n=o.findIndex(e,(function(e){return e.id===t.id}));n>-1&&e.splice(n,1)},e.prototype._setupColumnDeleteResponder=function(){var e=this;this.scope.$on("bb-delete-column",(function(t,n){e.removeColumn(n),n.externalGrade&&(e.scope.$root.$broadcast("bb-reload-grid-view"),e.scope.$root.$broadcast("bb-change-overall-panel-visibility",n.courseId,!0))}))},e.prototype.removeColumn=function(e){if(this._removeColumn(this.allColumns,e),this.columns!==this.allColumns&&this._removeColumn(this.columns,e),this.totalColumnCount--,e&&e.contentId){var t=this.allColumns&&this.allColumns.find((function(t){return t.contentId===e.contentId}));t&&this.removeColumn(t)}},e.prototype._refreshColumnMap=function(){this.columnMap=o.keyBy(this.columns,(function(e){return e.id}))},e.prototype._setupViewChange=function(){var e=this;this.scope.$watch("courseGradesGrader.view",(function(){var t,n=!(null===(t=e.$location.search())||void 0===t?void 0:t.gradebookView);e.ultraState.search("gradebookView",e.view,{location:!n||"replace",notify:!1}),e.showFilterCriteriaSettings&&e.timeout((function(){e.scope.$root.$broadcast(A.a.SHOW_FILTER_CRITERIA,e.showFilterCriteriaSettings)}),e.scope,0,!1),e.scope.$root.$broadcast(A.a.GRADEBOOK_CLEAR_SELECTED,!0)})),this.scope.$on("$locationChangeSuccess",this.handleLocationChanged)},e.prototype._setupListViewTypeChange=function(){var e=this;this.scope.$watch("courseGradesGrader.currentTabId",(function(){e.ultraState.search("listViewType",e.currentTabId)}))},e.prototype._setupBreakpointChange=function(){var e=this;E.b.OnWindow("resize",o.debounce((function(){a.h()&&e.isGridView&&(e.view=W.List)}),100),this.scope)},Object.defineProperty(e.prototype,"isSmallScreen",{get:function(){return a.h()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGridView",{get:function(){return this.view===W.Grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGradableItemsListView",{get:function(){return this.view===W.List&&this.currentTabId===H.a.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStudentListView",{get:function(){return this.view===W.List&&this.currentTabId===H.b.id},enumerable:!0,configurable:!0}),e=Object(i.__decorate)([Object(i.__param)(0,Object(O.b)("$modal")),Object(i.__param)(1,Object(O.b)("$location")),Object(i.__param)(2,Object(O.b)("scope")),Object(i.__param)(3,Object(O.b)("$q")),Object(i.__param)(4,Object(O.b)(S.b)),Object(i.__param)(5,Object(O.b)(m.h)),Object(i.__param)(6,Object(O.b)(p.b)),Object(i.__param)(7,Object(O.b)(h.b)),Object(i.__param)(8,Object(O.b)(D.d)),Object(i.__param)(9,Object(O.b)(f.b))],e)}(),ne=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=K,this.scope=!0,this.link=function(e){e.courseGradesGrader=t.$injector.instantiate(te,{scope:e})}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(O.b)("$injector"))],e)}();s.module(Q,["mm.foundation.modal",y,g.c,m.g,p.a,k.b,b.moduleName,I.Q,$.b,H.c,"ultra.components.directives.studentListView","ultra.components.directives.setupOverallGrade"]).directive("bbCourseGradesGrader",["$injector",b.serviceName,function(e,t){return t.loadBundle("components/directives/grade/course-grades-grader"),e.instantiate(ne)}])},fUKT:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-safe-assign",use:"icon-small-safe-assign-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-safe-assign"><path d="M7 15H2V1h9l3 3v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 4V1l3 3h-3zM5 5h3M5 11h3M5 8h6M15 8l-3 7-2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"fWA+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ERkP"),o=n("12Zt"),s=Object(o.a)(i.createElement(i.Fragment,null,i.createElement("path",{fill:"var(--icon-fill-color)",stroke:"transparent",fillRule:"evenodd",d:"M15.75.5c2.4853 0 4.5 2.0147 4.5 4.5v17.375H31c2.4853 0 4.5 2.0147 4.5 4.5s-2.0147 4.5-4.5 4.5H15.75c-2.4853 0-4.5-2.0147-4.5-4.5V5c0-2.4853 2.0147-4.5 4.5-4.5z",clipRule:"evenodd"}),i.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M9 9H6V4c0-2 1-3 2.5-3m0 0h24.1552C33.9448 1 35 2.08 35 3.4V22M8.5 1C10 1 11 2 11 4v27h24v-6"}),i.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12v22h26"}),i.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"2",d:"M5 14v23h27"}),i.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"2",d:"M15 8h10M23 25h8M15 17h16M15 13h16M15 21h16"})),"large")},g5ln:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),o=(n("SP9a"),n("s5UK"),n("A51O"),n("nsO7")),s=n("yC9S"),a=n("TZd2"),r="ultra.components.directives.pagination";!function(){function e(){this.pageCount=1,this.componentId="pagination-id-"+t.idCounter,this.componentDescribeId="pagination-describe-id-"+t.idCounter++,this.firstPage=0,this.generatePageItems=o.memoize((function(e){return o.range(1,e+1).map((function(e){return{index:e-1,name:e.toString(),nature:"_"+e,value:e.toString()}}))}))}var t;t=e,e.prototype.$onChanges=function(e){e.pageSize&&this.reset(),e.totalItems&&(this.resetPageCount(),this.currentPage*this.pageSize>=this.totalItems&&(this.currentPage=this.lastPage))},Object.defineProperty(e.prototype,"lastPage",{get:function(){return Math.max(this.firstPage,Math.ceil(this.totalItems/this.pageSize)-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availablePages",{get:function(){return this.generatePageItems(this.pageCount)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mySelectedPage",{get:function(){return this.availablePages[this.currentPage]},enumerable:!0,configurable:!0}),e.prototype.canNavigate=function(e){var t=this.currentPage+e;return t>=this.firstPage&&t<=this.lastPage},e.prototype.changePage=function(e){var t=this.currentPage;this.currentPage=e.index,t!==this.currentPage&&this.onChangePage&&this.onChangePage({currentPage:this.currentPage,previousPage:t})},e.prototype.previousPage=function(){this.changePage(this.availablePages[this.currentPage-1])},e.prototype.nextPage=function(){this.changePage(this.availablePages[this.currentPage+1])},e.prototype.reset=function(){this.resetPageCount(),this.currentPage=0},e.prototype.resetPageCount=function(){this.pageCount=this.lastPage+1},e.idCounter=1,e=t=Object(i.__decorate)([Object(s.a)({moduleName:r,componentName:"bbPagination",template:a,bindings:{totalItems:"<",pageSize:"<",currentPage:"=",onChangePage:"&?",maxItemsInDropdown:"@?"}})],e)}()},gIKX:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b}));var i=n("D57K"),o=(n("dY8P"),n("5uNO"),n("w0/N"),n("wHJ2")),s=n("t3AZ"),a=n("XGja"),r=n("o5Lu"),c=n("dd1C"),l=n("+4Px"),d=n("TnpK"),u=n("u9Ip");n.d(t,"d",(function(){return u}));var p="ultra.components.directives.grade.input.baseInput",m="wrapping-input-style",h=function(){function e(e,t,n,i,o,s,a,r,c){this.$q=e,this.$injector=t,this.scope=n,this.element=i,this.form=o,this.bbLocalize=s,this.grade=a,this.timeout=r,this.ultraState=c,this.wrapperDiv=this.element.find("."+m),this.inputElement=this.wrapperDiv.find("input"),this.gradeDisplayItem=this.instantiateGradeDisplayItem(),this.isSaving=!1,this.setupWatches(),this.scope.readonly&&this.scope.readonly()||this.setupInputListeners(),this.element.foundation()}return e.prototype.afterSave=function(e){this.gradeDisplayItem.displayGrade=e.displayGrade},e.prototype.shouldClearAttemptsGrade=function(){return this.isGradeErased()&&(this.scope.column().isAssignment()||this.scope.column().isDiscussion())},e.prototype.clickGradeNotation=function(e){this.inputElement.val(e.code),this.perfCodeId=e.id},e.prototype.createGradeSubmissionNow=function(){var e=this.grade.parseGrade(this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema,this.scope),t=this.grade.createGradeSubmission(this.scope.column(),e,this.gradeDisplayItem.schema);return this.perfCodeId&&(t.perfCodeId=this.perfCodeId),t.clearGrade=this.isGradeErased(),t},e.prototype.getAriaLabelKey=function(e,t){var n="components.directives.grade.grade-input.aria.";return n+=t?"overrideScoreInput":"scoreInput",n+=e?"Group":"",n+=this.gradeDisplayItem.displayValue?"Graded":"Empty"},e.prototype.getAriaLabel=function(e,t){return this.scope.inputAriaLabel?this.scope.inputAriaLabel:this.bbLocalize.translateSync({key:this.getAriaLabelKey(e,t),params:{user:this.scope.forUser&&this.scope.forUser(),group_name:this.scope.forGroup&&this.scope.forGroup()&&this.scope.forGroup().title,grade:this.scope.input.gradeDisplayItem.displayValue,total:this.scope.column&&this.scope.column()&&this.scope.column().possible},locale:this.bbLocalize.getLocale(this.scope),noWrap:!0})},e.prototype.getWatchGroup=function(){return["column().gradingSchemaId"]},e.prototype.isGradeErased=function(){return this.form[this.scope.id].$dirty&&this.gradeDisplayItem.wasValueErased},e.prototype.isRubricAssociated=function(){return this.scope.column().hasRubricAssociation()},e.prototype.onFocus=function(){this.form[this.scope.id].$valid&&(this.gradeDisplayItem.displayValue=this.gradeDisplayItem.parsedValue)},e.prototype.openRubricEvaluation=function(){var e=this,t=this.getRubricEvalStateAndArgs();!this.isRubricAssociated()||null===t||this.scope.disableRubricEvalClick&&this.scope.disableRubricEvalClick()||(this.ultraState.current.name.endsWith("peek.assessment-submission-feedback")&&this.ultraState.leavePeekState(this.ultraState.current.name),this.timeout((function(){e.ultraState.goPeekState(t.state,t.args)}),this.scope,0,!1))},e.prototype.refreshInputBox=function(){var e=this.scope.column().gradingSchemaId;this.gradeDisplayItem.schema.id!==e&&this.gradeDisplayItem.init(this.scope.column())},e.prototype.setupGradeSubmission=function(){return this.$q.when(this.createGradeSubmissionNow())},e.prototype.shouldShowTotalPoints=function(){var e=this.form[this.scope.id],t=this.form[this.scope.id];return(this.gradeDisplayItem.shouldShowTotalPoints()||this.hasFocus()||null!=e&&t.$dirty)&&!this.gradeDisplayItem.hasPerfCode()},e.prototype.updateGradeColor=function(){this.wrapperDiv.removeClass(this.inputColorClass),this.gradeDisplayItem.displayValue&&(this.inputColorClass=this.gradeDisplayItem.getGradeColor(),this.wrapperDiv.addClass(this.inputColorClass))},e.prototype.validateAndSave=function(){var e=this;if(this.wrapperDiv.removeClass("wrapping-input-style-focus"),this.scope.$emit("grade-input-blur",this.scope.id),this.form[this.scope.id].$valid)if(this.form[this.scope.id].$dirty||this.perfCodeId){if(!this.isReservedWord(this.form[this.scope.id].$viewValue))return this.save().then((function(t){e.form[e.scope.id].$setPristine(),e.scope.$emit("bb-grade-input-save",t,e.scope.column().id),e.refreshInputBox()})).finally((function(){e.isSaving=!1}));this.wrapperDiv.removeClass(this.inputColorClass)}else this.refreshInputBox()},e.prototype.save=function(){var e=this;return this.isSaving=!0,this.setupGradeSubmission().then((function(t){return e.grade.save(t).then((function(t){return e.afterSave(t),t}))}))},e.prototype.validate=function(){var e=this,t=this.grade.createGradeSubmission(this.scope.column(),this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema),n=this.grade.validateGrade(t,this.scope);return this.$q.when(n).then((function(t){e.form[e.scope.id].$setValidity("invalidGrade",t)}))},e.prototype.hasFocus=function(){return this.inputElement.is(":focus")||this.wrapperDiv.hasClass("wrapping-input-style-focus")},e.prototype.isReservedWord=function(e){if(!e)return!1;var t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}).toLocaleLowerCase(),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}).toLocaleLowerCase(),i=e.toLocaleLowerCase();return i===t||i===n},e.prototype.setFocusOnNextTabbableElement=function(){this.timeout((function(){a.b()}),this.scope,0,!1)},e.prototype.setupInputListeners=function(){var e=this;this.wrapperDiv.on("click",(function(){e.isRubricEvalMode()||(e.wrapperDiv.addClass("wrapping-input-style-focus"),e.inputElement.focus(),e.inputElement.select())})),this.inputElement.on("focus",(function(){e.wrapperDiv.addClass("wrapping-input-style-focus"),e.inputElement.select(),e.scope.$emit("grade-input-in-focus",e.scope.id)})),this.inputElement.on("keydown",(function(t){(t.keyCode===l.f||t.keyCode===l.m||t.keyCode===l.u&&!t.shiftKey)&&(t.preventDefault(),e.setFocusOnNextTabbableElement())}))},e.prototype.setupLocalizedErrorMessage=function(){this.scope.column().externalGrade?this.localizedErrorMessageKey="components.directives.grade.grade-input.errorMessage.overallGrade":this.localizedErrorMessageKey="components.directives.grade.grade-input.errorMessage.default"},e.prototype.setupWatches=function(){var e=this;this.scope.$watch("::column()",(function(t){t&&e.gradeDisplayItem.init(t).then((function(){e.setupWatchGroup(),e.setupLocalizedErrorMessage()}))}))},e.prototype.setupWatchGroup=function(){var e=this;this.scope.$watchGroup(this.getWatchGroup(),(function(){e.isSaving||e.refreshInputBox()}))},Object.defineProperty(e.prototype,"totalPoints",{get:function(){return this.scope.column().isCalculated()?100:this.scope.column().possible},enumerable:!0,configurable:!0}),e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getAriaLabelKey=function(t){return e.prototype.getAriaLabelKey.call(this,!0,t)},t.prototype.getWatchGroup=function(){return e.prototype.getWatchGroup.call(this).concat(["isGroupGradeInProgress()","isGroupGradeMultiple()"])},t.prototype.shouldShowTotalPoints=function(){return e.prototype.shouldShowTotalPoints.call(this)&&!(this.scope.isGroupGradeInProgress()||this.scope.isGroupGradeMultiple())},t.prototype.updateGradeColor=function(){this.scope.isGroupGradeMultiple()||this.scope.isGroupGradeInProgress()||e.prototype.updateGradeColor.call(this)},t}(h),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.getAriaLabelKey=function(t){return e.prototype.getAriaLabelKey.call(this,!1,t)},t}(h);o.module(p,["puElasticInput",s.a,r.g,c.a,d.b])},"gK/k":function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return h}));n("kgZF");var i=n("nsO7"),o=n("wHJ2"),s=n("9Fiv"),a=n("L2Kv"),r=n("TmUJ"),c=n("yC9S"),l=n("5Dl8"),d=n("lEL+"),u=n("dF44"),p=n("TML7"),m="ultra.components.directives.gridReborn",h="bbGridReborn",g=function(){function e(e,t,n,s,a,l){var d=this;this.$scope=e,this.$element=t,this.$attrs=n,this.$injector=s,this.$q=a,this.timeout=l,this.containers=Object.create(null),this.afterCellDataUpdatedHooks=[],this.debounceRefresh=i.debounce((function(){i.forEach(d.containers,(function(e){return e.applyData()}));var e=i.values(d.containers).reduce((function(e,t){return e.concat(t.renderedColumns)}),[]);(d.options.callbacks.data||o.noop)(d.containers.center.renderedRows,e),d.$scope.$apply(),d.applyAfterCellUpdatedOnce()}),u.d),this.notifyScrollHorizontally=i.throttle(this.$scope.$broadcast.bind(this.$scope.$root,u.b.SCROLL_H),u.d),this.notifyScrollVertically=i.throttle(this.$scope.$broadcast.bind(this.$scope.$root,u.b.SCROLL_V),u.d),this.id="rb-grid-"+n.id,t.addClass(this.id),this.scrollbarWidth=Object(r.a)();var p=a.defer();this.initPromise=p.promise;var m=e.$watch(n[h],(function(e){e&&(d.options=e,d.setDefaultValues(),d.initStyles(),d.createContainers(),d.initRowsPosition(),d.initColumnsPosition(),p.resolve(),m())}));c.b.OnWindow("resize",i.debounce((function(){e.$apply((function(){i.forEach(d.containers,(function(e){e.adjustRows(),e.adjustColumns()}))}))}),u.d),e),e.$on(u.b.COLUMN,(function(e,t){t&&(d.options.columns=t),d.setDefaultValues(),d.afterCellDataUpdated((function(){d.initStyles(),i.forEach(d.containers,(function(e){return e.initColumnsPosition()}))})),i.forEach(d.splitColumns(),(function(e,t){d.containers[t].resetColumns(e)}))})),e.$on(u.b.ROW,(function(e,t){t&&(d.options.rows=t),d.setDefaultValues(),d.initStyles(),d.initRowsPosition(),i.forEach(d.containers,(function(e){return e.resetRows(t)}))})),e.$on(u.b.DATA_UPDATE,(function(){d.debounceRefresh()}))}return e.prototype.initStyles=function(){var e=this,t=[],n=this.$element.find("style#rb-grid");t.push("."+this.id+" .rb-header-row {height: "+Object(l.b)(this.options.headerHeight)+";}"),t.push("."+this.id+" .column-header-button-wrapper, ."+this.id+" .rb-add-column-placeholder {height: "+Object(l.b)(this.options.headerContentHeight)+";}"),t.push("."+this.id+" .rb-cell-row {height: "+Object(l.b)(this.options.rowHeight)+";}"),Array.prototype.push.apply(t,this.options.columns.map((function(t){return"."+e.id+" .rb-col-"+t.id+" {width: "+Object(l.b)(t.columnWidth)+";}"}))),t.push("."+this.id+" .rb-grid-scrollbar-placeholder-x {height: "+Object(l.b)(this.scrollbarWidth)+";}"),t.push("."+this.id+" .rb-grid-scrollbar-placeholder-y {width: "+Object(l.b)(this.scrollbarWidth)+";}"),n.text(t.join("\n"))},e.prototype.initRowsPosition=function(){for(var e=this.options.rows,t=[],n=this.$element.find("style#rb-grid-rows-initial-position"),i=0;i<e.length;i++)t.push("."+this.id+" .rb-row-position-"+e[i].id+" {top: "+Object(l.b)(i*this.options.rowHeight)+";}");n.text(t.join("\n"))},e.prototype.initColumnsPosition=function(){i.values(this.containers).forEach((function(e){return e.initColumnsPosition()}))},e.prototype.createContainers=function(){var e=this;i.forEach(this.splitColumns(),(function(t,n){return e.containers[n]=e.$injector.instantiate(s.a,{position:n,columns:t,grid:e})})),this.containers.center.hasHScrollbar=!0,(this.containers.right||this.containers.center).hasVScrollbar=!0},e.prototype.setDefaultValues=function(e){void 0===e&&(e=this.options),e.headerContentHeight=e.headerContentHeight||e.headerHeight,e.headerBorder=!1!==e.headerBorder,e.rowBorder=!1!==e.rowBorder,e.columns.forEach((function(e){e.position=e.position||"center",e.border=!1!==e.border,e.focusable=!1!==e.focusable}))},e.prototype.getFocusableColumns=function(){var e=this.containers.left,t=this.containers.right;return(e&&e.columns||[]).concat(this.containers.center.columns,t&&t.columns||[]).filter((function(e){return e.focusable}))},e.prototype.splitColumns=function(e){void 0===e&&(e=this.options.columns);var t=i.groupBy(e,(function(e){return e.position}));return t.center=t.center||[],t},e.prototype.scrollContainers=function(e){var t=e.scrollTop,n=void 0===t?-1:t,o=e.scrollLeft,s=void 0===o?-1:o;n>=0&&(this.notifyScrollVertically(n),i.forEach(this.containers,(function(e){e.scrollVertically(n)}))),s>=0&&(this.notifyScrollHorizontally(s),this.containers.center.scrollHorizontally(s))},e.prototype.scrollToLeft=function(e){this.scroll({scrollLeft:0},e)},e.prototype.scrollToRight=function(e){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft()},e)},e.prototype.scrollToRightWithTop=function(e,t){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft(),scrollTop:e},t)},e.prototype.scrollToTop=function(e){this.scroll({scrollTop:0},e)},e.prototype.scrollToBottom=function(e){this.scroll({scrollTop:this.containers.center.getMaxScrollTop()},e)},e.prototype.scroll=function(e,t){t&&this.afterCellDataUpdated(t),this.scrollContainers(e)},e.prototype.canAddColumn=function(){return!!this.options.callbacks.column},e.prototype.afterCellDataUpdated=function(e){this.afterCellDataUpdatedHooks.push(e)},e.prototype.applyAfterCellUpdatedOnce=function(){for(var e=0;e<this.afterCellDataUpdatedHooks.length;e++)try{this.afterCellDataUpdatedHooks[e]()}catch(e){console.error(e)}this.afterCellDataUpdatedHooks.length=0},e.$inject=["$scope","$element","$attrs","$injector","$q",d.b],e}(),b=function(){function e(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=p,this.transclude=!0,this.controller=g,this.controllerAs="grid",this.scope=!0}return e.$inject=["$injector"],e}();o.module(m,[]).directive(h,["$injector",function(e){return e.instantiate(b)}]).directive(s.c,["$injector",function(e){return e.instantiate(s.b)}]).directive(a.b,["$injector",function(e){return e.instantiate(a.a)}])},gORw:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"gW+2":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-documents",use:"icon-small-documents-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-documents"><path d="M1 4h7.0084L11 7v8H1V4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8.0005 4v3h3.0015M4 8h1M4 11h3.9722" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 1h11v12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},gYaZ:function(e,t){e.exports='<div class="multiple-submissions-grading-bar attempt-grading-bar" ng-class="{\'add-comment-expanded\': gradingBar.gradingCommentHandler.commentPanelOpen}" bb-foundation-defer>\n  <div class="attempt-grading-bar-inner" bb-click-to-invoke-child="a.attempt-info-container" ng-switch="gradingBar.hasPeekState()">\n    <a href="javascript:void(0);"\n       class="attempt-info-container"\n       ng-switch-when="true"\n       ng-click="gradingBar.goToPeekState()"\n       analytics-id="components.directives.grade.gradingBar.goToPeekState.link">\n      <div class="attempt-info">\n        <span class="name ellipsis" ng-bind-html="::gradingBar.label"></span>\n        <span class="submission-details-wrap" ng-if="attempt" ng-switch="gradingBar.isSubmittedLate()">\n          <span class="details ellipsis submitted js-submitted-date" ng-switch-default bb-translate translate-values="{date: attempt.attemptDate}">\n            components.directives.grade.grading-bar.submit-date-without-timezone\n          </span>\n          <span class="details ellipsis submitted text-alert-ax js-submitted-late-date" ng-switch-when="true" bb-translate translate-values="{date: attempt.attemptDate}">\n            components.directives.grade.grading-bar.submit-late-date-without-timezone\n          </span>\n        </span>\n      </div>\n    </a>\n    <i ng-switch-default class="icon submission-type-icon" bb-content-item-icon content-column="::column()"></i>\n    <div ng-switch-default class="attempt-info">\n      <span class="name ellipsis" ng-bind-html="::gradingBar.label"></span>\n      <span class="submission-details-wrap" ng-if="attempt" ng-switch="gradingBar.isSubmittedLate()">\n        <span class="details ellipsis submitted js-submitted-date" ng-switch-default bb-translate translate-values="{date: attempt.attemptDate}">\n          components.directives.grade.grading-bar.submit-date\n        </span>\n        <span class="details ellipsis submitted text-alert-ax js-submitted-late-date" ng-switch-when="true" bb-translate translate-values="{date: attempt.attemptDate}">\n          components.directives.grade.grading-bar.submit-late-date\n        </span>\n      </span>\n      \x3c!-- BEGIN Enhance time limit --\x3e\n      <span class="information-about-time-limit show-hide-on-hover" ng-if="gradingBar.isCompleted() && gradingBar.isShowExtraTime()">\n        <span class="exceeded-time attention hide-on-hover details small-medium-show">{{gradingBar.getExceedTime()}}</span>\n        <span class="questions-answered-correctly-after-time-limit attention show-on-hover details small-medium-hide" bb-translate translate-values="{count: gradingBar.getQuestionsAnsweredAfterSoftTimeLimit().length}">\n          components.directives.grade.grading-bar.questions-answered-after-soft-time-limit.plural\n        </span>\n      </span>\n      \x3c!--  END  Enhance time limit --\x3e\n    </div>\n    <div class="attempt-grading-actions">\n      <bb-display-grade-pill\n              class="pill-spacing"\n              ng-class="{\'has-feedback\': gradingBar.gradingCommentHandler.hasComment()}"\n              column="::column()"\n              attempt="::attempt"\n              is-manual-status-posted="hasOverallGrade"\n              disable-rubric-eval-click="disableRubricAction()"></bb-display-grade-pill>\n      <button\n              class="toggle-comments-button"\n              ng-if="gradingBar.showCommentIcon() && !disableFeedbackButtons"\n              ng-click="gradingBar.openFeedbackPanel()"\n              ng-switch="gradingBar.getCommentIconType()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grading-bar.instructor-comments.aria-label.comments-toggle-button\'}"\n              analytics-id="components.directives.grade.gradingBar.commentsToggle.button">\n        <bb-svg-icon ng-switch-when="view" size="medium" icon="feedback" status="active"></bb-svg-icon>\n        \x3c!-- For non-privileged users, anything that is not \'view\' should just show an empty feedback icon --\x3e\n        <bb-svg-icon ng-switch-default size="medium" icon="feedback"></bb-svg-icon>\n      </button>\n      <bb-overflow-menu ng-show="gradingBar.showOverflowMenu()"\n                        element-id="{{\'attempt-menu-open-button_\' + attempt.id}}"\n                        element-name="{{gradingBar.getLocalizedTextByKey(\'components.directives.grade.grading-bar.grade\')}}"\n                        menu-items="gradingBar.getOverflowMenuItems()"\n                        analytics-id-tag-prefix="components.directives.grade.grading-bar.overflowMenu">\n      </bb-overflow-menu>\n    </div>\n  </div>\n</div>\n'},ga7A:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("wHJ2"),o=n("pjml"),s=n("vhkR"),a=n("X455"),r=n("Youf"),c="ultra.components.directives.content.contentItem.contentItemType.contentItemLtilaunch",l=function(){function e(e,t,n){this.scope=e,this.ltiService=t,this.contextCourseMembership=n}return e.prototype.ltiLaunch=function(){var e=this;if(!this.scope.content.getContentDisplay().isLtiLink())throw new Error("Attempted to LTI launch a non-LTI content item. "+this.scope.content.contentHandler.toString());this.ltiService.ltiLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0}).then((function(){return e.markStart()}))},e.prototype.ltiLinkNeedsApproval=function(){var e=this.ltiService.getDomainConfigStatusType(this.scope.content);return o.N.LTIStatusType.NeedsApproval.isEqualTo(e)},e.prototype.markStart=function(){this.contextCourseMembership.isActAsInstructorMembership()||this.scope.content.state===o.r.StateType.Started||this.scope.content.updateState(o.r.StateType.Started,!0)},e.$inject=["scope",s.c,a.d],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=r,this.scope=!1,this.link=function(e,n,i){e.contentItemLtiLaunch=t.$injector.instantiate(l,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[s.b,a.a]).directive("bbContentItemLtilaunch",["$injector",function(e){return e.instantiate(d)}])},ho2F:function(e,t){e.exports='<ul id="performanceCodes-{{gradeInput.id}}" class="f-dropdown performance-code-options bb-foundation-dropdown-close-esc-override" data-dropdown-content>\n  <li class="performance-option-header" bb-translate>components.directives.grade.grade-input.selectPerformanceCode</li>\n  <li ng-repeat="perfCode in gradeNotations()" bb-click-to-invoke-child="a.performance-code-potion">\n    <a href="javascript:void(0);" \n       role="menuitem" \n       ng-click="gradeInput.clickGradeNotation(perfCode,$event)" \n       class="performance-code-potion"\n       analytics-id="directives.gradeInput.selectPerformanceCode.item.link">\n      <span class="code" title="{{perfCode.code}}">{{perfCode.code}}</span>\n      <span class="description" title="{{perfCode.description}}">{{perfCode.description}}</span>\n    </a>\n  </li>\n  <li ng-if="gradeDetail.displayGrade.isOverride" class="undo-override" bb-click-to-invoke-child="button.js-undo-override">\n    <a href="javascript:void(0);" \n       role="menuitem" \n       class="js-undo-override performance-code-potion" \n       ng-click="gradeInput.undoOverride()"\n       analytics-id="directives.grade-input.undoOverride.link">\n      <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n      <span bb-translate>components.directives.grade.grade-input.undoOverride</span>\n    </a>\n  </li>\n</ul>\n\n'},hpcp:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("5ikY"),s="ultra.components.directives.bbUiIcon.Blog";Object(i.a)(o.a,s,"bbUiIconBlog")},iViV:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var i=n("wHJ2"),o=n("nsO7"),s=n("o5Lu"),a=n("3l3z"),r=n("LN5R"),c=n("TmUJ"),l=n("qH3X"),d=n("+4Px"),u=n("lEL+"),p=n("dF44"),m=n("lEWr"),h="ultra.components.directives.gradeGridCellEditorReborn",g=function(){function t(e,t,n,i,o,s,a,r){var c=this;this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=o,this.gradeGridRebornController=s,this.gradeService=a,this.timeout=r,this.initialize(),n.$on(l.a.REFRESH_CELL_EDITOR,(function(){c.initialize(),c.scope.gradeGridColumnReborn.getIsOtherGroupMemberGraded()})),n.$on("$destroy",(function(){c.removeErrorMessage()}))}return t.prototype.initialize=function(){var e=this;this.score=this.scope.gradeGridColumnReborn.score,this.element.find("input").focus(),this.element.addClass("purple-outline"),this.timeout((function(){e.element.find("input").select()}),this.scope,0,!1),this.userName=this.scope.gradeGridColumnReborn.userName,this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.removeErrorMessage=function(){this.element.removeClass("validation-alert"),o.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),o.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)},t.prototype.createErrorMessage=function(){var e=this;if(this.messageElement&&this.removeErrorMessage(),o.isUndefined(this.messageElement)){this.element.addClass("validation-alert");var n=this.element.parent(".grade-grid-cell").offset();n.top+=80,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=function(t){var i=n.left+t.width(),o=n.top+t.height(),s=e.gradeGridRebornController.getGradeGridContainerElementRight();o>e.gradeGridRebornController.getGradeGridContainerElementBottom()&&(n.top-=t.height()+80),i>s&&(n.left-=i-s+Object(c.a)()),e.messageElement.offset(n)},this.$compile(t.CELL_MESSAGE_TEMPLATE)(this.messageScope,(function(t){e.messageElement=t,e.element.parents("bb-grade-grid-reborn").append(e.messageElement)}))}},Object.defineProperty(t.prototype,"isValidated",{get:function(){return this._isValidated},set:function(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage(),this.scope.gradeGridColumnReborn.isReadyToPost=this.score&&this.isValidated},enumerable:!0,configurable:!0}),t.prototype.stopPropagation=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.mousedown=function(){e(this.window).trigger("click")},t.prototype.onChange=function(){var e=this;this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.onInputBlur=function(e){this.scope.gradeGridColumnReborn.isPastDueZero&&""===this.score&&(this.score=this.scope.gradeGridColumnReborn.score),this.scope.gradeGridColumnReborn.onInputBlur(e,this.isValidated,this.score)},t.prototype.checkValue=function(e){var t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)},t.prototype.onKeydown=function(t){d.y(t)?(this.scope.gradeGridColumnReborn.gotoNextCell(),e(t.target).blur(),this.mousedown(),t.preventDefault(),t.stopPropagation()):t.keyCode===d.g?(e(t.target).blur(),this.mousedown(),this.scope.$emit(p.b.LEAVE_CELL)):d.x(t)&&(!this.score||t.keyCode!==d.j&&t.keyCode!==d.s?this.mousedown():t.stopPropagation())},t.$inject=["$compile","$window","scope","element","attrs","gradeGridRebornController",s.h,u.b],t.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>',t}(),b=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=m,this.require="^"+r.a,this.link=function(e,n,i,o){e.gradeGridCellEditorReborn=t.$injector.instantiate(g,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();i.module(h,[a.a]).directive("bbGradeGridCellEditorReborn",["$injector",function(e){return e.instantiate(b)}])}).call(this,n("5iHu"))},jO50:function(e,t){e.exports='<div class="slider-tab-navigation-desktop">\n  <div class="slider-tab-navigation-desktop__main-section">\n    <div ng-transclude></div>\n  </div>\n\n  <div class="slider-tab-navigation-desktop__browsable-section">\n    <div ng-if="sliderTabNavigation.shouldRenderTabs()">\n      <div bb-first-time-container class="guidance-wrapper">\n        <div bb-guidance-target component-key="components.directives.slider-tab-navigation.ftue.browsable-tabs">\n          <ul\n            class="slider-tab-navigation-desktop__browsable-tabs"\n            bb-arrow-key-navigation="{ tabDirection: \'vertical\', layout: \'rows\'}"\n          >\n            <li\n              class="slider-tab-navigation-desktop__tab-container"\n              ng-repeat="tab in sliderTabNavigation.scope.tabs.browsableSection.browsableTabs"\n              bb-arrow-key-container\n            >\n              <button\n                id="{{\'slider-tab-\' + tab.nameId}}"\n                class="slider-tab-navigation-desktop__tab"\n                ng-click="sliderTabNavigation.goToTab(tab)"\n                analytics-id="{{::tab.analyticsIdPrefix}}.li"\n                bb-arrow-key-destination\n                ng-keydown="sliderTabNavigation.handleTabKeyDown($event, tab)"\n                bb-focus="tab.nameId === sliderTabNavigation.nextTabFocusNameId"\n              >\n                <div class="slider-tab-navigation-desktop__tab-details">\n                  <bb-svg-icon size="medium" icon="{{tab.iconName}}"></bb-svg-icon>\n\n                  <div class="slider-tab-navigation-desktop__browsable-section-title">\n                    {{tab.title}}\n                  </div>\n                </div>\n\n                <i\n                  class="icon-chevron-right slider-tab-navigation-desktop__tab-navigation-icon"\n                  ng-class="{\'slider-tab-navigation-desktop__tab-navigation-icon_is-rtl\': sliderTabNavigation.isRTL}"\n                  role="presentation"\n                >\n                </i>\n              </button>\n            </li>\n          </ul>\n        </div>\n\n        <bb-guidance\n          class="guidance-element-overlay slider-tab-navigation-desktop__browsable-section-guidance"\n          component-key="components.directives.slider-tab-navigation.ftue.browsable-tabs"\n        >\n          <div ng-if="!sliderTabNavigation.isStudent">\n            <div class="slider-tab-navigation-desktop__browsable-section-guidance-title" bb-translate>\n              components.directives.slider-tab-navigation.ftue.instructor-title\n            </div>\n            <span class="slider-tab-navigation-desktop__browsable-section-guidance-message" bb-translate>\n              components.directives.slider-tab-navigation.ftue.instructor-message\n            </span>\n          </div>\n\n          <div ng-if="sliderTabNavigation.isStudent">\n            <div class="slider-tab-navigation-desktop__browsable-section-guidance-title" bb-translate>\n              components.directives.slider-tab-navigation.ftue.student-title\n            </div>\n            <span class="slider-tab-navigation-desktop__browsable-section-guidance-message" bb-translate>\n              components.directives.slider-tab-navigation.ftue.student-message\n            </span>\n          </div>\n        </bb-guidance>\n      </div>\n    </div>\n\n    <div class="slider-tab-navigation-desktop__browsable-main-section" ng-if="sliderTabNavigation.activeTab">\n      <div class="slider-tab-navigation-desktop__browsable-section-header">\n        <button\n          analytics-id="{{::sliderTabNavigation.activeTab.analyticsIdPrefix}}.activeTab.goBack.button"\n          ng-click="sliderTabNavigation.goBack()"\n          ng-if="sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId"\n          class="slider-tab-navigation-desktop__browsable-section-go-back"\n          ng-keydown="sliderTabNavigation.handleBackArrowKeyDown($event)"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.slider-tab-navigation.ax-only.back-arrow\'}"\n        >\n          <bb-svg-icon size="medium" icon="back-arrow"></bb-svg-icon>\n        </button>\n\n        <div\n          class="slider-tab-navigation-desktop__browsable-section-details"\n          ng-class="{\'slider-tab-navigation-desktop__browsable-section-details_is-active\': sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId}"\n        >\n          <bb-svg-icon size="medium" icon="{{sliderTabNavigation.activeTab.iconName}}"></bb-svg-icon>\n\n          <h2\n            ng-if="sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.browsableSection.main.nameId"\n            tabindex="-1"\n            class="slider-tab-navigation-desktop__browsable-section-title slider-tab-navigation-desktop__browsable-section-title_is-header"\n          >\n            {{sliderTabNavigation.activeTab.title}}\n          </h2>\n\n          <h1\n            ng-if="sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId"\n            bb-focus\n            tabindex="-1"\n            class="slider-tab-navigation-desktop__browsable-section-title slider-tab-navigation-desktop__browsable-section-title_is-header"\n          >\n            {{sliderTabNavigation.activeTab.title}}\n          </h1>\n        </div>\n      </div>\n\n      <div ng-if="!sliderTabNavigation.showLoader" class="slider-tab-navigation-desktop__browsable-section-content">\n        <div ui-view="slider-tab-navigation-view@"></div>\n        <div ng-if="sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId" tabindex="0" ng-focus="sliderTabNavigation.handleLastElementFocus()"></div>\n      </div>\n      <div ng-if="sliderTabNavigation.showLoader" class="spinner bb-secondary-color-2"></div>\n    </div>\n  </div>\n</div>\n'},jOWO:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("SBxA"),s="ultra.components.directives.bbUiIcon.Survey";Object(i.a)(o.a,s,"bbUiIconSurvey")},jagb:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-custom-arrow-down",use:"icon-custom-arrow-down-usage",viewBox:"0 0 9 9",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" id="icon-custom-arrow-down"><path fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M1 3.41l3.524 3.18L8 3.41" /></symbol>'});o.add(s);e.exports=s},jlIo:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-code",use:"icon-small-code-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-code"><path d="M4 3L1 8l3 5M12 3l3 5-3 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},kC07:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return J})),n.d(t,"a",(function(){return Z}));var i=n("D57K"),o=(n("DXZ4"),n("vgq2"),n("v0wN"),n("LC/l"),n("rElr"),n("lwNT"),n("ZKRZ"),n("yCl+"),n("gW+2"),n("/oLk"),n("8sWK"),n("gORw"),n("TOu5"),n("nsO7")),s=n("wHJ2"),a=n("yC9S"),r=n("+O05"),c=n("FpRh"),l=n("laCM"),d=n("cs5G"),u=n("nYZ0"),p=n("bhWV"),m=n("xAaQ"),h=n("ga7A"),g=n("z+6U"),b=n("Fvsw"),f=n("Et3n"),v=n("5Tom"),y=n("Qbdf"),w=n("X455"),C=n("bF8R"),S=n("UioO"),k=n("jhBu"),I=n("Oyr+"),D=n("ujI6"),E=n("0JpG"),O=n("vhkR"),T=n("w9Zy"),$=n("r6lH"),A=n("lEL+"),x=n("Tn43"),P=n("lmMM"),G=n("4nF1"),L=n("IWgv"),R=n("LecS"),M=n("UGfE"),j=n("VdDF"),_=n("Ocaa"),B=n("Sa5G"),F=n("oi1r"),N=n("pjml"),V=n("JNtI"),z=n("0rzL"),U=n("nmzr"),H=n("TnpK"),q=n("r/An"),K=n("aTRN"),W=n("+4Px"),Q=n("BLb8"),J="ultra.directives.contentItemBase",Z="base-content-item",Y=function(){function t(e,t,n,i,s,r,c,l,d,u,p,m,h,g,b,f,v,y,w,C){var S=this;this.$q=e,this.$rootScope=t,this.element=n,this.scope=i,this.CourseModel=s,this.schemaService=r,this.contentService=c,this.contextService=l,this.contextCourse=d,this.contextCourseMembership=u,this.courseContentService=p,this.entitlementService=m,this.localizeService=h,this.ltiService=g,this.offcanvasService=b,this.telemetryService=f,this.timeoutService=v,this.ultraState=y,this.allyService=w,this.courseLinkContentHandler=N.r.ContentHandler.CourseLink,this.disableRestricted=!1,this.displayTelemetryUserActivity=!1,this.displayTelemetryDiscussionActivity=!1,this.entitledToDesignAssessment=!1,this.isModifyPermissionLoaded=!1,this.isGettingConfirmationOptions=!1,this.displayGradeInfo=!1,this.isLate=!1,this.scope.shouldShowContent=!0,this.canViewGroups=this.entitlementService.isEntitled(B.v.ViewGroups),this.hasViewGroupsAsAdmin=this.entitlementService.isEntitled(B.v.ViewGroupsAsAdmin),this.courseId=d.courseId?d.courseId:this.ultraState.params.courseId,this.conditionalRelease=C.instantiate(K.a,{scope:i}),this.scope.content.$then((function(e){S.entitlementService.hasAnyCourseEntitlement([B.j.ModifyAssessment,B.j.ViewAssessment],e.courseId).then((function(t){if(S.entitledToDesignAssessment=t,S.isModifyPermissionLoaded=!0,e.canHaveAttempts()&&!S.entitledToDesignAssessment&&e.contentDetail){var n=e.getAssociatedGradingColumn(),i=s.$new(e.courseId).gradebook.columns.$buildRaw(n);S.scope.gradingColumn=i;(S.displayGradeInfo?S.courseContentService.loadContentAndGrades({course:S.CourseModel.$buildRaw({id:e.courseId}),content:e,column:i}):S.$q.when({courseContent:e,gradingColumn:i})).then((function(e){S.displayGradeInfo&&S.scope.gradingColumn.isLate()&&(!e.gradeDetail||e.gradeDetail.ui.attempt.isInProgress())&&(S.isLate=!0),S.isGradeLoaded=!0,e.gradeDetail&&e.gradeDetail.column.id===i.id&&(S.scope.gradeDetail=e.gradeDetail)}))}else S.isLate=!1,S.isGradeLoaded=!0})),S.entitlementService.hasAnyCourseEntitlement([B.u.ViewGrades],e.courseId).then((function(e){S.canViewQuestionAnalysis=e})),S.contextService.getSystemInfo().$asPromise().then((function(e){e.telemetryEnabled&&(S.telemetryService.determineContentSupportsActivityData(S.scope.content).then((function(e){S.displayTelemetryUserActivity=e&&!S.contextCourseMembership.isStudentMembership()})),S.displayTelemetryDiscussionActivity=S.shouldShowDiscussionAnalytics()&&!S.contextCourseMembership.isStudentMembership())})),S.allyService.isAvailable().then((function(e){e&&S.allyService.isAllySupportedContentItem(S.scope.content)?(S.canShowAlly=!0,S.updateAlly()):S.canShowAlly=!1})),i.content.title||N.r.ContentHandler.UltraAssignment.isEqualTo(S.scope.content.contentHandler)||N.r.ContentHandler.TestLink.isEqualTo(S.scope.content.contentHandler)||S.localizeService.loadBundle("features/course/content/course-content").then((function(){i.content.title=S.localizeService.translateSync({locale:S.localizeService.getLocale(S.scope),key:"course.content.contentTitlePlaceholder"})}));var t=function(e){e.getLinkContentSource().$then((function(e){S.targetContent=e,S.contentHandler=e.contentHandler&&e.contentHandler.toString()}),(function(t){403===t.$response.status&&o.remove(S.scope.contents,(function(t){return t.$pk===e.$pk}))}))};S.scope.$watch("::content.id",(function(){if(N.r.ContentHandler.CourseLink.isEqualTo(S.scope.content.contentHandler))if(S.scope.content.contentDetail)t(S.scope.content);else var e=S.scope.$watch("content.isConditionalReleaseUnlocked()",(function(n){n&&(t(S.scope.content),e())}))})),Object(Q.c)(S.scope,(function(e,t){S.scope.content.isConditionalReleaseLocked()&&S.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(Q.d)(S.scope,t)})),Object(Q.b)(S.scope,(function(e){S.scope.content.isConditionalReleaseLocked()&&Object(Q.d)(S.scope)})),a.b.OnRootScope(S.scope,"grade-attempt",(function(e,t,n){S.scope.content.id===t&&(S.scope.gradeDetail=n)})),i.content.contentHandler?i.content.isBbPage()?S.contentHandler=N.r.ContentHandler.Document.toString():S.contentHandler=i.content.contentHandler.toString():S.contentHandler=N.r.ContentHandler.Document.toString(),S.disableRestricted=N.r.ContentHandler.PartnerCloud.isEqualTo(S.contentHandler),S.conditionalRelease.getConditions(S.scope.content)})),this.scope.$on("refresh-conditional-release-rules",(function(e,t){S.scope.content.id===t.id&&S.conditionalRelease.getConditions(t)})),this.scope.$on("content-update",(function(e,t){S.scope.content.id!==t.id||S.scope.content.ui.linkSource||(S.scope.content=t),S.scope.content.ui.linkSource&&S.scope.content.ui.linkSource.id===t.id&&(S.scope.content.ui.linkSource=t);var n=S.scope.content.getDueDate();S.scope.dueDate=n&&new Date(n)})),this.scope.$on("bb-update-CR-tooltip",(function(e,t,n,i){t&&(S.conditionalRelease.gradeCriteria&&S.conditionalRelease.gradeCriteria.gradeColumnId)===t.id&&S.conditionalRelease.getConditions(S.scope.content,n,i)})),this.scope.$on("show-override-message",(function(e,t,n){S.scope.content&&S.scope.content.id===n&&(t?(S.scope.shouldShowContent=!1,S.overrideMessage=t):S.scope.shouldShowContent=!0)}));var k=o.once((function(){S.scope.$watch((function(){return S.scope.content.getDueDate()}),(function(e){S.scope.dueDate=e&&new Date(e)}))}));this.scope.$watch("content.contentHandler",(function(){i.content.ui.importPlaceholder||k()})),this.scope.$on("discussion-group-content-update",(function(e,t){S.scope.content&&N.r.ContentHandler.CourseLink.isEqualTo(S.scope.content.contentHandler)&&S.scope.content.contentDetail&&S.scope.content.getLinkContentSource().$then((function(e){e.id===t.id&&S.scope.content.applyGroupSettings(t)}))}))}return t.prototype.isEngagementOutline=function(){return"discussions"===this.scope.contextArea},t.prototype.getDescription=function(){return this.scope.content.systemGeneratedLocalizableDescription?this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:this.scope.content.systemGeneratedLocalizableDescription.languageKey}):this.scope.content.description},t.prototype.getAriaDescribedBy=function(){var e="content-item-icon-"+this.scope.content.id;return this.scope.content.ui.hasIndicator&&(e+=" activity-indicator-"+this.scope.content.id),e},Object.defineProperty(t.prototype,"peerReviews",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment().peerSettings&&this.scope.content.getDeployedAssessment().peerSettings.peerReviewsPerStudent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peerDueDate",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment().peerSettings&&j.a.parseStringToDate(this.scope.content.getDeployedAssessment().peerSettings.peerReviewDueDate)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGrading",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment()&&this.scope.content.getDeployedAssessment().gradingColumn.peerGrading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGradingConfigured",{get:function(){return this.isPeerGrading&&null!=this.peerDueDate&&null!=this.peerReviews},enumerable:!0,configurable:!0}),t.prototype.getDeleteConfirmationKeyAndShowType=function(){var e=this;return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then((function(t){return{confirmationKey:e.scope.content.ui.deleteConfirmationKey,showType:e.scope.content.ui.modalShowType}}))},t.prototype.deleteContent=function(){var e=this;N.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)?this.scope.content.getLinkContentSource().$then((function(t){e._deleteContent(t)})):(this._deleteContent(this.scope.content),this.$rootScope.$broadcast("bb-update-CR-tooltip",this.scope.content.getAssociatedGradingColumn(),"",!0))},t.prototype._deleteContent=function(t){var n=this;N.r.ContentHandler.Discussion.isEqualTo(t.contentHandler)?t.getSoftLinks().$asPromise().then((function(e){e.length?n.$q.all(e.map((function(e){return n.CourseModel.$new(t.courseId).contents.$new(e.courseContent).$fetch().$asPromise().then((function(e){n.$rootScope.$broadcast("deleteContent",e,!1)}))}))).then((function(){n.$rootScope.$broadcast("deleteContent",t)})):n.$rootScope.$broadcast("deleteContent",t)})):this.$rootScope.$broadcast("deleteContent",t);var i=this.element.closest(".js-content-div"),o=i.next(".js-content-div");if(o.length>0)o.find(".js-content-item-base").first().find(".content-title").focus();else{var s=i.prev(".js-content-div");if(s.length>0)s.find(".js-content-item-base").first().find(".content-title").focus();else{var a=i.closest(".folder");a.length>0?a.find(".js-content-item-base").first().find(".content-title").focus():this.timeoutService((function(){e(".js-create").focus()}),this.scope.$root,0,!1)}}},t.prototype.hasSupportedConversation=function(){return!!this.scope.content.hasConversation()&&G.a.create(this.scope.content).supportsConversations()},t.prototype.shouldShowAlertIcon=function(){return this.isLate||this.scope.content.canViewAsInstructor()&&this.isUnlaunchableLtiLink()},t.prototype.shouldShowDiscussionAnalytics=function(){return this.scope.content.contentHandler&&B.g.Discussion.isEqualTo(G.a.create(this.scope.content).viewHandler())},t.prototype.shouldShowScormAnalysisReport=function(){return this.scope.content&&this.entitlementService.isEntitled("course.gradebook.MODIFY",this.scope.content.courseId||this.courseId)&&this.scope.content.isScorm()&&this.scope.content.hasReport()},t.prototype.isUnlaunchableLtiLink=function(){return this.scope.content.id&&this.scope.content.getContentDisplay().isLtiLink()&&!this.scope.content.getContentDisplay().isXplorLtiLink()&&!this.ltiService.getLaunchLinkFromContent(this.scope.content)},t.prototype.showVisibility=function(){return!this.isUnlaunchableLtiLink()},t.prototype.usesEditButton=function(){var e=this.scope.content.getContentDisplay();return e.usesEditButton()&&e.canUseEditButton()},t.prototype.openEditContentPanel=function(){this.ultraState.goPeekState(this.scope.content.getContentDisplay().getEditState(),this.scope.content.getContentDisplay().getEditStateParams())},t.prototype.updateContentVisibility=function(){this.targetContent&&this.scope.content?(this.targetContent.applyAvailabilitySettings(this.scope.content),this._updateVisibility(this.targetContent),this._updateVisibility(this.scope.content)):this.scope.content&&this._updateVisibility(this.scope.content)},t.prototype._updateVisibility=function(e){var t=this;e.visibility=this.contentService.determineVisibility(e.isAvailable);var n=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],i=e.getAssociatedGradingColumn();i&&(i.visible=e.isAvailable,n.push("contentDetail")),e.withParams({fields:"id"}).$save(n).$asPromise().then((function(){t.$rootScope.$broadcast("content-update",e)}))},t.prototype.updateAlly=function(){this.canShowAlly&&this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content))},t.prototype.getOverflowMenu=function(){var e=this;return[{icon:"draw",labelKey:"global.edit",show:function(){var t=e.isGettingConfirmationOptions?e.lastIsEditButtonShow:e.usesEditButton();return e.lastIsEditButtonShow=t,t},onClick:this.openEditContentPanel.bind(this)},{icon:"conversation",labelKey:"components.directives.content-item-base.overflow-menu.open-conversation",show:this.hasSupportedConversation.bind(this),onClick:function(){e.ultraState.goPeekState("conversations",{courseId:e.scope.content.courseId,contentId:e.scope.content.id})}},{icon:"beast-analytics",labelKey:"components.directives.content-item-base.overflow-menu.student-activity",show:function(){return e.displayTelemetryUserActivity&&!e.isAnonymouslyGraded()},onClick:function(){e.ultraState.goPeekState(U.TelemetryRoutes.CONTENT_ACTIVITY_IN_DETAIL,{contentId:e.scope.content.id})}},{icon:"beast-analytics",uniqueId:"scorm-analytics-report",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:function(){return e.shouldShowScormAnalysisReport()&&!e.contextCourseMembership.isStudentMembership()},onClick:function(){e.ultraState.goPeekState("scorm-analytics-report",{courseId:e.scope.content.courseId,contentId:e.scope.content.id})}},{icon:"beast-analytics",uniqueId:"discussion-insights",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:function(){return e.displayTelemetryDiscussionActivity},onClick:function(){var t=e.scope.content.contentDetail["resource/x-bb-courselink"]?e.scope.content.contentDetail["resource/x-bb-courselink"].linkSourceId:e.scope.content.id;e.ultraState.goPeekState(U.TelemetryRoutes.DISCUSSION_FORUM_INSIGHTS,{contentId:t,forumContentId:e.scope.content.id})}},{icon:"question-analysis",labelKey:"components.directives.content-item-base.overflow-menu.question-analysis",show:function(){return e.canViewQuestionAnalysis&&e.scope.content.isQuestionAnalysisAvailable()},onClick:function(){e.ultraState.goPeekState("question-analysis.report",{qaContentId:e.scope.content.id})}},{icon:"trash",labelKey:"global.delete",show:function(){return e.scope.content.canDelete()},disable:function(){return e.scope.content.isInForcedSequenceModule()},disableInfo:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"course.content.deleteDisabledDueToFS"}),onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return e.isGettingConfirmationOptions=!0,e.getDeleteConfirmationKeyAndShowType().then((function(t){var n=t.confirmationKey.replace(/^resource\//,"");return e.isGettingConfirmationOptions=!1,e.$q.when(V.a(n))}))}}},{icon:"download",labelKey:"ally.context_menu.download_original_file",show:function(){return e.canShowAlly},onClick:function(){window.open(e.scope.content.getContentDisplay().contentUrl(),"_blank")}},{labelKey:"ally.context_menu.view_accessibility_score",icon:"ally-indicator-unscored",show:function(){return e.canShowAlly},onClick:function(){},additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"instructorfeedback",style:"display:none;",onkeydown:"(function(e) {\n              if (e.keyCode === "+W.f+" || e.keyCode === "+W.t+') {\n                $(e.target).closest("li").click();\n              }\n              })(event)'}},{icon:"ally-alt-formats",labelKey:"ally.context_menu.download_alternative_formats",show:function(){return e.canShowAlly},onClick:function(){},additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"alternativeformats",style:"display:none;",onkeydown:"(function(e) {\n                if (e.keyCode === "+W.f+" || e.keyCode === "+W.t+') {\n                 $(e.target).closest("li").click();\n                }\n              })(event)'}}]},Object.defineProperty(t.prototype,"deployedAssessment",{get:function(){return this.scope.content&&this.scope.content.getDeployedAssessment()},enumerable:!0,configurable:!0}),t.prototype.isAnonymouslyGraded=function(){var e=this.scope.content.getAssociatedGradingColumn();return e&&e.anonymousGrading},t.prototype.editGroups=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.scope.content.id,this.scope.content.isAssignment()||this.scope.content.isTest()?(e=this.deployedAssessment.gradingColumn.id,[3,3]):[3,1];case 1:return e=this.scope.gradeColumn&&this.scope.gradeColumn.id,N.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.contentDetail?[4,this.scope.content.getLinkContentSource().$asPromise()]:[3,3];case 2:n=i.sent(),t=n.id,i.label=3;case 3:return this.ultraState.goPeekState("course-group",{groupCourseId:this.scope.content.courseId||this.ultraState.params.courseId,groupContentId:t,groupColumnId:e}),[2]}}))}))},t.prototype.showOverflowMenu=function(){var e=this.scope.content;return e.canDelete()||e.canViewAsInstructor()||this.usesEditButton()||e.hasConversation()||this.canShowAlly&&!e.isConditionalReleaseLocked()},t.prototype.openAssessmentItem=function(){r.a.isExternalSubmissionsAssessment(this.scope.content)?this.ultraState.goPeekState("assessment.external-overview",{contentId:this.scope.content.id}):this.ultraState.goPeekState("assessment.overview",{contentId:this.scope.content.id})},t.prototype.markCompleted=function(){this.contextCourseMembership.isActAsInstructorMembership()||this.scope.content.state===N.r.StateType.Completed||this.scope.content.updateState(N.r.StateType.Completed,!0)},t.prototype.getRootClassName=function(){return Z},t.$inject=["$q","$rootScope","element","scope",N.o.serviceName,F.b,u.f,b.b,y.e,w.d,C.b,k.b,E.serviceName,O.c,T.e,$.b,A.b,H.d,d.b,"$injector"],t}(),X=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.scope={content:"=",contents:"=",contextArea:"=",canMove:"="},this.template=q,this.link=function(e,n){e.contentItemBase=t.$injector.instantiate(Y,{scope:e,element:n}),e.$on(I.e,(function(t,i,o,s){s===I.c.FileDrop&&e.content===o.content&&(o.targetElement=n.find(".bb-progress"),e.$root.$broadcast(I.e,i,o,e.content.ui.fileUploadId,o.targetElement,I.c.LinkProgress))}))}}return e.$inject=["$injector"],e}();s.module(J,[p.a,m.a,h.a,g.a,S.a,f.a,v.b,O.b,T.d,P.d,L.a,M.a,R.a,_.a,D.c,E.moduleName,u.d,C.a,F.a,V.b,z.a,x.a,c.a,l.a]).directive("bbContentItemBase",["$injector",function(e){return e.instantiate(X)}])}).call(this,n("5iHu"))},kN1T:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var i=n("D57K"),o=n("wHJ2"),s=n("nsO7"),a=n("0JpG"),r=n("LN5R"),c=n("BMpZ"),l=n("o5Lu"),d=n("lEL+"),u=n("jhBu"),p=n("dF44"),m=n("+4Px"),h=n("qH3X"),g=n("s1u2"),b=n("6PP7"),f=n("cbVV"),v=n("TmUJ"),y=n("LTOG"),w=n("aHpC"),C=n("Sa5G"),S="ultra.components.directives.gradeGridColumnHeaderReborn",k=function(t){function n(n,i,o,a,r,c,l,d,u,g){var b=t.call(this,i,d)||this;return b.rootScope=n,b.element=o,b.attrs=a,b.$compile=r,b.gradeGridRebornController=c,b.grade=l,b.bbLocalize=u,b.entitlementService=g,b.initializeEventHandler(),b.toolAvailable=!0,b.menuScope=i.$new(!0),Object.defineProperty(i,"possible",{get:function(){return b.possible}}),i.$watch("col",(function(e){i.columnMetadata=e.data,b.col=e,s.debounce((function(){return b.highlight(b.col)}),1e3)(),b.element.data("col",b.col),i.isGroupTest=b.col instanceof f.h,i.showAlertIcon=function(){return i.columnMetadata.getNumMissingIfLate()>0},b.element.find(".content").removeClass("is-active"),c.activeColumnId===e.id&&b.element.find(".content").addClass("is-active"),i.columnMetadata.isAttendance()&&!c.attendanceIsAvailable&&(b.toolAvailable=!1)})),i.$on(h.a.FOCUSIN_CELL,(function(e,t){t.columnId===b.col.id&&(b.gradeGridRebornController.getElement().find(".is-active").removeClass("is-active"),b.toolAvailable&&b.element.find(".content").addClass("is-active"))})),i.$on(h.a.FOCUSOUT_CELL,(function(e,t){t.columnId===b.col.id&&b.element.find(".content").removeClass("is-active")})),i.$on(p.b.CELL_FOCUSED,(function(){o.find(".content").focus()})),o.find(".content").on("keydown",(function(t){if(t.keyCode===m.g)b.scope.$emit(p.b.LEAVE_GRID);else{if(!m.y(t))return;e(t.target).click()}t.preventDefault(),t.stopPropagation()})),o.find(".content").on("keyup",(function(e){m.y(e)&&(e.preventDefault(),e.stopPropagation())})),b}return Object(i.__extends)(n,t),n.prototype.initializeEventHandler=function(){var e=this;this.element.find(".content-header-bg").focusin((function(){e.focusin()})).focusout((function(){e.focusout()}))},n.prototype.focusin=function(){this.rootScope.$broadcast(h.a.FOCUSIN_CELL,{columnId:this.col.id})},n.prototype.focusout=function(){this.rootScope.$broadcast(h.a.FOCUSOUT_CELL,{columnId:this.col.id})},Object.defineProperty(n.prototype,"possible",{get:function(){if(this.scope.columnMetadata&&!s.isUndefined(this.scope.columnMetadata.possible))return Math.round(100*this.scope.columnMetadata.possible)/100},enumerable:!0,configurable:!0}),n.prototype.popupMenu=function(t){var n=this,i="grade-grid-column-header-menu-reborn-"+this.col.id,o=this.grade.canPostGrades(this.col.gridData.course,this.col.data);if((!this.isGroupContent()||this.hasEntitlementsToViewGroups())&&!this.gradeGridRebornController.isMenuExisting(i)&&this.toolAvailable){var s=e(t.target).closest(".grade-grid-header-cell").offset();s.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.canPostGrades=o,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=function(e){var t=s.left+e.width(),i=n.gradeGridRebornController.getGradeGridContainerElementRight();t>i&&(s.left-=t-i+Object(v.a)()),e.offset(s)},this.gradeGridRebornController.popupMenu(i,b,this.menuScope),this.timeout((function(){var e=n.gradeGridRebornController.getPopupMenu();e.on("keydown",(function(t){t.keyCode===m.g||t.keyCode===m.u?(e.data("destroy")(),n.scope.$emit(p.b.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):m.y(t)&&n.scope.$emit(p.b.CELL_FOCUSED)})),n.gradeGridRebornController.getMenuitems().first().focus()}),this.menuScope,0,!1),t.preventDefault(),t.stopPropagation()}},n.prototype.hasEntitlementsToViewGroups=function(){return this.col&&this.entitlementService.isEntitled(C.v.ViewGroups,this.col.getCourse().id)},n.prototype.isGroupContent=function(){return this.col&&this.col instanceof f.g&&null!==this.col.groups||this.col.data&&this.col.data.groupContent},n.prototype.isRestricted=function(){return!!this.isGroupContent()&&!this.hasEntitlementsToViewGroups()},n.prototype.getToolTipTemplate=function(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'},n.prototype.getSchemaText=function(){var e=this,t="components.directives.grade.grid.points.plural";if(this.scope.columnMetadata&&this.scope.columnMetadata.isScorm()){var n=this.scope.columnMetadata.ui&&this.scope.columnMetadata.ui.content||null,i=n&&n.getScormGradebookItems()||[],o=i&&i.find((function(t){return t.columnId===e.scope.columnMetadata.id}));t="course.content.scorm.settings.gradeSchema."+(o&&o.scoringMethod&&o.scoringMethod.toString().toLowerCase()||"score")+"Overview.plural"}return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:t,params:{point:this.possible,count:this.possible},noWrap:!0})},n.$inject=["$rootScope","scope","element","attrs","$compile","gradeGridRebornController",l.h,d.b,a.serviceName,u.b],Object(i.__decorate)([Object(w.d)("possible","locale","columnMetadata.scoreProviderHandle")],n.prototype,"getSchemaText",null),n}(y.a),I=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=g,this.scope=!0,this.require="^"+r.a,this.link=function(e,n,i,o){e.gradeGridColumnHeaderReborn=t.$injector.instantiate(k,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();o.module(S,[c.a]).directive("bbGradeGridColumnHeaderReborn",["$injector",function(e){return e.instantiate(I)}])}).call(this,n("5iHu"))},kbFs:function(e,t,n){},kgZF:function(e,t,n){},kkz3:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu student-card" tabindex="-1">\n  <div class="student-info">\n    <bb-user-avatar class="avatar" user="user"></bb-user-avatar>\n    <div class="info">\n      <bb-username class="ellipse username" user="user" auto-update="true" title="{{fullName}}" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n      <div class="profile ellipse" ng-if="user.userName && !user.studentId" title="{{user.userName}}">{{user.userName}}</div>\n      <div class="profile ellipse" ng-if="!user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n      <div class="profile ellipse" ng-if="user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ username: user.userName, studentId: user.studentId }">components.directives.usercard.usernameAndId</div>\n      <div class="profile" ng-bind="courseRole"></div>\n    </div>\n  </div>\n</div>\n'},"kp/p":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return k}));var i=n("D57K"),o=n("wHJ2"),s=n("0JpG"),a=n("TnpK"),r=n("hkqm"),c=n("sgjL"),l=n("lEL+"),d=n("g66W"),u=n("12mu"),p=n("Oyr+"),m=n("o5Lu"),h=n("yC9S"),g=n("en1n"),b=n("nsO7"),f=n("WAgA"),v=n("o9hD"),y=n("NZ4S"),w=n("0BVo"),C="ultra.features.course.grades.gradesUploadSettings.controller",S="refresh-after-upload",k=function(){function t(t,n,i,o,s,a,r,c,l,u,m){var f=this;this.$scope=t,this.$rootScope=n,this.postMessageDispatcher=i,this.timeoutService=o,this.course=s,this.ultraState=a,this.toast=r,this.modalService=c,this.contentCollectionAvailability=l,this.bbLocalize=u,this.grade=m,this.confirmedToClose=!1,this.fileName="",this.hasDroppedClass=!1,this.selectAll=!1,this.showErrorDetail=!1,this.afterImported=!1,this.showContentCollection=!1,this.uploadErrorFileTypeTemplate=y,this.invalidUserNames="",this.invalidUserNamesCount=0,this.failedItems="",this.failedItemsCount=0,t.gradesUploadSettings=this,this.showContentCollection=this.contentCollectionAvailability.toolEnabledSetting.isAvailable,this.modalScope=this.$rootScope.$new(),h.b.OnWindow("resize",b.debounce((function(){g.h()&&f.ultraState.leavePeekState(f.ultraState.current.name)}),100),this.$scope),t.$on(p.e,(function(t,n,i,o){if(o===p.c.Uploaded){f.source="LOCAL";var s={source:f.source,name:i.fileName,location:i.fileLocation};f.parseUploadGradebook(s),e(".upload-gradebook-panel .help-link").focus()}})),this.postMessageDispatcher.registerEventHandler("classic-picker-submit",(function(e){var t=e.items[0];if(!/(\.xls|\.csv)$/i.exec(t.linkTitle))return f.showErrorModal(y),!1;f.source="CONTENT_COLLECTION";var n=t&&t.url||"",i=n.substr(n.lastIndexOf("/")),o={source:f.source,name:t.linkTitle||"",location:i};f.parseUploadGradebook(o)}),this.$scope),this.postMessageDispatcher.registerEventHandler("classic-picker-cancel",(function(e,t){f.timeoutService((function(){d.e(f.ultraState.current.name,"peek.content-collection-picker")&&f.closePanel(),window!==t&&t.close()}),f.$scope,0)}),this.$scope),this.uploadAction=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.grades.grades-upload-settings.upload"}),this.completedModalTitleKey=(this.course.isOrganization?"course":"organization")+".grades.grades-upload-settings.courseComplete.title",this.registerStateChangeListener()}return t.prototype.parseUploadGradebook=function(e){var t=this;this.course.gradebook.parseUploadedGradebook(e).then((function(n){if(400===n.$response.status)return t.showErrorModal(f),!1;t.timeoutService((function(){d.e(t.ultraState.current.name,"peek.content-collection-picker")&&t.closePanel()}),t.$scope,0),t.hasDroppedClass=!0,t.invalidUserNames=n.invalidUserNames,t.invalidUserNamesCount=t.invalidUserNames&&t.invalidUserNames.split(",").filter((function(e){return e.trim()})).length,t.fileName=e.name,t.changedList=n.changedList,t.selectAll=!0,t.checkAll(!0)}))},t.prototype.checkAll=function(e){var t=this;this.columnList=[],this.errorColumnList=[],o.forEach(this.changedList,(function(n){if(!n.columnTitle)return!1;n.isError?(n.message.languageKey=n.message.languageKey.replace(/\./g,"_"),n.message.params&&t.getColumnErrorMessage(n.message),n.message.translatedLanguageKey=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(t.$scope),key:n.message.languageKey,params:{data:n.message.detailErrorMessageKey},noWrap:!0,noEscape:!0}),t.errorColumnList.push(n)):(n.checked=e,n.clearGradeOption=n.needOverrideAndAttemptsChoices?"OVERRIDE":"DO_NOTHING",t.updateColumnList(n,n.checked))}))},t.prototype.updateColumnList=function(e,t){t?this.columnList.push(e):this.columnList.splice(this.columnList.indexOf(e),1)},t.prototype.validate=function(){return this.columnList&&this.columnList.length>0},t.prototype.cancelClicked=function(){this.closePanel()},t.prototype.chooseDestination=function(){this.ultraState.goPeekState("content-collection-picker",{pickerType:"File",multi:"false"})},t.prototype.closePanel=function(){this.ultraState.leavePeekState(this.ultraState.current.name)},t.prototype.deleteFile=function(){this.hasDroppedClass=!1,this.columnList=[],this.changedList=[],this.errorColumnList=[],this.selectAll=!1},t.prototype.showErrorModal=function(e){this.modalService.open({scope:this.modalScope,template:e})},t.prototype.confirmToClose=function(){this.confirmedToClose=!0,this.ultraState.leavePeekState(this.ultraState.current.name)},t.prototype.registerStateChangeListener=function(){var e=this;this.stateChangeListener=this.$scope.$on("$stateChangeStart",(function(t,n,i,o,s){n.name.indexOf("grade-upload-setting")<0&&e.hasDroppedClass&&!e.afterImported&&(e.confirmedToClose||(t.preventDefault(),e.$scope.$broadcast("show-confirmation","grades-upload-setting")))}))},t.prototype.importGradebook=function(e){var t=this;if(this.invalidUserNames&&!e)return this.$scope.$broadcast("show-confirmation","grades-upload-continue-with-errors"),!1;var n={changedList:this.columnList};this.course.gradebook.importGradebook(n).then((function(e){if(t.afterImported=!0,"bb-rest-course-is-closed"===e.$response.data.code)return t.showErrorModal(v),!1;e.errorItem?(t.modalScope.failedItems=e.errorItem,t.modalScope.failedItemsCount=e.errorItem&&e.errorItem.split(",").filter((function(e){return e.trim()})).length,t.showErrorModal(w),t.ultraState.leavePeekState(t.ultraState.current.name)):(t.$rootScope.$broadcast(S,e.savedItemsIds),t.ultraState.leavePeekState(t.ultraState.current.name),t.toast.show({messageKey:"course.grades.grades-upload-settings.complete",icon:"icon-check",toastStatus:"success"}))}))},t.prototype.getColumnErrorMessage=function(e){e.params[0].rawValue?e.detailErrorMessageKey=e.params[0].rawValue:e.params.forEach((function(t){e.languageKey===t.localizableMessage.languageKey.replace(/\./g,"_")&&(e.detailErrorMessageKey=t.localizableMessage.params?t.localizableMessage.params[0].rawValue:"")}))},t.$inject=["$scope","$rootScope",c.b,l.b,"currentCourse",a.d,r.b,u.b,"contentCollectionAvailability",s.serviceName,m.h],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(k)}).call(this,n("5iHu"))},lEWr:function(e,t){e.exports='<div class="input-wrapper">\n  <input translate-attrs-values="{userName: gradeGridCellEditorReborn.userName}"\n        bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grid.scoreInputAriaLabel\'}"\n        ng-blur="gradeGridCellEditorReborn.onInputBlur($event)" \n        placeholder="--" ng-model="gradeGridCellEditorReborn.score"\n        ng-click="gradeGridCellEditorReborn.stopPropagation($event)"\n        ng-change="gradeGridCellEditorReborn.onChange()"\n        aria-describedby="totalPoints"\n        ng-keydown="gradeGridCellEditorReborn.onKeydown($event)" spellcheck="false" autocomplete="off"\n        analytics-id="components.directives.grade.gradeGridCellEditorReborn.input.text" />\n</div>\n<div class="possible-wrapper" ng-mousedown="gradeGridCellEditorReborn.mousedown()">\n  <span class="slash"></span><span id="totalPoints" class="possible" ng-bind="col.data.possible"></span>\n</div>'},lLJW:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("4iFr"),s="ultra.components.directives.bbUiIcon.Discussion";Object(i.a)(o.Discussion,s,"bbUiIconDiscussion")},lx16:function(e,t,n){"use strict";n("zhNR"),n("JzsJ"),n("KmIE"),n("VCKY"),n("BiyI"),n("jlIo"),n("qzMN"),n("2i58"),n("Ybms"),n("P2DR"),n("wKTs"),n("vgq2");var i=n("wHJ2"),o=n("D57K"),s=n("dCrD"),a=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return Object(o.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(s.a),r=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return Object(o.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(s.a),c=n("Sa5G"),l=n("aHpC"),d=n("c7N/"),u=function(e){function t(t,n,i){var o=e.call(this,t,n,i)||this;return o.canEditUnsafeHtml=!1,o.isCloudServiceAvailable=!1,o.initializeItems=function(){o.items=[{key:"addText",className:"js-add-content",name:o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.add-content-button.addContent"}),iconProps:{iconName:"notes",iconSize:"small"},onClick:o.addTextBlock}],o.canEditUnsafeHtml&&o.items.push({key:"addHtml",className:"js-add-html",name:o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.add-content-button.addHtml"}),iconProps:{iconName:"code",iconSize:"small"},onClick:o.addHtmlBlock}),o.items.push({key:"addLocalFile",className:"js-add-local-file",name:o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.add-content-button."+(o.isMobile?"uploadFromDevice":"uploadFromComputer")}),iconProps:{iconName:"upload-file",iconSize:"small"},onClick:o.uploadLocalFile}),o.isCloudServiceAvailable&&o.items.push({key:"addCloudFile",className:"js-add-cloud-file",name:o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.add-content-button.uploadFromCloudStorage"}),iconProps:{iconName:"upload-cloud",iconSize:"small"},onClick:o.uploadCloudFile})},o.addTextBlock=function(){o.scope.$emit("bb-bbml-editor-add-block",c.d.Text,o.getInsertLocationData())},o.addHtmlBlock=function(){o.scope.$emit("bb-bbml-editor-add-block",c.d.Html,o.getInsertLocationData())},o.uploadLocalFile=function(){o.element.find(".file-upload-button").click()},o.uploadCloudFile=function(){o.element.find(".js-upload-from-kloudless").click()},o.focusAddButton=function(){o.element.find("button").focus()},o.$q=t.get("$q"),o.unsafeHtmlService=t.get(d.b),o.initialize(),o}return Object(o.__extends)(t,e),t.prototype.initialize=function(){var e=this;return this.$q.all({canEditUnsafeHtml:this.unsafeHtmlService.canEditUnsafeHtml(),isCloudServiceAvailable:this.isCloudServiceAvailablePromise}).then((function(t){var n=t.canEditUnsafeHtml,i=t.isCloudServiceAvailable;e.canEditUnsafeHtml=n,e.isCloudServiceAvailable=i})).finally(this.initializeItems)},t=Object(o.__decorate)([Object(o.__param)(0,Object(l.b)("$injector")),Object(o.__param)(1,Object(l.b)("scope")),Object(o.__param)(2,Object(l.b)("element"))],t)}(s.a),p=n("HjsN"),m=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return Object(o.__extends)(t,e),t.prototype.addGroup=function(){this.toggleMenu();var e=this.scope.positionBefore?this.scope.positionBefore():this.scope.positionAfter()+1;this.scope.createFunction(e),this.closeMenu()},t.$inject=["$injector","scope","element"],t}(s.a),h=n("ZkU4"),g=function(e){function t(t,n,i){var o=e.call(this,t,n,i)||this,s=i.closest("[data-base-state-name]").data("baseStateName");return o.$q.all([o.ultraState.peekHref("grade-item.create",o.getInsertLocationData(),s),o.ultraState.peekHref("gradebook-item.calculation",o.getInsertLocationData(),s),o.ultraState.peekHref("attendance",null,s)]).then((function(e){o.attendanceHref=e[2],o.items=[{key:"addGradebookItem",href:e[0],className:"doc-add-grade",name:o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.grade.grader-column.actions.addItem"}),iconProps:{iconName:"add",iconSize:"small"}},{key:"addCalculation",href:e[1],className:"doc-add-calc",name:o.bbLocalize.translateSync({locale:o.bbLocalize.getLocale(o.scope),key:"components.directives.grade.grader-column.actions.addCalculation"}),iconProps:{iconName:"calculation",iconSize:"small"}}],o.addOrRemoveAddAttendanceMenuItem()})),n.$on("always-show-time-expires",(function(){n.addContentButton.alwaysShow=!1})),n.$on("update-content-menu",(function(){o.items&&o.addOrRemoveAddAttendanceMenuItem()})),o}return Object(o.__extends)(t,e),t.prototype.addOrRemoveAddAttendanceMenuItem=function(){var e=null==this.scope.showAddAttendance||!this.scope.showAddAttendance(),t=this.doesMenuItemExistByKey("addAttendance");e?this.removeMenuItemByKey("addAttendance"):t||this.addAttendanceMenuItem()},t.prototype.doesMenuItemExistByKey=function(e){return this.items.some((function(t){return t.key===e}))},t.prototype.removeMenuItemByKey=function(e){this.items=this.items.filter((function(t){return t.key!==e}))},t.prototype.addAttendanceMenuItem=function(){this.items.push({key:"addAttendance",href:this.attendanceHref,className:"doc-add-attendance",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addAttendance"}),iconProps:{iconName:"attendance",iconSize:"small"}})},t.$inject=["$injector","scope","element"],t}(s.a),b=n("J8YL"),f=n("tTiy"),v=n("1Niw"),y=n("UeHE"),w=n("9hp7"),C=n("SE1T"),S=n("6xt4"),k=n("07HN"),I=function(){function e(e){this.$injector=e,this.handlersAndTemplateTexts={assignment:{handler:a,templateText:b},attempts:{handler:r,templateText:f},"bbml-editor":{handler:u,templateText:v},"cloud-upload":{handler:p.b,templateText:y},"course-group":{handler:m,templateText:C},"course-outline":{handler:h.a,templateText:S},grades:{handler:g,templateText:k}}}return e.prototype.getTemplateText=function(e){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");if(null==this.handlersAndTemplateTexts[e].templateText)throw new Error("No template for context area: "+e);return w.replace("<template></template>",this.handlersAndTemplateTexts[e].templateText)},e.prototype.getHandler=function(e,t,n){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");return this.$injector.instantiate(this.handlersAndTemplateTexts[e].handler,{scope:t,element:n})},e.$inject=["$injector"],e}(),D=n("2E9T"),E=n("+e2k"),O="ultra.components.directives.content.buttonAddContent",T=function(){function e(){this.restrict="C",this.template=D}return e.$inject=["$injector"],e}();i.module(O,[E.a]).directive("buttonAddContent",["$injector",function(e){return e.instantiate(T)}]);var $=n("0JpG"),A=n("qgBt"),x=n("IR+Z"),P=n("H/mg"),G=n("nYZ0"),L=n("3Jgm"),R=n("TnpK");n.d(t,"a",(function(){return M}));var M="ultra.directives.addContentButton",j=function(){function e(e,t,n){var i=this;this.$injector=e,this.$rootScope=t,this.ultraState=n,this.compiled=Object.create(null),this.restrict="E",this.scope={attachHandler:"=?",disableDrag:"&?",content:"=",createFunction:"=?",hideDividerLines:"&?",rootContent:"&?",contextArea:"=",alwaysShow:"=",showAddAttendance:"&?",showBothButtons:"&?",showMenuOverride:"=",positionBefore:"&?",positionAfter:"&?",parentId:"&",depth:"&",canCreateAllContents:"=?",canCopyImport:"=?",folderNestedButton:"&?",fileLocation:"@?",webLocation:"@?",initialUpload:"&?",primaryKey:"&?",ignoredStates:"&?",itemName:"&?",itemType:"&?",itemIndex:"&?",isButtonLocationChangable:"<?",isRenderByDefault:"&?"},this.compile=function(){return function(e,t){var n;n=e.contextArea?e.contextArea:e.$parent.contextArea?e.$parent.contextArea:"course-outline";var o=i.$injector.instantiate(I,{});null==i.compiled[n]&&(i.compiled[n]=i.$injector.get("$compile")(o.getTemplateText(n))),e.addContentButton=o.getHandler(n,e,t),e.fileListViewId="fileListView-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.fileListViewLocalId=e.fileListViewId+"Local",i.compiled[n](e,(function(e,n){t.append(e)})),i.$rootScope.$broadcast("add-content-button-ready")}}}return e.$inject=["$injector","$rootScope",R.d,G.f],e}();i.module(M,["ngAnimate",O,x.a,$.moduleName,A.a,P.a,G.d,L.a,R.b,d.a]).directive("bbAddContentButton",["$injector",function(e){return e.instantiate(j)}])},m2KQ:function(e,t){e.exports='<div class="grade-input-wrapper" ng-class="{\'has-validation-error\': !!gradeInput.form[gradeInput.id].$invalid}">\n  <div class="left">\n    <bb-inline-validation\n      show-error="!!gradeInput.form[gradeInput.id].$invalid"\n      bb-translate-attrs="{ \'error-message\': errorMessageKey }"\n      ng-show="!gradeInput.isRubricEvalMode()">\n      <div ng-class="{\'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown(), \'is-in-progress\': gradeInput.isInProgressShown(), \'group-grade-input\': !!forGroup}"\n           class="wrapping-input-style" data-dropdown="performanceCodes-{{gradeInput.id}}">\n        <div bb-foundation-defer>\n\n          <input name="{{gradeInput.id}}" autocomplete="off" ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}"\n                 pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px"  pu-elastic-input-width-delta="8"\n                 type="text" placeholder="--"\n                 bb-translate-attrs="{ \'aria-label\': gradeInput.getGradeInputAriaLabelKey() }"\n                 translate-attrs-values="{ user: forUser, group_name: forGroup && forGroup.title, grade: gradeInput.gradeDisplayItem.displayValue, total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}"\n                 ng-model="gradeInput.gradeDisplayItem.displayValue" ng-readonly="gradeInput.isReadOnly()"\n                 title="{{gradeInput.gradeDisplayItem.perfCodeDesc}}"\n                 ng-blur="gradeInput.onBlur($event)" ng-change="gradeInput.gradeValueOnChange()" ng-focus="gradeInput.onFocus()"\n                 class="js-grade-input" analytics-id="directives.grade-input.grade.display.item.input"\n                 aria-invalid="{{!!gradeInput.form[gradeInput.id].$invalid ? \'true\' : \'false\'}}"\n                 aria-describedby="{{!!gradeInput.form[gradeInput.id].$invalid ? gradeInput.getAriaDescribeById(): undefined}}">\n        </div>\n\n        \x3c!--TOTAL POINTS--\x3e\n        \x3c!-- Fix ULTRA-15280.\n        If there is gradeDetail, we should use its pointsPossible as the total.\n        If there is no gradeDetail, which means it is not graded yet, there are tow cases:\n         for overall grade (and calculations), we use the default value 100,\n         for common column, assignment, etc. we use column.possible. --\x3e\n        <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n              translate-values="{total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}">\n          components.directives.grade.grade-input.points\n        </span>\n      </div>\n      <div class="alert-icon" ng-if="!!gradeInput.form[gradeInput.id].$invalid">\n        <bb-svg-icon size="small" icon="attention" status="alert"></bb-svg-icon>\n      </div>\n    </bb-inline-validation>\n    <a ng-show="gradeInput.isRubricEvalMode()" class="button super-clear has-rubric wrapping-input-style"\n       ng-class="{\'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown(), \'is-in-progress\': gradeInput.isInProgressShown(), \'group-grade-input\': !!forGroup, \'disable-click\': disableRubricEvalClick()}"\n       ng-click="gradeInput.openRubricEvaluation()"\n       aria-disabled="{{disableRubricEvalClick()}}"\n       href="javascript:void(0);" analytics-id="directives.grade-input.rubric.evaluation.link">\n      <span class="sr-only" bb-translate translate-values="{user: forUser}">components.directives.grade.grade-input.rubricButtonAlt</span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span name="{{gradeInput.id}}" class="grade-point-value" ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}">\n        {{gradeInput.gradeDisplayItem.displayValue || \'--\'}}&nbsp;\n      </span>\n\n      \x3c!--TOTAL POINTS--\x3e\n      <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n            translate-values="{total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}">\n        components.directives.grade.grade-input.points\n      </span>\n    </a>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowOverrideIndicator()" class="left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.overrideIndicator</span>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowPastDueZeroIndicator()" class="left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.pastDueZero</span>\n  </div>\n\n  <div ng-if="gradeInput.alertScreenReaderNewGrade"\n        bb-ax-alert\n        id="gradeInput.getAriaDescribeById()"\n        class="sr-only"\n        bb-translate translate-values="{grade: gradeInput.gradeDisplayItem.displayValue}">\n    components.directives.grade.grade-input.screenReaderEnteredGrade\n  </div>\n</div>\n'},mCEN:function(e,t,n){"use strict";var i=n("D57K"),o=n("yC9S"),s=n("aHpC"),a=n("0JpG"),r=n("7u+5"),c=n("zYa8"),l=n("me+T"),d="ultra.components.directives.bbUiIcon.Attendance";Object(c.a)(l.a,d,"bbUiIconAttendance");var u=n("FvSu");Object(c.a)(u.Audio,"ultra.components.directives.bbUiIcon.Audio","bbUiIconAudio");var p=n("hpcp"),m=n("cXGx");Object(c.a)(m.a,"ultra.components.directives.bbUiIcon.Calculation","bbUiIconCalculation");var h=n("lLJW"),g=n("MlM1");Object(c.a)(g.DocumentBlank,"ultra.components.directives.bbUiIcon.DocumentBlank","bbUiIconDocumentBlank");var b=n("HCOL"),f=n("00V8"),v=n("K16Q");Object(c.a)(v.Homework,"ultra.components.directives.bbUiIcon.Homework","bbUiIconHomework");var y=n("KKAh"),w=n("cMgu"),C=n("VTbC"),S=n("Ylhg"),k=n("y8aX");Object(c.a)(k.a,"ultra.components.directives.bbUiIcon.OverallGrade","bbUiIconOverallGrade");var I=n("i+uu");Object(c.a)(I.Pdf,"ultra.components.directives.bbUiIcon.Pdf","bbUiIconPdf");var D=n("r7jL");Object(c.a)(D.Photo,"ultra.components.directives.bbUiIcon.Photo","bbUiIconPhoto");var E=n("k6dK");Object(c.a)(E.Presentation,"ultra.components.directives.bbUiIcon.Presentation","bbUiIconPresentation");var O=n("VV+j"),T=n("HGKz"),$=n("sOA/"),A=n("5L1M"),x=n("Uw7Y");Object(c.a)(x.Video,"ultra.components.directives.bbUiIcon.Video","bbUiIconVideo");var P=n("HiQ9"),G=n("jOWO"),L=n("FH9J");n.d(t,"a",(function(){return R}));var R="ultra.components.directives.bbUiContentIcon";!function(){function e(e,t){this.$scope=e,this.localize=t}e.prototype.$onChanges=function(){this.setTitleAccess()},e.prototype.setTitleAccess=function(){this.notDecorative&&this.icon&&(this.titleAccess=this.localize.translateSync({key:"components.directives.element-image.element-image-accessibility.img-icon-"+this.icon,locale:this.localize.getLocale(this.$scope)}))},e=Object(i.__decorate)([Object(o.a)({moduleName:R,componentName:"bbUiContentIcon",bindings:{icon:"<",color:"@?",notDecorative:"<?"},template:L,requireModules:[a.moduleName,h.a,r.a,d,"ultra.components.directives.bbUiIcon.Audio",p.a,"ultra.components.directives.bbUiIcon.Calculation",h.a,"ultra.components.directives.bbUiIcon.DocumentBlank",b.a,f.a,"ultra.components.directives.bbUiIcon.Homework",y.a,w.a,C.a,S.a,"ultra.components.directives.bbUiIcon.OverallGrade","ultra.components.directives.bbUiIcon.Pdf","ultra.components.directives.bbUiIcon.Photo","ultra.components.directives.bbUiIcon.Presentation",O.a,T.a,$.a,A.a,"ultra.components.directives.bbUiIcon.Video",P.a,G.a]}),Object(i.__param)(0,Object(s.b)("$scope")),Object(i.__param)(1,Object(s.b)(a.serviceName))],e)}()},mWXo:function(e,t){e.exports='\n<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride || col.gradeNotations.length" class="f-dropdown f-dropdown-overflow-menu reborn-dropdown performance-code-options show notation-no-border notation-max-height " role="menu">\n\n    <li ng-if="col.gradeNotations.length" class="performance-option-header">\n        <span bb-translate>components.directives.grade.grade-input.selectPerformanceCode</span>\n    </li>\n    <li ng-repeat="notation in col.gradeNotations" class="performance-code-potion">\n      <a role="menuitem" \n         ng-click="gradeGridColumnOverallReborn.selectNotation(notation)" \n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.notation.link">\n        <span class="code" aria-label="{{notation.code}}">{{notation.code}}</span>\n        <span class="description notation-description-max-width" aria-label="{{notation.description}}">{{notation.description}}</span>\n      </a>\n    </li>\n    <li ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride" class="undo-override">\n      <a role="menuitem" \n         ng-click="gradeGridColumnOverallReborn.undoOverride()" \n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grade-input.undoOverride">\n        <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grade-input.undoOverride</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>'},mnBQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("wHJ2"),o=n("0JpG"),s=n("kwLz"),a=n("1ZbL"),r="ultra.components.directives.feedback.feedbackAuthoring",c={Class:s.FeedbackAuthoring,bindingNames:["analyticsId","panelTitle","panelSubtitle","primaryGraderFeedback","secondaryGradersFeedback","configProps","isInlineMode"],renderLocalized:!0,withThemeProvider:!0};i.module(r,[o.moduleName]).component("bbFeedbackAuthoring",Object(a.a)(c))},nfhp:function(e,t){e.exports='<div bb-cache-compilation="assessment-feedback">\n  <div id="react-assessment-feedback-target">\n    <div ng-class="{\'panel-wrap\': !assessmentFeedback.isInlineMode}">\n      <div ng-if="assessmentFeedback.isFeedbackAuthoringPayloadLoaded">\n        <bb-feedback-authoring\n          ng-if="!assessmentFeedback.isLoading"\n          panel-title="assessmentFeedback.feedbackAuthoringPayload.panelTitle"\n          panel-subtitle="assessmentFeedback.feedbackAuthoringPayload.panelSubtitle"\n          primary-grader-feedback="assessmentFeedback.feedbackAuthoringPayload.primaryGraderFeedback"\n          secondary-graders-feedback="assessmentFeedback.feedbackAuthoringPayload.secondaryGradersFeedback"\n          config-props="assessmentFeedback.feedbackAuthoringPayload.configProps"\n          analytics-id="assessmentFeedback.feedbackAuthoringPayload.analyticsId"\n          is-inline-mode="assessmentFeedback.isInlineMode"\n        ></bb-feedback-authoring>\n      </div>\n      <div ng-if="assessmentFeedback.isLoading" class=\'spinner bb-secondary-color-2\'></div>\n    </div>\n  </div>\n\n  <div\n    class="hide"\n    bb-confirmation-needed="x-bb-save-feedback"\n    modal-name="assessment-feedback"\n    show-type="always"\n    ng-click="assessmentFeedback.onClickSave(true);"\n    dismiss-callback="assessmentFeedback.closeConfirmationModalDismissed()"\n    other-choice-action="assessmentFeedback.dontSaveAction()"\n    analytics-id="course.content.assessment.assessmentFeedback.saveChanges"\n  ></div>\n</div>\n'},o9hD:function(e,t){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': {{::gradesUploadSettings.completedModalTitleKey}}}"\n          modal-title-key="{{::gradesUploadSettings.completedModalTitleKey}}" aria-describedby="course-is-complete"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n    <div name="modal-contents">\n        <p id="course-is-complete" bb-translate="course.grades.grades-upload-settings.courseComplete.content" course-org-token-resolver></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkCourseComplete\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettings.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},ooAF:function(e,t){e.exports='<div class="grade-color">\n    <div class="wrapping-input-style readonly pill-style {{displayGradePill.colorCss}} {{displayGradePill.cursorClass}}">\n      <div ng-if="!displayGradePill.shouldShowRubricButton()">\n        <span class="grade-input-display grade-ellipsis">{{displayGradePill.displayValue}}</span>\n      </div>\n      <div ng-if="displayGradePill.shouldShowRubricButton()">\n        <a ng-click="displayGradePill.openRubricEvaluation($event)"\n           ng-class="{\'disable-click\': !!disableRubricEvalClick()}"\n           class="grade-rubric-detail"\n           aria-disabled="{{!!disableRubricEvalClick()}}"\n           href=""\n           analytics-id="components.directives.grade.gradePill.showRubric.link">\n          <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n          <span class="grade-input-display ready grade-ellipsis">{{displayGradePill.displayValue}}</span>\n        </a>\n      </div>\n    </div>\n</div>\n'},pBKf:function(e,t,n){},pF15:function(e,t){e.exports='\n<div class="filter-list-content">\n  <div class="filter-panel-container">\n    <div class="filter-panel-header">\n      <div class="filter-panel-title-wrapper">\n        <h3 class="filter-panel-title" bb-translate>components.directives.grade.filter-panel.title</h3>\n        <button type="button"\n          class="filter-panel-close-button"\n          data-is-visible="true"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.grade.filter-panel.closeFilterPanel\'}"\n          ng-click="gradeGridSearchFilterReborn.closeFilterCriteria()"\n          analytics-id="components.directives.grade.filterPanel.close.button"\n        >\n          <div>\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </div>\n        </button>\n      </div>\n      <button class="filter-panel-clear-all is-disabled"\n              ng-disabled= "!gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0"\n              ng-class="{\'filter-panel-clear-all-active\': gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0}"\n              ng-click="gradeGridSearchFilterReborn.clearAll()"\n              analytics-id="components.directives.grade.filter-panel.clearAll"\n              bb-translate>\n              components.directives.grade.filter-panel.clearAll\n      </button>\n    </div>\n    \x3c!-- TODO Container(style protoType) for search-box, enable in furture\n    <div class="filter-panel-block" id="keyword-block">\n        <div class="filter-panel-block-header">\n          <h4 class="filter-panel-block-title">Keyword Search</h4>\n          <button type="button filter-panel-toggle-button">\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n          </button>\n        </div>\n        <div class="filter-panel-search-box">\n            <bb-typeahead-search-box id="student-search-box"\n                                     input-placeholder="components.directives.grade.search-box.placeholder"\n                                     sr-empty-results="components.directives.grade.search-box.emptyResults"\n                                     sr-results-found="components.directives.grade.search-box.resultsFound"\n                                     sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                                     sr-label="components.directives.grade.search-box.placeholder"\n                                     clear-aria-label="components.directives.grade.search-box.clear"\n                                     icon="search">\n            </bb-typeahead-search-box>\n        </div>\n    </div>\n    --\x3e\n    <div class="filter-panel-block" id="sources-block" ng-repeat="criteriaBlock in gradeGridSearchFilterReborn.criteriaBlocks ">\n        <div class="filter-panel-block-header" id ={{::criteriaBlock.id}}>\n            <h4 class="filter-panel-block-title" course-org-token-resolver bb-translate>components.directives.grade.filter-panel.mergedCourseTitle</h4>\n            <button type="button" class="filter-panel-toggle-button"\n                    ng-class="{\'filter-panel-block-toggle-close\': !criteriaBlock.expanded }"\n                    ng-click="gradeGridSearchFilterReborn.collapseMergedCourse(criteriaBlock)"\n                    aria-label="{{gradeGridSearchFilterReborn.getToggleButtonLabel(criteriaBlock)}}"\n                    analytics-id="components.directives.grade.filterPanel.mergedCourse.collapse.button"\n            >\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n            </button>\n          </div>\n        <div class="filter-panel-groups" ng-show="criteriaBlock.expanded">\n          <div class="filter-panel-group">\n            <div class="filter-panel-item" ng-repeat="criteriaDetail in criteriaBlock.criteriaDetails track by $index" >\n              <div class="is-enabled filter-panel-item-checkbox" ng-show="!criteriaDetail.ui.hidden">\n                <input type="checkbox" id={{::criteriaDetail.id}}\n                  class="bb-Checkbox-checkboxInput foundation-overrides"\n                  ng-model="criteriaDetail.ui.checked"\n                  ng-change="gradeGridSearchFilterReborn.filterMergedCourse(criteriaDetail)"\n                  analytics-id="components.directives.grade.filterPanel.mergedCourse.input.checkbox">\n                  <label class="foundation-overrides" for={{::criteriaDetail.id}}>\n                    <div class="check-box-label">\n                      <span>{{::criteriaDetail.childCourse.name}}</span>\n                      <bb-svg-icon icon="check" size="inline"></bb-svg-icon>\n                    </div>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>'},pGPW:function(e,t,n){},pHHL:function(e,t){e.exports='<div class="grade-color">\n  <div ng-if="!displayGrade.shouldShowRubricButton() && !displayGrade.shouldShowRubricDiv()">\n    <div ng-if="!(isGroupGradeMultiple() && !showNotGraded())"\n         ng-class="{ \'show-total\': displayGrade.gradeDisplayItem.shouldShowTotalPoints(),\n                     \'final-grade\': finalGrade(),\n                     \'na\': displayGrade.gradeDisplayItem.displayValue == null,\n                     \'cursor-pointer\': displayGrade.cursorPointer,\n                     \'defaultCursor\': displayGrade.cursorDefault}"\n         class="wrapping-input-style {{displayGrade.colorClass}}"\n         ready="{{::displayGrade.fullDisplayGrade && !displayGrade.noGradeToDisplay() || undefined}}">\n      <ng-switch on="displayGrade.schema.scaleType">\n        <span ng-switch-default>\n          <span ng-if="displayGrade.fullDisplayGrade != null && !overallGradePeekSref" class="grade-input-display ready" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{displayGrade.fullDisplayGrade}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.fullDisplayGrade.link">\n            {{displayGrade.fullDisplayGrade}}\n          </a>\n          <span ng-if="displayGrade.fullDisplayGrade == null && !overallGradePeekSref" class="grade-input-display" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n        </span>\n        <span ng-switch-when="SCORE">\n          \x3c!-- Accommodate for hiding of points possible in small format --\x3e\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue != null && !overallGradePeekSref" class="grade-input-display ready">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.fullDisplayGrade.link">\n            {{displayGrade.gradeDisplayItem.displayValue}}\n          </a>\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue == null && !overallGradePeekSref" class="grade-input-display">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n          <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n        </span>\n      </ng-switch>\n    </div>\n    <div ng-if="isGroupGradeMultiple() && !showNotGraded()" class="wrapping-input-style is-multiple">\n      <div ng-if="overallGradePeekSref" class="group-multiple" bb-peek-sref="{{overallGradePeekSref}}" bb-translate>components.directives.grade.display-grade.multiple</div>\n      <div ng-if="!overallGradePeekSref" class="group-multiple" bb-translate>components.directives.grade.display-grade.multiple</div>\n    </div>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricButton()">\n    <a ng-if="!displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-view"\n       class="js-rubric-view wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubric.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n    <a ng-if="displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-evaluation({groupId: displayGrade.attempt.groupId})"\n       class="js-rubric-evaluation wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubricEvaluation.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}&nbsp</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricDiv() && displayGrade.shouldShowRubricEvaluation()"\n       class="wrapping-input-style clear"\n       ng-class="displayGrade.colorClass">\n    <span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n      <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n    </span>\n  </div>\n</div>'},pKNj:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));n("towz"),n("zAxy"),n("s4xR"),n("KXuk"),n("gORw"),n("TOu5");var i=n("wHJ2"),o=n("yC9S"),s=n("9zo4"),a=n("vhkR"),r=n("tqR7"),c=n("ZzN+"),l=n("lmMM"),d=n("e7Kn"),u=n("nYZ0"),p=n("dJ97"),m=n("Ocaa"),h=n("r133"),g=n("BMpZ"),b=n("Sa5G"),f=n("ujI6"),v=n("jhBu"),y=n("X/qj"),w=n("o5Lu"),C=n("0JpG"),S=n("pjml"),k=n("JNtI"),I=n("u4ux"),D=n("e6jQ"),E=n("8jzW"),O=n("hkqm"),T=n("TnpK"),$=n("W6wm"),A=n("EGJL"),x="ultra.directives.grade.graderColumn",P=function(){function t(e,t,n,i,s,a,r,c,l,d,u,p,m,h){var g=this;this.scope=e,this.$q=t,this.ContentService=n,this.courseConversionService=i,this.CourseModel=s,this.entitlementService=a,this.grade=r,this.gradebookPermissionService=c,this.bbLocalize=l,this.ultraState=d,this.accessibility=u,this.scoreProviderHelper=p,this.ltiService=m,this.toast=h,this.hasDesignerViewEntitlement=!1,this.hasViewAssessmentEntitlement=!1,this.hasViewAttendanceEntitlement=!1,this.isRestrictedGroupContent=!1,this.numMissingStudents=0,this.showConversionMessage=!1,this.canModify=this.gradebookPermissionService.canModify(e.course().id),this.canPostGrades=this.gradebookPermissionService.canPostGrades(e.course().id),this.canViewAttempts=this.gradebookPermissionService.canViewAttempts(e.course().id),this.canViewGrades=this.gradebookPermissionService.canViewGrades(e.course().id),this.column=e.column,this.course=e.course(),this.isCourseView=e.isCourseView,this.contextArea="grades",this.index=e.$parent.$index+1,this.column.isGroupContent()&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(b.v.ViewGroups,this.course.id)),this.bbLocalize.loadBundle("components/directives/grade/grader-column").then((function(){g.column.externalGrade&&(e.column.columnName=g.bbLocalize.translateSync({locale:g.bbLocalize.getLocale(g.scope),key:"components.directives.grade.grader-column.actions.overall.label"}))})),this.entitlementService.hasAnyCourseEntitlement([b.j.ViewAssessment,b.j.ModifyAssessment],this.course.id).then((function(e){g.hasViewAssessmentEntitlement=e})),this.entitlementService.hasCourseEntitlement(b.j.ViewAttendance,this.course.id).then((function(e){g.hasViewAttendanceEntitlement=e})),this.entitlementService.hasCourseEntitlement(b.f.ViewAsDesigner,this.course.id).then((function(e){g.hasDesignerViewEntitlement=e})),this.column.$resolve().$then((function(e){g.grade.setDeleteConfirmationHandle(g.column),g.overflowMenuId="grader-column-open-button-"+D.a(),g.checkIfAttendanceRecordsExist()}));var f=e.$watch("column.summary.$resolved",(function(){g.column.summary&&g.column.summary.$resolved&&(g.updateNumMissingStudents(),f(),g.isRestrictedGroupContent&&(g.column.summary.restricted=!0,g.column.restricted=!0))}));o.b.OnRootScope(e,"bb-grade-input-save",(function(e,t,n,i){g.column.id===i&&g.column.summary.$fetch()})),o.b.OnRootScope(e,"bb-update-category-icon",(function(e,t){g.column.id===t.id&&(g.scope.categoryMap&&t.gradebookCategoryId&&(g.column.gradebookCategory=g.scope.categoryMap[t.gradebookCategoryId],g.column.categoryTitle=g.column.gradebookCategory&&g.column.gradebookCategory.title),(null===t.dueDate||t.dueDate&&t.dueDate instanceof Date)&&(g.column.dueDate=t.dueDate),g.column.visible=t.visible,g.updateNumMissingStudents())})),this.scope.column.isAttendance()&&o.b.OnRootScope(e,"$stateChangeSuccess",(function(e,t,n,i){i.name.indexOf("attendance")>=0&&g.checkIfAttendanceRecordsExist()})),e.$watch("column",(function(e){g.column=e})),this.registerPostGradesWatchers()}return t.prototype.updateNumMissingStudents=function(){this.numMissingStudents=this.column.getNumMissingIfLate()},t.prototype.openAddItemPanel=function(t){this.whichAddItemPanelOpen=t,e(t).addClass("is-active").find(".element-list-add-menu").slideToggle(300)},t.prototype.closeAddItemPanel=function(t){this.whichAddItemPanelOpen===t&&(this.whichAddItemPanelOpen=null),e(t).removeClass("is-active").find(".element-list-add-menu").slideUp(300)},t.prototype.toggleAddItemPanel=function(e){this.whichAddItemPanelOpen===e?this.closeAddItemPanel(e):this.openAddItemPanel(e)},t.prototype.registerPostGradesWatchers=function(){var e=this;this.scope.$watchGroup([function(){return e.column.summary.hasGradesToPost()},function(){return e.course.isComplete()}],(function(){e.canPostGrades=e.grade.canPostGrades(e.course,e.column)}))},t.prototype.postGrades=function(){var e=this;this.column.postReadyGrades().then((function(t){e.toast.show({messageKey:"components.directives.grade.grader-column.actions.gradesPosted",icon:"icon-check",toastStatus:"success"}),e.column.summary.$fetch().$asPromise().then((function(t){e.scope.$emit(w.c,e.column),e.scope.$root.$broadcast("bb-update-summary")}))}))},t.prototype.deleteColumn=function(){return this.column.forceDelete()},t.prototype.deleteContent=function(){var e=this;this.column.courseId&&this.column.contentId&&this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then((function(t){e.ContentService.deleteContent(t).then((function(){e.deleteContentCallback()}))}))},t.prototype.deleteContentCallback=function(){this.scope.$root.$broadcast("bb-delete-column",this.column)},t.prototype.viewEditColumn=function(){this.accessibility.setFocusOverrideOnPanel("#"+this.overflowMenuId,".grades-list");var e=this.column.scoreProviderHandle;e&&!this.scoreProviderHelper.supportsOverall(e)||(S.r.ContentHandler.PartnerCloud.isEqualTo(e)||S.r.ContentHandler.LtiLink.isEqualTo(e)?this.ltiService.ltiEditColumn(this.column):this.openViewEditState())},t.prototype.openViewEditState=function(){var e=this.column,t=e.contentId,n=e.courseId,i=e.externalGrade,o=e.id,s=e.linkId,a=e.scoreProviderHandle,r=!this.column.isAssignment()&&!this.column.isTest();if(i)this.ultraState.goPeekState("gradebook-item.overall-grade",{columnId:o,gradeitemView:"details"});else if(this.column.isCalculated())this.ultraState.goPeekState("gradebook-item.calculation",{columnId:o,gradeitemView:"details"});else if(a&&this.column.seemsAttemptBased()&&(this.hasViewAssessmentEntitlement||r)){var c={courseId:n,contentId:t,linkRefId:s};this.scoreProviderHelper.editStateRef(a,c,E.a.GoToState)}else if(a&&this.column.isAttendance()){c={courseId:n,contentId:t};this.scoreProviderHelper.editStateRef(a,c,E.a.GoToState)}else this.ultraState.goPeekState("grade-item.edit",{id:this.column.id})},t.prototype._openColumn=function(){var e,t,n,o,s,a=this.column,r=a.contentId,c=a.courseId,l=a.id,d=a.linkId,u=a.scoreProviderHandle;if(this.course.isUltra()){var p=this.hasViewAssessmentEntitlement&&(this.column.isTest()||this.column.isAssignment());if(this.isLTILink())return void this.launchLti();if(this.column.isAttendance()){var m={contentId:r,courseId:c,columnId:l,linkRefId:d};o=(e=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(u,m,E.a.GenerateStateParams))).state,s=e.args}else if(this.column.externalGrade)o="gradebook-item.overall-grade",s={columnId:l};else if(this.column.isCalculated())o="gradebook-item.calculation",s={columnId:l,courseId:c};else if(u&&!this.column.isOffline()&&(this.canViewGrades||this.canViewAttempts)){m={contentId:r,courseId:c,columnId:l,linkRefId:d};o=(t=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(this.column.scoreProviderHandle,m,E.a.GenerateStateParams))).state,s=t.args}else if(u&&(this.column.isDiscussion()||this.column.isScorm()||this.column.isScormSCO()||p)){m={courseId:c,contentId:r,linkRefId:d};o=(n=i.fromJson(this.scoreProviderHelper.editStateRef(this.column.scoreProviderHandle,m,E.a.GenerateStateParams))).state,s=n.args}else this.canViewGrades?(o="gradebook-item.offline",s={columnId:l,courseId:c,gradeitemView:"students"}):(o="grade-item.edit",s={id:l})}else o="course.outline",s={courseId:c,legacyUrl:this.getLegacyUrl()};this.ultraState.goPeekState(o,s)},t.prototype.handleColumnClick=function(){var e=this;this.itemLinkIsClickable&&!this.isRestrictedGroupContent&&(this.isCourseView?this._openColumn():this.course.refreshConvertToUltraStatus().then((function(){e.courseConversionService.isConversionComplete(e.course.ui.convertToUltraTaskStatus)?e._openColumn():e.showConversionTooltip()})))},t.prototype.showConversionTooltip=function(){this.showConversionMessage=!0},t.prototype.closeConversionTooltip=function(){this.showConversionMessage=!1},t.prototype.getAlertType=function(){return b.i.ConversionInProgress},t.prototype.launchLti=function(){this.ltiService.ltiLaunch({courseId:this.column.courseId,contentId:this.column.contentId,linkType:b.g.parse(this.column.scoreProviderHandle.toString()),linkRefId:this.column.linkId})},t.prototype.showAlertIcon=function(){return this.column.getNumMissingIfLate()>0},t.prototype.getLegacyUrl=function(){return"/webapps/gradebook/do/instructor/enterGradeCenter?course_id="+this.column.courseId},t.prototype.isLTILink=function(){return this.ltiService.isLTILink(this.column)},t.prototype.showMarkAttendance=function(){return this.column.isAttendance()&&this.hasViewAttendanceEntitlement},t.prototype.showDelete=function(){return this.column.isAttendance()?this.canModify&&this.showAttendanceDeleteOption:this.canModify},t.prototype.openAttendance=function(){this.ultraState.goPeekState("attendance")},t.prototype.showQuestionAnalysis=function(){return this.column.isQuestionAnalysisAvailable()&&this.canViewGrades},t.prototype.showViewEdit=function(){return!(!this.column.isOffline()&&null!=this.column.scoreProviderHandle&&!this.scoreProviderHelper.supportsEdit(this.column.scoreProviderHandle))&&(!(!this.column.isOffline()&&!this.column.isCalculated())||(this.hasDesignerViewEntitlement||this.canModify))},t.prototype.hasContentId=function(){return!!this.column.contentId},t.prototype.getConfirmationKeyAndShowType=function(){var e,t=this;return this.ultraState.includes("**.outline.**")?e=$.a.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=$.a.Discussions),this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then((function(n){return t.ContentService.generateDeleteConfirmationKey(n,e).then((function(e){return{confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType}}))}))},t.prototype.getOverflowMenuItems=function(){var e=this;return[{icon:this.canModify?"draw":"visible",labelKey:this.canModify?"global.edit":"global.view",show:function(){return e.showViewEdit()},onClick:function(){return e.viewEditColumn()}},{icon:"attendance",labelKey:"components.directives.grade.grader-column.attendance.markAttendance",show:function(){return e.showMarkAttendance()},onClick:function(){return e.openAttendance()}},{icon:"question-analysis",labelKey:"components.directives.grade.grader-column.questionAnalysisOverflowMenuLabel",show:function(){return e.showQuestionAnalysis()},onClick:function(){e.ultraState.goPeekState("question-analysis.report",{qaContentId:e.column.contentId})}},{icon:"trash",labelKey:"global.delete",onClick:function(){e.hasContentId()?e.deleteContent():e.deleteColumn()},show:function(){return e.showDelete()},confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){var t;return e.hasContentId()?e.getConfirmationKeyAndShowType().then((function(n){return t=n.confirmationKey.replace(/^resource\//,""),e.$q.when(k.a(t))})):e.column&&e.column.ui&&e.column.ui.deleteConfirmationHandle?(t=e.column.ui.deleteConfirmationHandle.replace(/^resource\//,""),e.$q.when(k.a(t))):(t="generic-content",e.$q.when(k.a(t)))}}}]},Object.defineProperty(t.prototype,"itemLinkIsClickable",{get:function(){return this.isActionable&&(!this.column.isAttendance()||this.hasViewAttendanceEntitlement)&&(!this.isLTILink()||this.hasDesignerViewEntitlement)&&!this.isRestrictedGroupContent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActionable",{get:function(){return!this.column.isAttendance()||this.scope.attendanceIsAvailable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showOverflowMenu",{get:function(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&(this.showViewEdit()||this.showDelete()||this.showMarkAttendance()||this.showQuestionAnalysis())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDragControls",{get:function(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&this.canModify},enumerable:!0,configurable:!0}),t.prototype.checkIfAttendanceIsAvailable=function(){return!(!this.scope.attendanceIsAvailable||!this.scope.attendanceIsAvailable())},t.prototype.checkIfAttendanceRecordsExist=function(){var e=this;this.showAttendanceDeleteOption=!1,this.column.isAttendance()&&this.checkIfAttendanceIsAvailable()&&this.CourseModel.$new(this.column.courseId).attendanceRecordsExist().then((function(t){e.showAttendanceDeleteOption=!t}))},t.prototype.getNumberEligibleToBeGradedExternalSubmissions=function(){return i.isUndefined(this.column.summary.numGroupsNeedsGrading)?this.column.summary.numStudentsEligibleToBeGradedExternalSubmission:this.column.summary.numGroupsEligibleToBeGradedExternalSubmission},t.prototype.getNumberOfSubmissionsNeedsGrading=function(){return null==this.column.summary.numSubmissionsNeedsGrading?this.column.summary.numSubmissionsNeedsReconciling:this.column.summary.numSubmissionsNeedsGrading},t.prototype.getToolTipTemplate=function(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'},t.$inject=["scope","$q",u.f,c.b,S.o.serviceName,v.b,w.h,y.b,C.serviceName,T.d,s.c,E.c,a.c,O.b],t}(),G=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=A,this.scope={assessment:"<?",column:"=",course:"&",isCourseView:"=",categoryMap:"=?",attendanceColumnExists:"&?",attendanceIsAvailable:"&"},this.link=function(e,n,i){e.graderColumn=t.$injector.instantiate(P,{scope:e})}}return e.$inject=["$injector"],e}();i.module(x,[r.a,u.d,d.a,l.d,c.a,p.a,h.a,m.a,f.c,C.moduleName,E.b,T.b,I.b,a.b,k.b,O.a,g.a]).directive("bbGraderColumn",["$injector",C.serviceName,function(e,t){return t.loadBundle("components/directives/grade/grader-column"),e.instantiate(G)}])}).call(this,n("5iHu"))},"po/h":function(e,t){e.exports='<div class="base-grades course-grades-instructor" ng-class="{\'grades-list-view\': courseGradesGrader.isGradableItemsListView}">\n  <div ng-if="courseGradesGrader.isDesktop && !courseGradesGrader.isSmallScreen" class="guidance-wrapper"\n    aria-describedby="guidance-moment-grade-settings">\n\n    <div class="row collapse course-grades-header-buttons-wrapper js-course-skip-link-target" tabindex="-1">\n      <bb-square-toggle one-icon-class="toggle-table"\n                        one-aria-label="components.directives.grade.course-grades-grader.views.list-button"\n                        one-view-value="list"\n                        two-icon-class="toggle-grid"\n                        two-aria-label="components.directives.grade.course-grades-grader.views.grid-button"\n                        two-view-value="grid"\n                        property="courseGradesGrader.squareToggleValue"\n                        analytics-id-tag-prefix="components.directives.grade.view.courseGrader">\n      </bb-square-toggle>\n      <div bb-feature-toggle="gradebookSearchFilterM3" remove-from-dom="true">\n        <button ng-show="courseGradesGrader.isGridView && courseGradesGrader.mergedCourses.length" class="filter-panel-button super-clear"\n          ng-class="{\'filter-panel-button-on\': courseGradesGrader.showFilterCriteriaSettings}" ng-click="courseGradesGrader.showFilterCriteriaPanel()"\n          aria-expanded="{{courseGradesGrader.showFilterCriteriaSettings}}" bb-guidance-target component-key="grades.grader.search.filter" analytics-id="components.directives.grade.search.filter.button">\n          <bb-svg-icon size="small" icon="filter-options"></bb-svg-icon>\n          <span bb-translate>components.directives.grade.course-grades-grader.actions.filter</span>\n          <span class="filter-count" ng-show="courseGradesGrader.filteredCount > 0" bb-translate translate-values="{count:courseGradesGrader.filteredCount}">components.directives.grade.course-grades-grader.actions.filterCount</span>\n        </button>\n      </div>\n      <div ng-if="courseGradesGrader.canDownloadGradebook">\n        <a class="open-downLoad-settings button super-clear" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.download\'}"\n          bb-peek-sref="grade-download-setting" ng-if="!courseGradesGrader.course.isComplete()" analytics-id="components.directives.grade.actions.download.link">\n          <bb-svg-icon size="medium" icon="download"></bb-svg-icon>\n        </a>\n      </div>\n\n      <div ng-if="courseGradesGrader.canUploadGradebook">\n        <a class="open-upload-settings button super-clear" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.upload\'}"\n          bb-peek-sref="grade-upload-setting" ng-if="!courseGradesGrader.course.isComplete()" analytics-id="components.directives.grade.actions.upload.link">\n          <bb-svg-icon size="medium" icon="upload"></bb-svg-icon>\n        </a>\n      </div>\n\n      <div ng-if="courseGradesGrader.userHasViewGradebookPermission" course-id="course.model.id">\n        <a class="open-gradebook-settings button super-clear js-open-settings" bb-guidance-target component-key="grades.grader.course.settings"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.openSettings\'}"\n          bb-peek-sref="grade-setting" analytics-id="components.directives.grade.actions.openSettings.link">\n          <bb-svg-icon size="medium" icon="settings"></bb-svg-icon>\n        </a>\n      </div>\n    </div>\n    <div bb-feature-toggle="gradebookSearchFilterM3" remove-from-dom="true">\n      <bb-guidance ng-if="courseGradesGrader.isGridView && courseGradesGrader.mergedCourses.length"\n      component-key="grades.grader.search.filter" class="guidance-element-overlay push-left push-bottom" role="tooltip">\n      <p>\n        <bb-translate>components.directives.grade.course-grades-grader.ftue.filter</bb-translate>\n      </p>\n    </bb-guidance>\n    </div>\n    <bb-guidance id="guidance-moment-grade-settings" component-key="grades.grader.course.settings" class="guidance-element-overlay push-left push-bottom"\n      role="tooltip">\n      <p>\n        <bb-translate>components.directives.grade.course-grades-grader.ftue.setting</bb-translate>\n      </p>\n    </bb-guidance>\n\n  </div>\n  <bb-gradebook-list-view-tabs\n    bb-feature-toggle="studentListView"\n    on-tab-changed="courseGradesGrader.changeListViewType"\n    selected-tab="courseGradesGrader.currentTabId"\n    ng-if="!courseGradesGrader.isGridView"\n  ></bb-gradebook-list-view-tabs>\n\n  <div ng-if="courseGradesGrader.isGridView || courseGradesGrader.isGradableItemsListView">\n    \x3c!-- Empty state template: this section of the page will be displayed when there is no content, and will invite users to create content --\x3e\n    <div class="is-empty-page js-course-skip-link-target" ng-if="courseGradesGrader.columns.$resolved && courseGradesGrader.columns.length === 0">\n      <div class="is-empty-wrapper">\n        <div class="is-empty-explanation">\n          <img src="./static/images/ftue/course-grades-instructor.svg" bb-translate-attrs="{alt: \'components.directives.grade.course-grades-grader.empty.addItems\'}" />\n          <h1 class="is-empty-heading" bb-translate>components.directives.grade.course-grades-grader.empty.header</h1>\n          <p bb-translate>components.directives.grade.course-grades-grader.empty.description</p>\n        </div>\n        <div class="add-element">\n          <ul role="menu" class="element-list-add-menu small-block-grid-1 medium-block-grid-3 large-block-grid-4">\n            <li>\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addCalculation\'}"\n                 bb-peek-sref="gradebook-item.calculation" analytics-id="components.directives.grade.addCalculation.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addCalculation</span>\n                </div>\n              </a>\n            </li>\n            <li>\n              <a role="menuitem" class="js-empty-add-item" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addItem\'}"\n                 bb-peek-sref="grade-item.create" analytics-id="components.directives.addItem.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addItem</span>\n                </div>\n              </a>\n            </li>\n            <li ng-if="courseGradesGrader.attendanceIsAvailable">\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addAttendance\'}"\n                 bb-peek-sref="attendance" analytics-id="components.directives.grade.addAttendance.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addAttendance</span>\n                </div>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Only show the spinner on the initial load, the infinite-scroll directive will show the save tray on additional loads --\x3e\n    <div class="spinner bb-secondary-color-2" ng-if="!courseGradesGrader.columns" aria-hidden="true"></div>\n\n    <div class="grade-list-container" ng-if="courseGradesGrader.columns.length > 0 && courseGradesGrader.allCategoriesLoaded">\n      <div bb-infinite-scroll="courseGradesGrader.renderMoreColumns()" infinite-scroll-container="\'.bb-offcanvas-panel-wrap .panel-wrap\'"\n           infinite-scroll-current-count="courseGradesGrader.columns.length" infinite-scroll-focusable-children-selector=".grader-column .name a, .floating-headers .item-headers .grade-grid-header-content-wrapper"\n           infinite-scroll-load-limit="courseGradesGrader.GRADE_COLUMN_LOAD_LIMIT" infinite-scroll-localization-keys-prefix="components.directives.grade.course-grades-grader.infiniteScroll"\n           infinite-scroll-total-count="courseGradesGrader.totalColumnCount" infinite-scroll-tray-id="course-grades-grader">\n        <bb-course-grades-grader-list\n          ng-if="courseGradesGrader.isGradableItemsListView"\n          course="courseGrades.course"\n          is-first="true"\n          columns="courseGradesGrader.columns"\n          show-setup-overall-column="courseGradesGrader.showSetupOverallColumn"\n          attendance-is-available="courseGradesGrader.attendanceIsAvailable">\n        </bb-course-grades-grader-list>\n      </div>\n      <div ng-if="courseGradesGrader.isGridView">\n        <bb-grade-grid-reborn course="courseGrades.course"\n                              columns="courseGradesGrader.allColumns"\n                              attendance-is-available="courseGradesGrader.attendanceIsAvailable"\n                              merged-courses="courseGradesGrader.mergedCourses">\n        </bb-grade-grid-reborn>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Student List View handles its own loading indicator and empty state --\x3e\n  <div ng-if="courseGradesGrader.isStudentListView">\n    <bb-student-list-view course-id="courseGrades.course.id"\n                          bb-feature-toggle="studentListView"\n                          remove-from-dom="true">\n    </bb-student-list-view>\n  </div>\n</div>\n'},px9Z:function(e,t,n){},q0yA:function(e,t){e.exports='<div bb-foundation-defer bb-load-bundle="components/directives/content-visibility" dev-suppress-hide="true">\n  <div class="panel-block restricted-form content-visibility-rules-container">\n    <div class="row collapse">\n      <div class="columns small-12 js-from-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.startDateSelect"\n               class="from-check"\n               id="from-check-{{contentVisibilityRulesOptions.id}}"\n               name="fromCheck"\n               ng-click="contentVisibilityRulesOptions.handleCheckClick($event)"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.startDateSelect.input.checkbox"/>\n        <label class="date-time-label" for="from-check-{{contentVisibilityRulesOptions.id}}" ng-show="!isReadOnlyMode()"\n          bb-translate>components.directives.content-visibility.startDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.startDateSelect || isAllowedEmpty)"\n          bb-translate>\n          components.directives.content-visibility.startDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.startDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateFromContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()}">\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <input id="date-from"\n              bb-date-picker\n              orientation="auto left"\n              container=".{{contentVisibilityRulesOptions.dateFromContainer}}"\n              ng-model="startDate" name="dateFrom" aria-describedby="date-from-error"\n              first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n              bb-validate-date\n              ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'start-date\')"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(true)"\n              ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-disabled="!contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startDateAria\',\n                   \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n              analytics-id="content.visibility.rules.options.startDate.input.text"/>\n              \x3c!-- htmlhint:analytics-id:enable --\x3e\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()}">\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <input type="text" id="time-from" bb-time-picker ng-model="startTime" name="timeFrom"\n              aria-describedby="time-from-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(true)"\n              ng-disabled="!contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startTimeAria\',\n                   \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n              analytics-id="content.visibility.rules.options.startDate.input.text"\n            />\n            \x3c!-- htmlhint:analytics-id:enable --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateFrom" class="row collapse" id="date-from-error">\n            <span ng-message="required">\n                <bb-translate>components.directives.content-visibility.startDateError</bb-translate>\n              </span>\n          <span ng-message="date" bb-translate>\n            {{::contentVisibilityRulesOptions.setErrorString(true, true)}}\n          </span>\n          <span ng-message="startAndOrEndDate">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startAndOrEndDateOnsubmit">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startBeforeDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateBeforeError</bb-translate>\n          </span>\n          <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeFrom" class="row collapse" id="time-from-error">\n          <span ng-message="required">\n              <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n          </span>\n        <span ng-message="time">\n            {{::contentVisibilityRulesOptions.setErrorString(false, true)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12 js-until-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.untilDateSelect"\n               class="until-check"\n               id="until-check-{{contentVisibilityRulesOptions.id}}"\n               name="untilCheck"\n               ng-click="contentVisibilityRulesOptions.handleCheckClick($event)"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.untilDate.input.checkbox"/>\n        <label class="date-time-label" for="until-check-{{contentVisibilityRulesOptions.id}}"\n          ng-show="!isReadOnlyMode()" bb-translate>components.directives.content-visibility.endDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.untilDateSelect || isAllowedEmpty)" bb-translate>\n          components.directives.content-visibility.endDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.untilDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateUntilContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()}">\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <input id="date-until"\n              bb-date-picker\n              orientation="auto left"\n              container=".{{contentVisibilityRulesOptions.dateUntilContainer}}"\n              ng-model="endDate"\n              first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n              bb-validate-date\n              name="dateUntil"\n              aria-describedby="date-until-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'end-date\')"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(false)"\n              ng-disabled="!contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endDateAria\',\n                   \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n              analytics-id="content.visiblity.rules.options.endDate.input.input.text"/>\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()}">\n            <input type="text" id="time-until" bb-time-picker ng-model="endTime" name="timeUntil"\n              aria-describedby="time-until-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(false)"\n              ng-disabled="!contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endTimeAria\',\n                   \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n              analytics-id="content.visibility.rules.options.endDate.input.text"/>\n              \x3c!-- htmlhint:analytics-id:enable --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateUntil" class="row collapse" id="date-until-error">\n          <span ng-message="required">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="date">\n            {{::contentVisibilityRulesOptions.setErrorString(true, false)}}\n          </span>\n          <span ng-message="requiredOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStart">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStartOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateAfterError</bb-translate>\n          </span>\n          <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeUntil" class="row collapse" id="time-until-error">\n        <span ng-message="time">\n           {{::contentVisibilityRulesOptions.setErrorString(false, false)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.endTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n  </div>\n</div>\n'},qH3X:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i="rb_grade_grid_",o={REFRESH_OVERALL_EDITOR:i+"refresh_overall_editor",REFRESH_CELL_EDITOR:i+"refresh_cell_editor",SELECT_GROUP:i+"select_group",REFRESH:i+"refresh",FOCUSIN_CELL:i+"focusin",FOCUSOUT_CELL:i+"focusout",ENTER_EDITOR:i+"enter_editor",CLOSE_EDITOR:i+"close_editor",SHOW_FILTER_CRITERIA:i+"show-filter-criteria",UPDATED_FILTER_CONDITION:i+"update-filter-condition",HIDDEN_MERGED_COURSE:i+"hidden-merged-course",CLOSE_FILTER_PANEL:i+"close-filter-criteria",GRADEBOOK_CLEAR_SELECTED:i+"gradebook-clear-selected",GRADEBOOK_USER_SELECTED:i+"gradebook-user-selected",GRADEBOOK_COLUMN_SELECTED:i+"gradebook-column-selected",GRADEBOOK_CATEGORY_SELECTED:i+"gradebook-category-selected"}},qgBt:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("wHJ2"),o="ultra.directives.bbOneDrive",s=function(){this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?"},this.restrict="A",this.link=function(e,t){e.isInitialized=!1,t.is("a")&&t.attr("tabindex",-1),t.attr("disabled","disabled")}};i.module(o,[]).directive("bbOneDrive",["$injector",function(e){return e.instantiate(s)}])},qzMN:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-content-collection",use:"icon-small-content-collection-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-collection"><path d="M14 15H2V9h3v1h6V9h3v6zM13 9V4H3v5M4 4V1h8v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"r+pC":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-medium-back-arrow",use:"icon-medium-back-arrow-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-back-arrow"><path d="M11 23L1 12 11 1M1 12h22" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"r/An":function(e,t){e.exports='<div bb-load-bundle="components/directives/content-item-base" ng-class="::contentItemBase.getRootClassName()" bb-cache-compilation="content-item-base">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" bb-click-to-invoke-child=".content-title">\n    <div ng-switch on="content.ui.importPlaceholder">\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n      <div ng-switch-default class="row drag-element-row" ng-class="{\n        \'is-restricted\': content.canViewAsInstructor() && content.isHiddenFromStudents(),\n        \'hidden-from-student-cr\': content.canViewAsInstructor() && content.isConditionalReleaseWithHiddenFromStudent(),\n        \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canViewAsInstructor()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n              <ng-switch on="content.ui.isUploading">\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n\n                <div class="outline-item-inner" ng-switch-default>\n                  <div class="element-image" ng-if="contentItemBase.isGradeLoaded" bb-content-item-icon="content" show-alert-icon="contentItemBase.shouldShowAlertIcon()">\n                  </div>\n                  <div class="element-details">\n                    <div ng-if="shouldShowContent">\n                      <bb-content-item-course-outline ng-if="!contentItemBase.isEngagementOutline()"></bb-content-item-course-outline>\n                      <bb-content-item-engagement-outline ng-if="contentItemBase.isEngagementOutline()"></bb-content-item-engagement-outline>\n                    </div>\n                    <div ng-if="!contentItemBase.shouldShowContent">\n                      {{contentItemBase.overrideMessage}}\n                    </div>\n                  </div>\n                </div>\n              </ng-switch>\n            </div>\n          </div>\n          <div ng-if="content.id" class="item-controls">\n            \x3c!-- Show this if the user has edit permissions on the content and it is movable //--\x3e\n            <button bb-drag-handle\n                    drag-item-id="{{content.id}}"\n                    drag-item-name="{{content.title}}"\n                    drag-item-type="{{contentItemBase.contentHandler}}"\n                    drag-item-context="{{contextArea}}"\n                    class="super-clear small button icon js-drag-handle"\n                    ng-if="canMove && content.canEdit() && !content.isInForcedSequenceModule()"\n                    translate-attrs-values="{contentTitle: content.title}"\n                    bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                    analytics-id="content.item.base.move.button"\n                    >\n\n              <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n            </button>\n            <bb-ally-content-ref\n                ng-if="contentItemBase.canShowAlly"\n                content-id="{{content.id}}"\n                file-id="{{::contentItemBase.allyService.getXythosIdFromContentItem(content)}}"\n                file-preview-url="{{::content.getContentDisplay().contentUrl()}}"\n            ></bb-ally-content-ref>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly"\n              content-id="{{content.id}}"\n              show-view-score-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly"\n              content-id="{{content.id}}"\n              show-alternative-formats-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            \x3c!-- Show this if the user has edit or delete permissions //--\x3e\n            <div class="right" bb-foundation-defer>\n              <bb-overflow-menu ng-show="contentItemBase.showOverflowMenu()"\n                                element-id="{{content.id}}"\n                                element-name="{{content.title}}"\n                                menu-items="contentItemBase.getOverflowMenu()"\n                                on-menu-toggle="contentItemBase.updateAlly()"\n                                analytics-id-tag-prefix="components.directives.content-item-base.overflowMenu">\n              </bb-overflow-menu>\n            </div>\n          </div>\n        </div>\n        <div ng-if="contentItemBase.getDescription()" class="content-item-description">\n          <p class="js-description" ng-bind="contentItemBase.getDescription()"></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},r133:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("wHJ2"),o=n("Fvsw"),s=n("0JpG"),a=n("0+Qs"),r=n("BXQP"),c="ultra.directives.bbDuration",l="refresh.relative.dates",d=function(){function e(t,n,i,o){var s=this;this.scope=t,this.bbContext=n,this.bbLocalize=i,this.interval=o,this.date="",this.time="",this.lessThanOneDay=!1;var a=t.$watch("date",(function(){s._localizeRelativeDate(),t.autoUpdate&&!t.autoUpdate()&&t.date&&a()}));t.$on(l,(function(){s._localizeRelativeDate()})),this.interval((function(){s._localizeRelativeDate()}),this.scope,e.DEFAULT_REFRESH_INTERVAL)}return e.prototype.needAgo=function(){return!!(this.scope.hasAgo&&this.scope.hasAgo()&&this.lessThanOneDay)},e.prototype.separateDatetime=function(){return!(!this.scope.separateDatetime||!this.scope.separateDatetime())},e.prototype._localizeRelativeDate=function(){var e=this;if(this.scope.date){var t={},n=new Date,i=this.scope.isRelativeToServerDate&&this.scope.isRelativeToServerDate();(null==i||i)&&(t={relativeTo:this.bbContext.getServerTime()},n=this.bbContext.getServerTime());var o=n.getTime()-this.scope.date.getTime();if(o>=6e4&&this.scope.date.setSeconds(30),this.lessThanOneDay=o<=864e5,this.needAgo()||this.separateDatetime()){var a=this.bbLocalize.getFormatEnum(s.ILocaleDateFormat,this.scope.dateFormat)||s.ILocaleDateFormat.Short;this.bbLocalize.formatDuration(this.scope.date,this.scope,t,a).then((function(t){e.date=t.date||"",e.time=t.time||""}))}}},e.DEFAULT_REFRESH_INTERVAL=18e4,e.$inject=["scope",o.b,s.serviceName,a.b],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.replace=!0,this.template=r,this.scope={date:"=",autoUpdate:"&?",isRelativeToServerDate:"&?",dateFormat:"@?",hasAgo:"&?",separateDatetime:"&?"},this.link=function(e){e.duration=t.$injector.instantiate(d,{scope:e})}}return e.$inject=["$injector"],e}();i.module(c,[o.a,s.moduleName,a.a]).directive("bbDuration",["$injector",function(e){return e.instantiate(u)}])},r6lH:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h}));var i=n("D57K"),o=n("nsO7"),s=n("wHJ2"),a=n("jhBu"),r=n("Sa5G"),c=n("0JpG"),l=n("pjml"),d=n("wgY5"),u=n("nmzr"),p=n("+O05"),m="ultra.service.telemetry",h="telemetry",g=function(){function e(e,t,n,i,o,s,a,r,c,l,d,u,p,m,h,g,b){this.cacheFactory=e,this.$q=t,this.entitlement=n,this.bbLocalize=i,this.ActivityVsGradeModel=o,this.ContentActivityInDetailModel=s,this.CourseActivityModel=a,this.CourseGradesModel=r,this.CourseNotificationsModel=c,this.MultimediaActivityInDetailModel=l,this.MultimediaStatisticsModel=d,this.NotificationUsers=u,this.StudentActivityModel=p,this.StudentGradesModel=m,this.SufficientDataModel=h,this.TelemetryDiscussionActivityModel=g,this.TelemetryDiscussionXrayModel=b,this.SUFFICIENT_DATA_KEY="SufficientData",this.sufficientDataCache=e.createCache("sufficientTelemetryData"),this.notificationsCache=e.createCache("notifications")}return e.prototype.loadActivityVsGradeData=function(e){return this.ActivityVsGradeModel.$find(e).$allow([404]).$asPromise()},e.prototype.loadStudentGradeData=function(e,t){return this.StudentGradesModel.$find(e,t?{userId:t}:{}).$allow([404,400]).$asPromise()},e.prototype.loadCourseGradeData=function(e){return this.CourseGradesModel.$find(e).$allow([404,400]).$asPromise()},e.prototype.loadStudentActivityData=function(e,t){return this.StudentActivityModel.$find(e,t?{userId:t}:{}).$allow([400]).$asPromise()},e.prototype.loadContentActivityInDetailData=function(e,t){return this.ContentActivityInDetailModel.$collection().getContentActivityInDetail(e,t).$asPromise()},e.prototype.loadMultimediaActivityInDetailData=function(e,t){return this.MultimediaActivityInDetailModel.$collection().getMultimediaActivityInDetail(e,t).$asPromise()},e.prototype.loadMultimediaStatisticsData=function(e,t){return this.MultimediaStatisticsModel.getMultimediaStatistics(e,t).$asPromise()},e.prototype.loadCourseActivityData=function(e){return this.CourseActivityModel.$find(e).$allow([400]).$asPromise()},e.prototype.loadNotificationUsers=function(e,t,n){var i={};return t&&(i.limit=t),n&&(i.offset=n),this.NotificationUsers.$find(e,i).$asPromise().then((function(e){return o.keyBy(e.users,"userId")}))},e.prototype.loadNotifications=function(e,t,n,i){return this.getNotificationsPromise(e,t,n,i).promise},e.prototype.loadDiscussionActivityData=function(e,t,n){return n?this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t,n).$asPromise():this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t).$asPromise()},e.prototype.loadDiscussionXrayReport=function(e,t,n){return this.TelemetryDiscussionXrayModel.getDiscussionXrayReport(e,t,n).$asPromise()},e.prototype.hasSufficientActivityData=function(e){return this.getSufficientDataPromise().promise.then((function(t){return!(!t||!t.coursesWithActivity)&&o.includes(t.coursesWithActivity,e)}))},e.prototype.hasSufficientGradeData=function(e){return this.getSufficientDataPromise().promise.then((function(t){return!(!t||!t.coursesWithGrades)&&o.includes(t.coursesWithGrades,e)}))},e.prototype.canViewAllUserData=function(e){return this.entitlement.hasCourseEntitlement(r.u.ViewGrades,e)},e.prototype.formatMessageRecipients=function(e){return(e||[]).map((function(e){return e.id})).join(",")},e.prototype.determineContentSupportsActivityData=function(e){var t=this.$q.defer();return p.a.isExternalSubmissionsAssessment(e)?t.resolve(!1):this.contentSupportsActivityData(e)?this.canViewAllUserData(e.courseId).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)})):t.resolve(!1),t.promise},e.prototype.contentSupportsActivityData=function(e){return(r.g.TestLink.isEqualTo(e.contentHandler)||r.g.UltraAssignment.isEqualTo(e.contentHandler))&&e.hasGradingColumn()},e.prototype.determinePanelSref=function(e,t){var n=this,i=this.$q.defer(),o={hasGrades:this.hasSufficientGradeData(e),hasActivity:this.hasSufficientActivityData(e),canViewAllUserData:this.canViewAllUserData(e)};return this.$q.all(o).then((function(o){o.hasGrades&&o.hasActivity?o.canViewAllUserData?i.resolve(n.createPanelSref(u.TelemetryViewType.INSTRUCTOR_CLASS,e,t)):i.resolve(n.createPanelSref(u.TelemetryViewType.STUDENT_PROGRESS,e,t)):i.reject()})).catch((function(e){i.reject(e)})),i.promise},e.prototype.createPanelSref=function(e,t,n){var i='({ courseId: "'+t+'"';return n&&(i+=', notificationId: "'+n+'"'),e.toString()+(i+=" })")},e.prototype.exportFilename=function(e,t,n,i,o){var s="";e&&(s=e.courseId+"_");var a=this.bbLocalize.formatDateSync(new Date,c.ILocaleDateFormat.ISO).replace(/[^0-9]/g,""),r="";t&&n&&t.id!==n.id&&(r=t.userName+"_");var l=i?"_"+i:"",d="";return o&&(d=o.replace(/\s+/g,"_")+"_"),s+r+d+a+l},e.prototype.getSufficientDataPromise=function(){var e=this.sufficientDataCache.get(this.SUFFICIENT_DATA_KEY);return e||(e={promise:this.SufficientDataModel.$new().$fetch().$allow([404,400]).$asPromise()},this.sufficientDataCache.put(this.SUFFICIENT_DATA_KEY,e)),e},e.prototype.getNotificationsPromise=function(e,t,n,i){var o=e+t+n+i,s=this.notificationsCache.get(o);if(!s){var a={};t&&(a.userId=t),n&&(a.includeDismissed=n),i&&(a.notificationType=i),(s={promise:this.CourseNotificationsModel.$find(e,a).$asPromise()}).promise.then((function(e){return e.currentStudent.forEach((function(e){e.ui={createdDay:d.utc(e.created).startOf("day").toDate()}})),e})),this.notificationsCache.put(o,s)}return s},e.$inject=["DSCacheFactory","$q",a.b,c.serviceName,l.yb.serviceName,l.zb.serviceName,l.Ab.serviceName,l.Bb.serviceName,l.Cb.serviceName,l.Fb.serviceName,l.Gb.serviceName,l.Ib.serviceName,l.Jb.serviceName,l.Kb.serviceName,l.Lb.serviceName,l.Db.serviceName,l.Eb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(g);s.module(m,[l.Q,a.a]).service(h,g)},rElr:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-chat",use:"icon-small-chat-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-chat"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},rtZE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var i=n("D57K"),o=n("nsO7"),s=n("wHJ2"),a="ultra.service.RecursionHelper",r="recursionHelper",c=function(){function e(e){this.$compile=e,this.compileContents=o.memoize(this.compileContents)}return e.prototype.compileContents=function(e,t){return this.$compile(t)},e.prototype.compile=function(e,t,n){var o=this;s.isFunction(n)&&(n={post:n});var a=t.contents();return t.empty(),{pre:n&&n.pre?n.pre:null,post:function(t,s){for(var r=[],c=2;c<arguments.length;c++)r[c-2]=arguments[c];var l=o.compileContents(e,a);l(t,(function(e){s.append(e)})),n&&n.post&&n.post.apply(null,Object(i.__spreadArrays)([t,s],r))}}},e.$inject=["$compile"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(c);s.module(a,[]).service(r,c)},"s+Z7":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("st/R"),n("sg6B");var i=n("5iHu"),o=n("wHJ2"),s=n("+wu9"),a="ultra.components.directives.typeahead-selected-options",r=function(){function e(e){this.scope=e}return e.prototype.removeOption=function(e){this.scope.removeOption({item:e}),this.scope.focusElementId&&i("#typeahead-search-box-"+this.scope.focusElementId).focus()},e.$inject=["scope"],e}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.replace=!0,this.template=s,this.scope={selectedOptions:"=",removeOption:"&",selectedOptionsListLabel:"@",focusElementId:"@?"},this.link=function(e){e.typeaheadSelectedOptions=t.$injector.instantiate(r,{scope:e})}}return e.$inject=["$injector"],e}();o.module(a,[]).directive("bbTypeaheadSelectedOptions",["$injector",function(e){return e.instantiate(c)}])},s1u2:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content content-header-bg" tabindex="0" role="columnheader"\n       ng-class="{\'is-restricted\': columnMetadata.isHiddenFromStudents(), \'is-unavailable\': !gradeGridColumnHeaderReborn.toolAvailable || !col.hasContextMenuOptions()}"\n       ng-click="gradeGridColumnHeaderReborn.popupMenu($event)"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderReborn.popupMenu">\n    <div bb-content-item-icon content-column="columnMetadata" show-alert-icon="showAlertIcon()" class="element-image" role="presentation"></div>\n    <div class="ellipse grade-name" title="{{columnMetadata.columnName}}" aria-labelledby="summary-info-{{columnMetadata.id}}">{{columnMetadata.columnName}}</div>\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="0" id="summary-points-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse points" title="{{gradeGridColumnHeaderReborn.getSchemaText()}}">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && !columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-count"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.gradedTip\'}" translate-attrs-values="{count: isGroupTest ? columnMetadata.summary.numStudentsGradedNeedsPosting + columnMetadata.summary.numStudentsPosted + columnMetadata.summary.numberOfStudentsOverriddenGradesToPost : columnMetadata.summary.numStudentsGraded()}"\n            bb-translate translate-values="{count: isGroupTest ? columnMetadata.summary.numStudentsGradedNeedsPosting + columnMetadata.summary.numStudentsPosted + columnMetadata.summary.numberOfStudentsOverriddenGradesToPost : columnMetadata.summary.numStudentsGraded()}">components.directives.grade.grid.graded</span>\n      <span class="grade-pipe"></span>\n      <span class="ellipse grade-posted-count"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.postedTip\'}" translate-attrs-values="{count: isGroupTest ? columnMetadata.summary.numStudentsPosted : columnMetadata.summary.numPosted}"\n            bb-translate translate-values="{count: isGroupTest ? columnMetadata.summary.numStudentsPosted : columnMetadata.summary.numPosted}">components.directives.grade.grid.posted</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    ng-class="{\'grade-complete-status\': !gradeGridColumnHeaderReborn.isRestricted()}"\n    tabindex="0"\n    bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()" class="grade-grid-header-summary"\n    tabindex="0"\n    bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    bb-translate-attrs="{\'title\': \'components.directives.grade.grid.completeLabel\'}"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="(!col.isShowSummary() || !columnMetadata.isVisibleToStudents()) && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-status"></span>\n    </div>\n  </div>\n\n  <div ng-if="columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse items-count" ng-if="columnMetadata.itemsCount !== undefined"\n        bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}"\n        translate-attrs-values="{count: columnMetadata.itemsCount}" bb-translate\n        translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n    </div>\n  </div>\n</div>\n'},s4xR:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-attendance",use:"icon-small-attendance-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attendance"><path d="M15 15V2H1v13h14zM4.5 1v1h7V1h-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 9l2 2 4-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},s52B:function(e,t){e.exports='<div class="rb-grid-container" ng-style="container.getContainerStyle()" role="grid">\n  <div class="rb-ax-focus-placeholder sr-only" tabindex="-1"></div>\n  <div class="rb-grid-header-wrapper">\n    <div class="rb-grid-header">\n      <div class="rb-grid-canvas" ng-style="container.getHeaderCanvasStyle()" role="rowgroup">\n        <div class="rb-row rb-header-row" ng-class="::container && {\'rb-row-border\': container.headerBorder} || undefined" role="row">\n          <div rb-grid-cell="col.headerTemplate" \n               class="rb-cell rb-header-cell" \n               ng-class="[\'rb-col-\' + col.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]" \n               role="columnheader"\n               ng-repeat="col in container.renderedColumns track by $index" \n               ng-click="container.callbacks.header($event)"\n               analytics-id="components.directives.gridContainer.header.{{::col.id}}.button">\n            <div class="rb-add-column-placeholder" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event, col)"></div>\n          </div>\n          <div class="rb-add-column-placeholder first" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event)"></div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="container.hasVScrollbar" class="rb-grid-scrollbar-placeholder-y"></div>\n  </div>\n  <div class="rb-grid-body" ng-style="container.getBodyStyle()">\n    <div class="rb-grid-canvas" ng-style="container.getBodyCanvasStyle()" role="rowgroup">\n      <div class="rb-row rb-cell-row" ng-repeat="row in container.renderedRows track by $index" role="row"\n          ng-class="[\'rb-row-position-\' + row.id, container && {\'rb-row-border\': container.rowBorder} || undefined]">\n        <div rb-grid-cell="col.cellTemplate"\n             class="rb-cell"\n             ng-class="[\'rb-col-\' + col.id, \'rb-row-\' + row.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]"\n             role="gridcell"\n             ng-repeat="col in container.renderedColumns track by $index"\n             ng-click="container.callbacks.cell($event)"\n             analytics-id="components.directives.gridContainer.callback"\n        ></div>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!container.hasHScrollbar" class="rb-grid-scrollbar-placeholder-x"></div>\n  <div class="rb-add-column" ng-if="::container && container.canAddColumn()">\n    <div class="column-header-button-wrapper" ng-mouseleave="container.columnAdder.leave()">\n      <a class="small button clear icon button-add-content hide" \n         href="javascript:void(0);" \n         ng-click="container.columnAdder.onClick($event)" \n         role="button" \n         aria-haspopup="true"\n         analytics-id="components.directives.grade.grid.addBtuAriaLabel.link">\n        <span class="sr-only" bb-translate>components.directives.grade.grid.addBtuAriaLabel</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},s5UK:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-arrow-left",use:"icon-small-arrow-left-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-left"><path d="M11 1L4 8l7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},sB2Z:function(e,t){e.exports='<div class="content-wrapper name" ng-class="{\'nocontent\': !content.canViewAsInstructor()}">\n  <ng-switch on="content.getContentDisplay().viewHandler()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n    <div ng-switch-when="resource/x-bb-folder" class="engagement-folder">\n      <bb-content-item-folder></bb-content-item-folder>\n    </div>\n    <a ng-switch-when="resource/x-bb-forumlink"\n       bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n       bb-prevent-click-if="content.isConditionalReleaseLocked()"\n       ng-attr-tabindex="{{ content.isConditionalReleaseLocked() ? -1 : 0 }}"\n       class="content-title"\n       analytics-id="content.item.engagement.outline.forumLink.link"\n       aria-describedby="activity-indicator-{{::content.id}}"\n    >\n      <span>{{ content.title }}</span>\n    </a>\n    <div ng-switch-default class="content-title">{{ content.title }}</div>\n    <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator" status="active"></bb-svg-icon>\n  </ng-switch>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="group-name">\n      <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n      <a href="javascript:void(0);"\n         ng-if="contentItemBase.hasViewGroupsAsAdmin"\n         ng-click="contentItemBase.editGroups()"\n         analytics-id="content.item.engagement.outline.contentItemBase.editGroups.link"\n      >\n        <bb-group-count content="content"></bb-group-count>\n      </a>\n      <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin">\n        <bb-group-count content="content"></bb-group-count>\n      </span>\n      <div ng-if="!contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="title">\n        <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    class="lock-info"\n    tabindex="0"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="student-created-info" ng-if="::contentItemEngagementOutline.isDiscussionCreatedByStudent()">\n    <span bb-translate="components.directives.content-item-base.content.discussionAuthorship.student"></span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    open-panel-on-restricted="true"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemEngagementOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}.link">\n        <span bb-translate="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}"></span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},"sOA/":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zYa8"),o=n("RrOo"),s="ultra.components.directives.bbUiIcon.Test";Object(i.a)(o.Test,s,"bbUiIconTest")},sZYy:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-medium-goal",use:"icon-medium-goal-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-goal"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 1h22v4H1zM6 20h12v3H6z" /><path d="M10 14v6M14 14v6" stroke-width="2" /><path d="M4 5c0 6 3 9 8 9s8-3 8-9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 8H1c0 9.5 9 9 9 9M20 8h3c0 9.5-9 9-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},sa5q:function(e,t){e.exports='<div ng-switch on="content.canViewAsInstructor() || !content.shouldRestrict()">\n  \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n  <a class="content-title"\n     bb-peek-sref="content-manage.edit.document({id:content.id})"\n     ng-switch-when="true"\n     ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}"\n     aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n     analytics-id="content.item.page.edit.document.link"><span>{{ content.title }}</span></a>\n  <span class="content-title"\n        ng-switch-default\n        ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}">{{ content.title }}</span>\n</div>'},sg6B:function(e,t,n){},"st/R":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-clear",use:"icon-small-clear-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-clear"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM10 6l-4 4M6 6l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},suMx:function(e,t,n){"use strict";n("WXD6"),n("q1bP");var i=n("wHJ2"),o=n("Nyb7"),s="ultra.components.directives.statistics.complexStatistic",a=function(){function e(e,t,n){this.scope=e,this.element=t,this.$compile=n;var i=this.$compile(this.scope.item().complexTemplate)(this.scope.item().complexScope);t.append(i)}return e.$inject=["scope","element","$compile"],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="A",this.template=o,this.scope={item:"&"},this.link=function(e,n){e.complexStatistic=t.$injector.instantiate(a,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(s,[]).directive("bbComplexStatistic",["$injector",function(e){return e.instantiate(r)}]);var c=n("zphb"),l=function(){function e(e,t){this.scope=e,this.$sce=t,this.scope.item().trusted=t.trustAsHtml(this.scope.item().data)}return e.$inject=["scope","$sce"],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="A",this.template=c,this.scope={item:"&"},this.link=function(e){e.simpleStatistic=t.$injector.instantiate(l,{scope:e})}}return e.$inject=["$injector"],e}();i.module("ultra.components.directives.statistics.simpleStatistic",[]).directive("bbSimpleStatistic",["$injector",function(e){return e.instantiate(d)}]);var u=n("c2Z8");n.d(t,"a",(function(){return p}));var p="ultra.components.directives.statistics",m=function(){function e(e){var t=this;this.scope=e,this.smallPerRow=e.smallPerRow()||1,this.largePerRow=e.largePerRow()||4,this.scope.$watch("config()",(function(e){e&&(t.config=e.length>10?e.slice(0,10):e,t.total=t.config.length)}))}return e.$inject=["scope"],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="AE",this.template=u,this.scope={config:"&",smallPerRow:"&",largePerRow:"&"},this.link=function(e){e.statistics=t.$injector.instantiate(m,{scope:e})}}return e.$inject=["$injector"],e}();i.module(p,["dibari.angular-ellipsis",s,"ultra.components.directives.statistics.simpleStatistic"]).directive("bbStatistics",["$injector",function(e){return e.instantiate(h)}])},tTiy:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options"\n          data-show-add-options ng-click="addContentButton.toggleMenu()"\n          ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n          aria-expanded="{{addContentButton.isMenuVisible}}"\n          aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n          aria-label="{{addContentButton.addButtonAriaLabel}}"\n          ng-focus="addContentButton.showButton()"\n          ng-blur="addContentButton.hideButton()"\n          analytics-id="components.directives.add-content-button.attempts.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        monitor-leave="true"\n        allow-multiple="true"\n        target-div="{{\'#\' + fileListViewId}}"\n        disable-drag="disableDrag && disableDrag()"\n        hide-transclude-during-upload="false"  is-third-party-upload="false"\n        third-party-download-handler="addContentButton.downloadFile"\n        skip-zip-file-check="true">\n        <div class="columns medium-12" ng-class="{\'medium-center\': attempt.isMobile}">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n             ng-click="addContentButton.toggleMenu()"\n             analytics-id="components.directives.add-content-button.attempts.fileUpload.link">\n            <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n            <span bb-translate>course.content.fileUpload.addFiles</span>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n    <li ng-if="::!addContentButton.isMobile">\n      \x3c!-- Skip zip file check, assignment does not support unzip file(LRN-101238) --\x3e\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}">\n        <div class="columns medium-12">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-one-drive\n             is-flatten="false"\n             primary-key="fileListViewId"\n             attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n             bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n             ng-click="addContentButton.toggleMenu(\'OneDriveUpload\')"\n             analytics-id="components.directives.add-content-button.attempts.oneDrive.link">\n            <div>\n              <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n            </div>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},tcMd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),o=(n("wItK"),n("6Fqm"),n("67oV"),n("nsO7")),s=n("+brj"),a=n("yC9S"),r=n("aHpC"),c=n("9cvu"),l="ultra.components.directives.pageSizeSelector";!function(){function e(e){this.browserStorage=e,this.componentId="page-size-selector-id-"+t.idCounter,this.componentDescribeId="page-size-selector-describe-id-"+t.idCounter++}var t;t=e,e.prototype.$onInit=function(){var e=this;this.localStorageKey?this.browserStorage.getFromStorage(this.localStorageKey,s.a.LocalStorage).then((function(t){e.initPagination(t)})):this.initPagination()},e.prototype.initPagination=function(e){this.availablePageSizes=t.AVAILABLE_PAGE_SIZES.map((function(e){return{index:e,name:e.toString(),nature:"_"+e,value:e.toString()}})),this.mySelectedPageSize=e&&o.find(this.availablePageSizes,(function(t){return t.value===e}))||this.availablePageSizes[t.DEFAULT_PAGE_SIZE_INDEX],this.onChange({pageSize:this.mySelectedPageSize.index})},e.prototype.changePageSize=function(e){this.mySelectedPageSize=e,this.onChange({pageSize:this.mySelectedPageSize.index}),this.localStorageKey&&this.browserStorage.saveToStorage(this.localStorageKey,this.mySelectedPageSize.value,s.a.LocalStorage)},e.AVAILABLE_PAGE_SIZES=[25,50,100],e.DEFAULT_PAGE_SIZE_INDEX=0,e.idCounter=1,e=t=Object(i.__decorate)([Object(a.a)({moduleName:l,componentName:"bbPageSizeSelector",template:c,bindings:{onChange:"&",localStorageKey:"@?"},requireModules:[s.b]}),Object(i.__param)(0,Object(r.b)(s.c))],e)}()},tecA:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return p}));var i=n("wHJ2"),o=n("+4Px"),s=n("g66W"),a="down",r="text-editor-update-original-value",c="text-editor-reset-to-original-value",l="text-editor-viewValue-initialized",d="text-editor-set-pristine",u="text-editor-empty",p=function(){function e(e,t,n,i,o){var s=this;this.scope=e,this.element=t,this.ctrl=n,this.bbLocalize=i,this.bbUltraState=o,this.focusOnAuthorControls=!1,this.isTextTouched=!1,this.myDirection=a,this.preventBlur=!1,this.currentStateName=o.current.name,e.disableInlineEditing=null!=e.disableInlineEditing&&e.disableInlineEditing,this.scope.$stopDigestPropagation=!0,this.originalNgModel=this.scope.ngModel,e.direction&&null!=e.direction()&&(this.myDirection=e.direction());var p=!(this.scope.ngModel&&this.scope.ngModel.length);e.$emit(u,{textEditor:this,isEmpty:p}),e.$root.$on("bb-bbml-editor-bbml-pre-redraw",(function(){s.updateOriginalValues()})),e.$on(d,(function(){s.isTextTouched=!1})),e.$on(l,(function(){s.truncatedViewValue=s.ctrl.$viewValue})),e.$on(c,(function(){s.isDirty()&&s.updateOriginalValues(),s.resetEditor(!1)})),e.$on(r,(function(){s.updateOriginalValues(),s.isTextTouched=!1})),e.$on("$destroy",(function(){s.isTextTouched=!1}))}return e.prototype.isEditorDirty=function(){return this.isTextTouched},e.prototype.getContentLabel=function(){var e=this.getPlaceholderKey();return this.truncatedViewValue||e},e.prototype.getPlaceholderKey=function(){return this.scope.placeholderAttrsValues===this.originalPlaceholderAttrValues&&null!=this.placeholderText||(this.placeholderText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.scope.placeholderKey,params:this.scope.$eval(this.scope.placeholderAttrsValues)}),this.originalPlaceholderAttrValues=this.scope.placeholderAttrsValues),this.placeholderText},Object.defineProperty(e.prototype,"truncatedViewValue",{get:function(){return this._truncatedViewValue},set:function(e){var t=this.element.find(".editor-element"),n=t.length?t.text():void 0;this._truncatedViewValue=s.h(n,100)},enumerable:!0,configurable:!0}),e.prototype.onChange=function(e){e&&e.keyCode===o.u||this.scope.hasFocus&&(this.isTextTouched=!0,this.scope.onchangeFunc&&this.scope.onchangeFunc({event:e}))},e.prototype.onKeydown=function(e){},e.prototype.isUploadProgressModalOpen=function(){var e=i.element(".progress-indicator-modal");return e&&e.length>0},e.prototype.isAddContentSelectorOpened=function(){return this.bbUltraState.current.name.length>this.currentStateName.length&&s.k(this.bbUltraState.current.name,this.currentStateName)},e.prototype.onBeforeBlur=function(){return!this.preventBlur&&!this.scope.disableInlineEditing},e.prototype.onBlur=function(){return this.scope.hasFocus=!1,this.ctrl.$focused=!1,this.scope.onblurFunc&&this.scope.onblurFunc(),!0},e.prototype.onFocus=function(){this.focusOnAuthorControls=!1,this.scope.readonly()||this.scope.hasFocus||(this.scope.hasFocus=!0,this.ctrl.$focused=!0,this.scope.onFocusFunc&&this.scope.onFocusFunc(),this.scope.$emit("entering-edit-state"))},e.prototype.isDirty=function(){return!(this.originalText||this.isTextTouched)},e.prototype.updateOriginalValues=function(){this.scope.ngModel===this.originalNgModel&&(this.originalText=this.scope.ngModel,this.originalPlainText=this.scope.plainText)},e.prototype.restoreFromOriginalValues=function(){this.originalText||(this.originalText="",this.originalPlainText=""),this.scope.ngModel=this.originalText,this.scope.plainText=this.originalPlainText},e.prototype.resetEditor=function(e){this.restoreFromOriginalValues()},e.prototype.isValidInputLength=function(){var e=null;if(null!=this.scope.getInputMaxLength&&(e=this.scope.getInputMaxLength()),null==e)return!0;if(e){var t=this.scope.plainText;return!!t&&t.trim().length<=e}return!0},e}()},tka7:function(e,t,n){"use strict";var i=n("D57K"),o=n("nbDY"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Assign=new t("assign"),t.Unassign=new t("unassign"),t.Delete=new t("delete"),t.Retain=new t("retain"),t}(n.n(o).a);t.a=s},tmbA:function(e,t){e.exports='<bb-modal class="notification automatic-zero-setting-confirmation"\n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZeroSettings">\n  <div name="modal-contents">\n    \x3c!-- Instructions --\x3e\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n    \x3c!-- Past due zero: Unassign zero --\x3e\n    <div ng-if="!pastDueZero.isPastZeroAssigned">\n      <fieldset ng-if="modalTranslateOptions.choices && modalTranslateOptions.choices.length > 0"\n                class="fieldset-options">\n        <legend class="sr-only" bb-translate="{{ modalTranslateOptions.title.key }}"></legend>\n        <div class="option-item" ng-repeat="option in modalTranslateOptions.choices">\n          <input type="radio" \n                 name="{{ ::option.name }}" \n                 id="{{ ::option.id }}"\n                 ng-model="modalTranslateOptions.choiceModal"\n                 ng-value="option.value"\n                 analytics-id="components.directives.grade.pastDueZero.option.input.radio">\n          <label for="{{ ::option.id }}" bb-translate>{{ ::option.localizedKey }}</label>\n          <p ng-if="!!option.descriptionKey"\n             class="past-due-unassign-description"\n             bb-translate>\n            {{ ::option.descriptionKey }}\n          </p>\n        </div>\n      </fieldset>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="{{modalTranslateOptions.confirm.key}}"\n          bb-translate>\n    {{modalTranslateOptions.confirm.key}}\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="{{modalTranslateOptions.cancel.key}}"\n          bb-translate>\n    {{modalTranslateOptions.cancel.key}}\n  </button>\n</bb-modal>'},towz:function(e,t,n){},tqR7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("wHJ2"),o=n("lEL+"),s="ultra.components.directives.clickOutside",a=function(){function e(e,t,n,i,o){var s=this;this.scope=e,this.element=t,this.attrs=n,this.$document=i,this.timeout=o;var a=function(e){return s.applyExpression(e)},r=this.getContainer()||i;this.scope.$watch(this.attrs.isActive,(function(e,t){e?s.timeout((function(){r.on("click",a)}),s.scope,0,!1):r.off("click",a)})),this.scope.$on("$destroy",(function(){r.off("click",a)}))}return e.prototype.applyExpression=function(e){var t=this.element.is(e.target),n=this.element.has(e.target).length>0;t||n||this.scope.$apply(this.attrs.bbClickOutside)},e.prototype.getContainer=function(){if("currentPanelOnly"in this.attrs)for(var e=this.element;e.parent().length;)if((e=e.parent()).is(".bb-offcanvas-panel,#main-content-inner"))return e},e.$inject=["scope","element","attrs","$document",o.b],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.priority=100,this.restrict="A",this.compile=function(e,n){return{pre:function(e,n,i){return t.$injector.instantiate(a,{scope:e,element:n,attrs:i})}}}}return e.$inject=["$injector"],e}();i.module(s,[]).directive("bbClickOutside",["$injector",function(e){return e.instantiate(r)}])},trPQ:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li ng-if="cell.canBeView" \n        role="presentation">\n        <button role="menuitem" \n                class="js-view-submission button clear"  \n                ng-click="cell.view()"\n                analytics-id="components.directives.grade.grid.viewItem">\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n        </button>\n    </li>\n    <li ng-class="{disable: !isReadyToPost()}"\n        ng-if="cell.canPost()"\n        role="presentation">\n        <button role="menuitem" \n                class="js-post-grade button clear" \n                ng-click="post()" \n                ng-disabled="!isReadyToPost()"\n                analytics-id="components.directives.grade.grid.post">\n          <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n          <bb-translate class="ellipse" bb-translate>components.directives.grade.grid.post</bb-translate>\n        </button>\n    </li>\n  </ul>\n</div>'},u9Ip:function(e,t){e.exports='<div class="grade-input-wrapper" ng-class="{\'has-validation-error\': !!input.form[id].$invalid}">\n  <div class="left">\n    <bb-inline-validation\n      show-error="!!input.form[id].$invalid"\n      bb-translate-attrs="{ \'error-message\': localizedErrorMessageKey }"\n      ng-show="!input.isRubricEvalMode()">\n\n      <div\n        ng-class="{\'show-total\': input.shouldShowTotalPoints(), \'is-multiple\': isGroupGradeMultiple(), \'is-in-progress\': isGroupGradeInProgress(), \'group-grade-input\': !!forGroup(), \'readonly\': readonly()}"\n        class="js-pill-box wrapping-input-style">\n        <div bb-foundation-defer>\n          <input name="{{::id}}" autocomplete="off"\n            ng-class="{\'group-multiple\': isGroupGradeMultiple(), \'group-in-progress\': isGroupGradeInProgress()}"\n            pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px"\n            pu-elastic-input-width-delta="8" type="text" placeholder="--" aria-label="{{ input.getAriaLabel() }}"\n            aria-readonly="{{ readonly() }}" ng-model="input.gradeDisplayItem.displayValue" ng-readonly="readonly()"\n            data-dropdown="performanceCodes-{{id}}" title="{{input.gradeDisplayItem.perfCodeDesc}}"\n            ng-blur="input.validateAndSave()" ng-change="input.validate()" ng-focus="input.onFocus()"\n            class="js-grade-input" analytics-id="components.directives.grade.performanceCode.input.text">\n\n          <ul ng-if="::canOverrideByGradeNotation()" id="performanceCodes-{{id}}"\n            class="f-dropdown performance-code-options" data-dropdown-content>\n            <li class="performance-option-header" bb-translate>\n              components.directives.grade.grade-input.selectPerformanceCode</li>\n            <li ng-repeat="perfCode in gradeNotations()">\n              <a href="javascript:void(0);" ng-click="input.clickGradeNotation(perfCode)"\n                class="performance-code-potion" title="{{perfCode.description}}"\n                analytics-id="components.directives.grade.performanceCode.link">\n                <span class="code">{{perfCode.code}}</span>\n                <span class="description">{{perfCode.description}}</span>\n              </a>\n            </li>\n          </ul>\n        </div>\n\n        \x3c!--TOTAL POINTS--\x3e\n        \x3c!-- Fix ULTRA-15280.\n        If there is gradeDetail, we should use its pointsPossible as the total.there are 2 cases:\n         - for overall grade (and calculations), we use the default value 100,\n         - for common column, assignment, etc. we use column.possible. --\x3e\n        <span ng-if="input.shouldShowTotalPoints() && !input.isRubricEvalMode()" class="points-text" bb-translate\n          translate-values="{total: input.totalPoints}">\n          components.directives.grade.grade-input.points\n        </span>\n      </div>\n    </bb-inline-validation>\n\n    <a ng-show="input.isRubricEvalMode()" class="has-rubric text wrapping-input-style readonly"\n      ng-class="{\'show-total\': input.shouldShowTotalPoints(), \'is-multiple\': isGroupGradeMultiple(), \'is-in-progress\': isGroupGradeInProgress(), \'group-grade-input\': !!forGroup(), \'disable-click\': !!disableRubricEvalClick()}"\n      aria-disabled="{{disableRubricEvalClick()}}"\n      ng-click="input.openRubricEvaluation()" href="javascript:void(0);"\n      analytics-id="components.directives.grade.openRubric.link">\n      <span>\n        \x3c!--TODO: Figure out srUsername --\x3e\n        <span class="sr-only" bb-translate translate-values="{username: input.srUsername}">components.directives.grade.grade-input.rubricButtonAlt</span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span name="{{id}}" class="grade-point-value" ng-class="{\'group-multiple\': isGroupGradeMultiple(), \'group-in-progress\': isGroupGradeInProgress()}">\n          {{input.gradeDisplayItem.displayValue || \'--\'}}&nbsp;\n        </span>\n\n        \x3c!--TOTAL POINTS--\x3e\n        <span ng-if="input.shouldShowTotalPoints() && input.isRubricEvalMode()" class="points-text" bb-translate\n          translate-values="{total: input.totalPoints}">\n          components.directives.grade.grade-input.points\n        </span>\n      </span>\n    </a>\n  </div>\n  <div ng-if="showOverrideIndicator()" class="left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.overrideIndicator</span>\n  </div>\n</div>'},uAJz:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-peer-review",use:"icon-small-peer-review-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-peer-review"><path d="M6.5 10C7.8807 10 9 8.8807 9 7.5S7.8807 5 6.5 5 4 6.1193 4 7.5 5.1193 10 6.5 10zM6.5 10C3.2288 10 1 12.5 1 15M11.5 6C12.8807 6 14 4.8807 14 3.5S12.8807 1 11.5 1 9 2.1193 9 3.5 10.1193 6 11.5 6zM12 6c.7226 0 1.4451.464 2 1.0569M10 13l2 2 3-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},uFkY:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l}));var i="assessment:reload-on-attempt-feedback-save",o="single-attempt-grading-list:reload-on-feedback-save",s="grade-comment-update";function a(e,t,n){return e.$broadcast(i,t,n)}function r(e,t){return e.$on(i,t)}function c(e,t){return e.$broadcast(o,t)}function l(e,t){return e.$on(o,t)}},"uj+y":function(e,t,n){},ujI6:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));n("RB+a"),n("Qc1G");var i=n("wHJ2"),o=n("5iHu"),s=n("tqR7"),a=n("H8CZ"),r=n("lEL+"),c=n("+4Px"),l=n("ytQ2"),d="ultra.components.directives.foundationOffcanvas",u="OFFCANVASE-TOGGLE-CLOSE",p="OFFCANVAS-TOGGLE-OPEN",m=function(){function e(e,t,n,i,s,a,r){var l=this;this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$parse=s,this.$q=a,this.timeout=r,this.overrideButtonClass=!1,this.isPanelOpen=!1,this.justOpenedPanel=!1,this.isFromKeyBoard=!1,this.wiredup=!1,this.position="right",this.dialogModel=!1,this.initialProperties(),r((function(){if(l.openButtonElement=o("#"+l.attrs.bbFoundationOffcanvasOpenButton),0===l.openButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find an "Open Menu" button with an ID of '+l.attrs.bbFoundationOffcanvasOpenButton);l.openButtonElement.on("click.bbFoundationOffcanvas",(function(){l.scope.$apply((function(){l.togglePanel()}))})),l.openButtonElement.on("keydown.bbFoundationOffcanvas",(function(e){e.keyCode===c.f&&(l.isFromKeyBoard=!0)}))}),e,0,!1)}return e.prototype.initialProperties=function(){var e=this;this.attrs.bbFoundationOffcanvasPosition&&(this.position=this.attrs.bbFoundationOffcanvasPosition),this.attrs.bbFoundationOffcanvasEventDelegate&&(this.scope.$on(p,(function(){e.openPanel()})),this.scope.$on(u,(function(){e.closePanel()}))),this.attrs.bbFoundationOffcanvasDialogModel&&(this.dialogModel=this.attrs.bbFoundationOffcanvasDialogModel)},e.prototype.wireup=function(){var e=this;return this.wiredup=!0,this.timeout((function(){if(e.closeButtonElement=o("#"+e.attrs.bbFoundationOffcanvasCloseButton),0===e.closeButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find a "Close Menu" button with an ID of '+e.attrs.bbFoundationOffcanvasCloseButton);if(e.wrapperElement=e.element,e.offcanvasPanelElement=e.element.children().children(),1!==e.offcanvasPanelElement.length)throw new Error("bbFoundationOffcanvas directive must have exactly one child element. Fix the usage in the html template.");if(e.offcanvasPanelElement.addClass(e.position+"-off-canvas-menu"),e.attrs.bbFoundationOffcanvasOverrideButtonClass&&(e.overrideButtonClass=e.$parse(e.attrs.bbFoundationOffcanvasOverrideButtonClass)(e.scope)),e.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),e.closeButtonElement.addClass("exit-off-canvas-overlay").on("click.bbFoundationOffcanvas",(function(){e.scope.$apply((function(){e.closePanel()}))})),e.offcanvasPanelElement.find("a, button").last().on("keydown.bbFoundationOffcanvas",(function(t){t.keyCode!==c.u||t.shiftKey||(t.preventDefault(),e.scope.$apply((function(){e.closePanel()})))})),e.offcanvasPanelElement.find("a, button").first().on("keydown.bbFoundationOffcanvas",(function(t){t.keyCode===c.u&&t.shiftKey&&(t.preventDefault(),e.scope.$apply((function(){e.closePanel()})))})),e.scope.$on("foundation-offcanvas-close-panel",(function(){e.closePanel()})),null!=e.attrs.bbFoundationOffcanvasCommonParent){if(e.commonParent=o("#"+e.attrs.bbFoundationOffcanvasCommonParent),0===e.commonParent.length)throw new Error("The bbFoundationOffcanvas directive couldn't find a common parent element with an ID of "+e.attrs.bbFoundationOffcanvasCommonParent)}else e.commonParent=o(e.wrapperElement).parents().has(e.closeButtonElement).first();if(e.commonParent.hasClass("group-list")||e.commonParent.addClass("off-canvas-wrap off-canvas-overlay"),!e.overrideButtonClass){var t=e.offcanvasPanelElement.find("li").not(".ng-hide").length;e.commonParent.addClass("buttons-"+t)}a.b(e.commonParent,(function(t){return e.isPanelOpen&&(t.data.noTransitions||"right"===t.originalEvent.propertyName)&&(e.isFromKeyBoard?e.offcanvasPanelElement.find("a, button").first().focus():(e.offcanvasPanelElement.parent().attr("tabindex",0),e.offcanvasPanelElement.parent().focus())),!1})),e.element.foundation(),e.scope.$on("$destroy",(function(){e.element.off("click.bbFoundationOffcanvas"),e.closeButtonElement.off("click.bbFoundationOffcanvas"),e.offcanvasPanelElement.find("a, button").last().off("keydown.bbFoundationOffcanvas"),e.offcanvasPanelElement.find("a, button").first().off("keydown.bbFoundationOffcanvas"),e.commonParent.removeClass("off-canvas-wrap off-canvas-overlay")}))}),this.scope,0,!1)},e.prototype.getPosition=function(){switch(this.position){case"right":return"left";case"top":return"bottom";case"bottom":return"top";case"left":default:return"right"}},e.prototype._openPanel=function(){var e=this;this.offcanvasPanelElement.css("display","block"),this.justOpenedPanel=!0,this.timeout((function(){e.offcanvasPanelElement.foundation("offcanvas","show","move-"+e.getPosition()),e.isPanelOpen=!0,e.offcanvasPanelElement.find("a, button").attr("tabindex","0"),e.justOpenedPanel=!1}),this.scope,0,!1)},e.prototype.openPanel=function(){var e=this;if(this.wiredup)this._openPanel();else{var t=this.$q.defer();this.scope.$watch("::foundationOffcanvas.wiredup",(function(e){e&&t.resolve()})),this.$q.all([this.wireup(),t.promise]).then((function(){e._openPanel()}))}},e.prototype.closePanel=function(){var e=this;this.offcanvasPanelElement.foundation("offcanvas","hide","move-"+this.getPosition()),this.isPanelOpen=!1,this.isFromKeyBoard=!1,this.offcanvasPanelElement.parent().removeAttr("tabindex"),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.openButtonElement.focus(),this.timeout((function(){e.isPanelOpen||e.offcanvasPanelElement.css("display","none")}),this.scope,300,!1)},e.prototype.handleClickOutside=function(){this.dialogModel||o("body").hasClass("modal-open")||this.justOpenedPanel||this.closePanel()},e.prototype.togglePanel=function(){this.isPanelOpen?this.closePanel():this.openPanel()},e.$inject=["scope","element","attrs","$compile","$parse","$q",r.b],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.transclude=!0,this.restrict="E",this.link=function(e,n,i){if(null==i.bbFoundationOffcanvasOpenButton||null==i.bbFoundationOffcanvasCloseButton)throw new Error('Please provide jQuery selectors for both the "Open Menu" and "Close Menu" buttons');var o=i.$observe("bbFoundationOffcanvasCloseButton",(function(s){s&&(e.foundationOffcanvas=t.$injector.instantiate(m,{scope:e,element:n,attrs:i}),o())}))},this.template=l}return e.$inject=["$injector"],e}();i.module(d,[s.a,r.a]).directive("bbFoundationOffcanvas",["$injector",function(e){return e.instantiate(h)}])},vEAu:function(e,t){e.exports='<div class="multiple-submissions-grading-bar aggregate-grading-bar" bb-foundation-defer>\n  <div class="override-notification" ng-if="::gradingBar.showOverrideIndicator()" bb-translate>components.directives.grade.grading-bar.override-notification.multiple-submission</div>\n  <div class="aggregate-grading-bar-inner">\n    <div class="aggregate-header">\n      <span class="aggregate-header-text" bb-translate>components.directives.grade.grading-bar.final-score</span>\n      <span class="aggregate-header-sub-text" bb-translate>{{::gradingBar.getAggregationModelLabelKey()}}</span>\n    </div>\n\n    <bb-display-grade-pill grade="::gradeDetail" column="::column()"></bb-display-grade-pill>\n  </div>\n</div>'},vcLy:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-started",use:"icon-small-started-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-started"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 8H4s0 4 4 4 4-4 4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10.8247 9a3.594 3.594 0 01-.2191.5528c-.1907.3814-.461.7323-.8478.9901C9.3773 10.7966 8.825 11 8 11c-.825 0-1.3773-.2034-1.7578-.4571-.3868-.2578-.657-.6087-.8478-.9901A3.5857 3.5857 0 015.1754 9h5.6493z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},viYV:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li role=“presentation”>\n        <button role="menuitem" \n                class="js-view-submission button clear" \n                ng-click="cell.view()" \n                ng-disabled="!cell.canBeView"\n                analytics-id="components.directives.grade.grid.viewItemRecord" >\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  course-org-token-resolver class="ellipse">components.directives.grade.grid.viewItemRecord</bb-translate>\n        </button>\n    </li>\n  </ul>\n</div>'},"w0/N":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-rubric",use:"icon-small-rubric-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-rubric"><path d="M11 12h4v3h-4v-3zM4 12h4v3H4v-3zM1 12v3M1 5v3M11 5h4v3h-4V5zM4 5h4v3H4V5zM8 1H4M15 1h-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},wAzH:function(e,t,n){},wItK:function(e,t,n){},wJOA:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n     tabindex="0"\n     ng-click="gradeGridColumnOverallReborn.enterEditor($event)"\n     analytics-id="components.directives.grade.grid.gradeGridColumnOverallReborn.enterEdit"\n>\n  <div class="overall-display-grade" ng-class="{\'editor-disable\': gradeGridColumnOverallReborn.disabledEditor}"\n       aria-label="{{gradeGridColumnOverallReborn.ariaLabelContent}}">\n    \x3c!--<bb-display-grade column="col.data" display-type="GradeColor" grade-detail="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade>--\x3e\n    <bb-display-grade-pill column="col.data" grade="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade-pill>\n  </div>\n</div>'},wKTs:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-upload",use:"icon-small-upload-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload"><path d="M14 5h1v9H1V5h1M6 4l2-2 2 2M8 10V2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},wnWX:function(e,t,n){},wtKk:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return b}));var i=n("D57K"),o=(n("dkOF"),n("r+pC"),n("wHJ2")),s=n("jO50"),a=n("+fEV"),r=n("0JpG"),c=n("+e2k"),l=n("TnpK"),d=n("QaOk"),u=n("+4Px"),p=n("X455"),m=n("oQrK"),h=n("aHpC"),g="ultra.components.directives.sliderTabNavigation",b="consultTabStatus",f=function(){function t(e,t,n,i,o,s,a){var r=this;this.scope=e,this.$rootScope=t,this.tabElement=n,this.$q=i,this.ultraState=o,this.membership=s,this.localizeService=a,this.isDesktop=m.a.detect().desktop(),this.navigationBlocker={navigationPromise:null},this.closeParentPeek=!1,this.navigationBlockedWasHandled=!1,this.showLoader=!1,this.nextTabFocusNameId="",this.isStudent=this.membership.isStudentMembership(),this.isRTL=this.localizeService.isRTL(this.scope),this.registerStateListener(),this.scope.$watch("tabs",(function(){r.initTemplateView()}),!0)}return t.prototype.initTemplateView=function(){var e=this.getTabFromState();e?this.isDesktop&&e.nameId===this.scope.tabs.transcludedSection.nameId?this.ultraState.goPeekState(this.scope.tabs.browsableSection.main.stateRoute,this.scope.tabs.browsableSection.main.stateArgs):this.activeTab=e:this.activeTab=this.isDesktop?this.scope.tabs.browsableSection.main:this.scope.tabs.transcludedSection},t.prototype.getTabFromState=function(e){var t=this,n=e?e.name:this.ultraState.current.name;return this.stateMatches(this.scope.tabs.transcludedSection.stateRoute,n)?this.scope.tabs.transcludedSection:this.stateMatches(this.scope.tabs.browsableSection.main.stateRoute,n)?this.scope.tabs.browsableSection.main:this.scope.tabs.browsableSection.browsableTabs.find((function(e){return t.stateMatches(e.stateRoute,n)}))},t.prototype.stateMatches=function(e,t){return new RegExp(e+"$").test(t)},t.prototype.registerStateListener=function(){var e=this;this.scope.$on("$stateChangeStart",(function(t,n,i,o,s){return e.isClosingParent(n)||e.getTabFromState(n)?e.isDesktop&&e.stateMatches(e.scope.tabs.browsableSection.main.stateRoute,o.name)&&e.stateMatches(e.scope.tabs.transcludedSection.stateRoute,n.name)?(e.closeParentPeek=!0,e.checkTabStatusAndBlockNavigation(t)):e.isClosingParent(n)&&e.activeTab.enableModalBlockNavigation?(e.closeParentPeek=!0,e.checkTabStatusAndBlockNavigation(t)):!e.isClosingParent(n)&&e.isChangingTab(n)&&(e.closeParentPeek=!1,e.activeTab.enableModalBlockNavigation&&e.getTabFromState(o))?(e.nextTab=e.getTabFromState(n),e.checkTabStatusAndBlockNavigation(t)):(e.activeTab=e.getTabFromState(n),e.showLoader=!0,e.$q.resolve(void 0)):e.$q.resolve(void 0)})),this.scope.$on("$stateChangeSuccess",(function(){e.navigationBlockedWasHandled=!1,e.showLoader=!1}))},t.prototype.isClosingParent=function(e){return!this.navigationBlockedWasHandled&&e.name.indexOf(this.scope.tabs.transcludedSection.stateRoute)<0},t.prototype.isChangingTab=function(e){return!this.navigationBlockedWasHandled&&this.activeTab&&!this.stateMatches(this.activeTab.stateRoute,e.name)},t.prototype.checkTabStatusAndBlockNavigation=function(e){var t=this;return e.preventDefault(),this.$rootScope.$broadcast(b,this.activeTab.nameId,this.navigationBlocker),this.navigationBlocker.navigationPromise?this.navigationBlocker.navigationPromise.then((function(){t.resumeNavigation()})):(this.resumeNavigation(),this.$q.resolve(void 0))},t.prototype.resumeNavigation=function(){this.navigationBlockedWasHandled=!0,this.closeParentPeek?this.ultraState.leavePeekState(this.ultraState.current.name):(this.activeTab=this.nextTab,this.showLoader=!0,this.ultraState.goPeekState(this.activeTab.stateRoute,this.activeTab.stateArgs))},t.prototype.goToTab=function(e){this.ultraState.goPeekState(e.stateRoute,e.stateArgs)},t.prototype.goBack=function(){this.nextTabFocusNameId=this.activeTab.nameId,this.ultraState.goPeekState(this.scope.tabs.browsableSection.main.stateRoute,this.scope.tabs.browsableSection.main.stateArgs)},t.prototype.shouldRenderTranscludedElement=function(){return this.activeTab&&this.activeTab.title===this.scope.tabs.transcludedSection.title},t.prototype.shouldRenderPeekRoutedElement=function(){return this.activeTab&&this.activeTab.title!==this.scope.tabs.transcludedSection.title},t.prototype.shouldRenderTabs=function(){return this.activeTab&&this.activeTab.nameId===this.scope.tabs.browsableSection.main.nameId&&this.scope.tabs.browsableSection.browsableTabs.length>0},t.prototype.handleTabKeyDown=function(t,n){if(t.keyCode===u.t)return t.preventDefault(),void this.goToTab(n);if(t.keyCode!==u.i){if(t.keyCode===u.e){t.preventDefault();var i=this.scope.tabs.browsableSection.browsableTabs.length;if(i>0)return void e("#slider-tab-"+this.scope.tabs.browsableSection.browsableTabs[i-1].nameId).focus();e("#slider-tab-"+this.scope.tabs.browsableSection.main.nameId).focus()}}else{t.preventDefault();var o=this.isDesktop?this.scope.tabs.browsableSection.browsableTabs[0].nameId:this.scope.tabs.transcludedSection.nameId;e("#slider-tab-"+o).focus()}},t.prototype.handleBackArrowKeyDown=function(e){e.keyCode===u.u&&e.shiftKey&&e.preventDefault()},t.prototype.handleLastElementFocus=function(){this.tabElement.find(".slider-tab-navigation-desktop__browsable-section-go-back").focus()},t=Object(i.__decorate)([Object(i.__param)(0,Object(h.b)("$scope")),Object(i.__param)(1,Object(h.b)("$rootScope")),Object(i.__param)(2,Object(h.b)("$element")),Object(i.__param)(3,Object(h.b)("$q")),Object(i.__param)(4,Object(h.b)(l.d)),Object(i.__param)(5,Object(h.b)(p.d)),Object(i.__param)(6,Object(h.b)(r.serviceName))],t)}(),v=function(){this.controller=f,this.controllerAs="sliderTabNavigation",this.template=m.a.detect().desktop()?s:a,this.transclude=!0,this.scope={tabs:"="}};o.module(g,[c.a,d.a]).directive("bbSliderTabNavigation",["$injector",function(e){return e.instantiate(v)}])}).call(this,n("5iHu"))},wy9x:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("wHJ2"),o=n("Jwnl"),s="ultra.components.directives.content.contentItem.contentItemType.contentItemFolder",a=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n}return e.prototype.toggleFolder=function(){this.scope.$emit("toggle-folder",this.scope.content)},e.prototype.shouldAlignMiddle=function(){var e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))},e.$inject=["scope","element","attrs"],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=o,this.scope=!1,this.link=function(e,n,i){e.contentItemFolder=t.$injector.instantiate(a,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(s,[]).directive("bbContentItemFolder",["$injector",function(e){return e.instantiate(r)}])},xAaQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("wHJ2"),o=n("wy9x"),s=n("jhBu"),a=n("Sa5G"),r=n("TnpK"),c=n("sB2Z"),l="ultra.components.directives.content.contentItem.contentItemEngagementOutline",d=function(){function e(e,t,n){var i=this;this.scope=e,this.entitlementService=t,this.ultraState=n,this.entitlementService.hasCourseEntitlement(a.f.ModifyContent,this.scope.content.courseId).then((function(e){i.entitledToModifyContent=e}))}return Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.openConditionalRelease=function(){this.isCourseCompletedAndInInstructorView()||this.ultraState.goPeekState("conditional-release",{id:this.scope.content.id})},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()},e.prototype.isDiscussionCreatedByStudent=function(){var e,t=!1,n=null===(e=this.scope.content.contentDetail)||void 0===e?void 0:e["resource/x-bb-forumlink"];return n&&(t=n.isDiscussionCreatedByStudent),!!t},e.$inject=["scope",s.b,r.d],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=c,this.scope=!1,this.link=function(e){e.contentItemEngagementOutline=t.$injector.instantiate(d,{scope:e})}}return e.$inject=["$injector"],e}();i.module(l,[o.a,r.b]).directive("bbContentItemEngagementOutline",["$injector",function(e){return e.instantiate(u)}])},xS64:function(e,t,n){},xcel:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k}));var i=n("wHJ2"),o=n("nsO7"),s=n("LN5R"),a=n("o5Lu"),r=n("lEL+"),c=n("0JpG"),l=n("jhBu"),d=n("iViV"),u=n("pjml"),p=n("+4Px"),m=n("cbVV"),h=n("TmUJ"),g=n("C2vp"),b=n("Sa5G"),f=n("dF44"),v=n("qH3X"),y=n("Ui4O"),w=n("trPQ"),C=n("viYV"),S=n("E7GM"),k="ultra.components.directives.gradeGridColumnReborn",I=function(){function t(e,t,n,i,s,a,r,c,l,d,u,p,h){var g=this;this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=s,this.$compile=a,this.scope=r,this.element=c,this.attrs=l,this.gradeGridRebornController=d,this.timeout=u,this.bbLocalize=p,this.entitlementService=h,this.isRestrictedGroupContent=!1,this.hasEntitlementsToGradeCell=function(){if(g.isRestrictedGroupContent)return!1;if(!g.cell.canBeEdited)return!1;var e=g.cell;return e.data&&e.data.grade?g.gradeService.canGrade(e.data.grade.gradeScoreDesignation):!(!e.column||!e.column.data)&&g.gradeService.canGrade(e.column.data.gradeScoreDesignation)},this.isCellGradeable=function(e){return!g.isRestrictedGroupContent&&(!o.isUndefined(e)&&(!g.gridData.course.isComplete()&&(!(o.isUndefined(g.group)&&e.column instanceof m.g)&&e.canBeEdited)))},this.canGradeCell=function(){return g.isCellGradeable(g.cell)&&g.hasEntitlementsToGradeCell()},this._isUpdating=!1,this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),r.$watchGroup(["row","col"],(function(e){var t=e[0],n=e[1];g.initializeCell(t.id,n.id),g.initializeState(),g.initializeUI()})),r.$on(v.a.REFRESH,(function(e,t){g._isUpdating=!1;var n=t.rowId,i=t.columnIds;o.forEach(i,(function(e){g.scope.row.id===n&&g.cell.column.id===e&&(g.initializeCell(n,e,!1),g.initializeUI(),g.scope.$broadcast(v.a.REFRESH_CELL_EDITOR))}))})),r.$on(f.b.ENTER_CELL,(function(e,t){return t.find(".grade-grid-cell").click()})),r.$on("$destroy",(function(){})),r.$on(v.a.ENTER_EDITOR,(function(e,t){o.isUndefined(t.group)||o.isUndefined(g.group)||t.group.groupId!==g.group.groupId||g.cell.column.id!==t.columnId||(g._freezeGroup=!0)})),r.$on(v.a.CLOSE_EDITOR,(function(e,t){g.group&&g._freezeGroup&&(g._freezeGroup=!1)}))}return t.prototype.initializeState=function(){this._isEditing=!1,this.resetGradePost()},t.prototype.initializeCell=function(e,t,n){void 0===n&&(n=!0),this.cell=this.gridData.getCell(e,t),this.setUpScreenReader(this.cell,this.score),this._oldScore=this._score=void 0,this.group&&n&&this.element.children(".grade-grid-cell").removeClass("group-id-"+this.group.groupId+" group-grade-cell selected"),this._group=void 0,this._isOtherGroupMemberGraded=void 0,this.cell instanceof g.e&&(this._group=this.cell.group,this.element.children(".grade-grid-cell").addClass("group-id-"+this.group.groupId+" group-grade-cell")),this.setSelectEventListener()},t.prototype.setSelectEventListener=function(){var e=this;this.group&&o.isUndefined(this.unbindSelectEvent)&&!this.isRestrictedGroupContent?this.unbindSelectEvent=this.scope.$on(v.a.SELECT_GROUP,(function(t,n){e.group.groupId===n.groupId&&e.cell.column.id===n.columnId&&n.enter?e.element.children(".group-grade-cell").addClass("selected"):e.element.children(".group-grade-cell").removeClass("selected")})):o.isUndefined(this.group)&&!o.isUndefined(this.unbindSelectEvent)&&(this.unbindSelectEvent(),this.unbindSelectEvent=void 0)},t.prototype.initializeEventHandler=function(){var e=this;this.element.parents(".rb-cell").mouseenter((function(){return e.mouseEnterHandler()})).mouseleave((function(){return e.mouseLeaveHandler()})).focusin((function(){e.focusin(),e.mouseEnterHandler(),e.showPointsPossible()})).focusout((function(){e.focusout(),e.mouseLeaveHandler(),e.hidePointsPossible()})).click((function(){e.showPointsPossible()}))},t.prototype.focusin=function(){this.isRestrictedGroupContent||this.rootScope.$broadcast(v.a.FOCUSIN_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.focusout=function(){this.isRestrictedGroupContent||this.rootScope.$broadcast(v.a.FOCUSOUT_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.showElement=function(e){e.removeClass("hide")},t.prototype.hideElement=function(e){e.addClass("hide")},t.prototype.initializeUI=function(){var e=this.element.constructor.fn,t=e.show,n=e.hide;e.show=function(){return this.removeClass("hide")},e.hide=function(){return this.addClass("hide")},(this.group||this.cell.column.data&&this.cell.column.data.groupContent)&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(b.v.ViewGroups,this.gridData.course.id));var i=this.element.children(".grade-grid-cell");if(this.isLoading)i.removeClass("grade-now-bg").find(".score, .ungraded, .anonymous").hide();else if(!this.gridData.canViewGrades||this.isRestrictedGroupContent){if(this.cell.data)i.addClass("grade-now-bg"),i.find(".score").show().find("#displayedScore").show().find("#display").text("--").show();else(s=i.find("#displayedScore")).children("#display").text("").hide(),s.hide()}else{var s,a=this.displayedScore;if(this.cell.isAnonymousGrading||a?i.removeClass("grade-now-bg"):i.addClass("grade-now-bg"),this.isEditing||this.cell.isAnonymousGrading?i.children(".score").hide():i.children(".score").show(),a)(s=i.find("#displayedScore")).children("#display").text(a).show(),s.show();else(s=i.find("#displayedScore")).children("#display").text("").hide(),s.hide();if(this.isPastDueZero?i.find("#pastDueZero").show():i.find("#pastDueZero").hide(),this.isPosted&&!this.isPastDueZero?i.find("#posted").show():i.find("#posted").hide(),this.canGradeCell()&&!a?i.find("#gradeNow").show():i.find("#gradeNow").hide(),this.hasNewSubmission?i.find("#newSubmission").show():i.find("#newSubmission").hide(),this.canGradeCell()?i.find("#blank").hide():i.find("#blank").show(),this.cell instanceof g.c&&this.ungradedItemCount&&this.ungradedItemCount>0?(this.ungraded=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.ungraded",params:{count:this.ungradedItemCount},noWrap:!0,noEscape:!0}),i.find("#ungraded").show()):i.find("#ungraded").hide(),this.cell instanceof g.c){var r=this.pointsPossible;i.find("#pointsPossible").text(o.isUndefined(r)?"":r.toString())}this.cell.isAnonymousGrading?i.find(".anonymous").show():i.find(".anonymous").hide()}e.show=t,e.hide=n},t.prototype.showPointsPossible=function(){var e=this;if(this.cell instanceof g.c){var t=this.element.children(".grade-grid-cell");t.addClass("purple-outline"),t.find("#displayedScore").children("#display").text(this.score),this.showElement(t.find("#displayedScore")),this.showElement(t.find("#slash")),this.showElement(t.find("#pointsPossible")),this.timeout((function(){var t=e.scope.$on(f.b.SCROLL_H,(function(){e.hidePointsPossible(),t(),n()})),n=e.scope.$on(f.b.SCROLL_V,(function(){e.hidePointsPossible(),n(),t()}))}),this.scope,200)}},t.prototype.hidePointsPossible=function(){if(this.cell instanceof g.c){var e=this.element.children(".grade-grid-cell");e.removeClass("purple-outline"),e.find("#displayedScore").children("#display").text(this.displayedScore),this.hideElement(e.find("#slash")),this.hideElement(e.find("#pointsPossible"))}},t.prototype.resetGradePost=function(){this._isReadyToPost=void 0},Object.defineProperty(t.prototype,"isReady",{get:function(){return!o.isUndefined(this.cell)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return!this.isReady||!this.cell.isLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPosted",{get:function(){return!o.isUndefined(this.cell)&&this.cell.isPosted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNewSubmission",{get:function(){return!o.isUndefined(this.cell)&&this.cell.hasNewSubmission},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPastDueZero",{get:function(){return!o.isUndefined(this.cell)&&this.cell.isPastDueZero},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayedScore",{get:function(){if(!this.isLoading)return this.formatScore()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ungradedItemCount",{get:function(){if(this.isReady){if(this.cell.data)return this.cell.data.grade.ungradedItemCount;if(this.gridData.getColumnMetadata(this.cell.column.id))return this.gridData.getColumnMetadata(this.cell.column.id).itemsCount}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointsPossible",{get:function(){if(this.isReady&&this.cell.data&&this.displayedScore){var e=this.cell.data.grade.pointsPossible;return o.isUndefined(e)?e:Math.round(100*e)/100}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){if(this.isReady){if(o.isUndefined(this._score)){var e=this.cell.getScore(this.scope);this._oldScore=this._score=e}return this._score}},set:function(e){this._score=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadonly",{get:function(){if(this.isReady)return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditing",{get:function(){return this._isEditing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),t.prototype.mouseEnterHandler=function(){this.group&&!this.isRestrictedGroupContent&&this.rootScope.$broadcast(v.a.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!0})},t.prototype.mouseLeaveHandler=function(){!this.group||this._freezeGroup||this.isRestrictedGroupContent||this.rootScope.$broadcast(v.a.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!1})},t.prototype.insertCellEditor=function(){var e=this;this.editorScope=this.scope.$new(!1,this.scope),this.$compile(t.CELL_EDITOR_TEMPLATE)(this.editorScope,(function(t){return e.element.children(".grade-grid-body-cell").append(t)})),this.timeout((function(){e.addInputKeyEventListeners();var t=e.scope.$on(f.b.SCROLL_H,(function(){o.isEmpty(e.score)&&e.element.children(".grade-grid-cell").addClass("grade-now-bg"),e.closeEditor(),t(),n()})),n=e.scope.$on(f.b.SCROLL_V,(function(){o.isEmpty(e.score)&&e.element.children(".grade-grid-cell").addClass("grade-now-bg"),e.closeEditor(),n(),t()}))}),this.scope,200)},t.prototype.removeCellEditor=function(){this.element.find("#bb-grade-grid-cell-editor-reborn").remove()},t.prototype.isConfirmDialogExisting=function(){return!!e(".grade-grid-group-confirm-dialog").length},t.prototype.enterEditor=function(e){if(!this.isConfirmDialogExisting()&&this.isCellGradeable(this.cell)&&!this.isLoading&&!this._isEditing){if(this.cell.column.data.isAttendance())this.gradeGridRebornController.attendanceIsAvailable&&(this.cell.canBeView&&this.popupMenu(e,!1),this.rootScope.$broadcast(v.a.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}));else{var t=this.hasEntitlementsToGradeCell();(this.cell.canBeView||this.cell.canPost())&&(t||(this.isReadyToPost=!!this.score),this.popupMenu(e,!0)),t&&(this._isEditing=!0,this.hideElement(this.element.find(".score")),this.element.children(".grade-grid-cell").removeClass("grade-now-bg"),this.insertCellEditor(),this.group?this.rootScope.$broadcast(v.a.ENTER_EDITOR,{group:this.group,columnId:this.cell.column.id}):this.rootScope.$broadcast(v.a.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}))}this.getIsOtherGroupMemberGraded()}},t.prototype.getIsOtherGroupMemberGraded=function(){var e=this;this.group&&this.getGroupGrades(this.cell.column.id).then((function(){e.isOtherGroupMemberGraded()}))},Object.defineProperty(t.prototype,"isReadyToPost",{get:function(){return this._isReadyToPost},set:function(e){this._isReadyToPost=e},enumerable:!0,configurable:!0}),t.prototype.post=function(e,t){return t?this.cell.column.data.postReadyGroupAttempts({groupAssociationId:this.group.groupAssociationId}):this.cell.column.data.grades.$new(e.id).postReadyGrades()},t.prototype.fetchSummary=function(e){return this.cell.column.data.summary.$fetch(e).$asPromise()},t.prototype.popupMenu=function(t,n){var i=this,o="grade-grid-cell-menu-reborn-"+this.scope.row.id+"-"+this.scope.col.id;if(!this.gradeGridRebornController.isMenuExisting(o)){var s=e(t.target).closest(".grade-grid-cell").offset();s.top+=80;var a=this.scope.$new(!0);a.cell=this.cell,a.post=function(){(i.savePromise||i.$q.when()).then((function(e){void 0===e&&(e=i.cell.getGrade()),i.postDefer&&(i.postDefer.resolve(!0),i.timeout.cancel(i.postDeferTimeout)),e&&(i.isGroupAssessment()?i.post(e,!0).then((function(){return i.fetchSummary({timestamp:Date.now()})})).then((function(){i.gridData.getGroupIdUserIdMap()[i.group.groupId].forEach((function(e){i.gridData.refreshDataCell(i.gridData.getRowByUserId(e),i.cell.column)})),i.rootScope.$broadcast(f.b.DATA_UPDATE),i.resetGradePost()})):i.post(e,!1).then((function(){return i.fetchSummary({timestamp:Date.now()})})).then((function(){i.gridData.refreshDataCell(i.cell.row,i.cell.column),i.rootScope.$broadcast(f.b.DATA_UPDATE),i.resetGradePost()})))}))},a.isReadyToPost=function(){return!i._isUpdating&&i.cell.isReadyToPost&&i.isReadyToPost&&(!i.isGroupAssessment()||i._isOtherGroupMemberGraded)},a.adjustPosition=function(e){s.top+e.height()>i.gradeGridRebornController.getGradeGridContainerElementBottom()&&(s.top-=80+e.height()),e.offset(s)},n?this.gradeGridRebornController.popupMenu(o,w,a):this.gradeGridRebornController.popupMenu(o,C,a),this.addMenuKeyEventListeners(),t.preventDefault(),t.stopPropagation()}},t.prototype.popupConfirmDialog=function(t){var n=this,i="group-cell-confirm-dialog-reborn-"+this.scope.row.id+"-"+this.scope.col.id,o=this.$q.defer();if(!this.gradeGridRebornController.isMenuExisting(i)){var s=this.scope.$new(!0);s.waiting=200,s.onBeforeDestroy=function(e){o.resolve(!0)},s.saveGroup=function(){o.resolve(!0)},s.saveOne=function(){o.resolve(!1)},s.isSaveOneDisabled=""===this.score,t.top+=80,s.adjustPosition=function(e){var i=t.left+e.width(),o=t.top+e.height(),s=n.gradeGridRebornController.getGradeGridContainerElementRight(),a=n.gradeGridRebornController.getGradeGridContainerElementBottom();i>s&&(t.left-=i-s+Object(h.a)()),o>a&&(t.top-=e.height()+80),e.offset(t)},s.$on("$destroy",(function(){n.scope.$emit(f.b.LEAVE_CELL)})),this.gradeGridRebornController.popupMenu(i,S,s),this.timeout((function(){var t=e("#"+i).find("button");t.on("keydown",(function(n){if(p.A(n))t.eq((t.index(this)+1)%t.length).focus();else if(p.z(n))t.eq((t.index(this)-1+t.length)%t.length).focus();else{if(n.keyCode!==p.g)return;e(window).click()}n.preventDefault(),n.stopPropagation()})),t.first().focus()}),this.scope,0,!1)}return o.promise},t.prototype.isOtherGroupMemberGraded=function(){var e=this;this._isOtherGroupMemberGraded=o.isUndefined(o.findKey(this.studentIdGradeMap,(function(t,n){var i=t.getScore();return e.cell.row.metadata.user.id!==n&&(""===i||o.isNull(i)||o.isUndefined(i))})))},t.prototype.addInputKeyEventListeners=function(){var e=this;this.element.find("#bb-grade-grid-cell-editor-reborn input").on("keydown",(function(t){var n=e.gradeGridRebornController.getMenuitems();if(p.A(t))n.first().focus();else{if(!p.z(t))return;n.last().focus()}t.preventDefault(),t.stopPropagation()}))},t.prototype.addMenuKeyEventListeners=function(){var t=this;this.timeout((function(){var n=t.gradeGridRebornController.getPopupMenu();n.on("keydown",(function(i){var o=t.gradeGridRebornController.getMenuitems();if(p.A(i))(s=o.index(e(i.target))+1)<o.length?o.eq(s).focus():t.element.find(".grade-grid-cell").trigger("click",!0);else if(p.z(i)){var s;(s=o.index(e(i.target))-1)>=0?o.eq(s).focus():t.element.find(".grade-grid-cell").trigger("click",!0)}else if(p.y(i))t.scope.$emit(f.b.LEAVE_CELL);else{if(i.keyCode!==p.g)return;n.data("destroy")(),t.scope.$emit(f.b.LEAVE_CELL)}i.preventDefault(),i.stopPropagation()}))}),this.scope,0,!1)},t.prototype.gotoNextCell=function(){var e=this;this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then((function(){e.scope.$emit(f.b.ENTER_NEXT_CELL)}))},t.prototype.onInputBlur=function(t,n,i){var s=this;if(!this.isLoading&&this._isEditing)if(this.savePromise=this.$q.when(),this.postDefer=this.$q.defer(),this.postPromise=this.postDefer.promise,n){var a;this.score=i,o.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.isDirty()?(a=this.$q.defer(),this.savePromise=a.promise):this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0);var r=this.$q.when(!1);this.isGroupAssessment()&&this.isDirty()&&(r=this.popupConfirmDialog(e(t.target).closest(".grade-grid-cell").offset())),r.then((function(e){s.showScoreTemporarily(),s.saveGrade(e,a),s.closeEditor()}))}else o.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.closeEditor(),this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)},t.prototype.showScoreTemporarily=function(){if(this.isDirty()){var e=this.element.find("#display");e.text(this.score);var t=this.element.find("#posted");o.isEmpty(this.score)?(this.hideElement(t),this.hideElement(this.element.find("#displayedScore")),this.showElement(this.element.find("#gradeNow"))):(this.hideElement(this.element.find("#gradeNow")),this.showElement(this.element.find("#displayedScore")),this.showElement(e))}},t.prototype.closeEditor=function(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.showElement(this.element.find(".score")),this.rootScope.$broadcast(v.a.CLOSE_EDITOR,{group:this.group,columnId:this.cell.column.id}))},t.prototype.formatScore=function(){var e,t=this.cell.data;return!o.isNull(t)&&t.grade&&t.grade.displayGrade&&(e=this.gradeService.getGradeToDisplay(t.grade.displayGrade,this.scope,this.gridData.getSchema()[this.cell.column.data.gradingSchemaId].scaleType),this.setUpScreenReader(this.cell,e)),e},t.prototype.isDirty=function(){return o.isUndefined(this._oldScore)&&!o.isEmpty(this.score)||!o.isUndefined(this._oldScore)&&this.bbLocalize.parseNumberSync(this._oldScore,this.scope).toString()!==this.bbLocalize.parseNumberSync(this.score,this.scope).toString()},t.prototype.createGradeSubmission=function(){var e=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],t=this.gradeService.createGradeSubmission(this.cell.column.data,this.gradeService.parseGrade(this.score,e,this.scope),e);return t.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),t},t.prototype.getGroupGrades=function(e){var t=this;this.studentIdGradeMap={};var n=this.gridData.getGroupIdUserIdMap()[this.group.groupId].map((function(e){return t.gridData.getRowByUserId(e).metadata.id}));return this.CourseModel.$new(this.gridData.course.id).gradebook.bulkView.$fetch({membershipIds:n,columnIds:[e]}).$asPromise().then((function(e){e.bulkViewUsers.forEach((function(e){t.studentIdGradeMap[e.studentId]=e.grades[0].grade}))}))},t.prototype.prepareSaveGroupGrade=function(){var e=this;return this.$q.when().then((function(){e.gridData.getGroupById(e.group.groupId).memberships.forEach((function(t){t.ui={gradeDetail:e.studentIdGradeMap[t.userId]}}))}))},t.prototype.saveGrade=function(e,t){var n=this;if(this.isDirty()){this._oldScore=this._score,o.isUndefined(t)&&(t=this.$q.defer(),this.savePromise=t.promise);var i=this.createGradeSubmission(),s=this.$q.when();i.clearGrade&&this.cell.isCleanAttemptGrade&&(s=this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.cell.column.id).grades.$new(this.cell.data.grade.id).attempts.$fetch().$asPromise().then((function(e){return e[0]}))),s.then((function(t){return(e?n.prepareSaveGroupGrade():n.$q.when()).then((function(){return n.gradeService.saveGrade(i,n.cell.data&&n.cell.data.grade,t,e?{group:n.gridData.getGroupById(n.group.groupId)}:{userId:n.cell.row.metadata.user.id})}))})).then((function(o){!i.clearGrade&&n.cell.isPosted&&n.cell.isNeedAutoPost?n.post(o,e):t.resolve(o)})).then((function(){return n.postDeferTimeout=n.timeout((function(){n.postDefer.resolve(!1)}),n.scope,100,!1),n.postPromise.then((function(e){return e?void 0:n.fetchSummary()}))})).then((function(){n.refresh(e),n.nextDeferred&&(n.nextDeferred.resolve(),n.nextDeferred=void 0)}))}},t.prototype.refresh=function(e){var t=this,n=this.getAffectedColumns().concat([this.cell.column]),i=this.getOverallColumn();i&&n.push(i);var s=[this.cell.row];e&&this.gridData.getGroupIdUserIdMap()[this.group.groupId].forEach((function(e){var n=t.gridData.getRowByUserId(e);n!==t.cell.row&&s.push(n)})),o.forEach(s,(function(e){o.forEach(n,(function(n){t.gridData.refreshDataCell(e,n)}))})),this._isUpdating=!0,this.rootScope.$broadcast(f.b.DATA_UPDATE)},t.prototype.getAffectedColumns=function(){return this.cell.column instanceof m.c?this.cell.column.findAffectedColumns():[]},t.prototype.getOverallColumn=function(){return o.find(this.gridData.getColumns(),(function(e){return e instanceof m.k}))},t.prototype.setUpScreenReader=function(e,t){this.userName=e.row.metadata.user.givenName+" "+e.row.metadata.user.familyName;var n=e.column.data.columnName;if(this.ariaLabelContent=t?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:this.userName,assignmentName:n,grade:t},noWrap:!0,noEscape:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:this.userName,assignmentName:n},noWrap:!0,noEscape:!0}),this.isPosted){var i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.postedLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=this.ariaLabelContent+" "+i}if(this.isPastDueZero){var o=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.pastDueZero",noWrap:!0,noEscape:!0});this.ariaLabelContent=this.ariaLabelContent+" "+o}if(this.group&&(this.ariaLabelContent=this.ariaLabelContent+" "+this.group.groupTitle),this.hasNewSubmission){var s=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.newSubmissionLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=s+" "+this.ariaLabelContent}},t.prototype.isGroupAssessment=function(){return this.group&&this.cell instanceof g.e&&!(this.cell instanceof g.f)},t.CELL_EDITOR_TEMPLATE='<div bb-grade-grid-cell-editor-reborn id="bb-grade-grid-cell-editor-reborn" class="editor"></div>',t.$inject=["$rootScope","$window","$q",u.o.serviceName,a.h,"$compile","scope","element","attrs","gradeGridRebornController",r.b,c.serviceName,l.b],t}(),D=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=y,this.scope=!0,this.require="^"+s.a,this.link=function(e,n,i,o){e.gradeGridColumnReborn=t.$injector.instantiate(I,{scope:e,element:n,attrs:i,gradeGridRebornController:o})}}return e.$inject=["$injector"],e}();i.module(k,[d.a]).directive("bbGradeGridColumnReborn",["$injector",function(e){return e.instantiate(D)}])}).call(this,n("5iHu"))},xoIb:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-medium-feedback",use:"icon-medium-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM6 6h12M6 9h12M6 12h12M6 15h7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},"y+vt":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("67oV"),n("bVj5");var i=n("wHJ2"),o=n("qH3X"),s=n("0JpG"),a=n("pF15"),r="ultra.components.directives.gradeSearchFilterReborn",c=function(){function e(e,t,n){this.scope=e,this.$rootScope=t,this.bbLocalize=n,this.initial()}return e.prototype.initial=function(){this.getCheckedMergedCourse()||this.clearAll(),this.criteriaBlocks=[{id:"merged_course",expanded:!0,name:"merged_course",criteriaDetails:this.scope.mergedCourses}]},e.prototype.closeFilterCriteria=function(){this.$rootScope.$broadcast(o.a.CLOSE_FILTER_PANEL,!1)},e.prototype.clearAll=function(){this.$rootScope.$broadcast(o.a.GRADEBOOK_CLEAR_SELECTED,!0)},e.prototype.collapseMergedCourse=function(e){this.criteriaBlocks.some((function(t){return t.id===e.id}))&&(e.expanded=!e.expanded)},e.prototype.filterMergedCourse=function(){this.$rootScope.$broadcast(o.a.UPDATED_FILTER_CONDITION)},e.prototype.getCheckedMergedCourse=function(){return this.scope.mergedCourses&&this.scope.mergedCourses.filter((function(e){return!0===e.ui.checked})).length},e.prototype.getToggleButtonLabel=function(e){return e.expanded?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.collapse"}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.expand"})},e.$inject=["scope","$rootScope",s.serviceName],e}(),l=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.scope={mergedCourses:"<"},this.link=function(e,n,i){e.gradeGridSearchFilterReborn=t.$injector.instantiate(c,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(r,[]).directive("bbGradeGridSearchFilterReborn",["$injector",function(e){return e.instantiate(l)}])},y0xW:function(e,t){e.exports='<div class="assessment-question" ng-if="::!assessmentQuestion.questionRegradingEnabled">\n  <fieldset>\n    <div class="question-header"\n         ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n         ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n      <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                   class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                   aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                   size="medium"\n                   icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n      <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle" bb-translate="components.directives.assessment-question.question-title" translate-values="{index: assessmentQuestion.questionAttempt.visibleQuestionNumber}"></legend>\n      <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                         hide-grade="!assessmentQuestion.canViewGrades"\n                         input-id="{{::assessmentQuestion.elementId}}"\n                         is-privileged="assessmentQuestion.canEnterGrades"\n                         ng-if="assessmentQuestion.questionConfig.hasPoints">\n      </bb-question-grade>\n    </div>\n    <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n  </fieldset>\n</div>\n\n<div class="assessment-question" ng-if="::assessmentQuestion.questionRegradingEnabled">\n  <fieldset ng-show="!assessmentQuestion.isEditing">\n    <div class="question-header question-header-grading"\n         ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n         ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle"\n         ng-switch="assessmentQuestion.questionAttempt.question.fullCredit"\n    >\n      <div bb-foundation-defer ng-if="isSmallBreakpoint" ng-switch-default>\n        <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                     class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                     aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                     size="medium"\n                     icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n        <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle">{{::assessmentQuestion.questionTitle}}</legend>\n        <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                           hide-grade="!assessmentQuestion.canViewGrades"\n                           input-id="{{::assessmentQuestion.elementId}}"\n                           is-privileged="assessmentQuestion.canEnterGrades"\n                           ng-if="assessmentQuestion.questionConfig.hasPoints"\n                           >\n        </bb-question-grade>\n        <bb-overflow-menu ng-show="!isAnyQuestionEditing() && !assessmentQuestion.isCurrentCourseComplete"\n                          element-id="{{::assessmentQuestion.elementId}}"\n                          element-name="{{::assessmentQuestion.questionTitle}}"\n                          menu-items="assessmentQuestion.getQuestionRegradingOverflowMenu()"\n                          analytics-id-tag-prefix="components.directives.attempt-canvas.getQuestionRegradingOverflowMenu"\n                          >\n        </bb-overflow-menu>\n      </div>\n      <div bb-foundation-defer ng-if="isSmallBreakpoint" ng-switch-when="true">\n        <div class="question-header-column question-header-first-column">\n          <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                       class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                       aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                       size="medium"\n                       icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n          <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle">{{::assessmentQuestion.questionTitle}}</legend>\n          <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                    hide-grade="!assessmentQuestion.canViewGrades"\n                    input-id="{{::assessmentQuestion.elementId}}"\n                    is-privileged="assessmentQuestion.canEnterGrades"\n                    ng-if="assessmentQuestion.questionConfig.hasPoints">\n          </bb-question-grade>\n          <bb-overflow-menu ng-show="!isAnyQuestionEditing() && !assessmentQuestion.isCurrentCourseComplete"\n                            element-id="{{::assessmentQuestion.elementId}}"\n                            element-name="{{::assessmentQuestion.questionTitle}}"\n                            menu-items="assessmentQuestion.getQuestionRegradingOverflowMenu()"\n                            analytics-id-tag-prefix="components.directives.attempt-canvas.getQuestionRegradingOverflowMenu"\n          >\n          </bb-overflow-menu>\n        </div>\n        <div class="question-header-column question-header-secondary-column">\n          <span class="question-full-credit-label"\n                bb-translate>\n            components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given\n          </span>\n        </div>\n      </div>\n      <div bb-foundation-defer ng-if="!isSmallBreakpoint">\n        <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                     class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                     aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                     size="medium"\n                     icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n        <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle">{{::assessmentQuestion.questionTitle}}</legend>\n        <span class="question-full-credit-label" bb-translate ng-if="assessmentQuestion.questionAttempt.question.fullCredit">components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given</span>\n        <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                           hide-grade="!assessmentQuestion.canViewGrades"\n                           input-id="{{::assessmentQuestion.elementId}}"\n                           is-privileged="assessmentQuestion.canEnterGrades"\n                           ng-if="assessmentQuestion.questionConfig.hasPoints">\n        </bb-question-grade>\n        <bb-overflow-menu ng-show="!isAnyQuestionEditing() && !assessmentQuestion.isCurrentCourseComplete"\n                          element-id="{{::assessmentQuestion.elementId}}"\n                          element-name="{{::assessmentQuestion.questionTitle}}"\n                          menu-items="assessmentQuestion.getQuestionRegradingOverflowMenu()"\n                          analytics-id-tag-prefix="components.directives.attempt-canvas.getQuestionRegradingOverflowMenu"\n                          >\n        </bb-overflow-menu>\n      </div>\n    </div>\n    <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n  </fieldset>\n  <fieldset ng-if="assessmentQuestion.isEditing" class="regrading-container assessment-canvas-react"></fieldset>\n</div>\n'},yGpi:function(e,t){e.exports='<div bb-load-bundle="components/directives/folder" class="folder" ng-class="{\'is-empty-folder\': content.children.length === 0 && folder.showEmptyMenu, \'learning-module\': content.isLearningModule()}" bb-cache-compilation="content-folder">\n  <div bb-drop-handler on-move-handler="onMoveHandler" on-move-into-folder-handler="onMoveIntoFolderHandler" on-file-drop-handler="onFileDropHandler" content="content" is-folder-open="folder.isOpen" next-content-id="nextContentId" previous-content-id="previousContentId">\n    <div ng-if="::(!content.isLearningModule())" class="row collapse element-list-row folder-row-container js-parent js-course-skip-link-target" can-create="canCreate" bb-content-item-mouseover ng-class="{open: folder.isOpen, \'is-conditional-release\': content.isConditionalReleaseLocked()}" bb-click-to-invoke-child="button.content-title">\n      <bb-content-item-base contents="contents" content="content" context-area="folder.contextArea" can-move="canMove"></bb-content-item-base>\n      <div class="list-tree-toggle" ng-if="folder.canToggle()">\n        <button class="button super-clear"\n                ng-click="folder.toggleFolder()"\n                aria-controls="{{::\'folder-contents-\' + content.id}}"\n                aria-expanded="{{folder.isOpen}}"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.folder.aria-label.toggle-folder\'}"\n                translate-attrs-values="{folderName: content.title}"\n                analytics-id="course.content.folder.toggle.button">\n          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n        </button>\n      </div>\n    </div>\n\n    <div ng-if="::(content.isLearningModule())" ng-class="{open: folder.isOpen}">\n      <bb-learning-module-base-item content="content" contents="contents" context-area="folder.contextArea" can-toggle="::folder.canToggle()"\n        toggle-func="folder.toggleFolder()" can-move="canMove" is-open="folder.isOpen">\n      </bb-learning-module-base-item>\n    </div>\n  </div>\n  <div ng-attr-id="{{::(content.isLearningModule() ? \'learning-module-contents-\' : \'folder-contents-\') + content.id}}" class="folder-contents" aria-expanded="{{folder.isOpen}}" ng-class="{\'not-empty\': content.children && content.children.length > 0}">\n    <div ng-if="(content.children.length > 0 || folder.showOutlineOverride) && folder.isOpen">\n      <bb-content-outline hide-add-menu-override="folder.showOutlineOverride" on-file-drop-handler="onFileDropHandler" on-move-handler="onMoveHandler"\n                          on-move-into-folder-handler="onMoveIntoFolderHandler" load-more-children="loadMoreChildren" parent-folder="folder.content"\n                          contents="folder.content.children" can-create="canCreate" can-move="canMove" context-area="folder.contextArea"\n                          can-copy-import="canCopyImport"></bb-content-outline>\n    </div>\n    <div class=\'drag-element\'>\n      <div bb-drop-handler\n        ng-show="content.children.length === 0"\n        on-move-handler="onMoveHandler"\n        on-move-into-folder-handler="onMoveIntoFolderHandler"\n        on-file-drop-handler="onFileDropHandler"\n        content="{id: content.id + \'blank\', parentId: content.id, depth: content.depth + 1}"\n        empty-target\n      >\n        <span class="empty-message" ng-if="content.children.length === 0  && folder.showEmptyMenu"\n          ng-class="{\'foder-in-force-sequence-empty-message\': content.isForcedSequenceItem()}"\n          bb-translate="{{\n            content.isForcedSequenceItem() && canCreate? \'components.directives.folder.emptyInSequence\':\n              (content.isLearningModule() ? \'components.directives.learning-module.empty\' : \'components.directives.folder.empty\')\n          }}">\n        </span>\n        \x3c!-- (|| false) keep showMenuOverride in watch status in add-content-button directive --\x3e\n        \x3c!-- use ng-show instead of ng-if to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n        <ng-switch on="::content.isLearningModule()">\n          <bb-add-content-button ng-switch-when="false" show-menu-override="folder.showMenuOverride || false" depth="(content.depth + 1)" content="content"\n                                 root-content="rootContent()" parent-id="content.id" position-before="\'start\'"\n                                 ng-show="canCreate && folder.showEmptyMenu && !content.isForcedSequenceItem()" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n          <bb-add-content-button ng-switch-when="true" show-menu-override="false" depth="(content.depth + 1)" content="content"\n                                 root-content="content" parent-id="content.id" position-before="\'start\'"\n                                 is-render-by-default="true"\n                                 class="empty-lm-add-content-btn"\n                                 ng-show="canCreate && folder.showEmptyMenu && !content.isForcedSequenceItem()" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n        </ng-switch>\n      </div>\n    </div>\n  </div>\n</div>\n'},yMoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),o=n("pjml"),s=n("oi1r"),a=n("o5Lu"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(o.I.ScaleType),c=function(){function e(e,t,n,i,o){this.grade=e,this.$q=t,this.gradeDetail=n,this.scope=i,this.schemaService=o,this.wasValueErased=!1}return e.prototype.init=function(e,t){var n=this;this.column=e;var i=function(e){n.schema=e,n.scaleType=null==e?void 0:e.scaleType};return t?this.$q.when(i(t)):this.schemaService.loadGradeSchema(e).then((function(e){i(e)}))},e.prototype.shouldShowTotalPoints=function(){return null!=this._displayValue&&(this.schema&&this.schema.scaleType&&o.I.ScaleType.Score.isEqualTo(this.schema.scaleType)&&!this.isDisplayValueTooLargeForTotalPoints())},e.prototype.isDisplayValueTooLargeForTotalPoints=function(){return this._displayValue&&this._displayValue.toString().length>a.f.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL},Object.defineProperty(e.prototype,"displayGrade",{set:function(e){var t,n;if(e)switch(this._nonFormattedScore=e.score,this._perfCode=e.perfCode,this._perfCode?this.perfCodeDesc=this._perfCode.description:this.perfCodeDesc="",this.displayValue=this.grade.getGradeToDisplay(e,this.scope,null===(t=this.schema)||void 0===t?void 0:t.scaleType),null===(n=this.schema)||void 0===n?void 0:n.scaleType){case o.I.ScaleType.Tabular.toString():var s=null;if(this._perfCode)s={perfCode:this._perfCode};else if(this.column.externalGrade&&this.gradeDetail&&this.gradeDetail.isOverrideGrade()){var a=this.gradeDetail.pointsPossible||this.column.possible||100;s={score:r=this._nonFormattedScore&&this._nonFormattedScore*a/100}}else s={score:this._nonFormattedScore};this._parsedValue=this.grade.getGradeToDisplay(s,this.scope,o.I.ScaleType.Score.toString());break;case o.I.ScaleType.Percent.toString():var r=this._nonFormattedScore&&this._nonFormattedScore/100*this.column.possible;this._parsedValue=this.grade.getGradeToDisplay({score:r},this.scope,o.I.ScaleType.Score.toString());break;case o.I.ScaleType.Score.toString():this._parsedValue=this.displayValue;break;case o.I.ScaleType.Complete.toString():this._parsedValue=this.grade.getGradeToDisplay(Object(i.__assign)(Object(i.__assign)({},e),{grade:null}),this.scope,this.schema.scaleType);break;case o.I.ScaleType.Text.toString():this._parsedValue=e.grade}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this._displayValue},set:function(e){this.wasValueErased=this.grade.wasGradeCleared(this.displayValue,e),this._displayValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parsedValue",{get:function(){return this._parsedValue},set:function(e){this._parsedValue=e},enumerable:!0,configurable:!0}),e.prototype.hasPerfCode=function(){return!!this._perfCode},e.prototype.getGradeColor=function(){var e,t;return(null===(t=null===(e=this.gradeDetail)||void 0===e?void 0:e.displayGrade)||void 0===t?void 0:t.isOverride)&&this.column.externalGrade||r.Text.isEqualTo(this.scaleType)?"gray":this.displayValue?r.Percent.isEqualTo(this.scaleType)?this.grade.getPercentileColor(this._nonFormattedScore):this.getGradeColorScoreSchema():void 0},e.prototype.getGradeColorScoreSchema=function(){var e=this.gradeDetail?this.gradeDetail.pointsPossible:this.column.possible;if(e>0){var t=this._nonFormattedScore/e*100;return this.grade.getPercentileColor(t)}return"na"},e.$inject=[a.h,"$q","gradeDetail","scope",s.b],e}()},yOHj:function(e,t,n){},yV5t:function(e,t){e.exports='<a class="content-title" \n   ng-click="contentItemScormLaunch.scormLaunch()" \n   href="javascript:void(0);"\n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n   analytics-id="content.item.scormlaunch.link">\n  <span>{{ content.title }}</span>\n</a>'},"ykC+":function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-goal",use:"icon-small-goal-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-goal"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 1h14v3H1zM4 12h8v3H4z" /><path d="M14 4s0 5-6 5-6-5-6-5M8 9v3" stroke-width="2" /></symbol>'});o.add(s);e.exports=s},ykN9:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",(function(){return c})),n.d(t,"controllerName",(function(){return l}));n("JGCs"),n("GkCm");var i=n("wHJ2"),o=n("CCbZ"),s=n("0JpG"),a=n("3KJb"),r=n("HHPc");n.d(t,"template",(function(){return r}));var c="ultra.features.course.content.assessment.multipleAttempts.peek",l=a.b;i.module(c,[o.a,s.moduleName]).controller(a.b,a.a)},ytQ2:function(e,t){e.exports='<div ng-if="::foundationOffcanvas.wiredup || undefined"\n      class="bb-foundation-offcanvas"\n      ng-transclude\n      bb-click-outside="foundationOffcanvas.handleClickOutside()"\n      is-active="foundationOffcanvas.isPanelOpen"\n      aria-hidden="{{!foundationOffcanvas.isPanelOpen}}"\n      current-panel-only>\n</div>'},"z+6U":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("wHJ2"),o=n("sa5q"),s="ultra.components.directives.content.contentItem.contentItemType.contentItemPage",a=function(){function e(e){this.scope=e}return e.prototype.shouldAlignMiddle=function(){return!this.scope.content.canViewAsInstructor()},e.$inject=["scope"],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=o,this.scope=!1,this.link=function(e,n,i){e.contentItemPage=t.$injector.instantiate(a,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(s,[]).directive("bbContentItemPage",["$injector",function(e){return e.instantiate(r)}])},zexu:function(e,t,n){var i=n("ziER"),o=n("5JeM"),s=new i({id:"icon-small-undo",use:"icon-small-undo-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-undo"><path d="M3 3L1 5l2 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 5h11c2 0 3 2.0474 3 4s-1 4-3 4H4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});o.add(s);e.exports=s},zphb:function(e,t){e.exports='<div class="simple-statistic-contents" ng-class="::item().cssClass">\n  <div bb-tooltip enhanced-tooltip="true" data-tooltip-on-overflow-only="true" title="{{ ::item().data }}">\n    <div class="stat-data"\n         ng-attr-aria-label="{{ item().aria ? item().aria : undefined }}"\n         data-ng-bind-html="::item().trusted"\n         data-ellipsis></div>\n  </div>\n  <div ng-if="::item().subtext" class="stat-sub-text" bb-translate>{{ ::item().subtext }}</div>\n  <div ng-if="::!item().subtext && item().reserveSubtextSpace" class="stat-sub-text" aria-hidden="true">&nbsp;</div>\n</div>'}}]);