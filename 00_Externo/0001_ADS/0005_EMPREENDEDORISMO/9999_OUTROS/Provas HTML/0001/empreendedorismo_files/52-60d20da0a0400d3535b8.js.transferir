(window.webpackJsonp=window.webpackJsonp||[]).push([[52,2,7,16,25,36,46,49,55,56,60,127,616],{"+Zd/":function(e,t,n){},"+fEV":function(e,t){e.exports='<div class="slider-tab-navigation-small">\n  <div class="slider-tab-navigation-small__tabs-container">\n    <ul\n      class="slider-tab-navigation-small__tabs"\n      role="tablist"\n      aria-orientation="horizontal"\n      bb-arrow-key-navigation="{ wrap: true, layout: \'rows\', upEqualsLeft: true }"\n      bb-arrow-key-container\n    >\n      <li\n        id="{{\'slider-tab-\' + sliderTabNavigation.scope.tabs.transcludedSection.nameId}}"\n        analytics-id="{{::sliderTabNavigation.scope.tabs.transcludedSection.analyticsIdPrefix}}.li"\n        class="slider-tab-navigation-small__tab"\n        ng-click="sliderTabNavigation.goToTab(sliderTabNavigation.scope.tabs.transcludedSection)"\n        ng-class="{\'slider-tab-navigation-small__tab_active\': sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.transcludedSection.nameId}"\n        ng-keydown="sliderTabNavigation.handleTabKeyDown($event, sliderTabNavigation.scope.tabs.transcludedSection)"\n        role="tab"\n        aria-controls="browsable-section-panel"\n        tabindex="0"\n        aria-label="{{sliderTabNavigation.scope.tabs.transcludedSection.title}}"\n        aria-selected="{{sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.transcludedSection.nameId}}"\n        bb-arrow-key-destination\n      >\n        <div class="slider-tab-navigation-small__tab-icon">\n          <bb-svg-icon size="medium" icon="{{sliderTabNavigation.scope.tabs.transcludedSection.iconName}}"></bb-svg-icon>\n        </div>\n\n        <div class="slider-tab-navigation-small__tab-title">\n          {{sliderTabNavigation.scope.tabs.transcludedSection.title}}\n        </div>\n      </li>\n\n      <li\n        id="{{\'slider-tab-\' + sliderTabNavigation.scope.tabs.browsableSection.main.nameId}}"\n        analytics-id="{{::sliderTabNavigation.scope.tabs.browsableSection.main.analyticsIdPrefix}}.li"\n        class="slider-tab-navigation-small__tab"\n        ng-click="sliderTabNavigation.goToTab(sliderTabNavigation.scope.tabs.browsableSection.main)"\n        ng-class="{\'slider-tab-navigation-small__tab_active\': sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.browsableSection.main.nameId}"\n        ng-keydown="sliderTabNavigation.handleTabKeyDown($event, sliderTabNavigation.scope.tabs.browsableSection.main)"\n        role="tab"\n        aria-controls="browsable-section-panel"\n        tabindex="0"\n        aria-label="{{sliderTabNavigation.scope.tabs.browsableSection.main.title}}"\n        aria-selected="{{sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.browsableSection.main.nameId}}"\n        bb-arrow-key-destination\n      >\n        <div class="slider-tab-navigation-small__tab-icon">\n          <bb-svg-icon size="medium" icon="{{sliderTabNavigation.scope.tabs.browsableSection.main.iconName}}"></bb-svg-icon>\n        </div>\n\n        <div class="slider-tab-navigation-small__tab-title">\n          {{sliderTabNavigation.scope.tabs.browsableSection.main.title}}\n        </div>\n      </li>\n\n      <li\n        id="{{\'slider-tab-\' + tab.nameId}}"\n        analytics-id="{{::tab.analyticsIdPrefix}}.li"\n        class="slider-tab-navigation-small__tab"\n        ng-repeat="tab in sliderTabNavigation.scope.tabs.browsableSection.browsableTabs"\n        ng-click="sliderTabNavigation.goToTab(tab)"\n        ng-class="{\'slider-tab-navigation-small__tab_active\': sliderTabNavigation.activeTab.nameId === tab.nameId}"\n        ng-keydown="sliderTabNavigation.handleTabKeyDown($event, tab)"\n        role="tab"\n        aria-label="{{tab.title}}"\n        aria-controls="browsable-section-panel"\n        tabindex="0"\n        aria-selected="{{sliderTabNavigation.activeTab.nameId === tab.nameId}}"\n        bb-arrow-key-destination\n      >\n        <div class="slider-tab-navigation-small__tab-icon">\n          <bb-svg-icon size="medium" icon="{{tab.iconName}}"></bb-svg-icon>\n        </div>\n\n        <div class="slider-tab-navigation-small__tab-title">\n          {{tab.title}}\n        </div>\n      </li>\n    </ul>\n  </div>\n\n  <div\n    id="browsable-section-panel"\n    class="slider-tab-navigation-small__tab-content"\n    aria-labelledby="{{\'slider-tab-\' + sliderTabNavigation.activeTab.nameId}}"\n  >\n    <div ng-if="sliderTabNavigation.shouldRenderTranscludedElement()">\n      <div ng-transclude></div>\n    </div>\n\n    <div ng-if="sliderTabNavigation.shouldRenderPeekRoutedElement()">\n      <div ui-view="slider-tab-navigation-view@"></div>\n    </div>\n  </div>\n</div>\n'},"+sRu":function(e,t,n){"use strict";var i;!function(e){e.IsSelected="is-selected",e.AnswerSelectedNotPosted="answer-selected-not-posted",e.AnswerNotSelected="answer-not-selected",e.CorrectAnswerSelected="correct-answer-selected",e.CorrectAnswerNotSelected="correct-answer-not-selected",e.IncorrectAnswerSelected="incorrect-answer-selected"}(i||(i={})),t.a=i},"+wu9":function(e,t){e.exports='<div class="typeahead-selected-options" ng-class="{\'empty\': selectedOptions.length === 0}" bb-load-bundle="components/directives/typeahead">\n  <ul bb-translate-attrs="{ \'aria-label\': selectedOptionsListLabel }">\n    <li ng-repeat="option in selectedOptions">\n      <span>{{::option.displayName}}</span>\n      <button class="button button--text"\n              ng-click="typeaheadSelectedOptions.removeOption(option)"\n              bb-translate-attrs="{ \'aria-label\': \'typeahead.typeahead-options.remove\' }"\n              translate-attrs-values="{ displayName: option.displayName }"\n              analytics-id="components.directives.typeaheadSelectedOptions.removeOption.button">\n        <bb-svg-icon size="small" icon="clear" />\n      </button>\n    </li>\n  </ul>\n</div>'},"/BCe":function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-forumlink" class="content-title"\n     bb-peek-sref="discussion.view.with-grading({contentId:\'{{targetContent.id}}\'})"\n     bb-prevent-click-if="targetContent.isConditionalReleaseLocked()" \n     aria-describedby="{{ariaDescribedBy}}"\n     analytics-id="course.link.item.forumLink.link"><span>{{ content.title }}</span></a>\n  <div ng-switch-default class="content-title">{{ content.title }}</div>\n</ng-switch>'},"/R3n":function(e,t){e.exports='<div>\n  <div class="name">\n    <ng-switch on="::content.getContentDisplay().linkAction()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n      <div ng-switch-when="resource/x-bb-folder">\n        <bb-content-item-folder></bb-content-item-folder>\n      </div>\n      <div ng-switch-when="contenturl">\n        \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n        <a bb-prevent-click-if="content.isConditionalReleaseLocked()"\n            ng-click="contentItemBase.markCompleted()"\n            ng-href="{{content.getContentDisplay().contentUrl()}}" target="_blank" rel="noopener noreferrer" class="content-title"\n            ng-class="{\'name-middle\': contentItemCourseOutline.shouldAlignMiddle()}"\n            aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n            analytics-id="content.item.course.outline.courseContent.link">\n          <span>{{ content.title }}</span>\n        </a>\n      </div>\n      <div ng-switch-when="ltilaunch">\n        <bb-content-item-ltilaunch></bb-content-item-ltilaunch>\n      </div>\n      <div ng-switch-when="scormlaunch">\n        <bb-content-item-scormlaunch></bb-content-item-scormlaunch>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-agn-link">\n        \x3c!-- open  edit page when an instructor(=entitledToDesignAssessment) is accessing an assignment in a complete course. page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           bb-peek-sref="gradebook-item.assignment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\' })"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment"\n           bb-peek-sref="assignment.view({assignmentId:content.id})" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           class="content-title"\n           analytics-id="content.item.course.outline.gradebook.item.assignment.readOnly.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-assignment">\n        <a bb-peek-sref="assignment.view({assignmentId:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.assignment.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-document">\n        <a bb-peek-sref="content-manage.edit.document({id:content.id})" class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           ng-class="{\'is-late\': contentItemBase.isLate}"\n           analytics-id="content.item.coures.outline.document.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-when="resource/x-bb-page">\n        <bb-content-item-page></bb-content-item-page>\n      </div>\n      <div ng-switch-when="resource/x-bb-asmt-test-link">\n        \x3c!-- open edit page when an instructor(=entitledToDesignAssessment) is accessing content. In a complete course, page will become read only based on canEdit() --\x3e\n        <a ng-if="contentItemBase.entitledToDesignAssessment" class="content-title"\n           bb-peek-sref="gradebook-item.assessment({\n                                 courseId: content.courseId,\n                                 contentId: content.id,\n                                 gradeitemView: \'details\',\n                                 assessmentType: \'test\'})"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.link"><span>{{ content.title }}</span></a>\n        \x3c!-- user cannot modify --\x3e\n        <a ng-if="!contentItemBase.entitledToDesignAssessment" href="javascript:void(0);"\n           ng-click="contentItemBase.openAssessmentItem()" bb-prevent-click-if="content.isConditionalReleaseLocked()"\n           ng-class="{\'is-late\': contentItemBase.isLate, \'is-restricted\': content.isRestricted()}"\n           class="content-title"\n           aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n           analytics-id="content.item.courses.outline.gradebook.item.assessment.readOnly.link"><span>{{ content.title }}</span></a>\n      </div>\n      <a ng-switch-when="resource/x-bb-forumlink" bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n         bb-prevent-click-if="content.isConditionalReleaseLocked()"\n         class="content-title" aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n         analytics-id="content.item.courses.outline.gradebook.item.forum.link"><span>{{ content.title }}</span></a>\n      <div ng-switch-when="resource/x-bb-courselink">\n        <bb-course-link-item content="content" target-content="contentItemBase.targetContent" prefix="\'course.outline\'"/>\n      </div>\n      <div ng-switch-when="resource/x-bb-journallink">\n        <a bb-peek-sref="journal.view.with-participation({contentId:content.id})"\n          bb-prevent-click-if="content.isConditionalReleaseLocked()"\n          class="content-title" aria-describedby="activity-indicator-{{::content.id}}"\n          analytics-id="content.item.courses.outline.journal.link"><span>{{ content.title }}</span></a>\n      </div>\n      <div ng-switch-default class="content-title">{{ content.title }}</div>\n      <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator"></bb-svg-icon>\n    </ng-switch>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span>{{content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: "m": this }}</span>\n    </span>\n    <span ng-if="contentItemCourseOutline.getExtraRequirementsSummary() !== null">\n      <span class="vertical-bar"></span>\n      <span bb-translate class="js-extra-requirements">{{::contentItemCourseOutline.getExtraRequirementsSummary()}}</span>\n    </span>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true"\n          class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n    <span ng-if="content.getTimedTestDetail().hasTimeLimit" class="time-limit ellipse">\n      <span class="vertical-bar"></span>\n      <span bb-translate>components.directives.content-item-base.time-limit</span>\n      <span>{{content.getTimedTestDetail().displayedTimeLimitSeconds | timeSpan: "m": this }}</span>\n    </span>\n    <span ng-if="contentItemCourseOutline.getExtraRequirementsSummary() !== null">\n      <span class="vertical-bar"></span>\n      <span bb-translate class="js-extra-requirements">{{::contentItemCourseOutline.getExtraRequirementsSummary()}}</span>\n    </span>\n  </div>\n  <div ng-if="contentItemBase.isPeerGradingConfigured" class="peer-review-due-date" bb-feature-toggle="peerAssessmentFeatureFlag" remove-from-dom="true">\n    <bb-svg-icon size="small" icon="peer-review"></bb-svg-icon>\n    <span bb-translate class="content-peer-review-due-date-label"\n          translate-values="{peerReviewsNumber: contentItemBase.peerReviews, datetime: contentItemBase.peerDueDate}">\n      components.directives.content-item-base.peer-review-due-date\n    </span>\n    <div ng-if="contentItemBase.contextCourseMembership.isStudentMembership()">\n      <button class="peer-review-info-tooltip"\n        bb-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-open-on-activation="true"\n        tooltip-disable-on-mouse-over="false"\n        bb-translate-attrs="{ \'title\': \'components.directives.content-item-base.peerReview.information-tooltip\' }"\n        analytics-id="components.directives.content-item-base.peerGrading.tooltip.button"\n      >\n        <bb-svg-icon class="stop-click-propagation" size="small" icon="information"></bb-svg-icon>\n      </button>\n    </div>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="guidance-wrapper">\n      <div class="group-name">\n        <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n        <span class="group-target-guided" bb-guidance-target component-key="contentGroupInfo"\n              ng-if="!contentItemBase.contextCourse.course.isComplete()">\n        </span>\n        <a ng-if="contentItemBase.hasViewGroupsAsAdmin"\n           class="js-groups-link"\n           href="javascript:void(0);"\n           ng-click="contentItemBase.editGroups()"\n           analytics-id="content.item.course.outline.contentItemBase.editGroups.link">\n          <bb-group-count content="content"></bb-group-count>\n        </a>\n        <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="js-groups-link">\n          <bb-group-count content="content"></bb-group-count>\n        </span>\n        <div ng-if="!(contentItemBase.canViewGroups || contentItemBase.hasViewGroupsAsAdmin)" class="student-group-enrollment">\n          <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n        </div>\n        \x3c!-- For complete course, will not show this guidance: LRN-107718 --\x3e\n        <span>\n          <bb-guidance ng-if="!contentItemBase.contextCourse.course.isComplete() && !contentItemBase.entitledToDesignAssessment" component-key="contentGroupInfo"\n                       class="guidance-element-group guidance-is-empty-student guidance-element-overlay push-left">\n            <span bb-translate="{{::contentItemCourseOutline.groupAssessmentFtueKey}}" translate-values="{title: contentItemCourseOutline.customCategory}"></span>\n          </bb-guidance>\n        </span>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    tabindex="0"\n    class="lock-info"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    open-panel-on-restricted="true"\n                                    enable-conditional-release="content.canAccessAdaptiveRelease()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control"\n       ng-class="{\'conditional-release-control-for-complete-course\': contentItemCourseOutline.isCourseCompletedAndInInstructorView()}">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemCourseOutline.canOpenConditionalRelease && contentItemCourseOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-disable-on-mouse-over="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="{{contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-open-on-activation="{{!contentItemCourseOutline.canOpenConditionalRelease}}"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}.link">\n        <span bb-translate="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}"></span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},"/UyG":function(e,t){e.exports='<div class="fimb-question-container fimb-attempt-authoring" bb-first-time-container>\n  <div class="fimb-question">\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.viewHelper.questionText"\n      plugin-options="editorPluginOptions"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n  <ul class="fimb-answers-container">\n    <li class="fimb-answer" ng-repeat="blankIdentifier in assessmentQuestion.viewHelper.orderedIdentifiers track by $index">\n      <bb-guidance ng-if="::assessmentQuestion.viewHelper.shouldShowFTUEOnAnswer($index)"\n                   component-key="components.features.course.content.assessment.ftue.fimb-question.attempt"\n                   class="guidance-element-overlay">\n        <span bb-translate>components.directives.assessment-question.fimb.attempt-authoring.ftue</span>\n      </bb-guidance>\n      <div ng-if="::assessmentQuestion.viewHelper.shouldShowFTUEOnAnswer($index)"\n           class="answer-guidance-container"\n           bb-guidance-target\n           component-key="components.features.course.content.assessment.ftue.fimb-question.attempt">\n      </div>\n      <label class="fimb-answer-label"\n             for="{{assessmentQuestion.elementId}}-fimb-answers-{{$index}}">\n        {{assessmentQuestion.viewHelper.translatedIdentifiers.get(blankIdentifier)}}\n      </label>\n      <input id="{{assessmentQuestion.elementId}}-fimb-answers-{{$index}}"\n             name="{{assessmentQuestion.elementId}}-fimb-answers-{{$index}}"\n             class="fimb-answer-input"\n             type="text"\n             ng-model="assessmentQuestion.givenAnswer[blankIdentifier]"\n             ng-blur="assessmentQuestion.viewHelper.replaceAnswerInQuestionTextWithText($index, assessmentQuestion.givenAnswer[blankIdentifier])"\n             bb-translate-attrs="{placeholder: \'components.directives.assessment-question.fimb.attempt-authoring.input-placeholder\'}"\n             analytics-id="components.directives.assessment-question.fimb.attempt-authoring.input-placeholder.input.text"\n      />\n    </li>\n  </ul>\n</div>\n'},"/hmo":function(e,t){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-blti-link" \n     bb-component-sref="{{prefix}}.engagement.edit({contentId:\'{{targetContent.id}}\'})"\n     class="content-title"\n     analytics-id="course.content.lti.link"><span>{{ content.title }}</span></a>\n</ng-switch>\n'},"/oLk":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-export",use:"icon-small-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-export"><path d="M7 9l8-8M12 1h3v3M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"/qTg":function(e,t){e.exports='<div class="matching-attempt-authoring matching">\n  <div class="matching-question question-container">\n    <bb-rich-text-editor\n      plugin-options="editorPluginOptions"\n      ng-model="questionAttempt.question.questionText.rawText"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n  <div bb-first-time-container class="guidance-wrapper question-answer-container">\n    <div bb-guidance-target component-key="components.directives.assessment-question.ftue.matching-attempt-authoring">\n      <bb-matching-attempt\n        answers="questionAttempt.question.answers"\n        given-answers="questionAttempt.givenAnswers"\n        prompts="questionAttempt.question.prompts"\n        on-change="assessmentQuestion.onAnswersChange"\n        question-index="questionAttempt.question.position"\n      ></bb-matching-attempt>\n    </div>\n\n    <bb-guidance component-key="components.directives.assessment-question.ftue.matching-attempt-authoring"\n                 class="guidance-element-overlay stacked push-bottom" ng-if="questionAttempt.question.ui.questionTypePosition === 0">\n      <span bb-translate>components.directives.assessment-question.ftue.matching-attempt-authoring</span>\n    </bb-guidance>\n  </div>\n</div>\n'},"0/Nk":function(e,t){e.exports='<div class="group-student-self-enroll-directive" bb-load-bundle="components/directives/group/group-student-enrollment">\n  <div ng-if="$ctrl.content.assignedGroups.length > 0">\n    <span ng-if="!$ctrl.isOpenEnrollment()" class="ellipse title">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </span>\n    <a ng-if="$ctrl.isSelfEnrollment && $ctrl.isOpenEnrollment()" class="self-enroll-link js-self-enroll-link"\n       href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()"\n       analytics-id="components.directives.group-student-enrollment.groupTitle.link">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </a>\n  </div>\n  <span ng-if="!($ctrl.content.assignedGroups.length > 0) && !$ctrl.isSelfEnrollment" class="ellipse title" bb-translate\n        translate-values="{title: components.directives.group-student-enrollment.unknown}">\n    components.directives.group-student-enrollment.unknown\n  </span>\n  <div ng-if="!($ctrl.content.assignedGroups.length > 0) && $ctrl.isSelfEnrollment">\n    <div ng-if="$ctrl.isOpenEnrollment()">\n      <a href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" class="self-enroll-link js-self-enroll-link"\n         bb-translate analytics-id="components.directives.group-student-enrollment.self-enroll-to-participate">components.directives.group-student-enrollment.self-enroll-to-participate</a>\n    </div>\n    <div ng-if="$ctrl.isBeforeEnrollment()" class="self-enroll-date" translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-starts</div>\n    <div ng-if="$ctrl.isOpenEnrollmentWithEnding()" class="self-enroll-date"\n         ng-class="{\'is-important\': $ctrl.selfEnrollGroupInfo.isEnrollmentDateImportant}"\n         translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closes</div>\n    <div ng-if="$ctrl.isAfterEnrollment()" class="self-enroll-date"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closed</div>\n  </div>\n</div>\n'},"00V8":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("xQgz"),o="ultra.components.directives.bbUiIcon.Folder";Object(i.a)(s.Folder,o,"bbUiIconFolder")},"01PJ":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-post",use:"icon-small-post-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-post"><path d="M9 15L1 9l14-8-6 14zM5 12L15 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 12v3l1.5-1.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"07HN":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    class="button-add-content"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.grades.button"\n  >\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>'},"0B2D":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.assessment.alreadySubmitted.title"\n          analytics-id-tag-prefix="course.content.assessment.alreadySubmitted">\n  <div name="modal-contents">\n    <p bb-translate>course.content.assessment.alreadySubmitted.description</p>\n  </div>\n  <a name="modal-footer-button-primary" href="javascript:void(0);" bb-translate ng-click="$parent.$dismiss(); assessmentOverview.navigateAttemptReview()" analytics-id="course.content.assessment.alreadySubmitted.viewSubmission">\n    course.content.assessment.alreadySubmitted.viewSubmission\n  </a>\n</bb-modal>\n'},"0BVo":function(e,t){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.failedToUpload.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.failedToUpload.title" aria-describedby="failed-to-upload"\n          analytics-id-tag-prefix="course.grades.gradesUploadSettingsFailed">\n<div name="modal-contents">\n    <p id="failed-to-upload" translate-values="{ count: failedItemsCount, errorItems: failedItems }"\n       bb-translate="course.grades.grades-upload-settings.failedToUpload.content.plural"></p>\n</div>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button failed-to-upload-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsFailed.closeButton.button">\n      <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},"0V7O":function(e,t){e.exports='<div class="attempt-authoring-container" bb-load-bundle="components/directives/assessment/attempt-canvas" ng-switch="::attemptCanvas.hasQuestions()">\n  \x3c!-- Add empty form to import autosave-directive.ts when there is no question content --\x3e\n  <form bb-autosave save-func="" validation-func="" novalidate ng-class="::{\'empty-form\' : !attemptCanvas.hasQuestions()}"></form>\n  \x3c!-- has questions --\x3e\n  <div ng-if="::attemptCanvas.hasQuestions()">\n    <div class="attempt-header assessment-header uneditable">\n      <h2 bb-translate="{{attemptCanvas.headerKey}}" translate-values="{\'title\': attemptCanvas.customCategory}"></h2>\n    </div>\n    <ol class="question-list attempt-question-list">\n      <li ng-repeat="questionAttempt in attemptCanvas.toolAttemptDetail.questionAttempts track by $index">\n        <bb-assessment-question question-attempt="questionAttempt"\n                                mode="attemptCanvas.AttemptMode()"\n                                index="$index">\n                                </bb-assessment-question>\n      </li>\n    </ol>\n    <div class="freeform-response-divider"></div>\n  </div>\n\n  \x3c!-- empty state --\x3e\n  <div class="is-empty-page is-empty-fade"\n        ng-switch-when="false"\n        ng-if="!attemptCanvas.studentSubmission().rawText && !attemptCanvas.hasFreeformResponse()">\n    <div class="is-empty-wrapper">\n      <div class="is-empty-explanation">\n        <img src="./static/images/ftue/zero-state-assessment-student-addcontent.svg" alt="" />\n        <h3 class="is-empty-heading" bb-translate>components.directives.attempt-canvas.freeform-response.author.banner.submission</h3>\n        <span bb-translate>components.directives.attempt-canvas.freeform-response.author.subtext.submission</span>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- freeform response header --\x3e\n  <div ng-switch-when="true"\n       ng-switch="attemptCanvas.hasFreeformResponse()">\n    <div class="attempt-header assessment-header" ng-switch-when="true">\n      <h2 bb-translate>{{::attemptCanvas.getFreeformResponseBundleKey()}}</h2>\n    </div>\n    <div class="is-empty-page is-empty-fade" ng-switch-when="false">\n      <div class="is-empty-wrapper">\n        <div class="is-empty-explanation">\n          <img src="./static/images/ftue/zero-state-assessment-student-addcontent.svg" alt="" />\n          <h3 class="is-empty-heading" bb-translate>{{::attemptCanvas.getFreeformResponseBundleKey(\'banner\')}}</h3>\n          <span bb-translate>{{::attemptCanvas.getFreeformResponseBundleKey(\'subtext\')}}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- freeform response is always present --\x3e\n  <div class="freeform-response">\n    <ng-form name="freeform-response-form" novalidate>\n      <bb-freeform-response-editor\n        is-privileged="true"\n        has-content="attemptCanvas.hasContentBlocks"\n        bbml="attemptCanvas.studentSubmission()"\n        save-func="attemptCanvas.save()">\n      </bb-freeform-response-editor>\n    </ng-form>\n  </div>\n</div>\n'},"0Vbm":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),s=(n("kbFs"),n("6Fqm"),n("67oV"),n("+brj")),o=n("yC9S"),a=n("aHpC"),r=n("QzaB"),c="ultra.components.directives.searchBox";!function(){function e(e,t){this.browserStorage=e,this.$element=t}e.prototype.$onInit=function(){var e=this;this.localStorageKey&&this.browserStorage.getFromStorage(this.localStorageKey,s.a.LocalStorage).then((function(t){e.searchText(t)}))},e.prototype.searchText=function(e){return null!=e&&(this.onSearch({searchText:e}),this._searchText=e,this.localStorageKey&&(""===e?this.browserStorage.deleteFromStorage(this.localStorageKey,s.a.LocalStorage):this.browserStorage.saveToStorage(this.localStorageKey,e,s.a.LocalStorage))),this._searchText},e.prototype.clearSearchInput=function(){this.searchText(""),this.$element.find("input").focus()},e=Object(i.__decorate)([Object(o.a)({moduleName:c,componentName:"bbSearchBox",template:r,bindings:{onSearch:"&",localStorageKey:"@?",placeholderKey:"@",analyticsIdTagPrefix:"@?"},requireModules:[s.b]}),Object(i.__param)(0,Object(a.b)(s.c)),Object(i.__param)(1,Object(a.b)("$element"))],e)}()},"0lMW":function(e,t,n){},"0rzL":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("D57K"),s=(n("eWdw"),n("wHJ2")),o=n("pjml"),a=n("dJ97"),r=n("nbDY"),c=n.n(r),l=n("Bu0u"),d=n("UODz"),u="ultra.components.directives.submissionCard",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.ATTEMPT=new t("ATTEMPT"),t.GRADE=new t("GRADE"),t.INFO=new t("INFO"),t}(c.a),m=function(){function e(e){if(this.scope=e,!e.gradingColumn&&!e.gradeDetail)throw new l.a({message:"gradingColumn or gradeDetail must be provided."});if(this.scope.gradeDetail&&!this.scope.gradeDetail.column)throw new l.a({message:"gradeDetail.column must be provided to display attempt mode."});var t,n;switch(this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)&&(this.attempt=this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt,this.currentGradeStatus=this.scope.gradeDetail.ui.attempt.status),(!e.gradeDetail||e.gradeDetail&&!this.attempt)&&e.gradingColumn?this.scope.mode=p.INFO:e.gradeDetail&&this.attempt&&(this.scope.mode=p.ATTEMPT,this.scope.gradingColumn=this.scope.gradeDetail.column),e.iconClass=o.r.ContentHandler.UltraAssignment.iconClass,this.showLate=!e.showLate||e.showLate(),!this.showLate||e.gradeDetail&&this.attempt&&!this.attempt.isInProgress()||(e.iconClass+="-a"),e.mode){case p.INFO:n=e.gradingColumn.dueDate?"DUE":"NO_DUE_DATE",t=this.showLate?"UNOPENED_LATE":"UNOPENED";break;case p.ATTEMPT:n=this.attempt.status.toString(),e.hasAttempt=!0,t=o.C.AttemptStatus.InProgress.isEqualTo(this.attempt.status)&&this.showLate?"SUBMISSION_LATE":"SUBMISSION";break;case p.GRADE:}e.status="components.directives.submission-card.attemptStatus."+n,e.title="components.directives.submission-card.title."+t}return e.prototype.shouldExpandForRubricIcon=function(){return(this.scope.showRubricButton&&this.scope.showRubricButton()||this.scope.showRubricDiv&&this.scope.showRubricDiv())&&this.scope.gradingColumn.hasRubricAssociation&&this.scope.gradingColumn.hasRubricAssociation()},e.$inject=["scope"],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=d,this.scope={gradeDetail:"=?",gradingColumn:"=?",inline:"@?",clickable:"=?",showLate:"&?",showRubricButton:"&?",showRubricDiv:"&?"},this.link=function(e){e.submissionCard=t.$injector.instantiate(m,{scope:e})}}return e.$inject=["$injector"],e}();s.module(u,[a.a]).directive("bbSubmissionCard",["$injector",function(e){return e.instantiate(h)}])},"0vQT":function(e,t,n){"use strict";var i=n("D57K"),s=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Correct=new t("correct"),t.Partial=new t("partial"),t.Incorrect=new t("incorrect"),t.FullCredit=new t("full-credit"),t}(n.n(s).a);t.a=o},"1/hr":function(e,t,n){},"10QP":function(e,t,n){},"15AK":function(e,t,n){"use strict";n.r(t);var i=n("D57K"),s=n("wHJ2"),o=n("5MwF"),a=n("pjml"),r=n("nsO7"),c=n("mnBQ"),l=n("0JpG"),d=n("k9iv"),u=n("DDBr"),p=n("eAnr"),m=n("TnpK"),h=n("Fvsw"),b=n("Qbdf"),g=n("bF8R"),v=n("fYJU"),f=n("R+Yw"),y=n("R4kC"),w=n("X/qj"),C=n("t6LE"),S=n("aHpC"),A=n("9hUw"),k=function(){function e(e,t,n,i,s,o,a,r){var c=this;this.$q=e,this.ultraStateService=t,this.gradebookPermissionService=n,this.feedbackService=i,this.currentUser=s,this.isGroupAttempt=o,this.userModel=a,this.peerService=r,this.bbml={},this.attemptGrader=null,this.onUploadSuccess=function(e){c.bbml.fileLocation=c.bbml.fileLocation||e.fileLocation,c.bbml.webLocation=c.bbml.webLocation||e.webLocation},this.feedbackTextDidChange=function(e){c.bbml.current=e.toBbML(),c.bbml.isDirty=e.isDirty},this.save=function(e){return void 0===e&&(e=!1),c.bbml.forSave=c.bbml.current,c.attempt?(c.attempt.feedbackToUser||(c.attempt.feedbackToUser={rawText:""}),c.attempt.feedbackToUser.rawText=c.bbml.forSave,c.attempt.feedbackToUser.fileLocation=c.attempt.feedbackToUser.fileLocation||c.bbml.fileLocation,c.attempt.feedbackToUser.webLocation=c.attempt.feedbackToUser.webLocation||c.bbml.webLocation,c.getCurrentColumn().peerGrading&&(c.attempt.status=e?C.AttemptStatus.Completed:null),c.attempt.$save(["feedbackToUser.rawText","feedbackToUser.fileLocation","feedbackToUser.webLocation","status"]).$asPromise().then((function(e){return c.bbml.initial=e.feedbackToUser.rawText,c.bbml.isDirty=!1,c.attempt.feedbackToUser.webLocation=e.feedbackToUser.webLocation,c.attempt.feedbackToUser.fileLocation=e.feedbackToUser.fileLocation,c.attempt.overrideStatus=e.overrideStatus,c.feedbackService.refreshAfterAssessmentAttemptFeedbackSave(e.feedbackToUser,e),e.feedbackToUser}))):c._loadAttempt().then((function(){if(c.attempt)return c.save()}))},this.getInitialBbml=function(){return c.bbml.initial}}return e.prototype.load=function(){var e=this;return this._loadAttempt().then((function(t){return e.populateFeedbackObject(t)}))},e.prototype.populateFeedbackObject=function(e){var t=e&&e.getFeedbackToUser();return this.bbml.initial=t?t.rawText:"",this.bbml.current=this.bbml.current||this.bbml.initial,this.bbml.fileLocation=t&&t.fileLocation||"",this.bbml.webLocation=t&&t.webLocation||"",t||{rawText:"",fileLocation:"",webLocation:"",displayText:""}},e.prototype.getCurrentColumn=function(){return this.ultraStateService.getCurrentResolvedValues().currentColumn},e.prototype.getCurrentCourse=function(){return this.ultraStateService.getCurrentResolvedValues().currentCourse},e.prototype.fetchGroupAttempt=function(){var e=this.ultraStateService.getCurrentUrlParams().attemptId;return this.getCurrentCourse().gradebook.groupAttempts.$find(e,{expand:"attempts,feedbackToUser"}).$asPromise()},e.prototype.fetchAttempt=function(){var e=this,t=this.ultraStateService.getCurrentUrlParams(),n=t.attemptId,i=t.gradeId,s=this.getCurrentColumn();return this.getCurrentCourse().gradebook.attempts.$find(n,{expand:"feedbackToUser"}).$asPromise().then((function(t){var n=e.gradebookPermissionService.canDelegatedReconcileAttempt(s),o=s.peerGrading&&t.userId===e.currentUser.userId;return n||o?s.grades.$new(i||t.gradeId).attempts.$add(t).$find(t.id).$asPromise().then((function(e){return e.stagedAttemptGrades.$fetch().$asPromise().then((function(){return e}))})):t})).then((function(t){return e.peerService.canPeerReviewAttempt(s,t)?e.userModel.$find(e.currentUser.userId,{fields:"avatar,familyName,givenName"}).$asPromise().then((function(n){return e.attemptGrader=n,t})):e.$q.when(t)}))},e.prototype._loadAttempt=function(){var e=this;return(this.isGroupAttempt?this.fetchGroupAttempt():this.fetchAttempt()).then((function(t){return e.attempt=t}))},e.prototype.feedbackIsDirty=function(){return this.bbml.isDirty},e.prototype.canEnterFeedback=function(){return this.attempt&&(this.gradebookPermissionService.canDelegatedEnterAttemptFeedback(this.getCurrentColumn(),this.attempt)||this.gradebookPermissionService.canDelegatedEnterAttemptGrades(this.getCurrentColumn(),this.attempt)||this.peerService.canPeerAddFeedbackToAttempt(this.getCurrentColumn(),this.attempt))},e.prototype.canViewAttemptGrades=function(){return this.attempt&&this.gradebookPermissionService.canViewGrades()},e.prototype.getStagedAttemptGrades=function(){return this.attempt&&"stagedAttemptGrades"in this.attempt&&this.attempt.stagedAttemptGrades.length>0?this.attempt.stagedAttemptGrades:null},e=Object(i.__decorate)([Object(i.__param)(0,Object(S.b)("$q")),Object(i.__param)(1,Object(S.b)(m.d)),Object(i.__param)(2,Object(S.b)(w.b)),Object(i.__param)(3,Object(S.b)(p.c)),Object(i.__param)(4,Object(S.b)(v.b)),Object(i.__param)(5,Object(S.b)("isGroupAttempt")),Object(i.__param)(6,Object(S.b)(a.Pb.serviceName)),Object(i.__param)(7,Object(S.b)(A.b))],e)}(),I=function(){function e(e,t,n){var i=this;this.ultraStateService=e,this.gradebookPermissionService=t,this.feedbackService=n,this.bbml={},this.onUploadSuccess=function(e){i.bbml.fileLocation=i.bbml.fileLocation||e.fileLocation,i.bbml.webLocation=i.bbml.webLocation||e.webLocation},this.feedbackTextDidChange=function(e){i.bbml.current=e.toBbML(),i.bbml.isDirty=e.isDirty},this.save=function(){i.bbml.forSave=i.bbml.current||"";var e=i.ultraStateService.getCurrentResolvedValues().currentCourse;i.attempt.feedbackToUser||(i.attempt.feedbackToUser={rawText:""});var t=e.gradebook.attempts.$buildRaw(i.attempt);return t.feedbackToUser.rawText=i.attempt.feedbackToUser.rawText=i.bbml.forSave,t.feedbackToUser.fileLocation=i.attempt.feedbackToUser.fileLocation=i.attempt.feedbackToUser.fileLocation||i.bbml.fileLocation,t.feedbackToUser.webLocation=i.attempt.feedbackToUser.fileLocation=i.attempt.feedbackToUser.webLocation||i.bbml.webLocation,t.$save(["feedbackToUser.rawText","feedbackToUser.fileLocation","feedbackToUser.webLocation"]).$asPromise().then((function(e){return i.bbml.initial=e.feedbackToUser.rawText,i.bbml.isDirty=!1,i.attempt.feedbackToUser.webLocation=e.feedbackToUser.webLocation,i.attempt.feedbackToUser.fileLocation=e.feedbackToUser.fileLocation,i.attempt.overrideStatus=e.overrideStatus,i.attempt.feedbackToUser.rawText=e.feedbackToUser.rawText,i.feedbackService.refreshAfterIndividualfeedbackSave(e),e.feedbackToUser}))},this.getInitialBbml=function(){return i.bbml.initial}}return e.prototype.feedbackIsDirty=function(){return this.bbml.isDirty},e.prototype.loadSync=function(e){this.attempt=e;var t=e.getGroupIndividualFeedbackToUser();return this.bbml.isDirty=!1,this.bbml.initial=t&&t.rawText,this.bbml.current=this.bbml.current||this.bbml.initial,this.bbml.fileLocation=t&&t.fileLocation||"",this.bbml.webLocation=t&&t.webLocation||"",t||{rawText:"",fileLocation:"",webLocation:"",displayText:""}},e.prototype.canEnterFeedback=function(){return this.gradebookPermissionService.canEnterGrades()||this.gradebookPermissionService.canEnterFeedback()},e.prototype.canViewAttemptGrades=function(){return this.gradebookPermissionService.canViewGrades()},e.$inject=[m.d,w.b,p.c],e}(),O=n("yC9S"),D=n("Q/M7"),T=n("kwLz"),$=n("6fZB"),x=n("7cYF"),E=n("oVrE"),P=n("X455"),R=n("lEL+"),L=n("wtKk"),j=n("nfhp");n.d(t,"FEEDBACK_PARAMS_UPDATED",(function(){return G})),n.d(t,"FEEDBACK_UPDATED",(function(){return M})),n.d(t,"moduleName",(function(){return _})),n.d(t,"componentName",(function(){return F})),n.d(t,"controllerName",(function(){return B})),n.d(t,"ASSESSMENT_FEEDBACK_SAVE",(function(){return N})),n.d(t,"ASSESSMENT_FEEDBACK_SAVED",(function(){return q})),n.d(t,"ASSESSMENT_FEEDBACK_CHANGED",(function(){return z})),n.d(t,"assessmentFeedbackModule",(function(){return V})),n.d(t,"AssessmentFeedback",(function(){return H})),n.d(t,"AssessmentFeedbackParams",(function(){return U})),n.d(t,"AssessmentFeedbackController",(function(){return Q})),n.d(t,"template",(function(){return K})),n.d(t,"templateUrl",(function(){return j}));var G="feedbackParamsUpdated",M="FeedbackUpdated",_="ultra.course.assessment.feedback",F="assessmentFeedback",B="ultra.course.assessment.feedback",N="assessment-feedback:save",q="assessment-feedback:saved",z="assessment-feedback:changed",V=s.module(_,[p.a,c.a,c.a,u.a,y.a,A.a,P.a,R.a]),H=function(){function e(e,t,n,i,s,o,a,r,c,d,u,p){var m=this;this.$rootScope=e,this.$scope=t,this.$q=n,this.$injector=i,this.timeout=s,this.localize=o,this.contextUser=a,this.errorModalService=r,this.ultraSubmissionListService=c,this.ultraState=d,this.peerReviewService=u,this.currentCourseMembership=p,this.confirmedToClose=!1,this.tabKey=T.FeedbackPivotKey.General,this.isLoading=!1,this.isFeedbackAuthoringPayloadLoaded=!1,this.inline=!1,this.isInlineMode=!1,this.hideFeedbackFromPeerReviewer=!1,this.showTextForStudentSubmissionPage=!1,this.isCreateMode=function(){return!m.feedbackText.getInitialBbml()},this.getFormatUsername=function(e){return m.localize.formatUsernameSync(e,l.ILocaleUsernameFormat.Short,m.$scope,{noWrap:!0,noEscape:!0})}}return e.prototype.$onInit=function(){var e=this;this.isGroupSubmission()&&this.$scope.$on("$locationChangeSuccess",(function(){e.loadFeedbackTab()})),this.$scope.$on(G,(function(){e.buildFeedbackAuthoringPayload({},!0)})),this.$scope.assessmentFeedback=this,this.initializeFeedback(),this.$scope.$on("$stateChangeStart",(function(t){e.onShowCloseConfirmationModal(t)})),this.setRenderMode(),this.subscribeCancelNavigationEvents(),this.$scope.$on(N,(function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),e.$scope.assessmentFeedback.onClickSave(n,i)})),this.$scope.$on(x.b,(function(){e.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly&&e.$scope.assessmentFeedback.onClickEdit(),s.element("bb-feedback-authoring div.bb-editor").first().focus()}))},e.prototype.loadFeedbackTab=function(){var e=this.ultraState.getCurrentUrlParams().attemptId;!this.isGroupSubmission()||this.feedbackText.attempt&&this.feedbackText.attempt.id===e?this.buildFeedbackAuthoringPayload():this.initializeFeedback()},e.prototype.initializeFeedback=function(){this.feedbackText=this.$injector.instantiate(k,{isGroupAttempt:this.isGroupSubmission()}),this.feedbackParams=this.$injector.instantiate(U,{feedbackText:this.feedbackText,$scope:this.$scope}),this.isGroupSubmission()&&(this.feedbackTextIndividual=this.$injector.instantiate(I),this.feedbackParamsIndividual=this.$injector.instantiate(U,{feedbackText:this.feedbackTextIndividual,$scope:this.$scope})),this.isLoading=!0,this.initialize()},e.prototype.setRenderMode=function(){var e=this.ultraState.getCurrentUrlParams().mode;this.isInlineMode="inline"===e},e.prototype.subscribeCancelNavigationEvents=function(){var e=this;this.$scope.$on(L.a,(function(t,n,i){"feedback"===n&&(i.navigationPromise=e.$q((function(t){e.feedbackIsDirty()?(e.resumeNavigation=t,e.showCloseConfirmationModal()):t()})))}))},e.prototype.feedbackIsDirty=function(){var e,t,n,i,s,o,a,r,c=this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly;if(this.isGroupSubmission()){var l=this.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback;if(this.tabKey===T.FeedbackPivotKey.General)return null!=(null===(t=null===(e=this.feedbackText)||void 0===e?void 0:e.bbml)||void 0===t?void 0:t.current)&&(null===(i=null===(n=this.feedbackText)||void 0===n?void 0:n.bbml)||void 0===i?void 0:i.current)!==l&&!c;if(this.tabKey===T.FeedbackPivotKey.Individual)return null!=(null===(o=null===(s=this.feedbackTextIndividual)||void 0===s?void 0:s.bbml)||void 0===o?void 0:o.current)&&null!=l&&(null===(r=null===(a=this.feedbackTextIndividual)||void 0===a?void 0:a.bbml)||void 0===r?void 0:r.current)!==l&&!c}return!c&&this.feedbackParams.feedbackIsDirty()},e.prototype.onShowCloseConfirmationModal=function(e){this.confirmedToClose||!this.feedbackIsDirty()||this.isInlineMode||(e.preventDefault(),this.showCloseConfirmationModal())},e.prototype.isGroupSubmission=function(){return this.ultraState.getCurrentResolvedValues().currentContent.isGroupContent},e.prototype.initialize=function(){var e=this;try{this.initializeContent().then((function(){e.isLoading=!1,e.currentCourseMembership.isStudentMembership()&&!e.feedbackParams.gradeDetail||e.buildFeedbackAuthoringPayload({},!0),e.feedbackParams.gradeDetail&&e.$scope.$emit(z,e.feedbackIsDirty(),0===e.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback.length)})),this.peerReviewService.setContent(this.ultraState.getCurrentResolvedValues().currentContent)}catch(e){this.errorModalService.showDefaultErrorModal()}},e.prototype.initializeContent=function(){var e=this;return this.feedbackParams.loadAssessmentTitle(),this.feedbackParams.hideCancelSaveButtons=this.shouldHideCancelSaveButtons(),this.$q.all([this.feedbackParams.load(),this.feedbackParams.initializeCloudService()]).then((function(){return e.feedbackParams.loadCourseColorAndGradeDetail()}))},e.prototype.onClickSave=function(e,t){var n=this;return void 0===e&&(e=!1),void 0===t&&(t=!1),this.confirmedToClose=!0,this.currentFeedbackParams.save().then((function(){if(n.$rootScope.$broadcast(M),n.buildFeedbackAuthoringPayload(),!n.isInlineMode)return o.a.features.differentiatedFeedback&&n.isGroupSubmission()||n.inline?(r.isBoolean(e)&&e&&n.closePanel(),void(n.confirmedToClose=!1)):void n.closePanel();n.resumeNavigation&&n.resumeNavigation()}))},e.prototype.onClickEdit=function(){this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly=!1,this.triggerFeedbackAuthoringComponentReRender()},e.prototype.onClickCancel=function(){o.a.features.differentiatedFeedback&&this.isGroupSubmission()||!this.isCreateMode()?this.onClickCancelEditMode():this.isInlineMode||this.performClosePanel()},Object.defineProperty(e.prototype,"currentFeedbackParams",{get:function(){return this.tabKey===T.FeedbackPivotKey.General?this.feedbackParams:this.feedbackParamsIndividual},enumerable:!0,configurable:!0}),e.prototype.onClickCancelEditMode=function(){this.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback?this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly=!0:this.feedbackAuthoringPayload.configProps.primaryFeedbackConfigProps.editorIsReadOnly=!1,this.triggerFeedbackAuthoringComponentReRender()},e.prototype.shouldHideCancelSaveButtons=function(){return!(!this.feedbackParams.isPeerGrading()||this.feedbackParams.isReconciler())},e.prototype.showCloseConfirmationModal=function(){this.$scope.$broadcast("show-confirmation","assessment-feedback")},e.prototype.closeConfirmationModalDismissed=function(){this.resumeNavigation=null},e.prototype.dontSaveAction=function(){if(this.isInlineMode){if(!this.isCreateMode())return this.onClickCancelEditMode(),void this.resumeNavigation();this.feedbackAuthoringPayload.primaryGraderFeedback.rawTextFeedback="",this.triggerFeedbackAuthoringComponentReRender(),this.resumeNavigation()}else this.performClosePanel()},e.prototype.performClosePanel=function(){this.confirmedToClose=!0,this.closePanel()},e.prototype.closePanel=function(){this.ultraState.leavePeekState()},e.prototype.onTabChange=function(e){this.tabKey=e,this.buildFeedbackAuthoringPayload()},e.prototype.onFeedbackChanged=function(e){(0,this.currentFeedbackParams.getEditorConfig().onEditorContentChanged)(e),this.$scope.$emit(z,this.feedbackIsDirty(),0===e.toBbML().length)},e.prototype.getFeedbackConfigProps=function(e){var t=this.localize.getReactBabelfishParams(),n=t.locale,i=t.babelfishInstance,s=t.babelfishFormatter,o=e.pluginConfig,a=o.xsrfToken,r=o.courseId,c=o.apiBasePath,l=o.openKloudlessModal,d=o.onUploadSuccess;return{configProps:{showIconForReconciler:this.feedbackParams.isPeerGrading()&&this.feedbackParams.isReconciler(),hideFeedbackFromPeerReviewer:!!this.hideFeedbackFromPeerReviewer,isPeerGrading:this.feedbackParams.isPeerGrading(),isOrganization:this.feedbackParams.isOrganization,courseColorClass:this.feedbackParams.courseColorClass,primaryFeedbackConfigProps:{editorIsReadOnly:e.isReadOnly,onClickEdit:this.onClickEdit.bind(this),onFeedbackChange:this.onFeedbackChanged.bind(this),showPeerReviewerSpecificText:this.feedbackParams.isPeerGrading()&&!this.feedbackParams.isReconciler(),showTextForStudentSubmissionPage:!!this.showTextForStudentSubmissionPage},editorConfigProps:{hideCancelSaveButtons:this.feedbackParams.hideCancelSaveButtons,locale:n,xsrfToken:a,courseId:r,apiBasePath:c,babelfishInstance:i,babelfishFormatInstance:s,openKloudlessModal:function(){return Object($.a)(l())},onUploadSuccess:d,onClickCancel:this.onClickCancel.bind(this),onClickSave:this.onClickSave.bind(this)}}}},e.prototype.isSecondaryFeedbackLate=function(e){return!!this.feedbackParams.isPeerGrading()&&(!!e.grader&&(!this.ultraSubmissionListService.submissionList.rows.find((function(t){return t.membership.userId===e.grader.id})).hasDueDateException&&this.peerReviewService.isAfterPeerReviewDueDate(e.attemptLastGradedDate)))},e.prototype.isPrimaryFeedbackLate=function(e){return!(!this.feedbackParams.isPeerGrading()||!e)&&(!!this.currentCourseMembership.isStudentMembership()&&(!this.currentCourseMembership.isDueDateExcepted()&&this.peerReviewService.isAfterPeerReviewDueDate(e)))},e.prototype.getFeedbackTextAndAttemptDate=function(e,t){var n,i=e,s=t;return this.isInlineMode&&this.currentCourseMembership.isStudentMembership()&&!(null===(n=this.feedbackParams.gradeDetail)||void 0===n?void 0:n.isPosted())&&(i="",s=null),{rawTextFeedback:i,attemptLastGradedDate:s}},e.prototype.getFeedbackAuthoringPrimaryGraderFeedback=function(e){var t,n,i,s,o,a=this.getFeedbackTextAndAttemptDate(e.bbml,null===(n=null===(t=this.feedbackText)||void 0===t?void 0:t.attempt)||void 0===n?void 0:n.attemptLastGradedDate);return{primaryGraderFeedback:{rawTextFeedback:a.rawTextFeedback,attemptLastGradedDate:a.attemptLastGradedDate,isFeedbackEditable:e.isPrivileged,late:this.isPrimaryFeedbackLate(null===(s=null===(i=this.feedbackText)||void 0===i?void 0:i.attempt)||void 0===s?void 0:s.attemptLastGradedDate),grader:Object(E.a)(null===(o=this.feedbackText)||void 0===o?void 0:o.attemptGrader)}}},e.prototype.getFeedbackAuthoringSecondaryGradersFeedback=function(){var e=this,t=this.feedbackText.getStagedAttemptGrades();return{secondaryGradersFeedback:this.filterStagedAttemptGrades(t).map((function(t,n){var i=e.getFeedbackTextAndAttemptDate(t.feedbackToUser.rawText,t.grader?t.attemptLastGradedDate:null);return{rawTextFeedback:i.rawTextFeedback,attemptLastGradedDate:i.attemptLastGradedDate,id:t.stagedAttemptId,grader:Object(E.a)(t.grader),showAnonymousWhenNoUserData:!0,late:e.isSecondaryFeedbackLate(t),isFeedbackFromCurrentStudent:!1,showVisibleIcon:t.showFeedbackToStudent,listIndex:n+1,onClickChangeVisibility:function(){t.toggleVisibility().$then((function(){e.feedbackAuthoringPayload.secondaryGradersFeedback[n].showVisibleIcon=t.showFeedbackToStudent,e.triggerFeedbackAuthoringComponentReRender()}))}}}))}},e.prototype.filterStagedAttemptGrades=function(e){return e&&e.filter((function(e){return e.hasGraderFeedback}))||[]},e.prototype.getIndividualFeedbackAuthoringProps=function(){var e,t,n,i,s=this,o=!1;if(this.isIndividualFeedbackAuthoringEditView()){e=this.getUserIdFromParams();var a=this.ultraState.getCurrentUrlParams().groupId,c=r.find(this.ultraSubmissionListService.submissionList.rows,(function(e){return e.group.id===a&&!!e.group.memberships})),l=c?c.group.memberships:[],d=e?r.findIndex(l,(function(t){return t.userId===e})):0;e=l[d].userId,t=this.getFormatUsername(l[d].ui.user),l[d+1]&&(n=function(){s.ultraState.search("userId",l[d+1].userId)}),l[d-1]&&(i=function(){s.ultraState.search("userId",l[d-1].userId)}),o=!0}else e=this.contextUser.userId,t=this.getFormatUsername(this.contextUser.userModel);var u=this.getGroupIndividualAttempt(e);return this.feedbackParamsIndividual.loadTextSync(u),{panelTitle:t,configProps:{allowMultipleFeedbackNavigation:o,onNavigateToNextFeedback:n,onNavigateToPreviousFeedback:i}}},e.prototype.getGeneralFeedbackAuthoringProps=function(){var e=this.isGroupSubmission()&&this.isIndividualFeedbackAuthoringEditView(),t=this.getGeneralFeedbackTitleAndSubtitle();return{panelTitle:t.panelTitle,panelSubtitle:t.panelSubtitle,configProps:{allowMultipleFeedbackNavigation:e}}},e.prototype.getGeneralFeedbackTitleAndSubtitle=function(){var e,t;if(this.isGroupSubmission())if(this.isIndividualFeedbackAuthoringEditView()){var n=this.ultraState.getCurrentUrlParams().groupId;e=r.find(this.ultraSubmissionListService.submissionList.rows,(function(e){return e.group.id===n})).group.title}else{e=this.ultraState.getCurrentResolvedValues().currentContent.assignedGroups[0].groupTitle}else{var i=void 0;if(this.isIndividualFeedbackAuthoringEditView()&&!this.feedbackParams.isPeerGrading()){var s=this.getUserIdFromParams();i=r.find(this.ultraSubmissionListService.submissionList.rows,(function(e){return e.user.id===s})).user}else i=this.contextUser.userModel;e=this.getFormatUsername(i)}if(!o.a.features.differentiatedFeedback){var a=this.feedbackParams.isOrganization?"organization":"course";e=this.localize.translateSync({locale:this.localize.getLocale(this.$scope),key:this.feedbackText.canEnterFeedback()?a+".content.assessment.attempt.feedback.placeholder.privileged":a+".content.assessment.feedback.title"}),t=this.feedbackParams.assessmentTitle}return{panelTitle:e,panelSubtitle:t}},e.prototype.getFeedbackAuthoringGroupConfig=function(e){if(void 0===e&&(e=!1),e&&(this.tabKey=this.isOpenFromGroupAttempt()?T.FeedbackPivotKey.General:T.FeedbackPivotKey.Individual,o.a.features.differentiatedFeedback&&!this.isIndividualFeedbackAuthoringEditView())){var t=this.getGroupIndividualAttempt(this.contextUser.userId),n=this.feedbackParamsIndividual.loadTextSync(t),i=this.feedbackParams.feedbackText.getInitialBbml();!n||""===n||""!==i&&i||(this.tabKey=T.FeedbackPivotKey.Individual)}return{configProps:{isFeedbackForGroupSubmission:!0,onGroupTabChange:this.onTabChange.bind(this),initialSelectedTabKey:this.tabKey}}},e.prototype.buildFeedbackAuthoringPayload=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1);var n={},i={};this.isGroupSubmission()&&(i=this.getFeedbackAuthoringGroupConfig(t)),n=this.tabKey===T.FeedbackPivotKey.Individual?this.getIndividualFeedbackAuthoringProps():this.getGeneralFeedbackAuthoringProps(),this.isFeedbackAuthoringPayloadLoaded=!0;var s=this.currentFeedbackParams.getEditorConfig();this.feedbackAuthoringPayload=r.merge({analyticsId:"assessment"},n,i,this.getFeedbackConfigProps(s),this.getFeedbackAuthoringPrimaryGraderFeedback(s),this.getFeedbackAuthoringSecondaryGradersFeedback(),e)},e.prototype.triggerFeedbackAuthoringComponentReRender=function(){this.feedbackAuthoringPayload=r.cloneDeep(this.feedbackAuthoringPayload)},e.prototype.isIndividualFeedbackAuthoringEditView=function(){return!!this.ultraSubmissionListService.submissionList},e.prototype.getGroupIndividualAttempt=function(e){return r.find(this.feedbackText.attempt.attempts,{userId:e})},e.prototype.isOpenFromGroupAttempt=function(){return!this.ultraSubmissionListService.submissionList||!this.getUserIdFromParams()},e.prototype.getUserIdFromParams=function(){var e=this.ultraState.getCurrentUrlParams().userId;return r.isArray(e)&&(e=e[0]),e},Object(i.__decorate)([Object(S.c)()],e.prototype,"onClickSave",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onClickEdit",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onClickCancel",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onTabChange",null),Object(i.__decorate)([Object(S.c)()],e.prototype,"onFeedbackChanged",null),e=Object(i.__decorate)([Object(O.a)({module:V,componentName:F,template:j,bindings:{inline:"<?",hideFeedbackFromPeerReviewer:"<",showTextForStudentSubmissionPage:"<?"}}),Object(i.__param)(0,Object(S.b)("$rootScope")),Object(i.__param)(1,Object(S.b)("$scope")),Object(i.__param)(2,Object(S.b)("$q")),Object(i.__param)(3,Object(S.b)("$injector")),Object(i.__param)(4,Object(S.b)(R.b)),Object(i.__param)(5,Object(S.b)(l.serviceName)),Object(i.__param)(6,Object(S.b)(v.b)),Object(i.__param)(7,Object(S.b)(d.c)),Object(i.__param)(8,Object(S.b)(y.b)),Object(i.__param)(9,Object(S.b)(m.d)),Object(i.__param)(10,Object(S.b)(A.b)),Object(i.__param)(11,Object(S.b)(P.d))],e)}(),U=function(){function e(e,t,n,i,s,a,r,c,l,d,u,p){var m=this;this.$q=e,this.localize=t,this.courseModel=n,this.ultraStateService=i,this.context=s,this.feedbackText=a,this.rteKloudlessService=r,this.$scope=c,this.contextUser=l,this.contextCourse=d,this.contentData=u,this.currentCourseMembership=p,this.placeholder="",this.webLocation="",this.fileLocation="",this.getPlaceholderLocalizeKey=function(){return m.canEnterFeedback()?"course.content.assessment.attempt.feedback.placeholder.privileged":m.getPlaceholderReadonlyLocalizeKey()},this.getTranslation=function(e){return m.localize.translate({locale:m.localize.getLocale(m.$scope),key:e})},this.loadPlaceholder=function(){var e=m.getPlaceholderLocalizeKey();return m.getTranslation(e).then((function(e){m.placeholder=e}))},this.loadText=function(){return m.feedbackText.load().then((function(e){return m.bbml=e.rawText,m.webLocation=e.webLocation,m.fileLocation=e.fileLocation,m.isEditorReadOnly=!m.canEnterFeedback()||!!e.rawText,e.rawText}))},this.loadTextSync=function(e){var t=m.feedbackText.loadSync(e);return m.bbml=t.rawText,m.webLocation=t.webLocation,m.fileLocation=t.fileLocation,m.isEditorReadOnly=!m.canEnterFeedback()||!!t.rawText,t.rawText},this.load=function(){m.ultraStateService.getCurrentUrlParams().contentId;return m.$q.all([m.getCurrentCourse(),m.loadText()]).then((function(e){var t=e[0];e[1];m.loadPlaceholder(),m.isOrganization=t.isOrganization,m.currentCourse=t}))},this.loadCourseColorAndGradeDetail=function(){var e=m.ultraStateService.getCurrentUrlParams().contentId;return m.currentCourse?m.$q.all([m.currentCourse.users.$find(m.contextUser.userId,{expand:"courseRole"}).$allow([404]).$asPromise(),m.currentCourseMembership.isStudentMembership()&&m.contentData.loadContentAndGrades({contentId:e,course:m.currentCourse})]).then((function(e){var t=e[0],n=e[1];m.courseColorClass=t.getCourseColorClass(),m.gradeDetail=null==n?void 0:n.gradeDetail})):m.$q.resolve(void 0)},this.loadAssessmentTitle=function(){var e=m.ultraStateService.getCurrentResolvedValues().currentContent;return m.assessmentTitle=e.title,e.title},this.canViewAttemptGrades=function(){return m.feedbackText.canViewAttemptGrades()},this.canEnterFeedback=function(){return m.feedbackText.canEnterFeedback()},this.getPluginConfig=function(){return{courseId:m.ultraStateService.getCurrentUrlParams().courseId,xsrfToken:m.context.xsrfToken,apiBasePath:Object(D.c)(o.a.apiBasePath),fileLocation:m.fileLocation,webLocation:m.webLocation,shouldEnableKloudless:m.rteKloudlessService.isCloudServiceAvailable,openKloudlessModal:m.rteKloudlessService.isCloudServiceAvailable?m.rteKloudlessService.getModalCallback(m.$scope):void 0,onUploadSuccess:m.feedbackText.onUploadSuccess.bind(m.feedbackText)}},this.getEditorConfig=function(){return{bbml:m.bbml,isReadOnly:m.isEditorReadOnly,isPrivileged:m.canEnterFeedback(),onEditorContentChanged:m.feedbackText.feedbackTextDidChange,pluginConfig:m.getPluginConfig()}},this.save=function(e){return void 0===e&&(e=!1),m.feedbackText.save(e).then((function(e){m.bbml=e.rawText,m.webLocation=e.webLocation,m.fileLocation=e.fileLocation,m.isEditorReadOnly=!!e.rawText}))},this.feedbackIsDirty=function(){return m.feedbackText.feedbackIsDirty()},this.isReconciler=function(){return m.ultraStateService.getCurrentResolvedValues().currentColumn.isUserReconciler(m.contextUser.userId)},this.isPeerGrading=function(){var e=m.ultraStateService.getCurrentResolvedValues().currentColumn;return null==e?void 0:e.peerGrading}}return e.prototype.getPlaceholderReadonlyLocalizeKey=function(){var e=this.ultraStateService.getCurrentResolvedValues().currentColumn;return e&&e.delegatedGrading?"course.content.assessment.attempt.feedback.placeholder.reconciledReadonly":"course.content.assessment.attempt.feedback.placeholder.readonly"},e.prototype.getCurrentCourse=function(){var e=this.ultraStateService.getCurrentUrlParams().courseId;return this.courseModel.$find(e).$asPromise()},e.prototype.initializeCloudService=function(){return this.rteKloudlessService.initialize()},e.$inject=["$q",l.serviceName,a.o.serviceName,m.d,h.b,"feedbackText",f.b,"$scope",v.b,b.e,g.b,P.d],e}(),Q=function(){},K="<div>\n  <assessment-feedback></assessment-feedback>\n  <div ui-view></div>\n</div>";V.controller(B,Q)},"1NX5":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-information",use:"icon-small-information-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-information"><circle cx="8" cy="8" r="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M7 7h1v4M6 11h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="4" r=".5" /></symbol>'});s.add(o);e.exports=o},"1Niw":function(e,t){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    class="button-add-content js-show-add-options"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.editor.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="::addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>\n\x3c!--\n  The elements are kept around to trigger download actions.\n  The \'ng-hide\' class is added to prevent the buttons from interfering with AX (tab order, screen readers)\n--\x3e\n<ul class="element-list-add-menu angular-animate ng-hide">\n  <li>\n    <button type="button"\n            class="js-add-text-block"\n            ng-click="addContentButton.addTextBlock()"\n            analytics-id="components.directives.add-content-button.editor.addText.button">\n      <div>\n        <i class="icon-doc-pencil-2"></i>\n        <span bb-translate>components.directives.add-content-button.addContent</span>\n      </div>\n    </button>\n  </li>\n  <li ng-if="addContentButton.canEditUnsafeHtml">\n    <button type="button"\n            ng-click="addContentButton.addHtmlBlock()"\n            analytics-id="components.directives.add-content-button.editor.addHtml.button">\n      <div>\n        <bb-svg-icon size="small" icon="code"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.addHtml</span>\n      </div>\n    </button>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      click-enabled="true"\n      disable-drag="false"\n      class="js-file-upload"\n      web-location="{{webLocation}}"\n      file-location="{{fileLocation}}"\n      target-div="{{\'#\' + fileListViewId}}"\n      disallow-folder-uploads="true"\n      is-third-party-upload="false"\n      ignored-states="::ignoredStates()">\n        <button\n          type="button"\n          class="file-upload-button"\n          ng-click="addContentButton.assignPosition()"\n          aria-label="{{addContentButton.uploadAriaLabel}}"\n          analytics-id="components.directives.add-content-button.editor.fileUpload.button">\n          <div ng-if="!addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromComputer</span>\n          </div>\n          <div ng-if="addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromDevice</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="::addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="false"\n      monitor-leave="true"\n      target-div="{{\'#\' + fileListViewId}}"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      disable-drag="true"\n      is-third-party-upload="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      ignored-states="::ignoredStates()">\n      <button\n        type="button"\n        class="js-upload-from-kloudless"\n        ng-click="addContentButton.assignPosition()"\n        bb-kloudless\n        primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n        attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="false"\n        on-cancel-focus="!initialUpload ? addContentButton.focusAddButton : null"\n        analytics-id="components.directives.add-content-button.editor.uploadFromCloudStorage.button">\n          <div>\n            <i class="icon-cloud"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromCloudStorage</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n</ul>\n'},"1jPR":function(e,t){e.exports='\x3c!-- Goals--\x3e\n<div class="goal" ng-class="{\'goal-peek\': !openPeekPanel}">\n  <div class="row hide-for-small" ng-if="!openPeekPanel">\n    <div class="goal-panel">\n      <div class="goal-white-icon" >\n        <bb-svg-icon size="medium" icon="goal" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.goalImage\'}"></bb-svg-icon>\n      </div>\n      <div class="goal-head">\n        <h3 tabindex="-1" class="goal-title" bb-translate>course.goal-alignment.goal.header</h3>\n      </div>\n      <button class="button super-clear icon" \n              ng-click="hideGoals()"\n              analytics-id="course.goalAlignment.goal.closeGoals.button">\n        <i class="icon-times-bold"></i>\n        <span class="sr-only" bb-translate>course.goal-alignment.goal.sr-only.closeGoals</span>\n      </button>\n    </div>\n  </div>\n  <div class="goal-content-container">\n    <div class="row add-goal" ng-if="canAlignGoals() && !isCourseComplete()">\n      <a href="javascript:void(0);" \n         bb-focus="shouldFocus({elementId: \'add-goals\'})" \n         tabindex="0" \n         class="button button--dashed -full-width" \n         ng-if="!isMobile" \n         ng-click="addGoals()" \n         bb-translate\n         analytics-id="course.goal-alignment.goal.addGoalsButton">\n        course.goal-alignment.goal.addGoalsButton\n      </a>\n    </div>\n\n    <div class="goal-alignable-content"\n      ng-repeat="(contentIndex, content) in contents track by content.getContentIdForGoalAlignment()"\n      ng-class="[\'goal-aligned-content-\'+$index]"\n      ng-if="content.alignedGoals.length > 0">\n\n      <h3 class="goal-aligned-label"  ng-class="{\'goal-stu\': !(canAlignGoals() && !isCourseComplete())}">\n        <span>{{content.getContentTitleForGoalAlignment()}}</span>\n        <span>({{content.alignedGoals.length}})</span>\n      </h3>\n\n      <ul class="goal-ul">\n        <li class="row goal-list" id="goal-{{::alignedGoal.goalId}}"\n            ng-repeat="alignedGoal in content.alignedGoals | orderBy: [\'(alignedGoal.content || content).getContentTitleForGoalAlignment()\', \'goal.goalTitle\', \'goal.goalText\'] track by (alignedGoal.goalId + (alignedGoal.content || content).getContentIdForGoalAlignment())">\n\n          <div class="columns small-12 single-goal"\n            ng-class="{\n              \'is-compacted\': !(alignedGoal.isShowDetails = alignedGoal.isShowDetails === undefined ? false:alignedGoal.isShowDetails),\n              \'goal-specific\': !(canAlignGoals() && !isCourseComplete())\n            }">\n            <div class="goal-icon">\n              <bb-svg-icon-goal color="primary" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.goalImage\'}"></bb-svg-icon-goal>\n            </div>\n            <div class="goal-description goal-details" ng-class="{\'goal-specific\': !(canAlignGoals() && !isCourseComplete())}">\n              <span class="goal-type js-goal-title" ng-class="{\'ellipse\':!alignedGoal.isShowDetails}">{{alignedGoal.goal.goalTitle}}</span>\n              <div class="goal-content-title" ng-class="{\'ellipse\':!alignedGoal.isShowDetails}" ng-bind="(alignedGoal.content || content).getContentTitleForGoalAlignment()"></div>\n              <span class="goal-content" ng-class="{\'ellipse\':!alignedGoal.isShowDetails}">{{alignedGoal.goal.goalText}}</span>\n              <div class="goal-category" ng-show="alignedGoal.isShowDetails">\n                <span class="goal-type" bb-translate>course.goal-alignment.goal.setAndCategory</span>\n                <span class="goal-category-title vertical-bar js-goal-set">{{alignedGoal.goal.goalSetTitle}}</span>\n                <span class="goal-category-title js-goal-category">{{alignedGoal.goal.goalCategoryTitle}}</span>\n              </div>\n              <button role="button" \n                      class="button anchor js-show-details" \n                      ng-click="alignedGoal.isShowDetails=!alignedGoal.isShowDetails"\n                      analytics-id="course.goalAlignment.goal.showDetails.button">\n                <span bb-translate ng-if="alignedGoal.isShowDetails" translate-attrs-values="{goalName: alignedGoal.goal.goalTitle}" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.showLess\'}">course.goal-alignment.goal.showLess</span>\n                <span bb-translate ng-if="!alignedGoal.isShowDetails" translate-attrs-values="{goalName: alignedGoal.goal.goalTitle}" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.showMore\'}">course.goal-alignment.goal.showMore</span>\n              </button>\n            </div>\n          </div>\n          <div bb-foundation-defer>\n            <bb-overflow-menu element-id="{{ generateControlId((alignedGoal.content || content), alignedGoal) + \'-\' + contentIndex }}"\n                              element-name="{{alignedGoal.goal.goalTitle}}"\n                              is-single-mode="true"\n                              menu-items="getOverflowMenuItems(content, alignedGoal)"\n                              analytics-id-tag-prefix="course.goal-alignment.goal.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n'},"217T":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.assessment.groupAlreadySubmitted.title"\n          analytics-id-tag-prefix="course.content.assessment.groupAlreadySubmitted">\n    <div name="modal-contents">\n        <p bb-translate>course.content.assessment.groupAlreadySubmitted.description</p>\n    </div>\n    <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="$parent.$dismiss()"\n            bb-translate-attrs="{\'aria-label\':\'course.content.assessment.groupAlreadySubmitted.ok\'}" analytics-id="course.content.assessment.groupAlreadySubmitted.ok">\n      <bb-translate>course.content.assessment.groupAlreadySubmitted.ok</bb-translate>\n    </button>\n</bb-modal>\n'},"2E9T":function(e,t){e.exports='<bb-svg-icon size="small" icon="add" class="js-add-plus add-circle-default"></bb-svg-icon>\n<bb-svg-icon size="small" icon="add" status="active" class="js-add-plus add-circle-active"></bb-svg-icon>'},"2MQt":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-check-circle",use:"icon-medium-check-circle-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-check-circle"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M7 12l4 4 7-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"2a+M":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return p}));var i=n("D57K"),s=n("nsO7"),o=n("wHJ2"),a=n("nbDY"),r=n.n(a),c=n("0JpG"),l="ultra.services.dragDrop",d="dragDropService",u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.TOP=new t("TOP"),t.BOTTOM=new t("BOTTOM"),t.FOLDER=new t("FOLDER"),t.SELF=new t("SELF"),t}(r.a),p=function(){function t(e,t){var n=this;this.$timeout=e,this.bbLocalize=t,this.dragHoverClass="dz-drag-hover",this.dragElementSelector=".drag-element",this.onFolderClass="on-folder",this.onNestedFolderClass="on-nested-folder",this.originalElementClass="drag-element-original",this.movableElementClass="drag-element-movable",this.queuedScreenReaderMessages="",this.bbLocalize.loadBundle("components/services/drag-drop").then((function(){n.folderDepthMessageKey="components.services.drag-drop.folderDepthMessage"}))}return t.prototype.createDropPlaceholderElement=function(t){this.dropPlaceholderElement=e('<div class="dragdropplaceholder js-no-file-drop" style="height: '+t.height()+"px; width: "+t.width()+'px"></div>')},t.prototype.setDropTarget=function(e){this.lastDropTargetId=this.currentDropTargetId,this.currentDropTargetId=e},t.prototype.clearDropTarget=function(){this.setDropTarget(void 0)},t.prototype.isCurrentDropTarget=function(e){return this.currentDropTargetId===e},t.prototype.isNotSameDropTarget=function(){return this.currentDropTargetId!==this.lastDropTargetId},t.prototype.scrollDragDropItemsContainer=function(e,n){var i=this._getScrollingContainerElement();if(i){var s=e<t.SCROLLING_CONSTANTS.scrollZoneHeight,o=e>i.height()-t.SCROLLING_CONSTANTS.scrollZoneHeight,a=i.scrollTop();s?i.scrollTop(a-n):o&&i.scrollTop(a+n)}},t.prototype._getScrollingContainerElement=function(){var e=this,n=t.SCROLL_CONTAINERS_SELECTORS.map((function(t){return e.originalElement.closest(t)}));return s.find(n,(function(t){return e._elementHasScrollbar(t)}))},t.prototype._elementHasScrollbar=function(e){return e.get(0).scrollHeight>e.innerHeight()},t.SCROLLING_CONSTANTS={scrollZoneHeight:200,mouseInteractionDistanceToScroll:30,keyboardInteractionDistanceToScroll:200},t.SCROLL_CONTAINERS_SELECTORS=[".panel-wrap",".panel-content"],t.$inject=["$timeout",c.serviceName],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(p);o.module(l,[c.moduleName]).service(d,p)}).call(this,n("5iHu"))},"2bSy":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("wHJ2"),s=n("LN5R"),o=n("dF44"),a=n("qH3X"),r=n("KeOq"),c="ultra.components.directives.gradeGridColumnHeaderStudentReborn",l=function(){function e(e,t,n,i){var s=this;this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,e.studentsTotal=i.getRowCount(),e.$on(o.b.CELL_FOCUSED,(function(){t.find(".content").focus()})),[a.a.UPDATED_FILTER_CONDITION,a.a.GRADEBOOK_USER_SELECTED,a.a.GRADEBOOK_CLEAR_SELECTED].forEach((function(t){e.$on(t,(function(){s.scope.studentsTotal=i.getRowCount()}))}))}return e.$inject=["scope","element","attrs","gradeGridRebornController"],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=r,this.scope=!0,this.require="^"+s.a,this.link=function(e,n,i,s){e.gradeGridColumnHeaderStudentReborn=t.$injector.instantiate(l,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();i.module(c,[]).directive("bbGradeGridColumnHeaderStudentReborn",["$injector",function(e){return e.instantiate(d)}])},"2i58":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-content-market",use:"icon-small-content-market-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-market"><path d="M2 2h13l-1 8H4" stroke-width="2" stroke-linejoin="round" /><circle cx="13" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="4" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 6h11.5M7 2v8M11 2v8M1 1h1l2 12h9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"2o5C":function(e,t,n){"use strict";n.d(t,"d",(function(){return I})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return T}));var i=n("D57K"),s=n("wHJ2"),o=n("aHpC"),a=n("8W6D"),r=n("Sa5G"),c=n("tka7"),l=n("Iftj"),d=n("oi1r"),u=n("P2dS"),p=n("+4Px"),m=n("0JpG"),h=n("pjml"),b=n("lEL+"),g=n("TnpK"),v=n("JNtI"),f=n("MoIS"),y=n("jhBu"),w=n("X/qj"),C=n("Fvsw"),S=n("r6lH"),A=n("nmzr"),k=n("cR84"),I="ultra.features.course.grades.gradesSettings.controller",O="update-telemetry-settings",D="refresh-after-update-settings",T=function(){function e(e,t,n,i,o,c,d,u,p,m,h,b,g,v,f){var y=this;this.$scope=e,this.$rootScope=t,this.$q=n,this.course=i,this.$modal=o,this.localizeService=c,this.timeout=d,this.GradeNotationModel=u,this.ultraState=p,this.schemaService=m,this.categoryService=h,this.gradebookPermissionService=b,this.entitlementService=g,this.context=v,this.telemetry=f,this.isShowSettingPage=!0,this.isSchemaTitleEditable=!1,this.notations=[],this.isCodeValidate=!0,this.hasTelemetryData=!1,this.showAddNewCategory=!1,this.newCategoryName="",this.isInputBluredByCancelAdd=!1,this.isInputBlurredByCancelButton=!1,this.currentEditedCategory=null,this.focusNotationEventName="add-notation-button-focus",this.isPastZeroAssigned=!0,e.gradesSettings=this,this.courseId=this.ultraState.nextParams.courseId,this.hasGradebookModifyAccess=this.gradebookPermissionService.canModify(),i&&(m.loadSchemas(i).then((function(e){e.forEach((function(e){e.localizableTitle&&(e.ui.displayTitle=y.localizeService.translateSync({locale:y.localizeService.getLocale(y.$scope),key:e.ui.displayTitleKey}))})),y.schemas=e.filter((function(e){return l.ScaleType.Tabular.isEqualTo(e.scaleType)}))})),i.gradebook.settings.$resolve().$then((function(e){y.gradebookSettings=e,y.isPastZeroAssigned=e.countUnsubmittedWorkAsZero,y.isPastZeroCompleted=y.course.isComplete()})),this.categoryService.getOrLoadCategoriesForCourse(i.id,!0).then((function(e){y.categories=e})),i.gradebook.performancecodes.$refresh().$then((function(e){e.forEach((function(e){var t={model:e,id:y.generateNotationId(),isEditing:!1,code:e.code,description:e.description};y.notations.push(t)})),y.notations.permissions=e.permissions})),this.loadTelemetrySettings(i),this.$scope.$on(O,(function(e,t){y.studentFailingThreshold=t.studentFailingThreshold,y.studentAbsentThreshold=t.studentAbsentThreshold,y.studentAlertsEnabled=t.studentAlertsEnabled}))),this.validationManager={isEmpty:function(e){return!e},isNotationNumberOnly:function(e){return!Number.isNaN(Number(e))},isNotationExist:function(e){return y.notations.some((function(t){return t!==e&&t.code===e.code}))},isNotationSchemaDuplicate:function(e){return y.schemas[0].symbols.some((function(t){return t.symbol===e.code}))},isCategoryDuplicate:function(e,t){return y.categories.some((function(n){if(n===t)return!1;var i=n.localizableTitle.languageKey;return n.isUserDefined||(i=i.substr(0,i.indexOf("."))),i.toLocaleLowerCase()===e.toLocaleLowerCase()}))},execute:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=y.validationManager;return i[e]&&i[e].apply(i,[].slice.call(t,0))}},this.validationManager.execute(),this.entitlementService.hasCourseEntitlement(r.l.ModifyRubrics,this.courseId).then((function(t){e.hasRubricEditAccess=t})),this.context.getSystemInfo().$asPromise().then((function(e){e.telemetryEnabled&&y.telemetry.determinePanelSref(y.courseId).then((function(e){y.hasTelemetryData=!0}))})),e.$on("$stateChangeStart",(function(t,n,i,s,o){if(s.name.endsWith(A.GradeRoutes.GRADE_SETTING)&&!n.name.endsWith(A.GradeRoutes.GRADE_SETTING)&&e.gradesSettings.saveTelemetrySettings(),s.name===n.name||e.gradeSchemasPanelForm&&(!e.gradeSchemasPanelForm||e.gradeSchemasPanelForm.$dirty)){if(n.name.indexOf("rubric.mode")>1&&a.a.COPY.isEqualTo(a.a.parse(i.mode)))return!0;t.preventDefault()}else y.leaveEditMode(y.activeNotation,"confirm")})),e.$watch("gradeSchemasPanelForm.$dirty",(function(){y.isShowSettingPage||(e.gradeSchemasPanelForm&&e.gradeSchemasPanelForm.$dirty?(s.element(".bb-offcanvas-panel.peek .bb-close").hide(),s.element(".bb-offcanvas-panel.peek .panel-wrap").addClass("has-footer")):(s.element(".bb-offcanvas-panel.peek .bb-close").show(),s.element(".bb-offcanvas-panel.peek .panel-wrap").removeClass("has-footer")))}))}return e.prototype.loadTelemetrySettings=function(t){var n=this;t.preferences.getPreference(e.INITIAL_FAILING_PREF_ARGS).then((function(e){n.studentFailingThreshold=e.value&&!Number.isNaN(Number(e.value))?Number(e.value):void 0})),t.preferences.getPreference(e.INITIAL_ABSENT_PREF_ARGS).then((function(t){null==t.value?n.studentAbsentThreshold=e.STUDENT_ABSENT_DEFAULT:0===Number(t.value)||Number.isNaN(Number(t.value))?n.studentAbsentThreshold=void 0:n.studentAbsentThreshold=Number(t.value)})),t.preferences.getPreference(e.INITIAL_ENABLE_PREF_ARGS).then((function(e){n.studentAlertsEnabled=e.value}))},Object.defineProperty(e.prototype,"postOption",{get:function(){return this.gradebookSettings&&this.gradebookSettings.promptUserToPostWhenDone?"true":"false"},set:function(e){this.gradebookSettings.promptUserToPostWhenDone="true"===e},enumerable:!0,configurable:!0}),e.prototype.switchView=function(e,t){this.isShowSettingPage=e,t&&(this.currentViewSchema=t,this.originCurrentViewSchema=s.copy(this.currentViewSchema))},e.prototype.goToTelemetryView=function(){this.ultraState.goPeekState(A.TelemetryRoutes.INSTRUCTOR_CLASS)},e.prototype.toggleSchemaTitleEditable=function(){this.course.isComplete()||(!this.isSchemaTitleEditable||this.currentViewSchema.title&&this.currentViewSchema.title.length>0)&&(this.isSchemaTitleEditable?this.currentViewSchema.ui.displayTitle=this.currentViewSchema.title:this.currentViewSchema.localizableTitle?this.currentViewSchema.title=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:this.originCurrentViewSchema.ui.displayTitleKey}):this.currentViewSchema.title=this.originCurrentViewSchema.ui.displayTitle,this.isSchemaTitleEditable=!this.isSchemaTitleEditable)},e.prototype.adjustLowerBound=function(e,t){if(t<this.currentViewSchema.symbols.length-1){var n=this.currentViewSchema.symbols[t+1];n.upperBound=e.lowerBound,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2}e.absoluteTranslation=(e.lowerBound+e.upperBound)/2},e.prototype.isValidSymbolStr=function(e){for(var t=0,n=0;n<this.currentViewSchema.symbols.length;n++)this.currentViewSchema.symbols[n].symbol===e.symbol&&t++;return 1===t},e.prototype.addSymbol=function(e,t){var n=this;if(!(t<this.currentViewSchema.symbols.length-1))throw new Error("Can not add a symbol to the last symbol in the array.");var i=this.currentViewSchema.symbols[t+1],s=(i.lowerBound+i.upperBound)/2;this.currentViewSchema.symbols.splice(t+1,0,{schemaId:e.schemaId,lowerBound:s,upperBound:i.upperBound,absoluteTranslation:(s+i.upperBound)/2,symbol:void 0}),i.upperBound=s,i.absoluteTranslation=(i.lowerBound+i.upperBound)/2,this.currentViewSchema.symbols[t+2]=i,this.timeout((function(){n.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"add",index:t+1})}),this.$scope)},e.prototype.deleteSymbol=function(e,t){var n=this;if(!(t!==this.currentViewSchema.symbols.length-1&&this.currentViewSchema.symbols.length>2))throw new Error("Can not delete the two last symbols in the array.");var i=this.currentViewSchema.symbols[t+1];i.upperBound=e.upperBound,i.absoluteTranslation=(i.lowerBound+i.upperBound)/2,this.currentViewSchema.symbols.splice(t,1),this.timeout((function(){n.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"delete",index:t})}),this.$scope)},e.prototype.validate=function(){var e;return null===(e=this.$scope.gradeSchemasPanelForm)||void 0===e?void 0:e.$valid},e.prototype.cancel=function(){s.copy(this.originCurrentViewSchema.symbols,this.currentViewSchema.symbols),this.currentViewSchema.title=this.originCurrentViewSchema.title,this.currentViewSchema.localizableTitle?this.currentViewSchema.ui.displayTitle=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:this.originCurrentViewSchema.ui.displayTitleKey}):this.currentViewSchema.ui.displayTitle=this.originCurrentViewSchema.ui.displayTitle,this.$scope.gradeSchemasPanelForm.$setPristine()},e.prototype.save=function(){var e=this;this.currentViewSchema.$patch().$then((function(t){e.$rootScope.$broadcast("bb-grades-schema-save",t),e.originCurrentViewSchema=s.copy(e.currentViewSchema),e.originCurrentViewSchema.title=e.currentViewSchema.title,e.$scope.gradeSchemasPanelForm.$setPristine()}))},e.prototype.validateTelemetrySettings=function(){var e;return null===(e=this.$scope.telemetrySettingsForm)||void 0===e?void 0:e.$valid},e.prototype.saveTelemetrySettings=function(){if(!this.course)return this.$q.when(!0);var t={key:e.STUDENT_FAILING_PREFERENCE_KEY,value:this.studentFailingThreshold,visibleToStudents:!0},n={key:e.STUDENT_ABSENT_PREFERENCE_KEY,value:this.studentAbsentThreshold?this.studentAbsentThreshold:e.DISABLE_ABSENT_NOTICES,visibleToStudents:!0},i={key:e.STUDENT_ALERTS_ENABLED,value:this.studentAlertsEnabled,visibleToStudents:!0};return null!=this.studentFailingThreshold?this.$q.all([this.course.preferences.setPreference(t),this.course.preferences.setPreference(n),this.course.preferences.setPreference(i)]):this.$q.all([this.course.preferences.deletePreference(e.STUDENT_FAILING_PREFERENCE_KEY),this.course.preferences.setPreference(n),this.course.preferences.setPreference(i)])},e.prototype.getCourseColor=function(){return this.$scope.course.courseColorClass},e.prototype.addNewCategory=function(){var e=this;this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.isInputBluredByCancelAdd=!1,this.showAddNewCategory=!0,this.timeout((function(){s.element("#add-new-category-input").on("keydown",(function(t){t.keyCode!==p.u||t.shiftKey||(e.isInputBluredByCancelAdd=!0)}));var t=s.element("#cancel-add-category-button");t.on("mousedown",(function(){e.isInputBluredByCancelAdd=!0})),t.on("keydown",(function(t){t.keyCode===p.u&&t.shiftKey?e.isInputBluredByCancelAdd=!1:t.keyCode===p.u&&(e.isInputBluredByCancelAdd=!1,e.validateAndAddCategory())}))}),this.$scope,0,!1)},e.prototype.cancelAddNewCategory=function(){this.newCategoryName="",this.showAddNewCategory=!1,this.clearValidationForAddCategory()},e.prototype.editCategory=function(e){var t=this;this.showAddNewCategory&&this.cancelAddNewCategory(),this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.switchEditMode(e,!0),e.isUserDefined&&this.timeout((function(){s.element("#cancel-update-category-button-"+e.id).on("mousedown",(function(){t.isInputBlurredByCancelButton=!0}))}),this.$scope)},e.prototype.cancelEditCategory=function(e){this.switchEditMode(e,!1),this.clearValidationForUpdateCategory(e)},e.prototype.switchEditMode=function(e,t){var n=this;this.timeout((function(){n.isInputBlurredByCancelButton=!t,n.currentEditedCategory=t?e:null,n.newCategoryName=t?e.localizableTitle.languageKey:"",e.ui.isEditMode=t}),this.$scope),t&&this.timeout((function(){n.addEventHandlerForEditCategory(e)}),this.$scope)},e.prototype.validateCategory=function(e,t){var n=this.validationManager,i=n.execute("isEmpty",this.newCategoryName),s=!i&&n.execute("isCategoryDuplicate",this.newCategoryName,t),o=t?t.ui.form[e+t.id]:this.$scope.addCategoryForm[e];return o&&(i||s)&&(o.$setValidity("required",!i),o.$setValidity("nameDuplicate",!s),o.$setDirty()),!i&&!s},e.prototype.createCategory=function(){var e=this;this.isInputBluredByCancelAdd||this.course.gradebook.categories.$create({title:this.newCategoryName}).$then((function(t){var n=e.categories.length;if(n>0){e.categoryService.reorderCategories(e.categories,n-1),e.cancelAddNewCategory();var i=e.$scope.addCategoryForm["add-new-category-input"];i&&i.$setPristine(),e.categoryService.updateCategoriesForCourse(e.course.id,t),t.permissions={delete:!0,edit:!0},e.timeout((function(){e.addEventHandlerForEditCategory(t)}),e.$scope)}}))},e.prototype.addEventHandlerForEditCategory=function(e){var t=this;s.element("#update-category-input-"+e.id).on("keydown",(function(e){e.keyCode!==p.u||e.shiftKey||(t.isInputBlurredByCancelButton=!0)}));var n=s.element("#cancel-update-category-button-"+e.id);n.on("mousedown",(function(e){t.isInputBlurredByCancelButton=!0})),n.on("keydown",(function(n){n.keyCode===p.u&&n.shiftKey?t.isInputBlurredByCancelButton=!1:n.keyCode===p.u&&(t.isInputBlurredByCancelButton=!1,t.validateAndUpdateCategory(e))}))},e.prototype.deleteCategory=function(e){var t=this,n=this.categories[e];this.categories[e].$destroy().$allow(["400"]).$asPromise().then((function(e){e&&e.$response&&e.$response.data&&400===e.$response.data.status?t.$modal.open({template:k,scope:t.$scope,resolve:{translations:[m.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]}}):t.categoryService.deleteCategoriesForCourse(t.course.id,n)}))},e.prototype.updateCategory=function(e){var t=this;this.isInputBlurredByCancelButton||(e.localizableTitle.languageKey=this.newCategoryName,e.title=e.localizableTitle.languageKey,e.$save(["title"]).$then((function(){t.switchEditMode(e,!1),t.categoryService.updateCategoriesForCourse(t.course.id,e)})))},e.prototype.getCategoryIcon=function(e){return this.categoryService.getCategoryIcon(e)},e.prototype.validateAndAddCategory=function(){this.validateCategory("add-new-category-input")&&this.createCategory()},e.prototype.validateAndUpdateCategory=function(e){this.validateCategory("update-category-input-",e)&&this.updateCategory(e)},e.prototype.getCategoryMaxLength=function(){return 64},e.prototype.getCategoryMaxLengthDiff=function(){var e=this.$scope.addCategoryForm["add-new-category-input"].$error;return e&&e.maxlength?e.maxlength.diff:0},e.prototype.getCategoryMaxLengthDiffUpdate=function(e){var t=e.ui.form["update-category-input-"+e.id].$error;return t&&t.maxlength?t.maxlength.diff:0},e.prototype.showOptionsForCategory=function(e){return!h.E.GradeCategoryTitleEnum.Attendance.isEqualTo(e.title)&&(!e.permissions||(e.permissions.delete||e.permissions.edit))},e.prototype.getCategoryOverflowMenu=function(e){var t=this,n=[];return e.permissions&&e.permissions.edit&&n.push({icon:"draw",onClick:function(){t.editCategory(e)},labelKey:"global.edit"}),e.permissions&&e.permissions.delete&&n.push({icon:"trash",onClick:function(){t.deleteCategory(t.categories.indexOf(e))},confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return t.$q.when(v.a("x-bb-category-delete"))}},labelKey:"global.delete"}),n},e.prototype.clearValidationForAddCategory=function(){var e=this.$scope.addCategoryForm["add-new-category-input"];e&&(e.$setValidity("required",!0),e.$setValidity("nameDuplicate",!0),e.$setPristine())},e.prototype.clearValidationForUpdateCategory=function(e){var t=e.ui.form["update-category-input-"+e.id];t&&(t.$setValidity("required",!0),t.$setValidity("nameDuplicate",!0),t.$setPristine())},e.prototype.getCodeOverflowMenu=function(e){var t=this,n=[];return e.model.permissions&&e.model.permissions.update&&n.push({icon:"draw",onClick:this.updateNotation.bind(this,e),labelKey:"global.edit"}),e.model.permissions&&e.model.permissions.delete&&n.push({icon:"trash",onClick:this.deleteNotation.bind(this,e),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return t.$q.when(v.a("x-bb-grade-notation"))}},labelKey:"global.delete"}),n},Object.defineProperty(e.prototype,"isNotationEditing",{get:function(){return this.notations.some((function(e){return e.isEditing}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeNotation",{get:function(){return this.notations.filter((function(e){return e.isEditing}))[0]},enumerable:!0,configurable:!0}),e.prototype.showOptionsForNotation=function(e){var t=e.model.permissions;return!t||(t.delete||t.update)},e.prototype.createNotation=function(e){this.isNotationEditing||(e.stopPropagation(),this.buildNewNotation())},e.prototype.updateNotation=function(e){e.model.permissions.update&&!this.isNotationEditing&&(e.code=e.model.code,e.description=e.model.description,this.timeout((function(){e.isEditing=!0}),this.$scope))},e.prototype.leaveEditMode=function(e,t){this.isNotationEditing&&("cancel"===t?this.cancelEdit(e):(this.validateNotation(e),this.confirmEdit(e)),this.$scope.$broadcast("focus",this.focusNotationEventName))},e.prototype.confirmEdit=function(e){var t=this,n=this.isCodeValidate,i=!1;if(e.model.code===e.code&&e.model.description===e.description||(i=!0),n)e.isEditing=!1,e.model.code=e.code,e.model.description=e.description,e.model.id?i&&e.model.$save().$then((function(e){t.$scope.$emit("grade-notation-update",t.course.id),t.$rootScope.$broadcast("bb-reload-grid-view")})):this.course.gradebook.performancecodes.$create(e.model).$then((function(n){e.model=n,t.$scope.$emit("grade-notation-update",t.course.id),t.$rootScope.$broadcast("bb-reload-grid-view")}));else{var s=e.form["title-"+e.id],o=e.form["detail-"+e.id];s.$setTouched(),o.$setTouched()}},e.prototype.cancelEdit=function(e){e.isEditing=!1,""!==e.model.code&&""!==e.model.description||this.deleteNotation(e)},e.prototype.validateNotation=function(e){var t=e.form["title-"+e.id],n=e.form["detail-"+e.id],i=this.validationManager,s=i.execute("isEmpty",e.code),o=i.execute("isNotationNumberOnly",e.code),a=i.execute("isEmpty",e.description),r=i.execute("isNotationExist",e),c=i.execute("isNotationSchemaDuplicate",e),l=function(e){t.$setValidity("required","isNotationEmpty"!==e),t.$setValidity("notationNumberOnly","isNotationNumberOnly"!==e),t.$setValidity("notationExist","isNotationExist"!==e),t.$setValidity("notationSchemaDuplicate","isNotationSchemaDuplicate"!==e),n.$setValidity("required","descriptionEmpty"!==e)};s?l("isNotationEmpty"):o?l("isNotationNumberOnly"):r?l("isNotationExist"):c?l("isNotationSchemaDuplicate"):a?l("descriptionEmpty"):l(),t.$setDirty(),n.$setDirty(),this.isCodeValidate=!(s||o||a||r||c)},e.prototype.deleteNotation=function(e){var t=this,n=this.notations.indexOf(e);e.model.$destroy().$allow(["400"]).$asPromise().then((function(e){t.$scope.$emit("grade-notation-update",t.course.id),t.notations.splice(n,1),t.$rootScope.$broadcast("bb-reload-grid-view")}))},e.prototype.buildNewNotation=function(){var e={id:this.generateNotationId(),code:"",description:"",model:this.GradeNotationModel.$build({code:"",description:"",permissions:{delete:!0,update:!0}}),isEditing:!0};return this.notations.push(e),e},e.prototype.generateNotationId=function(){return"grade_notation_"+e.uid++},e.prototype.pastDueCheckboxEvent=function(){this.$scope.$broadcast(f.b,this.isPastZeroAssigned)},e.prototype.automaticZeroConfirm=function(e){var t;this.isPastZeroAssigned?(t={countUnsubmittedWorkAsZero:!0},delete this.gradebookSettings.retainAutoZero):(c.a.Retain.isEqualTo(e.choice)&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!0}),c.a.Delete.isEqualTo(e.choice)&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!1})),this.updatePastDueZero(t)},e.prototype.automaticZeroCancel=function(){this.isPastZeroAssigned=!this.isPastZeroAssigned},e.prototype.updatePastDueZero=function(e){var t=this;Object.assign(this.gradebookSettings,e),this.gradebookSettings.$patch().$then((function(){t.$rootScope.$broadcast(D)}))},e.STUDENT_FAILING_PREFERENCE_KEY="telem.threshold.failing.grade",e.STUDENT_ABSENT_PREFERENCE_KEY="telem.threshold.days.absent",e.STUDENT_ALERTS_ENABLED="telem.student.alerts.enabled",e.STUDENT_ABSENT_DEFAULT=5,e.DISABLE_ABSENT_NOTICES=0,e.INITIAL_FAILING_PREF_ARGS={key:e.STUDENT_FAILING_PREFERENCE_KEY},e.INITIAL_ABSENT_PREF_ARGS={key:e.STUDENT_ABSENT_PREFERENCE_KEY},e.INITIAL_ENABLE_PREF_ARGS={key:e.STUDENT_ALERTS_ENABLED,defaultValue:"true"},e.uid=0,e=Object(i.__decorate)([Object(i.__param)(0,Object(o.b)("$scope")),Object(i.__param)(1,Object(o.b)("$rootScope")),Object(i.__param)(2,Object(o.b)("$q")),Object(i.__param)(3,Object(o.b)("currentCourse")),Object(i.__param)(4,Object(o.b)("$modal")),Object(i.__param)(5,Object(o.b)(m.serviceName)),Object(i.__param)(6,Object(o.b)(b.b)),Object(i.__param)(7,Object(o.b)("GradeNotationModel")),Object(i.__param)(8,Object(o.b)(g.d)),Object(i.__param)(9,Object(o.b)(d.b)),Object(i.__param)(10,Object(o.b)(u.b)),Object(i.__param)(11,Object(o.b)(w.b)),Object(i.__param)(12,Object(o.b)(y.b)),Object(i.__param)(13,Object(o.b)(C.b)),Object(i.__param)(14,Object(o.b)(S.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(T)},"2szi":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-forward-arrow",use:"icon-medium-forward-arrow-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-forward-arrow"><path d="M13 1l10 11-10 11M23 12H1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"367g":function(e,t,n){},"3Jgm":function(e,t,n){"use strict";var i=n("D57K"),s=n("wHJ2"),o=n("pjml"),a=n("Qbdf"),r=n("k9iv"),c=n("0JpG"),l=n("TnpK"),d=n("Sa5G"),u=n("FBBZ"),p=n("5iHu");var m=n("Q/M7");n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return b}));var h="ultra.components.services.partner",b="partner",g=function(){function e(e,t,n,i,s,o,a,r,c,l,d,u){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=i,this.cacheFactory=s,this.contextCourse=o,this.errorModalService=a,this.localizeService=r,this.ultraStateService=c,this.PartnerCourseModel=l,this.PartnerModel=d,this.PartnerStatusModel=u,this.shortMaxAge=5e3,this.partnerStatusCache=s.createCache("PartnerStatusCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnersCache=s.createCache("PartnersCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnerLinkedCoursesCache=s.createCache("PartnerLinkedCoursesCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}return e.prototype.getPartnerCloudStatus=function(e,t){if(void 0===t&&(t=!1),p("body").hasClass("bb-within-uia-test"))return this.$q.when({enabled:!1,userCloudProvisioned:!1});if(t)return this.PartnerStatusModel.getStatus(e);var n=this.partnerStatusCache.get("status");return n||(n={promise:this.PartnerStatusModel.getStatus(e)},this.partnerStatusCache.put("status",n)),n.promise},e.prototype.resetPartnerCloudStatus=function(){this.partnerStatusCache.removeAll()},e.prototype.getPartners=function(e,t){if(void 0===t&&(t=!1),t)return this.PartnerModel.getPartnersByType(e);var n=this.partnersCache.get(e);return n||(n={promise:this.PartnerModel.getPartnersByType(e)},this.partnersCache.put(e,n)),n.promise},e.prototype.getLinkedPartners=function(e,t){if(void 0===t&&(t=!1),t)return this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise();var n=this.partnerLinkedCoursesCache.get(e);return n||(n={promise:this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise()},this.partnerLinkedCoursesCache.put(e,n)),n.promise},e.prototype.launchPartner=function(e,t){e.toolProvider.available?u.o(e)?this._launchBrowseLink(e.browseContentLink):this._checkProvisioningAndLaunch(e,t):e.toolProvider.compatible?this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderNotConfigured"})):this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderIncompatible"}))},e.prototype._checkProvisioningAndLaunch=function(e,t){var n=this;this._getProvisioningCheckResult(e.providerId,t).then((function(t){var i;t.status?(i={partnerId:e.providerId,toolType:"browse",partnerTitle:u.h(e)},d.w.Inline.isEqualTo(n.$stateParams.mode)?i.mode=n.$stateParams.mode:(i.partnerParentId=n.$stateParams.parentId,i.position=n.$stateParams.position)):(i={partnerId:e.providerId,toolType:"partnerProvisioning",partnerTitle:n.localizeService.translateSync({locale:n.localizeService.getLocale(n.$rootScope),key:"course.partnerList.partnerProvisioning"}),partnerParentId:n.$stateParams.parentId},n.ultraStateService.current.name.indexOf("peek.books-and-tools")>=0&&(i.returnState="base.courses.peek.course.outline.peek.books-and-tools")),n.ultraStateService.goPeekState("partner-tool.tool",i)}))},e.prototype._getProvisioningCheckResult=function(e,t){return s.isDefined(t)?this.$q.when({status:t}):this.PartnerCourseModel.$new(this.contextCourse.courseId).updateProvisioning(e)},e.prototype._launchBrowseLink=function(e){var t=m.c(e.url);switch(this.$stateParams.parentId&&(t=m.a(t,"content_id",this.$stateParams.parentId)),e.target){case"_self":this._windowLocationAssign(t);break;case"_blank":this.$window.open(t)}},e.prototype._windowLocationAssign=function(e){this.$window.location.assign(e)},e.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",a.e,r.c,c.serviceName,l.d,o.W.serviceName,o.U.serviceName,o.Y.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(g);s.module(h,[a.b,r.b,c.moduleName,l.b,o.Q]).service(b,g)},"3LmG":function(e,t){e.exports='<bb-modal id="continue-working-modal" class="notification success hide-x-button"\n          modal-title-key="course.content.assessment.test.modal.continueWorking.title"\n          bb-focus="true"\n          analytics-id-tag-prefix="course.content.assessment.test.modal.continueWorking">\n  <div name="modal-contents">\n\n    <p ng-if="::(assessmentAttempt.hasUnlimitedExtraTime && !assessmentAttempt.hasUploadsInProgress)" bb-translate>\n      course.content.assessment.test.modal.continueWorking.body.unlimited\n    </p>\n    <p ng-if="::(assessmentAttempt.hasUnlimitedExtraTime && assessmentAttempt.hasUploadsInProgress)" bb-translate>\n      course.content.assessment.test.modal.continueWorking.cancelUploads.unlimited\n    </p>\n\n    <p ng-if="::(assessmentAttempt.hasLimitedExtraTime && !assessmentAttempt.hasUploadsInProgress)"\n       bb-translate translate-values="{extraMinutes: assessmentAttempt.currentRemainingMinutes}">\n      course.content.assessment.test.modal.continueWorking.body.limited.plural\n    </p>\n    <p ng-if="::(assessmentAttempt.hasLimitedExtraTime && assessmentAttempt.hasUploadsInProgress)"\n       bb-translate translate-values="{extraMinutes: assessmentAttempt.currentRemainingMinutes}">\n      course.content.assessment.test.modal.continueWorking.cancelUploads.limited.plural\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="course.content.assessment.test.modal.continueWorking.submit">\n    course.content.assessment.test.modal.continueWorking.submit\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="$parent.$dismiss()" bb-translate analytics-id="course.content.assessment.test.modal.continueWorking.continue">\n    course.content.assessment.test.modal.continueWorking.continue\n  </button>\n</bb-modal>\n'},"3Lzw":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-upload",use:"icon-medium-upload-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-upload"><path d="M12 1v14M1 7v16h22V7h-4M1 7h4-4zM8 5l4-4 4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"3Nzc":function(e,t,n){"use strict";n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return L})),n.d(t,"d",(function(){return j}));var i=n("D57K"),s=(n("pBKf"),n("KXuk"),n("nbDY")),o=n.n(s),a=n("5MwF"),r=n("VdDF"),c=n("nsO7"),l=n("wHJ2"),d=n("Fvsw"),u=n("Qbdf"),p=n("g7Mf"),m=n("jhBu"),h=n("XGja"),b=n("o5Lu"),g=n("X/qj"),v=n("0JpG"),f=n("pjml"),y=n("R4kC"),w=n("lEL+"),C=n("g5ln"),S=n("0Vbm"),A=n("tcMd"),k=n("gkef"),I=n("TnpK"),O=n("5uPl"),D=n("Sa5G"),T=n("+O05"),$=n("f8ya"),x=n("7cYF"),E=n("RWbl"),P="instructor-submission-list-view-refresh",R="instructor-scheduled-regrading-task-finish-event",L="instructor-submission-list-attempt-deleted-event",j="ultra.components.directives.grade.submissionList",G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Individual=new t("Individual"),t.Group=new t("Group"),t.Discussion=new t("Discussion"),t}(o.a),M=function(){function e(t,n,i,s,o,r,d,u,p,m,h,g,v,f,y,w,C){var S=this;this.scope=t,this.$q=n,this.windowSize=i,this.element=s,this.attrs=o,this.context=r,this.entitlementService=d,this.CourseModel=u,this.grade=p,this.gradebookPermissionService=m,this.localizeService=h,this.submissionListService=g,this.timeout=v,this.discussion=f,this.contextCourse=y,this.ultraState=w,this.originalityReportService=C,this.allMembershipsRetrievedFromServer=!1,this.cannotViewGroupsMsg="",this.canViewException=!1,this.canViewGroups=!1,this.currentlyLoading=!1,this.editing=!1,this.formId="",this.currentFocusInputNum=0,this.currentPage=0,this.assessmentExceptionNodeStyle=null,this.userCourseAvailableMap={},this.onInstructorSubmissionListViewRefresh=function(t,n,i){n.isGroupContent&&S.rows&&S.rows.length>0&&S.rows[0].group&&(S.rowsExpandStatus={},S.rows.forEach((function(e){S.rowsExpandStatus[e.group.id]=e.groupDetailsShown}))),S.rows=null,S.scope.$root.$broadcast("refresh-participants-count");var s=n.getDeployedAssessment();s&&s.gradingColumn.dueDate&&(S.column.dueDate=new Date(s.gradingColumn.dueDate)),S.column.summary.$fetch({groupId:S.scope.groupId}),S.mySelectedFilter.value===e.SHOW_NEEDS_GRADING_STUDENTS?(S.memberships=[],S.loadSubmissions()):S.loadRows(n,i)},this.onGradeInputBlur=function(e,t){S.currentFocusId&&S.currentFocusId===t&&(S.currentFocusId=null,S.currentFocusInputNum--),S.timeout((function(){S.editing=S.currentFocusInputNum>0}),S.scope,400,!0)},this.onGradeInputInFocus=function(e,t){S.currentFocusId&&S.currentFocusId===t||(S.currentFocusId=t,S.currentFocusInputNum++),S.editing=S.currentFocusInputNum>0},this.onGradeStatusChange=function(t,n){var i=!!S.column.ui.content&&S.column.ui.content.isSafeAssignEnabled();if(n.groupId)S.updateGroupRows(n.groupId,i);else{if(S.mySelectedFilter.value===e.SHOW_NEEDS_GRADING_STUDENTS)return S.memberships=[],void S.loadSubmissions();S.updateRows(n.gradeId,i)}},this.onSubmissionListColumnChange=function(e,t){S.column=t,S.unsubscribeOnRowsUpdated&&S.unsubscribeOnRowsUpdated(),S.unsubscribeOnRowsUpdated=S.submissionListService.addOnRowsUpdated(S.column.courseId,S.column.id,S.onSubmissionListRowsUpdated),S.memberships=[],S.loadSubmissions()},this.onAttemptDeleted=function(){S.memberships=[],S.loadSubmissions()},this.processUpdatedRows=function(e){e.forEach((function(e){var t=c.findIndex(S.allRows,(function(t){var n,i;return(null===(n=t.user)||void 0===n?void 0:n.id)===(null===(i=e.user)||void 0===i?void 0:i.id)}));t>=0&&(S.allRows[t]=e)})),S.filterLoadedBulkViewRows(S.searchText)},this.onSubmissionListRowsUpdated=function(){S.isGroup?S.processUpdatedGroupRows(S.submissionListService.submissionList.rows):S.processUpdatedRows(S.submissionListService.submissionList.rows)},this.onGroupChange=function(e,t){S.scope.groupId=t,S.memberships=[],S.loadSubmissions()},this.processUpdatedGroupRows=function(e){e.forEach((function(e){var t=c.findIndex(S.rows,(function(t){return t.group.id===e.group.id}));S.scope.$root.$broadcast("click-to-invoke-child-directive-init"),S.rows[t]=e}))},this.onFinishRender=l.noop,this.column=t.getColumn(),this.dueDateExceptionMap=new Map,this.canViewGroups=this.entitlementService.areAllEntitled([D.v.ViewGroups,D.f.ViewAsDesigner],this.contextCourse.courseId),this.canViewException=this.entitlementService.isEntitled(D.b.ViewException,this.contextCourse.courseId),this.localizeService.translate({locale:this.localizeService.getLocale(this.scope),key:"components.directives.grade.submission-list.cannotViewGroupsMsg"}).then((function(e){S.cannotViewGroupsMsg=e})),t.getForumId&&(this.formId=t.getForumId()),this.isExternalSubmission=T.a.isExternalSubmissionsAssessment(this.column.ui.content),this.loadData(),this.initFilter(),t.$on("submission-list-column-change",this.onSubmissionListColumnChange),t.$on("group-change",this.onGroupChange),t.$on(b.b,this.onGradeStatusChange),t.$on(P,this.onInstructorSubmissionListViewRefresh),t.$on("grade-input-in-focus",this.onGradeInputInFocus),t.$on("grade-input-blur",this.onGradeInputBlur),a.a.features.questionRegrading&&t.$on(R,(function(){S.column&&S.loadRows(S.column.ui.content,(function(){S.scope.$root.$broadcast(x.d)}))})),this.unsubscribeOnRowsUpdated=this.submissionListService.addOnRowsUpdated(this.column.courseId,this.column.id,this.onSubmissionListRowsUpdated),t.$on("$destroy",(function(){S.assessmentExceptionNodeStyle&&S.assessmentExceptionNodeStyle.remove(),S.unsubscribeOnRowsUpdated()})),t.$on(L,this.onAttemptDeleted),this.originalityReportService.setCourseContent(this.column.ui.content,!0),this.originalityReportService.fetchIsOriginalityEnabled().then((function(e){S.shouldShowOriginality=e}))}return e.prototype.initFilter=function(t){var n=this;this.availableFilters=[e.SHOW_ALL_STUDENTS,e.SHOW_NEEDS_GRADING_STUDENTS].map((function(e,t){return{index:t,name:n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),key:"components.directives.grade.submission-list.filter."+e}),nature:e,value:e}})),this.mySelectedFilter=t&&c.find(this.availableFilters,(function(e){return e.value===t}))||this.availableFilters[0]},e.prototype.getSearchBoxPlaceholderKey=function(){var e="components.directives.grade.submission-list.search";return G.Group.isEqualTo(this.mode)?e+"GroupPlaceholder":""+e+(this.contextCourse.course.isOrganization?"Participant":"Student")+"Placeholder"},e.prototype.loadData=function(){this.loadSubmissions()},e.prototype.isPeerGrading=function(){return!!a.a.features.peerAssessmentFeatureFlag&&this.column.peerGrading},e.prototype.hasAttemptBeenPostedOrCompleted=function(e){var t=this.rows[e];return t.isStatusComplete()&&!t.overrideToPost()&&!t.grade.isPastDueZero()},e.prototype.getNothingToGradeOrReconcileKey=function(e){return this.rows[e].isCurrentUserReconciler()?"nothingToReconcile":"nothingToGrade"},e.prototype.getAttemptsPeerStatus=function(){if(a.a.features.peerAssessmentFeatureFlag)return this.currentDate=r.a.parseStringToDate(this.context.getServerTime()),this.submissionDueDate=r.a.parseStringToDate(this.column.dueDate),this.peerReviewDueDate=r.a.parseStringToDate(this.rows[0].Column.ui.content.getDeployedAssessment().peerSettings.peerReviewDueDate),this.isInPeerSubmissionWindow?(this.status="status-submitted","submitted"):this.isAfterPeerReviewWindow?(this.status="status-needs-grading","needsGrading"):(this.status="status-in-peer-review","inPeerReview")},e.prototype.getPostedOrCompletedKey=function(){return a.a.features.peerAssessmentFeatureFlag&&this.isPeerGrading()?(this.status="status-is-posted","posted"):(this.status="status-is-complete","complete")},Object.defineProperty(e.prototype,"isInPeerSubmissionWindow",{get:function(){return r.a.isWithinDateRange(this.currentDate,{end:this.submissionDueDate,start:null},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAfterPeerReviewWindow",{get:function(){return r.a.isWithinDateRange(this.currentDate,{end:null,start:this.peerReviewDueDate},!0)},enumerable:!0,configurable:!0}),e.prototype.filterLoadedBulkViewRows=function(e){this.filterRows(e)},e.prototype.filterRows=function(e){var t=this;if(this.searchText=e,e){var n=e.split(/\s+/).map((function(e){return new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i")}));this.rows=this.allRows.filter((function(e){return t.isGroup?n.some((function(t){return t.test(e.group.title)})):n.some((function(t){return t.test(e.user.givenName)}))||n.some((function(t){return t.test(e.user.familyName)}))})),this.currentPage=0}else this.rows=this.allRows;this.setSubmissionListInGradeService(this.rows)},e.prototype.updateRows=function(e,t){var n,i,s={groupId:this.scope.groupId};if(e?(i=[this.getMembershipByGradeId(e)].filter((function(e){return e})),s.userIds=null===(n=i[0])||void 0===n?void 0:n.userId):(i=this.getMembershipsAll(),s.roleBucket=D.k.TAKING.toString()),this.column.anonymousGrading)return this.grade.loadAnonymousStudentRows(this.column).then(this.processUpdatedRows);if(i.length<=0)return Promise.resolve();return this.grade.loadCustomizedBulkViewRows(i,this.column,this.formId,s,t,!0).then(this.processUpdatedRows)},e.prototype.updateGroupRows=function(e,t){var n=c.find(this.rows,(function(t){return t.group.id===e})),i=this.getMembershipsFromRow(n),s=c.find(this.column.ui.content.assignedGroups,(function(e){return e.groupId===n.group.id}));this.canViewGroups?this.grade.loadGroupRows(this.course,[s],i,this.column,t).then(this.processUpdatedGroupRows):this.processUpdatedGroupRows([])},e.prototype.getMembershipsAll=function(){var e=this,t=[];return this.rows.forEach((function(n){if(n.group)n.group.memberships.forEach((function(n){var i=c.find(e.memberships,(function(e){return e.user.id===n.userId}));t.push(i)}));else{var i=c.find(e.memberships,(function(e){return e.user.id===n.user.id}));t.push(i)}})),t},e.prototype.getMembershipsFromRow=function(e){var t=this;return e.group.memberships.map((function(e){var n=c.findIndex(t.memberships,(function(t){return e.userId===t.userId}));return t.memberships[n]}))},e.prototype.getMembershipByGradeId=function(e){var t=c.findIndex(this.rows,(function(t){return t.grade&&t.grade.id===e}));if(t>-1){var n=this.rows[t],i=c.findIndex(this.memberships,(function(e){return n.user.id===e.userId}));return this.memberships[i]}return null},e.prototype.loadSubmissions=function(){var e=this;this.CourseModel.$find(this.column.courseId).$then((function(t){e.course=t,e.fetchMemberships().then((function(t){e.memberships=t,t.forEach((function(t){t.dueDateExceptionType===$.c.Unlimited&&e.dueDateExceptionMap.set(e.scope.groupId,!0),e.userCourseAvailableMap[t.userId]=t.isAvailable})),e.column&&e.loadRows(e.column.ui.content)}))}))},e.prototype.loadRows=function(e,t){e&&e.isGroupContent&&!e.isDiscussion()?this.loadAllGroupRows(e.assignedGroups,t):this.loadBulkViewRows(t)},e.prototype.loadBulkViewRows=function(e){var t=this;if(this.memberships.length>0&&(!this.scope.groupId||this.canViewGroups)){var n=void 0;if(this.column.anonymousGrading)n=this.grade.loadAnonymousStudentRows(this.column);else{var i={groupId:this.scope.groupId,roleBucket:D.k.TAKING.toString()},s=!!this.column.ui.content&&this.column.ui.content.isSafeAssignEnabled();n=this.grade.loadCustomizedBulkViewRows(this.memberships,this.column,this.formId,i,s,!0)}this.scope.$emit("bb-gradebook-item-show-spinner-child",!0),n.then((function(e){t.processLoadedBulkViewRows(e)})).finally((function(){t.finishLoadingBulkViewRows(e)}))}else this.rows=[],this.finishLoadingBulkViewRows(e)},e.prototype.processLoadedBulkViewRows=function(e){this.allRows=e,this.sortSubmissionList(this.allRows),this.setSubmissionListInGradeService(this.allRows),this.filterLoadedBulkViewRows(this.searchText)},e.prototype.finishLoadingBulkViewRows=function(e){var t=this;this.scope.$emit("bb-gradebook-item-show-spinner-child",!1),this.currentlyLoading=!1,this.scope.$root.$broadcast("submission-list-loaded"),e&&e(),a.a.features.perAssessmentSettings&&this.canViewException&&!this.column.anonymousGrading&&T.a.initAssessmentExceptionsIndicators(this.course,this.column.ui.content).then((function(e){t.assessmentExceptionNodeStyle=e}))},e.prototype.loadAllGroupRows=function(e,t){var n=this;this.scope.$emit("bb-gradebook-item-show-spinner-child",!0),this.canViewGroups?this.grade.loadGroupRows(this.course,e,this.memberships,this.column,this.column.ui.content&&this.column.ui.content.isSafeAssignEnabled()).then((function(e){n.processLoadedAllGroupRows(e)})).finally((function(){n.finishLoadingBulkViewRows(t)})):(this.processLoadedAllGroupRows([]),this.finishLoadingBulkViewRows(t))},e.prototype.processLoadedAllGroupRows=function(e){var t=this;this.allRows=e,this.rows=e,this.submissionListService.sortSubmissionList(this.rows),this.setSubmissionListInGradeService(this.rows),this.rowsExpandStatus&&(this.rows.forEach((function(e){e.groupDetailsShown=!!t.rowsExpandStatus[e.group.id]})),this.rowsExpandStatus=null)},e.prototype.fetchMemberships=function(){var e={fields:"courseCardColorIndex,id,isAvailable,dueDateExceptionType,timeLimitExceptionType,role,courseRole,user.id,user.userName,user.avatar,user.familyName,user.givenName,user.lastModifiedAt,userHasHidden,userId,isPreviewStudent",roleBucket:"taking",offset:this.memberships?this.memberships.length:0},t=this.course.memberships.$fetch(e).$asPromise();return this.scope.groupId&&this.canViewGroups?this.$q.all([t,this.course.groups.$new(this.scope.groupId).$fetch({expand:"memberships"}).$asPromise()]).then((function(e){var t=e[0],n=e[1],i=new Set(c.map(n.memberships,"userId")),s=t.filter((function(e){return i.has(e.userId)}));return s.paging=t.paging,s.paging.count=s.length,s.permissions=t.permissions,s})):t},Object.defineProperty(e.prototype,"isIndividual",{get:function(){return this.mode===G.Individual},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDiscussion",{get:function(){return this.mode===G.Discussion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGroup",{get:function(){return this.mode===G.Group},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalItems",{get:function(){return this.rows?this.rows.length:0},enumerable:!0,configurable:!0}),e.prototype.isGroupDiscussion=function(){return this.isDiscussion&&this.discussion.hasGroups()},e.prototype.showNoGroupViewMessage=function(){return this.isGroup&&!this.canViewGroups},e.prototype.isOverdue=function(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0},e.prototype.includeDueDateException=function(){return this.dueDateExceptionMap},e.prototype.setSubmissionListInGradeService=function(e){this.submissionListService.setSubmissionList(this.course.id,this.column.id,this.memberships,e)},e.prototype.onPageSizeChange=function(e){this.pageSize=e,this.pageSizeChange()},e.prototype.pageSizeChange=function(){l.noop()},e.prototype.pageChange=function(){l.noop()},e.prototype.changeFilter=function(e){l.noop()},e.prototype.onChangePage=function(){var e=this.getContainerElementAndCurrentElement(),t=e.scrollContainer,n=e.pageSizeSelector;t.animate({scrollTop:0},100,(function(){c.delay((function(){return h.b(t,n)}),300)}))},e.prototype.getContainerElementAndCurrentElement=function(){var e=this.windowSize.isSmallBreakpoint()?"#gradebook-item-panel-content":".student-submission-list",t=l.element(e),n=t.find("bb-page-size-selector button");return{scrollContainer:t,pageSizeSelector:n}},e.prototype.sortSubmissionList=function(e){this.submissionListService.sortSubmissionList(e)},e.SHOW_ALL_STUDENTS="showAllStudents",e.SHOW_NEEDS_GRADING_STUDENTS="showNeedsGradingStudents",e.$inject=["scope","$q",k.b,"element","attrs",d.b,m.b,f.o.serviceName,b.h,g.b,v.serviceName,y.b,w.b,p.c,u.e,I.d,O.b],e}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._totalItems=0,t}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return G.Individual},enumerable:!0,configurable:!0}),t.prototype.loadData=function(){l.noop()},t.prototype.filterLoadedBulkViewRows=function(e){this.searchText=e,this.rows=this.allRows},t.prototype.filterRows=function(e){this.searchText=e,this.currentPage=0,this.loadSubmissions()},t.prototype.fetchMemberships=function(){var e=this,t={fields:"courseCardColorIndex,id,isAvailable,dueDateExceptionType,timeLimitExceptionType,role,courseRole,user.id,user.userName,user.avatar,user.familyName,user.givenName,user.lastModifiedAt,userHasHidden,userId,isPreviewStudent",roleBucket:"taking",sort:["isPreviewStudent(asc)","user.familyName(asc)","user.givenName(asc)"].join(),offset:this.currentPage*this.pageSize,limit:this.pageSize,includeCount:!0,q:this.searchText};return this.mySelectedFilter.value===M.SHOW_NEEDS_GRADING_STUDENTS&&(t=Object(i.__assign)(Object(i.__assign)({},t),{filter:"needsGrading",columnId:this.column.id})),this.course.memberships.$fetch(t).$asPromise().then((function(t){return e._totalItems=t.paging.count||0,t}))},t.prototype.pageSizeChange=function(){this.loadSubmissions()},t.prototype.pageChange=function(){this.loadSubmissions()},t.prototype.sortSubmissionList=function(e){l.noop()},Object.defineProperty(t.prototype,"totalItems",{get:function(){return this._totalItems},enumerable:!0,configurable:!0}),t.prototype.onChangePage=function(){var e=this,t=this.getContainerElementAndCurrentElement(),n=t.scrollContainer,i=t.pageSizeSelector;n.animate({scrollTop:0},100,(function(){e.onFinishRender=function(){c.delay((function(){h.b(n,i),e.onFinishRender=l.noop}),500)},e.pageChange()}))},t.prototype.canDownloadAll=function(){return this.gradebookPermissionService.canViewBulkDownload()&&this.column&&!this.column.anonymousGrading},t.prototype.getDownloadOverflowMenu=function(){var e=this;return[{icon:"download",onClick:function(){e.gradesBulkDownload()},labelKey:"components.directives.grade.submission-list.downloadAll"}]},t.prototype.gradesBulkDownload=function(){this.ultraState.goPeekState("grades-bulk-download",{columnId:this.column.id})},t.prototype.overflowMenuLabel=function(){return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.grade.submission-list.submissionListMenuLabel"})},t.prototype.changeFilter=function(e){this.mySelectedFilter!==e&&(this.mySelectedFilter=e,this.currentPage=0,this.loadSubmissions())},t}(M),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return G.Group},enumerable:!0,configurable:!0}),t}(M),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return G.Discussion},enumerable:!0,configurable:!0}),t}(M),N=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=E,this.scope={getColumn:"&column",getForumId:"&?forumId",groupId:"=?"},this.link=function(e,n,i){var s,o=e.getColumn();s=o.isDiscussion()?B:o.ui.content&&o.ui.content.isGroupContent?F:_,e.submissionList=t.$injector.instantiate(s,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}(),q=function(){function e(t,n){var i=this;this.timeout=t,this.$parse=n,this.restrict="A",this.link=function(t,n,s){t.$last&&i.timeout((function(){var n=s[e.DIRECTIVE_NAME];n&&i.$parse(n)(t)}),t)}}return e.DIRECTIVE_NAME="bbOnFinishRender",e.$inject=[w.b,"$parse"],e}();l.module(j,[d.a,u.b,b.g,v.moduleName,y.a,p.b,C.a,S.a,A.a,k.a]).directive("bbSubmissionList",["$injector",function(e){return e.instantiate(N)}]).directive(q.DIRECTIVE_NAME,["$injector",function(e){return e.instantiate(q)}])},"3Uvi":function(e,t){e.exports='<div>\n  <div ng-if="::questionAnswerStatus.shouldShowText() || wasLate()"\n       class="question-answer-status"\n       ng-class="::questionAnswerStatus.getBackgroundClass()">\n    <div ng-if="::questionAnswerStatus.shouldShowText()" class="question-answer-status--correct-text">\n      <div bb-translate\n           class="question-answer-status__correctness-label">\n        {{::questionAnswerStatus.getCorrectnessTextKey()}}\n      </div>\n      <ng-transclude/>\n    </div>\n    <div ng-if="wasLate()"\n        class="question-answer-status__time-limit"\n        ng-class="::{\'question-answer-status__text-with-attention\': questionAnswerStatus.shouldShowText()}">\n      <bb-svg-icon size="small"\n        icon="attention"\n        class="question-answer-status__after-time-attention">\n      </bb-svg-icon>\n      <div bb-translate class="question-answer-status__after-time-text">\n        components.directives.assessment-question.status.attention\n      </div>\n    </div>\n  </div>\n</div>\n'},"3l3z":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var i=n("wHJ2"),s=n("nsO7"),o=n("lEL+"),a=n("5HCE"),r="ultra.components.directives.gradeGridMessageReborn",c=function(){function t(e,t,n,i,o){this.window=e,this.scope=t,this.element=n,this.attrs=i,this.timeout=o,o((function(){s.isUndefined(t.adjustPosition)||t.adjustPosition(n)}),t)}return t.prototype.mousedown=function(){e(this.window).trigger("click")},t.$inject=["$window","scope","element","attrs",o.b],t}(),l=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=a,this.link=function(e,n,i){e.gradeGridMessageReborn=t.$injector.instantiate(c,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(r,[]).directive("bbGradeGridMessageReborn",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("5iHu"))},"3mUc":function(e,t){e.exports="<div\n  ng-class=\"{'validation-error' : showError()}\"\n  ng-transclude>\n</div>\n"},"4VOk":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-privacy-policy",use:"icon-medium-privacy-policy-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-privacy-policy"><path d="M21 8V1H3v22h6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M13 16h9v7h-9zM7 5h8M7 9h10" /><path opacity=".9" d="M7 13h5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M7 17h3M15 16v-4h5v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"5HCE":function(e,t){e.exports='<div role="alertdialog" aria-live="assertive">\n  <div class="validation-message-wrapper" tabindex="0">\n    <span bb-ax-alert="2000" class="validation-message" id="sr-message" bb-translate >components.directives.grade.validation.default</span>\n  </div>\n</div>'},"5L1M":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("wnlu"),o="ultra.components.directives.bbUiIcon.Textbook";Object(i.a)(s.a,o,"bbUiIconTextbook")},"5O3l":function(e,t){e.exports='<div class="calculated-formula-question-container calculated-formula-attempt-authoring guidance-wrapper">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.viewHelper.questionTextWithVariableValues"\n    plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <div\n    class="formula-details"\n    ng-if="::questionAttempt.question.displayFormulaToStudent"\n  >\n    <div class="formula-image">\n      <span class="formula-image-label" bb-translate>\n        components.directives.assessment-question.calculated-formula.answerFormula\n      </span>\n      <div>\n        <img\n          ng-src="{{::questionAttempt.question.mathMLImageURL}}"\n          alt="{{::questionAttempt.question.mathMLImageAltText}}"\n        />\n      </div>\n    </div>\n    <ul class="variable-value-list">\n      <li class="variable-value-list-item" ng-repeat="(variable, value) in ::questionAttempt.question.variableValues">\n        <span translate-values="{variableName: variable, variableValue: value}" bb-translate>\n          components.directives.assessment-question.calculated-formula.variableValue\n        </span>\n      </li>\n    </ul>\n  </div>\n  <div\n    ng-if="::questionAttempt.question.correctAnswerPrecision"\n    bb-translate="{{::assessmentQuestion.viewHelper.getRoundingInstructionsKey()}}"\n    translate-values="{scale: questionAttempt.question.answerScale}"\n    class="rounding-instructions"\n  ></div>\n</div>\n\n<div bb-first-time-container class="guidance-wrapper question-answer-container">\n  <div bb-guidance-target component-key="components.directives.assessment-question.ftue.calculated-formula-attempt-authoring">\n    <input\n      id="{{::assessmentQuestion.elementId}}"\n      name="{{::assessmentQuestion.elementId}}"\n      type="text"\n      ng-model="assessmentQuestion.givenAnswer"\n      bb-translate-attrs="{placeholder: \'components.directives.assessment-question.calculated-formula.placeholder.attempt\', \'aria-label\': \'components.directives.assessment-question.placeholder.question\'}"\n      translate-attrs-values="{questionIdentifier: questionAttempt.visibleQuestionNumber}"\n      analytics-id="components.directives.assessment-question.calculated-formula.attempt-authoring.input-placeholder.input.text"\n    />\n  </div>\n\n  <bb-guidance component-key="components.directives.assessment-question.ftue.calculated-formula-attempt-authoring"\n               class="guidance-element-overlay stacked push-bottom" ng-if="::questionAttempt.question.ui.questionTypePosition === 0">\n    <span bb-translate>components.directives.assessment-question.ftue.calculated-formula-attempt-authoring</span>\n  </bb-guidance>\n</div>\n'},"5Tom":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var i=n("D57K"),s=(n("JfeD"),n("nYZ0")),o=n("fYJU"),a=n("0JpG"),r=n("TnpK"),c=n("0/Nk"),l=n("OI4n"),d=n("yC9S"),u=n("aHpC"),p="ultra.directives.group.group-student-enrollment",m=function(){function e(e,t,n,i,s){this.scope=e,this.contentService=t,this.currentUserService=n,this.localize=i,this.ultraState=s,this.isSelfEnrollment=!1}return e.prototype.$onInit=function(){this.render()},e.prototype.render=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t,n,s,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0?(e=this.localize.getReactBabelfishParams(),t=e.locale,n=e.babelfishFormatter,s=this.content.selfEnrollmentGroups.filter((function(e){return e.group})).map((function(e){return e.group})),o=this,[4,l.getSelfEnrollmentGroupInfo(s,t,n)]):[3,2];case 1:return o.selfEnrollGroupInfo=i.sent(),this.isSelfEnrollment=this.selfEnrollGroupInfo.isSelfEnrollment,[3,3];case 2:this.isSelfEnrollment=!1,i.label=3;case 3:return[2]}}))}))},e.prototype.openContentEnrollPanel=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return this.fromView?this.ultraState.current.name.endsWith("discussion.view.with-grading.peek.discussion-details")?[4,this.ultraState.leavePeekState()]:[3,4]:[3,8];case 1:return e.sent(),[4,this.ultraState.leavePeekState()];case 2:return e.sent(),[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})];case 3:return e.sent(),[3,7];case 4:return[4,this.ultraState.leavePeekState()];case 5:return e.sent(),[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})];case 6:e.sent(),e.label=7;case 7:return[3,10];case 8:return[4,this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id})];case 9:e.sent(),e.label=10;case 10:return[2]}}))}))},e.prototype.isBeforeEnrollment=function(){return this.selfEnrollGroupInfo&&"Before"===this.selfEnrollGroupInfo.enrollmentDateState},e.prototype.isOpenEnrollment=function(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState},e.prototype.isOpenEnrollmentWithEnding=function(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState&&null!=this.selfEnrollGroupInfo.relativeDate},e.prototype.isAfterEnrollment=function(){return this.selfEnrollGroupInfo&&"After"===this.selfEnrollGroupInfo.enrollmentDateState},e=Object(i.__decorate)([Object(d.a)({moduleName:p,componentName:"bbGroupStudentEnrollment",template:c,bindings:{content:"<",fromView:"@"},requireModules:[s.d,o.a,a.moduleName,r.b]}),Object(i.__param)(0,Object(u.b)("$scope")),Object(i.__param)(1,Object(u.b)(s.f)),Object(i.__param)(2,Object(u.b)(o.b)),Object(i.__param)(3,Object(u.b)(a.serviceName)),Object(i.__param)(4,Object(u.b)(r.d))],e)}()},"5XZZ":function(e,t){e.exports='<div class="assessment-question" ng-if="::!assessmentQuestion.questionRegradingEnabled">\n    <fieldset>\n      <div class="question-header"\n           ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n           ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n        <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                     class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                     aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                     size="medium"\n                     icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n        <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle" bb-translate="components.directives.assessment-question.question-title" translate-values="{index: assessmentQuestion.questionAttempt.visibleQuestionNumber}"></legend>\n\n        \x3c!--Question goal --\x3e\n        <a ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle && assessmentQuestion.hasGoals()" href="javascript:void(0);"\n           ng-click="assessmentQuestion.openQuestionGoals()"\n           class="question-goal"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.assessment-question.view-goal\', \'title\':\'components.directives.assessment-question.view-goal\'}"\n           analytics-id="components.directives.assessmentQuestion.viewGoal.link">\n          <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n        </a>\n\n        <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                           hide-grade="!assessmentQuestion.canViewGrades"\n                           input-id="{{::assessmentQuestion.elementId}}"\n                           is-privileged="false"\n                           ng-if="assessmentQuestion.questionConfig.hasPoints && assessmentQuestion.questionAttempt.isScoreVisible">\n        </bb-question-grade>\n      </div>\n      <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n    </fieldset>\n</div>\n\n<div class="assessment-question" ng-if="::assessmentQuestion.questionRegradingEnabled">\n  <fieldset>\n    <div class="question-header question-header-review"\n         ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n         ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n      <div>\n          <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                       class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                       aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                       size="medium"\n                       icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n          <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle" bb-translate="components.directives.assessment-question.question-title" translate-values="{index: assessmentQuestion.questionAttempt.visibleQuestionNumber}"></legend>\n          \x3c!--Question goal --\x3e\n          <a ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle && assessmentQuestion.hasGoals()" href="javascript:void(0);"\n            ng-click="assessmentQuestion.openQuestionGoals()"\n            class="question-goal"\n            bb-translate-attrs="{\'aria-label\':\'components.directives.assessment-question.view-goal\', \'title\':\'components.directives.assessment-question.view-goal\'}"\n            analytics-id="components.directives.assessmentQuestion.viewGoal.link">\n            <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n          </a>\n          <span class="question-full-credit-label"\n                bb-translate\n                ng-if="assessmentQuestion.questionAttempt.question.fullCredit && gradedQuestionAttempt.points && !isSmallBreakpoint">\n                components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given\n          </span>\n          <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                            hide-grade="!assessmentQuestion.canViewGrades"\n                            input-id="{{::assessmentQuestion.elementId}}"\n                            is-privileged="false"\n                            ng-if="assessmentQuestion.questionConfig.hasPoints && assessmentQuestion.questionAttempt.isScoreVisible">\n          </bb-question-grade>\n      </div>\n      <div ng-if="isSmallBreakpoint" class="question-grade-group">\n        <span class="question-full-credit-label"\n              bb-translate\n              ng-if="assessmentQuestion.questionAttempt.question.fullCredit && gradedQuestionAttempt.points">components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given</span>\n      </div>\n    </div>\n    <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n  </fieldset>\n</div>\n'},"5Yfa":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a}));var i="bb-goal-selection-changed",s="bb-goal-alignment-saved",o="bb-goal-alignment-legacy-picker-saved";function a(e){return i+":"+e.getContentIdForGoalAlignment()}},"5dtR":function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="questionAttempt.question.questionText.rawText"\n    plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n    is-read-only="true">\n  </bb-rich-text-editor>\n</div>\n\n<div bb-first-time-container class="guidance-wrapper question-answer-container">\n  <div bb-guidance-target component-key="components.directives.assessment-question.ftue.essay-attempt-authoring">\n    <bb-rich-text-editor\n      name="{{::assessmentQuestion.elementId}}"\n      ng-model="assessmentQuestion.givenAnswer.rawText"\n      is-read-only="assessmentQuestion.readOnly"\n      is-disabled="assessmentQuestion.isSaving"\n      on-focus="assessmentQuestion.onEditorFocus()"\n      on-blur="assessmentQuestion.onEditorBlur()"\n      is-toolbar-hidden="!assessmentQuestion.isEditorActive"\n      plugin-options="assessmentQuestion.pluginOptions"\n      file-location="questionAttempt.givenAnswer.fileLocation"\n      web-location="questionAttempt.givenAnswer.webLocation"\n      editor-placeholder-key="components.directives.assessment-question.essay.placeholder.attempt"\n      sr-label="quattachmentestionAttempt.question.questionText.rawText"\n      show-word-count="true">\n    </bb-rich-text-editor>\n  </div>\n\n  <bb-guidance component-key="components.directives.assessment-question.ftue.essay-attempt-authoring"\n               class="guidance-element-overlay stacked push-bottom" ng-if="questionAttempt.question.ui.questionTypePosition === 0">\n    <span bb-translate>components.directives.assessment-question.ftue.essay-attempt-authoring</span>\n  </bb-guidance>\n</div>\n'},"5m/6":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-filter-options",use:"icon-small-filter-options-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-filter-options"><path d="M1 1h8M1 5h8M1 9h8M1 13h5M13 1v14M11 13l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"5uNO":function(e,t,n){},"5vTq":function(e,t){e.exports='<div class="grade-grid-cell grade-grid-body-cell student-column">\n  <div class="student-info">\n    <bb-user-avatar class="avatar" user="user"></bb-user-avatar>\n    <bb-username class="ellipse username" user="user" auto-update="true" format-sync="true" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n  </div>\n</div>\n'},"66CI":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-lock-circle",use:"icon-small-lock-circle-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock-circle"><g stroke-width="2"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8h6v3H5V8z" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 9h4v1H6z" /><path d="M6 8V5.7143C6 4.857 6.6667 4 8 4m0 0c.3333 0-.3333 0 0 0zm0 0c1.3333 0 2 .8571 2 1.7143V8" stroke-linecap="round" stroke-linejoin="round" /></g></symbol>'});s.add(o);e.exports=o},"66CP":function(e,t){e.exports='<div class="content-item-icon" bb-load-bundle="components/directives/element-image/element-image-accessibility">\n  <bb-ui-content-icon icon="contentItemIcon.iconName" color="{{contentItemIcon.iconColor}}" not-decorative="true"></bb-ui-content-icon>\n  <div class="content-item-icon__status" ng-if="contentItemIcon.showStatusIcon()">\n    <bb-svg-icon size="small" icon="{{contentItemIcon.getStatusIconName()}}"></bb-svg-icon>\n  </div>\n</div>\n'},"6CeR":function(e,t){e.exports='\x3c!-- Typeahead search box --\x3e\n<div class="grade-grid-search-box">\n  <bb-typeahead-search-box id="student-search-box"\n                           item-selected="gg.itemSelected(item)"\n                           type-ahead-search="gg.typeAheadSearch(searchText)"\n                           search="gg.search(searchText)"\n                           clear-search="gg.clearTypeAheadSearch()"\n                           input-placeholder="components.directives.grade.search-box.placeholder"\n                           sr-empty-results="components.directives.grade.search-box.emptyResults"\n                           sr-results-found="components.directives.grade.search-box.resultsFound"\n                           sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                           sr-label="components.directives.grade.search-box.placeholder"\n                           clear-aria-label="components.directives.grade.search-box.clear"\n                           icon="search">\n\n        <div bb-feature-toggle="!gradebookSearchFilterM2" remove-from-dom="true">\n          <bb-user-avatar class="typeahead-user-avatar" user="::item.data.user"></bb-user-avatar>\n          <div class="typeahead-student-name-id">\n            <bb-username class="typeahead-name ellipse" user="item.data.user" has-title-attr="true"></bb-username>\n            <div class="typeahead-id ellipse">{{::item.data.user.studentId}}</div>\n          </div>\n        </div>\n        <ng-switch on="item.type" bb-feature-toggle="gradebookSearchFilterM2" remove-from-dom="true">\n          <div ng-switch-when="user" class="element-card">\n            <bb-user-avatar class="typeahead-user-avatar" user="::item.data.user"></bb-user-avatar>\n            <div class="typeahead-student-name-id">\n              <bb-username class="typeahead-name ellipse" user="item.data.user" has-title-attr="true"></bb-username>\n              <div class="typeahead-id ellipse">{{::item.data.user.studentId}}</div>\n            </div>\n          </div>\n          <div ng-switch-when="column" class="element-card">\n            <div bb-content-item-icon content-column="item.data.getMetadata()" show-alert-icon="item.data.getMetadata().getNumMissingIfLate() > 0" class="element-image" ng-if="item.data.getMetadata()"></div>\n            <div class="typehead-title column-title ellipse">\n              <div class="ellipse grade-title">{{::item.data.getMetadata().columnName}}</div>\n              <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.columnName</div>\n            </div>\n          </div>\n          <div ng-switch-when="category" class="element-card">\n              <bb-ui-icon-document-multiple color="primary"></bb-ui-icon-document-multiple>\n              <div class="typehead-title category-title ellipse">\n                <div bb-translate class="ellipse grade-title" ng-if="!item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.localizableTitle.languageKey}}</div>\n                <div bb-translate class="ellipse grade-title" ng-if="item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.title.split(\'.\')[0]}}</div>\n                <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.category</div>\n              </div>\n          </div>\n          <div ng-switch-default="noResult" class="element-card">\n            <div class="no-result" bb-translate>components.directives.grade.search-box.noResultsFound</div>\n        </div>\n      </ng-switch>\n  </bb-typeahead-search-box>\n</div>\n<div id="grade-grid-container" class="grade-grid-container">\n  <div class="spinner bb-secondary-color-2" ng-if="!gg.initialized" aria-hidden="true"></div>\n  <div bb-feature-toggle="gradebookSearchFilterM3" remove-from-dom="true">\n    <div class="overall-grade-setup grade-search-filter-panel student-column" ng-if="gg.showFilterCriteria">\n      <bb-grade-grid-search-filter-reborn merged-courses="::gg.mergedCourses"></bb-grade-grid-search-filter-reborn>\n    </div>\n  </div>\n\n  <div id="grade-grid" bb-grid-reborn="gg.gridOptions"></div>\n  <div class="overall-grade-setup text-center" ng-if="gg.isOverallPanelShown && gg.canViewOverallPanel">\n    <bb-setup-overall-grade show-fixed-view="gg.canViewOverallPanel"></bb-setup-overall-grade>\n  </div>\n\n</div>\n'},"6Fqm":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-search",use:"icon-small-search-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-search"><circle cx="6.5" cy="6.5" r="5.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M15 15l-4.5-4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"6PP7":function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n    <li ng-if="col.isScorm()" role="presentation">\n      <a role="menuitem" \n         ng-click="col.previewScorm()"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.viewScorm">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewScorm</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canView() && !col.canEdit() && !col.isScorm()" role="presentation">\n      <a role="menuitem" \n          ng-click="col.viewOrEdit()" \n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.viewItem">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canEdit()" role="presentation">\n      <a  role="menuitem" \n          class="js-edit-column" \n          ng-click="col.viewOrEdit()" \n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.edit">\n        <bb-svg-icon size="small" icon="draw"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.edit</bb-translate>\n      </a>\n    </li>\n    <li ng-if="canPostGrades" role="presentation">\n      <a  role="menuitem" \n          class="js-post-column" \n          ng-click="col.postGrades()" \n          href="javascript:void(0);"  \n          bb-confirmation-needed="{{grade.getPostAllGradeConfirmationNeededStringsKey(col.data)}}"\n          modal-aria-type="alertdialog"\n          show-type="always"\n          analytics-id="components.directives.grade.grid.post">\n        <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.post</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.data.isQuestionAnalysisAvailable() && col.canViewQuestionAnalysis()"\n        remove-from-dom="true"\n        role="presentation">\n      <a  role="menuitem" \n          class="js-open-question-analysis" \n          ng-click="col.openQuestionAnalysisOverview()" \n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.openQuestionAnalysis">\n        <bb-svg-icon size="small" icon="question-analysis"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.openQuestionAnalysis</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.hasDownloads() && col.canDownloadAll()" role="presentation">\n      <a  role="menuitem" \n          class="js-download-all" \n          ng-click="col.openDownloadAll()" \n          href="javascript:void(0)"\n          analytics-id="components.directives.grade.grid.downloadAll">\n        <bb-svg-icon size="small" icon="download"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.downloadAll</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canDelete()" role="presentation">\n      <a class="js-delete-column"\n         href="javascript:void(0);"\n         ng-click="col.triggerDelete($event)"\n         ng-switch="!!col.data.contentId"\n         analytics-id="components.directives.grade.grid.deleteColumn.link"\n         role="button">\n        \x3c!-- Content column --\x3e\n        <bb-delete callback-function="col.deleteColumn()"\n                   class="ellipse"\n                   content-id="col.data.contentId"\n                   course-id="col.data.courseId"\n                   display-mode="controls"\n                   ng-switch-when="true"\n                   role="menuitem">\n        </bb-delete>\n        \x3c!-- Grading column --\x3e\n        <bb-delete class="ellipse"\n                   confirmation-handler="{{col.getConfirmationMessage()}}"\n                   delete-function="col.deleteColumn()"\n                   display-mode="controls"\n                   ng-switch-when="false"\n                   role="menuitem">\n        </bb-delete>\n      </a>\n    </li>\n  </ul>\n</div>\n'},"6TNA":function(e,t){e.exports='<span class="schema-grade">{{displayGrade.fullDisplayGrade}}</span>\n'},"6ZXc":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-download",use:"icon-medium-download-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-download"><path d="M12 15V1M8 11l4 4 4-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 7v16h22V7h-4M1 7h4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"6mvz":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("wHJ2"),s=n("06dA"),o=n("1ZbL"),a=n("0JpG"),r="ultra.components.directives.rubric.rubricView",c={Class:s.RubricView,bindingNames:["analyticsId","criteria"],renderLocalized:!0,withThemeProvider:!0};i.module(r,[a.moduleName]).component("bbRubricView",Object(o.a)(c))},"6sUD":function(e,t){e.exports='<div>\n  \x3c!-- Display a loading spinner if page is rendering --\x3e\n  <div class="telemetry-loading-anim" ng-if="telemetryPanelHeader.showSpinner">\n    <div class="spinner bb-secondary-color-2"/>\n  </div>\n  <header class="panel-header simple-header">\n    <div class="panel-titles-container">\n      <div class="panel-sub-title">{{ ::course().name }}</div>\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                type="button"\n                analytics-id="components.directives.telemetry.panel.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>components.directives.telemetry.panel.menu</span>\n        </button>\n        <h1 class="panel-title" ng-if="::titleKey" bb-translate>{{::titleKey}}</h1>\n        <h1 class="panel-title" ng-if="title">{{::title}}</h1>\n        \x3c!-- BUTTON 2 (displayed to the left of Button 1) --\x3e\n        <button ng-if="buttonTwoIcon" id="button-two"\n                aria-haspopup="true"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonTwoAriaLabel,\'title\': buttonTwoTitle}"\n                ng-click="buttonTwoCallback()"\n                ng-class="{ \'active\': mobileStudentListVisible }"\n                analytics-id="components.directives.telemetry.panel.buttonwTwo.button">\n          <i class="{{ ::buttonTwoIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonTwoTitle</span>\n        </button>\n        \x3c!-- BUTTON 1 (displayed on the far right) --\x3e\n        <button ng-if="buttonOneIcon"\n                id="button-one"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonOneAriaLabel,\'title\': buttonOneTitle}"\n                ng-click="buttonOneCallback()"\n                analytics-id="components.directives.telemetry.panel.buttonOne.button">\n          <i class="{{ ::buttonOneIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonOneTitle</span>\n        </button>\n      </div>\n    </div>\n  </header>\n</div>\n'},"6xt4":function(e,t){e.exports='<div\n  ng-switch="rootContent().isInForcedSequenceModule() || rootContent().isForcedSequenceModule() "\n  id="{{::addContentButton.getButtonWrapperId()}}"\n  tabindex="-1"\n>\n  <button\n    ng-switch-when="true"\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    bb-tooltip\n    enhanced-tooltip="true"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    bb-translate-attrs="{ title: \'course.outline.addForbidden.text\' }"\n    analytics-id="components.directives.add-content-button.course-outline.button"\n    >\n  </button>\n  <button\n    ng-switch-default\n    id="{{::addContentButton.getTargetId()}}"\n    class="button-add-content js-show-add-options"\n    data-show-add-options\n    ng-click="addContentButton.toggleOverflowMenu()"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-haspopup="true"\n    aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    analytics-id="components.directives.add-content-button.course-outline.addContentMenu.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible && !addContentButton.isEmptyFolder()"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  aria-labelledby="{{::addContentButton.getTargetId()}}"\n  analytics-id="components.directives.add-content-button.contextualMenu">\n</bb-ui-contextual-menu>\n<ul class="element-list-add-menu angular-animate small-block-grid-2 medium-block-grid-2 large-block-grid-3"\n    ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n    ng-show="addContentButton.isEmptyFolder()">\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-create"\n       bb-peek-sref="content-manage.create(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.link">\n      <div>\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.create</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="addContentButton.currentCourse.canCopy() && addContentButton.isEmptyFolder()">\n    <a class="content-import-button"\n       bb-peek-sref="content-manage.copy(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.import.link">\n      <div>\n        <bb-svg-icon size="small" icon="duplicate"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.copy</span>\n      </div>\n    </a>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      is-content="true"\n      primary-key="fileListViewLocalId"\n      skip-zip-file-check="true"\n      class="js-file-upload"\n      depth="depth()">\n      <button ng-if="addContentButton.isEmptyFolder()"\n              class="file-upload-button"\n              analytics-id="components.directives.add-content-button.course-outline.upload.button">\n        <div>\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n          <span bb-translate>components.directives.add-content-button.upload</span>\n        </div>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-market"\n       href="javascript:void(0);"\n       ng-click="addContentButton.openContentMarket()"\n       analytics-id="components.directives.add-content-button.course-outline.openContentMarket.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-market"></bb-svg-icon><span bb-translate>components.directives.add-content-button.contentMarket</span>\n      </div>\n    </a>\n  </li>\n  <li ng-if="::addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="true"\n      monitor-leave="true"\n      is-third-party-upload="true"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      cloud-upload-selected-content-id="addContentButton.positionForFiles.positionAfter"\n      primary-key="fileListViewId"\n      skip-zip-file-check="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      target-div="{{\'#\' + fileListViewId}}"\n      disable-drag="true"\n      ignored-states="[\'content-manage.import\']">\n      <button\n        class="doc-add-media clear ng-scope"\n        bb-kloudless\n        primary-key="fileListViewId"\n        attach-handler="addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="true"\n        on-files-selected="addContentButton.onFilesSelectedHandler"\n        analytics-id="components.directives.add-content-button.course-outline.importContentFromCloudStorage.button">\n        <bb-svg-icon size="small" icon="upload-cloud"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n      </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isEmptyFolder()">\n    <a class="js-content-collection"\n       bb-peek-sref="content-collection(addContentButton.getInsertLocationData())"\n       analytics-id="components.directives.add-content-button.course-outline.contentCollection.link">\n      <div>\n        <bb-svg-icon size="small" icon="content-collection"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.contentCollection</span>\n      </div>\n    </a>\n  </li>\n</ul>\n'},"70Xn":function(e,t){e.exports='<bb-modal class="notification automatic-zero-confirmation" \n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZero">\n  <div name="modal-contents">\n    \x3c!-- Instructions --\x3e\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.confirm"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.confirm\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.cancel"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.cancel\n  </button>\n</bb-modal>'},"7BzJ":function(e,t,n){},"7OC/":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var i=n("D57K"),s=n("wHJ2"),o=n("LN5R"),a=n("o5Lu"),r=n("lEL+"),c=n("TmUJ"),l=n("dF44"),d=n("+4Px"),u=n("qH3X"),p=n("8NsT"),m=n("6PP7"),h=n("LTOG"),b="ultra.components.directives.gradeGridColumnHeaderOverallReborn",g=function(t){function n(n,i,s,o,a,r,c,p){var m=t.call(this,i,p)||this;return m.rootScope=n,m.element=s,m.attrs=o,m.$compile=a,m.gradeGridRebornController=r,m.grade=c,m.canPostGrades=!1,m.initializeEventHandler(),m.menuScope=i.$new(!0),i.$watch("col",(function(e){i.columnMetadata=e.data,m.col=e,m.highlight(m.col),m.canPostGrades=m.grade.canPostGrades(e.gridData.course,e.data)})),i.$on(l.b.CELL_FOCUSED,(function(){s.find(".content").focus()})),s.find(".content").on("keydown",(function(t){if(t.keyCode===d.g)m.scope.$emit(l.b.LEAVE_GRID);else{if(!d.y(t))return;e(t.target).click()}t.preventDefault(),t.stopPropagation()})),s.find(".content").on("keyup",(function(e){d.y(e)&&(e.preventDefault(),e.stopPropagation())})),i.$on(u.a.FOCUSIN_CELL,(function(e,t){t.columnId===m.col.id&&(m.gradeGridRebornController.getElement().find(".is-active").removeClass("is-active"),m.element.find(".content").addClass("is-active"))})),i.$on(u.a.FOCUSOUT_CELL,(function(e,t){t.columnId===m.col.id&&m.element.find(".content").removeClass("is-active")})),m}return Object(i.__extends)(n,t),n.prototype.initializeEventHandler=function(){var e=this;this.element.find(".content-header-bg").focusin((function(){e.focusin()})).focusout((function(){e.focusout()}))},n.prototype.focusin=function(){this.rootScope.$broadcast(u.a.FOCUSIN_CELL,{columnId:this.col.id})},n.prototype.focusout=function(){this.rootScope.$broadcast(u.a.FOCUSOUT_CELL,{columnId:this.col.id})},Object.defineProperty(n.prototype,"possible",{get:function(){return 100},enumerable:!0,configurable:!0}),n.prototype.popupMenu=function(t){var n=this,i="grade-grid-column-header-menu-reborn-"+this.col.id;if(!this.gradeGridRebornController.isMenuExisting(i)){var s=e(t.target).closest(".grade-grid-header-cell").offset();s.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=function(e){var t=s.left+e.width(),i=n.gradeGridRebornController.getGradeGridContainerElementRight();t>i&&(s.left-=t-i+Object(c.a)()),e.offset(s)},this.gradeGridRebornController.popupMenu(i,m,this.menuScope),this.timeout((function(){var e=n.gradeGridRebornController.getPopupMenu();e.on("keydown",(function(t){t.keyCode===d.g||t.keyCode===d.u?(e.data("destroy")(),n.scope.$emit(l.b.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):d.y(t)&&n.scope.$emit(l.b.CELL_FOCUSED)})),n.gradeGridRebornController.getMenuitems().first().focus()}),this.menuScope,0,!1),t.preventDefault(),t.stopPropagation()}},n.$inject=["$rootScope","scope","element","attrs","$compile","gradeGridRebornController",a.h,r.b],n}(h.a),v=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=p,this.scope=!0,this.require="^"+o.a,this.link=function(e,n,i,s){e.gradeGridColumnHeaderOverallReborn=t.$injector.instantiate(g,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();s.module(b,[]).directive("bbGradeGridColumnHeaderOverallReborn",["$injector",function(e){return e.instantiate(v)}])}).call(this,n("5iHu"))},"7TUR":function(e,t){e.exports='<div class="fimb-question-container fimb-attempt-review">\n  <div class="fimb-question">\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.viewHelper.questionText"\n      plugin-options="editorPluginOptions"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n  <bb-question-answer-status correctness="::assessmentQuestion.getAnswerResult()"\n                             hide-correctness-text="::!assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n                             was-late="::assessmentQuestion.wasAnsweredLate()"\n                             align-icon-to-top="assessmentQuestion.viewHelper.alignIconTop()"\n                             class="fimb-question-answer">\n    <div class="acceptable-answer" ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail()" ng-repeat="identifier in assessmentQuestion.viewHelper.orderedIdentifiers">\n      <div ng-switch on="assessmentQuestion.viewHelper.answersMap[identifier].evaluationType">\n        <span ng-switch-when="CONTAINS" bb-translate\n              translate-values="{identifier: identifier, numberOfValues: assessmentQuestion.viewHelper.answersMap[identifier].values.length, values: assessmentQuestion.viewHelper.answersMap[identifier].values}">\n          components.directives.assessment-question.fimb.review.acceptable-answers.contains.plural\n        </span>\n        <span ng-switch-when="EXACT" bb-translate\n              translate-values="{identifier: identifier, numberOfValues: assessmentQuestion.viewHelper.answersMap[identifier].values.length, values: assessmentQuestion.viewHelper.answersMap[identifier].values}">\n          components.directives.assessment-question.fimb.review.acceptable-answers.exact.plural\n        </span>\n        <span ng-switch-when="MATCHES" bb-translate\n              translate-values="{identifier: identifier, pattern: assessmentQuestion.viewHelper.answersMap[identifier].values[0]}">\n          components.directives.assessment-question.fimb.review.acceptable-answers.matches\n        </span>\n      </div>\n      <div class="acceptable-answer-details" ng-if="::assessmentQuestion.viewHelper.showDetailsForAnswer(identifier)"\n           ng-switch on="::assessmentQuestion.viewHelper.answersMap[identifier].evaluationType">\n        <span ng-switch-when="CONTAINS" ng-switch on="assessmentQuestion.viewHelper.answersMap[identifier].caseSensitive">\n          <span ng-switch-when="true" bb-translate>components.directives.assessment-question.fimb.review.answer-details.contains.case-sensitive</span>\n          <span ng-switch-when="false" bb-translate>components.directives.assessment-question.fimb.review.answer-details.contains.not-case-sensitive</span>\n        </span>\n        <span ng-switch-when="EXACT" ng-switch on="assessmentQuestion.viewHelper.answersMap[identifier].caseSensitive">\n          <span ng-switch-when="true" bb-translate>components.directives.assessment-question.fimb.review.answer-details.exact.case-sensitive</span>\n          <span ng-switch-when="false" bb-translate>components.directives.assessment-question.fimb.review.answer-details.exact.not-case-sensitive</span>\n        </span>\n      </div>\n    </div>\n  </bb-question-answer-status>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n  />\n</div>\n'},"7UH7":function(e,t){e.exports='<div class="text-editor" tabindex="-1" bb-load-bundle="components/directives/text-editor" bb-cache-compilation="basic-text-editor">\n  <label ng-if="inputLabelKey" class="text-editor-label" for="{{::elementId}}" bb-translate>{{::inputLabelKey}}</label>\n  <textarea id="{{::elementId}}"\n         class="read-mode editor-element"\n         name="{{::elementId}}"\n         tabindex="0"\n         type="text"\n         bb-validate-maxlength="{{::getInputMaxLength()}}"\n         ng-model="ngModel"\n         maxlength="{{::(getInputMaxLength() || \'\')}}"\n         ng-model-options="{ getterSetter: true }"\n         ng-disabled="{{::readonly()}}"\n         fng-blur="textEditor.onBlur()"\n         fng-focus="textEditor.onFocus()"\n         fng-keyup="textEditor.onChange($event)"\n         fng-keydown="textEditor.onKeydown($event)"\n         bb-translate-attrs="{ \'placeholder\': \'{{placeholderKey}}\' }"\n         aria-label="{{textEditor.getContentLabel()}}"\n         translate-attrs-values="{{::placeholderAttrsValues}}"\n         bb-focus-on="{{::focusOn}}"\n         ng-required="::fieldRequired()"\n         analytics-id="components.textEditor.basicEditor.textarea"></textarea>\n  <div bb-validation-messages\n       ng-if="::!noValidationMessage()"\n       for="{{::elementId}}" immediate="true">\n    <span ng-message="maxlengthImmediate">\n      <span bb-translate translate-values="{ diff: element.$errorImmediate.maxlengthImmediate.diff }">\n        components.directives.validation.messages.errors.maxlength.plural\n      </span>\n    </span>\n  </div>\n</div>\n'},"7b1Y":function(e,t){e.exports='<div class="question-answer-container">\n  <bb-question-answer-status was-late="::assessmentQuestion.wasAnsweredLate()"\n                             hide-correctness-text="true"\n                             class="essay-attention">\n  </bb-question-answer-status>\n  <bb-rich-text-editor\n    plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <div class="panel">\n    <span class="answer-panel-heading" bb-translate>components.directives.assessment-question.essay.review.your-answer</span>\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.questionAttempt.givenAnswer.rawText"\n      plugin-options="{\'attachment\': true, \'math\': true}"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n</div>\n'},"7cYF":function(e,t,n){"use strict";n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return $})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return E}));n("aSyE"),n("VcPJ");var i=n("nsO7"),s=n("wHJ2"),o=n("+O05"),a=n("k9iv"),r=n("o5Lu"),c=n("X/qj"),l=n("0JpG"),d=n("5RJJ"),u=n("pjml"),p=n("5uPl"),m=n("IjED"),h=n("lEL+"),b=n("TnpK"),g=n("Ed3w"),v=n("5MwF"),f=n("DYK3"),y=n("3Nzc"),w=n("yC9S"),C=n("p7NW"),S=n("nmzr"),A=n("R4kC"),k=n("fGDP"),I=n("cpZm"),O=n("15AK"),D=n("lmMM"),T="trigger_question_regrading-task",$="open-assessment-feedback-editor",x=function(){function e(e,t,n,i,s,a,r,c,l,d,u,p,m,h,b,A,D){var $=this;this.$rootScope=e,this.$scope=t,this.course=n,this.column=i,this.content=s,this.errorModalService=a,this._gradeService=r,this.gradebookPermissionService=c,this.bbLocalize=l,this.membershipService=d,this.timeout=u,this.ultraState=p,this.UserModel=m,this.originalityReportService=h,this.slideoutPanelService=b,this.scheduleTask=A,this.submissionListService=D,this.namesCarousel=Object.create(null),this.contentCarousel=Object.create(null),this.isFeedbackDirty=!1,this.isFeedbackEmpty=!0,this.attemptsWereDeleted=!1,this.isLoading=!0,this.isExternalSubmissions=!1,this.saveAsOverride=!0,this.isAnyQuestionEditing=!1,this.isQuestionRegradingBlocked=!1,this.confirmedClose=!1,this.gradedQuestionAttemptsByAttemptId=Object.create(null),this.hideFeedbackStudentHasLeft=!1,this.hideFeedbackFromPeerReviewer=!1,this.regradingNotifier=function(e){e||$.$rootScope.$broadcast(y.a)},this.doSlide=function(e){e&&$.$scope.$broadcast(O.ASSESSMENT_FEEDBACK_SAVE),$.isFeedbackDirty=!1,$.namesCarousel.slide($.slideOffset)},this.canViewGrades=this.gradebookPermissionService.canViewGrades(),this.canViewAttempts=this.gradebookPermissionService.canViewAttempts(),this.originalityReportService.setCourseContent(s,!0),this.isExternalSubmissions=o.a.isExternalSubmissionsAssessment(s),this.isAnyQuestionEditing=n.isComplete();var x=p.params;this.isOpenFromGridView=x.gradebookView===k.b.Grid,this.isOpenFromStudentList=x.gradebookView===k.b.List&&x.listViewType===I.b.id,this.membershipId=x.membershipId,this.$scope.$on("bb-update-question-grade",(function(e,t){$._onUpdateQuestionGrade(t)})),this.column.hasRubricAssociation()&&w.b.OnRootScope(this.$scope,C.d,(function(){return $.reloadGrade()})),v.a.features.questionRegrading&&this.shouldQueryRegradingTask(n,s)&&(this.scheduleTask.scheduleTask({courseId:n.id,taskName:g.a.QuestionRegrading,scope:t,delay:1e4,notifier:this.regradingNotifier}),this.isRefFromAssessment?t.$on(T,(function(){$.isAnyQuestionEditing?$.isQuestionRegradingBlocked=!0:$.reloadGrade(!0)})):t.$on(y.a,(function(){$.isAnyQuestionEditing?$.isQuestionRegradingBlocked=!0:$.reloadGrade(!0)})),t.$on(f.c,(function(e,n){t.$broadcast(f.b,n),$.isAnyQuestionEditing=!0})),t.$on(f.i,(function(e,n){$.isAnyQuestionEditing=!1,$.isQuestionRegradingBlocked&&(n!==f.d.CANCEL&&n!==f.d.SAVE_WITHOUT_REGRADING||$.reloadGrade(!0),$.isQuestionRegradingBlocked=!1),t.$applyAsync()}))),t.$on("$stateChangeStart",(function(e,t){t.name.indexOf(S.GradeRoutes.SUBMISSION_GRADING)<0&&($.attemptsWereDeleted&&$.$scope.$root.$broadcast("refresh-attempt-count"),v.a.features.questionRegrading&&$.isAnyQuestionEditing&&!$.course.isComplete()&&!$.confirmedClose&&(e.preventDefault(),$.$scope.$broadcast("show-confirmation","submission-question-regrading")))})),t.$on("$stateChangeSuccess",(function(e,t){$.slideoutPanelService.setSlideoutPanelState()}));var E=this.submissionListService.addOnRowsUpdated(n.id,this.column.id,this.onSubmissionListRowsUpdated);this.$scope.$on("$destroy",E),t.$on("$destroy",(function(){E(),$.originalityReportService.clearReport(),$.originalityReportService.clearCourseContent()})),t.namesCarouselInitialized=function(){return!!$.namesCarousel.id||void 0},t.$watch("::namesCarouselInitialized()",(function(){t.namesCarouselInitialized()&&$.onNamesCarouselInit()})),t.$on(O.ASSESSMENT_FEEDBACK_CHANGED,(function(e,t,n){$.isFeedbackDirty=t,$.isFeedbackEmpty=n})),t.$on(O.ASSESSMENT_FEEDBACK_SAVED,(function(){return $.isFeedbackDirty=!1}))}return e.prototype.onFeedbackIconClick=function(){this.$scope.$broadcast($)},e.prototype.onNamesCarouselInit=function(){this.namesCarousel.registerSlideStatusUpdater({className:{whenTrue:"as-prev",whenFalse:""},scopeVarName:"asPrevButton",predicate:function(e){return e.slideIndex>=0&&e.slideIndex===e.currentSlide-1}}),this.namesCarousel.registerSlideStatusUpdater({className:{whenTrue:"as-next",whenFalse:""},scopeVarName:"asNextButton",predicate:function(e){return e.slideIndex===e.currentSlide+1&&e.slideIndex<e.totalSlides}})},e.prototype.shouldQueryRegradingTask=function(e,t){return!e.isComplete()&&!t.isScorm()},Object.defineProperty(e.prototype,"isRefFromAssessment",{get:function(){return this.ultraState.current.name.indexOf(".peek.gradebook-item.assessment")>0},enumerable:!0,configurable:!0}),e.prototype.isSlidePanelOpen=function(){return this.slideoutPanelService.isOpen()},e.prototype.getAttemptDetail=function(e){return void 0===e&&(e=this.carouselHelper.currentRow),this.getAttempt(e)?this.getAttempt(e).getToolAttemptDetailItem(this.column.scoreProviderHandle):null},e.prototype.showAttemptCanvas=function(){var e=this.getAttempt(this.carouselHelper.currentRow);return!(null==e||!e.toolAttemptDetail||(null==e?void 0:e.isInProgress()))},e.prototype.hasContent=function(e){if(!e)return!1;var t=e.getToolAttemptDetailItem(this.column.scoreProviderHandle);return t&&t.assessment&&t.assessment.questionCount>0},e.prototype.canRenderSubmission=function(){return!(!(this.carouselHelper&&this.carouselHelper.ready&&this.carouselHelper.currentRow)||!this.isAttemptSet())},e.prototype.loadGradedQuestionAttempts=function(e){var t=this;return this.course.gradebook.attempts.$buildRaw(e).assessment.gradedQuestionAttempts.$refresh({expand:"questionAttempt.question,questionAttempt.question.usageCount,questionAttempt.question.sourceInfo,questionAttempt.answerCorrectness"}).$then((function(n){n.setPostStatusAndGroupAttemptId(e),t.gradedQuestionAttemptsByAttemptId[e.id]=n}))},e.prototype.setSaveAsOverride=function(){if(this.column&&this.column.isScorm())this.saveAsOverride=!1;else{var e=this.getAttemptDetail();e&&(this.saveAsOverride=e.assessment.hasAnswerableQuestions)}},e.prototype.getQuestionsForAttempt=function(){var e=this.getAttempt(this.carouselHelper.currentRow);if(!s.isUndefined(e))return o.a.getQuestionsForAttempt(e,this.column.scoreProviderHandle)},e.prototype._onUpdateQuestionGrade=function(e){var t=0,n=this.gradedQuestionAttempts,s=Object(i.findIndex)(n,(function(t){return t.questionAttempt.id===e.questionAttempt.id}));if(-1!==s){n[s]=e;var o=this.getAttemptDetail();n.forEach((function(e){e.questionAttempt.attemptStatus.toString()===u.C.AttemptStatus.Completed.toString()&&t++})),t!==n.length&&o.status.toString()!==u.C.AttemptStatus.Completed.toString()||this.reloadGrade()}},e.prototype.closeWithoutSaving=function(){this.confirmedClose=!0,this.ultraState.leavePeekState(this.ultraState.current.name)},e.prototype.showOverflowMenu=function(){return this.gradebookPermissionService.canDelegatedEnterAttemptFeedback(this.column,this.getAttempt(this.carouselHelper.currentRow))&&!this.isSlidePanelOpen()},e.prototype.isPeerGradingAndAnonymousUser=function(e){return!1},e.prototype.transitionTo=function(e){this.slideOffset=e,this.isFeedbackDirty&&v.a.features.peerAssessmentFeatureFlag?this.$scope.$broadcast(D.a,"assessment-feedback-save-changes"):this.doSlide()},e.prototype.onCarouselLabelClick=function(e,t){e.preventDefault(),e.stopPropagation();var n=t-this.carouselHelper.currentSlideIndex;this.transitionTo(n)},e.$inject=["$rootScope","$scope","currentCourse","currentColumn","currentContent",a.c,r.h,c.b,l.serviceName,d.b,h.b,b.d,u.Pb.serviceName,p.b,m.b,g.c,A.b],e}(),E=function(){function e(e,t){this.ready=!1,this.submissionGradingController=e,this.mergeRows(t)}return e.prototype.mergeRows=function(e){var t=this,n=e.filter((function(e){return null!=e.grade&&e.attemptCount>0})),s=this.rows?this.rows.reduce((function(e,t){return e[t.membership&&t.membership.id]=t,e}),{}):{};n.forEach((function(e,t){var i=e.membership&&e.membership.id;i in s&&(n[t]=s[i])})),this.rows=n,this.currentSlideIndex=Object(i.findIndex)(this.rows,(function(e){return t.submissionGradingController.findIndex(e)})),this.currentSlideIndex<=0&&(this.currentSlideIndex=0)},e.prototype.disableSliderNavigation=function(){return this.submissionGradingController.isSlidePanelOpen()},e.prototype.showPrevArrow=function(){return this.currentSlideIndex>0&&!this.disableSliderNavigation()},e.prototype.showNextArrow=function(){return this.currentSlideIndex<this.rows.length-1&&!this.disableSliderNavigation()},e.prototype.isPrevious=function(e){return e>=0&&e===this.currentSlideIndex-1},e.prototype.isCurrent=function(e){return e===this.currentSlideIndex},e.prototype.isNext=function(e){return e===this.currentSlideIndex+1&&e<this.rows.length},e.prototype.updateSlide=function(e){this.submissionGradingController.isAnyQuestionEditing=!1,e>=0&&e<this.rows.length&&this.currentSlideIndex!==e&&(this.currentRow.hasBeenViewed=!0,this.currentSlideIndex=e,this.submissionGradingController.onSlideUpdate())},e.prototype.findRowByGradeId=function(e){return this.rows.find((function(t){return t.grade.id===e}))},e.prototype.findRowIndexByGrade=function(e){return this.rows.findIndex((function(t){return t.grade.id===e.id}))},e.prototype.updateRowGradeByGrade=function(e){var t=this.findRowIndexByGrade(e);this.rows[t].grade=e},Object.defineProperty(e.prototype,"initialSlide",{get:function(){return this.currentSlideIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRow",{get:function(){return this.rows[this.currentSlideIndex]},enumerable:!0,configurable:!0}),e}()},"7u+5":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("Otwn"),o="ultra.components.directives.bbUiIcon.Assignment";Object(i.a)(s.Assignment,o,"bbUiIconAssignment")},"8+lX":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-replies",use:"icon-small-replies-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-replies"><path d="M1 5h14v10H1v-4" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3L1 5l2 2" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"810X":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var i=n("wHJ2"),s=n("LN5R"),o=n("pjml"),a=n("0JpG"),r=n("lEL+"),c=n("+4Px"),l=n("dF44"),d=n("5vTq"),u=n("kkz3"),p="ultra.components.directives.gradeGridColumnStudentReborn",m=function(){function t(e,t,n,i,s,o){var r=this;this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,this.bbLocalize=s,this.timeout=o,e.$watch("row",(function(t){var n=i.getGridData().getRowById(t.id).metadata;e.user=n.user,e.fullName=r.bbLocalize.formatUsernameSync(e.user,a.ILocaleUsernameFormat.Short,e,{noWrap:!0}),e.isUserCourseAvailable=n.isAvailable,e.courseRole=r.getLocalizedRoleNameByCourseRole(n.courseRole)})),this.element.find("bb-username, bb-user-avatar").click((function(t){r.popupMenu(t,e.user)})),e.$on(l.b.ENTER_CELL,(function(e,t){t.find("bb-username").click()}))}return t.prototype.popupMenu=function(t,n){var i=this,s="grade-grid-column-student-card-reborn-"+n.id;if(!this.gradeGridRebornController.isMenuExisting(s)){var o=e(t.target).closest(".grade-grid-cell").offset();o.top+=20,o.left+=30;var a=this.scope.$new(!1);a.waiting=200,a.adjustPosition=function(e){o.top+e.height()>i.gradeGridRebornController.getGradeGridContainerElementBottom()&&(o.top-=60),e.offset(o)},this.gradeGridRebornController.popupMenu(s,u,a),this.timeout((function(){var t=e("#"+s);t.on("keydown",(function(e){e.keyCode!==c.g&&e.keyCode!==c.u||(t.data("destroy")(),e.preventDefault(),e.stopPropagation())})),a.$on("$destroy",(function(){return i.scope.$emit(l.b.LEAVE_CELL)})),t.focus()}),a,0,!1),t.preventDefault(),t.stopPropagation()}},t.prototype.getLocalizedRoleNameByCourseRole=function(e){return e.identifier&&e.identifier.toString()in o.y.toBeLocalizedRoleLabels?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:o.y.toBeLocalizedRoleLabels[e.identifier.toString()]}):e.courseName.rawValue},t.$inject=["scope","element","attrs","gradeGridRebornController",a.serviceName,r.b],t}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=d,this.scope=!0,this.require="^"+s.a,this.link=function(e,n,i,s){e.gradeGridColumnStudentReborn=t.$injector.instantiate(m,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();i.module(p,[]).directive("bbGradeGridColumnStudentReborn",["$injector",function(e){return e.instantiate(h)}])}).call(this,n("5iHu"))},"8NsT":function(e,t){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content content-header-bg"\n       ng-click="gradeGridColumnHeaderOverallReborn.popupMenu($event)"\n       tabindex="0"\n       role="columnheader"\n       aria-describedby="summary-points-{{::columnMetadata.id}}"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderOverallReborn.popupMenu"\n  >\n    <div bb-content-item-icon content-column="columnMetadata" class="element-image" role="presentation"></div>\n    <div class="grade-grid-header-title grade-name">\n      <bb-svg-icon class="visibility-icon"\n                   ng-if="!columnMetadata.visible"\n                   size="small"\n                   icon="invisible"\n                   role="img"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n      ></bb-svg-icon>\n      <span class="ellipse" title="{{::columnMetadata.columnName}}">{{::columnMetadata.columnName}}</span>\n    </div>\n  </div>\n  <div class="grade-grid-header-summary" tabindex="1" id="summary-points-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse points"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.points.plural\'}" translate-attrs-values="{count: gradeGridColumnHeaderOverallReborn.possible}"\n          bb-translate translate-values="{count: gradeGridColumnHeaderOverallReborn.possible}">components.directives.grade.grid.points.plural</span>\n    <span class="sr-only"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="1" ng-if="columnMetadata.isCalculated()" id="summary-info-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse items-count"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}" translate-attrs-values="{count: columnMetadata.itemsCount}"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n</div>\n'},"8sWK":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-groups",use:"icon-small-groups-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-groups"><path d="M12 15s-1-2-4-2M4 15s1-2 4-2M8 13c1.6569 0 3-1.3431 3-3S9.6569 7 8 7s-3 1.3431-3 3 1.3431 3 3 3zM12 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM1 7s1-2 3-2 3 2 3 2M9 7s1-2 3-2 3 2 3 2M4 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"8wib":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-settings",use:"icon-medium-settings-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-settings"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4277 6.2062l-2.779.674a8.3399 8.3399 0 00-1.7651-1.7008l.5771-2.8038a.4939.4939 0 00-.3024-.5594l-1.9855-.7817a.4933.4933 0 00-.6028.2026l-1.4904 2.444a8.2935 8.2935 0 00-2.4509.0405L9.0563 1.333a.4956.4956 0 00-.6098-.1818l-1.9568.8509a.4934.4934 0 00-.2827.5703l.674 2.778a8.3417 8.3417 0 00-1.7018 1.7651l-2.8038-.5761a.4946.4946 0 00-.5594.3024l-.7817 1.9855a.495.495 0 00.2026.6028l2.444 1.4894a8.3611 8.3611 0 00.0406 2.4509l-2.3887 1.5734a.4952.4952 0 00-.1809.6098l.851 1.9568a.4938.4938 0 00.5692.2827l2.779-.6741a8.3178 8.3178 0 001.7652 1.7019l-.5772 2.8028a.4936.4936 0 00.3034.5594l1.9845.7827a.4946.4946 0 00.6029-.2026l1.4903-2.4441a8.3594 8.3594 0 002.451-.0405l1.5724 2.3877a.4943.4943 0 00.6097.1819l1.9569-.8509a.4953.4953 0 00.2836-.5703l-.674-2.7791a8.3321 8.3321 0 001.7008-1.7641l2.8038.5772a.4948.4948 0 00.5594-.3034l.7817-1.9855a.4938.4938 0 00-.2026-.6029l-2.444-1.4893a8.298 8.298 0 00-.0405-2.451l2.3887-1.5733a.4936.4936 0 00.1808-.6098l-.8509-1.9559a.4944.4944 0 00-.5693-.2836z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16c-2.2057 0-4-1.7943-4-4s1.7943-4 4-4 4 1.7943 4 4-1.7943 4-4 4z" stroke-width="2" /></symbol>'});s.add(o);e.exports=o},"94SL":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("o5Lu"),s=n("pjml"),o=function(){function e(e,t,n,i){this.contentData=e,this.context=t,this.grade=n,this.schemaService=i,this.currentAttempt=e.groupAttempt||e.attempt,this.dueDate=e.gradingColumn.dueDate,this.highestPossibleScore=e.gradingColumn.possible,this.setAttemptCountsAndDate()}return Object.defineProperty(e.prototype,"unsubmittedAttemptsLeft",{get:function(){return this.contentData.gradeDetail?(this.contentData.courseContent.isGroupContent?e=!this.currentAttempt||this.currentAttempt.isInProgress()?1:0:(e=this.contentData.gradeDetail.attemptsLeft,this.contentData.attempt&&this.currentAttempt&&this.currentAttempt.isInProgress()&&e++),e):this.contentData.gradingColumn.multipleAttempts;var e},enumerable:!0,configurable:!0}),e.prototype.isUnlimitedAttempts=function(){return this.contentData.gradingColumn.isUnlimitedAttempts()},Object.defineProperty(e.prototype,"isOverdue",{get:function(){return this.dueDate&&this.dueDate.getTime()-this.context.getServerTime().getTime()<0&&!this.contentData.courseContent.hasDueDateException()},enumerable:!0,configurable:!0}),e.prototype.isRubricAssociated=function(){return this.contentData.gradingColumn.hasRubricAssociation()},Object.defineProperty(e.prototype,"rubric",{get:function(){return this.contentData.gradingColumn.getAssociatedRubric()},enumerable:!0,configurable:!0}),e.prototype.isRubricScoreOverridden=function(){return this.contentData.gradeDetail&&this.contentData.gradeDetail.isOverrideGrade()},Object.defineProperty(e.prototype,"rubricViewIsVisible",{get:function(){return this.isRubricAssociated()&&!this.rubricEvaluationIsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rubricEvaluationIsVisible",{get:function(){return this.isRubricAssociated()&&!this.isRubricScoreOverridden()&&angular.isDefined(this.currentAttempt)&&this.currentAttempt.isCompleted()&&angular.isDefined(this.currentAttempt.rubricEvaluation)},enumerable:!0,configurable:!0}),e.prototype.setAttemptCountsAndDate=function(){var e=this;this.contentData.gradeDetail?this.contentData.gradingColumn.grades.$buildRaw(this.contentData.gradeDetail).attempts.$refresh({fields:"id,status,attemptDate"}).$then((function(t){e.attemptCount=t.length,e.attemptCountSubmitted=t.getNumAttemptsSubmitted(),e.attemptCountSubmittedLate=t.getNumAttemptsSubmittedLate(e.dueDate);var n=s.F.AttemptAggregationModel.parseModel(e.contentData.gradingColumn&&e.contentData.gradingColumn.aggregationModel),o=i.d.getDefaultAttemptIdToLoad(n,e.contentData.gradeDetail),a=t.find((function(e){return e.id===o}));e.aggregationModelRelevantAttemptDate=a&&a.attemptDate})):this.attemptCount=0},Object.defineProperty(e.prototype,"attemptsSubmittedDescriptionKey",{get:function(){return"course.content.assessment.overview.attemptsSubmitted.status."+(this.isOverdue?"late":"onTime")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attemptsRemainingDescriptionKey",{get:function(){return"course.content.assessment.overview.attemptsRemaining."+(this.isUnlimitedAttempts()?"unlimited":"plural")},enumerable:!0,configurable:!0}),e.prototype.showAttemptDescription=function(){return this.contentData.gradingColumn&&angular.isDefined(this.attemptCount)},e.prototype.showAttemptsSubmittedDescription=function(){return this.contentData.gradingColumn&&this.contentData.gradingColumn.isMultipleAttempts()&&(this.currentAttempt&&this.currentAttempt.isSubmitted()||this.attemptCount>1)},e}()},"9Fiv":function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var i=n("gK/k"),s=n("dF44"),o=n("lEL+"),a=n("0JpG"),r=n("X/qj"),c=n("+4Px"),l=n("5Dl8"),d=n("yC9S"),u=n("5iHu"),p=n("nsO7"),m=n("s52B"),h="rbGridContainer",b=function(){function e(e,t,n,i,s,o){this.position=e,this.columns=t,this.grid=n,this.timeout=i,this.bbLocalize=s,this.gradebookPermissionService=o,this.renderedRows=[],this.nextRenderedRows=[],this.renderedColumns=[],this.nextRenderedColumns=[],this.scrollTop=0,this.scrollLeft=0,this.id=n.id+"-container-"+e,this.rows=n.options.rows,this.totalWidth=this.initColumnsPosition(t,!1),this.totalHeight=n.options.rowHeight*n.options.rows.length,this.isMain="center"===e,this.headerBorder=n.options.headerBorder,this.rowBorder=n.options.rowBorder,this.callbacks=n.options.callbacks}return e.prototype.initColumnsPosition=function(e,t){void 0===e&&(e=this.columns),void 0===t&&(t=!0);for(var n=[],i=0,s=0;s<e.length;s++){var o=e[s];o.accumulativeWidth=i,t&&n.push(".rb-column-position-"+o.id+" {left: "+Object(l.b)(i)+";}"),i+=o.columnWidth}if(t){u("style#"+this.id).remove();var a=u('<style scoped id="'+this.id+'"></style>');a.text(n.join("\n")),this.grid.$element.prepend(a)}return i},e.prototype.getContainerStyle=function(){var e,t=this.grid.containers.left,n=this.grid.containers.right;return this.isMain?{left:Object(l.b)(t&&t.totalWidth),right:Object(l.b)(n&&n.totalWidth+this.grid.scrollbarWidth)}:((e={})[this.position]="0",e)},e.prototype.getHeaderCanvasStyle=function(){return{width:Object(l.b)(this.totalWidth),height:Object(l.b)(this.grid.options.headerHeight)}},e.prototype.getBodyCanvasStyle=function(){return{width:Object(l.b)(this.totalWidth),height:Object(l.b)(this.totalHeight)}},e.prototype.getBodyStyle=function(){return{"overflow-x":this.hasHScrollbar?"scroll":"hidden","overflow-y":this.hasVScrollbar?"scroll":"hidden"}},e.prototype.init=function(e,t){var n=this;this.scope=e,this.element=t,t.addClass(this.id),this.header=this.element.find(".rb-grid-header"),this.body=this.element.find(".rb-grid-body"),this.timeout((function(){n.canAddColumn()&&(n.columnAdder=new g(n.element.find(".rb-add-column"),n)),n.adjustRows(),n.adjustColumns(),n.addEventListeners()}),this.scope)},e.prototype.toggleFirstAddColumnPlaceholder=function(e){this.element.find(".rb-add-column-placeholder.first")[e?"show":"hide"]()},e.prototype.resetColumns=function(e){this.columns=e,this.totalWidth=this.initColumnsPosition(e,!1),this.adjustColumns()},e.prototype.resetRows=function(e){this.rows=e,this.totalHeight=this.grid.options.rowHeight*this.rows.length,this.adjustRows()},e.prototype.addEventListeners=function(){this.element.on("wheel",this.handleWheel.bind(this)),this.body.on("scroll",this.handleScroll.bind(this))},e.prototype.handleScroll=function(){var e=this.body.scrollLeft(),t=this.body.scrollTop();this.grid.scrollContainers({scrollLeft:e!==this.scrollLeft?e:-1,scrollTop:t!==this.scrollTop?t:-1})},e.prototype.handleWheel=function(e){if(this.body[0].scrollWidth!==this.body[0].clientWidth||this.body[0].scrollHeight!==this.body[0].clientHeight){var t=e.originalEvent,n=t.deltaX,i=t.deltaY;if(1===t.deltaMode){var s=parseInt(this.element.css("font-size"),10);n*=s,i*=s}if(!(this.atTop()&&i<0||this.atBottom()&&i>0||this.atLeft()&&n<0||this.atRight()&&n>0||0===n&&0===i)){e.preventDefault(),e.stopPropagation();var o=-1,a=-1;0!==i&&(o=Math.max(0,Math.min(this.scrollTop+i,this.getMaxScrollTop()))),0!==n&&(a=Math.max(0,Math.min(this.scrollLeft+n,this.getMaxScrollLeft()))),this.grid.scrollContainers({scrollTop:o,scrollLeft:a})}}},e.prototype.scrollHorizontally=function(e){this.body.scrollLeft(e),this.header.scrollLeft(e),this.scrollLeft=e,this.adjustColumns()},e.prototype.scrollVertically=function(e){this.body.scrollTop(e),this.scrollTop=e,this.adjustRows()},e.prototype.canAddColumn=function(){return this.isMain&&this.grid.canAddColumn()&&this.gradebookPermissionService.canModify()},e.prototype.getVisibleColRange=function(){for(var e=0,t=this.columns.length,n=0,i=0;n<this.columns.length;n++)if((i+=this.columns[n].columnWidth)>=this.scrollLeft){e=n;break}for(n=0,i=0;n<this.columns.length;n++)if((i+=this.columns[n].columnWidth)>=this.scrollLeft+this.body[0].clientWidth){t=n+1+s.a;break}return{start:e,end:t}},e.prototype.calculateNextRenderedColumns=function(){var e=this.getVisibleColRange(),t=e.start,n=e.end;this.nextRenderedColumns=this.columns.slice(t,n)},e.prototype.adjustColumns=function(){this.calculateNextRenderedColumns(),this.grid.debounceRefresh()},e.prototype.getVisibleRowRange=function(){var e=Math.ceil(this.body[0].clientHeight/this.grid.options.rowHeight)+s.e,t=Math.floor(this.scrollTop/this.grid.options.rowHeight);return{start:t,end:t+e}},e.prototype.calculateNextRenderedRows=function(){var e=this.getVisibleRowRange(),t=e.start,n=e.end;this.nextRenderedRows=this.rows.slice(t,n)},e.prototype.isRowOutOfBound=function(e){var t=this.getVisibleRowRange(),n=t.start,i=t.end;return{top:e<=n,bottom:e+s.e>=i}},e.prototype.isColOutOfBound=function(e){var t=this.getVisibleColRange(),n=t.start,i=t.end;return{left:e<=n,right:e+s.a+1>=i}},e.prototype.adjustRows=function(){this.calculateNextRenderedRows(),this.grid.debounceRefresh()},e.prototype.applyData=function(){this.renderedRows=this.nextRenderedRows,this.renderedColumns=this.nextRenderedColumns},e.prototype.getMaxScrollTop=function(){return this.totalHeight-this.body[0].clientHeight},e.prototype.getMaxScrollLeft=function(){return this.totalWidth-this.body[0].clientWidth},e.prototype.getTopRowScrollTop=function(e){return this.grid.options.rowHeight*e},e.prototype.getBottomRowScrollTop=function(e){return Math.max(0,this.grid.options.rowHeight*(e+1)-this.body[0].clientHeight)},e.prototype.getLeftColScrollLeft=function(e){return e.accumulativeWidth},e.prototype.getRightColScrollLeft=function(e){return Math.max(0,e.accumulativeWidth+e.columnWidth-this.body[0].clientWidth)},e.prototype.atTop=function(){return 0===this.scrollTop},e.prototype.atBottom=function(){return this.scrollTop===this.getMaxScrollTop()},e.prototype.atLeft=function(){return!this.isMain||0===this.scrollLeft},e.prototype.atRight=function(){return!this.isMain||this.scrollLeft===this.getMaxScrollLeft()},e.$inject=["position","columns","grid",o.b,a.serviceName,r.b],e}(),g=function(){function e(e,t){var n=this;this.element=e,this.container=t,this.grid=t.grid,this.scope=t.scope,this.bbLocalize=t.bbLocalize,e.css("height","calc(100% - "+Object(l.b)(this.grid.scrollbarWidth)),this.button=e.find(".button"),this.firstPlaceholder=this.container.element.find(".rb-add-column-placeholder.first"),this.button.on("keydown",(function(e){var t;n.grid.previousCell.tabPressed=!1;var i=n.container.currentColumn;if(c.z(e)||e.keyCode===c.j||e.keyCode===c.g){var o=i||n.grid.containers.left.columns.slice(-1)[0],a=n.container.columns.indexOf(o);a>=0&&n.container.isColOutOfBound(a).left?n.grid.scroll({scrollLeft:n.container.getLeftColScrollLeft(o)},(function(){n.grid.$scope.$broadcast(s.b.FOCUS_CELL,t,o)})):n.grid.$scope.$broadcast(s.b.FOCUS_CELL,t,o)}else{if(!c.A(e)&&e.keyCode!==c.s)return;var r=n.grid.getFocusableColumns(),l=NaN,d=NaN;i?(i=r[(r.indexOf(i)+1)%r.length])===r[0]&&(t=n.container.rows[0],d=0):i=n.container.columns[0];var u=n.container.columns.indexOf(i);n.container.isColOutOfBound(u).right&&(l=n.container.getRightColScrollLeft(i)),p.isNaN(l)&&p.isNaN(d)?n.grid.$scope.$broadcast(s.b.FOCUS_CELL,t,i):n.grid.scroll({scrollTop:d,scrollLeft:l},(function(){return n.grid.$scope.$broadcast(s.b.FOCUS_CELL,t,i)}))}n.hide(),e.preventDefault(),e.stopPropagation()})),d.b.OnWindow("click",(function(e){u(e.target).closest(n.button).length||(n.button.removeClass("active"),n.hide())}),this.container.scope),this.container.scope.$on(s.b.SCROLL_H,(function(){n.hide()})),this.container.scope.$on(s.b.SCROLL_V,(function(){n.button.hasClass("active")&&n.hide()}))}return e.prototype.enter=function(e,t){this.button.hasClass("active")||this.show(u(e.target),t)},e.prototype.leave=function(){this.button.hasClass("active")||this.hide()},e.prototype.show=function(e,t){void 0===e&&(e=this.firstPlaceholder),this.element.show(),this.element.offset(e.offset()),this.element.css("opacity","1"),this.container.currentColumn=t||this.grid.containers.left.columns.slice(-1)[0],this.addAriaLabel()},e.prototype.hide=function(){this.element.hide(),this.element.css("opacity","0")},e.prototype.onClick=function(e){this.button.toggleClass("active"),this.button.hasClass("active")&&this.container.callbacks.column(e,this.container.currentColumn)},e.prototype.addAriaLabel=function(){var e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.lastAddButtonAriaLabel",params:{columnName:this.container.currentColumn.data.columnName},noWrap:!0,noEscape:!0});this.button.attr("aria-label",e)},e}(),v=function(){},f=function(){function e(e){this.$injector=e,this.replace=!0,this.restrict="A",this.require=["^"+i.a,h],this.template=m,this.controller=v,this.scope=!0,this.link=function(e,t,n,i){var s=i[0],o=i[1];s.initPromise.then((function(){var i=s.containers[n[h]];i.init(e,t),e.container=i,e.grid=s,o.container=i}))}}return e.$inject=["$injector"],e}()},"9G/E":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-profile-user",use:"icon-medium-profile-user-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-profile-user"><path d="M12 13c3.3137 0 6-2.6863 6-6s-2.6863-6-6-6-6 2.6863-6 6 2.6863 6 6 6zM23 23c-.5-5-4.5-10-11-10S1.5 18 1 23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"9KIl":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var i=n("wHJ2"),s=n("nsO7"),o=n("X/qj"),a=n("LN5R"),r=n("o5Lu"),c=n("pjml"),l=n("lEL+"),d=n("0JpG"),u=n("T1pL"),p=n("dF44"),m=n("qH3X"),h=n("TmUJ"),b=n("+4Px"),g=n("wJOA"),v=n("mWXo"),f="ultra.components.directives.gradeGridColumnOverallReborn",y=function(){function t(e,t,n,i,o,a,r,c,l,d,u,h,b){var g=this;this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=o,this.gradebookPermissionService=a,this.$compile=r,this.scope=c,this.element=l,this.attrs=d,this.gradeGridRebornController=u,this.timeout=h,this.bbLocalize=b,this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),c.$watchGroup(["row","col"],(function(e){g.changeRecord(e)})),c.$on(m.a.REFRESH,(function(e,t){var n=t.rowId,i=t.columnIds;s.forEach(i,(function(e){g.scope.row.id===n&&g.cell.column.id===e&&(g.initializeCell(n,e),g.initializeUI(),g.initializeGradeDetail(g.cell.data),g.scope.$broadcast(m.a.REFRESH_OVERALL_EDITOR))}))})),c.$on(p.b.ENTER_CELL,(function(e,t){return t.find(".grade-grid-cell").click()})),c.$on("$destroy",(function(){}))}return t.prototype.changeRecord=function(e){var t=e[0],n=e[1];this.initializeCell(t.id,n.id),this.initializeState(),this.initializeUI(),this.initializeGradeDetail(this.cell.data)},t.prototype.initializeEventHandler=function(){var e=this;this.element.parents(".rb-cell").focusin((function(){e.focusin()})).focusout((function(){e.focusout()})),this.element.children(".grade-grid-cell").mousedown((function(){return e.mousedown()}))},t.prototype.focusin=function(){this.rootScope.$broadcast(m.a.FOCUSIN_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.focusout=function(){this.rootScope.$broadcast(m.a.FOCUSOUT_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.initializeUI=function(){var e=this.element.children(".grade-grid-cell");this.isLoading||this.isEditing?e.children(".score").hide():e.children(".overall-display-grade").show()},t.prototype.initializeGradeDetail=function(e){this._gradeDetail=s.isUndefined(e)||s.isNull(e)?void 0:this.gradeService.gradeDetailToPercentage(e.grade);var t=this.extractGradeFromGradeDetail(this.gradeDetail);this.setUpScreenReader(this.cell,t)},t.prototype.extractGradeFromGradeDetail=function(e){return e&&e.displayGrade&&e.displayGrade.perfCode&&e.displayGrade.perfCode.code||e&&e.getScore()},Object.defineProperty(t.prototype,"disabledEditor",{get:function(){return!this.canBeEdited&&s.isEmpty(this.extractGradeFromGradeDetail(this.gradeDetail))},enumerable:!0,configurable:!0}),t.prototype.initializeState=function(){this._isEditing=!1},t.prototype.initializeCell=function(e,t){this.cell=this.gridData.getCell(e,t),this._oldScore=this._score=void 0},Object.defineProperty(t.prototype,"isReady",{get:function(){return!s.isUndefined(this.cell)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return!this.isReady||!this.cell.isLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){if(this.isReady){if(s.isUndefined(this._score)){var e=this.gradeDetail&&this.gradeDetail.getScore();e=e?this.bbLocalize.formatNumberSync(Math.round(100*parseFloat(e))/100,this.scope,{maximumFractionDigits:r.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL}):e,s.isEmpty(e)&&this.gradeDetail&&!s.isUndefined(this.gradeDetail.displayGrade.perfCode)&&(e=this.gradeDetail.displayGrade.perfCode.code),this._oldScore=this._score=e}return this._score}},set:function(e){this._score=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadonly",{get:function(){if(this.isReady)return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditing",{get:function(){return this._isEditing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gradeDetail",{get:function(){return this._gradeDetail},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointsPossible",{get:function(){return this.gradeDetail?this._gradeDetail.pointsPossible:100},enumerable:!0,configurable:!0}),t.prototype.insertCellEditor=function(){var e=this;this.editorScope=this.scope.$new(!1,this.scope),this.$compile(t.OVERALL_EDITOR_TEMPLATE)(this.editorScope,(function(t){return e.element.children(".grade-grid-body-cell").append(t)})),this.timeout((function(){e.addInputKeyEventListeners();var t=e.scope.$on(p.b.SCROLL_H,(function(){e.closeEditor(),t(),n(),e.scope.$apply()})),n=e.scope.$on(p.b.SCROLL_V,(function(){e.closeEditor(),n(),t(),e.scope.$apply()}))}),this.scope,200)},t.prototype.removeCellEditor=function(){this.element.find("#bb-grade-grid-overall-editor-reborn").remove()},t.prototype.gotoNextCell=function(){var e=this;this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then((function(){e.scope.$emit(p.b.ENTER_NEXT_CELL)}))},t.prototype.mousedown=function(){e(this.window).trigger("click")},t.prototype.isConfirmDialogExisting=function(){return!!e(".grade-grid-group-confirm-dialog").length},Object.defineProperty(t.prototype,"canBeEdited",{get:function(){return!this.gridData.course.isComplete()&&!s.isUndefined(this.cell)&&this.gradebookPermissionService.canOverrideGrades()},enumerable:!0,configurable:!0}),t.prototype.enterEditor=function(e){this.isConfirmDialogExisting()||!this.canBeEdited||this.isLoading||this._isEditing||(this._isEditing=!0,this.element.find(".overall-display-grade").hide(),this.insertCellEditor(),this.popupMenu(e))},t.prototype.popupMenu=function(t){var n=this,i="grade-grid-notation-menu-reborn-"+this.scope.row.id+"-"+this.scope.col.id;if((this.scope.col.gradeNotations.length||this.gradeDetail&&this.gradeDetail.displayGrade&&this.gradeDetail.displayGrade.isOverride)&&!this.gradeGridRebornController.isMenuExisting(i)){var s=e(t.target).closest(".grade-grid-cell").offset();s.top+=60;var o=this.scope.$new(!1);o.adjustPosition=function(e){var t=s.left+e.width(),i=s.top+e.height(),o=n.gradeGridRebornController.getGradeGridContainerElementRight(),a=n.gradeGridRebornController.getGradeGridContainerElementBottom();t>o&&(s.left-=t-o+Object(h.a)()),i>a&&(s.top-=e.height()+40),e.offset(s)},this.gradeGridRebornController.popupMenu(i,v,o),this.addMenuKeyEventListeners(),t.preventDefault(),t.stopPropagation()}},t.prototype.addInputKeyEventListeners=function(){var e=this;this.element.find("#bb-grade-grid-overall-editor-reborn input").on("keydown",(function(t){var n=e.gradeGridRebornController.getMenuitems();if(b.A(t))n.first().focus();else{if(!b.z(t))return;n.last().focus()}t.preventDefault(),t.stopPropagation()}))},t.prototype.addMenuKeyEventListeners=function(){var t=this;this.timeout((function(){var n=t.gradeGridRebornController.getPopupMenu();n.on("keydown",(function(i){var s=t.gradeGridRebornController.getMenuitems();if(b.A(i))(o=s.index(e(i.target))+1)<s.length?s.eq(o).focus():t.element.find(".grade-grid-cell").trigger("click",!0);else if(b.z(i)){var o;(o=s.index(e(i.target))-1)>=0?s.eq(o).focus():t.element.find(".grade-grid-cell").trigger("click",!0)}else if(b.y(i))t.scope.$emit(p.b.LEAVE_CELL);else{if(i.keyCode!==b.g)return;n.data("destroy")(),t.scope.$emit(p.b.LEAVE_CELL)}i.preventDefault(),i.stopPropagation()}))}),this.scope,0,!1)},t.prototype.onInputBlur=function(e,t){var n=this;if(!this.isLoading&&this._isEditing&&(this.closeEditor(),e)){this.score=t;var i=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],o=this.createGradeSubmission(i,this.gradeService.parseGrade(this.score,i,this.scope));if(this.score){var a=s.find(this.cell.column.gradeNotations,(function(e){return e.code===n.score}));a&&(o.perfCodeId=a.id)}this.saveGrade(o)}},t.prototype.closeEditor=function(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.element.find(".overall-display-grade").show())},t.prototype.isDirty=function(){if(s.isUndefined(this._oldScore)&&!s.isEmpty(this.score))return!0;if(!s.isUndefined(this._oldScore)){var e=this.bbLocalize.parseNumberSync(this._oldScore,this.scope),t=this.bbLocalize.parseNumberSync(this.score,this.scope);return s.isNaN(e)||s.isNaN(t)?this._oldScore!==this.score:e!==t}return!1},t.prototype.createGradeSubmission=function(e,t){var n=this.gradeService.createGradeSubmission(this.cell.column.data,t,e);return n.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),n},t.prototype.saveGrade=function(e){var t=this;if(this.isDirty()){if(s.isUndefined(e)){var n=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId];e=this.createGradeSubmission(n,this.gradeService.parseGrade(this.score,n,this.scope))}this.gradeService.saveGrade(e,this.cell.data&&this.cell.data.grade,void 0,{userId:this.cell.row.metadata.user.id}).then((function(e){return t.cell.column.data.summary.$fetch()})).then((function(){t.gridData.refreshDataCell(t.cell.row,t.cell.column),t.rootScope.$broadcast(p.b.DATA_UPDATE),t.nextDeferred&&(t.nextDeferred.resolve(),t.nextDeferred=void 0)}))}else this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)},t.prototype.undoOverride=function(){this.score="",this.saveGrade()},t.prototype.selectNotation=function(e){this.score=e.code;var t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],n=this.createGradeSubmission(t,this.score);n.perfCodeId=e.id,this.saveGrade(n)},t.prototype.setUpScreenReader=function(e,t){var n=e&&e.row&&e.row.metadata.user,i=n&&n.givenName.concat(n&&n.familyName),s=e&&e.column.data.columnName,o=!this.gridData.course.isComplete();if(t){var a=this.gradeService.getGradeToDisplay(e.data.grade.displayGrade,this.scope,this.gridData.getSchema()[e.column.data.gradingSchemaId].scaleType);this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:o?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:i,assignmentName:s,grade:a||t},noWrap:!0,noEscape:!0})}else this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:o?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:i,assignmentName:s},noWrap:!0,noEscape:!0})},t.OVERALL_EDITOR_TEMPLATE='<div bb-grade-grid-overall-editor-reborn id="bb-grade-grid-overall-editor-reborn" class="editor"></div>',t.$inject=["$rootScope","$window","$q",c.o.serviceName,r.h,o.b,"$compile","scope","element","attrs","gradeGridRebornController",l.b,d.serviceName],t}(),w=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=g,this.scope=!0,this.require="^"+a.a,this.link=function(e,n,i,s){e.gradeGridColumnOverallReborn=t.$injector.instantiate(y,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();i.module(f,[u.a]).directive("bbGradeGridColumnOverallReborn",["$injector",function(e){return e.instantiate(w)}])}).call(this,n("5iHu"))},"9Zs+":function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-calculation"\n         bb-peek-sref="gradebook-item.calculation({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addCalculation">\n        <bb-svg-icon size="small" icon="calculation"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addCalculation</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-item"\n         bb-peek-sref="grade-item.create({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addItem">\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addItem</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation" ng-if="!attendanceColumnExists && attendanceIsAvailable">\n      <a role="menuitem"\n         bb-peek-sref="attendance"\n         analytics-id="components.directives.grade.grid.addAttendance">\n        <bb-svg-icon size="small" icon="attendance" ></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addAttendance</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>'},"9ah5":function(e,t){e.exports='<div class="tests assessment-overview" ng-class="{\'late-attempt\': assessmentOverview.isOverdue }" bb-group-attempt-activities-peek="assessmentOverview.currentAttempt">\n  <div class="panel-wrap panel-wrap-flex"\n       ng-class="{\n         \'over-close-button\': assessmentOverview.hideOverview,\n         \'has-footer\': assessmentOverview.hasFooter,\n         \'has-footer-password\': assessmentOverview.isAssessmentPasswordProtected,\n         \'has-footer-error\': assessmentOverview.passwordErrorMessageKey\n        }">\n    <header class="black-panel-header" ng-show="!assessmentOverview.hideOverview">\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background" type="button" analytics-id="course.content.assessment.overview.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>course.content.assessment.overview.menu</span>\n        </button>\n        <h1 class="panel-title" bb-translate translate-values="{\'title\': assessmentOverview.customCategory}">{{::assessmentOverview.panelTitle}}</h1>\n        <a class="standard-button dark-background" ui-sref-active="active"\n           ng-if="assessmentOverview.content.ui.hasConversationAttached && assessmentOverview.content.attachedForumLink"\n           bb-peek-sref="conversations({courseId: assessmentOverview.content.courseId, contentId: assessmentOverview.content.id})"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.header.openAria\'}" analytics-id="assessmentOverview.content.id.link">\n          <bb-svg-icon size="small" icon="conversation" ng-class="{\'has-indicator\': assessmentOverview.hasClassIndicator}"></bb-svg-icon>\n        </a>\n      </div>\n    </header>\n    <header class="row panel-header show-for-small-only">\n      <div class="goal-small-panel" ng-if="assessmentOverview.showGoalDetails">\n        <button class="button super-clear icon" ng-click="assessmentOverview.hideGoals()" analytics-id="assessmentOverview.hideGoals.button">\n          <bb-svg-icon size="small" icon="arrow-left"></bb-svg-icon>\n          <span class="sr-only" bb-translate>course.goal-alignment.goal.sr-only.closeGoals</span>\n        </button>\n        <div class="goal-head">\n          <span class="goal-title" bb-translate>course.goal-alignment.goal.header</span>\n        </div>\n      </div>\n      <div class="js-rubric-small-header slide-menu-small-panel" ng-if="assessmentOverview.showRubricDetails">\n        <div class="slide-menu-header">\n          <button class="button super-clear icon"  ng-click="assessmentOverview.hideRubricPanel()" analytics-id="assessmentOverview.hideRubricPanel.button">\n            <bb-svg-icon size="small" icon="arrow-left"></bb-svg-icon>\n            <span class="sr-only" bb-translate>global.close</span>\n          </button>\n          <span class="slide-menu-title" bb-translate>course.content.assessment.overview.rubricPanelHeader</span>\n        </div>\n      </div>\n    </header>\n    <div class="spinner bb-secondary-color-2" ng-if="assessmentOverview.isLoading" aria-hidden="true"></div>\n    <section class="panel-content has-slide-up-section" ng-class="{\'section-slide\': assessmentOverview.hideOverview}" bb-first-time-container>\n      <bb-panel-header\n        ng-class="{\'hide-header-small\': assessmentOverview.hideOverview, \'has-indicator\': assessmentOverview.hasClassIndicator}"\n        class="bb-panel-header"\n        show-course="true"\n        show-conversations="true"\n        content="assessmentOverview.content"\n        panel-title="assessmentOverview.content.title"\n        can-edit="false">\n      </bb-panel-header>\n      <bb-content-navigator bb-feature-toggle="learningModule" remove-from-dom="true"\n        content="assessmentOverview.content"\n      ></bb-content-navigator>\n      \x3c!--View class conversation FTUE--\x3e\n      <div ng-if="assessmentOverview.content.ui.hasConversationAttached && assessmentOverview.content.attachedForumLink" class="guidance-wrapper class-conversation-ftue">\n        <bb-guidance component-key="components.features.course.content.assessment.ftue.class-conversation" class="guidance-element-overlay">\n          <span bb-translate="{{::assessmentOverview.classConversationFtueKey}}" translate-values="{title: assessmentOverview.customCategory}"></span>\n        </bb-guidance>\n      </div>\n      <div class="panel-content-flex panel-content-inner assessment-overview-panel">\n        <div class="panel-content-info assessment-summary" ng-show="!assessmentOverview.hideOverview">\n          <bb-group-student-enrollment-asmt-banner  ng-if="assessmentOverview.content.userNeedsToSelfEnrollInGroup()"\n                                                    content="assessmentOverview.content"\n                                                    from-view="assessment.overview"></bb-group-student-enrollment-asmt-banner>\n          <div class="row collapse">\n            <div class="small-10 columns">\n              <h2 bb-translate>course.content.assessment.overview.detailsHeader</h2>\n            </div>\n          </div>\n          <ul class="row" tabindex="-1" ng-show="!assessmentOverview.isLoading">\n            \x3c!--Due date--\x3e\n            <li class="js-due-date">\n              <bb-svg-icon size="medium" aria-hidden="true" icon="calendar" ng-class="{\'alert\': assessmentOverview.showPastDueForDueDate()}"></bb-svg-icon>\n              <div ng-switch="assessmentOverview.dueDate != null">\n                <span class="settings-label" bb-translate>course.content.assessment.overview.dueDate</span>\n                <span class="settings-link" ng-switch-when="true">\n                  <div class="alert vertical-bar" ng-if="assessmentOverview.showPastDueForDueDate()">\n                    <span class="alert-text" bb-translate ng-if="!assessmentOverview.isAssessmentSubmissionComplete">course.content.assessment.overview.pastDue</span>\n                    <span class="alert-text" bb-translate ng-if="assessmentOverview.isAssessmentSubmissionComplete">course.content.assessment.overview.late</span>\n                  </div>\n                  <bb-datetime value="::assessmentOverview.dueDate" format="Short"></bb-datetime>\n                </span>\n                <span class="settings-link" ng-switch-default bb-translate>course.content.assessment.overview.noDueDate</span>\n              </div>\n            </li>\n            \x3c!--Time Limit --\x3e\n            <li ng-if="assessmentOverview.hasTimeLimit" class="js-time-limit-type">\n              <bb-svg-icon size="medium" icon="time-limit"></bb-svg-icon>\n              <div>\n                <span class="settings-label" bb-translate>course.content.assessment.test.settings.timeLimit.label</span>\n                <span class="settings-link">\n                  <span class="js-time-limit-numerical">{{assessmentOverview.displayedTimeLimitSeconds | timeSpan: "m": this}}</span>\n                  <bb-translate ng-if="!assessmentOverview.canContinue">course.content.assessment.test.settings.timeLimit.autoSubmission</bb-translate>\n                </span>\n              </div>\n            </li>\n            \x3c!--Rubric--\x3e\n            <li class="js-rubric-overview" ng-if="assessmentOverview.rubricEvaluationIsVisible || assessmentOverview.rubricViewIsVisible">\n              <bb-svg-icon size="medium" icon="rubric"></bb-svg-icon>\n              <div class="tool-text">\n                <span class="settings-label" bb-translate>course.content.assessment.overview.rubric</span>\n                <span class="settings-link">\n                  <button class="button button--text" ng-click="assessmentOverview.showRubricPanel()" bb-click-focus=".rubric-evaluation-subpanel" bb-translate analytics-id="course.content.assessment.overview.gradedWithRubric">course.content.assessment.overview.gradedWithRubric</button>\n                </span>\n              </div>\n            </li>\n            \x3c!--Goals--\x3e\n            <li class="goal-alignment-li" ng-if="assessmentOverview.alignedGoalsCount">\n              <div class="goal-icon" bb-translate-attrs="{\'alt\': \'course.goal-alignment.goal.sr-only.goalImage\'}">\n                <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n              </div>\n              <div class="goal-text">\n                <span class="settings-label" bb-translate>course.goal-alignment.goal.header</span>\n                <span class="settings-link">\n                  <a href="javascript:void(0);" role="button" tabindex="{{assessmentOverview.hideOverview ? -1 : 0}}" class="js-view-goals"\n                     ng-click="assessmentOverview.showGoals()" bb-translate\n                     translate-values="{number: assessmentOverview.alignedGoalsCount}" analytics-id="course.goal-alignment.goal.alignedGoals.plural">\n                    course.goal-alignment.goal.alignedGoals.plural\n                  </a>\n                </span>\n              </div>\n            </li>\n            \x3c!--Number of attempts remaining and submitted--\x3e\n            <li>\n              <bb-svg-icon size="medium" icon="attempts"></bb-svg-icon>\n              <div ng-if="assessmentOverview.showAttemptDescription()">\n                <span class="settings-label" bb-translate>course.content.assessment.overview.attempts</span>\n                <span class="settings-link">\n                  <span ng-class="{\'vertical-bar\' : assessmentOverview.showAttemptsSubmittedDescription() }"\n                    bb-translate translate-values="{count: assessmentOverview.unsubmittedAttemptsLeft}">\n                    {{::assessmentOverview.attemptsRemainingDescriptionKey}}\n                  </span>\n                  <span ng-if="::assessmentOverview.showAttemptsSubmittedDescription()">\n                    <a ng-if="!assessmentOverview.detailsView" href="javascript:void(0);" ng-click="assessmentOverview.openAttemptReview()"\n                      bb-translate translate-values="{submitted: assessmentOverview.attemptCountSubmitted, late: assessmentOverview.attemptCountSubmittedLate}" analytics-id="{{::assessmentOverview.attemptsSubmittedDescriptionKey}}">\n                      {{::assessmentOverview.attemptsSubmittedDescriptionKey}}\n                    </a>\n                    <span ng-if="assessmentOverview.detailsView" bb-translate translate-values="{submitted: assessmentAttempt.attemptCountSubmitted, late: assessmentAttempt.attemptCountSubmittedLate}">\n                      {{::assessmentAttempt.attemptsSubmittedDescriptionKey}}\n                    </span>\n                  </span>\n                </span>\n              </div>\n            </li>\n            \x3c!--Peer review--\x3e\n            <li class="peer-grading-li" bb-feature-toggle="peerAssessmentFeatureFlag" ng-if="assessmentOverview.isPeerGradingConfigured" remove-from-dom="true">\n              <bb-svg-icon ng-class="{\'alert\': assessmentOverview.isPeerReviewsLate()}" size="medium" icon="peer-review"></bb-svg-icon>\n              <div ng-if="assessmentOverview.showAttemptDescription()">\n                <span class="settings-label" bb-translate>course.content.assessment.test.settings.peerGrading.summary.label</span>\n                <span class="settings-link">\n                  <span class="peer-reviews-left vertical-bar" bb-translate translate-values="{ numOfPeersToReview: assessmentOverview.numOfPeerReviewsLeft }">\n                    course.content.assessment.test.settings.peerGrading.summary.peerReviewsLeft\n                  </span>\n                  <span class="alert" ng-if="assessmentOverview.isPeerReviewsLate()">\n                    <span class="alert-text" ng-if="!assessmentOverview.arePeerReviewsComplete()" bb-translate>course.content.assessment.overview.pastDue</span>\n                    <span class="alert-text" ng-if="assessmentOverview.arePeerReviewsComplete()" bb-translate translate-values="{numReviewsLate: assessmentOverview.numberOfLatePeerReviews()}">course.content.assessment.overview.assignedPeerReviews.numberOfReviewsLate</span>\n                  </span>\n                  <span ng-if="!assessmentOverview.isPeerReviewsLate()" class="peer-review-due-date" bb-translate translate-values="{ datetime: assessmentOverview.peerReviewDueDate }">\n                    course.content.assessment.test.settings.peerGrading.summary.reviewDueDate\n                  </span>\n                </span>\n                <span ng-if="assessmentOverview.isPeerReviewsLate()" class="peer-review-due-date" bb-translate translate-values="{ datetime: assessmentOverview.peerReviewDueDate }">\n                  course.content.assessment.test.settings.peerGrading.summary.reviewDueDate\n                </span>\n              </div>\n            </li>\n            \x3c!--Group information--\x3e\n            <li ng-if="assessmentOverview.content.isGroupContent">\n              <bb-svg-icon size="medium" icon="groups"></bb-svg-icon>\n              <div ng-if="assessmentOverview.content.userNeedsToSelfEnrollInGroup()">\n                <span class="settings-label" bb-translate="{{::assessmentOverview.groupAssessmentKey}}" translate-values="{\'title\': assessmentOverview.customCategory}"></span>\n                <bb-group-student-enrollment content="assessmentOverview.content" from-view="assessment.overview"></bb-group-student-enrollment>\n              </div>\n              <div ng-if="!assessmentOverview.content.userNeedsToSelfEnrollInGroup()">\n                <span class="settings-label" bb-translate="{{::assessmentOverview.groupAssessmentKey}}" translate-values="{\'title\': assessmentOverview.customCategory}"></span>\n                <span class="settings-link ellipsis" title="{{assessmentOverview.content.assignedGroups[0].groupTitle}}">{{assessmentOverview.content.assignedGroups[0].groupTitle}}</span>\n              </div>\n            </li>\n            \x3c!--Safe Assign--\x3e\n            <li ng-if="assessmentOverview.originalityReportService.isOriginalityReportEnabled() &&\n                       assessmentOverview.originalityReportService.isSafeAssignActiveOriginalityProvider()">\n              <bb-svg-icon size="medium" icon="safe-assign"></bb-svg-icon>\n              <div>\n                <span class="settings-label" bb-translate>course.content.originalityReport.settings.label</span>\n                <span class="settings-link" ng-if="assessmentOverview.detailsView">\n                  \x3c!-- htmlhint:analytics-id:disable --\x3e\n                  <button class="button button--text"\n                          ng-click="assessmentOverview.openSafeAssign()"\n                          analytics-id="course.content.assessment.test.settings.safeAssign.enabled">\n                            {{assessmentOverview.originalityReportService.getOriginalityReportLinkText(false)}}\n                  </button>\n                  \x3c!-- htmlhint:analytics-id:enable --\x3e\n                </span>\n                <span class="settings-link originality-enabled" ng-if="!assessmentOverview.detailsView && (!assessmentOverview.content.canStudentViewReports() || (!assessmentOverview.showScoreCard && !assessmentOverview.attemptCountSubmitted))">\n                  <span class="js-safeAssign-enabled">\n                    {{assessmentOverview.originalityReportService.getOriginalityReportLinkText(false)}}\n                  </span>\n                </span>\n                <span class="settings-link js-view-originality-report" ng-if="!assessmentOverview.detailsView && assessmentOverview.content.canStudentViewReports() && (assessmentOverview.showScoreCard || assessmentOverview.attemptCountSubmitted)">\n                  <ng-switch on="assessmentOverview.originalityReportAvailable">\n                    <span ng-switch-when="false" class="safe-assign-info" bb-translate="course.content.originalityReport.settings.originalityInProgress"></span>\n                    <span ng-switch-when="true">\n                      <button class="button--text"\n                                ng-click="assessmentOverview.openAttemptReview(true)"\n                                analytics-id="course.content.assessment.test.settings.safeAssign.available"\n                                bb-translate>\n                                course.content.originalityReport.settings.originalityAvailable\n                      </button>\n                    </span>\n                    <span ng-switch-when="null">\n                      {{assessmentOverview.originalityReportService.getOriginalityReportLinkText(false)}}\n                    </span>\n                    <span ng-switch-default class="safe-assign-info" bb-translate="course.content.originalityReport.settings.loadingLabel"></span>\n                  </ng-switch>\n                </span>\n              </div>\n            </li>\n            \x3c!--Originality Integration--\x3e\n            <li ng-if="assessmentOverview.originalityReportService.isOriginalityReportEnabled() &&\n                       assessmentOverview.originalityReportService.isIntegrationActiveOriginalityProvider()">\n              <bb-svg-icon size="medium" icon="safe-assign"></bb-svg-icon>\n              <div>\n                <span class="settings-label" bb-translate>course.content.originalityReport.settings.label</span>\n                <ng-switch on="!!assessmentOverview.attemptCountSubmitted">\n                  <span ng-switch-when="false" class="settings-link">\n                    <span class="js-safeAssign-enabled">\n                      {{assessmentOverview.originalityReportService.getOriginalityReportLinkText(false)}}\n                    </span>\n                  </span>\n                  <span ng-switch-when="true">\n                    <button class="button--text"\n                          ng-click="assessmentOverview.openAttemptReview(true)"\n                          analytics-id="course.content.assessment.test.settings.integration.available"\n                          bb-translate\n                    >\n                      course.content.originalityReport.settings.originalityAvailable\n                    </button>\n                  </span>\n                </ng-switch>\n              </div>\n            </li>\n            \x3c!--Proctoring--\x3e\n            <li class="proctoring-summary" ng-if="::assessmentOverview.content.isSecureBrowserRequiredToTake()">\n              <bb-svg-icon size="medium" icon="privacy-policy"></bb-svg-icon>\n              <div class="proctoring-peek-container">\n                <span class="settings-label" bb-translate>components.services.proctoring.overview.label</span>\n                <span class="settings-link" ng-if="::assessmentOverview.getProctoringBrowserText()">\n                  <span bb-translate>{{assessmentOverview.getProctoringBrowserText()}}</span>\n                </span>\n                <span class="settings-link requirements" ng-if="::assessmentOverview.showBeforeAttemptedFooter && assessmentOverview.getProctoringRequirementsText()" bb-translate>{{assessmentOverview.getProctoringRequirementsText()}}</span>\n                <span class="settings-link browser-download" ng-if="::assessmentOverview.showBeforeAttemptedFooter &&  assessmentOverview.getProctoringBrowserDownloadText()">\n                  <bb-svg-icon size="medium" icon="download"></bb-svg-icon>\n                  <a target="_blank" href="{{assessmentOverview.content.getProctoringDownloadUrl()}}" bb-translate analytics-id="{{assessmentOverview.getProctoringBrowserDownloadText()}}">{{assessmentOverview.getProctoringBrowserDownloadText()}}</a>\n                </span>\n              </div>\n            </li>\n          </ul>\n          \x3c!--Grading section--\x3e\n          <div ng-if="assessmentOverview.isScorm" ng-show="!assessmentOverview.isLoading" class="scorm-overview-grades" ui-view="scorm-grading-section@"></div>\n          <div ng-if="!assessmentOverview.isScorm" class="row">\n            <span class="settings-label" bb-translate>course.content.assessment.overview.gradingHeader</span>\n            <div class="alert grading-notice" ng-if="assessmentOverview.showPastDueForDueDate() && !assessmentOverview.currentAttempt.isSubmitted()">\n              <bb-svg-icon class="alert-icon" icon="attention" size="small" status="alert"></bb-svg-icon>\n              <span class="notice-text" bb-translate>course.content.assessment.overview.pastDueZero.submitNowToUpdate</span>\n            </div>\n\n            \x3c!--Past-due-zero grade card (ie. "Your grade 0")--\x3e\n            \x3c!-- this shows when past due and no attempt has been made or a draft has been saved (no previous attempts submitted)--\x3e\n            <div class="submission-card" ng-if="!assessmentOverview.showScoreCard && assessmentOverview.showPastDueForDueDate()">\n              <span bb-content-item-icon content-column="assessmentOverview.contentData.gradingColumn" show-alert-icon="true"></span>\n\n              <div class="card-text">\n                <span class="submission-label" bb-translate>course.content.assessment.overview.scoreCard.yourScore</span>\n                <span class="submission-subtext" bb-translate>course.content.assessment.overview.pastDueZero.pastDueAndNotSubmitted</span>\n              </div>\n              <div class="card-grade">\n                <bb-display-grade-pill grade="assessmentOverview.contentData.gradeDetail"\n                                       column="assessmentOverview.contentData.gradingColumn"></bb-display-grade-pill>\n              </div>\n            </div>\n\n            \x3c!--Pre-submission grade card (ie. "Maximum score")--\x3e\n            \x3c!-- this shows only when no attempt has been made or a draft has been saved (no previous attempts submitted)--\x3e\n            <div class="no-submission-card" ng-if="!assessmentOverview.showScoreCard && !assessmentOverview.attemptCountSubmitted && !assessmentOverview.showPastDueForDueDate()">\n              <span class="no-submission-icon" bb-content-item-icon content-column="assessmentOverview.contentData.gradingColumn" show-alert-icon="assessmentOverview.isOverdue"></span>\n              <div class="no-submission-text">\n                <span class="no-submission-label" bb-translate>course.content.assessment.overview.highestPossible</span>\n                <span class="no-submission-subtext" ng-if="assessmentOverview.currentAttempt.isInProgress()"\n                      bb-translate="course.content.assessment.overview.startedAt" translate-values="{ datetime: assessmentOverview.currentAttempt.modifiedDate }"></span>\n                <span class="no-submission-subtext" ng-if="!assessmentOverview.currentAttempt.isInProgress() && assessmentOverview.contentData.gradingColumn.isMultipleAttempts()"\n                      bb-translate="{{assessmentOverview.aggregationModelDescriptionKey}}"></span>\n              </div>\n              <div class="no-submission-value" bb-translate translate-values="{point: assessmentOverview.highestPossibleScore}">course.content.assessment.overview.maxPoint.plural</div>\n            </div>\n            \x3c!--Pre-submission grade card (ie. "Maximum score")--\x3e\n            \x3c!-- this shows when the current attempt is in progress and previous attempts have already been submitted --\x3e\n            <a class="has-link js-attempt-submitted" href="javascript:void(0);"\n               ng-if="!assessmentOverview.showScoreCard && (assessmentOverview.attemptCountSubmitted > 0)"\n               ng-click="assessmentOverview.openAttemptReview()"\n               analytics-id="course.content.assessment.overview.highestPossible.link">\n              <div class="no-submission-card">\n                <span class="no-submission-icon" bb-content-item-icon content-column="assessmentOverview.contentData.gradingColumn" show-alert-icon="assessmentOverview.isSubmittedLate()"></span>\n                <div class="no-submission-text">\n                  <span class="no-submission-label" bb-translate>course.content.assessment.overview.highestPossible</span>\n                  <span class="no-submission-subtext" ng-if="assessmentOverview.currentAttempt.isInProgress()"\n                        bb-translate="course.content.assessment.overview.startedAt" translate-values="{ datetime: assessmentOverview.currentAttempt.modifiedDate }"></span>\n                  <span class="no-submission-subtext" ng-if="!assessmentOverview.currentAttempt.isInProgress() && assessmentOverview.contentData.gradingColumn.isMultipleAttempts()"\n                        bb-translate="{{assessmentOverview.aggregationModelDescriptionKey}}"></span>\n                </div>\n                <div class="no-submission-value" bb-translate translate-values="{point: assessmentOverview.highestPossibleScore}">course.content.assessment.overview.maxPoint.plural</div>\n              </div>\n            </a>\n            \x3c!--Post-submission, pre-graded-and-posted grade card (ie. "Submission"/"Late Submission")--\x3e\n            \x3c!-- this shows only when an attempt has been submitted but not yet graded and posted by the instructor --\x3e\n            <a class="has-link js-attempt-submitted" href="javascript:void(0);" ng-if="assessmentOverview.showScoreCard && !assessmentOverview.contentData.gradeDetail.isPosted()" ng-click="assessmentOverview.openAttemptReview()" analytics-id="course.content.assessment.overview.scoreCard.submitted.link">\n              <div class="submission-card">\n                <span bb-content-item-icon content-column="assessmentOverview.contentData.gradingColumn" show-alert-icon="assessmentOverview.isSubmittedLate()" class="img-wrapper"></span>\n                <div class="card-text">\n                  <ng-switch on="assessmentOverview.isSubmittedLate()">\n                    <span ng-switch-when="true" class="submission-label late-submission" bb-translate="course.content.assessment.overview.scoreCard.lateSubmission"></span>\n                    <span ng-switch-default class="submission-label" bb-translate="course.content.assessment.overview.scoreCard.submission"></span>\n                  </ng-switch>\n                  <div class="card-text-attempt">\n                    <span bb-translate\n                          translate-values="{\'attemptDate\': assessmentOverview.latestAttemptDate}">course.content.assessment.overview.scoreCard.submitted</span>\n                  </div>\n                </div>\n                <div class="card-grade">\n                  <bb-display-grade-pill grade="assessmentOverview.contentData.gradeDetail"\n                                         column="assessmentOverview.contentData.gradingColumn"></bb-display-grade-pill>\n                </div>\n              </div>\n            </a>\n            \x3c!--Post-submission, graded-and-posted grade card (ie. "Your Score")--\x3e\n            \x3c!-- this shows only when an attempt has been submitted and graded then posted by the instructor --\x3e\n            <a class="has-link js-attempt-posted" href="javascript:void(0);" ng-if="assessmentOverview.showScoreCard && assessmentOverview.contentData.gradeDetail.isPosted()" ng-click="assessmentOverview.openAttemptReview()" analytics-id="course.content.assessment.overview.scoreCard.yourScore.link">\n              <div class="submission-card">\n                <span bb-content-item-icon content-column="assessmentOverview.contentData.gradingColumn" show-alert-icon="assessmentOverview.isSubmittedLate()"\n                      class="img-wrapper" ng-class="{\'comment-posted-img\': assessmentOverview.hasFeedback()}"></span>\n                <div class="card-text">\n                  <span class="submission-label" bb-translate="course.content.assessment.overview.scoreCard.yourScore"></span>\n                  <span class="submission-subtext" ng-if="assessmentOverview.contentData.gradingColumn.isMultipleAttempts()"\n                        bb-translate="{{assessmentOverview.aggregationModelDescriptionKey}}"></span>\n                </div>\n                <div class="card-grade">\n                  <bb-display-grade-pill grade="assessmentOverview.contentData.gradeDetail"\n                                         column="assessmentOverview.contentData.gradingColumn"></bb-display-grade-pill>\n                </div>\n              </div>\n            </a>\n          </div>\n          \x3c!--Assessment Results--\x3e\n          <div class="assessment-result-info" ng-if="assessmentOverview.showAssessmentResults">\n            <div class="row collapse">\n              <div class="small-10 columns assessment-result-info__header">\n                <h2 bb-translate>course.content.assessment.overview.assessmentResults.header</h2>\n                <button\n                  class="center-tooltip js-assessment-results-info-tooltip"\n                  bb-tooltip enhanced-tooltip="true"\n                  bb-translate-attrs="{\'aria-label\': \'course.content.assessment.overview.assessmentResults.info\',\n                                        title: \'course.content.assessment.overview.assessmentResults.info\'}"\n                  analytics-id="course.content.assessment.overview.assessmentResults.information.button">\n                  <bb-svg-icon aria-hidden="true" role="presentation" size="small" icon="information"></bb-svg-icon>\n                </button>\n              </div>\n            </div>\n            <ul class="row" tabindex="-1">\n              <li ng-repeat="option in assessmentOverview.assessmentResultOptions">\n                <ng-switch on="{{option.visible}}">\n                  <bb-svg-icon ng-switch-when="true" size="medium" icon="{{::option.icon}}" status="active"></bb-svg-icon>\n                  <bb-svg-icon ng-switch-default size="medium" icon="{{::option.icon}}"></bb-svg-icon>\n                </ng-switch>\n\n                <div>\n                  <span class="settings-label">{{option.optionLabel}}</span>\n                  <span class="settings-link" ng-bind-html="option.modeLabel"></span>\n                </div>\n              </li>\n            </ul>\n          </div>\n          \x3c!--Assigned Peer Reviews--\x3e\n          <bb-assigned-peer-grading bb-feature-toggle="peerAssessmentFeatureFlag" remove-from-dom="true"\n                                    ng-if="assessmentOverview.isPeerGradingConfigured"\n                                    submission-due-date="::assessmentOverview.dueDate"\n                                    peer-review-due-date="::assessmentOverview.peerReviewDueDate"\n                                    peer-reviews-per-student="::assessmentOverview.numOfPeerReviewsToComplete"\n                                    allow-late-peer-reviews="::assessmentOverview.allowLatePeerReviews"\n                                    has-due-date-accommodation="assessmentOverview.hasDueDateAccommodation"\n                                    is-submission-complete="assessmentOverview.isAssessmentSubmissionComplete"\n                                    is-submission-late="assessmentOverview.isSubmissionLate"\n                                    content="assessmentOverview.content"\n                                    component-updated-callback="assessmentOverview.peerReviewsComponentUpdatedCallback">\n          </bb-assigned-peer-grading>\n          \x3c!--Description--\x3e\n          <div class="row" ng-if="assessmentOverview.content.description">\n            <span class="settings-label" bb-translate>course.content.assessment.overview.descriptionHeader</span>\n            <span class="desc-content">\n              {{assessmentOverview.content.description}}\n            </span>\n          </div>\n          \x3c!--Proctoring Additional Notes --\x3e\n          <div class="proctoring-additional-notes" ng-if="::assessmentOverview.showProctoringAdditionalNotes() && assessmentOverview.content.isSecureBrowserRequiredToTake()">\n            <span class="settings-label" bb-translate>components.services.proctoring.overview.additionalNotes.label</span>\n            <span class="desc-content details-view" ng-if="::assessmentOverview.detailsView" bb-translate>components.services.proctoring.delivery.attempt.additionalNotes.description</span>\n            <span class="desc-content non-details-view" ng-if="::!assessmentOverview.detailsView" bb-translate>components.services.proctoring.overview.additionalNotes.description</span>\n          </div>\n          <div class="row group-assessment-members" ng-if="assessmentOverview.content.isGroupContent && !assessmentOverview.content.userNeedsToSelfEnrollInGroup()">\n            <h2 class="peek-title-h2">\n              <bb-translate translate-values="{number: assessmentOverview.groupUsers.length}">course.content.assessment.test.group.assignmentGroupMembers.plural</bb-translate>\n              <div class="group-buttons" bb-guidance-target component-key="components.features.course.content.assessment.ftue.group-conversation" keep-guidance-when-focusout="true">\n                <button ng-show="assessmentOverview.shouldShowCollabLink" ng-click="assessmentOverview.launchCollabSession()"\n                        bb-translate-attrs="{\'aria-label\':\'course.content.conversation.collaborate\', \'title\': \'course.content.conversation.collaborate\'}"\n                        class="button super-clear icon" aria-describedby="collab-icon-assessment" analytics-id="course.content.conversation.collobrate.button">\n                  <bb-collab-session-icon id="collab-icon-assessment" running-session-flag="assessmentOverview.runningSessionFlag"></bb-collab-session-icon>\n                </button>\n                <button ng-if="assessmentOverview.content.ui.hasConversationAttached && assessmentOverview.content.attachedForumLink"\n                        ng-click="assessmentOverview.gotoConversation(assessmentOverview.content.assignedGroups[0].groupId)"\n                        bb-translate-attrs="{\'aria-label\':\'components.directives.header.openAriaGroup\', \'title\': \'components.directives.header.openAriaGroup\'}"\n                        class="button super-clear icon" analytics-id="components.directives.header.openAriaGroup.button">\n                  <bb-svg-icon ng-class="{\'has-indicator\': assessmentOverview.hasGroupIndicator}" size="medium" icon="group-conversation"></bb-svg-icon>\n                </button>\n              </div>\n              \x3c!--View group conversation FTUE--\x3e\n              <div ng-if="assessmentOverview.content.ui.hasConversationAttached && assessmentOverview.content.attachedForumLink" class="guidance-wrapper group-conversation-ftue">\n                <bb-guidance component-key="components.features.course.content.assessment.ftue.group-conversation" class="guidance-element-overlay">\n                  <span bb-translate="{{::assessmentOverview.groupConversationFtueKey}}" translate-values="{title: assessmentOverview.customCategory}"></span>\n                </bb-guidance>\n              </div>\n            </h2>\n            <div class="member-container">\n              <div class="member js-member-{{::member.id}}" ng-repeat="member in assessmentOverview.groupUsers track by member.id"\n                ng-class="{\'is-owner\': member.id === groupAttemptOwnerId}">\n                <bb-usercard usercard-show="avatar"\n                             user="member" course-id="{{assessmentOverview.course.id}}"\n                             course-role="assessmentOverview.getCourseRole(member)"\n                             can-send-message="assessmentOverview.canSendMessage(member)"\n                             inactive="assessmentOverview.isInactive(member)">\n                </bb-usercard>\n                <bb-username class="member-name" user="member" format="short" has-title-attr="false"></bb-username>\n                <span ng-if="member.id === groupAttemptOwnerId" bb-tooltip\n                      enhanced-tooltip="true"\n                      tooltip-position="bottom-right"\n                      bb-translate-attrs="{title: \'course.content.assessment.overview.currentEditingLabel\'}"\n                      translate-attrs-values="{user:{givenName: member.givenName, familyName: member.familyName}}">\n                  <bb-svg-icon class="draw" size="small" icon="draw"></bb-svg-icon>\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="goals-panel slide-small-container slide-animation" ng-class="{slideUp: assessmentOverview.showGoalDetails}">\n        <div ng-show="assessmentOverview.showGoalDetails">\n          <bb-goal-alignment contents="assessmentOverview.goalAlignedContents"\n                             hide-goals="assessmentOverview.hideGoals()"\n                             class="angular-animate content-assessment-goal-peek"\n                             analytics-id="course.content.assessment.goalAlignedContents.goalAlignment">\n          </bb-goal-alignment>\n        </div>\n      </div>\n      <div class="subpanel rubric-evaluation-subpanel slide-small-container slide-animation"\n           ng-class="{slideUp: assessmentOverview.showRubricDetails, slideDown: !assessmentOverview.showRubricDetails, opened: assessmentOverview.showRubricDetails}"\n           bb-translate-attrs="{\'aria-label\': \'course.content.assignmentRubricDetails\'}"\n           tabindex="-1">\n        <div ng-if="assessmentOverview.showRubricDetails">\n          <div class="panel-section-header">\n            <div class="panel-section-header-icon">\n              <bb-svg-icon size="medium" icon="rubric"></bb-svg-icon>\n            </div>\n            <div class="panel-section-header-text">\n              <h3 bb-translate>course.content.assessment.overview.rubricPanelHeader</h3>\n            </div>\n            <button class="button super-clear icon" bb-translate-attrs="{\'aria-label\': \'global.close\'}" ng-click="assessmentOverview.hideRubricPanel()" analytics-id="course.content.assessment.closeRubricPanel.button">\n              <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n            </button>\n\n          </div>\n          <div class="panel-section-body row">\n            <bb-rubric-view\n              ng-if="assessmentOverview.contentData != null"\n              criteria="assessmentOverview.rubricViewPayload.criteria"\n              analytics-id="assessmentOverview.rubricViewPayload.analyticsId"\n            >\n            </bb-rubric-view>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n  \x3c!-- A footer to display after the user has submitted. Can be used to have a start reviews button for\n  peer review assessments or a view submission button (in the future) --\x3e\n  <footer id="after-attempt-footer"\n          class="panel-footer after-attempt-footer"\n          ng-show="!assessmentOverview.isLoading"\n          ng-if="assessmentOverview.showAfterAttemptedFooter && assessmentOverview.isCourseOpen">\n    <a href="javascript:void(0);"\n       ng-if="!assessmentOverview.startPeerReviewsButtonVisible"\n       class="button button-attempt"\n       ng-click="assessmentOverview.openAttemptReview()"\n       analytics-id="assessmentOverview.viewSubmittedAttempt.link">\n        <span class="label-button-attempt" bb-translate="{{assessmentOverview.viewAttemptButtonLabelKey}}"></span>\n    </a>\n    <button ng-if="assessmentOverview.startPeerReviewsButtonVisible"\n            class="button button-start-peer-review"\n            ng-click="assessmentOverview.startNextPeerReview()"\n            ng-disabled="!assessmentOverview.startPeerReviewsButtonEnabled"\n            analytics-id="course.content.assessment.overview.peer.start-review.button" bb-translate=>\n            {{assessmentOverview.startNextPeerReviewButtonKey}}\n    </button>\n  </footer>\n  <footer id="start-attempt-footer"\n        class="panel-footer start-attempt-footer"\n        ng-class="{\'requires-password\': assessmentOverview.isAssessmentPasswordProtected}"\n        ng-show="!assessmentOverview.isLoading"\n        ng-if="assessmentOverview.showBeforeAttemptedFooter && assessmentOverview.isCourseOpen">\n    <div class="attempt-password-container" ng-if="assessmentOverview.isAssessmentPasswordProtected">\n      <div class="attempt-password-header row">\n        <span class="attempt-password-header-text" bb-translate>course.content.assessment.overview.passwordProtected.heading</span>\n        <div\n          bb-tooltip\n          bb-translate-attrs="{\'title\':\'course.content.assessment.overview.passwordProtected.tooltip\'}"\n          enhanced-tooltip="true"\n          tooltip-position="top-center">\n          <div class="info-icon"><bb-svg-icon size="small" icon="information"></bb-svg-icon></div>\n        </div>\n      </div>\n      <input type="text"\n            inputmode="numeric"\n            bb-translate-attrs="{\'placeholder\':\'course.content.assessment.overview.passwordProtected.placeholder\',\n                                \'aria-label\':\'course.content.assessment.overview.passwordProtected.errors.empty\'}"\n            class="attempt-password-entry"\n            ng-class="{\'attempt-password-entry-error\': assessmentOverview.passwordErrorMessageKey}"\n            aria-describedby="{{assessmentOverview.passwordErrorMessageKey ? \'attempt-password-error-message\': null }}"\n            aria-invalid="{{!!assessmentOverview.passwordErrorMessageKey}}"\n            id="assessment-password"\n            ng-model="assessmentOverview.givenPassword"\n            ng-change="assessmentOverview.onPasswordChange()"\n            analytics-id="course.content.assessment.overview.password.input.text"\n            bb-keyboard-enter="assessmentOverview.navigateAttempt()" />\n      <div class="attempt-password-error-message"\n        id="attempt-password-error-message"\n        role="alert"\n        ng-if="assessmentOverview.passwordErrorMessageKey">\n        <span bb-translate ng-if="assessmentOverview.passwordErrorMessageKey">\n          {{assessmentOverview.passwordErrorMessageKey}}\n        </span>\n      </div>\n    </div>\n\n    <div class="attempt-button-container"\n        ng-class="{\'requires-password\': assessmentOverview.isAssessmentPasswordProtected}">\n\n      <p ng-if="assessmentOverview.isOverdue" class="late-button-super-text">\n        <span bb-translate="course.content.assessment.overview.markedLateNotice"></span>\n      </p>\n\n      \x3c!-- Start/continue non-timed attempt--\x3e\n      <a href="javascript:void(0);" ng-if="!assessmentOverview.hasTimeLimit && assessmentOverview.attemptCount !== undefined" ng-click="assessmentOverview.navigateAttempt()"\n        ng-disabled="assessmentOverview.content.userNeedsToSelfEnrollInGroup()"\n        ng-class="{\'js-multiple\': assessmentOverview.allowMultipleAttempts, \'js-continue\': assessmentOverview.attemptIsInProgress}"\n        class="button button-attempt" analytics-id="course.content.assessment.overview.allowMultipleAttempts.link">\n        <span class="label-button-attempt"\n              bb-translate="{{assessmentOverview.attemptButtonLabelKey}}"\n              translate-values="{count: assessmentOverview.currentAttemptNumber}"></span>\n        <span class="label-button-group-control"\n              bb-load-bundle="features/course/content/assessment/group-attempt/activities/group-attempt-activities"\n              bb-translate="features.course.content.assessment.group-attempt.activities.takecontrol"></span>\n      </a>\n\n      \x3c!-- Start timed attempt--\x3e\n      <a href="javascript:void(0);"\n         ng-if="assessmentOverview.hasTimeLimit && !assessmentOverview.currentAttempt.isInProgress()"\n         class="button button-attempt"\n         ng-class="{\'js-multiple\': assessmentOverview.allowMultipleAttempts, \'js-continue\': assessmentOverview.attemptIsInProgress}"\n         ng-click="assessmentOverview.createAttemptWithTimer()"\n         analytics-id="assessmentOverview.navigateAttempt.link">\n        <span class="label-button-attempt"\n              bb-translate="{{assessmentOverview.attemptButtonLabelKey}}"\n              translate-values="{count: assessmentOverview.currentAttemptNumber}"></span>\n      </a>\n\n      \x3c!-- Continue timed attempt--\x3e\n      <a href="javascript:void(0);"\n         ng-if="assessmentOverview.hasTimeLimit && assessmentOverview.currentAttempt.isInProgress()"\n         ng-click="assessmentOverview.navigateAttempt()"\n         ng-class="{\'js-multiple\': assessmentOverview.allowMultipleAttempts, \'js-continue\': assessmentOverview.attemptIsInProgress}"\n         class="button button-attempt"\n         analytics-id="assessmentOverview.allowMultipleAttempts.link">\n        <span class="label-button-attempt"\n              bb-translate="{{assessmentOverview.attemptButtonLabelKey}}"\n              translate-values="{count: assessmentOverview.currentAttemptNumber}"></span>\n        <span class="label-button-group-control"\n              bb-load-bundle="features/course/content/assessment/group-attempt/activities/group-attempt-activities"\n              bb-translate="features.course.content.assessment.group-attempt.activities.takecontrol"></span>\n      </a>\n    </div>\n  </footer>\n  <footer id="start-attempt-closed-course-footer" class="panel-footer course-closed-footer" ng-if="assessmentOverview.showBeforeAttemptedFooter && !assessmentOverview.isCourseOpen">\n    <p class="course-closed-text">\n      <span class="js-course-closed-msg" bb-translate="{{::assessmentOverview.completedCourseKey}}" translate-values="{\'title\': assessmentOverview.customCategory}"></span>\n    </p>\n  </footer>\n  <div ui-view="assessment-overview-peek@"></div>\n</div>\n'},"9cvu":function(e,t){e.exports='<div bb-load-bundle="components/directives/page-size-selection">\n  <div bb-foundation-defer class="select-wrapper">\n    <button\n      class="js-items-per-page-selector"\n      data-dropdown="{{::$ctrl.componentId}}"\n      bb-click-focus=".item-selected > a"\n      bb-translate-attrs="{\'aria-label\': \'components.directives.pageSizeSelection.itemsPerPage\'}"\n      aria-describedby="{{::$ctrl.componentDescribeId}}"\n      analytics-id="components.directives.pageSizeSelection.itemsPerPage.button"\n    >\n      <div class="select-value">\n        <span id="{{::$ctrl.componentDescribeId}}">\n          {{$ctrl.mySelectedPageSize.name}}\n        </span>\n      </div>\n    </button>\n    <bb-dropdown list-id="{{::$ctrl.componentId}}"\n      list-kind="filter"\n      item-list="$ctrl.availablePageSizes"\n      selected-item="$ctrl.mySelectedPageSize"\n      click-function="$ctrl.changePageSize(item)"\n      analytics-id-tag-prefix="components.directives.pageSizeSelection.itemsPerPage.dropdown">\n    </bb-dropdown>\n  </div>\n  <span bb-translate="components.directives.pageSizeSelection.itemsPerPage"></span>\n</div>'},"9hUw":function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return S}));var i=n("D57K"),s=n("VdDF"),o=n("gm4d"),a=n("6VGE"),r=n.n(a),c=n("wHJ2"),l=n("JfV0"),d=n("nsO7"),u=n("t6LE"),p=n("9OUN"),m=n("aHpC"),h=n("nmzr"),b=n("TnpK"),g=n("fYJU"),v=n("12mu"),f=n("0JpG"),y=n("U50L"),w=n("Fvsw"),C="ultra.components.services.assessment.peerReview",S="peerReview",A=function(){function e(e,t,n,i,s,o,a){this.$rootScope=e,this.$ngRedux=t,this.localizeService=n,this.contextUser=i,this.modal=s,this.ultraState=o,this.context=a,this.reviewableAttemptsOnly=[]}return e.prototype.setContent=function(e,t){var n;void 0===t&&(t=!1);var i=null===(n=this.content)||void 0===n?void 0:n.id;this.content=e,this.peerGrading&&i!==this.content.id&&t&&(this.unsubscribeFromReduxStore&&this.unsubscribeFromReduxStore(),this.subscribeToReduxStore(),this.loadGradebookAttemptsByColumnId({courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,reviewableAttemptsOnly:!0}))},e.prototype.subscribeToReduxStore=function(){var e=this;this.unsubscribeFromReduxStore=this.$ngRedux.connect((function(t){var n=e.content.courseId,i=e.deployedAssessment.gradingColumn.id,s=e.contextUser.userId;return{reviewableAttemptsOnly:Object(d.sortBy)(l.select.gradebookAttempt.getReviewableGradebookAttempts(t,n,i,s),["delegatedGraderOrder"])}}),(function(e){return Object(p.bindActionCreators)({assignNewAttemptForPeerReview:l.actions.gradebookAttempt.assignNewAttemptForPeerReview,loadGradebookAttemptsByColumnId:l.actions.gradebookAttempt.loadGradebookAttemptsByColumnId},e)}))(this)},e.prototype.canPeerViewAttempt=function(e,t){var n;if(!this.peerGrading||e.contentId!==(null===(n=this.content)||void 0===n?void 0:n.id)||null==e.contentId||!t)return!1;var i=this.reviewableAttempts.some((function(e){return e.id===t.id})),s=this.contextUser.userId===t.userId;return!!(i||s)},e.prototype.canDelegatedReconcileAttempt=function(e){return e.delegatedGrading&&e.isUserReconciler(this.contextUser.userId)},e.prototype.canPeerReviewAttempt=function(e,t){return this.canPeerViewAttempt(e,t)&&t.userId!==this.contextUser.userId&&!this.canDelegatedReconcileAttempt(e)},e.prototype.canPeerAddFeedbackToAttempt=function(e,t){return this.canPeerReviewAttempt(e,t)&&!t.isReconciled()&&!u.AttemptStatus.Completed.isEqualTo(t.status)},Object.defineProperty(e.prototype,"completedPeerReviews",{get:function(){var e;return(null===(e=this.reviewableAttempts)||void 0===e?void 0:e.length)?this.reviewableAttempts.filter((function(e){return u.AttemptStatus.Completed.isEqualTo(null==e?void 0:e.status)})).length:0},enumerable:!0,configurable:!0}),e.prototype.openNotEnoughStudentSubmissionsModal=function(){var e=this.$rootScope.$new();e.translateOpts={title:{key:"components.services.peer-review.modal.error-not-enough-submissions.title"}},e.descriptionKey="components.services.peer-review.modal.error-not-enough-submissions.description";var t={scope:e,template:y,resolve:{translations:[f.serviceName,function(e){return e.loadBundle("components/services/peer-review")}]}};this.modal.open(t)},e.prototype.assignNewPeerReview=function(){var e,t;return Object(i.__awaiter)(this,void 0,Promise,(function(){var n,s;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!o.a.peerAssessmentFeatureFlag)return[2,Promise.resolve(null)];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.assignNewAttemptForPeerReview({courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,userId:this.contextUser.userId})];case 2:return i.sent(),(null===(e=this.reviewableAttempts)||void 0===e?void 0:e.length)>0&&(n=null===(t=this.reviewableAttempts)||void 0===t?void 0:t[this.reviewableAttempts.length-1]),[2,Promise.resolve(n)];case 3:throw(s=i.sent())instanceof l.AssessmentConflictNotEnoughPeerReviews&&this.openNotEnoughStudentSubmissionsModal(),s;case 4:return[2]}}))}))},e.prototype.navigateToPeerReview=function(e){return Object(i.__awaiter)(this,void 0,Promise,(function(){var t,n,s;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e,o.a.peerAssessmentFeatureFlag?(void 0===e&&(t=this.reviewableAttempts.length<this.numOfPeerReviewsToComplete?this.reviewableAttempts.length:this.reviewableAttempts.length-1),this.reviewableAttempts[t]?(n=this.reviewableAttempts[t],[3,3]):[3,1]):[2,Promise.resolve()];case 1:if(void 0!==e)throw Error("Cannot create a new peer review with a specified index.");return[4,this.assignNewPeerReview()];case 2:n=i.sent(),i.label=3;case 3:return s={courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,userId:this.contextUser.userId,attemptId:null==n?void 0:n.id,gradeId:null==n?void 0:n.gradeId,initialPeerIndex:t},this.ultraState.goPeekState(h.AssessmentRoutes.ASSESSMENT_PEER_GRADING,s),[2]}}))}))},e.prototype.loadReviewableAttempts=function(){this.peerGrading&&this.loadGradebookAttemptsByColumnId&&this.loadGradebookAttemptsByColumnId({courseId:this.content.courseId,columnId:this.deployedAssessment.gradingColumn.id,reviewableAttemptsOnly:!0})},Object.defineProperty(e.prototype,"reviewableAttempts",{get:function(){return this.reviewableAttemptsOnly},enumerable:!0,configurable:!0}),e.prototype.numberOfLatePeerReviews=function(){var e=this;return o.a.peerAssessmentFeatureFlag?this.reviewableAttempts.filter((function(t){return!s.a.isWithinDateRange(t.attemptLastGradedDate,{end:e.peerReviewDueDate,start:null})})).length:null},e.prototype.getPeerReviewProgess=function(e){return{isPeerGrading:this.peerGrading,completedPeerReviews:e,totalPeerReviews:this.numOfPeerReviewsToComplete}},Object.defineProperty(e.prototype,"deployedAssessment",{get:function(){var e;return(null===(e=this.content)||void 0===e?void 0:e.contentDetail)&&this.content.getDeployedAssessment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peerGrading",{get:function(){var e;return!!o.a.peerAssessmentFeatureFlag&&!!(null===(e=this.deployedAssessment)||void 0===e?void 0:e.gradingColumn.peerGrading)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfPeerReviewsToComplete",{get:function(){var e,t;return this.peerGrading?null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.peerSettings)||void 0===t?void 0:t.peerReviewsPerStudent:null},enumerable:!0,configurable:!0}),e.prototype.parseCurrentStringToDateAndMemoize=function(e){return s.a.parseStringToDate(e)},Object.defineProperty(e.prototype,"peerReviewDueDate",{get:function(){var e,t;return this.peerGrading?this.parseCurrentStringToDateAndMemoize(null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.peerSettings)||void 0===t?void 0:t.peerReviewDueDate):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInPeerReviewWindow",{get:function(){return s.a.isWithinDateRange(this.context.getServerTime(),{end:this.peerReviewDueDate,start:this.deployedAssessment.gradingColumn.dueDate})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAfterPeerReviewWindow",{get:function(){return s.a.isWithinDateRange(this.context.getServerTime(),{end:null,start:this.peerReviewDueDate},!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowLatePeerReviews",{get:function(){var e,t;return!!this.peerGrading&&!!(null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.peerSettings)||void 0===t?void 0:t.allowLatePeerReviews)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPeerGradingConfigured",{get:function(){return!!this.peerGrading&&(null!=this.numOfPeerReviewsToComplete&&null!=this.peerReviewDueDate)},enumerable:!0,configurable:!0}),e.prototype.isAfterPeerReviewDueDate=function(e){var t,n=null!==(t=s.a.parseStringToDate(e))&&void 0!==t?t:new Date;return s.a.isWithinDateRange(n,{end:null,start:this.peerReviewDueDate},!1)},Object(i.__decorate)([r.a],e.prototype,"parseCurrentStringToDateAndMemoize",null),e=Object(i.__decorate)([Object(i.__param)(0,Object(m.b)("$rootScope")),Object(i.__param)(1,Object(m.b)("$ngRedux")),Object(i.__param)(2,Object(m.b)(f.serviceName)),Object(i.__param)(3,Object(m.b)(g.b)),Object(i.__param)(4,Object(m.b)(v.b)),Object(i.__param)(5,Object(m.b)(b.d)),Object(i.__param)(6,Object(m.b)(w.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(A);c.module(C,[f.moduleName,g.a,v.a,b.b,w.a]).service(S,A)},"9hp7":function(e,t){e.exports='<div bb-load-bundle="components/directives/add-content-button">\n  <div class="add-element no-select js-add-content-button {{::contextArea + \'-add-button\'}}"\n       ng-class="{\n         \'force-show-add-button\': addContentButton.isForceShowAddButton && addContentButton.isForceShowAddButton(),\n         \'is-active\': addContentButton.isMenuVisible,\n         \'button-visible\': addContentButton.isButtonVisible,\n         hide: hideDividerLines() && !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)\n       }"\n       ng-keydown="addContentButton.onKeydown($event)">\n    <template></template>\n  </div>\n  <div id="{{::fileListViewId}}">\n    <bb-progress display-results="false" primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId" target-div="{{::\'#\' + fileListViewId}}"></bb-progress>\n  </div>\n</div>'},A51O:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-arrow-right",use:"icon-small-arrow-right-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-right"><path d="M5 1l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},APyD:function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    is-read-only="true"\n    plugin-options="editorPluginOptions"\n  >\n  </bb-rich-text-editor>\n</div>\n'},AVdi:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));n("dY8P"),n("5uNO"),n("w0/N"),n("6BRP"),n("zexu");var i=n("nsO7"),s=n("wHJ2"),o=n("0JpG"),a=n("BJLZ"),r=n("Sa5G"),c=n("XGja"),l=n("yMoE"),d=n("o5Lu"),u=n("dd1C"),p=n("+4Px"),m=n("pjml"),h=n("lEL+"),b=n("t3AZ"),g=n("TnpK"),v=n("m2KQ"),f=n("ho2F"),y="ultra.components.directives.grade.gradeInput",w=function(){function t(n,i,s,o,a,r,c,d,u,m,h,b,g,v,f){var y=this;this.$compile=n,this.$q=i,this.$injector=s,this.scope=o,this.element=a,this.attrs=r,this.form=c,this.bbLocalize=d,this.grade=u,this.AttemptModel=m,this.GradeModel=h,this.GroupAttemptModel=b,this.CourseModel=g,this.timeout=v,this.ultraState=f,this.alertScreenReaderNewGrade=!1,this.gradeDisplayItem=this.$injector.instantiate(l.a,{gradeDetail:this.scope.gradeDetail,scope:this.scope}),this.id=this.attrs.id,this.isSaving=!1,this.wrapperDiv=this.element.find("."+t.WRAPPER_CLASS),this.inputElement=this.wrapperDiv.find("input"),this.isWrapperDivClickHandled=!1,this.gradeNotationsWrapperSelector=this.scope.gradeNotationsWrapperSelector||"body",this.inputElementBluredByTab=!1,this.isProcessingFocusEvent=!1,this.wrapperDiv.on("click",(function(){y.isRubricEvalMode()||(y.isWrapperDivClickHandled=!0,y.scope.onClick&&!y.isReadOnly()&&y.scope.onClick(),y.wrapperDiv.addClass(t.WRAPPER_FOCUS_CLASS),y.inputElement.is(":focus")||(y.inputElement.focus(),y.inputElement.select()))})),this.inputElement.on("click",(function(t){e("#performanceCodes-"+y.id).hasClass("f-open-dropdown")&&(t.preventDefault(),t.stopPropagation())})),this.inputElement.on("focus",(function(n){if(!y.isProcessingFocusEvent){y.isProcessingFocusEvent=!0;try{n.preventDefault(),n.stopPropagation(),y.wrapperDiv.addClass(t.WRAPPER_FOCUS_CLASS),y.inputElement.select(),y.scope.$emit("grade-input-in-focus",y.id);var i=e("#performanceCodes-"+y.id);y.scope.offsetTop&&y.scope.offsetTop()||i.addClass("show"),y.isWrapperDivClickHandled||y.timeout((function(){i&&!i.hasClass("f-open-dropdown")&&(y.inputElement.trigger("click.fndtn.dropdown"),y.scope.offsetTop&&y.repositionGradeNotationDropdown(i))}),y.scope,0,!1)}finally{y.isProcessingFocusEvent=!1}}})),this.inputElement.on("keydown",(function(t){var n=e("#performanceCodes-"+y.id);if(n&&n.hasClass("f-open-dropdown")&&t.keyCode===p.u&&!t.shiftKey){y.inputElementBluredByTab=!0;var i=n.find(":tabbable");i&&(i.first().focus(),t.preventDefault(),t.stopPropagation())}else(t.keyCode===p.f||t.keyCode===p.m||t.keyCode===p.u&&!t.shiftKey)&&(t.preventDefault(),y.inputElement.is(":focus")&&y.inputElement.trigger("click.fndtn.dropdown"),y.$q.when(y.validateAndSave()).finally((function(){y.setFocusOnNextTabbableElement()})))})),this.element.foundation(),this.scope.$watch("::column",(function(e){e&&(y.courseId=e.courseId,y.gradeDisplayItem.init(e).then((function(){y.attrs.gradeDetail&&y.scope.$watchGroup(["gradeDetail.id","gradeDetail.displayGrade","gradeDetail.ui.attempt.displayGrade","isGroupGradeInProgress()","isGroupGradeMultiple()","column.gradingSchemaId","column.possible"],(function(e){y.isSaving||y.refreshInputBox()}))})),e.externalGrade?y.errorMessageKey="components.directives.grade.grade-input.errorMessage.overallGrade":y.errorMessageKey="components.directives.grade.grade-input.errorMessage.default")}))}return t.prototype.isFormDirty=function(){return this.form[this.id].$dirty},t.prototype.isFormValid=function(){return this.form[this.id].$valid},t.prototype.repositionGradeNotationDropdown=function(e){var t=this.inputElement.closest(this.gradeNotationsWrapperSelector).height(),n=e.position()&&e.position().top,i=n+e.height();if(this.scope.offsetTop&&this.scope.offsetTop()){var s=n+2*this.scope.offsetTop();e.css("top",s),e.addClass("show"),i=s+e.height()}i>t&&this.scope.$root.$broadcast("performance-dropdown-container-height-update",i-t+30)},t.prototype.showGradeNotationDropdown=function(){var t=this;e("#performanceCodes-"+this.id).length>0&&e("#performanceCodes-"+this.id).remove();var n=this.$compile(f)(this.scope);this.inputElement.closest(this.gradeNotationsWrapperSelector).append(n),this.scope.offsetTop&&this.isWrapperDivClickHandled&&this.repositionGradeNotationDropdown(n),n.on("keydown",(function(i){if(i.keyCode!==p.u||i.shiftKey)i.keyCode===p.g&&(i.preventDefault(),i.stopPropagation(),t.inputElement.trigger("click.fndtn.dropdown"),t.timeout((function(){e("#performanceCodes-"+t.id).remove()}),t.scope,0,!1),t.$q.when(t.validateAndSave()).finally((function(){t.setFocusOnNextTabbableElement()})));else{var s=n.find(":tabbable");s.last().is(":focus")&&(i.preventDefault(),s.eq(0).focus())}})),this.element.foundation()},t.prototype.refreshInputBox=function(){var e=this.scope.gradeDetail&&this.scope.gradeDetail.id,t=this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade,n=this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress(),i=this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple(),s=this.scope.column.gradingSchemaId;this.gradeDisplayItem.schema.id!==s&&this.gradeDisplayItem.init(this.scope.column),e&&t?(this.gradeDisplayItem.displayGrade=t,this.updateGradeColor()):n?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):i?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):t?(this.gradeDisplayItem.displayGrade=t,this.updateGradeColor()):(this.gradeDisplayItem.displayGrade=null,this.updateGradeColor())},t.prototype.shouldShowTotalPoints=function(){return(this.gradeDisplayItem.shouldShowTotalPoints()||this.hasFocus()||this.form[this.id]&&this.isFormDirty())&&(!this.isMultipleShown()&&!this.isInProgressShown()||(this.isMultipleShown()||this.isInProgressShown())&&this.hasFocus())&&!this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue)},t.prototype.isReadOnly=function(){return this.scope.readOnly&&this.scope.readOnly()},t.prototype.hasFocus=function(){return this.inputElement.is(":focus")||this.wrapperDiv.hasClass(t.WRAPPER_FOCUS_CLASS)},t.prototype.validateAndSave=function(){var e=this;if(this.wrapperDiv.removeClass(t.WRAPPER_FOCUS_CLASS),this.scope.$emit("grade-input-blur",this.id),this.shouldShowPastDueZeroIndicator()&&""===this.form[this.id].$viewValue&&(this.gradeDisplayItem.displayValue="0",this.form[this.id].$setPristine()),this.isFormValid())if(this.isFormDirty()){if(this.scope.forGroup&&this.isReservedWord(this.form[this.id].$viewValue))this.wrapperDiv.removeClass(this.inputColorClass);else if(!this.isSaving){var n=this._save();return this.scope.$emit("grade-input-save-promise",n),n.then((function(t){e.form[e.id]&&e.form[e.id].$setPristine(),e.alertScreenReaderNewGrade=!0,e.scope.$emit("bb-grade-input-save",t,e.scope.column.id,e.scope.forUser&&e.scope.forUser.id),e.refreshInputBox()})).finally((function(){e.isSaving=!1})),n}}else this.refreshInputBox()},t.prototype._validate=function(){var e=this,t=this.grade.createGradeSubmission(this.scope.column,this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema);t.clearGrade=this.isGradeErased();var n=this.grade.validateGrade(t,this.scope);return this.$q.when(n).then((function(t){e.form[e.id].$setValidity("invalidGrade",t)}))},t.prototype.getPerfCodeFromDisplayValue=function(e){var t=null;if(e){var n=this.scope.gradeNotations?this.scope.gradeNotations():[];if(n.length>0){var s=i.find(n,(function(t){return t.code===e}));s&&(t=s.id)}}return t},t.prototype._save=function(){var e=this,t=this.$q.when();this.isSaving=!0,this.perfCodeId=this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue);var n=this.perfCodeId?this.gradeDisplayItem.displayValue:this.grade.parseGrade(this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema,this.scope),s=this.grade.createGradeSubmission(this.scope.column,n,this.gradeDisplayItem.schema);if(this.perfCodeId&&(s.perfCodeId=this.perfCodeId),this.scope.column&&this.scope.column.externalGrade&&this.scope.gradeDetail){var o=this.scope.gradeDetail.pointsPossible||this.scope.column.possible,a=s.gradeValue;if(o&&o>0&&a&&a.isNumeric){var c=parseFloat(a.grade);a.grade=String(100*c/o)}}return s.clearGrade=this.isGradeErased(),this.isGradeErased()&&(this.scope.column.isAssignment()||this.scope.column.isDiscussion())&&(this.scope.forGroup?this.scope.forGroup&&!this.scope.gradeDetail.ui.groupAttempt&&(t=this.scope.column.getContentGroupIdToGroupAttempt({expand:"attempts,toolAttemptDetail,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor"}).then((function(t){i.values(t.lookup).forEach((function(t){t[0].groupId===e.scope.forGroup.id&&(e.scope.gradeDetail.ui.groupAttempt=t[0])}))}))):t=this.$q.when()),t.then((function(){var t=e.scope.override&&e.scope.override()&&!(e.isGradeErased()&&(e.scope.column.isAssignment()||e.scope.column.isDiscussion()))?null:e.scope.gradeDetail&&(e.scope.gradeDetail.ui.groupAttempt||e.scope.gradeDetail.ui.attempt),n=!(!e.scope.gradeDetail||!e.scope.gradeDetail.isPosted()),i=e.isGradeErased(),o=e.scope.gradeDetail;return e.scope.column.externalGrade&&o&&(o=e.grade.percentageToGradeDetail(o,e.scope.column.possible)),e.grade.saveGrade(s,o,t,{userId:e.scope.forUser&&e.scope.forUser.id,group:e.scope.forGroup}).then((function(t){if(e.scope.column.externalGrade&&t.displayGrade&&t.displayGrade.isOverride&&(t.pointsPossible=100),t instanceof e.AttemptModel)e.scope.gradeDetail.displayGrade=t.displayGrade,i&&(e.scope.gradeDetail.manualStatus=r.r.NoOverride),e.scope.gradeDetail.ui.attempt=t;else if(t instanceof e.GroupAttemptModel)e.gradeDisplayItem.displayGrade=t.displayGrade,e.scope.gradeDetail.displayGrade=t.displayGrade;else if(t instanceof e.GradeModel){var s=e.scope.gradeDetail?e.scope.gradeDetail.permissions:null;e.scope.gradeDetail=t,s&&(e.scope.gradeDetail.permissions=s),e.scope.column.externalGrade&&t.displayGrade&&!t.displayGrade.isOverride&&(e.scope.gradeDetail=e.grade.gradeDetailToPercentage(e.scope.gradeDetail)),e.scope.column.externalGrade&&(e.gradeDisplayItem.gradeDetail=e.scope.gradeDetail)}else t[0]instanceof e.GradeModel&&(e.scope.gradeDetail.displayGrade=t[0].displayGrade);return(e.scope.column.isAssignment()||e.scope.column.isDiscussion())&&!i&&n&&(t.isPosted&&!t.isPosted()||t.isCompleted&&!t.isCompleted()||t[0]&&t[0].isReadyToPost&&t[0].isReadyToPost())?e._postGrade(t):t}))}))},t.prototype._postGrade=function(e){var t=this;return this.scope.forGroup?this.scope.column.postReadyGroupAttempts({groupAssociationId:this.scope.gradeDetail.ui.groupAttempt.groupAssociationId}).then((function(n){return t.scope.gradeDetail.manualStatus=r.r.IsPosted,e instanceof Array&&e.forEach((function(e){e.manualStatus=r.r.IsPosted})),e})):this.scope.gradeDetail.postReadyGrades().then((function(n){return t.scope.gradeDetail.manualStatus=r.r.IsPosted,e.status=m.C.AttemptStatus.Completed,e}))},t.prototype.isMultipleShown=function(){return this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()},t.prototype.isInProgressShown=function(){return this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()},t.prototype.gradeValueOnChange=function(){var e=this;this.$q.when(this._validate()).then((function(){e.scope.hasGradeAndIsValid=e.form[e.id].$valid&&!!e.gradeDisplayItem.displayValue}))},t.prototype.onFocus=function(){this.canOverrideByGradeNotation()&&this.showGradeNotationDropdown(),this.isFormValid()&&!this.isFormDirty()&&(this.gradeDisplayItem.displayValue=this.gradeDisplayItem.parsedValue)},t.prototype.shouldShowOverrideIndicator=function(){return!(null==this.scope.enableOverrideIndicator||!this.scope.enableOverrideIndicator||!this.scope.gradeDetail)&&(!this.shouldShowPastDueZeroIndicator()&&this.grade.isRubricGradeOverridden(this.scope.gradeDetail,this.scope.gradeDetail.ui.attempt,this.scope.column,this.scope.forGroup))},t.prototype.shouldShowPastDueZeroIndicator=function(){return this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.scoredByAutomaticZero},t.prototype.isRubricAssociated=function(){return this.scope.column.hasRubricAssociation()},t.prototype.isRubricEvalMode=function(){return!!this.scope.enableRubricEvalAction&&this.scope.enableRubricEvalAction()&&this.isRubricAssociated()},t.prototype.openRubricEvaluation=function(){var e,t,n,i=this;!this.isRubricAssociated()||this.scope.disableRubricEvalClick&&this.scope.disableRubricEvalClick()||(n=(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.groupAssociationId)?(null===(t=this.scope.forUser)||void 0===t?void 0:t.id)||null:this.scope.gradeDetail.user&&(this.scope.gradeDetail.user.$pk||this.scope.gradeDetail.user.id)||null,this.timeout((function(){i.ultraState.goPeekState("rubric-evaluation",{userId:n,groupId:i.scope.forGroup?i.scope.forGroup.id:null,columnId:i.scope.column.id})}),this.scope,0,!1))},t.prototype.updateGradeColor=function(){this.wrapperDiv.removeClass(this.inputColorClass),!this.gradeDisplayItem.displayValue||this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()||this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()||(this.inputColorClass=this.gradeDisplayItem.getGradeColor(),this.wrapperDiv.addClass(this.inputColorClass))},t.prototype.isGradeErased=function(){return this.isFormDirty()&&this.gradeDisplayItem.wasValueErased},t.prototype.setFocusOnNextTabbableElement=function(){var e=this;this.timeout((function(){c.b(null,e.inputElement)}),this.scope,0,!1)},t.prototype.isReservedWord=function(e){var t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}).toLocaleLowerCase(),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}).toLocaleLowerCase(),i=e.toLocaleLowerCase();return i===t||i===n},t.prototype.getGradeInputAriaLabelKey=function(){if(this.scope.forUser||this.scope.forGroup){var e="components.directives.grade.grade-input.aria.",t=this.shouldShowOverrideIndicator()?"overrideScoreInput":"scoreInput";return this.shouldShowPastDueZeroIndicator()&&(t="pastDueZeroScoreInput"),e+=t,this.scope.forGroup&&(e+="Group"),e+=this.gradeDisplayItem.displayValue?"Graded":"Empty"}},t.prototype.canOverrideByGradeNotation=function(){var e=this.scope.gradeNotations?this.scope.gradeNotations():[];return this.scope.canOverrideByGradeNotation&&this.scope.canOverrideByGradeNotation()&&(e&&e.length>0||this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.isOverride)},t.prototype.getAriaDescribeById=function(){return"invalidGradeAriaDescribeById_"+this.scope.forUser.id},t.prototype.clickGradeNotation=function(e,t){t.stopPropagation(),this.gradeDisplayItem.displayValue=e.code,this.perfCodeId=e.id,this.afterClickDropdownListItem()},t.prototype.undoOverride=function(){this.gradeDisplayItem.displayValue="",this.perfCodeId=null,this.afterClickDropdownListItem()},t.prototype.afterClickDropdownListItem=function(){var t=this;this.form[this.id].$setDirty(!0),this.form[this.id].$setValidity("invalidGrade",!0),this.timeout((function(){e("#performanceCodes-"+t.id).remove()}),this.scope,0,!1),this.$q.when(this.validateAndSave()).finally((function(){t.setFocusOnNextTabbableElement()}))},t.prototype.onBlur=function(t){var n=this;this.isWrapperDivClickHandled=!1;var s=[];t&&t.relatedTarget&&t.relatedTarget.classList&&(s=t.relatedTarget.classList),this.inputElementBluredByTab||i.includes(s,"performance-code-potion")||(this.timeout((function(){n.inputElementBluredByTab=!1,e("#performanceCodes-"+n.id).remove()}),this.scope,0,!1),this.validateAndSave())},t.WRAPPER_CLASS="wrapping-input-style",t.WRAPPER_FOCUS_CLASS="wrapping-input-style-focus",t.$inject=["$compile","$q","$injector","scope","element","attrs","form",o.serviceName,d.h,m.C.serviceName,m.G.serviceName,m.H.serviceName,m.o.serviceName,h.b,g.d],t}(),C=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.restrict="E",this.template=v,this.require="^form",this.scope={column:"=",enableRubricEvalAction:"&?",disableRubricEvalClick:"&?",forUser:"=?",forGroup:"=?",gradeDetail:"=",hasGradeAndIsValid:"=?",isGroupGradeMultiple:"&?",isGroupGradeInProgress:"&?",notAllowEmptyString:"&?",onClick:"&",onBlur:"&",override:"&?",readOnly:"&?",enableOverrideIndicator:"=?",canOverrideByGradeNotation:"&?",gradeNotations:"&?",gradeNotationsWrapperSelector:"@?",offsetTop:"&?"},this.link=function(e,t,i,s){if(!i.id&&!i.column)throw new Error("Id and Column are required.");if(!i.gradeDetail)throw new Error("A grade object must be provided");if(i.gradeDetail&&!i.forUser&&!i.forGroup)throw new Error("forUser or forGroup is required.");e.gradeInput=n.$injector.instantiate(w,{scope:e,element:t,attrs:i,form:s})}}return e.$inject=["$injector"],e}();s.module(y,["puElasticInput",a.a,u.a,b.a,g.b]).directive("bbGradeInput",["$injector",function(e){return e.instantiate(C)}])}).call(this,n("5iHu"))},"Aw+3":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-feedback",use:"icon-small-feedback-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-feedback"><path d="M1 1h14v12h-4l-3 2-3-2H1V1zM4 4h8M4 7h8M4 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},B5op:function(e,t){e.exports='<bb-modal id="confirm-leaving-modal" class="notification success"\n          modal-title-key="course.content.assessment.test.modal.confirmLeaving.title"\n          bb-focus="true"\n          analytics-id-tag-prefix="course.content.assessment.test.modal.confirmLeaving">\n  <div name="modal-contents">\n    <p ng-if="assessmentAttempt.willAutoSubmit" bb-translate>\n      course.content.assessment.test.modal.confirmLeaving.body.autoSubmit\n    </p>\n    <p ng-if="!assessmentAttempt.willAutoSubmit" bb-translate>\n       course.content.assessment.test.modal.confirmLeaving.body.noAutoSubmit\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="course.content.assessment.test.modal.confirmLeaving.close">\n    course.content.assessment.test.modal.confirmLeaving.close\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="$parent.$dismiss()" bb-translate analytics-id="course.content.assessment.test.modal.confirmLeaving.cancel">\n    course.content.assessment.test.modal.confirmLeaving.cancel\n  </button>\n</bb-modal>\n'},BJLZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("5iHu"),s=n("wHJ2"),o=n("e6jQ"),a=n("lEL+"),r="ultra.directives.accessibility.alert",c=function(){function e(e,t){var n=this;this.$injector=e,this.timeout=t,this.restrict="A",this.link=function(e,t,s){n.alertContainerId=s.alertId?s.alertId:o.a(),e.$on("$destroy",(function(){i("#"+n.alertContainerId).remove()})),e.$watch((function(){return t.html()}),(function(t){n.alertArea.html("");var i=Number(s.bbAxAlert)||0;null!=t&&""!==t&&(0===i?n.trigger(t):n.timeout(n.trigger.bind(n,t),e,i,!1))}))},this.trigger=function(e){n.alertArea.append(i('<div id="'+n.alertContainerId+'"></div>').append(e))},this.alertArea=i("body > .ax-alert-area"),0===this.alertArea.length&&(i("body").append('<div class="ax-alert-area" role="alert" aria-atomic="false" aria-live="assertive"></div>'),this.alertArea=i("body > .ax-alert-area"))}return e.$inject=["$injector",a.b],e}();s.module(r,[a.a]).directive("bbAxAlert",["$injector",function(e){return e.instantiate(c)}])},BLb8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a}));var i=function(e,t){t?e.$broadcast("refresh-items",t):e.$broadcast("refresh-items")},s=function(e,t){e.$on("refresh-items",t)},o=function(e,t){e.$on("close-scorm-launch-frame",t)},a=function(e,t){e.content.$fetch().$asPromise().then((function(n){n===e.content?i(e,t):e.content=n}))}},BMpZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),s=n("aHpC"),o=n("yC9S"),a=(n("DlnX"),n("IgL1")),r="ultra.components.directives.buttonComplexTooltip";!function(){function e(e,t){this.$scope=e,this.$rootScope=t}e.prototype.$onInit=function(){this.$scope.buttonComplexTooltip=this},e.prototype.getToolTipTemplate=function(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'},e=Object(i.__decorate)([Object(o.a)({moduleName:r,componentName:"bbButtonComplexTooltip",template:a}),Object(i.__param)(0,Object(s.b)("$scope")),Object(i.__param)(1,Object(s.b)("$rootScope"))],e)}()},BXQP:function(e,t){e.exports='<div class="timestamp" bb-load-bundle="components/directives/duration" ng-cloak bb-cache-compilation="duration-directive">\n  <div ng-if="!duration.needAgo()">\n    <div class="js-split-datetime" ng-if="duration.separateDatetime()">\n      <span class="date" ng-bind="duration.date"></span>\n      <span class="time" ng-bind="duration.time"></span>\n    </div>\n    <bb-datetime ng-if="!duration.separateDatetime()" ng-class="{\'date\':duration.date}" value="date" format="Short"></bb-datetime>\n  </div>\n  <div ng-if="duration.needAgo()"\n       class="js-duration-ago"\n       bb-translate="components.directives.duration.agoText"\n       translate-values="{durationDate: duration.date, durationTime: duration.time}"></div>\n</div>'},BiyI:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-add-plus",use:"icon-small-add-plus-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add-plus"><path d="M8 5v6M11 8H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},C2vp:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"k",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"c",(function(){return f})),n.d(t,"g",(function(){return y})),n.d(t,"i",(function(){return w})),n.d(t,"a",(function(){return C})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return A})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return I}));var i,s=n("D57K"),o=n("X/qj"),a=n("FBBZ"),r=n("pjml"),c=n("nsO7"),l=n("TnpK"),d=n("yMoE"),u=n("A0nf"),p=n("8jzW"),m=n("vhkR"),h=n("nmzr");!function(e){e[e.UNLOADED=0]="UNLOADED",e[e.WAITING=1]="WAITING",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED"}(i||(i={}));var b=function(){function e(e,t,n,s,o,a,r,c,l,d,u,p){void 0===u&&(u=null),void 0===p&&(p=i.UNLOADED),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=s,this.scoreProviderHelper=o,this.ultraState=a,this.gradebookPermissionService=r,this.gridData=c,this.row=l,this.column=d,this.data=u,this.loadState=p}return Object.defineProperty(e.prototype,"isUnloaded",{get:function(){return this.loadState===i.UNLOADED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWaiting",{get:function(){return this.loadState===i.WAITING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this.loadState===i.LOADING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this.loadState===i.LOADED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPosted",{get:function(){return!c.isNull(this.data)&&this.data.grade.isPosted()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNewSubmission",{get:function(){return!c.isNull(this.data)&&this.data.needsGradingAttemptCount>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPastDueZero",{get:function(){return!c.isNull(this.data)&&this.data.grade.isPastDueZero()},enumerable:!0,configurable:!0}),e.prototype.setLoadState=function(e){this.loadState=e},e.prototype.getScore=function(e){var t=this.getGrade();if(null!=t){var n=t.displayGrade,i=this.column.data,s=this.getGridData().getSchema()[i.gradingSchemaId],o=this.$injector.instantiate(d.a,{scope:e,gradeDetail:t});return o.init(i,s),o.displayGrade=n,o.parsedValue}},e.prototype.getGrade=function(){return c.isNull(this.data)?void 0:this.data.grade},e.prototype.view=function(){throw new Error("Unsupported operation exception")},e.prototype.post=function(){return this.data&&this.column.data.grades.$new(this.data.grade.id).postReadyGrades()},Object.defineProperty(e.prototype,"canBeView",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadyToPost",{get:function(){return!this.isPosted},enumerable:!0,configurable:!0}),e.prototype.canPost=function(){return this.gradebookPermissionService.canPostGrades(null,this.column.data)},e.prototype.getGridData=function(){return this.gridData},Object.defineProperty(e.prototype,"isCleanAttemptGrade",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedAutoPost",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canBeEdited",{get:function(){return this.column.data.delegatedGrading?this.canPost():!this.isAnonymousGrading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnonymousGrading",{get:function(){return this.column.data.anonymousGrading},enumerable:!0,configurable:!0}),e}(),g=function(e){function t(t,n,s,o,a,r,c,l,d,u){return e.call(this,t,n,s,o,a,r,c,l,d,u,null,i.LOADED)||this}return Object(s.__extends)(t,e),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(b),v=function(e){function t(t,n,i,s,o,a,r,c,l,d){return e.call(this,t,n,i,s,o,a,r,c,l,d)||this}return Object(s.__extends)(t,e),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(b),f=function(e){function t(t,n,i,s,o,a,r,c,l,d){return e.call(this,t,n,i,s,o,a,r,c,l,d)||this}return Object(s.__extends)(t,e),t.prototype.canPost=function(){return!1},Object.defineProperty(t.prototype,"canBeEdited",{get:function(){return!1},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(b),y=function(e){function t(t,n,i,s,o,a,r,c,l,d){return e.call(this,t,n,i,s,o,a,r,c,l,d)||this}return Object(s.__extends)(t,e),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(b),w=function(e){function t(t,n,i,s,o,a,r,c,l,d){return e.call(this,t,n,i,s,o,a,r,c,l,d)||this}return Object(s.__extends)(t,e),Object.defineProperty(t.prototype,"canBeView",{get:function(){return this.gradebookPermissionService.canViewGrades()},enumerable:!0,configurable:!0}),t.prototype.view=function(){this.ultraState.goPeekState(h.GradeRoutes.GRADE_AND_FEEDBACK,{columnId:this.column.id,userId:this.row.metadata.user.id})},t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(y),C=function(e){function t(t,n,i,s,o,a,r,c,l,d){return e.call(this,t,n,i,s,o,a,r,c,l,d)||this}return Object(s.__extends)(t,e),t.prototype.getGroupId=function(){},Object.defineProperty(t.prototype,"canBeView",{get:function(){return this.gradebookPermissionService.canViewAttempts()&&!!this.data&&this.data.attemptCount>0},enumerable:!0,configurable:!0}),t.prototype.view=function(){var e=this;if(null!=this.column.data.linkId&&(u.a.PartnerCloud.isEqualTo(this.column.data.scoreProviderHandle)||u.a.LTILink.isEqualTo(this.column.data.scoreProviderHandle)))this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.column.id).grades.$new(this.data.grade.id).attempts.$fetch().$then((function(t){var n=a.d({gradableItemId:e.column.id,courseId:e.gridData.course.id,attemptId:t[0].id,membershipId:e.row.metadata.id,linkId:e.column.data.linkId});e.ltiService.launch(n)}));else{var t={courseId:this.gridData.course.id,columnId:this.column.id,gradeId:this.data.grade.id,contentId:this.column.data.contentId,userId:this.row.metadata.user.id};if(this.column.data.isAttemptBased&&this.column.data.isMultipleAttempts())this.ultraState.goPeekState(h.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT,t);else{if(this.data.grade.lastAttemptId)t.attemptId=this.data.grade.lastAttemptId;else if(this.data.grade.attempts&&this.data.grade.attempts.length){var n=c.last(this.data.grade.attempts);t.attemptId=n&&n.id}else if(this.data.grade.groupAttempts&&this.data.grade.groupAttempts.length){n=c.last(this.data.grade.groupAttempts);t.attemptId=n&&n.id}t.groupId=this.getGroupId(),this.scoreProviderHelper.gradingStateRef(this.column.data,this.data.grade,t,p.a.GoToState)}}},t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(y),S=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,n,i,s,o,a,r,c,l,d)||this;return p._group=u,p}return Object(s.__extends)(t,e),t.prototype.getGroupId=function(){return this.group.groupId},Object.defineProperty(t.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column","group"],t}(C),A=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){return e.call(this,t,n,i,s,o,a,r,c,l,d,u)||this}return Object(s.__extends)(t,e),Object.defineProperty(t.prototype,"canBeView",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.view=function(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id,disGroupId:this.getGroupId()})},Object.defineProperty(t.prototype,"isCleanAttemptGrade",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNeedAutoPost",{get:function(){return!0},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column","group"],t}(S),k=function(e){function t(t,n,i,s,o,a,r,c,l,d){return e.call(this,t,n,i,s,o,a,r,c,l,d)||this}return Object(s.__extends)(t,e),Object.defineProperty(t.prototype,"canBeView",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.view=function(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id})},Object.defineProperty(t.prototype,"isCleanAttemptGrade",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNeedAutoPost",{get:function(){return!0},enumerable:!0,configurable:!0}),t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(C),I=function(e){function t(t,n,i,s,o,a,r,c,l,d){return e.call(this,t,n,i,s,o,a,r,c,l,d)||this}return Object(s.__extends)(t,e),Object.defineProperty(t.prototype,"isAttendance",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canBeView",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.view=function(){var e=this.row.metadata.user.id,t=this.row.metadata.id;this.ultraState.goPeekState("attendance-student-records",{userId:e,membershipId:t})},t.$inject=["$q","$injector",m.c,r.o.serviceName,p.c,l.d,o.b,"gridData","row","column"],t}(y)},C36k:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("VPci"),n("67oV");var i=n("wHJ2"),s=n("+4Px"),o=n("e6jQ"),a=n("GbAM"),r=n("lEL+"),c=n("0JpG"),l=n("GwhK"),d="ultra.components.directives.typeahead-search-box",u=function(){function e(e,t,n,i,s){var a=this;this.scope=e,this.$rootScope=t,this.element=n,this.timeout=i,this.bbLocalize=s,this.showResults=!1,this.searchValue="",this.isFocus=!1,this.srLabel=e.srLabel,this.inputPlaceholder=e.inputPlaceholder||"",this.srEmptyResults=e.srEmptyResults||"",this.srResultsFound=e.srResultsFound,this.srNoResultsFound=e.srNoResultsFound,this.clearAriaLabel=e.clearAriaLabel,this.icon=e.icon,this.randomElementId=this.scope.randomElementId||o.a(),this.srResultsFound&&this.srNoResultsFound&&this.clearAriaLabel||this.bbLocalize.loadBundle("components/directives/typeahead").then((function(){a.srResultsFound="typeahead.resultsFound",a.srNoResultsFound="typeahead.noResultsFound",a.clearAriaLabel="typeahead.clear"})),e.$on("typeahead-search-box-clear",(function(){e.typeaheadSearchBox.showResults=!1,e.typeaheadSearchBox.searchResults=[],e.typeaheadSearchBox.searchValue=""}))}return e.prototype.onSearchValueChange=function(){this.searchValue.length>0?this.typeAheadSearch(this.searchValue):this.clear()},e.prototype.itemSelected=function(e){var t=this.scope.itemSelected({item:e});this.showResults=!1,this.searchResults=[],i.isString(t)?this.searchValue=t:this.searchValue="",this.element.find("input").focus()},e.prototype.search=function(e){if(this.searchValue.length>0){var t=this.scope.search({searchText:e});t&&(this.showResults=!1,this.searchResults=[],i.isString(t)?this.searchValue=t:this.searchValue="")}},e.prototype.typeAheadSearch=function(e){var t=this;this.scope.typeAheadSearch({searchText:e}).then((function(e){t.searchResults=e,t.showResults=e.length>0,t.getSearchResultsAlert(t.showResults)}))},e.prototype.getSearchResultsAlert=function(e){var t=this,n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:e?this.srResultsFound:this.srNoResultsFound,noWrap:!0,noEscape:!0});this.timeout((function(){t.$rootScope.$broadcast(a.b,n)}),this.scope,1e3)},e.prototype.handleUpAndDownArrow=function(e){this.showResults||(this.showResults=!0);var t=i.element(e.target);t.hasClass("typeahead-search-entry")?(t=e.keyCode===s.d?t.next():t.prev()).focus():this.element.find(".typeahead-search-entry:first").focus(),e.preventDefault()},e.prototype.onInputBoxKeyDown=function(e){e.keyCode===s.f?this.search(this.searchValue):e.keyCode===s.d||e.keyCode===s.v?this.handleUpAndDownArrow(e):e.keyCode===s.g&&this.showResults&&(this.showResults=!1,e.stopPropagation(),e.preventDefault())},e.prototype.onFocusInputBox=function(e){this.searchResults&&this.searchResults.length>0&&(this.showResults=!0)},e.prototype.onFocusClearBtn=function(e){this.isFocus=!0},e.prototype.onBlurClearBtn=function(e){document.activeElement!==e.currentTarget&&(this.showResults=!1,this.isFocus=!1)},e.prototype.onClickOutside=function(){this.showResults=!1},e.prototype.onInputBoxClick=function(){this.showResults=!0},e.prototype.onResultEntryKeyDown=function(e,t){e.keyCode===s.f||e.keyCode===s.t?this.itemSelected(t):e.keyCode===s.d||e.keyCode===s.v?this.handleUpAndDownArrow(e):e.keyCode===s.u?this.showResults=!1:e.keyCode===s.g&&(this.showResults=!1,this.element.find("input").focus(),e.stopPropagation(),e.preventDefault())},e.prototype.onResultEntryClick=function(e,t){this.itemSelected(t)},e.prototype.clear=function(){var e=this,t=this.searchValue;this.showResults=!1,this.searchResults=[],this.searchValue="",this.timeout((function(){(e.scope.clearSearch||i.noop)({searchText:t})}),this.scope,50)},e.$inject=["scope","$rootScope","element",r.b,c.serviceName],e}(),p=function(){function e(e,t){var n=this;this.$interpolate=e,this.$injector=t,this.restrict="E",this.template=l,this.scope={itemSelected:"&",search:"&",typeAheadSearch:"&",inputPlaceholder:"@?",clearSearch:"&",srEmptyResults:"@",srLabel:"@",srResultsFound:"@?",srNoResultsFound:"@?",clearAriaLabel:"@?",icon:"@?",randomElementId:"@?"},this.transclude=!0,this.replace=!0,this.link=function(e,t){e.typeaheadSearchBox=n.$injector.instantiate(u,{scope:e,element:t})}}return e.$inject=["$interpolate","$injector"],e}();i.module(d,[]).directive("bbTypeaheadSearchBox",["$injector",function(e){return e.instantiate(p)}]).directive("typeaheadInject",(function(){return{link:function(e,t,n,i,s){if(s){var o=e.$new();s(o,(function(e){t.empty(),t.append(e),t.on("$destroy",(function(){o.$destroy()}))}))}}}}))},CG4K:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-custom-toggle-grid",use:"icon-custom-toggle-grid-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-grid"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12M1 12V0M6 12V0M11 12V0" /></symbol>'});s.add(o);e.exports=o},CME4:function(e,t){e.exports='<div class="assessment-question" ng-class="\'js-question-type-\' + assessmentQuestion.getType()">\n  <form name="questionForm"\n        bb-autosave\n        save-func="assessmentQuestion.persist()"\n        validation-func="assessmentQuestion.validate()"\n        delay-autosave="assessmentQuestion.suppressAutosave"\n        novalidate>\n    <fieldset role="presentation">\n      <div class="question-header"\n           ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n           ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n        <legend\n          class="question-label"\n          ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle"\n          bb-translate="components.directives.assessment-question.question-title"\n          translate-values="{index: questionAttempt.visibleQuestionNumber}"\n          role="presentation"\n        ></legend>\n\n        \x3c!--Question goal --\x3e\n        <a ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle && assessmentQuestion.hasGoals()" href="javascript:void(0);"\n           ng-click="assessmentQuestion.openQuestionGoals()"\n           class="question-goal"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.assessment-question.view-goal\', \'title\':\'components.directives.assessment-question.view-goal\'}"\n           analytics-id="components.directives.assessment-question.view-goal.link">\n          <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n        </a>\n\n        <div class="point-value" ng-if="assessmentQuestion.questionConfig.hasPoints" bb-translate="components.directives.assessment-question.number-of-points.plural" translate-values="{numberOfPoints: questionAttempt.question.points}"></div>\n      </div>\n\n      <div class="question-content"></div>\n    </fieldset>\n  </form>\n</div>\n'},D1Wg:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-calendar",use:"icon-medium-calendar-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-calendar"><path d="M4 3H1v20h22V3h-3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M4 1h5v4H4zM15 1h5v4h-5z" /><path d="M1 9h22" stroke-width="2" /><path d="M5 14v-1h2v1H5zM11 14v-1h2v1h-2zM17 14v-1h2v1h-2zM5 19v-1h2v1H5zM11 19v-1h2v1h-2zM17 19v-1h2v1h-2zM9 3h6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"D8d/":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var i=n("wHJ2"),s=n("0JpG"),o=n("A+IJ"),a=n("2a+M"),r=n("pjml"),c=n("lEL+"),l=n("GbAM"),d=n("W6wm"),u="ultra.components.directives.bbDropHandler",p=function(){function t(e,t,n,i,s,o,r,c){var l=this;this.scope=e,this.element=t,this.$rootScope=i,this.$q=s,this.timeout=o,this.dragDropService=r,this.bbLocalizeService=c,this.isDraggingOverFolder=!1,this.isEmptyTarget="emptyTarget"in n,this.dropTargetElement=t.closest(this.dragDropService.dragElementSelector),e.$on("bb-drag-move",(function(){if(l.isEnabledForReordering()&&l.isNotSameDropTarget()&&l.isOnSamePanel()){var e=t.offset(),n=t.height()+e.top,i=t.width()+e.left;l.dragDropService.pointerPosition.left>=e.left&&l.dragDropService.pointerPosition.left<=i&&l.dragDropService.pointerPosition.top>=e.top&&l.dragDropService.pointerPosition.top<=n?l.dragOverFunc(l.dragDropService.pointerPosition.top):l.dragLeaveFunc()}})),e.$on("bb-drag-end",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&l.dropHandlerFunc()})),t.on("drop",(function(t){t.originalEvent.dataTransfer.files&&t.originalEvent.dataTransfer.files.length>0&&e.onFileDropHandler&&e.onFileDropHandler()(t.originalEvent.dataTransfer.files,e.content())})),e.$on("bb-drag-cancel",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&(e.content().id===l.dragDropService.currentDragId&&(l.dragDropService.positionBefore=e.content().id),l.dropHandlerFunc())})),e.$on("keyboard-drag-start",(function(){l.isEnabledForReordering()&&e.content().id===l.dragDropService.currentDragId&&(l.dragPosition=a.b.SELF,l.dragDropService.originalElement=t.closest(l.dragDropService.dragElementSelector),l.dragDropService.currentDragElement=l.dragDropService.originalElement.clone(),l.dragDropService.originalElement.addClass(l.dragDropService.originalElementClass),l.dragDropService.currentDragElement.addClass(l.dragDropService.movableElementClass),l.dragDropService.originalElement.addClass(l.dragDropService.dragHoverClass),l.dragDropService.setDropTarget(e.content().id))})),e.$on("keyboard-drag-end",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&l.isOnSamePanel()&&l.timeout((function(){l.dragDropService.originalElement&&l.dragDropService.originalElement.removeClass(l.dragDropService.originalElementClass),a.b.FOLDER.isEqualTo(l.dragPosition)?l.dragDropService.positionAfter=e.content().id:a.b.TOP.isEqualTo(l.dragPosition)?(l.dragDropService.positionBefore=e.content().id,l.dragDropService.positionAfter=null):(l.dragDropService.positionAfter=e.content().id,l.dragDropService.positionBefore=null),l.dropTargetElement.removeClass(l.dragDropService.dragHoverClass),l.dragDropService.currentDragElement&&l.dragDropService.currentDragElement.remove(),l.isDropPreventedByContentDepthRules().then((function(t){if(!l.isDnDPreventedInDiscussionContext()&&!t&&!l._isDroppingInSamePlace()){var n={dragContentId:l.dragDropService.currentDragId,dragElement:l.dragDropService.currentDragElement,parentFolderId:l.scope.content().parentId,positionAfterId:l.dragDropService.positionAfter,positionBeforeId:l.dragDropService.positionBefore,rootScope:l.$rootScope,targetFolderId:l.scope.content().id};e.onMoveHandler()(n)}l._keyboardEndDragAndClearValues()}))}),e)})),e.$on("keyboard-drag-cancel",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._keyboardEndDragAndClearValues(),l.dropTargetElement.removeClass(l.dragDropService.dragHoverClass),l.dragDropService.originalElement.removeClass(l.dragDropService.originalElementClass),l.dragDropService.currentDragElement.remove())})),e.$on("keyboard-drag-up",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._removeKeyboardPlaceholderAndStyling(),l.isEmptyTarget&&(l.dragPosition=a.b.TOP),a.b.SELF.isEqualTo(l.dragPosition)||a.b.TOP.isEqualTo(l.dragPosition)?e.previousContentId&&e.previousContentId()?l.keyboardMoveUpToItem(e.previousContentId()):e.content().depth>1?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),l.keyboardMoveOntoFolder(e.content().parentId)):(l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):a.b.FOLDER.isEqualTo(l.dragPosition)?l._keyboardMoveAboveThisItem():a.b.BOTTOM.isEqualTo(l.dragPosition)&&l.isDropPreventedByContentDepthRules().then((function(t){l.isAFolder()?!0!==e.isFolderOpen()||!l.isNotSameDropTarget()||l.isDnDPreventedInDiscussionContext()||t?!1!==e.isFolderOpen()||!l.isNotSameDropTarget()||l.isDnDPreventedInDiscussionContext()||t||l.keyboardMoveOntoFolder(l.scope.content().id):(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),l.keyboardMoveIntoFolderAsLastItem()):l._keyboardMoveAboveThisItem()})))})),e.$on("keyboard-drag-down",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&(l._removeKeyboardPlaceholderAndStyling(),l.isEmptyTarget&&(l.dragPosition=a.b.BOTTOM),a.b.SELF.isEqualTo(l.dragPosition)||a.b.BOTTOM.isEqualTo(l.dragPosition)?e.nextContentId&&e.nextContentId()?l.keyboardMoveDownToItem(e.nextContentId()):e.content().depth>1?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),l.keyboardMoveBelowItem(e.content().parentId)):(l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):a.b.FOLDER.isEqualTo(l.dragPosition)?l.isDropPreventedByContentDepthRules().then((function(t){e.isFolderOpen&&!0===e.isFolderOpen()&&l.isNotSameDropTarget()&&!l.isDnDPreventedInDiscussionContext()&&!t?(l.dragDropService.queuedScreenReaderMessages+=" ",l.dragDropService.queuedScreenReaderMessages+=l.bbLocalizeService.translateSync({locale:l.bbLocalizeService.getLocale(l.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),l.keyboardMoveIntoFolderAsFirstItem()):l._keyboardMoveBelowThisItem()})):a.b.TOP.isEqualTo(l.dragPosition)&&l.isDropPreventedByContentDepthRules().then((function(e){l.isAFolder()&&l.isNotSameDropTarget()&&!l.isDnDPreventedInDiscussionContext()&&!e?l.keyboardMoveOntoFolder(l.scope.content().id):l._keyboardMoveBelowThisItem()})))})),e.$on("keyboard-drag-right",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&a.b.FOLDER.isEqualTo(l.dragPosition)&&e.isFolderOpen&&!1===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)})),e.$on("keyboard-drag-left",(function(){l.isEnabledForReordering()&&l.dragDropService.isCurrentDropTarget(e.content().id)&&a.b.FOLDER.isEqualTo(l.dragPosition)&&e.isFolderOpen&&!0===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)})),e.$on("keyboard-move-up-to-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),e.content().id===l.dragDropService.currentDragId?(l.dragPosition=a.b.SELF,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l.isAFolder()?l.scope.isFolderOpen&&!0===l.scope.isFolderOpen()?l.keyboardMoveIntoFolderAsLastItem():(l.dragPosition=a.b.FOLDER,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l._keyboardMoveAboveThisItem())})),e.$on("keyboard-move-down-to-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),e.content().id===l.dragDropService.currentDragId?(l.dragPosition=a.b.SELF,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation()):l.isAFolder()?l.keyboardMoveOntoFolder(l.scope.content().id):l._keyboardMoveBelowThisItem())})),e.$on("keyboard-move-above-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l._keyboardMoveAboveThisItem())})),e.$on("keyboard-move-below-item",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l._keyboardMoveBelowThisItem())})),e.$on("keyboard-move-onto-folder",(function(t,n){l.isEnabledForReordering()&&e.content().id===n&&(l.dragDropService.setDropTarget(e.content().id),l.dragPosition=a.b.FOLDER,l._applyKeyboardPlaceholderAndStyling(),l._informScreenReaderOfNewLocation())})),e.$on("remove-placeholder",(function(){l.isEnabledForReordering()&&l.dragDropService.dropPlaceholderElement&&l.dragDropService.dropPlaceholderElement.remove(),l.isEmptyTarget&&l.element.children("bb-add-content-button").show()}))}return t.prototype._keyboardMoveBelowThisItem=function(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.content().id):this.scope.nextContentId&&this.scope.nextContentId()===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.nextContentId()):(this.dragPosition=a.b.BOTTOM,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())},t.prototype._keyboardMoveAboveThisItem=function(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.content().id):this.scope.previousContentId&&this.scope.previousContentId()===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.previousContentId()):(this.dragPosition=a.b.TOP,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())},t.prototype._informScreenReaderOfNewLocation=function(){var e=this.element.find("[bb-drag-handle]").eq(0).attr("drag-item-name"),t="";if(""!==this.dragDropService.queuedScreenReaderMessages&&(t+=this.dragDropService.queuedScreenReaderMessages,t+=" "),-1!==this.dragDropService.currentDropTargetId.indexOf("blank"))return t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-only-item-in-folder",noWrap:!0}),this.$rootScope.$broadcast(l.a,t),void(this.dragDropService.queuedScreenReaderMessages="");this.scope.previousContentId&&this.scope.previousContentId()||!a.b.TOP.isEqualTo(this.dragPosition)&&!a.b.SELF.isEqualTo(this.dragPosition)?this.scope.nextContentId&&this.scope.nextContentId()||!a.b.BOTTOM.isEqualTo(this.dragPosition)&&!a.b.SELF.isEqualTo(this.dragPosition)||(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-end-of-list",noWrap:!0}),t+=" "):(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-top-of-list",noWrap:!0}),t+=" "),a.b.SELF.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-self",noWrap:!0}):a.b.FOLDER.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-folder",params:{itemName:e},noWrap:!0}):a.b.TOP.isEqualTo(this.dragPosition)?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-above",params:{itemName:e},noWrap:!0}):a.b.BOTTOM.isEqualTo(this.dragPosition)&&(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-below",params:{itemName:e},noWrap:!0})),this.$rootScope.$broadcast(l.a,t),this.dragDropService.queuedScreenReaderMessages=""},t.prototype._applyKeyboardPlaceholderAndStyling=function(){var e=this.dropTargetElement;a.b.SELF.isEqualTo(this.dragPosition)?this.dropTargetElement.addClass(this.dragDropService.dragHoverClass):a.b.FOLDER.isEqualTo(this.dragPosition)?(this.dropTargetElement.before(this.dragDropService.currentDragElement),this.dragDropService.currentDragElement&&(1===this.scope.content().depth?this.dragDropService.currentDragElement.addClass(this.dragDropService.onFolderClass):2===this.scope.content().depth&&this.dragDropService.currentDragElement.addClass(this.dragDropService.onNestedFolderClass))):a.b.BOTTOM.isEqualTo(this.dragPosition)?(e=this.dragDropService.currentDragElement,this.dropTargetElement.after(this.dragDropService.currentDragElement)):a.b.TOP.isEqualTo(this.dragPosition)&&(e=this.dragDropService.currentDragElement,this.dropTargetElement.before(this.dragDropService.currentDragElement)),this._scrollContainer(e)},t.prototype._removeKeyboardPlaceholderAndStyling=function(){this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&(this.dragDropService.currentDragElement.removeClass(this.dragDropService.onFolderClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.onNestedFolderClass),this.dragDropService.currentDragElement.remove())},t.prototype._scrollContainer=function(e){this.dragDropService.scrollDragDropItemsContainer(e.offset().top,a.a.SCROLLING_CONSTANTS.keyboardInteractionDistanceToScroll)},t.prototype._keyboardEndDragAndClearValues=function(){var t=this;this.timeout((function(){e('[bb-drag-handle][drag-item-id="'+t.dragDropService.currentDragId+'"]').focus(),t.dragDropService.clearDropTarget(),t.dragDropService.currentDragId=void 0,t.dragDropService.currentDragType=void 0,t.dragDropService.isKeyboardDragging=!1}),this.scope,0,!1)},t.prototype.isDropPreventedByContentDepthRules=function(){var e=this;if(void 0!==this.dragDropService.currentDragHasFolderChild)return this.dragDropService.currentDragHasFolderChild.then((function(t){return r.r.ContentHandler.Folder.isEqualTo(e.dragDropService.currentDragType)&&(e.isDraggingOverFolder&&e.scope.content().depth===o.l||e.scope.content().depth>o.l||e.isDraggingOverFolder&&t)}));var t=this.$q.defer();return t.resolve(!1),t.promise},t.prototype.isDnDPreventedInDiscussionContext=function(){var e=this;return d.a.Discussions===e.dragDropService.currentDragContext&&r.r.ContentHandler.Folder.isEqualTo(e.dragDropService.currentDragType)&&(this.isDraggingOverFolder&&this.scope.content().depth===o.k||this.scope.content().depth>o.k)},t.prototype.dragOverFunc=function(e){var t=this;if(this.dragDropService.currentDragId&&this.dragDropService.currentDragId!==this.scope.content().id){this.dragDropService.setDropTarget(this.scope.content().id),!this.folderHoverTimeout&&this.scope.isFolderOpen&&!1===this.scope.isFolderOpen()&&(this.dropTargetElement.addClass(this.dragDropService.dragHoverClass),this.folderHoverTimeout=this.timeout((function(){t.isDropPreventedByContentDepthRules().then((function(e){e||t.isDnDPreventedInDiscussionContext()?(t.dragDropService.isShowingDepthMessage=!0,t.$rootScope.$broadcast("show-override-message",t.bbLocalizeService.translateSync({locale:t.bbLocalizeService.getLocale(t.scope),key:t.dragDropService.folderDepthMessageKey}),t.scope.content().id)):(t.scope.$emit("toggle-folder-by-id",t.scope.content().id),t.wasFolderOpened=!0)}))}),this.scope,1500)),this.dragDropService.isShowingDepthMessage&&this.dragDropService.isNotSameDropTarget()&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());var n=e,i=this.element.offset().top+this.element.height()/2,s=this.dragPosition;this.isAFolder()&&(this.isDraggingOverFolder=!0),this.scope.content().id.indexOf("placeholder")>-1?(this.dragDropService.positionAfter=this.scope.content().parentId,this.dragDropService.positionBefore=void 0,this.dragPosition=a.b.BOTTOM):n<=i?(this.dragDropService.positionBefore=this.scope.content().id,this.dragDropService.positionAfter=void 0,this.dragPosition=a.b.TOP):(this.dragDropService.positionAfter=this.scope.content().id,this.dragDropService.positionBefore=void 0,this.dragPosition=a.b.BOTTOM),(this.dragDropService.isNotSameDropTarget()||this.dragPosition!==s)&&(this._moveDropPlaceholderElement(),this.isEmptyTarget&&this.element.children().hide())}},t.prototype._moveDropPlaceholderElement=function(){var e=this;if(this.$rootScope.$broadcast("remove-placeholder"),this.dragDropService.currentDragId!==this.dragDropService.currentDropTargetId){e.dragDropService.positionBefore&&e.dragDropService.currentDropTargetId!==e.dragDropService.idOfNextItem?this.dropTargetElement.before(this.dragDropService.dropPlaceholderElement):e.dragDropService.currentDropTargetId.indexOf("placeholder")>-1&&e.dragDropService.idOfNextItem===e.dragDropService.currentDropTargetId||!e.dragDropService.positionAfter||e.dragDropService.currentDropTargetId===e.dragDropService.idOfPreviousItem||this.dropTargetElement.after(this.dragDropService.dropPlaceholderElement)}},t.prototype._isDroppingInSamePlace=function(){if(null!=this.dragDropService.positionAfter&&this.scope.previousContentId&&this.dragDropService.positionAfter===this.scope.previousContentId()||this.dragDropService.positionAfter===this.dragDropService.currentDragId||null!=this.dragDropService.positionBefore&&this.scope.nextContentId&&this.dragDropService.positionBefore===this.scope.nextContentId()||this.dragDropService.positionBefore===this.dragDropService.currentDragId)return!0},t.prototype.dropHandlerFunc=function(){var e=this;this.timeout.cancel(this.folderHoverTimeout),this.dropTargetElement.parents("[data-parent-id]").last().removeAttr("style"),this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("remove-placeholder"),this.$rootScope.$broadcast("file-drag-restore"),this.dragDropService.isShowingDepthMessage&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());var t={dragContentId:this.dragDropService.currentDragId,originalElement:this.dragDropService.originalElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};this.isDropPreventedByContentDepthRules().then((function(n){e._isDroppingInSamePlace()||e.isDnDPreventedInDiscussionContext()?e.dropCleanupFunc():!n&&e.isDraggingOverFolder?e.scope.$$phase||e.scope.$root&&e.scope.$root.$$phase?(e.scope.onMoveIntoFolderHandler()(t),e.dropCleanupFunc()):e.scope.$apply((function(){e.scope.onMoveIntoFolderHandler()(t),e.dropCleanupFunc()})):n?e.dropCleanupFunc():e.scope.$$phase||e.scope.$root&&e.scope.$root.$$phase?(e.scope.onMoveHandler()(t),e.dropCleanupFunc()):e.scope.$apply((function(){e.scope.onMoveHandler()(t),e.dropCleanupFunc()})),e.isDraggingOverFolder=!1}))},t.prototype.dropCleanupFunc=function(){this.wasFolderOpened&&(this.wasFolderOpened=!1,this.scope.$emit("toggle-folder-by-id",this.scope.content().id)),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove()},t.prototype.dragLeaveFunc=function(){var e=this;this.isDraggingOverFolder=!1,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.timeout.cancel(this.folderHoverTimeout),this.folderHoverTimeout=void 0,this.isDropPreventedByContentDepthRules().then((function(t){t&&(e.dragDropService.isShowingDepthMessage=!1,e.broadcastShowOverrideMessage())}))},t.prototype.broadcastShowOverrideMessage=function(){var e=this;this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id):this.scope.$apply((function(){return e.$rootScope.$broadcast("show-override-message",void 0,e.scope.content().id)}))},t.prototype.keyboardMoveUpToItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-up-to-item",e)}),this.scope)},t.prototype.keyboardMoveDownToItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-down-to-item",e)}),this.scope)},t.prototype.keyboardMoveBelowItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-below-item",e)}),this.scope)},t.prototype.keyboardMoveAboveItem=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-above-item",e)}),this.scope)},t.prototype.keyboardMoveOntoFolder=function(e){var t=this;this.timeout((function(){t.dragDropService.clearDropTarget(),t.$rootScope.$broadcast("keyboard-move-onto-folder",e)}),this.scope)},t.prototype.keyboardMoveIntoFolderAsLastItem=function(){var e=this.scope.content().children;e.length>0?this.keyboardMoveBelowItem(e[e.length-1].id):this.keyboardMoveBelowItem(this.scope.content().id+"blank")},t.prototype.keyboardMoveIntoFolderAsFirstItem=function(){var e=this.scope.content().children;e.length>0?this.keyboardMoveAboveItem(e[0].id):this.keyboardMoveAboveItem(this.scope.content().id+"blank")},t.prototype.isNotSameDropTarget=function(){return this.scope.content().id!==this.dragDropService.currentDragId},t.prototype.isOnSamePanel=function(){return this.element.closest(".panel-content").is(this.dragDropService.originalElement.closest(".panel-content"))},t.prototype.isEnabledForReordering=function(){return!(this.scope.disableForReordering&&this.scope.disableForReordering())},t.prototype.isAFolder=function(){return null!=this.scope.isFolderOpen},t.$inject=["scope","element","attrs","$rootScope","$q",c.b,a.d,s.serviceName],t}(),m=function(){function e(e){var t=this;this.$injector=e,this.scope={onMoveIntoFolderHandler:"&?",onMoveHandler:"&",onFileDropHandler:"&",isFolderOpen:"&?",content:"&",previousContentId:"&?",nextContentId:"&?",disableForReordering:"&?"},this.restrict="A",this.link=function(e,n,i){e.dropHandlerDirective=t.$injector.instantiate(p,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(u,[a.c,c.a]).directive("bbDropHandler",["$injector",function(e){return e.instantiate(m)}])}).call(this,n("5iHu"))},DAbe:function(e,t){e.exports="<div ng-transclude></div>"},DD3f:function(e,t,n){},DDBr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("wHJ2"),s=n("0JpG"),o=n("kwLz"),a=n("1ZbL"),r="ultra.components.directives.feedback.feedbackList",c={Class:o.FeedbackList,bindingNames:["analyticsId","configProps","secondaryGradersFeedback"],renderLocalized:!0};i.module(r,[s.moduleName]).component("bbFeedbackList",Object(a.a)(c))},DUMb:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-information",use:"icon-medium-information-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-information"><path d="M12 23c6.0751 0 11-4.9249 11-11S18.0751 1 12 1 1 5.9249 1 12s4.9249 11 11 11z" stroke-width="2" /><path d="M12 6.5a.5.5 0 100-1 .5.5 0 000 1z" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 9h2v9M10 18h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},DXZ4:function(e,t,n){},DYK3:function(e,t,n){"use strict";n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return q})),n.d(t,"i",(function(){return z})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return V})),n.d(t,"h",(function(){return Q})),n.d(t,"e",(function(){return K})),n.d(t,"f",(function(){return W})),n.d(t,"g",(function(){return J}));var i,s=n("D57K"),o=(n("Yi7M"),n("bBUr"),n("sZYy"),n("ykC+"),n("5iHu")),a=n("nsO7"),r=n("e0uO"),c=n("+sRu"),l=n("0vQT"),d=n("A0nf"),u=n("vYaK"),p=n("t6LE"),m=n("Sa5G"),h=n("RNuw"),b=n("X/qj"),g=n("yC9S"),v=n("0JpG"),f=n("e6jQ"),y=n("lEL+"),w=n("TnpK"),C=n("Qbdf"),S=n("Fvsw"),A=n("Ed3w"),k=n("O94r"),I=n.n(k),O=n("5MwF"),D=n("pzAO"),T=n.n(D),$=n("Vng8"),x=n("R+Yw"),E=n("vhkR"),P=n("aHpC"),R=n("Q/M7"),L=n("JfV0"),j=n("3Nzc"),G=n("CME4"),M=n("y0xW"),_=n("5XZZ"),F=n("+O05"),B=10,N="question-attempt_exit-question-regrading-editing-mode",q="question-attempt_close-other-editing-question",z="question-attempt_save-or-cancel-regrading-question";!function(e){e.CANCEL="cancel",e.SAVE="save",e.SAVE_WITHOUT_REGRADING="save-without-regrading"}(i||(i={}));var V=function(){function e(e){this.$injector=e}return e.prototype.createQuestion=function(e,t,n){return{title:e,questionText:{},points:B,positionBefore:t.positionBefore,positionAfter:t.positionAfter}},e.prototype.getHandlerByMode=function(e,t,n){switch(e.mode().toString()){case r.a.QuestionReview.toString():return this.getQuestionReviewHandler(e,t,n);case r.a.AttemptAuthoring.toString():return this.getAttemptAuthoringHandler(e,t,n);case r.a.AttemptGrading.toString():return this.getAttemptGradingHandler(e,t,n);case r.a.AttemptReview.toString():return this.getAttemptReviewHandler(e,t,n);default:throw new Error("Invalid mode provided")}},e.prototype.getQuestionReviewHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.prototype.getAttemptAuthoringHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.prototype.getAttemptGradingHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.prototype.getAttemptReviewHandler=function(e,t,n){throw new Error("This is an abstract method. It must be implemented in the subclass!")},e.$inject=["$injector"],e}(),H=function(){function e(e,t,n,i,s,o,a,r,c){var l;this.$compile=e,this.$window=t,this.attrs=n,this.element=i,this.gradebookPermissionService=s,this.scope=o,this.timeout=a,this.localizeService=r,this.settingsDefault=c,this.canEnterGrades=!1,this.canViewGrades=!1,this.elementId="assessment-question_"+f.a(),this.formName=this.elementId+"_form",this.questionConfig={hasPoints:!0,hasQuestionCountTitle:!0,points:B,showQuestionControls:!0},this.questionSpecificTemplateReady=!1,this.questionRegradingEnabled=O.a.features.questionRegrading,this.canEnterGrades=this.gradebookPermissionService.canEnterGrades(),this.canViewGrades=this.gradebookPermissionService.canViewGrades(),c&&(this.questionConfig=c),this.questionAttempt=null===(l=this.scope.gradedQuestionAttempt)||void 0===l?void 0:l.questionAttempt,g.b.OnWindow("drop.document dragover.document",(function(e){e.preventDefault()}),o)}return e.prototype.insertQuestionSpecificTemplate=function(e){var t=this;this.timeout((function(){var n=o(e),i=t.element.find(".question-container");i.length>0?n.insertAfter(i):t.element.find(".question-content").prepend(n),t.$compile(n)(t.scope),t.questionSpecificTemplateReady=!0}),this.scope,0,!1)},e.$inject=[],e=Object(s.__decorate)([Object(s.__param)(0,Object(P.b)("$compile")),Object(s.__param)(1,Object(P.b)("$window")),Object(s.__param)(2,Object(P.b)("attrs")),Object(s.__param)(3,Object(P.b)("element")),Object(s.__param)(4,Object(P.b)(b.b)),Object(s.__param)(5,Object(P.b)("scope")),Object(s.__param)(6,Object(P.b)(y.b)),Object(s.__param)(7,Object(P.b)(v.serviceName))],e)}(),U=function(e){function t(t,n,i,s,o,a,r,c,l){var u,p=e.call(this,t,n,i,s,o,a,r,c,l)||this;return p.$compile=t,p.$window=n,p.attrs=i,p.element=s,p.gradebookPermissionService=o,p.scope=a,p.timeout=r,p.localizeService=c,p.settingsDefault=l,p.attempt=p.scope.attempt,p.toolAttemptDetailItem=null===(u=p.attempt)||void 0===u?void 0:u.getToolAttemptDetailItemEx(d.a.Test),p}return Object(s.__extends)(t,e),t.prototype.getAnswerResult=function(){return this.isFullCredit()?l.a.FullCredit:this.isCorrect()?l.a.Correct:this.isPartiallyCorrect()?l.a.Partial:l.a.Incorrect},t.prototype.getAnswerStyles=function(e,t,n){var i;return I()(((i={})[c.a.IsSelected]=e,i[c.a.AnswerNotSelected]=!e&&!t,i[c.a.CorrectAnswerSelected]=n&&e&&t,i[c.a.CorrectAnswerNotSelected]=n&&!e&&t,i[c.a.IncorrectAnswerSelected]=n&&e&&!t,i))},t.prototype.getAutomatedQuestionFeedback=function(){var e,t;return null===(t=null===(e=this.questionAttempt)||void 0===e?void 0:e.automatedFeedback)||void 0===t?void 0:t.rawText},t.prototype.getCorrectnessColor=function(){return this.isFullCredit()||this.isCorrect()?"correct":this.isPartiallyCorrect()?"partial":"incorrect"},t.prototype.getCorrectnessIcon=function(){return this.isFullCredit()||this.isCorrect()?"check-circle":this.isPartiallyCorrect()?"partial-credit":"close-circle"},t.prototype.getCorrectnessName=function(){return this.isFullCredit()||this.isCorrect()?this.localizeService.translateSync({key:"components.directives.assessment-question.status.correct",locale:this.localizeService.getLocale(this.scope)}):this.isPartiallyCorrect()?this.localizeService.translateSync({key:"components.directives.assessment-question.status.partial",locale:this.localizeService.getLocale(this.scope)}):this.localizeService.translateSync({key:"components.directives.assessment-question.status.incorrect",locale:this.localizeService.getLocale(this.scope)})},t.prototype.isCorrect=function(){return this.questionAttempt.correct},t.prototype.wasAnsweredLate=function(){var e;return!!((null===(e=this.toolAttemptDetailItem)||void 0===e?void 0:e.needAttention())&&this.isAnsweredAfterSoftTimeLimit())},t.prototype.isAnsweredAfterSoftTimeLimit=function(){return this.toolAttemptDetailItem.isAnsweredAfterSoftTimeLimit(this.questionAttempt)},t.prototype.isFullCredit=function(){return this.questionAttempt.question.fullCredit},t.prototype.isPartiallyCorrect=function(){return this.questionAttempt.partiallyCorrect},t.$inject=[],t=Object(s.__decorate)([Object(s.__param)(0,Object(P.b)("$compile")),Object(s.__param)(1,Object(P.b)("$window")),Object(s.__param)(2,Object(P.b)("attrs")),Object(s.__param)(3,Object(P.b)("element")),Object(s.__param)(4,Object(P.b)(b.b)),Object(s.__param)(5,Object(P.b)("scope")),Object(s.__param)(6,Object(P.b)(y.b)),Object(s.__param)(7,Object(P.b)(v.serviceName))],t)}(H),Q=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,l,u)||this;return p.$compile=t,p.$sce=n,p.$window=i,p.attrs=s,p.element=o,p.gradebookPermissionService=a,p.scope=r,p.timeout=c,p.localizeService=l,p.ultraState=d,p.settingsDefault=u,p.question=p.scope.question,o.append(t(_)(r)),p}return Object(s.__extends)(t,e),t.$inject=[],t=Object(s.__decorate)([Object(s.__param)(0,Object(P.b)("$compile")),Object(s.__param)(1,Object(P.b)("$sce")),Object(s.__param)(2,Object(P.b)("$window")),Object(s.__param)(3,Object(P.b)("attrs")),Object(s.__param)(4,Object(P.b)("element")),Object(s.__param)(5,Object(P.b)(b.b)),Object(s.__param)(6,Object(P.b)("scope")),Object(s.__param)(7,Object(P.b)(y.b)),Object(s.__param)(8,Object(P.b)(v.serviceName)),Object(s.__param)(9,Object(P.b)(w.d))],t)}(H),K=function(e){function t(t,n,i,o,a,r,c,l,d,u,p){var m=e.call(this,t,n,i,a,r,l,d,c,p)||this;m.$compile=t,m.$window=n,m.attrs=i,m.CourseModel=o,m.element=a,m.gradebookPermissionService=r,m.localizeService=c,m.scope=l,m.timeout=d,m.ultraState=u,m.settingsDefault=p,m.readOnly=!1,m.attemptIsDirty=!1,m.suppressAutosave=!1,a.append(t(G)(l)),l.questionAttempt.question.ui=Object(s.__assign)(Object(s.__assign)({},l.questionAttempt.question.ui),{positionId:m.elementId});var b=o.$new(u.params.courseId).gradebook.attempts.$new(m.scope.questionAttempt.attemptId);return m.scope.questionAttempt=b.assessment.answers.$buildRaw(m.scope.questionAttempt),l.$emit("bb-register-question-attempt-handlers",(function(){return m.attemptIsDirty}),(function(){return m.scope.questionAttempt}),m.prepareGivenAnswer),h.a(m.scope,m.scope.questionForm,(function(){m.attemptIsDirty=!0})),m.attemptQuestion=m.scope.questionAttempt.question,m.autoSaveCount=0,m.element.attr("autosaved",m.autoSaveCount),l.$on("bb-assessment-attempt-question-readonly",(function(e,t){m.readOnly=t})),m.initializeGivenAnswer(),m}return Object(s.__extends)(t,e),t.prototype.prepareGivenAnswer=function(e){},t.prototype.persist=function(){var e=this;if(this.scope.questionAttempt.questionType.toString()!==m.A.PresentationOnly.toString())return this.prepareGivenAnswer(this.scope.questionAttempt),this.scope.questionAttempt.$patch(["questionType","givenAnswer","givenAnswers"]).$asPromise().then((function(t){return e.incrementAutoSaveCount(),e.setDirtyAndUpdateGivenAnswer(t)}))},t.prototype.validate=function(){return!0},t.prototype.getCurrentForm=function(){return this.scope.questionForm},t.prototype.getType=function(){return this.attemptQuestion.questionType.toString()},t.prototype.hasGoals=function(){return this.attemptQuestion&&this.attemptQuestion.alignedGoals&&this.attemptQuestion.alignedGoals.length},t.prototype.incrementAutoSaveCount=function(){this.element.attr("autosaved",this.autoSaveCount+=1)},t.prototype.openQuestionGoals=function(){this.ultraState.goPeekState("question-goal-alignment-for-student",{questionId:this.scope.questionAttempt.questionId,questionIndex:this.scope.questionAttempt.visibleQuestionNumber})},t.$inject=[],t=Object(s.__decorate)([Object(s.__param)(0,Object(P.b)("$compile")),Object(s.__param)(1,Object(P.b)("$window")),Object(s.__param)(2,Object(P.b)("attrs")),Object(s.__param)(3,Object(P.b)(u.serviceName)),Object(s.__param)(4,Object(P.b)("element")),Object(s.__param)(5,Object(P.b)(b.b)),Object(s.__param)(6,Object(P.b)(v.serviceName)),Object(s.__param)(7,Object(P.b)("scope")),Object(s.__param)(8,Object(P.b)(y.b)),Object(s.__param)(9,Object(P.b)(w.d))],t)}(H),W=function(e){function t(t,n,o,a,r,c,l,d,u,p,m,h,b,g,v,f){var y=e.call(this,t,o,a,r,c,l,d,u,f)||this;return y.$compile=t,y.$sce=n,y.$window=o,y.attrs=a,y.element=r,y.gradebookPermissionService=c,y.scope=l,y.timeout=d,y.localizeService=u,y.contextCourse=p,y.$ngRedux=m,y.scheduleTask=h,y.ltiService=b,y.KloudlessModalService=g,y.contextService=v,y.settingsDefault=f,y.isEditing=!1,y.refreshingAnswers=!1,y.saveRegradingQuestion=function(e,t){return Object(s.__awaiter)(y,void 0,void 0,(function(){var n,o=this;return Object(s.__generator)(this,(function(s){return Object($.shouldShowRegradingWarning)(e,t)?this.cancelOrSaveEditingQuestion(i.SAVE):this.cancelOrSaveEditingQuestion(i.SAVE_WITHOUT_REGRADING),this.questionAttempt.question=t,void 0===this.questionAttempt.question.ui&&(this.questionAttempt.question.ui={}),this.questionAttempt.question.ui.prevQuestion=e,this.updateQuestionView(),this.scope.$applyAsync(),this.timeout((function(){o.refreshingAnswers=!1}),this.scope,0),n=t.sourceInfo?t.sourceInfo.id:this.scope.assessmentId(),[2,Object(L.persistQuestion)(e,t,{assessmentId:n,courseId:this.contextCourse.courseId}).then((function(n){if(Object($.shouldShowRegradingWarning)(e,t)){o.scheduleTask.scheduleTask({courseId:o.contextCourse.courseId,taskName:A.a.QuestionRegrading,scope:o.scope.$root,notifier:function(){o.scope.$root.$broadcast(j.a)},delay:1e4},!1)}return n})).catch((function(){o.questionAttempt.question=e,o.destroyEditingQuestion(),o.scope.$applyAsync()}))]}))}))},y.questionTitle=y.localizeService.translateSync({key:"components.directives.assessment-question.question-title",params:{index:y.questionAttempt.visibleQuestionNumber},locale:y.localizeService.getLocale(y.scope)}),y.renderQuestionAttempt(),l.$on(q,(function(e,t){t!==y.scope.index()&&y.isEditing&&y.destroyEditingQuestion()})),y}return Object(s.__extends)(t,e),t.prototype.trustAsHtml=function(e){return this.$sce.trustAsHtml(e)},t.prototype.getQuestionRegradingOverflowMenu=function(){var e=this;return[{icon:"draw",labelKey:"components.directives.attempt-canvas.freeform-response.grade.question.regrade",onClick:function(){return Object(s.__awaiter)(e,void 0,void 0,(function(){return Object(s.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.editRespondedQuestion(this.questionAttempt.question)];case 1:return e.sent(),[2]}}))}))}}]},Object.defineProperty(t.prototype,"isCurrentCourseComplete",{get:function(){return this.contextCourse.course.isComplete()},enumerable:!0,configurable:!0}),t.prototype.updateQuestionView=function(){var e=this.questionAttempt.questionType;L.QuestionType.Essay.isEqualTo(e)&&L.QuestionType.PresentationOnly.isEqualTo(e)||(this.refreshingAnswers=!0,this.constructViewHelper())},t.prototype.getRegradingContainer=function(){return this.element.find(".regrading-container")[0]},t.prototype.destroyEditingQuestion=function(){this.isEditing=!1,T.a.destroyReactControl(this.getRegradingContainer())},t.prototype.cancelOrSaveEditingQuestion=function(e){this.destroyEditingQuestion(),this.scope.$emit(z,e)},t.prototype.renderQuestionAttempt=function(){this.element.append(this.$compile(M)(this.scope))},t.prototype.editRespondedQuestion=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(s.__generator)(this,(function(i){switch(i.label){case 0:return this.closeOtherEditing(),this.isEditing=!0,[4,this.buildQuestionProps(e)];case 1:return t=i.sent(),this.timeout((function(){T.a.renderQuestion(n.getRegradingContainer(),n.$ngRedux,n.localizeService.getLocale(n.scope),n.localizeService.intl,n.localizeService.frmt,t,n.contextCourse.course.isOrganization,(function(){n.element.find(".grade").find("input").focus()}))}),this.scope,0),[2]}}))}))},t.prototype.closeOtherEditing=function(){this.scope.$emit(N,this.scope.index())},t.prototype.buildPluginsConfig=function(){return Object(s.__awaiter)(this,void 0,void 0,(function(){var e;return Object(s.__generator)(this,(function(t){switch(t.label){case 0:return(e={}).contentMarket={apiBasePath:Object(R.c)(O.a.apiBasePath),babelfishInstance:this.localizeService.intl,babelfishFormatInstance:this.localizeService.frmt,getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService),locale:this.localizeService.getLocale(this.scope),openContentMarket:this.ltiService.getOpenContentMarketConf(this.scope),xsrfToken:this.contextService.xsrfToken},[4,this.KloudlessModalService.initialize()];case 1:return t.sent(),this.KloudlessModalService.isCloudServiceAvailable&&(e.insertKloudlessFile={openKloudlessModal:this.KloudlessModalService.getModalCallback(this.scope)}),e.insertYoutubeVideo={babelfishInstance:this.localizeService.intl,babelfishFormatInstance:this.localizeService.frmt,courseId:this.contextCourse.courseId,getEmbedSrc:this.ltiService.configureAndInitInlineLaunch.bind(this.ltiService)},[2,e]}}))}))},t.prototype.buildQuestionProps=function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){var t,n,o=this;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:return t=Object.assign(e,{assessmentId:this.scope.assessmentId(),permissions:{edit:!0}}),L.QuestionType.Matching.isEqualTo(e.questionType)&&e.answers.forEach((function(e){e.ui={id:Object(f.b)()}})),n={courseId:this.contextCourse.courseId,persistQuestion:this.saveRegradingQuestion,deleteQuestion:a.noop,openGoals:a.noop,onQuestionMadeDirty:a.noop,question:t},[4,this.buildPluginsConfig()];case 1:return[2,(n.pluginsConfig=s.sent(),n.questionBeingEditedId=e.id,n.onQuestionEdit=a.noop,n.isAnyQuestionDirty=!1,n.hasSubmissions=!0,n.questionTitle=this.questionTitle,n.hasQuestionEditPermissions=!0,n.onQuestionEditCancel=function(){o.cancelOrSaveEditingQuestion(i.CANCEL)},n)]}}))}))},t.prototype.allowCollapsingOfAutomatedFeedbackIfShown=function(){return!0},t.prototype.canShowCorrectAnswerRelatedDetail=function(){return!this.refreshingAnswers},t.prototype.canShowQuestionScoreRelatedDetail=function(){return p.AttemptStatus.Completed.isEqualTo(this.questionAttempt.attemptStatus)},t.$inject=[],t=Object(s.__decorate)([Object(s.__param)(0,Object(P.b)("$compile")),Object(s.__param)(1,Object(P.b)("$sce")),Object(s.__param)(2,Object(P.b)("$window")),Object(s.__param)(3,Object(P.b)("attrs")),Object(s.__param)(4,Object(P.b)("element")),Object(s.__param)(5,Object(P.b)(b.b)),Object(s.__param)(6,Object(P.b)("scope")),Object(s.__param)(7,Object(P.b)(y.b)),Object(s.__param)(8,Object(P.b)(v.serviceName)),Object(s.__param)(9,Object(P.b)(C.e)),Object(s.__param)(10,Object(P.b)("$ngRedux")),Object(s.__param)(11,Object(P.b)(A.c)),Object(s.__param)(12,Object(P.b)(E.c)),Object(s.__param)(13,Object(P.b)(x.b)),Object(s.__param)(14,Object(P.b)(S.b))],t)}(U),J=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,d,u)||this;return p.$compile=t,p.$sce=n,p.$window=i,p.attrs=s,p.element=o,p.gradebookPermissionService=a,p.scope=r,p.timeout=c,p.ultraState=l,p.localizeService=d,p.settingsDefault=u,p.attemptQuestion=p.questionAttempt.question,o.append(t(_)(r)),p}return Object(s.__extends)(t,e),t.prototype.trustAsHtml=function(e){return this.$sce.trustAsHtml(e)},t.prototype.hasGoals=function(){return this.attemptQuestion&&this.attemptQuestion.alignedGoals&&this.attemptQuestion.alignedGoals.length},t.prototype.openQuestionGoals=function(){this.ultraState.goPeekState("question-goal-alignment-for-student",{questionId:this.questionAttempt.questionId,questionIndex:this.questionAttempt.visibleQuestionNumber})},t.prototype.allowCollapsingOfAutomatedFeedbackIfShown=function(){return!1},t.prototype.canShowCorrectAnswerRelatedDetail=function(){return F.a.studentCanViewAttemptResults(this.attempt)&&this.questionAttempt.isCorrectAnswersVisible},t.prototype.canShowQuestionScoreRelatedDetail=function(){return F.a.studentCanViewAttemptResults(this.attempt)&&this.questionAttempt.isScoreVisible},t.prototype.wasAnsweredLate=function(){return this.canShowQuestionScoreRelatedDetail()&&e.prototype.wasAnsweredLate.call(this)},t.$inject=[],t=Object(s.__decorate)([Object(s.__param)(0,Object(P.b)("$compile")),Object(s.__param)(1,Object(P.b)("$sce")),Object(s.__param)(2,Object(P.b)("$window")),Object(s.__param)(3,Object(P.b)("attrs")),Object(s.__param)(4,Object(P.b)("element")),Object(s.__param)(5,Object(P.b)(b.b)),Object(s.__param)(6,Object(P.b)("scope")),Object(s.__param)(7,Object(P.b)(y.b)),Object(s.__param)(8,Object(P.b)(w.d)),Object(s.__param)(9,Object(P.b)(v.serviceName))],t)}(U)},De5J:function(e,t,n){},E7GM:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="grade-grid-group-confirm-dialog" aria-haspopup="true" role="dialog">\n  <div class="message-wrapper">\n    <div class="message">\n      <span bb-translate>components.directives.grade.grid.confirmContent</span>\n    </div>\n    <div class="buttons">\n      <button class="button" \n              ng-click="saveGroup()" \n              bb-translate  \n              analytics-id="components.directives.grade.grid.yes">components.directives.grade.grid.yes</button>\n      <button class="button button--secondary" \n              ng-click="saveOne()" \n              ng-disabled="isSaveOneDisabled" \n              analytics-id="components.directives.grade.grid.no"\n              bb-translate>components.directives.grade.grid.no</button>\n    </div>\n  </div>\n</div>'},EGJL:function(e,t){e.exports='<div ng-class="{\'is-restricted\': graderColumn.column.isHidden() && !graderColumn.column.externalGrade, \'grader-column\': true}">\n  <div class="row tabular-row js-row grader-column-item" bb-click-to-invoke-child="a.bb-click-target" aria-describedby="guidance-moment-grade-click">\n    <div ng-class="{\'medium-5\': !graderColumn.isCourseView, \'medium-4\': graderColumn.isCourseView}" class="columns">\n      <div class="element-card">\n        <div bb-content-item-icon show-alert-icon="graderColumn.showAlertIcon()" content-column="graderColumn.column" class="element-image" ng-if="graderColumn.column"></div>\n        <div class="element-details">\n          <div ng-class="{\'gradebook-overall-grade-title\': graderColumn.column.externalGrade}">\n            <bb-svg-icon\n              id="{{graderColumn.column.id + \'grade-not-visible-icon\'}}"\n              size="small"\n              ng-if="graderColumn.column.externalGrade && !graderColumn.column.visible"\n              icon="invisible"\n              class="visibility-icon"\n              role="img"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n            ></bb-svg-icon>\n            <span class="name ellipse" ng-if="graderColumn.itemLinkIsClickable">\n              <a  class="bb-click-target"\n                  ng-click="graderColumn.handleColumnClick()"\n                  href="javascript:void(0);"\n                  bb-key-hide-ftue="grades.grader.base.column.clickItem"\n                  id="{{\'graderColumn_\' + graderColumn.course.courseId}}"\n                  analytics-id="components.directives.grade.graderColumn.name.link"\n                  ng-attr-aria-describedby="{{graderColumn.column.externalGrade && !graderColumn.column.visible ? graderColumn.column.id + \'grade-not-visible-icon\' : undefined}}">\n                  {{graderColumn.column.columnName}}\n              </a>\n            </span>\n          </div>\n          <span class="name ellipsis" ng-if="!graderColumn.itemLinkIsClickable">\n            <span id="{{ \'graderColumn_\' + graderColumn.course.courseId}}">{{graderColumn.column.columnName}}</span>\n          </span>\n          <div class="name-controls" ng-if="::!graderColumn.column.isOffline()">\n            <span class="secondary-text" ng-if="::graderColumn.column.seemsAttemptBased()">\n              <span ng-if="graderColumn.column.dueDate && graderColumn.numMissingStudents">\n                <span class="items-missing" bb-translate translate-values="{missingCount: graderColumn.numMissingStudents}">components.directives.grade.grader-column.studentsMissing.plural</span>\n                <span ng-if="!graderColumn.column.isOffline()">|</span>\n              </span>\n              <span ng-if="graderColumn.column.summary.numStudentSubmissions && graderColumn.column.summary.numEligibleToBeGraded">\n                <bb-translate ng-if="graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{participatedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsParticipated.plural</bb-translate>\n                <bb-translate ng-if="!graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{submittedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsSubmitted.plural</bb-translate>\n              </span>\n            </span>\n            <span class="secondary-text" ng-if="::graderColumn.column.isAttendance() && graderColumn.column.summary.averageGradeForStudents">\n                <span bb-translate translate-values="{percentage: graderColumn.column.summary.averageGradeForStudents}">components.directives.grade.grader-column.attendance.average</span>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="graderColumn.isCourseView" class="date columns medium-2 large-2 hide-for-small-only">\n      <bb-datetime ng-if="!graderColumn.column.isAttendance()" format="Short" value="graderColumn.column.dueDate">\n      </bb-datetime>\n      <span ng-if="graderColumn.column.isAttendance()" bb-translate>components.directives.grade.grader-column.attendance.ongoing</span>\n    </div>\n\n    <div ng-class="{\'grade-status-container columns medium-7\': !graderColumn.isCourseView, \'columns medium-5 course-only-grade-status-container\': graderColumn.isCourseView}">\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}" ng-if="!graderColumn.column.isAttendance()">\n        <div ng-switch="graderColumn.column.isCollectExternalSubmissions()">\n          \x3c!-- External submission statuses are calculated differently from others since the instructor is initiating the attempt\n          when they go to grade the user. Therefore, we want to include people who have no submission as ready to be graded //--\x3e\n          <div ng-switch-when="true">\n            <div ng-switch="graderColumn.column.summary.getStatus().toString()">\n              <div class="grade-count" ng-switch-when="NEEDS_GRADING">\n                <span bb-translate translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0">|</span>\n                <span class="grade-posted-count-before" ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0"\n                      bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">\n                  components.directives.grade.grader-column.statuses.numToPost.plural\n                </span>\n              </div>\n              <span ng-switch-when="NEEDS_POSTING">\n                <span bb-translate ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0"\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0">|</span>\n                <span bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">\n                  components.directives.grade.grader-column.statuses.numToPost.plural\n                </span>\n              </span>\n              <span ng-switch-when="ALL_GRADED">\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.allGraded\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                <span bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span ng-switch-when="NOTHING_TO_GRADE">\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.nothingToGrade\n                </span>\n                <span ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </div>\n          </div>\n          <div ng-switch-default>\n            <div ng-switch="graderColumn.column.summary.getStatus().toString()" ng-if="::!graderColumn.column.isCalculated()">\n              <div class="grade-count js-grade-progress-needs-grading" ng-switch-when="NEEDS_GRADING">\n                <span ng-if="::graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.column.summary.numStudentsNeedsGrading}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="::!graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.getNumberOfSubmissionsNeedsGrading()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0">|</span>\n                <span class="grade-posted-count-before" ng-if="graderColumn.column.summary.totalNumberOfGradesToPost() > 0" bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">components.directives.grade.grader-column.statuses.numToPost.plural</span>\n              </div>\n              <span class="js-grade-progress-needs-posting" ng-switch-when="NEEDS_POSTING" bb-translate translate-values="{count: graderColumn.column.summary.totalNumberOfGradesToPost()}">components.directives.grade.grader-column.statuses.numToPost.plural</span>\n              <span class="js-grade-progress-all-graded" ng-switch-when="ALL_GRADED" bb-translate>components.directives.grade.grader-column.statuses.allGraded</span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                <span bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span class="js-grade-progress-nothing-to-show" ng-switch-when="NOTHING_TO_GRADE" bb-translate>components.directives.grade.grader-column.statuses.nothingToGrade</span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </div>\n            <div ng-if="::graderColumn.column.isCalculated()">\x3c!-- Needed for spacing --\x3e</div>\n          </div>\n        </div>\n      </div>\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}"\n           ng-if="graderColumn.column.isAttendance()" bb-translate>\n        components.directives.grade.grader-column.attendance.markAttendance\n      </div>\n      <div class="grade-status" ng-class="{\'columns medium-5 course-only-grade-status\': graderColumn.isCourseView}">\n        <div ng-if="::!graderColumn.column.isCalculated()">\n          <div ng-if="!graderColumn.course.isComplete() && graderColumn.column.summary.hasGradesToPost() && graderColumn.canPostGrades" class="post">\n            <button class="button button--secondary send-grade" bb-confirmation-needed="{{graderColumn.grade.getPostAllGradeConfirmationNeededStringsKey(graderColumn.column)}}"\n                    modal-aria-type="alertdialog" show-type="always" ng-click="graderColumn.postGrades()"\n                    bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.postGrades\'}"\n                    translate-attrs-values="{courseName: graderColumn.course.name, columnName: graderColumn.column.columnName}"\n                    bb-translate="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGrades\' : \'components.directives.grade.grader-column.actions.basePostGrades\'}}"\n                    analytics-id="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGrades\' : \'components.directives.grade.grader-column.actions.basePostGrades\'}}" >\n            </button>\n          </div>\n        </div>\n        <div ng-if="::graderColumn.column.isCalculated()">\x3c!-- Needed for spacing --\x3e</div>\n      </div>\n    </div>\n    <div ng-if="(graderColumn.showOverflowMenu || graderColumn.showDragControls) && !graderColumn.isRestrictedGroupContent"\n        class="columns medium-1 large-1 last-row-item item-controls dots" bb-foundation-defer>\n\n      \x3c!-- disable if its a group and has user is not entitled --\x3e\n      <button bb-drag-handle ng-if="graderColumn.showDragControls"\n              drag-item-id="{{::graderColumn.column.id}}"\n              drag-item-name="{{graderColumn.column.columnName}}"\n              class="super-clear small button icon js-drag-handle drag-drop-button"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.reorder-grader-item\', \'title\': \'components.directives.grade.grader-column.aria-label.move-tip\'}"\n              translate-attrs-values="{columnName: graderColumn.column.columnName}"\n              analytics-id="components.directives.grade.graderColumn.reorderItem.button" >\n        <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n      </button>\n\n      \x3c!-- disable if its a group and has user is not entitled --\x3e\n      <div ng-if="graderColumn.showOverflowMenu" class="overflow-menu-container right">\n        <bb-overflow-menu element-id="{{graderColumn.overflowMenuId}}"\n                          element-name="{{graderColumn.column.columnName}}"\n                          menu-items="graderColumn.getOverflowMenuItems()"\n                          analytics-id-tag-prefix="components.directives.grade.grader-column.overflowMenu">\n        </bb-overflow-menu>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="graderColumn.showConversionMessage">\n    <bb-course-access-alert course="course"\n                            alert-type="graderColumn.getAlertType()"\n                            confirm-callback="graderColumn.closeConversionTooltip()"\n                            timeout-callback="graderColumn.closeConversionTooltip()">\n    </bb-course-access-alert>\n  </div>\n</div>\n<bb-add-content-button\n                      position-after="graderColumn.column.id" item-name="graderColumn.column.columnName"\n                      context-area="graderColumn.contextArea"\n                      ng-if="graderColumn.isCourseView && !graderColumn.course.isComplete() && graderColumn.canModify"\n                      show-add-attendance="attendanceIsAvailable() && !attendanceColumnExists()">\n</bb-add-content-button>\n'},ELoy:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("px9Z"),n("De5J"),n("GkCm");var i=n("wHJ2"),s=n("lEL+"),o=n("6sUD"),a="ultra.directives.telemetry.panel.header",r=function(){function e(t,n){var i=this;this.scope=t,this.timeout=n,this.showSpinner=!1,this.spinnerTimeout=this.timeout((function(){i.showSpinner=!0}),this.scope,e.WAIT_TIME_TO_SHOW_SPINNER),this.scope.$watch("::panelDataLoaded()",(function(e){e&&i.dataLoaded()}))}return e.prototype.dataLoaded=function(){this.timeout.cancel(this.spinnerTimeout),this.showSpinner=!1},e.$inject=["scope",s.b],e.WAIT_TIME_TO_SHOW_SPINNER=1e3,e}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=o,this.transclude=!0,this.scope={course:"&",panelDataLoaded:"&",titleKey:"@?",title:"@?",buttonOneIcon:"@",buttonOneCallback:"&",buttonOneAriaLabel:"@",buttonOneTitle:"@",buttonTwoIcon:"@",buttonTwoCallback:"&",buttonTwoAriaLabel:"@",buttonTwoTitle:"@"},this.link=function(e){e.telemetryPanelHeader=t.$injector.instantiate(r,{scope:e})}}return e.$inject=["$injector"],e}();i.module(a,[]).directive("bbTelemetryPanelHeader",["$injector",function(e){return e.instantiate(c)}])},Ed3w:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return i}));var i,s=n("D57K"),o=n("wHJ2"),a=n("pjml"),r=n("lEL+"),c=n("nsO7"),l="ultra.services.schedule-task",d="schedule-task";!function(e){e.QuestionRegrading="regradingTasks"}(i||(i={}));var u=new Map,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(s.__extends)(t,e),t}(function(){function e(e,t){this.timeout=e,this.scheduleTaskModel=t}return e.prototype.scheduleTask=function(e,t){var n=this,i=e.courseId,s=e.taskName,a=e.scope,r=e.notifier,l=void 0===r?c.noop:r,d=e.delay,p=void 0===d?2e3:d;void 0===t&&(t=!1);var m=u.get(i);if(!m||!m.has(s)){o.isUndefined(m)&&(m=new Set),u.set(i,m.add(s));var h=function(e){l(e),m.delete(s)};a.$on("$destroy",(function(){m.delete(s)})),t?this.timedTask({courseId:i,taskName:s,scope:a,notifier:h,delay:p}):this.fireInitialRequest(i,s).then((function(e){n.hasInCompleteTasks(e)&&o.isDefined(a)?n.timedTask({courseId:i,taskName:s,scope:a,notifier:h,delay:p}):h(!0)}))}},e.prototype.timedTask=function(e){var t=this,n=e.courseId,i=e.taskName,s=e.scope,o=e.notifier,a=void 0===o?c.noop:o,r=e.delay;this.timeout((function(){t.requestTask(n,i).then((function(e){t.hasInCompleteTasks(e)?t.timedTask({courseId:n,taskName:i,scope:s,notifier:a,delay:r}):a(!1)}))}),s,r)},e.prototype.fireInitialRequest=function(e,t){return this.requestTask(e,t)},e.prototype.requestTask=function(e,t){return this.scheduleTaskModel.$collection().$fetch({courseId:e,filterBy:t}).$asPromise()},e.prototype.hasInCompleteTasks=function(e){return e.some((function(e){return!a.rb.QueueTaskStatus.CompleteErrors.isEqualTo(e.taskStatus)&&!a.rb.QueueTaskStatus.Complete.isEqualTo(e.taskStatus)}))},e.$inject=[r.b,a.rb.serviceName],e}());o.module(l,[r.a]).service(d,p)},"Ee/I":function(e,t){e.exports='<div class="true-false-attempt-authoring true-false">\n  <div class="true-false-question question-container">\n    <bb-rich-text-editor\n      ng-model="questionAttempt.question.questionText.rawText"\n      is-read-only="true"\n      plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}">\n    </bb-rich-text-editor>\n  </div>\n  <div class="true-false-answers-container">\n    <ol class="true-false-answers" ng-if="questionAttempt.question">\n      <li class="true-false-answer js-true-false-answer-true" ng-class="{\'selected-answer\': assessmentQuestion.givenAnswer !== undefined && assessmentQuestion.givenAnswer}">\n        <input type="radio"\n               id="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               ng-model="assessmentQuestion.givenAnswer"\n               ng-value="true"\n               analytics-id="assessment.question.true.false.answer.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               for="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               ng-mousedown="assessmentQuestion.givenAnswer = true"\n               class="checkbox-label">\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </label>\n      </li>\n      <li class="true-false-answer js-true-false-answer-false" ng-class="{\'selected-answer\': assessmentQuestion.givenAnswer !== undefined && !assessmentQuestion.givenAnswer}">\n        <input type="radio"\n               id="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               ng-model="assessmentQuestion.givenAnswer"\n               ng-value="false"\n               analytics-id="assessment.question.true.false.answer.no.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               for="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               ng-mousedown="assessmentQuestion.givenAnswer = false"\n               class="checkbox-label">\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </label>\n      </li>\n    </ol>\n  </div>\n</div>\n'},Efpj:function(e,t){e.exports='<div class="grades-list instructor-wrapper">\n  <div class="row tabular-list-header course-grades-column-headers" ng-if="courseGradesGraderList.columns.length > 0">\n    <div class="columns small-6 medium-4 large-4 tabular-list-header-offset"><span bb-translate>components.directives.grade.course-grades-grader-list.headers.name</span></div>\n    <div class="columns hide-for-small-only medium-2 large-2"><span bb-translate>components.directives.grade.course-grades-grader-list.headers.dueDate</span></div>\n    <div class="columns hide-for-small-only medium-3 large-3 end course-grades-column-progress-header"><span bb-translate>components.directives.grade.course-grades-grader-list.headers.progress</span></div>\n  </div>\n\n\n  <div bb-mouse-leave-enter="course-gradebook">\n\n    <bb-add-content-button position-before="\'start\'" item-name="courseGradesGraderList.columns[0].columnName"\n                           context-area="courseGradesGraderList.contextArea"\n                           show-menu-override="!courseGradesGraderList.hasColumns"\n                           always-show="isFirst"\n                           show-add-attendance="attendanceIsAvailable() && !courseGradesGraderList.attendanceColumnExists"\n                           ng-if="courseGradesGraderList.contextArea && !course().isComplete() && courseGradesGraderList.canModify" bb-key-hide-ftue="grades.grader.course.column.add"></bb-add-content-button>\n    \x3c!-- set keep-guidance-when-focusout to be true then add bb-key-hide-ftue="grades.grader.course.column.add" on its preceding element --\x3e\n    <div bb-guidance-target component-key="grades.grader.course.column.add" keep-guidance-when-focusout="true" aria-describedby="guidance-moment-grade-add"></div>\n\n    <bb-guidance id="guidance-moment-grade-add" component-key="grades.grader.course.column.add"\n                 class="grades-list-guidance guidance-element-overlay" role="tooltip">\n      <bb-translate>components.directives.grade.course-grades-grader.ftue.add</bb-translate>\n    </bb-guidance>\n\n    <div class="grade-list-columns">\n      <div class="drag-element" ng-class="{\'no-hover\': (course().isComplete() || (column.isAttendance() && !attendanceIsAvailable)), \'last-tabular-row-container\': $last}"\n           ng-repeat="column in courseGradesGraderList.columns track by column.id" bb-content-item-mouseover>\n        <div bb-drop-handler on-move-handler="courseGradesGraderList.onMoveGraderItem" content="column"\n             next-content-id="courseGradesGraderList.columns[$index+1].id"\n             previous-content-id="courseGradesGraderList.columns[$index-1].id">\n\n          <bb-grader-column column="column"\n                            course="course()"\n                            is-course-view="true"\n                            category-map="courseGradesGraderList.categoryMap"\n                            attendance-column-exists="courseGradesGraderList.attendanceColumnExists"\n                            attendance-is-available="attendanceIsAvailable()">\n          </bb-grader-column>\n        </div>\n      </div>\n    </div>\n\n    <bb-setup-overall-grade ng-if="showSetupOverallColumn && courseGradesGraderList.canModify"></bb-setup-overall-grade>\n  </div>\n</div>\n'},Et3n:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),s=n("0JpG"),o=n("yC9S"),a=n("dL5/"),r="ultra.directives.group.group-count";!function(){function e(){}e.prototype.$onInit=function(){},e.prototype.isSelfEnrollment=function(){return!!(this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0)&&this.content.selfEnrollmentGroups.some((function(e){return e.group&&!e.group.groupSetId}))},e=Object(i.__decorate)([Object(o.a)({moduleName:r,componentName:"bbGroupCount",template:a,bindings:{content:"<"},requireModules:[s.moduleName]})],e)}()},F2mp:function(e,t,n){"use strict";n.r(t);var i=n("wHJ2"),s=n("mJUP"),o=n("iAHr"),a=n("Xcx3"),r=n("D57K"),c=(n("YVjP"),n("Ycix"),n("9G/E"),n("KXuk"),n("67oV"),n("1NX5"),n("VdDF")),l=n("Fvsw"),d=n("0JpG"),u=n("MoIS"),p=n("+g6d"),m=n("nsO7"),h=n("t6LE"),b=n("yC9S"),g=n("aHpC"),v=n("9hUw"),f=n("bzJv"),y=n("cghv"),w="ultra.features.course.content.assessmentOverview.peerGrading",C=(function(){function e(e,t,n,i,s){this.$scope=e,this.$ngRedux=t,this.localize=n,this.context=i,this.peerService=s,e.assignedPeerReviews=this,this.currentDate=this.context.getServerTime(),this.submissionDueDate=e.submissionDueDate&&c.a.parseStringToDate(e.submissionDueDate),this.peerReviewDueDate=e.peerReviewDueDate&&c.a.parseStringToDate(e.peerReviewDueDate),this.peerReviewsPerStudent=e.peerReviewsPerStudent,this.allowLatePeerReviews=e.allowLatePeerReviews,this.isSubmissionComplete=e.isSubmissionComplete,this.isSubmissionLate=e.isSubmissionLate,this.hasDueDateAccommodation=e.hasDueDateAccommodation,this.content=e.content}e.prototype.$onInit=function(){var e=this;this.peerService.setContent(this.content,!0),this.$scope.$watchCollection((function(){return e.peerService.reviewableAttempts}),(function(){e.peerReviews=new Array(e.peerReviewsPerStudent),e.peerReviews.fill(null),e.peerService.reviewableAttempts.forEach((function(t,n){return e.peerReviews[n]=t})),e.callComponentUpdatedCallback()}))},e.prototype.$onChanges=function(){this.callComponentUpdatedCallback()},e.prototype.callComponentUpdatedCallback=function(){var e=this;this.componentUpdatedCallback&&this.componentUpdatedCallback(this.isSubmissionComplete,this.isPeerReviewPeriodOpen,this.peerReviewsPerStudent,this.peerService.reviewableAttempts.length,(function(){e.navigateToPeerReview()}))},Object.defineProperty(e.prototype,"isPeerReviewPeriodOpen",{get:function(){return this.isSubmissionComplete&&(this.isInPeerReviewWindow||this.isAfterPeerReviewWindow&&(this.allowLatePeerReviews||this.hasDueDateAccommodation))},enumerable:!0,configurable:!0}),e.prototype.navigateToPeerReview=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return!Object(m.isUndefined)(e)&&this.isPeerReviewDisabled(this.peerService.reviewableAttempts[e])?[2]:[4,this.peerService.navigateToPeerReview(e)];case 1:return t.sent(),this.callComponentUpdatedCallback(),[2]}}))}))},e.prototype.isPeerReviewComplete=function(e){return h.AttemptStatus.Completed.isEqualTo(null==e?void 0:e.status)},e.prototype.isPeerReviewStarted=function(e){return h.AttemptStatus.NeedsGrading.isEqualTo(null==e?void 0:e.status)},e.prototype.isPeerReviewSaved=function(e){return!!(null==e?void 0:e.attemptLastGradedDate)&&!this.isPeerReviewComplete(e)},e.prototype.getPeerReviewStatus=function(e){return this.isPeerReviewComplete(e)?f.a.Completed:this.isPeerReviewLate(e)?f.a.PastDue:this.isPeerReviewStarted(e)?f.a.Started:this.isPeerReviewPeriodOpen?f.a.NotStarted:f.a.Unavailable},e.prototype.isPeerReviewDisabled=function(e){var t=this.getPeerReviewStatus(e);return t===f.a.Unavailable||t===f.a.NotStarted||t===f.a.PastDue&&!e},Object.defineProperty(e.prototype,"allPeerReviewsComplete",{get:function(){var e=this;return!this.peerReviews.some((function(t){return!e.isPeerReviewComplete(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInPeerSubmissionWindow",{get:function(){return c.a.isWithinDateRange(this.currentDate,{end:this.submissionDueDate,start:null},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInPeerReviewWindow",{get:function(){return!this.isInPeerSubmissionWindow&&c.a.isWithinDateRange(this.currentDate,{end:this.peerReviewDueDate,start:null},!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAfterPeerReviewWindow",{get:function(){return!(this.isInPeerSubmissionWindow||this.isInPeerReviewWindow)},enumerable:!0,configurable:!0}),e.prototype.isPeerReviewLate=function(e){return this.isPeerReviewComplete(e)?!c.a.isWithinDateRange(e.attemptLastGradedDate,{end:this.peerReviewDueDate,start:null},!0)&&!this.hasDueDateAccommodation:this.isAfterPeerReviewWindow&&!this.hasDueDateAccommodation},e.prototype.getDescriptionTextKey=function(){return this.isInPeerSubmissionWindow?"duringSubmissionWindow":this.isSubmissionComplete&&this.allPeerReviewsComplete?"allReviewsCompleted":this.isInPeerReviewWindow&&this.isSubmissionComplete&&!this.isSubmissionLate?"duringReviewWindow.onTimeSubmission":this.isInPeerReviewWindow&&this.isSubmissionComplete&&this.isSubmissionLate?"duringReviewWindow.lateSubmission":this.isInPeerReviewWindow&&!this.isSubmissionComplete?"duringReviewWindow.noSubmission":this.isAfterPeerReviewWindow&&this.isSubmissionComplete&&!this.allPeerReviewsComplete&&this.allowLatePeerReviews?"afterReviewWindow.lateReviewsAccepted":this.isAfterPeerReviewWindow&&this.isSubmissionComplete&&!this.allPeerReviewsComplete&&!this.allowLatePeerReviews?"afterReviewWindow.lateReviewsNotAccepted":this.isAfterPeerReviewWindow&&!this.isSubmissionComplete?"afterReviewWindow.noSubmission":"duringSubmissionWindow"},e=Object(r.__decorate)([Object(b.a)({moduleName:w,componentName:"bbAssignedPeerGrading",template:y,bindings:{submissionDueDate:"<",peerReviewDueDate:"<",peerReviewsPerStudent:"<",allowLatePeerReviews:"<",hasDueDateAccommodation:"<",isSubmissionComplete:"<",isSubmissionLate:"<",content:"<",componentUpdatedCallback:"<?"},requireModules:[l.a,u.c,v.a,p.a]}),Object(r.__param)(0,Object(g.b)("$scope")),Object(r.__param)(1,Object(g.b)("$ngRedux")),Object(r.__param)(2,Object(g.b)(d.serviceName)),Object(r.__param)(3,Object(g.b)(l.b)),Object(r.__param)(4,Object(g.b)(v.b))],e)}(),n("ihlU")),S=n("IiJs"),A=n("ap1t"),k=n("QyCV"),I=n("5Tom"),O=(n("LT/P"),n("nYZ0")),D=n("fYJU"),T=n("TnpK"),$=n("zYa8"),x=n("2QtM");Object($.a)(x.a,"ultra.components.directives.bbUiIcon.Attention","bbUiIconAttention");var E=n("Zy5h"),P=(function(e){function t(t,n,i,s,o){var a=e.call(this,t,n,i,s,o)||this;return a.scope=t,a.contentService=n,a.currentUserService=i,a.localize=s,a.ultraState=o,a.showBanner=!1,a.showBanner=!0,a}Object(r.__extends)(t,e),t.prototype.openContentEnrollPanel=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.ultraState.leavePeekState()];case 1:return e.sent(),this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView}),[2]}}))}))},t=Object(r.__decorate)([Object(b.a)({moduleName:"ultra.directives.group.group-student-enrollment-asmt-banner",componentName:"bbGroupStudentEnrollmentAsmtBanner",template:E,bindings:{content:"<",fromView:"@"},requireModules:[O.d,D.a,d.moduleName,T.b,"ultra.components.directives.bbUiIcon.Attention"]}),Object(r.__param)(0,Object(g.b)("$scope")),Object(r.__param)(1,Object(g.b)(O.f)),Object(r.__param)(2,Object(g.b)(D.b)),Object(r.__param)(3,Object(g.b)(d.serviceName)),Object(r.__param)(4,Object(g.b)(T.d))],t)}(I.a),n("u4ux")),R=n("6mvz"),L=n("p7NW"),j=n("ftvW"),G=n("YHe3"),M=n("OvxF"),_=n("zjPK"),F=n("/qpZ");n.d(t,"moduleName",(function(){return B}));var B="ultra.features.course.content.assessmentOverview";i.module(B,[o.a,w,C.a,M.a,S.a,j.a,A.c,k.a,"ultra.directives.group.group-student-enrollment-asmt-banner",I.b,P.b,v.a,G.a,L.e,R.a,F.a,_.a]).controller(a.controllerName,a.Controller).controller(s.controllerName,s.Controller)},FFRk:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-lock",use:"icon-medium-lock-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-lock"><path d="M11 16c0-.5523.4477-1 1-1v0c.5523 0 1 .4477 1 1v2c0 .5523-.4477 1-1 1v0c-.5523 0-1-.4477-1-1v-2z" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 11h18v12H3z" /><path d="M6 11V6s0-5 6-5 6 5 6 5v5" stroke-width="2" /></symbol>'});s.add(o);e.exports=o},FH9J:function(e,t){e.exports='<div ng-switch="$ctrl.icon">\n  <bb-ui-icon-assignment ng-switch-when="assignment" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-assignment>\n  <bb-ui-icon-attendance ng-switch-when="attendance" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-attendance>\n  <bb-ui-icon-audio ng-switch-when="audio" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-audio>\n  <bb-ui-icon-blog ng-switch-when="blog" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-blog>\n  <bb-ui-icon-calculation ng-switch-when="calculation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-calculation>\n  <bb-ui-icon-discussion ng-switch-when="discussion" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-discussion>\n  <bb-ui-icon-document-blank ng-switch-when="document-blank" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-blank>\n  <bb-ui-icon-document-text ng-switch-when="document-text" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-text>\n  <bb-ui-icon-folder ng-switch-when="folder|folder-open" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-folder>\n  <bb-ui-icon-homework ng-switch-when="homework" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-homework>\n  <bb-ui-icon-journal ng-switch-when="journal" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-journal>\n  <bb-ui-icon-learning-module ng-switch-when="learning-module" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-learning-module>\n  <bb-ui-icon-link ng-switch-when="link" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-link>\n  <bb-ui-icon-lti ng-switch-when="lti" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-lti>\n  <bb-ui-icon-overall-grade ng-switch-when="overall-grade" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-overall-grade>\n  <bb-ui-icon-pdf ng-switch-when="pdf" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-pdf>\n  <bb-ui-icon-photo ng-switch-when="photo" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-photo>\n  <bb-ui-icon-presentation ng-switch-when="presentation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-presentation>\n  <bb-ui-icon-scormengine ng-switch-when="scormengine" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-scormengine>\n  <bb-ui-icon-spreadsheet ng-switch-when="spreadsheet" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-spreadsheet>\n  <bb-ui-icon-survey ng-switch-when="survey" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-survey>\n  <bb-ui-icon-test ng-switch-when="test|quiz|exam" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-test>\n  <bb-ui-icon-textbook ng-switch-when="textbook" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-textbook>\n  <bb-ui-icon-video ng-switch-when="video" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-video>\n  <bb-ui-icon-zip ng-switch-when="zip" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-zip>\n  <bb-ui-icon-document-blank ng-switch-default color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-document-blank>\n</div>'},FPJ0:function(e,t,n){},FVIt:function(e,t){e.exports='<div class="attempt-review-container row collapse"\n  bb-load-bundle="components/directives/assessment/attempt-canvas">\n  <div class="columns large-12 attempt-question-review">\n    <ol class="question-list">\n      <li ng-repeat="gradedQuestionAttempt in attemptCanvas.gradedQuestionAttempts track by $index">\n        <bb-assessment-question class="js-assessment-question-{{$index}}" attempt="attempt" graded-question-attempt="gradedQuestionAttempt" mode="attemptCanvas.ReviewMode()" index="$index"\n          is-small-breakpoint="attemptCanvas.isSmallBreakpoint"\n        >\n        </bb-assessment-question>\n      </li>\n    </ol>\n    <div class="freeform-response" ng-if="::!!attemptCanvas.studentSubmission().rawText">\n      \x3c!-- divider and header are only if test is not empty so freeform response & question list needs clear divider in between --\x3e\n      <div class="freeform-response-divider" ng-if="::attemptCanvas.getFreeformResponseBundleKey(\'header\')">\n        <div class="freeform-response-divider-inner">\n          <div class="divider-text-container">\n            <span class="divider-text" bb-translate>{{::attemptCanvas.getFreeformResponseBundleKey(\'header\')}}</span>\n          </div>\n        </div>\n      </div>\n      \x3c!-- freeform response --\x3e\n      <bb-freeform-response-editor\n        is-privileged="false"\n        bbml="attemptCanvas.studentSubmission()">\n      </bb-freeform-response-editor>\n    </div>\n  </div>\n</div>\n'},Fdwu:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=/<!--[^\r\n]*?-->|<[^\r\n]*?>/g},FpRh:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),s=n("yC9S"),o=n("aHpC"),a=n("t3aq"),r=n.n(a),c="ultra.directives.bbAllyContentRef";!function(){function e(e){this.$element=e}e.prototype.$postLink=function(){r.a.renderContentId(this.$element[0],{contentId:this.contentId,fileId:this.fileId,filePreviewUrl:this.filePreviewUrl})},e.prototype.$onDestroy=function(){r.a.destroyComponent(this.$element[0])},e=Object(i.__decorate)([Object(s.a)({module:angular.module(c,[]),componentName:"bbAllyContentRef",bindings:{contentId:"@",fileId:"@",filePreviewUrl:"@"}}),Object(i.__param)(0,Object(o.b)("$element"))],e)}()},Fv8s:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.confirmation-needed.title-x-bb-time-limit-assessment-attempt" \n          bb-focus="true"\n          analytics-id-tag-prefix="components.directives.confirmationNeeded">\n  <div name="modal-contents">\n    <p bb-translate="{{assessmentOverview.canContinue ? \n                        \'components.directives.confirmation-needed.instructions-x-bb-time-limit-assessment-attempt-can-continue\' \n                        : \'components.directives.confirmation-needed.instructions-x-bb-time-limit-assessment-attempt\'}}"\n       translate-values="{\'totalTimeLimit\': assessmentOverview.startModalTranslateOptions.instructions.params.totalTimeLimit}">\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="button confirm-ok js-primary-button" \n          ng-click="assessmentOverview.closeModal(true)" \n          analytics-id="primary.button.okAction.button"\n          bb-translate>\n    components.directives.confirmation-needed.ok-x-bb-time-limit-assessment-attempt-can-continue\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="assessmentOverview.closeModal(false)" \n          analytics-id="secondary.button.cancelAction.button"\n          bb-translate>\n    components.directives.confirmation-needed.cancel-x-bb-time-limit-assessment-attempt-can-continue\n  </button>\n</bb-modal>\n'},GkCm:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-main-menu",use:"icon-small-main-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-main-menu"><path d="M1 3h14M15 8H1M1 13h14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},GwhK:function(e,t){e.exports='<div class="typeahead-search" bb-click-outside="typeaheadSearchBox.onClickOutside()" is-active="true" bb-load-bundle="components/directives/typeahead">\n  <label for="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}">\n    <bb-svg-icon ng-if="::typeaheadSearchBox.icon" icon="{{::typeaheadSearchBox.icon}}" size="small" class="magnifying-glass"></bb-svg-icon>\n    <span ng-if="::typeaheadSearchBox.srLabel" class="sr-only" bb-translate="{{::typeaheadSearchBox.srLabel}}"></span>\n  </label>\n  <input aria-describedby="requiredPrompt" type="text" id="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}"\n         ng-model="typeaheadSearchBox.searchValue"\n         ng-model-options="{ debounce: 250 }"\n         role="combobox"\n         aria-activedescendant="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-0"\n         aria-autocomplete="list"\n         aria-owns="typeahead-search-autocomplete"\n         name="typeaheadSearchBox"\n         autocomplete="off"\n         ng-keydown="typeaheadSearchBox.onInputBoxKeyDown($event)"\n         ng-click="typeaheadSearchBox.onInputBoxClick($event)"\n         ng-change="typeaheadSearchBox.onSearchValueChange()"\n         ng-focus="typeaheadSearchBox.onFocusInputBox($event)"\n         bb-translate-attrs="{\'placeholder\': \'{{typeaheadSearchBox.inputPlaceholder}}\'}"\n         class="truncated"\n         ng-class="{\'not-empty with-clear-btn\': typeaheadSearchBox.searchValue, \'empty\': !typeaheadSearchBox.searchValue,\n                    \'with-icon\': typeaheadSearchBox.icon, \'is-active\': typeaheadSearchBox.isFocus}"\n         analytics-id="components.directives.typeheadSearchBox.input.text"/>\n    <button class="typeahead-clear-button" bb-translate-attrs="{\'aria-label\': \'{{typeaheadSearchBox.clearAriaLabel}}\'}"\n            tabindex="0"\n            ng-show="typeaheadSearchBox.searchValue"\n            ng-click="typeaheadSearchBox.clear()"\n            ng-focus="typeaheadSearchBox.onFocusClearBtn($event)"\n            ng-blur="typeaheadSearchBox.onBlurClearBtn($event)"\n            analytics-id="components.directives.typeheadSearchBox.clearAriaLabel.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  <span id="requiredPrompt" class="sr-only" bb-translate="{{::typeaheadSearchBox.srEmptyResults}}"></span>\n  <div id="typeahead-search-autocomplete" class="typeahead-search-autocomplete adding"\n       ng-if="typeaheadSearchBox.showResults"\n       role="listbox"\n       tabindex="-1">\n    <div class="typeahead-search-entry" ng-repeat="item in typeaheadSearchBox.searchResults"\n         role="option"\n         tabindex="-1"\n         id="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-{{$index}}"\n         ng-keydown="typeaheadSearchBox.onResultEntryKeyDown($event, item)"\n         ng-click="typeaheadSearchBox.onResultEntryClick($event, item)"\n         analytics-id="components.directives.typeheadSearchBox.onResultEntryClick">\n      <typeahead-inject></typeahead-inject>\n    </div>\n  </div>\n</div>'},"H/8/":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-peer-review",use:"icon-medium-peer-review-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-peer-review"><path d="M1 23c1.096-4.3157 4.5473-7 9-7M10 16c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8zM18.5 8c1.3031 0 2.7189.8549 3.6122 2M15 20l3 3 5-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"H/mg":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),s=n("wHJ2"),o=n("ERkP"),a=n("1ZbL"),r=n("Dz4E"),c="ultra.components.directives.react-toolkit.contextual-menu",l={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return this.props.show?o.createElement(r.ContextualMenu,{items:this.props.items,directionalHint:this.props.directionalHint,target:document.getElementById(this.props.targetId),onDismiss:this.props.dismiss,labelElementId:this.props.ariaLabelledby,analyticsId:this.props.analyticsId}):null},t}(o.Component),bindingNames:["items","targetId","show","dismiss","directionalHint"],attributes:["ariaLabelledby","analyticsId"]};s.module(c,[]).component("bbUiContextualMenu",Object(a.a)(l))},HApu:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-rubric",use:"icon-medium-rubric-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-rubric"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M19 5h4v4h-4zM11 5h4v4h-4zM19 12h4v4h-4zM11 12h4v4h-4zM19 19h4v4h-4zM11 19h4v4h-4zM19 1h4M11 1h4M1 8h4M1 15h4M1 22h4M1 5h6M1 12h6M1 19h6" /></symbol>'});s.add(o);e.exports=o},HCOL:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("OhrW"),o="ultra.components.directives.bbUiIcon.DocumentText";Object(i.a)(s.DocumentText,o,"bbUiIconDocumentText")},HF29:function(e,t){e.exports='<div class="row collapse attempt-grading-container"\n  bb-load-bundle="components/directives/assessment/attempt-canvas">\n  <div class="columns large-12 attempt-question-review">\n    <ol class="question-list">\n      <li ng-repeat="gradedQuestionAttempt in attemptCanvas.gradedQuestionAttempts">\n        <bb-assessment-question class="js-assessment-question-{{$index}}" attempt="attempt" graded-question-attempt="gradedQuestionAttempt" mode="attemptCanvas.GradingMode()" index="$index" assessment-id="attemptCanvas.assessmentId"\n          is-any-question-editing="isAnyQuestionEditing"\n          is-small-breakpoint="attemptCanvas.isSmallBreakpoint"\n          >\n        </bb-assessment-question>\n      </li>\n    </ol>\n\n    <div class="freeform-response" ng-if="::!!attemptCanvas.studentSubmission().rawText">\n      \x3c!-- divider and header are only if test is not empty so freeform response & question list needs clear divider in between --\x3e\n      <div class="freeform-response-divider" ng-if="::attemptCanvas.getFreeformResponseBundleKey(\'header\')">\n        <div class="freeform-response-divider-inner">\n          <div class="divider-text-container">\n            <span class="divider-text" bb-translate>{{::attemptCanvas.getFreeformResponseBundleKey(\'header\')}}</span>\n          </div>\n        </div>\n      </div>\n      \x3c!-- freeform response --\x3e\n      <bb-freeform-response-editor\n        is-privileged="false"\n        bbml="attemptCanvas.studentSubmission()">\n      </bb-freeform-response-editor>\n    </div>\n  </div>\n</div>\n'},HGKz:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("Ul6e"),o="ultra.components.directives.bbUiIcon.Spreadsheet";Object(i.a)(s.Spreadsheet,o,"bbUiIconSpreadsheet")},HjsN:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var i=n("D57K"),s=(n("wnWX"),n("dCrD")),o=n("Oyr+"),a="allCloudUploadsCompleteEvent",r="failed",c=function(e){function t(t,n,i){var s=e.call(this,t,n,i)||this;return s.cloudUploadPromises=[],s.onFilesSelectedHandler=function(e){var t=[];e.forEach((function(e){var n={id:e.id,deferred:s.$q.defer()};t.push(n.deferred),s.cloudUploadPromises.push(n)})),s.$q.all(t.map((function(e){return e.promise}))).then((function(){s.scope.$emit(a)}),(function(e){s.scope.$emit(a,e)}))},s.resolveFileUploadDeferred=function(e,t){var n=s.cloudUploadPromises.findIndex((function(t){return t.id===e}));return n>=0&&(t?s.cloudUploadPromises[n].deferred.reject(t):s.cloudUploadPromises[n].deferred.resolve(),s.cloudUploadPromises.splice(n,1),!0)},s.cloudUploadAttachHandler=function(e,t,n,i){var o=s.scope.attachHandler||s.defaultAttachHandler,a=s.$q.defer();return o(e,t,n,i).then((function(){s.resolveFileUploadDeferred(t.ui.fileId)&&a.resolve()})),a.promise},n.$on(o.e,(function(e,t,n,i,a){i===o.c.Error?s.resolveFileUploadDeferred(t,r):i===o.c.Cancel&&s.resolveFileUploadDeferred(t)})),s}return Object(i.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(s.a)},HwkA:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-custom-toggle-table",use:"icon-custom-toggle-table-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-table"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12" /></symbol>'});s.add(o);e.exports=o},I5V3:function(e,t){e.exports='<div class="multiple-answer-attempt-review multiple-answer">\n  <div class="multiple-answer-question">\n    <bb-rich-text-editor\n      plugin-options="editorPluginOptions"\n      ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n      is-read-only="true">\n    </bb-rich-text-editor>\n  </div>\n\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    hide-correctness-text="!assessmentQuestion.canShowCorrectAnswerRelatedDetail() || !assessmentQuestion.viewHelper.isOnlyPartialCredit()"\n    class="multiple-answer-question-answer {{!assessmentQuestion.canShowQuestionScoreRelatedDetail()?\'multiple-answer-attempt-review__question-correctness\':\'\'}}">\n    <div ng-bind-html="::assessmentQuestion.viewHelper.formattedAnswerString"></div>\n  </bb-question-answer-status>\n  <div class="toggle-answer-options-container" ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()">\n    <button class="toggle-answer-options" ng-click="assessmentQuestion.viewHelper.toggleAnswerOptions()" analytics-id="assessment.question.answer.options.toggle.button">\n      <ng-switch on="assessmentQuestion.viewHelper.hideAnswerOptions">\n        <span ng-switch-when="false" bb-translate>components.directives.assessment-question.multiple-answer.review.hide-options</span>\n        <span ng-switch-default bb-translate>components.directives.assessment-question.multiple-answer.review.show-options</span>\n        <bb-svg-icon size="custom" icon="arrow-up" class="hide-options-arrow" ng-class="{\'rotate-arrow\': assessmentQuestion.viewHelper.hideAnswerOptions}"></bb-svg-icon>\n      </ng-switch>\n    </button>\n  </div>\n\n  <div class="multiple-answer-answers-container" ng-show="assessmentQuestion.showAnswerOptions()">\n    <ol class="multiple-answer-answers" ng-class="{\'multiple-answers-graded-review\': assessmentQuestion.canShowCorrectAnswerRelatedDetail()}">\n      <li ng-repeat="answer in assessmentQuestion.questionAttempt.question.answers track by $index"\n          class="js-answer-{{$index}} {{::assessmentQuestion.getAnswerChoiceStyles($index)}}">\n        <input type="checkbox"\n               id="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n               name="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n               ng-model="assessmentQuestion.questionAttempt.givenAnswer[$index]"\n               disabled\n               analytics-id="assessment.question.attempt.givenAnswer.input.checkbox"/>\n        <label for="{{assessmentQuestion.elementId}}-answer-{{$index}}" class="checkbox-label">\n          <span ng-if="assessmentQuestion.viewHelper.showIncorrectIndicator($index)"\n                class="correctness-label" bb-translate>\n            components.directives.assessment-question.multiple-answer.incorrect-label\n          </span>\n          <bb-rich-text-editor\n              plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n              ng-model="answer.answerText.rawText"\n              is-read-only="true">\n          </bb-rich-text-editor>\n        </label>\n        <span class="correct-answer-text" ng-if="answer.correctAnswer && assessmentQuestion.canShowCorrectAnswerRelatedDetail()" bb-translate>components.directives.assessment-question.multiple-answer.correct-label</span>\n      </li>\n    </ol>\n  </div>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n  />\n</div>\n'},IAsK:function(e,t,n){},"IR+Z":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("wHJ2"),s=n("Oyr+"),o=n("0JpG"),a=n("Vsv2"),r=n("zXZW"),c=n("pjml"),l=n("12mu"),d=n("lEL+"),u=n("U2yl"),p=n("Poqp"),m="ultra.directives.bbKloudless",h=function(){function e(e,t,n,i,s,o,r,c){this.scope=e,this.$q=t,this.$exceptionHandler=n,this.bbLocalize=i,this.$modal=s,this.CloudDriveModel=o,this.CloudDriveTaskModel=r,this.timeout=c,this.provider=a.a.KLOUDLESS.toString(),this.bbLocalize.loadBundle("components/directives/kloudless")}return e.prototype.getFileId=function(e){return e.account+"|"+e.id},e.prototype.onFileSelect=function(e){this.scope.$emit(s.d,e,this.scope.primaryKey&&this.scope.primaryKey()),this.scope.onFilesSelected&&this.scope.onFilesSelected(e)},e.prototype.getDownloadFileInfo=function(e){var t=this.getFileId(e);return this.CloudDriveModel.$new("Kloudless").contents.$new(t).$fetch({accessToken:this.accessToken}).$asPromise()},e.prototype.downloadFiles=function(e,t,n,i){var o=this,a={accessToken:this.accessToken,expand:"mimeType,isMedia"};this.scope.fileLocation&&(a.fileLocation=this.scope.fileLocation),this.scope.webLocation&&(a.webLocation=this.scope.webLocation),(n?this.CloudDriveTaskModel.$new(i||e.id):this.CloudDriveModel.$new("Kloudless").contents.$new(i||e.id).download).$fetch(a).$then((function(n){if("COMPLETE"===n.status)var i=o.scope.$on(s.e,(function(a,r,c){c!==s.c.UploadProgressComplete||e.ui.fileId&&r!==e.ui.fileId||(o.attachHandler(n,e,t),i())}));else o.timeout((function(){o.downloadFiles(e,t,!0,n.taskId)}),o.scope,2e3);(n.completePercentage<100||"COMPLETE"===n.status)&&o.scope.$root.$broadcast(s.e,e.ui.index,n.completePercentage,null,s.c.UpdateProgress,e.inProgressFileId,e.ui.targetDiv,e.ui.fileId)}),(function(t){o.displayUploadError(),o.scope.$root.$broadcast(s.e,e.ui.fileId,e,s.c.Error,e.ui.targetDiv,o.scope.primaryKey&&o.scope.primaryKey()),o.$exceptionHandler(t,"source")}))},e.prototype.attachHandler=function(e,t,n){var i=this.$q.defer(),s={fileName:null,fileLocation:null};return e&&(s.fileName=e.fileName,s.fileLocation=e.fileLocation,s.webLocation=e.webLocation,s.mimeType=e.mimeType,s.isMedia=e.isMedia),this.scope.attachHandler(s,t,this.scope.isUploadMultipleFiles,void 0,n).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},e.prototype.displayUploadError=function(){this.$modal.open({template:u,scope:this.scope})},e.$inject=["scope","$q","$exceptionHandler",o.serviceName,l.b,c.j.serviceName,c.k.serviceName,d.b],e}(),b=function(){function e(e,t,n,s){var o=this;this.$injector=e,this.$q=t,this.$modal=n,this.CloudDriveService=s,this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?",onFilesSelected:"=?",onCancelFocus:"=?"},this.restrict="A",this.link=function(e,t,n){var s=o,r=a.a.KLOUDLESS.toString();e.kloudless=o.$injector.instantiate(h,{scope:e}),e.folderBranchCounts=0,e.isInitialized=!!s.CloudDriveService.cloudDriveStorage[r],e.isInitialized||s.CloudDriveService.initializeCloudDrive(a.a.KLOUDLESS);var c=function(t){var n=[];if(t&&t.length>0){for(var i=0;i<t.length;i++)n.push(e.kloudless.getDownloadFileInfo(t[i]));s.$q.all(n).then((function(t){s.CloudDriveService.isGettingFilesInfo=!1,e.kloudless.onFileSelect(t),t.length>1&&(e.isUploadMultipleFiles=!0)}),(function(){s.CloudDriveService.isGettingFilesInfo=!1}))}};t.on("click",(function(){e.disableClick&&e.disableClick()||!e.isInitialized||(s.CloudDriveService.cloudDriveStorage[r].openFilePicker(e,e.allowMultiple).then((function(n){if((n||[]).length>0){if(!n[0]||!n[0].bearer_token||!n[0].bearer_token.key)return void o.$modal.open({template:p,scope:e});e.kloudless.accessToken=n[0].bearer_token.key,s.CloudDriveService.isGettingFilesInfo=!0,i.isDefined(e.allowMultiple)&&!1===e.allowMultiple&&n.length>1?c([n[0]]):c(n)}else e.onCancelFocus?e.onCancelFocus():t.focus()})),e.$on("$destroy",(function(){s.CloudDriveService.isGettingFilesInfo=!1,t.off("click")})))})),e.$on("downloadFile",(function(t,n,i){n.ui.primaryKey===(e.primaryKey&&e.primaryKey())&&n.file.$url().indexOf("Kloudless")>=0&&e.kloudless.downloadFiles(n,i)}))}}return e.$inject=["$injector","$q","$modal",a.c],e}();i.module(m,[o.moduleName,a.b,r.a,l.a,d.a]).directive("bbKloudless",["$injector",function(e){return e.instantiate(b)}])},IWgv:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("xS64"),n("66CI"),n("vcLy"),n("KXuk");var i=n("wHJ2"),s=n("pjml"),o=n("0JpG"),a=n("mCEN"),r=n("bMxM"),c=n("TnpK"),l=n("66CP"),d="ultra.components.directives.content.contentItemIcon",u=function(){function e(e,t,n,i,o,a,r){var c=this;this.scope=e,this.$q=t,this.element=n,this.bbLocalize=i,this.contentIconService=o,this.ColumnModel=a,this.$state=r,this.iconName="document-blank",this.iconColor="primary",this.iconNameForLocalization="document-blank";var l,d=[],u=s.r.ContentHandler,p=e.$watch((function(){return e.contentColumn}),(function(){var t=e.bbContentItemIcon&&e.bbContentItemIcon.contentHandler&&e.bbContentItemIcon.contentHandler.toString();if(t)switch(t){case u.LtiLink.toString():l="bbContentItemIcon",d=["showAlertIcon"];break;case u.CourseLink.toString():if(e.bbContentItemIcon.contentDetail)var n=c.scope.$watch((function(){return e.bbContentItemIcon.id}),(function(t){t&&(e.bbContentItemIcon.getLinkContentSource().$then((function(e){c.contentIconService.getIconClass(e).then((function(e){e&&(c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName))}))})),n())}));else c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e.bbContentItemIcon.getContentHandlerByIconUrl().iconClass),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName);break;case u.RusticiScorm.toString():d=[(l="bbContentItemIcon")+".contentDetail['"+t+"'].gradebookItems[0].gradingColumn.gradebookCategory.id"];break;default:d=[(l="bbContentItemIcon")+".contentHandler",l+".ui.isOpen",l+".contentDetail['"+u.File.toString()+"'].file.mimeType",l+".contentDetail['"+u.TestLink.toString()+"'].test.gradingColumn.gradebookCategory.id",l+".contentDetail['"+u.TestLink.toString()+"'].assignment.gradingColumn.gradebookCategory.id"]}else e.contentColumn&&(d=[(l="contentColumn")+".scoreProviderHandle",l+".calculationType",l+".externalGrade",l+".visible",l+".summary.numStudentsGraded()",l+".summary.numStudentSubmissions()",l+".categoryTitle",l+".dueDate"]);var i=e.$watchGroup(d,(function(){var t=e[l];if(t){(t instanceof c.ColumnModel?c.contentIconService.getColumnIconClass(t):c.contentIconService.getIconClass(t)).then((function(e){e&&(c.iconColor=c.scope.showAlertIcon?"error":"primary",c.iconName=c.contentIconService.getIconName(e),c.iconNameForLocalization=c.contentIconService.getIconNameForLocalization(c.iconName));var n=u.Folder.isEqualTo(t.contentHandler),s=u.Unknown.isEqualTo(t.contentHandler),o=u.File.isEqualTo(t.contentHandler),r=u.LtiLink.isEqualTo(t.contentHandler),l=u.RusticiScorm.isEqualTo(t.contentHandler),d=u.TestLink.isEqualTo(t.contentHandler);n||s||t instanceof a||o||r||l||d||i(),p()}))}}))}))}return e.prototype.showStatusIcon=function(){return this.scope.bbContentItemIcon&&this.scope.bbContentItemIcon.canEdit&&!this.$state.includes("**.content-navigator-placeholder.**")&&!this.scope.bbContentItemIcon.canEdit()&&(this.scope.bbContentItemIcon.isConditionalReleaseLocked()||this.scope.bbContentItemIcon.isStarted()||this.scope.bbContentItemIcon.isCompleted())},e.prototype.getStatusIconName=function(){return this.scope.bbContentItemIcon.isStarted()?"started":this.scope.bbContentItemIcon.isCompleted()?"complete":"lock-circle"},e.$inject=["scope","$q","element",o.serviceName,r.b,s.F.serviceName,c.d],e}(),p=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=l,this.scope={bbContentItemIcon:"=",contentColumn:"=",showAlertIcon:"="},this.link=function(e,n){e.contentItemIcon=t.$injector.instantiate(u,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(d,[a.a,r.a,c.b]).directive("bbContentItemIcon",["$injector",function(e){return e.instantiate(p)}])},IcHz:function(e,t,n){},IgL1:function(e,t){e.exports='<button bb-complex-tooltip=""\n  enhanced-tooltip="true"\n  tooltip-position="top-center"\n  tooltip-disable-on-mouse-over="false"\n  tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n  tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n  tooltip-scope="buttonComplexTooltip.$scope"\n  tooltip-template="{{ buttonComplexTooltip.getToolTipTemplate() }}"\n  tooltip-open-on-activation="true"\n  tooltip-auto-update="true"\n  tooltip-always-underline="false"\n  analytics-id="components.directives.content-item-base.conditionalRelease.date.link"\n  tooltip-center-content="true"\n  title="components.directives.grade.grader-column.statuses.restricted">\n  <bb-svg-icon size="small" icon="information" status="default"></bb-svg-icon>\n</button>\n'},IiJs:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var i=n("D57K"),s=n("wHJ2"),o=n("pjml"),a="ultra.services.collabUltra",r="collabUltra",c=function(){function e(e,t,n,i,s,o,a){this.$q=e,this.$compile=t,this.$rootScope=n,this.$timeout=i,this.CourseModel=s,this.CollabUltraModel=o,this.$sce=a}return e.prototype.getCollabB2Info=function(){return this.collabB2InfoPromise=this.collabB2InfoPromise||this.CollabUltraModel.$build().getCollabUltraInfo()},e.prototype.getAllCollabSessions=function(e){return this.CourseModel.$new(e).collabUltra.getAllCollabSessions()},e.prototype.enableCourseRoom=function(e,t){return this.CourseModel.$new(e).collabUltra.enableCourseRoom(t)},e.prototype.disableCourseRoom=function(e,t){return this.CourseModel.$new(e).collabUltra.disableCourseRoom(t)},e.prototype.getLaunchUrl=function(e,t){return this.CourseModel.$new(e).collabUltra.sessions.$new(t).getLaunchUrl()},e.prototype.getCourseCollab=function(e){return this.CourseModel.$new(e).collabUltra.getCourseCollabInfo()},e.prototype.launchDiscussionSession=function(e,t,n){return this.CourseModel.$new(e).collabUltra.launchDiscussionSession(t,n)},e.prototype.getCollabSessionStatus=function(e,t){var n=this;return this.getCollabB2Info().then((function(t){return 200===t.$response.status?n.CourseModel.$new(e).collabUltra.sessions.$fetch().$allow([403,500,504]).$asPromise():n.$q.reject()})).then((function(i){return 200===i.$response.status?n.CourseModel.$new(e).groups.$new(t).collabSession.$fetch({expand:"sessionInstances"}).$allow(["400-599"]).$asPromise().then((function(e){return e.filter((function(e){return e.sessionInstances&&e.sessionInstances.length>0})).length>0})):n.$q.when(null)}),(function(){return n.$q.when(null)}))},e.$inject=["$q","$compile","$rootScope","$timeout",o.o.serviceName,o.l.serviceName,"$sce"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(c);s.module(a,[o.Q]).service(r,c)},"Ij+l":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("5iHu"),s=n("nsO7"),o=n("wHJ2"),a=n("yC9S"),r=n("bd9L"),c=n("lmMM"),l=n("nYZ0"),d=n("Qbdf"),u=n("Bu0u"),p=n("pjml"),m=n("lEL+"),h=n("TnpK"),b=n("W6wm"),g=n("k5nV"),v="ultra.components.directives.delete",f=function(){function e(e,t,n,i,s,o,a,r,c){var l=this;this.$q=e,this.scope=t,this.element=n,this.attrs=i,this.ultraState=s,this.courseModel=o,this.contextCourse=a,this.ContentService=r,this.timeout=c,this.isDeleteDisabled=!1,this.focusedElement=null,t.$watch("contentId",(function(e,t){e!==t&&l.initialize()})),this.initialize()}return e.prototype.initialize=function(){var e=this;this.scope.unregisterAutoSave=s.once(this.scope.$root.$on("bb-autosave-form",(function(t,n,s){if(r.a.Saving.isEqualTo(n)){var o=i(document.activeElement);o&&o.length&&(e.focusedElement=o[0]),e.scope.savingInProgress=!0}else e.scope.savingInProgress=!1,e.timeout((function(){e.focusedElement&&(e.focusedElement.focus(),e.focusedElement=null)}),e.scope,0)}))),this.scope.$on("$destroy",this.scope.unregisterAutoSave),this.scope.parent=this.scope.$parent,a.b.OnRootScope(this.scope,"disable-delete",(function(t){e.isDeleteDisabled=!0})),a.b.OnRootScope(this.scope,"enable-delete",(function(t){e.isDeleteDisabled=!1}));var t,n=this.contextCourse.courseId||this.scope.courseId&&this.scope.courseId();if(n&&(t=this.courseModel.$new(n)),this.scope.contentId&&!n)throw new u.a({message:"A courseId must be provided when contentId is used"});if(this.requiredArgumentsSupplied=!0,this.scope.attrTranslateKey="components.directives.delete.control-delete-label",this.attrs.confirmationHandler&&(this.modalShowType="always",this.scope.attrTranslateKey="components.directives.delete.handlers."+this.attrs.confirmationHandler.replace("resource/","")),!this.scope.content||null!=this.scope.contentId&&this.scope.contentId!==this.scope.content.$pk){if(this.scope.contentId)this.contentPromise=t.contents.$new(this.scope.contentId).$fetch().$asPromise();else if(!this.attrs.deleteFunction||!this.attrs.confirmationHandler)throw this.requiredArgumentsSupplied=!1,new u.a({message:"a content object, a contentId string, or a confirmationHandler and deleteFunction must be provided."})}else this.contentPromise=this.scope.content&&this.scope.content.$asPromise&&this.scope.content.$asPromise()||this.$q.when(this.scope.content);this.contentPromise&&this.contentPromise.then((function(t){e.scope.content=t,e.scope.content.contentHandler&&!e.scope.attrTranslateKey&&(e.scope.attrTranslateKey="components.directives.delete.handlers."+e.scope.content.contentHandler.toString().replace("resource/",""))}))},e.prototype.getConfirmationKeyAndShowType=function(){var e=this;return this.$q.when(this.contentPromise).then((function(){return e.scope.content&&e.scope.content.$resolve(),e.attrs.confirmationHandler?e.$q.when({confirmationKey:e.attrs.confirmationHandler,showType:e.modalShowType}):(e.ultraState.includes("**.outline.**")?t=b.a.CourseOutline:e.ultraState.includes("**.engagement.**")&&(t=b.a.Discussions),e.scope.content.$asPromise().then((function(n){return e.ContentService.generateDeleteConfirmationKey(n,t).then((function(e){return{confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType}}))})));var t}))},e.prototype.deleteElement=function(){var e=this;this.attrs.deleteFunction?(this.scope.deleteFunction(),this.scope.unregisterAutoSave()):this.ContentService.deleteContent(this.scope.content).then((function(){e.scope.parent.contentCreateItem&&(e.scope.parent.contentCreateItem.confirmCancellation=!1),e.scope.unregisterAutoSave(),e.attrs.callbackFunction?e.scope.callbackFunction():e.ultraState.leavePeekState(e.ultraState.current.name)}))},e.$inject=["$q","scope","element","attrs",h.d,p.o.serviceName,d.e,l.f,m.b],e}(),y=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=g,this.scope={content:"=?",contentId:"=?",courseId:"&?",deleteFunction:"&?",callbackFunction:"&?",displayMode:"@?",extraClass:"@?",choices:"=?"},this.link=function(e,n,i){e.delete=t.$injector.instantiate(f,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector",h.d],e}();o.module(v,[d.b,l.d,c.d,p.Q,h.b]).directive("bbDelete",["$injector",function(e){return e.instantiate(y)}])},IjED:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("D57K"),s=n("nsO7"),o=n("nbDY"),a=n.n(o),r=n("TnpK"),c="ultra.services.slideoutPanel",l="slideoutPanel",d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.RubricEvaluation=new t("rubric-evaluation"),t.RubricView=new t("rubric-view"),t.AssessmentSubmissionFeedback=new t("assessment-submission-feedback"),t.DiscussionFeedback=new t("discussion-feedback"),t}(a.a),u=function(){function e(e){var t=this;this.ultraState=e,this.slideoutPanelIsOpen=!1,this.getMostRecentPanelState=function(e){return e.split(".").pop()},this.isPanelClosing=function(e,n){return t._doesStateRequireSlidePanel(t.getMostRecentPanelState(e))&&!t._doesStateRequireSlidePanel(t.getMostRecentPanelState(n))},this.setSlideoutPanelState=function(){t.slideoutPanelIsOpen=t._doesStateRequireSlidePanel(t.getMostRecentPanelState(t.ultraState.current.name))},this.isOpen=function(){return t.setSlideoutPanelState(),t.slideoutPanelIsOpen},this.setSlideoutPanelState()}return e.prototype.isRubricState=function(){return this.getMostRecentPanelState(this.ultraState.current.name)===d.RubricEvaluation.toString()||this.getMostRecentPanelState(this.ultraState.current.name)===d.RubricView.toString()},e.prototype._doesStateRequireSlidePanel=function(e){return s.some(d.getValues(),(function(t){return e===t.toString()}))},e.$inject=[r.d],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(u);angular.module(c,[]).service(l,u)},J8YL:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options" data-show-add-options ng-click="addContentButton.toggleMenu()"\n     ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n     aria-expanded="{{addContentButton.isMenuVisible}}" aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n     aria-label="{{addContentButton.addButtonAriaLabel}}"\n     ng-focus="addContentButton.showButton()" ng-blur="addContentButton.hideButton()"\n     analytics-id="components.directives.add-content-button.assignment.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        allow-multiple="true"\n        monitor-leave="true"\n        disable-drag="disableDrag && disableDrag()"\n        target-div="{{\'#\' + fileListViewId}}"\n        hide-transclude-during-upload="false"\n        is-third-party-upload="false"\n        disallow-folder-uploads="true"\n        skip-zip-file-check="true"\n        ignored-states="::ignoredStates()"\n        position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.fileUpload.link" >\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon><span bb-translate analytics-id="course.content.buildContentArea.addFiles">course.content.buildContentArea.addFiles</span>\n        </a>\n      </bb-file-upload>\n    </li>\n    <li ng-if="!addContentButton.isMobile">\n      \x3c!-- Skip zip file check, assignment does not support unzip file(LRN-101238) --\x3e\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}"\n                      position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-one-drive primary-key="fileListViewId"\n           is-flatten="false"\n           attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n           ignored-states="::ignoredStates()"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n           ng-click="addContentButton.toggleMenu(\'OneDriveUpload\')"\n           analytics-id="components.directives.add-content-button.assignment.oneDrive.link">\n          <div>\n            <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n          </div>\n        </a>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},JfeD:function(e,t,n){},JiEj:function(e,t){e.exports='<div bb-load-bundle="components/directives/content/learning-module/learning-module-base-item" class="base-content-item bb-lm-base-item"\n  bb-cache-compilation="lm-base-item">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" ng-paste="$event.stopPropagation()">\n    <div ng-switch on="content.ui.importPlaceholder">\n      \x3c!-- Import placeholder  --\x3e\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n\n      \x3c!-- Non-imported content --\x3e\n      <div ng-switch-default class="drag-element-row" ng-class="{\'is-restricted\': content.canEdit() && content.isHiddenFromStudents(), \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canEdit()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n\n              <ng-switch on="content.ui.isUploading">\n                \x3c!-- Uploading section begin --\x3e\n\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n                \x3c!-- Uploading section end --\x3e\n\n                <div class="outline-item-inner" ng-switch-default>\n\n                  <div class="lm-header-section">\n                    \x3c!-- Learning Module title section begin --\x3e\n\n                    \x3c!-- Learning Module title editor --\x3e\n                    <div class="lm-header-row" bb-click-to-invoke-child=".list-tree-toggle button">\n                      \x3c!-- Header row section --\x3e\n                      <div class="lm-title-text-editor">\n                        <div class="editable-title-container" ng-show="!baseItem.titleEditMode">\n                          \x3c!-- Conditional release section begin --\x3e\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isConditionalReleaseLocked()">\n                            <bb-svg-icon size="small" icon="lock"></bb-svg-icon>\n                          </div>\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isForcedSequenceModule() && content.state === \'Started\'">\n                            <bb-svg-icon size="small" icon="started" status="success"></bb-svg-icon>\n                          </div>\n                          <div class="element-conditional-release" ng-if="!content.canEdit() && content.isForcedSequenceModule() && content.state === \'Completed\'">\n                            <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n                          </div>\n                          \x3c!-- Conditional release section end --\x3e\n                          \x3c!-- Attach event only at Instructor View --\x3e\n                          <div ng-if="::content.canEdit()" class="lm-title-instructor">\n                            <h3 class="sr-only" tabindex="-1">{{content.title}}</h3>\n                            <h3 class="lm-title secondary-title ellipse" ng-click="baseItem.enterTitleEditMode($event)" tabindex="-1" aria-hidden="true"\n                                analytics-id="components.directives.learningModule.baseItem.enterTitleEditMode.header">\n                            {{content.title}}\n                            </h3>\n                            <button ng-if="::content.canEdit()" class="button super-clear edit-title" type="button"\n                                ng-click="baseItem.enterTitleEditMode($event)"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.base-item.edit-title\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                analytics-id="course.learning.module.base.item.editTitle.button"\n                                >\n                                <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n                            </button>\n                          </div>\n\n                          \x3c!-- Just display title at Student View --\x3e\n                          <div class="lm-title-student" ng-if="::(!content.canEdit())">\n                            <button class="lm-title secondary-title ellipse"\n                                tabindex="0"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                aria-expanded="{{isOpen}}"\n                                title="{{::content.title}}"\n                                ng-click="!content.isConditionalReleaseLocked() && baseItem.toggleLM()"\n                                analytics-id="course.learning.module.base.item.toggleLm.button">\n                              {{::content.title}}\n                            </button>\n                            <div ng-if="content.isConditionalReleaseLocked()"\n                              role="tooltip"\n                              tabindex="0"\n                              class="lock-info"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-open-on-activation="true"\n                              tooltip-disable-on-mouse-over="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.lock-info</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div ng-show="baseItem.titleEditMode" bb-click-outside="baseItem.exitTitleEditMode()" ng-if="::content.canEdit()">\n                          <div class="lm-input">\n                            <input name="learning-module-title" class="lm-header-title lm-title" type="text" autocapitalize="off" ng-keydown="baseItem.onTitlePressKey($event)"\n                              maxlength="{{::baseItem.titleMaxLength}}" ng-model="content.title" ng-model-options="{ getterSetter: true }"\n                              ng-blur="baseItem.exitTitleEditMode($event)" ng-change="baseItem.onChangeTitle()" ng-click="$event.stopPropagation()"\n                              aria-required="true"\n                              bb-translate-attrs="{\'aria-label\': \'components.directives.header.placeholder.x-bb-lesson\'}"\n                              ng-required="true"\n                              analytics-id="course.learning.module.base.item.learningModuleTitle.input.text">\n                          </div>\n                        </div>\n                        \x3c!-- Learning Module visibility selector  --\x3e\n                        <div class="lm-visibility-selector" ng-if="content.canEdit() || (baseItem.isCourseCompletedAndInInstructorView() && content.isConditionalRelease())">\n                          <bb-content-visibility-selector ng-if="::content.canEdit()" content="content" is-visibility-selector-enabled="true" onchange-func="baseItem.onChangeVisibility()"\n                            open-panel-on-restricted="true" disable-restricted="false" enable-conditional-release="true">\n                          </bb-content-visibility-selector>\n                          <div class="rules" ng-if="(content.canEdit() || baseItem.isCourseCompletedAndInInstructorView()) && content.isConditionalRelease()">\n                            <a href="javascript:void(0);"\n                              ng-click="baseItem.canOpenConditionalRelease && baseItem.openConditionalRelease()"\n                              bb-complex-tooltip\n                              enhanced-tooltip="true"\n                              tooltip-position="bottom"\n                              tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n                              tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n                              tooltip-auto-update="true"\n                              tooltip-scope="baseItem.conditionalRelease.tooltipScope"\n                              tooltip-template="{{::baseItem.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n                              analytics-id="components.directives.content-item-base.conditionalRelease.{{baseItem.conditionalRelease.conditionType}}.link">\n                              <span bb-translate>components.directives.content-item-base.conditionalRelease.{{baseItem.conditionalRelease.conditionType}}</span>\n                              <span class="sr-only">{{baseItem.conditionalRelease.tooltips}}</span>\n                            </a>\n                          </div>\n                        </div>\n                        \x3c!-- Learning Module control section begin --\x3e\n                        \x3c!-- for student --\x3e\n                        \x3c!-- <div ng-if="::(!content.canEdit())">\n                          <span class="lm-counting">{{baseItem.completed}} / {{baseItem.count}}</span>\n                        </div> --\x3e\n                        \x3c!-- for instructor --\x3e\n                        <div ng-if="::(content.canEdit() && canMove)" ng-show="!baseItem.titleEditMode" class="lm-drag-button">\n                          <button bb-drag-handle drag-item-id="{{content.id}}"\n                                  drag-item-name="{{content.title}}"\n                                  drag-item-type="{{content.contentHandler}}"\n                                  drag-item-context="{{contextArea}}"\n                                  class="super-clear small button icon js-drag-handle"\n                                  translate-attrs-values="{contentTitle: content.title}"\n                                  bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                                  analytics-id="course.learning.module.base.item.move.button">\n                            <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n                          </button>\n                        </div>\n                        <div bb-foundation-defer>\n                          <bb-overflow-menu ng-if="::(content.canDelete() || content.canEdit() || content.hasConversation() && !content.isConditionalReleaseLocked())"\n                                            element-id="{{::(\'learning-module\' + baseItem.controlId)}}"\n                                            element-name="{{content.title}}"\n                                            menu-items="baseItem.getOverflowMenu()"\n                                            analytics-id-tag-prefix="components.directives.learning-module.base-item.overflowMenu">\n                          </bb-overflow-menu>\n                        </div>\n                      </div>\n\n                      \x3c!-- Learning Module control section end --\x3e\n                      <div class="list-tree-toggle" ng-if="::(content.canEdit() || !content.isRestricted())">\n                        <button class="button super-clear" ng-click="baseItem.toggleLM()" aria-controls="{{::\'learning-module-contents-\' + content.id}}"\n                          aria-expanded="{{isOpen}}"\n                          bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.aria-label.toggleLM\',\n                          title: isOpen ? \'components.directives.learning-module.base-item.collapse\' : \'components.directives.learning-module.base-item.expand\'}"\n                          translate-attrs-values="{learningModuleName: content.title}"\n                          analytics-id="course.learning.module.base.item.toggleLm.button"\n                          >\n                          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n                    \x3c!-- Learning Module title section end --\x3e\n                  </div>\n                  \x3c!-- Learning Module description section begin --\x3e\n                  <div class="lm-description"  ng-if="::(content.canEdit() || content.description)" ng-show="isOpen">\n                    \x3c!-- Displays at instructor view  --\x3e\n\n                    <div ng-if="::(content.canEdit())">\n                      <div class="lm-add-description" ng-if="!content.description && !baseItem.descriptionEditMode">\n                        <button type="button"\n                                class="lm-add-description-btn"\n                                ng-click="baseItem.editDescription()"\n                                bb-translate-attrs="{\'aria-label\': baseItem.toggleAriaLabel}"\n                                analytics-id="course.learning.module.base.item.lmAddDescription.button">\n                          <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n                          <span bb-translate>components.directives.learning-module.base-item.add-description</span>\n                        </button>\n                      </div>\n\n                      <div ng-show="baseItem.descriptionEditMode" is-active="baseItem.descriptionEditMode" bb-click-outside="baseItem.saveDescription()">\n                        <form>\n                          <bb-basic-text-editor ng-model="content.description"\n                            element-id="{{::(\'lm-editor\' + content.id)}}"\n                            class="lm-description-editor"\n                            ng-class="{focused: baseItem.descriptionEditMode}"\n                            input-max-length="250"\n                            read-only="false"\n                            should-prevent-line-breaking="false"\n                            >\n                          </bb-basic-text-editor>\n                          <div class="buttons-2 equal-buttons panel-footer-right">\n                              <button class="button button--secondary js-cancel js-secondary-button non-first-focus"\n                                      ng-click="baseItem.cancelDescriptionEdit()"\n                                      bb-translate\n                                      ng-mousedown="$event.preventDefault()"\n                                      type="button"\n                                      analytics-id="components.directives.save-buttons.cancel">components.directives.save-buttons.cancel</button>\n                              <button class="button js-save js-primary-button non-first-focus"\n                                      ng-disabled="!baseItem.isDescriptionEdited()"\n                                      ng-click="baseItem.saveDescription()"\n                                      bb-translate\n                                      ng-mousedown="$event.preventDefault()"\n                                      type="button"\n                                      analytics-id="components.directives.save-buttons.notSaved">components.directives.save-buttons.notSaved</button>\n                            </div>\n                        </form>\n                      </div>\n\n                      <div class="description-show-text-container"\n                           ng-show="content.description && !baseItem.descriptionEditMode"\n                           ng-click="baseItem.onDescriptionClicked()"\n                           analytics-id="components.directives.learning-module.base-item.descriptionClicked"\n                      >\n                        <p class="description-show-text">\n                          {{content.description}}\n                        </p>\n                        <button class="description-editor"\n                                bb-translate-attrs="{\'aria-label\': \'components.directives.learning-module.base-item.edit-description\'}"\n                                translate-attrs-values="{learningModuleName: content.title}"\n                                analytics-id="course.learning.module.base.item.editDescription.button">\n                            <bb-svg-icon icon="draw" size="small" aria-hidden="true"></bb-svg-icon>\n                        </button>\n                      </div>\n                    </div>\n\n                    \x3c!-- Displays at student view --\x3e\n                    <div ng-if="::(!content.canEdit())">\n                      <div>\n                        <p class="description-show-text">\n                          {{content.description}}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \x3c!-- Learning Module description section end --\x3e\n              </ng-switch>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},JuVx:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("D57K"),s=n("Sa5G"),o=n("jhBu"),a=n("oi1r"),r=n("pjml"),c=n("nsO7"),l=n("C2vp"),d=n("cbVV"),u=n("qH3X"),p=n("o5Lu"),m=n("yC9S"),h=n("aHpC"),b=function(){function e(e,t){this.cells=e,this.metadata=t}return e.prototype.isCellExisting=function(e){return this.isCellExistingByColumnId(e.column.id)},e.prototype.isCellExistingByColumnId=function(e){return!c.isUndefined(this.cells[e])},e.prototype.insertDataCell=function(e){this.isCellExisting(e)||(this.cells[e.column.id]=e)},e.prototype.deleteDataCellByColumnId=function(e){this.isCellExistingByColumnId(e)&&delete this.cells[e]},e}(),g=function(){function e(e,t,n,i,s,o,a){var r=this;this.$rootScope=e,this.$injector=t,this.$q=n,this.CourseModel=i,this.entitlementService=s,this.schemaService=o,this.gradeGridRebornDirectiveScope=a,this._canViewGrades=!1,this.schemas={},this.dataMap={},this.columns=[],this.columnIdGroupsMap={},this.allGroupMemberships=[],this.groupIdUserIdMap={},this.requestQueue=[],this.canViewGroups=!1,m.b.OnRootScope(this.$rootScope,p.a,(function(e,t){var n=r.getColumnMetadatas().find((function(e){return e.id===t}));n&&r.$rootScope.$broadcast(p.c,n)}))}return Object.defineProperty(e.prototype,"canViewGrades",{get:function(){return this._canViewGrades},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"course",{get:function(){return this._course},enumerable:!0,configurable:!0}),e.prototype.getSchema=function(){return this.schemas},e.prototype.getColumnIdGroupsMap=function(){return this.columnIdGroupsMap},e.prototype.getAllGroupMemberships=function(){return this.allGroupMemberships},e.prototype.getGroupIdUserIdMap=function(){return this.groupIdUserIdMap},e.prototype.initializeSchemas=function(e){var t=this;e.forEach((function(e){t.schemas[e.id]=e}))},e.prototype.initialize=function(e,t){var n=this;return this._course=e,this.courseId=e.id,this.columnMetadatas=t,this.canViewGroups=this.entitlementService.isEntitled(s.v.ViewGroups,this.courseId),this.$q.all([this.loadSchemas(this.courseId),this.fetchMemberships(this._course),this.entitlementService.hasAnyCourseEntitlement([s.u.ViewGrades,s.u.ViewGrades],e.id),this.canViewGroups?this.initializeGroupsMemberships():this.$q.when()]).then((function(e){return n.initializeSchemas(e[0]),n._canViewGrades=e[2],e[1]})).then((function(e){return e.filter((function(e){return e.isStudentMembership()}))})).then((function(e){n.insertRows(e);var t=!1;n.columns=n.getColumnMetadatas().map((function(e){return e.externalGrade&&(t=e.externalGrade),n.insertColumnByMetadata(e)}));var i=n.createStudentColumn(t);return n.insertColumn(i,!0),{rows:e,columns:n.columns}}))},e.prototype.getAssignedGroupsByColumnId=function(e){return this.columnIdGroupsMap[e]},e.prototype.loadSchemas=function(e){return this.schemaService.loadSchemas(e)},e.prototype.fetchMemberships=function(e){return e.memberships.$refresh({fields:"role,courseRole,childCourseId,user,id,isAvailable,dueDateExceptionType",sort:["isPreviewStudent(asc)","user.familyName(asc)","user.givenName(asc)"].join()}).$asPromise()},e.prototype.initializeColumnIdGroupsMap=function(e){var t=this;this.columnIdGroupsMap={},c.isEmpty(this.getColumnMetadatas())||this.getColumnMetadatas().forEach((function(n){n.contentId&&!n.isScorm()&&e[n.contentId]&&(t.columnIdGroupsMap[n.id]=e[n.contentId])}))},e.prototype.initializeGroupsMemberships=function(){var e=this;return this.allGroupMemberships=[],this.getGroupsMemberships().then((function(){e.initializeGroupIdUserIdMap()}))},e.prototype.initializeGroupIdUserIdMap=function(){var e=this;this.groupIdUserIdMap={};var t={};this.allGroupMemberships.forEach((function(n){e.groupIdUserIdMap[n.id]=n.memberships.map((function(e){return e.userId})),n.assignedContents.forEach((function(e){(t[e.contentId]=t[e.contentId]||[]).push(e)}))})),this.initializeColumnIdGroupsMap(t)},e.prototype.getGroupsMemberships=function(){var e=this;return this.course.groups.$refresh({offset:this.allGroupMemberships.length,limit:1e4,fields:"id,memberships,assignedContents"}).$asPromise().then((function(t){return e.allGroupMemberships=e.allGroupMemberships.concat(t),t.paging.nextPage?e.getGroupsMemberships():e.allGroupMemberships}))},e.prototype.fetchGradeBulkView=function(e,t,n){return e.gradebook.bulkView.$fetch({membershipIds:t,columnIds:n,expand:"attempts,lastAttemptId,needsGradingAttemptCount,groupAttempts",timestamp:(new Date).getTime()}).$asPromise()},e.prototype.createColumnByColumnMetadata=function(e){return e.externalGrade?this.createOverallColumn(e):e.isCalculated()?this.createCalculationColumn(e):e.isOffline()?this.createOfflineItemColumn(e):e.isDiscussion()?c.isEmpty(this.columnIdGroupsMap[e.id])?this.createDiscussionItemColumn(e):this.createGroupDiscussionGradeColumn(e,this.columnIdGroupsMap[e.id]):e.isAttendance()?this.createAttendanceItemColumn(e):this.columnIdGroupsMap[e.id]?this.createGroupTestGradeColumn(e,this.columnIdGroupsMap[e.id]):e.seemsAttemptBased()&&e.scoreProviderHandle?this.createAttemptBasedItemGradeColumn(e):e.scoreProviderHandle?this.createItemGradeColumn(e):this.createOfflineItemColumn(e)},e.prototype.createStudentColumn=function(t){return this.$injector.instantiate(d.l,{gridData:this,data:{id:e.COLUMN_STUDENT},headerTemplate:"<bb-grade-grid-column-header-student-reborn></bb-grade-grid-column-header-student-reborn>",cellTemplate:"<bb-grade-grid-column-student-reborn></bb-grade-grid-column-student-reborn>",columnWidth:220,position:"left",border:!t})},e.prototype.createOverallColumn=function(t){return this.$injector.instantiate(d.k,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-overall-reborn></bb-grade-grid-column-header-overall-reborn>",cellTemplate:"<bb-grade-grid-column-overall-reborn></bb-grade-grid-column-overall-reborn>",columnWidth:e.COLUMN_WIDTH,position:"left",border:!0})},e.prototype.createCalculationColumn=function(t){return this.$injector.instantiate(d.d,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createItemGradeColumn=function(t){return this.$injector.instantiate(d.i,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createOfflineItemColumn=function(t){return this.$injector.instantiate(d.j,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createDiscussionItemColumn=function(t){return this.$injector.instantiate(d.e,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createAttendanceItemColumn=function(t){return this.$injector.instantiate(d.b,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createAttemptBasedItemGradeColumn=function(t){return this.$injector.instantiate(d.a,{gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createGroupTestGradeColumn=function(t,n){return this.$injector.instantiate(d.h,{groups:n,gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.createGroupDiscussionGradeColumn=function(t,n){return this.$injector.instantiate(d.f,{groups:n,gridData:this,data:t,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:e.COLUMN_WIDTH,position:"center",border:!0})},e.prototype.getColumnMetadata=function(e){return c.find(this.columnMetadatas,(function(t){return t.id===e}))},e.prototype.getColumnMetadataByContentId=function(e){return c.find(this.columnMetadatas,(function(t){return t.contentId===e}))},e.prototype.isColumnMetadataExisting=function(e){return!c.isUndefined(this.getColumnMetadata(e))},e.prototype.getColumnMetadatas=function(){return this.columnMetadatas},e.prototype.getRowById=function(e){return this.dataMap[e]},e.prototype.getRowByUserId=function(e){return c.find(c.values(this.dataMap),(function(t){return t.metadata.user.id===e}))},e.prototype.getGroupById=function(e){return this.allGroupMemberships.find((function(t){return t.id===e}))},e.prototype.getCell=function(e,t){return this.dataMap[e].cells[t]},e.prototype.insertRows=function(e){var t=this;e.forEach((function(e){return t.insertRow(e)}))},e.prototype.insertRow=function(e){this.dataMap[e.id]=new b({},e)},e.prototype.createCell=function(t,n){if(n.id===e.COLUMN_STUDENT)return this.$injector.instantiate(l.k,{gridData:this,row:t,column:n});var i=n.data;return i.externalGrade?this.$injector.instantiate(l.j,{gridData:this,row:t,column:n}):i.isCalculated()?this.$injector.instantiate(l.c,{gridData:this,row:t,column:n}):i.isOffline()?this.$injector.instantiate(l.i,{gridData:this,row:t,column:n}):i.isDiscussion()?n instanceof d.g&&n.userIdGroupIdMap[t.metadata.user.id]?this.$injector.instantiate(l.f,{gridData:this,row:t,column:n,group:n.getGroupById(n.userIdGroupIdMap[t.metadata.user.id])}):this.$injector.instantiate(l.d,{gridData:this,row:t,column:n}):i.isAttendance()?this.$injector.instantiate(l.b,{gridData:this,row:t,column:n}):n instanceof d.g&&n.userIdGroupIdMap[t.metadata.user.id]?this.$injector.instantiate(l.e,{gridData:this,row:t,column:n,group:n.getGroupById(n.userIdGroupIdMap[t.metadata.user.id])}):i.seemsAttemptBased()?this.$injector.instantiate(l.a,{gridData:this,row:t,column:n}):this.$injector.instantiate(l.g,{gridData:this,row:t,column:n})},e.prototype.insertColumn=function(e,t){void 0===t&&(t=!1),t?this.columns.unshift(e):this.columns.push(e),this.insertDataCells(e)},e.prototype.insertDataCells=function(e){var t=this;c.forOwn(this.dataMap,(function(n,i){return n.insertDataCell(t.createCell(n,e))}))},e.prototype.insertColumnByMetadata=function(e){var t=this.createColumnByColumnMetadata(e);return this.insertColumn(t),t},e.prototype.updateColumnByMetadata=function(e){this.isColumnExisting(e.id)&&this.deleteColumnById(e.id);var t=this.createColumnByColumnMetadata(e);return this.insertColumnAtIndex(t,this.getColumnMetadataIndexInColumnMetadatas(e)+1),this.insertDataCells(t),t},e.prototype.refreshDataCell=function(e,t){c.isUndefined(e)||(e.deleteDataCellByColumnId(t.id),e.insertDataCell(this.createCell(e,t)))},e.prototype.deleteColumn=function(e){this.deleteColumnById(e.id)},e.prototype.deleteColumnById=function(e){var t=this,n=c.remove(this.columns,(function(t){return t.id===e}));this.deleteDataCellsByColumnId(e),n&&n[0]&&n[0].data&&n[0].data.contentId&&(n=c.remove(this.columns,(function(e){return e.data&&e.data.contentId===n[0].data.contentId}))).forEach((function(e){return t.deleteDataCellsByColumnId(e.id)}))},e.prototype.deleteDataCellsByColumnId=function(e){c.forOwn(this.dataMap,(function(t,n){return t.deleteDataCellByColumnId(e)}))},e.prototype.getColumnMetadataIndexInColumnMetadatas=function(e){return c.findIndex(this.columnMetadatas,(function(t){return e.id===t.id}))},e.prototype.insertColumnAtIndex=function(e,t){this.columns.splice(t,0,e)},e.prototype.getColumn=function(e){return c.find(this.columns,(function(t){return t.id===e}))},e.prototype.getColumns=function(){return this.columns},e.prototype.isColumnExisting=function(e){return!c.isUndefined(this.getColumn(e))},e.prototype.getRowCount=function(){return c.keys(this.dataMap).length},e.prototype.loadData=function(t,n){if(!c.isEmpty(t)&&!c.isEmpty(n)&&!c.isEmpty(n.filter((function(t){return t.id!==e.COLUMN_STUDENT})))){var i=this.filterRowsAndColumns(t.map((function(e){return e.id})),n.map((function(e){return e.id})),(function(e){return e.isUnloaded||e.isWaiting})),s=i[0],o=i[1];c.isEmpty(s)||c.isEmpty(o)||this.prepareFetchGrades(s,e.ROW_NUMBER_PER_REQUEST,o,e.COLUMN_NUMBER_PER_REQUEST)}},e.prototype.filterRowsAndColumns=function(e,t,n){var i=this.filterRows(e,t,n);return[i,this.filterColumns(i,t,n)]},e.prototype.filterRows=function(e,t,n){var i=this,s=[];return e.forEach((function(e){var o=i.dataMap[e];c.find(t,(function(e){return n(o.cells[e])}))&&s.push(e)})),s},e.prototype.filterColumns=function(e,t,n){var i=this,s=[];return t.forEach((function(t){c.find(e,(function(e){return n(i.dataMap[e].cells[t])}))&&s.push(t)})),s},e.prototype.prepareFetchGrades=function(e,t,n,i){var s=this,o=c.isEmpty(this.requestQueue),a=[];c.chunk(e,t<=0?e.length:t).forEach((function(e){c.chunk(n,i<=0?n.length:i).forEach((function(t){o?s.requestQueue.push([e,t]):a.push([e,t]),s.markWaiting(e,t)}))})),this.requestQueue=a.concat(this.requestQueue),o&&this.fetchGrades()},e.prototype.fetchGrades=function(){for(var t=0;t<e.REQUEST_WORKER_NUMBER;t++)this.fetchGrade()},e.prototype.fetchGrade=function(){var e,t=this;if(!c.isEmpty(this.requestQueue)){var n=this.requestQueue.shift(),i=n[0],s=n[1];e=this.filterRowsAndColumns(i,s,(function(e){return e.isWaiting})),i=e[0],s=e[1],c.isEmpty(i)||c.isEmpty(s)?this.fetchGrade():(this.markLoading(i,s),this.fetchGradeBulkView(this.CourseModel.$new(this.courseId),i,s).then((function(e){t.assignGrade(e),t.markLoaded(i,s),t.fetchGrade()})))}},e.prototype.assignGrade=function(e){var t=this;e.bulkViewUsers.forEach((function(e){var n=t.dataMap[e.courseMembershipId];e.grades.forEach((function(e){var t=n.cells[e.columnId];t.isLoading&&(t.data=e)}))}))},e.prototype.markWaiting=function(e,t){var n=this;e.forEach((function(e){return t.forEach((function(t){var i=n.dataMap[e].cells[t];i.isUnloaded&&i.setLoadState(l.h.WAITING)}))}))},e.prototype.markLoading=function(e,t){var n=this;e.forEach((function(e){return t.forEach((function(t){var i=n.dataMap[e].cells[t];i.isWaiting&&i.setLoadState(l.h.LOADING)}))}))},e.prototype.markLoaded=function(e,t){var n=this;e.forEach((function(e){return t.forEach((function(t){var i=n.dataMap[e].cells[t];i.isLoading&&i.setLoadState(l.h.LOADED)}))})),this.broadcastRefreshEvent(e,t)},e.prototype.broadcastRefreshEvent=function(e,t){var n=this;e.forEach((function(e){var i=t.filter((function(t){return n.dataMap[e].cells[t].isLoaded}));n.gradeGridRebornDirectiveScope.$broadcast(u.a.REFRESH,{rowId:e,columnIds:i})}))},e.prototype.refreshAllColumns=function(){var e=this;c.forEach(this.getColumnMetadatas(),(function(t){return e.updateColumnByMetadata(t)}))},e.prototype.addUpdatedColumnFlag=function(e){var t=this;c.forEach(e,(function(e){var n=c.find(t.columns,(function(t){return t.id===e}));n&&(n.isUpdated=!0)}))},e.prototype.destory=function(){this.requestQueue=[]},e.COLUMN_WIDTH=142,e.COLUMN_STUDENT="COLUMN_STUDENT",e.REQUEST_WORKER_NUMBER=5,e.ROW_NUMBER_PER_REQUEST=0,e.COLUMN_NUMBER_PER_REQUEST=0,e=Object(i.__decorate)([Object(i.__param)(0,Object(h.b)("$rootScope")),Object(i.__param)(1,Object(h.b)("$injector")),Object(i.__param)(2,Object(h.b)("$q")),Object(i.__param)(3,Object(h.b)(r.o.serviceName)),Object(i.__param)(4,Object(h.b)(o.b)),Object(i.__param)(5,Object(h.b)(a.b)),Object(i.__param)(6,Object(h.b)("gradeGridRebornDirectiveScope"))],e)}()},Jwnl:function(e,t){e.exports='\x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n<button ng-if="!contentItemBase.isEngagementOutline()"\n        class="content-title" ng-class="{\'name-middle\': contentItemFolder.shouldAlignMiddle()}"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-expanded="{{content.ui.isOpen}}"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        bb-translate-attrs="{\'aria-label\':\'components.directives.content-item-base.aria-label.toggle-folder\'}"\n        translate-attrs-values="{folderName: content.title}"\n        analytics-id="content.item.folder.toggleFolder.button"><span>{{ content.title }}</span></button>\n<button ng-if="contentItemBase.isEngagementOutline()"\n        class="content-title name"\n        ng-click="contentItemFolder.toggleFolder()"\n        aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n        aria-expanded="{{content.ui.isOpen}}"\n        analytics-id="content.item.folder.engagementOutline.toggleFolder.button"><span>{{ content.title }}</span></button>'},KKAh:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("BY8f"),o="ultra.components.directives.bbUiIcon.Journal";Object(i.a)(s.Journal,o,"bbUiIconJournal")},KXuk:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-complete",use:"icon-small-complete-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-complete"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8l2 3 4-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},KeOq:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content student-content student-column" role="columnheader" tabindex="0">\n    <div class="ellipse left-bold location" course-org-token-resolver bb-translate>components.directives.grade.grid.students</div>\n  </div>\n  <div class="summary student-column"></div>\n  <div class="summary student-column">\n    <span bb-translate course-org-token-resolver translate-values="{count: studentsTotal}">components.directives.grade.grid.studentsSummary.plural</span>\n  </div>\n</div>\n'},KmIE:function(e,t,n){},"L+81":function(e,t,n){"use strict";n("zhNR"),n("Siqh"),n("Xc1Q");var i=n("lx16"),s=n("wHJ2"),o=n("kC07"),a=n("D8d/"),r=n("pjml"),c=n("lEL+"),l=n("yGpi"),d=n("D57K"),u=(n("Zahr"),n("lwNT"),n("vcLy"),n("KXuk"),n("Sa5G")),p=n("0JpG"),m=n("MKP7"),h=n("JNtI"),b=n("Ocaa"),g=n("pIXs"),v=n("aTRN"),f=n("nYZ0"),y=n("w9Zy"),w=n("TnpK"),C=n("X455"),S=n("oi1r"),A=n("jhBu"),k=n("JiEj"),I=n("aHpC"),O=n("+4Px"),D=n("e6jQ"),T=n("BLb8"),$="ultraUi.components.directives.content.learningModule.learningModuleBaseItem",x=function(){function e(e,t,n,i,s,o,a,r,c,l,d,p){var m=this;this.scope=e,this.element=t,this.attrs=n,this.localizeService=i,this.$q=s,this.contentService=o,this.offcanvasService=a,this.timeout=r,this.ultraState=c,this.contextCourseMembership=l,this.entitlementService=p,this.titleEditMode=!1,this.descriptionEditMode=!1,this.isEditButtonHovering=!1,this.lmTitlePlaceholder=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.learning-module.base-item.title-placeholder"}),this.description="",this.controlId=Object(D.a)(),this.titleMaxLength=250,this.isGettingConfirmationOptions=!1,this.descriptionCache="",this.titleCache="",this.conditionalRelease=d.instantiate(v.a,{scope:e}),e.content.title||(e.content.title=this.lmTitlePlaceholder),e.content.description=e.content.description?e.content.description:"",this.scope.$on("refresh-conditional-release-rules",(function(e,t){m.scope.content.id===t.id&&m.conditionalRelease.getConditions(t)})),this.scope.$on("bb-update-CR-tooltip",(function(e,t,n,i){t&&(m.rulesCriteria&&m.rulesCriteria.gradeColumnId)===t.id&&m.conditionalRelease.getConditions(m.scope.content,n,i)})),(e.content.isConditionalReleaseLocked()||e.content.isConditionalRelease()||e.content.isForcedSequenceModule())&&this.conditionalRelease.getConditions(e.content),this.entitlementService.hasCourseEntitlement(u.f.ModifyContent,this.scope.content.courseId).then((function(e){m.entitledToModifyContent=e})),this.scope.$on("update-state",(function(t,n){var i;if(n&&e.content.isForcedSequenceModule()&&!m.contextCourseMembership.isActAsInstructorMembership()&&(e.content.id===n.parentId||e.content.children&&e.content.children.some((function(e){return e.id===n.parentId&&(i=e,!0)})))){var o=[e.content.$fetch().$asPromise(),e.content.getChildren({limit:e.content.children.length+1}).$asPromise()];i&&i.children&&o.push(i.getChildren({limit:i.children.length+1}).$asPromise()),s.all(o).then((function(t){var n=t[1],s=t[2];n.forEach((function(t,i){var s=e.content.children.findIndex((function(e){return e.id===t.id}));-1!==s&&(n[i].ui=e.content.children[s].ui,n[i]=Object.assign(e.content.children[s],n[i]))})),i&&s&&s.forEach((function(e,t){var n=i.children.findIndex((function(t){return t.id===e.id}));-1!==n&&(i.children[n]=Object.assign(i.children[n],s[t]))}))}))}})),Object(T.c)(this.scope,(function(e,t){m.scope.content.isConditionalReleaseLocked()&&m.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(T.d)(m.scope,t)})),Object(T.b)(this.scope,(function(e){m.scope.content.isConditionalReleaseLocked()&&Object(T.d)(m.scope)}))}return e.prototype.enterTitleEditMode=function(e){e.stopPropagation(),this.titleEditMode=!0,this.titleCache=this.scope.content.title,this.offcanvasService.safeFocus(this.element.find("input.lm-title"))},e.prototype.exitTitleEditMode=function(e){this.titleEditMode=!1,this.scope.content.title?this.scope.content.title!==this.titleCache&&this.onChangeTitle():this.scope.content.title=this.titleCache},e.prototype.onTitlePressKey=function(e){e.keyCode===O.f&&this.exitTitleEditMode()},e.prototype.onChangeTitle=function(){this.scope.content.title.trim()&&this._persistContent(this.scope.content,["title"])},e.prototype.onChangeVisibility=function(){this._updateVisibility(this.scope.content)},e.prototype._updateVisibility=function(e){e.visibility=this.contentService.determineVisibility(e.isAvailable);var t=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],n=e.getAssociatedGradingColumn();(n||this.scope.content.isForcedSequenceModule())&&(this.scope.content.isForcedSequenceModule()&&e.applyForcedSequence(!1),n&&(n.visible=e.isAvailable),t.push("contentDetail")),this._persistContent(e,t)},e.prototype.deleteContent=function(){this.scope.$emit("deleteContent",this.scope.content)},e.prototype.getOverflowMenu=function(){var e=this;return[{icon:"trash",labelKey:"global.delete",show:function(){return e.scope.content.canDelete()},onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return e.isGettingConfirmationOptions=!0,e.getDeleteConfirmationKeyAndShowType().then((function(t){var n=t.confirmationKey.replace(/^resource\//,"");return e.isGettingConfirmationOptions=!1,e.$q.when(h.a(n))}))}}}]},e.prototype.getDeleteConfirmationKeyAndShowType=function(){var e=this;return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then((function(t){return{confirmationKey:e.scope.content.ui.deleteConfirmationKey,showType:e.scope.content.ui.modalShowType}}))},e.prototype.toggleLM=function(){this.scope.toggleFunc&&this.scope.toggleFunc()},e.prototype.isDescriptionEdited=function(){return this.descriptionCache!==this.scope.content.description},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.entitledToModifyContent},Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.onDescriptionClicked=function(){this.editDescription(),this.descriptionCache=this.scope.content.description},e.prototype.editDescription=function(){var e=this;this.descriptionEditMode=!0,this.timeout((function(){e.element.find(".lm-description textarea").focus()}),this.scope,0)},e.prototype.cancelDescriptionEdit=function(){this.scope.content.description=this.descriptionCache,this.descriptionEditMode=!1},e.prototype.saveDescription=function(){this.descriptionEditMode=!1;this._persistContent(this.scope.content,["description"]),this.descriptionCache=""},e.prototype._persistContent=function(e,t){var n=this;e.withParams({fields:"id",expand:"gradebookCategory"}).$save(t).$asPromise().then((function(){n.scope.$root.$broadcast("content-update",e)}))},e.prototype.openConditionalRelease=function(){this.ultraState.goPeekState("conditional-release",{id:this.scope.content.id})},e.$inject=["scope","element","attrs",p.serviceName,"$q",f.f,y.e,c.b,w.d,C.d,"$injector",A.b],Object(d.__decorate)([Object(I.a)(2e3)],e.prototype,"onChangeTitle",null),e}(),E=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=k,this.scope={content:"=",canToggle:"&",toggleFunc:"&",canMove:"=",contextArea:"=",isOpen:"="},this.link=function(e,n,i){e.baseItem=t.$injector.instantiate(x,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();s.module($,[m.a,g.a,f.d,b.a,y.d,c.a,w.b,S.a,A.a]).directive("bbLearningModuleBaseItem",["$injector",function(e){return e.instantiate(E)}]),n.d(t,"a",(function(){return P}));var P="ultra.directives.folder",R=function(){function e(e,t,n,i){var s=this;this.scope=e,this.element=t,this.timeout=n,this.contextCourseMembership=i,this.showEmptyMenu=!0,this.showMenuOverride=!1,this.showOutlineOverride=!1,this.isOpen=!1,this.toggleLabelKey="components.directives.folder.aria-label.open",this.initialChildrenLength=0,this.FOLDER_CONTENTS_SELECTOR=".folder-contents",this.contextArea=e.contextArea,this.loadMoreChildren=e.loadMoreChildren,this.contents=e.contents,this.content.ui?this.content.ui.isOpen=!1:this.content.ui={isOpen:!1},e.$on("toggle-folder",(function(e,t){s.canToggle()&&t===s.content&&s.toggleFolder()})),e.$on("toggle-folder-by-id",(function(t,n){s.canToggle()&&n===s.content.id&&(s.scope.$$phase||s.scope.$root&&s.scope.$root.$$phase?s.toggleFolder():e.$apply((function(){s.toggleFolder()})))})),e.$on("close-folder-immediately-by-id",(function(e,t){s.isOpen&&s.canToggle()&&t===s.content.id&&s._closeFolderImmediately()})),e.$on("bb-drag-start",(function(){s.isOpen&&s.canToggle()&&(null==s.content.children||0===s.content.children.length)&&s._closeFolderImmediately()})),e.$on("close-all-add-menus",(function(e,t){if(s.isOpen&&(null==s.content.children||0===s.content.children.length)&&s.content.id!==t){if(s.content.isLearningModule())return;s.toggleFolder()}})),e.$on("showContentImportProgress",(function(t,n,i){s.content.id!==i||0!==s.content.children.length||s.showOutlineOverride||(s.showOutlineOverride=!0,s.timeout((function(){s.scope.$broadcast("showContentImportProgress",n,i)}),e))})),e.$on("keyboard-drag-move",(function(e,t){s.content.id+"blank"===t?s.showEmptyMenu=!1:s.showEmptyMenu=!0})),e.$on("keyboard-drag-lost-focus",(function(){s.showEmptyMenu=!0})),e.$on("keyboard-drag-end",(function(){s.showEmptyMenu=!0}))}return e.prototype._closeFolderImmediately=function(){var e=this;this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).hide(),this.isOpen=!1,this.content.ui.isOpen=!1):this.scope.$apply((function(){e.element.children(".folder").children(e.FOLDER_CONTENTS_SELECTOR).hide(),e.isOpen=!1,e.content.ui.isOpen=!1}))},e.prototype.toggleFolder=function(){var e=this;this.isOpen||null!=this.content.children&&0!==this.content.children.length||this.loadMoreChildren(this.content).$then((function(){e.content.children&&0===e.content.children.length&&!e.contextCourseMembership.isActAsInstructorMembership()&&e.scope.content.state!==r.r.StateType.Completed&&e.scope.content.updateState(r.r.StateType.Completed,!0)})),this.isOpen=this.content.ui.isOpen=!this.content.ui.isOpen,this.content.children?this.content.children.$then((function(){e.initialChildrenLength=e.content.children.length,0===e.content.children.length?(e._calculateDurationAndToggle(),e.showMenuOverride=!0,(e.isOpen||e.isOpen&&e.content.isLearningModule())&&e.scope.$root.$broadcast("close-all-add-menus",e.content.id)):e.timeout((function(){e._calculateDurationAndToggle(),e.showMenuOverride=!1}),e.scope),e.scope.$watch((function(){return e.content.children&&e.content.children.length}),(function(t,n){e.showMenuOverride=0===t,0===t&&t!==n&&e.isOpen&&e.scope.$root.$broadcast("close-all-add-menus",e.content.id)}))})):(this._calculateDurationAndToggle(),this.showMenuOverride=!0),this.toggleLabelKey=this.isOpen?"components.directives.folder.aria-label.close":"components.directives.folder.aria-label.open"},e.prototype._calculateDurationAndToggle=function(){var e=this.isOpen?1e3:2e3,t=this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).outerHeight(),n=Math.round(1.17*t),i=Math.min(e,n);this.element.children(".folder").children(this.FOLDER_CONTENTS_SELECTOR).slideToggle(i)},e.prototype.canToggle=function(){return this.content.canEdit()||!this.content.isRestricted()},Object.defineProperty(e.prototype,"content",{get:function(){return this.scope.content},enumerable:!0,configurable:!0}),e.$inject=["scope","element",c.b,C.d],e}(),L=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.scope={content:"=",contextArea:"=",canCreate:"=",contents:"=",canMove:"=",loadMoreChildren:"=",nextContentId:"=?",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=",previousContentId:"=?",canCopyImport:"=?",rootContent:"&?"},this.compile=function(e){return{pre:function(e,n){e.folder=t.$injector.instantiate(R,{scope:e,element:n})}}},this.template=l}return e.$inject=["$injector"],e}();s.module(P,[o.b,a.a,i.a,c.a,$]).directive("bbFolder",["$injector",function(e){return e.instantiate(L)}])},L2Kv:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var i=n("D57K"),s=n("nsO7"),o=n("gK/k"),a=n("9Fiv"),r=n("+4Px"),c=n("dF44"),l=n("lEL+"),d="rbGridCell",u=function(){},p=function(){function t(t,n,i,s,o,a){var l=this;this.scope=t,this.element=n,this.grid=i,this.container=s,this.$q=o,this.timeout=a,this.setTabindex(),n.on("keydown",(function(t){var n=l.getHandler(t);n&&(l.grid.previousCell=l,l.tabPressed=t.keyCode===r.u,r.x(t)&&e(document.body).removeClass("hide-focus-outline"),n.call(l),t.preventDefault(),t.stopPropagation())})),t.$on(c.b.FOCUS_CELL,(function(e,t,n){l.scope.row===t&&l.scope.col===n&&(l.handleFocus(),l.grid.cellFocusDeferred&&l.grid.cellFocusDeferred.resolve(l))})),t.$on(c.b.LEAVE_CELL,(function(){l.handleFocus()})),t.$on(c.b.ENTER_NEXT_CELL,(function(){l.grid.cellFocusDeferred=new function(){var e=this;this.promise=new Promise((function(t){return e.resolve=t}))},l.goForth(),l.grid.cellFocusDeferred.promise.then((function(e){e.handleEnter(),l.grid.cellFocusDeferred=null}))}))}return t.prototype.setTabindex=function(){this.scope.col.focusable&&this.element.attr("tabindex",0)},t.prototype.goLeft=function(){var e=this;s.debounce((function(){e.removeFocus();var t=e.scope.row,n=e.scope.col,i=e.container.rows,s=e.grid.getFocusableColumns(),o=s[(s.indexOf(n)-1+s.length)%s.length];if("right"===e.container.position&&e.scope.$first)e.grid.scrollToRight((function(){return e.notifyFocus(t,o)}));else if(o===s[s.length-1]){if(t){var a=i.indexOf(t)-1;t=i[a];var r=NaN;e.container.isRowOutOfBound(a).top&&(r=e.container.getTopRowScrollTop(a)),e.grid.scrollToRightWithTop(r,(function(){return e.notifyFocus(t,o)}))}}else{var c=e.container.columns.indexOf(o),l=c>=0;e.container.isColOutOfBound(c).left?e.grid.scroll({scrollLeft:l?e.container.getLeftColScrollLeft(o):0},(function(){return e.notifyFocus(t,o)})):e.notifyFocus(t,o)}}),c.c)()},t.prototype.goRight=function(){var e=this;s.debounce((function(){e.removeFocus();var t=e.scope,n=t.row,i=t.col,s=e.container.rows,o=e.grid.getFocusableColumns(),a=o[(o.indexOf(i)+1)%o.length];if("left"===e.container.position&&e.scope.$last)e.grid.scrollToLeft((function(){return e.notifyFocus(n,a)}));else if(a!==o[0]){var r=e.container.columns.indexOf(a);e.container.isColOutOfBound(r).right?e.grid.scroll({scrollLeft:e.container.getRightColScrollLeft(a)},(function(){return e.notifyFocus(n,a)})):e.notifyFocus(n,a)}else{var c=-1,l=s[0];if(void 0===n)c=0;else{var d=s.indexOf(n)+1;(l=s[d])&&e.container.isRowOutOfBound(d).bottom&&(c=e.container.getBottomRowScrollTop(d))}e.grid.scroll({scrollLeft:0,scrollTop:c},(function(){return e.notifyFocus(l,a)}))}}),c.c)()},t.prototype.goUp=function(e){var t=this;void 0===e&&(e=!1),s.debounce((function(e){t.removeFocus();var n=t.scope,i=n.row,s=n.col,o=t.container.rows,a=o.indexOf(i)-1;if(i){var r=o[a];r?t.container.isRowOutOfBound(a).top?t.grid.scroll({scrollTop:t.container.getTopRowScrollTop(a)},(function(){return t.notifyFocus(r,s)})):t.notifyFocus(r,s):e?t.grid.scrollToBottom((function(){return t.notifyFocus(o[o.length-1],s)})):t.notifyFocus(void 0,s)}else t.grid.scrollToBottom((function(){return t.notifyFocus(o[o.length-1],s)}))}),c.c)(e)},t.prototype.goDown=function(e){var t=this;void 0===e&&(e=!1),s.debounce((function(e){t.removeFocus();var n=t.scope,i=n.row,s=n.col,o=t.container.rows,a=o.indexOf(i)+1,r=o[a];if(r){if(void 0===i)return void t.grid.scrollToTop((function(){return t.notifyFocus(r,s)}));t.container.isRowOutOfBound(a).bottom?t.grid.scroll({scrollTop:t.container.getBottomRowScrollTop(a)},(function(){return t.notifyFocus(r,s)})):t.notifyFocus(r,s)}else e?(r=o[0],t.grid.scrollToTop((function(){return t.notifyFocus(r,s)}))):t.notifyFocus(r,s)}),c.c)(e)},t.prototype.goForth=function(){this.goDown(!0)},t.prototype.goBack=function(){this.goUp(!0)},t.prototype.removeFocus=function(){this.container.element.find(".rb-ax-focus-placeholder").focus()},t.prototype.notifyFocus=function(e,t){this.grid.$scope.$broadcast(c.b.FOCUS_CELL,e,t)},t.prototype.handleFocus=function(){this.element.focus()},t.prototype.isFirst=function(){var e=this.scope,t=e.row,n=e.col,i=this.grid.getFocusableColumns();return void 0===t&&n===i[0]},t.prototype.isLast=function(){var e=this.scope,t=e.row,n=e.col,i=this.container.rows,s=this.grid.getFocusableColumns();return t===i[i.length-1]&&n===s[s.length-1]},t.prototype.getHandler=function(e){return r.z(e)&&!this.isFirst()?this.goBack:r.A(e)&&!this.isLast()?this.goForth:e.keyCode===r.j?this.goLeft:e.keyCode===r.s?this.goRight:e.keyCode===r.v?this.goUp:e.keyCode===r.d?this.goDown:r.y(e)?this.handleEnter:e.keyCode===r.g?this.element.is(e.target)?this.handleEscape:this.handleFocus:void 0},t.prototype.handleEnter=function(){this.scope.$broadcast(c.b.ENTER_CELL,this.element)},t.prototype.handleEscape=function(){this.scope.$emit(c.b.LEAVE_GRID)},t.$inject=["scope","element","grid","container","$q",l.b],t}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.setTabindex=function(){this.scope.col.focusable&&this.element.attr("tabindex",this.scope.col.headerFocusable?0:-1)},t.prototype.goBack=function(){this.goLeft()},t.prototype.goForth=function(){var e=this,t=this.scope,n=t.row,i=t.col;this.canAddColumn()?this.container.canAddColumn()?this.notifyFocus(n,i):this.grid.scrollToLeft((function(){return e.notifyFocus(n,i)})):this.goRight()},t.prototype.handleFocus=function(){var n=this.grid.previousCell,i=this.grid.containers.center.columnAdder;n.tabPressed&&n instanceof t&&n.canAddColumn()&&this.canAddColumn()?(this.container.canAddColumn()?i.show(this.element.find(".rb-add-column-placeholder"),this.scope.col):i.show(),i.button.focus()):this.scope.col.headerFocusable?e.prototype.handleFocus.call(this):this.scope.$broadcast(c.b.CELL_FOCUSED,this.element)},t.prototype.canAddColumn=function(){return this.container.canAddColumn()||this.grid.canAddColumn()&&"left"===this.container.position&&this.scope.$last},t}(p),h=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.templates=Object.create(null),this.restrict="A",this.require=["^"+o.a,"^"+a.c,d],this.controller=u,this.transclude=!0,this.link=function(e,t,i,s,o){var a=e.$eval(i[d]);(n.templates[a]=n.templates[a]||n.$compile(a))(e,(function(e){return t.append(e)})),o((function(e){return t.append(e)}));var r=s[0],c=s[1];s[2].cellNavigator=n.$injector.instantiate(e.row?p:m,{scope:e,element:t,grid:r,container:c.container})}}return e.$inject=["$injector","$compile"],e}()}).call(this,n("5iHu"))},"LC/l":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-beast-analytics",use:"icon-small-beast-analytics-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-beast-analytics"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 8V1M8 8l5-4M8 8l4.5 4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},LN5R:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return M})),n.d(t,"a",(function(){return _}));n("wAzH"),n("KXuk"),n("Tt7N"),n("01PJ"),n("Vdys"),n("xoIb"),n("Lrq8"),n("VCKY"),n("6Fqm");var i=n("5MwF"),s=n("cbVV"),o=n("JuVx"),a=n("qH3X"),r=n("wHJ2"),c=n("nsO7"),l=n("pjml"),d=n("yC9S"),u=n("2bSy"),p=n("810X"),m=n("7OC/"),h=n("9KIl"),b=n("kN1T"),g=n("xcel"),v=n("y+vt"),f=n("0JpG"),y=n("gK/k"),w=n("lEL+"),C=n("hkqm"),S=n("X/qj"),A=n("ROik"),k=n("AVdi"),I=n("o5Lu"),O=n("YGwN"),D=n("C36k"),T=n("s+Z7"),$=n("+4Px"),x=n("6CeR"),E=n("9Zs+"),P=n("dF44"),R=n("TmUJ"),L=n("2o5C"),j=n("fGDP"),G=n("uFkY"),M="ultra.components.directives.gradeGridReborn",_="bbGradeGridReborn",F=function(){function t(e,t,n,i,o,r,l,u,p,m,h,b,g){var v,f=this;this.gradeService=e,this.gradebookPermissionService=t,this.$injector=n,this.$q=i,this.$scope=o,this.$element=r,this.$attrs=l,this.bbLocalize=u,this.$compile=p,this.CourseModel=m,this.GradeColumn=h,this.timeout=b,this.toast=g,this.headerHeight=150,this.rowHeight=80,this.showFilterCriteria=!1,this.mergedCourses=[],this.initialized=!1,d.b.OnWindow("resize",c.debounce(this.setContainerHeight.bind(this),100),o),this.setContainerHeight(),(v=this.mergedCourses).push.apply(v,this.$scope.mergedCourses),o.$on(a.a.FOCUSIN_CELL,(function(e,t){f.activeColumnId=t.columnId})),o.$on(a.a.FOCUSOUT_CELL,(function(e,t){f.activeColumnId=void 0})),this.initialize(),this.setupSearchFilterListener(),this.setupColumnChangeListener(),this.$scope.$on("bb-change-overall-panel-visibility",(function(e,t,n){f.gridData.course.id!==t||f.gridData.course.isComplete()||(f.isOverallPanelShown=n)})),this.$scope.$on("grade-notation-cache-update",(function(e,t){f.updateOverallNotation()})),this.$scope.$on("bb-grades-schema-save",(function(e,t){f.refreshSchema(t)})),d.b.OnRootScope(this.$scope,"bb-grade-input-save",(function(e,t,n,i){var o=f.gridData.getColumn(n),a=o.data;a.$fetch().$asPromise().then((function(){return a.summary.$fetch().$asPromise()})).then((function(){if(o instanceof s.c)return f.updateAffectedColumns(f.getAffectedColumns(o))})).then((function(){if(i){var e=f.gridData.getRowByUserId(i);f.refreshDataCell(e,o)}else f.gridData.updateColumnByMetadata(a),f.$scope.$broadcast(P.b.COLUMN)}))})),this.$scope.$on(G.a,(function(e,t,n,i,s){var o=f.gridData.getRowById(n),a=f.gridData.getColumn(t);f.refreshDataCell(o,a)})),this.$scope.$on("course.grades.gradebook-item.submission.grade-status-change",(function(e,t){var n=f.gridData.getRowByUserId(t.userId),i=f.gridData.getColumn(t.columnId),o=i.data;o.$fetch().$asPromise().then((function(){return o.summary.$fetch().$asPromise()})).then((function(){if(i instanceof s.c)return f.updateAffectedColumns(f.getAffectedColumns(i))})).then((function(){i instanceof s.h?f.refreshDataCells(f.gridData.getGroupIdUserIdMap()[t.groupId].map((function(e){return f.gridData.getRowByUserId(e)})),[i]):f.refreshDataCell(n,i)}))})),this.$scope.$on("bb-reload-grid-view",(function(e){f.$scope.$emit("grade-notation-update",f.gridData.course.id)})),this.$scope.$on(L.b,(function(){f.refreshColumns()})),this.$scope.$on(j.a,(function(e,t){f.refreshColumns((function(){f.gridData.addUpdatedColumnFlag(t)}))})),this.canViewOverallPanel=t.canModify()}return t.prototype.updateAffectedColumns=function(e){var t=this;return this.$q.all(e.map((function(e){var t=e.data;return t.$fetch().$asPromise().then((function(){return t.summary.$fetch().$asPromise()}))}))).then((function(){e.forEach((function(e){return t.gridData.updateColumnByMetadata(e.data)}))}))},t.prototype.initialize=function(){var e=this;this.$q.all([this.bbLocalize.loadBundle("components/directives/grade/grade-grid"),this.bbLocalize.loadBundle("components/directives/grade/grade-input")]).then((function(){e.gridData=e.$injector.instantiate(o.a,{gradeGridRebornDirectiveScope:e.$scope}),e.gridData.initialize(e.$scope.course(),e.$scope.columnMetadatas).then((function(t){e.gridData.course.isComplete()?e.isOverallPanelShown=!1:e.gradeService.needsToSetupOverall(e.gridData.getColumnMetadatas(),e.gridData.course.id).then((function(t){e.isOverallPanelShown=t})),e.availableRowSelectedOptions=t.rows,e.availableColumnSelectedOptions=t.columns,e.gridOptions={rows:t.rows,columns:t.columns,rowHeight:e.rowHeight,headerHeight:e.headerHeight,headerContentHeight:89,headerBorder:!0,rowBorder:!0,callbacks:{data:function(t,n){return e.gridData.loadData(t,n)},column:e.gridData.course.isComplete()?void 0:function(t,n){return e.onClickAddColumnButton(t,n)}}},e.initialized=!0,e.handleMergedCourse()}))}))},t.prototype.refreshSchema=function(e){var t=this;this.gridData.getSchema()[e.id]=e,c.forEach(this.gridData.getColumnMetadatas(),(function(e){var n=t.gridData.getSchema()[e.gradingSchemaId];n&&n.scaleType&&l.I.ScaleType.Tabular.isEqualTo(n.scaleType)&&t.gridData.updateColumnByMetadata(e)})),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.refreshDataCells=function(e,t){var n=this;c.forEach(e,(function(e){c.forEach(t,(function(t){n.gridData.refreshDataCell(e,t)}))})),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.refreshDataCell=function(e,t){this.gridData.refreshDataCell(e,t),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.addStudentColumnBorder=function(e){e.externalGrade&&!this.gridData.isColumnExisting(e.id)&&this.gridData.getColumn(o.a.COLUMN_STUDENT).deleteBorder()},t.prototype.deleteStudentColumnBorder=function(e){e.externalGrade&&this.gridData.getColumn(o.a.COLUMN_STUDENT).addBorder()},t.prototype.updateOverallNotation=function(){var e=c.find(this.gridData.getColumns(),(function(e){return e instanceof s.k}));e&&(e.loadNotation(),this.gridData.updateColumnByMetadata(e.data)&&this.$scope.$broadcast(P.b.COLUMN))},t.prototype.getAffectedColumnsBeforeEdit=function(e){var t=this.gridData.getColumn(e.id),n=[];return t instanceof s.i&&(n=t.affectedColumnsBeforeEdit),n},t.prototype.getAffectedColumns=function(e){var t=e.findAffectedColumns(),n=c.find(this.gridData.getColumns(),(function(e){return e instanceof s.k}));return n&&t.push(n),t},t.prototype.setupSearchFilterListener=function(){var e=this;this.$scope.$on(a.a.UPDATED_FILTER_CONDITION,(function(t){var n=e.getFilterUserIds();e.$scope.$emit(a.a.GRADEBOOK_USER_SELECTED,n)})),i.a.features.gradebookSearchFilterM3?(this.$scope.$on(a.a.GRADEBOOK_USER_SELECTED,(function(t,n){var i=e.availableRowSelectedOptions;n&&n.length>0?e.$scope.$broadcast(P.b.ROW,c.intersectionWith(i,n,(function(e,t){return e.userId===t}))):i.length!==e.gridOptions.rows.length&&(e.searchedResult&&"user"===e.searchedResult.type?e.$scope.$broadcast(P.b.ROW,[]):e.$scope.$broadcast(P.b.ROW,i))})),this.$scope.$on(a.a.GRADEBOOK_CLEAR_SELECTED,(function(t,n){if(n)e.clearCheckedMergedCourse();else{var i=e.getAvailableRowSelectedOptions();e.availableRowSelectedOptions&&e.availableRowSelectedOptions.length!==e.gridOptions.rows.length&&e.$scope.$broadcast(P.b.ROW,i),e.filteredColumns&&e.filteredColumns.length!==e.availableColumnSelectedOptions.length&&e.$scope.$broadcast(P.b.COLUMN,e.availableColumnSelectedOptions),e.ids&&(e.ids=null)}e.handleMergedCourse()}))):(this.$scope.$on(a.a.GRADEBOOK_USER_SELECTED,(function(t,n){var i=e.availableRowSelectedOptions;n?(e.filteredColumns&&e.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED),e.$scope.$broadcast(P.b.ROW,c.intersectionWith(i,n,(function(e,t){return e.userId===t})))):i.length!==e.gridOptions.rows.length&&e.$scope.$broadcast(P.b.ROW,i)})),this.$scope.$on(a.a.GRADEBOOK_CLEAR_SELECTED,(function(t){e.availableRowSelectedOptions&&e.availableRowSelectedOptions.length!==e.gridOptions.rows.length&&e.$scope.$broadcast(P.b.ROW,e.availableRowSelectedOptions),e.filteredColumns&&e.filteredColumns.length!==e.availableColumnSelectedOptions.length&&(e.$scope.$broadcast(P.b.COLUMN,e.availableColumnSelectedOptions),e.clearFilteredColumns()),e.ids&&(e.ids=null)}))),this.$scope.$on(a.a.GRADEBOOK_COLUMN_SELECTED,(function(t,n){i.a.features.gradebookSearchFilterM3||e.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED);var s=e.availableColumnSelectedOptions;e.filterColumns((function(e,t){return c.filter(e,(function(e){return e.filterByColumId(t)}))}),n,s)})),this.$scope.$on(a.a.GRADEBOOK_CATEGORY_SELECTED,(function(t,n){i.a.features.gradebookSearchFilterM3||e.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED);var s=e.availableColumnSelectedOptions;e.ids=n,e.filterColumns((function(e,t){return c.filter(e,(function(e){return e.filterByCategoryId(t)}))}),n,s)})),this.$scope.$on(a.a.SHOW_FILTER_CRITERIA,(function(t,n){e.showFilterCriteria=n})),this.$scope.$on(a.a.CLOSE_FILTER_PANEL,(function(t,n){e.showFilterCriteria=n}))},t.prototype.setupColumnChangeListener=function(){var e=this;this.$scope.$on(I.c,(function(t,n,i){n.summary.$fetch().$asPromise().then((function(){e.addStudentColumnBorder(n),e.updateColumns(n),e.updateFilteredColumns(),e.updateCategroyColumns(),e.filteredColumns&&e.toast.show({messageKey:"components.directives.grade.grid.newItemAdded",icon:"icon-check",toastStatus:"success"})}))})),this.$scope.$on("content-update",(function(t,n){if(n.isScorm()){var i=n.getScormGradebookItems().map((function(t){return e.$scope.course().gradebook.columns.$buildRaw(t.gradingColumn)}));e.$q.all(i.map((function(e){return e.ui={content:n},e.summary.$fetch().$asPromise()}))).then((function(){i.forEach((function(t){return e.updateColumns(t)}))}))}if(n.isDiscussion()){var s=e.gridData.getColumnMetadataByContentId(n.id);c.isUndefined(s)||e.gridData.initializeGroupsMemberships().then((function(){return s.summary.$fetch().$asPromise()})).then((function(){e.updateColumns(s)}))}})),this.$scope.$on("bb-delete-column",(function(t,n){var i=e.gridData.getColumn(n.id);e.deleteStudentColumnBorder(n);var o=e.$q.when();if(i instanceof s.c){var r=e.getAffectedColumns(i);o=e.$q.all(r.map((function(e){return e.data.$fetch().$asPromise()}))).then((function(){r.forEach((function(t){return e.gridData.updateColumnByMetadata(t.data)}))}))}o.then((function(){e.gridData.deleteColumnById(n.id),c.remove(e.filteredColumns,(function(e){return e.data.id===n.id})),e.$scope.$broadcast(P.b.COLUMN),e.timeout((function(){var t=e.$element.find(":focus").parents("bb-grade-grid-column-header-reborn").data("col");c.isUndefined(t)||e.$scope.$broadcast(a.a.FOCUSIN_CELL,{columnId:t.id})}),e.$scope,0,!1)}))})),this.$scope.$on("attempt-base-content-update",(function(t,n){e.updateAttempBaseContent(n)})),this.$scope.$on("attempt-base-content-update-by-regrading",(function(t,n){e.updateAttempBaseContent(n)}))},t.prototype.updateAttempBaseContent=function(e){var t=this,n=this.gridData.getColumnMetadataByContentId(e.id);c.isUndefined(n)||n.$fetch().$asPromise().then((function(){t.gridData.initializeGroupsMemberships().then((function(){return n.summary.$fetch().$asPromise()})).then((function(){t.updateColumns(n)}))}))},t.prototype.updateColumns=function(e){var t=this,n=this.getAffectedColumnsBeforeEdit(e),i=this.gridData.updateColumnByMetadata(e);if(i instanceof s.c){var o=i.findAffectedColumns();o=c.unionBy(n,o,"id");var a=c.find(this.gridData.getColumns(),(function(e){return e instanceof s.k}));a&&o.push(a),this.$q.all(o.map((function(e){return e.data.$fetch().$asPromise()}))).then((function(){o.forEach((function(e){return t.gridData.updateColumnByMetadata(e.data)})),t.$scope.$broadcast(P.b.COLUMN)}))}else this.$scope.$broadcast(P.b.COLUMN)},t.prototype.setContainerHeight=function(){var t=e(".course-grades-header-buttons-wrapper");this.$element.find(".grade-grid-container").css("top",t.offset().top+t.outerHeight())},t.prototype.getRowCount=function(){var e=this.getFilterUserIds();return this.searchedResult&&"user"===this.searchedResult.type?1:e&&e.length>0?e.length:this.getGridData().getRowCount()},t.prototype.getGridData=function(){return this.gridData},t.prototype.getElement=function(){return this.$element},t.prototype.onClickAddColumnButton=function(t,n){var i=this,s=c.isUndefined(n)||"left"===n.position?"start":n.id,o="grade-grid-add-column-menu-reborn-"+s;if(!this.isMenuExisting(o)){var a=e(t.target).offset();a&&(a.top+=30);var r=this.$scope.$new(!0);r.adjustPosition=function(e){var t=a.left+e.width(),n=i.getGradeGridContainerElementRight();t>n&&(a.left-=t-n+Object(R.a)()),e.offset(a)},r.positionAfter=s,r.attendanceColumnExists=this.isAttendanceExisting(),r.attendanceIsAvailable=this.attendanceIsAvailable,this.popupMenu(o,E,r),this.timeout((function(){var s=i.getPopupMenu();s.on("keydown",(function(o){o.keyCode===$.g||o.keyCode===$.u?(s.data("destroy")(),e(t.target).click(),e(t.target).focus(),o.preventDefault(),o.stopPropagation()):$.y(o)&&i.$scope.$broadcast(P.b.FOCUS_CELL,void 0,n)})),i.getMenuitems().first().focus()}),r,0,!1),t.preventDefault(),t.stopPropagation()}},t.prototype.getPopupMenu=function(){return this.$element.find("[bb-grade-grid-menu-reborn]")},t.prototype.getMenuitems=function(){return this.getPopupMenu().find("li>:tabbable")},t.prototype.getGradeGridContainerElement=function(){return this.$element.children("#grade-grid-container")},t.prototype.getGradeGridContainerElementRight=function(){var e=this.getGradeGridContainerElement();return e.offset().left+e.width()},t.prototype.getGradeGridContainerElementBottom=function(){var e=this.getGradeGridContainerElement();return e.offset().top+e.height()},t.prototype.popupMenu=function(e,t,n,i){n.id=e,this.showMenu(t,n,i)},t.prototype.isMenuExisting=function(e){return!!this.$element.children("#"+e).length},t.prototype.showMenu=function(e,t,n){var i=this;this.$compile(e)(t,(function(e){i.$element.append(e),c.isUndefined(n)||e.offset(n)}))},t.prototype.isAttendanceExisting=function(){var e=this;return!!this.availableColumnSelectedOptions.find((function(t){return e.gridData.getColumnMetadata(t.id)&&e.gridData.getColumnMetadata(t.id).isAttendance()}))},Object.defineProperty(t.prototype,"attendanceIsAvailable",{get:function(){return this.$scope.attendanceIsAvailable&&this.$scope.attendanceIsAvailable()},enumerable:!0,configurable:!0}),t.prototype.itemSelected=function(e){switch(this.searchedResult=e,e.type){case"user":return this.updateMergedCourseHiddenStatus(e),this.$scope.$broadcast(a.a.GRADEBOOK_USER_SELECTED,[e.data.user.id]),this.getUsernameByUserId(e.data.user.id);case"column":return i.a.features.gradebookSearchFilterM2?(this.$scope.$emit(a.a.GRADEBOOK_COLUMN_SELECTED,[e.data.id]),e.data.getMetadata().columnName):void 0;case"category":if(i.a.features.gradebookSearchFilterM2)return this.$scope.$emit(a.a.GRADEBOOK_CATEGORY_SELECTED,[e.id]),this.getCategoryTitle(e.data.getMetadata().gradebookCategory)}},t.prototype.typeAheadSearch=function(e){var t=this.$q.defer(),n=new RegExp("^.*"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+".*$","i"),s=[],o=this.userSearchedResults(n,e);if(c.forEach(o,(function(e){s.push({type:"user",data:e})})),i.a.features.gradebookSearchFilterM2){var a=this.columnSearchedResults(n,e);c.forEach(a,(function(e){s.push({type:"column",data:e})}));var r=this.categorySearchedResults(n,e);c.forEach(r,(function(e){s.push({type:"category",data:e,id:e.data.gradebookCategory.id})})),0===s.length&&s.push({type:"noResult",data:null})}return t.resolve(s),t.promise},t.prototype.userSearchedResults=function(e,t){var n=[function(n){var i=function(n,i){return e.test(n)&&0===n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())&&t.length>i};return i(n.user.givenName+" "+n.user.familyName,n.user.givenName.length)||i(""+n.user.familyName+n.user.givenName,n.user.familyName.length)},function(t){return e.test(""+t.user.givenName)},function(t){return e.test(""+t.user.familyName)},function(t){return t.user.studentId&&e.test(t.user.studentId)}],i=this.getAvailableRowSelectedOptions();return c.orderBy(i.filter((function(e){var i=0,s=n.findIndex((function(t){return t(e)}));switch(s){case 1:i=e.user.givenName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());break;case 2:i=e.user.familyName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())+.5;break;case 3:i=e.user.studentId.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())+1e3}return e.ui._weight=i,s>=0})),["ui._weight","user.givenName","user.familyName"],["asc","asc","asc"])},t.prototype.columnSearchedResults=function(e,t){var n=[function(t){return e.test(""+t.data.columnName)}];return c.orderBy(c.filter(this.availableColumnSelectedOptions,(function(e){return!(e instanceof s.l||e instanceof s.k)})).filter((function(e){var i=0,s=n.findIndex((function(t){return t(e)}));return-1!==s&&(i=e.data.columnName&&e.data.columnName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=i,s>=0})),["weight","data.columnName"],["asc","asc"])},t.prototype.categorySearchedResults=function(e,t){var n=this,i=[function(t){var i=n.getCategoryTitle(t.data.gradebookCategory);return e.test(""+i)}],s=c(this.availableColumnSelectedOptions).filter((function(e){return!!e.data.gradebookCategory})).uniqBy((function(e){return e.data.gradebookCategory.id})).value();return c.orderBy(s.filter((function(e){var s=0,o=i.findIndex((function(t){return t(e)})),a=n.getCategoryTitle(e.data.gradebookCategory);return-1!==o&&(s=a.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=s,o>=0})),["weight","data.categoryTitle"],["asc","asc"])},t.prototype.search=function(e){var t=this.getAvailableRowSelectedOptions().find((function(t){return(t.user.givenName+" "+t.user.familyName).toLocaleLowerCase()===e.toLocaleLowerCase()||(""+t.user.familyName+t.user.givenName).toLocaleLowerCase()===e.toLocaleLowerCase()||t.user.studentId&&t.user.studentId.toLocaleLowerCase()===e.toLocaleLowerCase()})),n=this.availableColumnSelectedOptions.find((function(t){return(""+t.data.columnName).toLocaleLowerCase()===e.toLocaleLowerCase()})),i=this.availableColumnSelectedOptions.find((function(t){return t.data.gradebookCategory&&(""+t.data.gradebookCategory.title).toLocaleLowerCase()===e.toLocaleLowerCase()}));return t?this.itemSelected({type:"user",data:t}):n?this.itemSelected({type:"column",data:n}):i?this.itemSelected({type:"category",data:i,id:i.data.gradebookCategory.id}):void 0},t.prototype.clearTypeAheadSearch=function(){i.a.features.gradebookSearchFilterM2||i.a.features.gradebookSearchFilterM3?(this.searchedResult=null,c.forEach(this.mergedCourses,(function(e){e.ui.hidden=!1})),this.$scope.$broadcast(a.a.GRADEBOOK_CLEAR_SELECTED)):this.$scope.$broadcast(a.a.GRADEBOOK_USER_SELECTED)},t.prototype.getUsernameByUserId=function(e){return this.$element.find(".typeahead-student-name-id .typeahead-name.course_user"+e).text()},t.prototype.getCategoryTitle=function(e){return e.isUserDefined?e.title:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:e.localizableTitle.languageKey})},t.prototype.refreshColumns=function(e){void 0===e&&(e=c.noop),this.gridData.refreshAllColumns(),e(),this.$scope.$broadcast(P.b.COLUMN)},t.prototype.filterColumns=function(e,t,n){t&&(this.filteredColumns=e(n,t),this.$scope.$broadcast(P.b.COLUMN,this.filteredColumns))},t.prototype.updateFilteredColumns=function(){var e=c.find(this.filteredColumns,(function(e){return e instanceof s.k}));this.filteredColumns&&!e&&(this.filteredColumns.push(c.find(this.availableColumnSelectedOptions,(function(e){return e instanceof s.k}))),this.$scope.$broadcast(P.b.COLUMN,this.filteredColumns))},t.prototype.updateCategroyColumns=function(){var e=this.availableColumnSelectedOptions;this.filterColumns((function(e,t){return c.filter(e,(function(e){return e.filterByCategoryId(t)}))}),this.ids,e)},t.prototype.clearFilteredColumns=function(){this.filteredColumns&&(this.filteredColumns=null)},t.prototype.handleMergedCourse=function(){var e=this;this.mergedCourses.forEach((function(t){e.availableRowSelectedOptions&&(c.find(e.availableRowSelectedOptions,(function(e){return e.childCourseId===t.id}))||(t.ui.hidden=!0))}))},t.prototype.getCheckedMergedCourseUserIds=function(){var e=this.getFilteredRowSelectedOptions();return c.map(e,(function(e){return e.userId}))},t.prototype.getCheckedMergeCourseIds=function(){return c.filter(this.mergedCourses,(function(e){return e.ui.checked})).map((function(e){return e.id}))},t.prototype.getFilteredRowSelectedOptions=function(){var e=this.getCheckedMergeCourseIds();return this.availableRowSelectedOptions&&this.availableRowSelectedOptions.filter((function(t){return c.find(e,(function(e){return e===t.childCourseId}))}))},t.prototype.getAvailableRowSelectedOptions=function(){return this.getCheckedMergedCourseUserIds().length>0?this.getFilteredRowSelectedOptions():this.availableRowSelectedOptions},t.prototype.updateMergedCourseHiddenStatus=function(e){this.mergedCourses&&c.forEach(this.mergedCourses,(function(t){t.ui.checked||(t.id!==e.data.childCourseId?t.ui.hidden=!0:t.ui.hidden=!1)}))},t.prototype.filteredResultsInCheckedMergedCourse=function(){if(this.searchedResult&&this.searchedResult.data)return this.filteredUserInCheckedMergedCourse()?[this.searchedResult.data.user.id]:null},t.prototype.clearCheckedMergedCourse=function(){var e=this;c.forEach(this.mergedCourses,(function(t){t.ui.checked=!1,e.searchedResult&&"user"===e.searchedResult.type?t.id!==e.searchedResult.data.childCourseId&&(t.ui.hidden=!0):t.ui.hidden=!1})),this.$scope.$emit(a.a.GRADEBOOK_CLEAR_SELECTED),this.searchedResult&&this.filterByResultsType()},t.prototype.getFilterUserIds=function(){var e=this.getCheckedMergeCourseIds(),t=null,n=null;return this.searchedResult&&"user"===this.searchedResult.type?(t=this.filteredResultsInCheckedMergedCourse(),n=e&&e.length>0?[]:[this.searchedResult.data.user.id]):n=this.getCheckedMergedCourseUserIds(),t||n},t.prototype.filteredUserInCheckedMergedCourse=function(){var e=this,t=this.getCheckedMergedCourseUserIds();return c.some(t,(function(t){return t===e.searchedResult.data.user.id}))},t.prototype.filterByResultsType=function(){switch(this.searchedResult.type){case"user":return void this.$scope.$emit(a.a.GRADEBOOK_USER_SELECTED,[this.searchedResult.data.user.id]);case"column":return void this.$scope.$emit(a.a.GRADEBOOK_COLUMN_SELECTED,[this.searchedResult.data.id]);case"category":this.$scope.$emit(a.a.GRADEBOOK_CATEGORY_SELECTED,[this.searchedResult.id])}},t.$inject=[I.h,S.b,"$injector","$q","$scope","$element","$attrs",f.serviceName,"$compile",l.o.serviceName,l.F.serviceName,w.b,C.b],t}(),B=function(){function e(e){this.$injector=e,this.restrict="E",this.template=x,this.controller=F,this.controllerAs="gg",this.scope={course:"&",columnMetadatas:"<columns",attendanceIsAvailable:"&?",mergedCourses:"<"}}return e.$inject=["$injector"],e}();r.module(M,[y.b,u.a,p.a,m.a,h.a,b.a,g.a,v.a,A.a,k.a,D.a,T.a,S.a,C.a,O.a]).directive(_,["$injector",function(e){return e.instantiate(B)}])}).call(this,n("5iHu"))},LQXi:function(e,t){e.exports='<div class="multiple-answer-attempt-authoring multiple-answer">\n    <div class="multiple-answer-question question-container">\n        <bb-rich-text-editor\n          plugin-options="editorPluginOptions"\n          ng-model="questionAttempt.question.questionText.rawText"\n          is-read-only="true">\n        </bb-rich-text-editor>\n    </div>\n    <div class="multiple-answer-answers-container">\n      <ol class="multiple-answer-answers">\n        <li class="{{\'js-multiple-answer-answer-\' + $index}}" ng-repeat="answer in questionAttempt.question.answers track by $index" ng-class="{\'selected-answer\': assessmentQuestion.givenAnswer[$index]}">\n          <input ng-if="questionAttempt.question.singleCorrectAnswer" type="radio"\n                 id="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 name="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 ng-model="assessmentQuestion.givenAnswer[$index]"\n                 ng-change="assessmentQuestion.onRadioButtonChange($index)"\n                 ng-value="true"\n                 analytics-id="assessment.question.single.correct.answer.input.radio"/>\n          <input ng-if="!questionAttempt.question.singleCorrectAnswer" type="checkbox"\n                 id="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 name="{{assessmentQuestion.elementId}}-answer-{{$index}}"\n                 ng-model="assessmentQuestion.givenAnswer[$index]"\n                 analytics-id="assessment.question.single.correct.answer.input.checkbox"/>\n          <label for="{{assessmentQuestion.elementId}}-answer-{{$index}}" class="checkbox-label">\n            <bb-rich-text-editor\n              plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n              ng-model="answer.answerText.rawText"\n              is-read-only="true">\n            </bb-rich-text-editor>\n          </label>\n        </li>\n      </ol>\n    </div>\n</div>\n'},LRgG:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-partial-credit",use:"icon-medium-partial-credit-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-partial-credit"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12 5v14c-3 0-7-2.5-7-7s4-7 7-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 7.4688v9.0624C8.4059 15.7924 7 14.2105 7 12s1.4059-3.7924 3-4.5312z" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"LT/P":function(e,t,n){},LTOG:function(e,t,n){"use strict";(function(e){var n=function(){function t(e,t){this.scope=e,this.timeout=t}return t.prototype.highlight=function(t){t.isUpdated?(e(".rb-col-"+t.id).addClass("highlighted"),delete t.isUpdated,this.timeout((function(){e(".rb-col-"+t.id).removeClass("highlighted")}),this.scope,6e3,!1)):e(".rb-col-"+t.id).removeClass("highlighted")},t}();t.a=n}).call(this,n("5iHu"))},LdA1:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var i=n("D57K"),s=(n("KCTV"),n("wHJ2")),o=n("aHpC"),a=n("JfV0"),r=n("0JpG"),c=n("Fvsw"),l=n("hqh6"),d=n("wgY5"),u=n("e6jQ"),p=n("T0fj"),m=n("q0yA"),h="ultra.directives.contentVisibilityRulesOptions",b=function(){function t(e,t,n,i,s,o){this.$ngRedux=e,this.scope=t,this.element=n,this.form=i,this.context=s,this.bbLocalize=o,this.id=u.a(),this.scope.contentVisibilityRulesOptions=this,this.dateFrom=i.dateFrom,this.timeFrom=i.timeFrom,this.dateUntil=i.dateUntil,this.timeUntil=i.timeUntil,this.subscribeToReduxChanges();var a=this.bbLocalize.getAppLocaleISO();this.getLocaleSettings&&this.getLocaleSettings({locale:a}),this.startDateSelect=!!this.scope.startDate,this.untilDateSelect=!!this.scope.endDate,this.setWatchers(),this.setValidators();var r=u.a();this.dateFromContainer=r+"-date-from-container",this.dateUntilContainer=r+"-date-until-container"}return t.prototype.shouldFocus=function(e){return void 0!==this.scope.dateFieldFocus&&"undefined"!==this.scope.dateFieldFocus&&this.scope.dateFieldFocus===e},t.prototype.handleCheckClick=function(t){var n=e(t.target),i=this.element.find(".from-check").prop("checked"),s=this.element.find(".until-check").prop("checked");if(this.scope.$emit("date-selection-changed",i,s),this.scope.isAllowedEmpty?i||s||this.form.dateFrom.$setValidity("startAndOrEndDate",!0):i||s?this.form.dateFrom.$setValidity("startAndOrEndDate",!0):(this.form.dateFrom.$setTouched(),this.form.dateFrom.$setValidity("startAndOrEndDate",!1)),this.form.dateUntil.$validate(),this.form.timeUntil.$validate(),this.form.dateFrom.$validate(),this.form.timeFrom.$validate(),n.hasClass("from-check")&&i)this.scope.startDate=this.context.getServerTime(),this.scope.startTime=this.context.getServerTime();else if(n.hasClass("until-check")&&s){var o=this.scope.startDate>this.context.getServerTime()?this.scope.startDate:this.context.getServerTime();this.scope.endDate=this.addDays(o,1),this.scope.endTime=this.addDays(o,1)}this.updateStartAndEndTime()},t.prototype.addDays=function(e,t){return new Date(e.getTime()+24*t*60*60*1e3)},t.prototype.setErrorString=function(e,t){var n=(t?"start":"end")+(e?"DateValidationError":"TimeValidationError");return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.content-visibility."+n})},t.prototype.isDateRequired=function(e){var t=this.element.find("#from-check-"+this.id).prop("checked"),n=this.element.find("#until-check-"+this.id).prop("checked");return!!(e?t:n)},t.prototype.setWatchers=function(){var e=this;this.scope.$watch("startDate",(function(t){e.isValidDate(t)&&e.scope.startTime!==t&&(e.scope.startTime=t),e.onChange()})),this.scope.$watch("startTime",(function(t){e.isValidDate(t)&&e.scope.startDate!==t&&(e.scope.startDate=t),e.onChange()})),this.scope.$watch("endDate",(function(t){e.isValidDate(t)&&e.scope.endTime!==t&&(e.scope.endTime=t),e.onChange()})),this.scope.$watch("endTime",(function(t){e.isValidDate(t)&&e.scope.endDate!==t&&(e.scope.endDate=t),e.onChange()})),this.scope.$watch("startDateSelect",(function(t){e.scope.isAllowedEmpty&&(e.startDateSelect=t),!1===t&&e.scope.isAllowedEmpty&&(e.scope.startTime=null,e.scope.startDate=null)})),this.scope.$watch("untilDateSelect",(function(t){e.scope.isAllowedEmpty&&(e.untilDateSelect=t),!1===t&&e.scope.isAllowedEmpty&&(e.scope.endTime=null,e.scope.endDate=null)}))},t.prototype.setValidators=function(){var e=this,t=this.scope.$watch("form.dateFrom",(function(n,i){e.form.dateFrom&&(e.scope.isAllowedEmpty?e.form.dateFrom.$validators.required=function(t){return!e.startDateSelect||e.startDateSelect&&null!=t||e.scope.isAllowedEmpty&&null===t}:e.form.dateFrom.$validators.required=function(t){return!e.startDateSelect||e.startDateSelect&&null!=t},e.form.timeFrom.$validators.required=function(t){return!e.startDateSelect||e.startDateSelect&&""!==e.timeFrom.$viewValue},e.scope.isAllowedEmpty?e.form.dateUntil.$validators.required=function(t){return!e.untilDateSelect||e.untilDateSelect&&null!=t||e.scope.isAllowedEmpty&&null===t}:e.form.dateUntil.$validators.required=function(t){return!e.untilDateSelect||e.untilDateSelect&&null!=t},e.form.timeUntil.$validators.required=function(){return!e.untilDateSelect||e.untilDateSelect&&""!==e.timeUntil.$viewValue},e.form.dateFrom.$validators.untilAfterStart=function(t){return e.form.dateUntil.$setTouched(),e.form.dateUntil.$validate(),!0},e.form.dateFrom.$validators.startBeforeDueDate=function(t){return!e.startDateSelect||t&&e.isDueDateAfterStartDate(t)},e.form.dateUntil.$validators.untilAfterStart=function(t){return!e.untilDateSelect||!e.startDateSelect||!e.isStartDateValid()||t&&e.isValidDateOrder(e.scope.startDate,t)},e.form.dateUntil.$validators.untilDueDate=function(t){return!e.untilDateSelect||t&&e.isDueDateBeforeEndDate(t)},e.onChange(),e.element.find(".restricted-form").focusout((function(){e.form.$setDirty(),e.form.dateFrom.$validate(),e.form.timeFrom.$validate(),e.form.dateUntil.$validate(),e.form.timeUntil.$validate()})),t())}))},t.prototype.onChange=function(){this.scope.onchangeFunc&&this.scope.onchangeFunc()},t.prototype.onBlur=function(){this.scope.onblurFunc&&this.scope.onblurFunc()},t.prototype.noDateErrorsExist=function(){return this.isStartDateValid()&&this.isEndDateValid()},t.prototype.isStartDateError=function(){return this.startDateSelect&&!this.scope.startDate},t.prototype.isStartAndOrEndDateError=function(){return!this.startDateSelect&&!this.untilDateSelect&&!this.scope.endDate},t.prototype.isStartDateValid=function(){return!this.isStartDateError()&&!this.isStartAndOrEndDateError()&&this.isDueDateAfterStartDate(this.scope.startDate)},t.prototype.isEndDateError=function(){return this.untilDateSelect&&!this.scope.endDate},t.prototype.isEndDateBeforeError=function(){return this.untilDateSelect&&this.scope.endDate&&this.startDateSelect&&!this.isValidDateOrder(this.scope.startDate,this.scope.endDate)},t.prototype.isEndDateValid=function(){return!this.isEndDateError()&&!this.isEndDateBeforeError()&&!this.isDueDateBeforeEndDate(this.scope.endDate)},t.prototype.isValidDate=function(e){return e&&!Number.isNaN(e.getTime())},t.prototype.updateStartAndEndTime=function(){this.startDateSelect||(this.scope.startDate=null,this.scope.startTime=null),this.untilDateSelect||(this.scope.endDate=null,this.scope.endTime=null),this.noDateErrorsExist()&&(this.onChange(),this.onBlur())},t.prototype.isValidDateOrder=function(e,t){if(null==e||null==t)return!1;var n=new Date(e.getTime()),i=new Date(t.getTime());return n.setSeconds(0,0),i.setSeconds(0,0),d(i).isAfter(n)},t.prototype.isDueDateBeforeEndDate=function(e){return null==this.scope.dueDate||d(this.scope.dueDate).isBefore(e)},t.prototype.isDueDateAfterStartDate=function(e){return null==this.scope.dueDate||d(this.scope.dueDate).isAfter(e)},t.prototype.subscribeToReduxChanges=function(){var e=this,t=this.$ngRedux.connect((function(t){return{localeSettings:a.select.locale.getLocaleSettings(t,e.bbLocalize.getAppLocaleISO())}}),(function(e){return{getLocaleSettings:function(t){return e(a.actions.locale.getLocaleSettings(t))}}}))(this);this.scope.$on("$destroy",t)},t=Object(i.__decorate)([Object(i.__param)(0,Object(o.b)("$ngRedux")),Object(i.__param)(1,Object(o.b)("scope")),Object(i.__param)(2,Object(o.b)("element")),Object(i.__param)(3,Object(o.b)("form")),Object(i.__param)(4,Object(o.b)(c.b)),Object(i.__param)(5,Object(o.b)(r.serviceName))],t)}(),g=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.require="^form",this.scope={startDate:"=?",startTime:"=?",startDateSelect:"=?",endDate:"=?",endTime:"=?",untilDateSelect:"=?",onblurFunc:"&?",onchangeFunc:"&?",isReadOnlyMode:"&?",dateFieldFocus:"@?",isAllowedEmpty:"=?",dueDate:"<"},this.template=m,this.transclude={customStartDateAndTimeValidationMessages:"?bbContentVisibilityCustomStartDateAndTimeValidationMessages",customEndDateAndTimeValidationMessages:"?bbContentVisibilityCustomEndDateAndTimeValidationMessages"},this.link=function(e,n,i,s){e.contentVisibilityRulesOptions=t.$injector.instantiate(b,{scope:e,element:n,form:s})}}return e.$inject=["$injector"],e}();s.module(h,[c.a,l.a,p.a]).directive("bbContentVisibilityRulesOptions",["$injector",function(e){return e.instantiate(g)}])}).call(this,n("5iHu"))},LecS:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("IAsK");var i=n("wHJ2"),s=n("pjml"),o=n("/hmo"),a="ultra.directives.lti",r=function(){function e(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=o,this.link=function(e,t){var n=e.$watch("targetContent.contentHandler",(function(t){null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())}));!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then((function(){e.content.description=e.targetContent.description})))}}return e.$inject=[s.o.serviceName],e}();i.module(a,[]).directive("bbLtiLinkItem",["$injector",function(e){return e.instantiate(r)}])},Lrq8:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-add-feedback",use:"icon-medium-add-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-add-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM12 6v10M7 11h10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},MKP7:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("D57K"),s=n("7UH7"),o=n("wHJ2"),a=n("/KQw"),r=n("0JpG"),c=n("TnpK"),l=n("+4Px"),d=n("e6jQ"),u=n("tecA"),p="ultra.directives.basicTextEditor",m=function(e){function t(t,n,i,s,o,a){var r=e.call(this,n,i,s,o,a)||this;return r.shouldPreventLineBreaking=!0,n.$on(u.b,(function(){r.updateOriginalValues(),r.isTextTouched=!1})),n.shouldPreventLineBreaking&&(r.shouldPreventLineBreaking=n.shouldPreventLineBreaking()),r}return Object(i.__extends)(t,e),t.prototype.onKeydown=function(e){this.shouldPreventLineBreaking&&e.keyCode===l.f&&(e.stopPropagation(),e.preventDefault())},t.$inject=["$q","scope","element","ctrl",r.serviceName,c.d],t}(u.a),h=function(){function e(e){var t=this;this.$injector=e,this.require=["ngModel"],this.replace=!0,this.restrict="E",this.scope={placeholderKey:"@",placeholderAttrsValues:"@",elementId:"@",readonly:"&",getInputMaxLength:"&?inputMaxLength",onchangeFunc:"&?",onblurFunc:"&?",onFocusFunc:"&",ngModel:"=",fieldRequired:"&?",plainText:"=?",validationMessage:"@?",focusOn:"@?",noValidationMessage:"&?",direction:"&?",shouldPreventLineBreaking:"&?"},this.link=function(e,n,i,s){var o=s[0];e.textEditor=t.$injector.instantiate(m,{scope:e,element:n,ctrl:o}),e.elementId||(e.elementId="text-editor-"+d.a())},this.template=s}return e.$inject=["$injector"],e}();o.module(p,[a.a,r.moduleName,c.b]).directive("bbBasicTextEditor",["$injector",function(e){return e.instantiate(h)}])},Mak1:function(e,t,n){},MoIS:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));n("V/65");var i=n("wHJ2"),s=n("0JpG"),o=n("tka7"),a=n("70Xn"),r=n("tmbA"),c="ultraUi.components.directives.grade.pastDueZero",l="bb-past-due-zero-confirmation",d="bb-past-due-zero-settings",u="course.grades.pastDue.confirmationNeeded.",p=function(){function e(e,t,n,i,s){var o=this;this.scope=e,this.element=t,this.attrs=n,this.$modal=i,this.bbLocalize=s,this.scope.$on(l,(function(e,t){o.displayPastDueConfirmation(t)})),this.scope.$on(d,(function(e,t){o.isPastZeroAssigned=t,o.displayPastDueConfirmation()}))}return e.prototype.displayPastDueConfirmation=function(e){var t=this;e?this.initModalTranslateOptions(e):this.initModalTranslateOptions();var n=!1;this.$modal.open({template:e?a:r,scope:this.scope,resolve:{translations:[s.serviceName,function(e){return e.loadBundle("course/grades/pastDue/confirmationNeeded")}]},controller:["$scope",s.serviceName,function(e,i){e.okAction=function(){e.$close(),n=!0},e.cancelAction=function(){e.$close(),n=!1,t.scope.cancelCallback&&t.scope.cancelCallback()}}]}).result.then((function(){n&&t.scope.confirmCallback&&(t.isPastZeroAssigned?t.scope.confirmCallback():t.scope.confirmCallback({args:{choice:t.scope.modalTranslateOptions.choiceModal}}))}),(function(){t.scope.dismissCallback&&t.scope.dismissCallback()}))},e.prototype.initModalTranslateOptions=function(e){if(e)return this.scope.modalTranslateOptions={title:{key:u+"title"},instructions:{key:u+e+".instructions"}};var t=this.isPastZeroAssigned?"assign":"unassign";if(this.scope.modalTranslateOptions={title:{key:u+t+".title"},instructions:{key:u+t+".instructions"},confirm:{key:u+t+".confirm"},cancel:{key:u+t+".cancel"}},!this.isPastZeroAssigned){var n=[{id:"past-due-unassign-retain",name:"pastDueUnassignZero",value:o.a.Retain.toString(),localizedKey:u+"unassign.choices.retain"},{id:"past-due-unassign-delete",name:"pastDueUnassignZero",value:o.a.Delete.toString(),localizedKey:u+"unassign.choices.delete",descriptionKey:u+"unassign.choices.instructions"}];Object.assign(this.scope.modalTranslateOptions,{choices:n,choiceModal:n[0].value})}return this.scope.modalTranslateOptions},e.$inject=["scope","element","attrs","$modal",s.serviceName],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.scope={confirmCallback:"&?",cancelCallback:"&?",dismissCallback:"&?"},this.link=function(e,n,i){e.pastDueZero=t.$injector.instantiate(p,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[]).directive("bbPastDueZero",["$injector",function(e){return e.instantiate(m)}])},NZ4S:function(e,t){e.exports='<bb-modal role="alertdialog" class="notification upload-disallowed-file-type upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.fileTypeError.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.fileTypeError.title" aria-describedby="gradebook-upload-failed"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n  <div name="modal-contents">\n    <p id="gradebook-upload-failed" bb-translate="course.grades.grades-upload-settings.fileTypeError.content"></p>\n  </div>\n  <a name="modal-footer-help-link" \n     href="" \n     bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n     target="_blank" \n     bb-translate="course.grades.grades-upload-settings.helpButton" \n     rel="noopener noreferrer"\n     analytics-id="course.grades.grades-upload-settings.helpButton">\n  </a>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsError.closeButton.button">\n    <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},NxQJ:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var i=n("D57K"),s=n("wHJ2"),o=n("pjml"),a=n("Sa5G"),r=n("fYJU"),c="ultra.components.services.courseContent.conversation",l=function(){function e(e,t,n,i,s){this.currentCourse=e,this.coreContent=t,this.$q=n,this.$rootScope=i,this.contextUser=s}return e.prototype.checkAndAddAllConversations=function(){var e=this,t=this.$q.defer();return this.coreContent.ui.hasConversationAttached&&!this.coreContent.attachedForumLink?(this.conversationContent=this.coreContent,this.isCourseAvailable=this.coreContent.isAvailable,this.conversationContent.forumAttacherAction=o.r.ForumAttacherAction.ADD.toString().toUpperCase(),this.conversationContent.withParams({fields:"attachedForumLink"}).$patch().$then((function(n){e.currentCourse.contents.$find(n.attachedForumLink["resource/x-bb-courselink"].courseContent).$asPromise().then((function(t){return e.createNewDiscussion(t)})),t.resolve()}))):t.resolve(),t.promise},e.prototype.markAllConversationsForRemoval=function(){this.coreContent.ui.hasConversationAttached||this.coreContent.allowConversations||!this.coreContent.attachedForumLink||(this.coreContent.attachedForumLink=null,this.coreContent.forumAttacherAction=o.r.ForumAttacherAction.DELETE.toString().toUpperCase())},e.prototype.createNewDiscussion=function(e){var t=this,n=e.contentDetail[a.g.Discussion.handle].id,i=this.currentCourse.forums.$find(n);i.messages.$fetch().$then((function(s){if(s){var o=s.find((function(e){return!e.groupId}));if(o)return o}return i.messages.$build({forumId:n,courseId:e.courseId,parentId:"{unset id}",userId:t.contextUser.userId,postedName:t.contextUser.userModel.userName,body:{rawText:"",displayText:""},isDeleted:!1,isAvailable:!0}).$save().$asPromise()})).$then((function(){return t.initializeDiscussionStatus()}))},e.prototype.initializeDiscussionStatus=function(){var e=this;this.coreContent&&(this.coreContent.ui.hasConversationAttached=!0,this.coreContent.attachedForumLink&&this.currentCourse.contents.$find(this.coreContent.attachedForumLink["resource/x-bb-courselink"].courseContent).$then((function(t){var n=t.contentDetail[a.g.Discussion.handle].id;e.currentCourse.forums.$find(n).$then((function(e){e.messages.$fetch().$then((function(e){var t=e[0];t&&(t.ui.replyText="")}))}))}))),this.conversationContent.isAvailable=this.isCourseAvailable,this.conversationContent.$patch().$then((function(t){e.coreContent=t}))},e.showConversations=function(e){return!(!e||!e.id)&&(void 0===(e.ui&&e.ui.hasConversationAttached)&&(e.ui.hasConversationAttached=null!=e.attachedForumLink),e.ui.hasConversationAttached)},e.$inject=["currentCourse","coreContent","$q","$rootScope",r.b],e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(l);s.module(c,[o.Q,r.a]).service("courseContentConversation",l)},Nyb7:function(e,t){e.exports='<div class="complex-statistic-contents"></div>'},O3Pz:function(e,t){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.getCourseColorClass()}}"\n       ng-class="{ \'pending\': displayGrade.attempt.isNeedsGrading() }"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target">\n    <span class="value" bb-translate>{{displayGrade.attemptStatus}}</span>\n  </div>\n</div>\n'},Ocaa:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var i=n("D57K"),s=(n("0lMW"),n("gORw"),n("wHJ2")),o=n("nbDY"),a=n.n(o),r=n("0JpG"),c=n("2a+M"),l=n("+4Px"),d=n("pjml"),u=n("lEL+"),p=n("GbAM"),m=n("Qbdf"),h=n("nYZ0"),b=n("W6wm"),g="ultra.components.directives.bbDragHandle",v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Vertical=new t("vertical"),t.Horizontal=new t("horizontal"),t.Omnidirectional=new t("omnidirectional"),t}(a.a),f=function(){function t(t,n,i,s,o,a){var r=this;this.$rootScope=t,this.bbLocalizeService=n,this.dragDropService=i,this.timeout=s,this.currentCourseService=o,this.contentService=a,this.bbDragMoveTimeoutId=null,this.scope={dragItemId:"@",dragItemName:"@",dragItemType:"@",dragDirection:"@?",dragItemContext:"@?"},this.restrict="A",this.link=function(t,n,i){r.dragDirection=v.parse(t.dragDirection)||v.Vertical,r.dragDropService.currentDragContext=t.dragItemContext,e(n).parent().attr("role","application"),n.on("mousedown",(function(i){function s(e){e.stopImmediatePropagation()}i.preventDefault(),document.addEventListener("click",s,!0),r.dragStart(i,n,t),e(document).on("mousemove.reorder",(function(e){r.dragMove(e,t)})),e(document).on("mouseup.reorder",(function(i){r.dragEnd(i,n),e(document).off("mousemove.reorder"),e(document).off("mouseup.reorder"),n.on("$destroy",(function(){document.removeEventListener("click",s,!0)})),r.timeout((function(){document.removeEventListener("click",s,!0)}),t,0,!1)}))})),n.on("keydown",(function(n){if(n.stopPropagation(),n.keyCode===l.f||n.keyCode===l.t)if(n.preventDefault(),r.dragDropService.isKeyboardDragging){var i=r.bbLocalizeService.translateSync({locale:r.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-stopped",noWrap:!0});r.$rootScope.$broadcast(p.a,i),e(document.body).removeClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-end")}else{r.dragDropService.isKeyboardDragging=!0,r.dragDropService.currentDragId=t.dragItemId,r.dragDropService.currentDragType=t.dragItemType,r.contentHasFolderChild(t),r.dragDropService.currentDropTargetId=t.dragItemId,r.dragDropService.positionBefore=t.dragItemId,e(document.body).addClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-start");var s=r.bbLocalizeService.translateSync({locale:r.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-started",params:{itemName:t.dragItemName},noWrap:!0});r.$rootScope.$broadcast(p.a,s)}else if(n.keyCode===l.v)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-up");else if(n.keyCode===l.d)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-down");else if(n.keyCode===l.s)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-right");else if(n.keyCode===l.j)n.preventDefault(),r.$rootScope.$broadcast("keyboard-drag-left");else if(n.keyCode===l.g&&(n.preventDefault(),r.dragDropService.isKeyboardDragging)){var o=r.bbLocalizeService.translateSync({locale:r.bbLocalizeService.getLocale(t),key:"components.services.drag-drop.aria.reorder-canceled"});r.$rootScope.$broadcast(p.a,o),e(document.body).removeClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-cancel")}})),n.on("blur",(function(){r.dragDropService.isKeyboardDragging&&(e(document.body).removeClass("bb-is-dragging"),r.$rootScope.$broadcast("keyboard-drag-cancel"))}));var s=function(e){r.dragStart(e,n,t)},o=function(e){r.dragMove(e,t)},a=function(e){r.dragEnd(e,n)},c=function(){r.dragCancel()};n[0].addEventListener("touchstart",s,!1),n[0].addEventListener("touchmove",o,!1),n[0].addEventListener("touchend",a,!1),n[0].addEventListener("touchcancel",c,!1),t.$on("$destroy",(function(){n[0].removeEventListener("touchstart",s,!1),n[0].removeEventListener("touchmove",o,!1),n[0].removeEventListener("touchend",a,!1),n[0].removeEventListener("touchcancel",c,!1)}))}}return t.prototype.contentHasFolderChild=function(e){var t=this;if(d.r.ContentHandler.Folder.isEqualTo(e.dragItemType)&&b.a.Discussions!==t.dragDropService.currentDragContext){var n=d.r.ContentRootNode.ROOT,i=this.currentCourseService.course,s=this.contentService.findRootNode(i,n);this.contentService.getContentInContentTree(s,i.courseId,this.dragDropService.currentDragId).then((function(e){e.content&&(t.dragDropService.currentDragHasFolderChild=e.content.getChildren().$asPromise().then((function(e){return e.some((function(e){return e.isUiFolder()}))})))}))}},t.prototype.dragStart=function(t,n,i){if(this.dragDropService.currentDragElement){var s=e(".f-open-dropdown");s.length>0&&window.Foundation.libs.dropdown.close(s),this.dragDropService.currentDragElement.remove()}this.$rootScope.$broadcast("bb-drag-start"),e(document.body).addClass("bb-is-dragging"),this.dragDropService.originalElement=n.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.idOfPreviousItem=this.dragDropService.originalElement.prev(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.dragDropService.idOfNextItem=this.dragDropService.originalElement.next(".drag-element").find("[drag-item-id]").attr("drag-item-id");var o=e(".f-open-dropdown");(o.length>0&&window.Foundation.libs.dropdown.close(o),this.$rootScope.$broadcast("foundation-offcanvas-close-panel"),d.r.ContentHandler.Folder.isEqualTo(i.dragItemType))&&(this.$rootScope.$broadcast("close-folder-immediately-by-id",i.dragItemId),this.dragDropService.currentDragElement.find(".img-icon-folder-open").removeClass("img-icon-folder-open").addClass("img-icon-folder"));this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass).addClass("mouse-touch-drag"),this.dragDropService.originalElement.after(this.dragDropService.currentDragElement),this.dragDropService.currentDragId=i.dragItemId,this.dragDropService.currentDragType=i.dragItemType,this.contentHasFolderChild(i),this.dragDropService.currentDropTargetId=i.dragItemId,this.dragDropService.positionBefore=i.dragItemId,this.dragDropService.createDropPlaceholderElement(this.dragDropService.currentDragElement),this.dragMove(t,i)},t.prototype.dragEnd=function(t,n){e(document.body).removeClass("bb-is-dragging"),t.preventDefault(),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.movableElementClass),this.dragDropService.currentDragElement.removeAttr("style"),this.$rootScope.$broadcast("bb-drag-end")},t.prototype.dragCancel=function(){this.$rootScope.$broadcast("bb-drag-cancel"),e(document.body).removeClass("bb-is-dragging")},t.prototype.dragMove=function(e,t){var n=this;e.preventDefault();var i,s,o,a,r=this.dragDropService.currentDragElement.find("[bb-drag-handle]"),l=this.dragDropService.originalElement.find("[bb-drag-handle]").offset(),d=r.offset(),u=this.dragDropService.currentDragElement.offset(),p=d.left-u.left,m=d.top-u.top,h=p+r.width()/2,b=m+r.height()/2,g=v.Horizontal.isEqualTo(this.dragDirection)||v.Omnidirectional.isEqualTo(this.dragDirection),f=v.Vertical.isEqualTo(this.dragDirection)||v.Omnidirectional.isEqualTo(this.dragDirection);e.touches?(i=g?e.touches[0].pageX-h:u.left,s=f?e.touches[0].pageY-b:u.top,o=g?e.touches[0].pageX:l.left,a=f?e.touches[0].pageY:l.top):(i=g?e.pageX-h:u.left,s=f?e.pageY-b:u.top,o=g?e.pageX:l.left,a=f?e.pageY:l.top),this.dragDropService.currentDragElement.offset({left:i,top:s}),this.dragDropService.pointerPosition={left:o,top:a},this.dragDropService.scrollDragDropItemsContainer(this.dragDropService.pointerPosition.top,c.a.SCROLLING_CONSTANTS.mouseInteractionDistanceToScroll),this.timeout.cancel(this.bbDragMoveTimeoutId),this.bbDragMoveTimeoutId=this.timeout((function(){n.$rootScope.$broadcast("bb-drag-move")}),t,150,!1)},t.$inject=["$rootScope",r.serviceName,c.d,u.b,m.e,h.f],t}();s.module(g,[r.moduleName,c.c,u.a,m.b,h.d]).directive("bbDragHandle",["$injector",function(e){return e.instantiate(f)}])}).call(this,n("5iHu"))},P2DR:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-one-drive",use:"icon-small-one-drive-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-one-drive"><path d="M4 12s-3 0-3-2.5S3 7 3 7s-.4041-2.5 1.5-3.5C6.4041 2.5 8 4 8 4s2-1.5 4 0 1 4 1 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M13 14H6s-2 0-2-2 2-2 2-2 0-2 1.5-2.5S10 8 10 8s1.5-1.5 3 0 .5 3 .5 3 1.5 0 1.5 1.5-2 1.5-2 1.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},Poqp:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.kloudless.modal.authorizationRequiredTitle"\n          analytics-id-tag-prefix="components.directives.kloudless.authorizationRequired">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.kloudless.modal.authorizationRequiredMessage</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="global.close">\n    <bb-translate>global.close</bb-translate>\n  </button>\n</bb-modal>\n'},Q6Ow:function(e,t,n){},"QJ+g":function(e,t){e.exports='<div bb-load-bundle="components/directives/freeform-response-editor" class="freeform-response-editor-template"></div>'},QW6a:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n("D57K"),s=(n("GkCm"),n("Fvsw")),o=n("0JpG"),a=n("TnpK"),r="ultra.features.course.content.assessment.attemptSafeAssignSetting.controller",c="ultra.student.assessment.submitToGRD",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(function(){function e(e,t,n,i,s){var o=this;this.$scope=e,this.contentData=t,this.context=n,this.bbLocalize=i,this.ultraStateService=s,this.submitToGRD=!1,this.addToUserPreference=!1,this.confirmedToClose=!1,e.attemptSafeAssignSetting=this,this.panelTitle=this.contentData.courseContent.title,this.params=this.ultraStateService.params,this.submitToGRD=this.params.submitToGRD,this.submitToGRDEnabled&&(this.originalSelection={submitToGRD:this.submitToGRD,addToUserPreference:this.addToUserPreference},this.context.getPreference(c).then((function(e){e&&"true"===e.value&&(o.submitToGRD=!0,o.addToUserPreference=!0,o.originalSelection.submitToGRD=o.submitToGRD,o.originalSelection.addToUserPreference=o.addToUserPreference)}))),e.$on("$stateChangeStart",(function(e,t){t.name.indexOf("attempt-safe-assign-setting")<0&&o.submitToGRDEnabled&&!o.confirmedToClose&&o.isDirty&&(e.preventDefault(),o.$scope.$broadcast("show-confirmation","attempt-safe-assign-setting"))})),e.$watch((function(){return o.submitToGRD}),(function(e){!1===e&&(o.addToUserPreference=!1)}))}return Object.defineProperty(e.prototype,"submitToGRDEnabled",{get:function(){return!!this.contentData.courseContent.canSubmitToGlobalReferenceDatabase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDirty",{get:function(){return!(!this.originalSelection||this.originalSelection.submitToGRD===this.submitToGRD&&this.originalSelection.addToUserPreference===this.addToUserPreference)},enumerable:!0,configurable:!0}),e.prototype.saveClicked=function(){this.confirmedToClose=!0,this.context.setPreference(c,this.addToUserPreference.toString()),this.$scope.$root.$broadcast("submit-to-global-reference",{submitToGRD:this.submitToGRD}),this.closePanel()},e.prototype.cancelClicked=function(){this.confirmedToClose=!0,this.ultraStateService.leavePeekState()},e.prototype.closePanel=function(){this.ultraStateService.leavePeekState()},e.$inject=["$scope","contentData",s.b,o.serviceName,a.d],e}())},QWY5:function(e,t,n){},Qc1G:function(e,t,n){},QhTW:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-group-conversation",use:"icon-medium-group-conversation-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-group-conversation"><g clip-path="url(#icon-medium-group-conversation_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 20C6.433 20 8 18.433 8 16.5S6.433 13 4.5 13 1 14.567 1 16.5 2.567 20 4.5 20zM19.522 20c-1.933 0-3.5-1.567-3.5-3.5s1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5-1.567 3.5-3.5 3.5zM15 23c.5-2 2-3 4.522-3M9.022 23c-.5-2-2-3-4.522-3M14 5.5c0 2.4853-2.0147 4.5-4.5 4.5A4.4927 4.4927 0 018 9.744L6 11V8.3287A4.4812 4.4812 0 015 5.5C5 3.0147 7.0147 1 9.5 1S14 3.0147 14 5.5zM14.5 1C16.9853 1 19 3.0147 19 5.5a4.4812 4.4812 0 01-1 2.8287V11l-2-1.256c-.3184.1125-.6533.2177-1 .256" /></g><defs><clipPath id="icon-medium-group-conversation_clip0"><path fill="#fff" d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(o);e.exports=o},QyCV:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("q1bP"),n("mbXE"),n("sZYy"),n("dV61");var i=n("nsO7"),s=n("wHJ2"),o=n("Qbdf"),a=n("5Yfa"),r=n("0JpG"),c=n("JNtI"),l=n("TnpK"),d=n("gkef"),u=n("1jPR"),p=n("RjZY"),m="ultra.components.directives.bbGoalAlignment",h=function(){function e(e,t,n,o,r){var l=this;this.$injector=e,this.contextCourse=t,this.localize=n,this.ultraState=o,this.windowSize=r,this.scope={contents:"=",hideGoals:"&",shouldFocus:"&"},this.restrict="E",this.template=u,this.link=function(e,t,n){s.extend(e,{generateControlId:function(e,t){return("x-"+e.getContentIdForGoalAlignment()+"-"+t.goalId).replace(/[\.;]/g,"-")},openPeekPanel:!!n.openPeekPanel&&e.$eval(n.openPeekPanel),canAlignGoals:function(){return e.primaryContent.isCurrentUserEligibleToAlignGoals()},addGoals:function(){l.ultraState.goPeekState("goal-picker-legacy",{goalAlignableContent:e.primaryContent})},deleteGoal:function(t,n){i.remove(t.alignedGoals,(function(e){return e===n}));var s=n.content||t;i.remove(s.alignedGoals,(function(e){return e.goalId===n.goalId}));var o=i.compact(s.alignedGoals.map((function(e){return e.goal})));e.$root.$broadcast(a.a,s,o),e.$root.$broadcast(a.d(s),o)},isCourseComplete:function(){return l.contextCourse.course&&l.contextCourse.course.isComplete()},isMobile:window.Modernizr.touch&&!l.windowSize.isLargeBreakpoint(),getOverflowMenuItems:function(t,n){return[{icon:"trash",labelKey:"global.delete",ariaLabel:function(){return l.localize.translateSync({locale:l.localize.getLocale(e),key:"course.goal-alignment.goal.sr-only.delete",params:{goalName:n.goal.goalTitle},noWrap:!0})},show:function(){return n.content&&n.content.isCurrentUserEligibleToAlignGoals&&n.content.isCurrentUserEligibleToAlignGoals()&&!e.isCourseComplete()},onClick:function(){e.deleteGoal(t,n)},confirmationOptions:c.a("x-bb-delete-goal-alignment")}]}});var o=s.noop,r=function(){var t={title:"",alignedGoals:[],isCurrentUserEligibleToAlignGoals:function(){return!1},getContentIdForGoalAlignment:function(){return"x"}};e.primaryContent=(e.contents||[t])[0]||t,e.primaryContent!==t&&e.$root.$broadcast("EVENT_GOAL_PICKER_RESTORE",e.primaryContent),o(),o=e.$on(a.c,(function(t,n){var s=e.primaryContent.coreContent||e.primaryContent,o=i.zipObject(s.alignedGoals.map((function(e){return e.goalId})),s.alignedGoals),r=n.sort((function(e,t){return e.goalTitle.localeCompare(t.goalTitle)})).map((function(e){return Object.prototype.hasOwnProperty.call(o,e.id)?o[e.id]:{goalId:e.id,isVisibleToStudent:!0,goal:e,content:s}}));e.primaryContent.alignedGoals=r,e.primaryContent.coreContent&&(e.primaryContent.coreContent.alignedGoals=r),e.$root.$broadcast(a.a,s,n),e.$root.$broadcast(a.d(s),n)}))};e.$watch("contents",r),r()}}return e.$inject=["$injector",o.e,r.serviceName,l.d,d.b],e}();s.module(m,[d.a,"dibari.angular-ellipsis",r.moduleName,c.b,p.a]).directive("bbGoalAlignment",["$injector",function(e){return e.instantiate(h)}])},QzaB:function(e,t){e.exports='<div bb-load-bundle="components/directives/search-box">\n  <bb-svg-icon size="small" icon="search"></bb-svg-icon>\n  <input \n    bb-translate-attrs="{ \'placeholder\': \'{{::$ctrl.placeholderKey}}\', \'aria-label\': \'{{::$ctrl.placeholderKey}}\'}"\n    type="text"\n    ng-model="$ctrl.searchText" \n    ng-model-options="{debounce: 800, getterSetter: true}"\n    analytics-id="{{::$ctrl.analyticsIdTagPrefix}}.input.text"\n  />\n  <button bb-translate-attrs="{\'aria-label\': \'components.directives.search-box.clearSearch\'}"\n    ng-if="$ctrl._searchText"\n    ng-click="$ctrl.clearSearchInput()"\n    analytics-id="{{::$ctrl.analyticsIdTagPrefix}}.clear.button"\n  >\n    <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n  </button>\n</div>\n'},"R+Yw":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n("Vsv2"),s=n("pjml"),o="ultraUi.components.services.cloudDrive.rteKloudlessModal",a="RteKloudlessService",r=i.a.KLOUDLESS.toString(),c=function(){function e(e,t,n){this.$q=e,this.cloudDriveService=t,this.CloudDriveModel=n}return e.prototype.initialize=function(){var e=this;return this.cloudDriveService.isCloudServiceAvailable(i.a.parse(r)).then((function(t){return e.isCloudServiceAvailable=t}))},e.prototype.openFilePicker=function(e){var t=this;return this.cloudDriveService.cloudDriveStorage[r].openFilePicker(e,!0).then((function(e){if(e){var n=[];return e.forEach((function(i){var s=function(e){return e.account+"|"+e.id}(i),o=t.CloudDriveModel.$new(r).contents.$new(s).$fetch({accessToken:e[0].bearer_token.key}).$asPromise();n.push(o)})),t.$q.all(n).then((function(t){return t.map((function(t){return{id:t.id,kloudlessAccessToken:e[0].bearer_token.key,name:t.name,size:t.size,type:t.type,updatedTime:t.updatedTime,webLocation:t.webLocation}}))}))}return t.$q.reject()}))},e.prototype.getModalCallback=function(e){var t=this;return function(){return t.cloudDriveService.cloudDriveStorage[r]?t.openFilePicker(e):t.cloudDriveService.initializeCloudDrive(i.a.KLOUDLESS).then((function(){return t.openFilePicker(e)}))}},e.$inject=["$q",i.c,s.j.serviceName],e}();angular.module(o,[i.b]).service(a,c)},R4kC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var i=n("D57K"),s=n("nsO7"),o=n("wHJ2"),a=n("pjml"),r=n("aHpC"),c=n("jhBu"),l=n("o5Lu"),d=n("Sa5G"),u=n("JfV0"),p="ultra.services.submissionList",m="submissionList",h=["courseCardColorIndex","id","isAvailable","dueDateExceptionType","timeLimitExceptionType","role","courseRole","user.id","user.userName","user.avatar","user.familyName","user.givenName","user.lastModifiedAt","userHasHidden","userId","isPreviewStudent"].join(),b=["isPreviewStudent(asc)","user.familyName(asc)","user.givenName(asc)"].join(),g=function(){function e(e,t,n,i,s,o){this.$rootScope=e,this.$q=t,this.CourseModel=n,this.gradeService=i,this.entitlementService=s,this.$ngRedux=o,this.listeners=new Map,this.subscribeToRedux()}return e.prototype.subscribeToRedux=function(){this.$ngRedux.connect(null,(function(e){return{loadMembership:function(t,n){return e(u.actions.courseMembership.loadCourseMembershipByMemberId(t,n))}}}))(this)},e.prototype.setSubmissionList=function(e,t,n,i){this.submissionList&&this.submissionList.courseId===e&&this.submissionList.columnId===t||(this.submissionList=Object.create(null)),this.submissionList.courseId=e,this.submissionList.columnId=t,this.submissionList.memberships=n,this.submissionList.rows=i||[],this.submissionList.canViewGroups=this.entitlementService.areAllEntitled([d.v.ViewGroups,d.f.ViewAsDesigner],e)},e.prototype.getListeners=function(e,t){var n=e+"|"+t;return this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n)},e.prototype.notifyRowsListeners=function(){this.submissionList&&this.getListeners(this.submissionList.courseId,this.submissionList.columnId).forEach((function(e){return e()}))},e.prototype.addOnRowsUpdated=function(e,t,n){var i=this;return this.getListeners(e,t).add(n),function(){i.removeOnRowsUpdated(e,t,n)}},e.prototype.removeOnRowsUpdated=function(e,t,n){this.getListeners(e,t).delete(n)},e.prototype.refreshAttempts=function(e,t,n){var i,s,o,a,r,c,l,d,u,p=this;return e!==(null===(i=this.submissionList)||void 0===i?void 0:i.courseId)||t!==(null===(s=this.submissionList)||void 0===s?void 0:s.columnId)?this.$q.when():("attemptId"in n?u=null===(a=null===(o=this.submissionList)||void 0===o?void 0:o.rows)||void 0===a?void 0:a.find((function(e){var t,i;return null===(i=null===(t=e.grade)||void 0===t?void 0:t.attempts)||void 0===i?void 0:i.some((function(e){return(null==e?void 0:e.id)===n.attemptId}))})):"userId"in n?u=null===(c=null===(r=this.submissionList)||void 0===r?void 0:r.rows)||void 0===c?void 0:c.find((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===n.userId})):"groupId"in n&&(u=null===(d=null===(l=this.submissionList)||void 0===l?void 0:l.rows)||void 0===d?void 0:d.find((function(e){var t;return(null===(t=e.group)||void 0===t?void 0:t.id)===n.groupId}))),u?this.loadAttempt(e,u).then((function(e){if(1===(null==e?void 0:e.length)){var t=e[0];u.grade=t.grade,u.attemptCount=t.attemptCount,u.lastAttemptDate=t.lastAttemptDate,u.attemptsReadyToPost=t.attemptsReadyToPost,p.notifyRowsListeners()}})):this.$q.when())},e.prototype.loadAttempt=function(e,t){var n;return(null===(n=t.group)||void 0===n?void 0:n.id)?this.loadGroupAttempt(e,t):this.loadIndividualAttempt(t)},e.prototype.loadGroupAttempt=function(e,t){var n,i,s,o,a,r,c=this;if(!this.submissionList.canViewGroups)return this.$q.when();var l=null===(n=t.group)||void 0===n?void 0:n.memberships.map((function(e){return c.submissionList.memberships.find((function(t){return t.userId===e.userId}))})).filter((function(e){return!!e})),d=null===(o=null===(s=null===(i=t.Column.ui)||void 0===i?void 0:i.content)||void 0===s?void 0:s.assignedGroups)||void 0===o?void 0:o.find((function(e){return e.groupId===t.group.id}));return this.gradeService.loadGroupRows(this.CourseModel.$new(e),[d],l,t.Column,null===(r=null===(a=t.Column.ui)||void 0===a?void 0:a.content)||void 0===r?void 0:r.isSafeAssignEnabled())},e.prototype.loadIndividualAttempt=function(e){var t,n;return this.gradeService.loadCustomizedBulkViewRows([e.membership],e.Column,null,null,null===(n=null===(t=e.Column.ui)||void 0===t?void 0:t.content)||void 0===n?void 0:n.isSafeAssignEnabled())},e.prototype.sortSubmissionList=function(e){var t=this;e&&e.sort((function(e,n){return t.getBucketNum(e)-t.getBucketNum(n)||(e.group?e.group.title.localeCompare(n.group.title):e.user.givenName.localeCompare(n.user.givenName))}))},e.prototype.getBucketNum=function(e){return e.RowStatus.valueOf()},e.prototype.fetchMemberships=function(e,t){var n=s.merge({fields:h,roleBucket:"taking",sort:b},t);return e.memberships.$fetch(n).$asPromise()},e.prototype.fetchMembership=function(e,t){var n=this;return this.$q.resolve(this.loadMembership(e.id,t).then((function(t){var i=e.memberships.$build(t);return n.$rootScope.$emit("course-"+e.id+"-memberships-after-fetch",[i]),i})))},e=Object(i.__decorate)([Object(i.__param)(0,Object(r.b)("$rootScope")),Object(i.__param)(1,Object(r.b)("$q")),Object(i.__param)(2,Object(r.b)(a.o.serviceName)),Object(i.__param)(3,Object(r.b)(l.h)),Object(i.__param)(4,Object(r.b)(c.b)),Object(i.__param)(5,Object(r.b)("$ngRedux"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(g);o.module(p,[c.a,l.g]).service(m,g)},ROik:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var i=n("wHJ2"),s=n("LN5R"),o=n("nsO7"),a=n("yC9S"),r=n("lEL+"),c=n("dF44"),l=n("+4Px"),d=n("DAbe"),u="ultra.components.directives.gradeGridMenuReborn",p=function(){function t(t,n,i,s,a){var r=this;this.scope=t,this.element=n,this.attrs=i,this.gradeGridRebornController=s,this.timeout=a,n.data("destroy",(function(){if(o.isUndefined(t.onBeforeDestroy)||t.onBeforeDestroy(n),n.remove(),a.cancel(r.timeoutRef),r.scrollHDeregistration&&r.scrollHDeregistration(),r.scrollVDeregistration&&r.scrollVDeregistration(),!1===t.autoDestroy){var i=e(window);i.off("click."+t.id),i.off("blur."+t.id)}else t.$destroy()})),t.keepOthers||e("[bb-grade-grid-menu-reborn]").each((function(t,i){i!==n[0]&&e(i).data("destroy")()})),n.mousedown((function(t){e(t.target).closest("button:disabled").length&&t.preventDefault()})),o.isUndefined(t.waiting)?this.listenOnWindow():a((function(){r.listenOnWindow()}),t,t.waiting,!1),this.timeoutRef=a((function(){r.scrollHDeregistration=t.$on(c.b.SCROLL_H,(function(){a((function(){return n.data("destroy")()}),t,0,!1)})),r.scrollVDeregistration=t.$on(c.b.SCROLL_V,(function(){a((function(){return n.data("destroy")()}),t,0,!1)}))}),t,200,!1),a((function(){o.isUndefined(t.adjustPosition)||t.adjustPosition(n)}),t,0,!1)}return t.prototype.listenOnWindow=function(){var t=this,n=function(n,i){i||e(n.target).closest("button:disabled").length||t.element.data("destroy")()};if(!1===this.scope.autoDestroy){var i=e(window);i.on("click."+this.scope.id,n),i.on("blur."+this.scope.id,n)}else a.b.OnWindow("click",n,this.scope),a.b.OnWindow("blur",(function(e){t.element.data("destroy")()}),this.scope)},t.$inject=["scope","element","attrs","gradeGridRebornController",r.b],t}(),m=function(){function t(t,n){var i=this;this.$injector=t,this.timeout=n,this.restrict="A",this.template=d,this.require="^"+s.a,this.transclude=!0,this.link=function(t,n,s,o){t.gradeGridMenuReborn=i.$injector.instantiate(p,{scope:t,element:n,attrs:s,gradeGridRebornController:o}),i.timeout((function(){n.on("keydown",(function(t){var i=n.find("li>:tabbable"),s=e(t.target);if(t.keyCode===l.v)i.eq((i.index(s)-1+i.length)%i.length).focus();else if(t.keyCode===l.d)i.eq((i.index(s)+1)%i.length).focus();else{if(!l.y(t))return;s.click()}t.preventDefault(),t.stopPropagation()}))}),t,0,!1)}}return t.$inject=["$injector",r.b],t}();i.module(u,[]).directive("bbGradeGridMenuReborn",["$injector",function(e){return e.instantiate(m)}])}).call(this,n("5iHu"))},RPq7:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n("D57K"),s=n("wHJ2"),o=n("nbDY"),a=n.n(o),r=n("lEL+"),c="ultra.directives.contentItemMouseover",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Top=new t("TOP"),t.Bottom=new t("BOTTOM"),t.Default=new t("DEFAULT"),t}(a.a),d=function(){function e(e,t,n){var i=this;this.scope=e,this.element=t,this.timeout=n,this.lastPosition=l.Default,this.lastTime=0,t.mouseover((function(){i.recalculatePosition()})),t.mousemove((function(e){Date.now()-i.lastTime>1e3?(i.timeout.cancel(i.lastMousemoveTimeout),i.handleMousemove(e)):(i.timeout.cancel(i.lastMousemoveTimeout),i.lastMousemoveTimeout=i.timeout((function(){i.handleMousemove(e)}),i.scope,100,!1))})),t.mouseleave((function(){i.timeout.cancel(i.lastMousemoveTimeout),i.lastPosition=l.Default})),e.$on("content-outline-hover-end",(function(){i.timeout.cancel(i.lastMousemoveTimeout),i.lastPosition=l.Default}))}return e.prototype.handleMousemove=function(e){null!=this.elementOffset&&null!=this.elementHeight||this.recalculatePosition(),this.lastTime=Date.now(),e.pageY-this.elementOffset>this.elementHeight/2?(this.lastPosition.isEqualTo(l.Bottom)||this.broadcastPosition(l.Bottom),this.lastPosition=l.Bottom):(this.lastPosition.isEqualTo(l.Top)||this.broadcastPosition(l.Top),this.lastPosition=l.Top)},e.prototype.broadcastPosition=function(e){this.scope.$emit("content-item-mouseover",{element:this.element,relativeMousePosition:e})},e.prototype.recalculatePosition=function(){this.elementHeight=this.element.outerHeight(),this.elementOffset=this.element.offset().top},e.$inject=["scope","element",r.b],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.scope={canCreate:"&"},this.link=function(e,n){e.canCreate&&e.canCreate()&&(e.contentItemMouseover=t.$injector.instantiate(d,{scope:e,element:n}))}}return e.$inject=["$injector"],e}();s.module(c,[r.a]).directive("bbContentItemMouseover",["$injector",function(e){return e.instantiate(u)}])},RWbl:function(e,t){e.exports='<div bb-load-bundle="components/directives/grade/submission-list">\n  <div class="submission-list-header">\n    <div class="search-filter">\n      <bb-search-box\n        on-search="submissionList.filterRows(searchText)"\n        placeholder-key="{{::submissionList.getSearchBoxPlaceholderKey()}}"\n        analytics-id-tag-prefix="components.directives.grade.submissionList.filter">\n      </bb-search-box>\n      <div class="submission-list-filter" ng-if="submissionList.isIndividual">\n        <span bb-translate="components.directives.grade.submission-list.filter.label"></span>\n        <div class="select-wrapper">\n          <div bb-foundation-defer>\n            <button data-dropdown="submission-list-filter"\n              bb-click-focus=".item-selected > a"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.submission-list.filter.label\'}"\n              aria-describedby="filter-name"\n              analytics-id="components.directives.grade.submissionList.filter.button">\n              <div class="select-value">\n                <span id="filter-name">{{submissionList.mySelectedFilter.name}}</span>\n              </div>\n            </button>\n            <bb-dropdown list-id="submission-list-filter"\n              list-kind="filter"\n              item-list="submissionList.availableFilters"\n              selected-item="submissionList.mySelectedFilter"\n              click-function="submissionList.changeFilter(item)"\n              analytics-id-tag-prefix="components.directives.grade.submission-list.changeFilter">\n            </bb-dropdown>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="page-size-selector-wrapper">\n      <bb-page-size-selector\n        ng-if="::submissionList"\n        local-storage-key="SUBMISSION_LIST_SELECTED_PAGE_SIZE"\n        on-change="submissionList.onPageSizeChange(pageSize)"\n      ></bb-page-size-selector>\n    </div>\n  </div>\n  <form class="assessment-exception" name="submission-list" bb-intersection-observer ng-switch="::submissionList.mode" ng-class="::{\'is-group-submission\': submissionList.isGroup}">\n    <div class="row tabular-list-header course-grades-column-headers course-grades-instructor">\n      <div class="columns medium-4 tabular-list-header-offset hide-for-small-only"><span bb-translate>course.grades.gradebook-item.headers.student</span></div>\n      <div class="columns medium-6">\n        <div class="row">\n          <div class="columns js-status-column hide-for-small-only" ng-class="::submissionList.isPeerGrading() ? \'medium-3\' : \'medium-5\'">\n            <span ng-if="::!submissionList.isDiscussion" bb-translate>course.grades.gradebook-item.headers.submission</span>\n            <span ng-if="::submissionList.isDiscussion" bb-translate>course.engagement.grade.headers.participation</span>\n          </div>\n          <div ng-if="::submissionList.isPeerGrading()" class="columns medium-3 js-peer-column hide-for-small-only">\n            <span bb-translate>course.grades.gradebook-item.headers.peerGrading</span>\n          </div>\n          <div class="columns js-grade-column hide-for-small-only" ng-if="!submissionList.column.anonymousGrading" ng-class="::submissionList.isPeerGrading() ? \'medium-4\' : \'medium-5\'">\n            <span bb-translate>course.grades.gradebook-item.headers.graded</span>\n          </div>\n          <div class="columns medium-2 small-1 hide-for-small-only end">\n            <span class="js-originality-column" ng-if="::submissionList.shouldShowOriginality" bb-translate>course.grades.gradebook-item.headers.originality</span>\n          </div>\n        </div>\n      </div>\n      <div remove-from-dom="true"\n            class="columns medium-2 small-12 overflow-menu-div"\n            ng-if="::submissionList.canDownloadAll()"\n            bb-foundation-defer>\n          <bb-overflow-menu class="overflow-menu"\n                          menu-items="::submissionList.getDownloadOverflowMenu()"\n                          element-id="submission-list-overflow-menu"\n                          element-name="{{::submissionList.overflowMenuLabel()}}"\n                          analytics-id-tag-prefix="course.grades.gradebookItem.headers.submissionList">\n          </bb-overflow-menu>\n        <button class="download-link button-anchor"\n            bb-translate="components.directives.grade.submission-list.downloadAll"\n            href="javascript:void(0);"\n            ng-click="submissionList.gradesBulkDownload()"\n            analytics-id="components.directives.grade.submission-list.downloadAll"/>\n      </div>\n    </div>\n    <div id="cannotViewGroupsMsg" ng-if="submissionList.showNoGroupViewMessage()">{{submissionList.cannotViewGroupsMsg}}</div>\n    <div ng-class="{\'last-tabular-row-container\':$last}"\n         ng-switch-default\n         ng-repeat="row in submissionList.rows track by row.id"\n         bb-on-finish-render="submissionList.onFinishRender()">\n      <div bb-intersection-observable="{debounce:200}" class="js-submission-list-row">\n        <bb-submission-list-row column="::submissionList.column" course="::submissionList.course"\n                                user-course-available-map="submissionList.userCourseAvailableMap"\n                                editing="submissionList.editing" row="row" index="$index"\n                                ng-class="{\'bb-user-avatar-alert\': row.isLate()}"\n                                ng-switch="submissionList.isExternalSubmission">\n          <span class="mobile-submissions-header status-header"\n                bb-translate="{{::!submissionList.isDiscussion ? \'course.grades.gradebook-item.headers.submission\' : \'course.engagement.grade.headers.participation\'}}"></span>\n          <div ng-switch-when="true">\n            <span class="status-to-grade"\n                  ng-if="!row.isStatusComplete(submissionList.isExternalSubmission) && !row.isStatusToPost() && !row.overrideToPost() && row.isStatusAttemptsToGrade(submissionList.isExternalSubmission)"\n                  bb-translate translate-values="::{gradeCount: 1}">\n                  components.directives.grade.submission-list.gradingStatus.toGrade.plural</span>\n            <span class="status-to-post"\n                  ng-if="row.isStatusToPost() || row.overrideToPost()"\n                  bb-translate translate-values="::{postCount: 1}">\n                  components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n            <div class="status-is-complete" ng-if="row.isStatusComplete(submissionList.isExternalSubmission) && !row.overrideToPost()">\n              <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n              <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n            </div>\n          </div>\n          <div ng-switch-default>\n            <div ng-switch="row.grade.attempts && row.grade.attempts.length > 0">\n              <div ng-switch-when="true">\n                <span class="status-nothing-to-grade"\n                      ng-if="row.isStatusNothingToGrade() && !row.isStatusToPost() && !row.isStatusComplete() && !row.overrideToPost() && !submissionList.isPeerGrading()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.{{submissionList.getNothingToGradeOrReconcileKey($index)}}</span>\n                <span class="status-to-reconcile"\n                      ng-if="row.isStatusAttemptsToReconcile() && !submissionList.isPeerGrading()"\n                      bb-translate translate-values="::{gradeCount: row.grade.attempts.getNumAttemptsToReconcile()}">\n                      components.directives.grade.submission-list.gradingStatus.attemptsToReconcile.plural</span>\n                <span class="status-to-grade"\n                      ng-if="row.isStatusAttemptsToGrade() && !submissionList.isPeerGrading()"\n                      bb-translate translate-values="::{gradeCount: row.grade.attempts.getNumAttemptsToGrade()}">\n                      components.directives.grade.submission-list.gradingStatus.attemptsToGrade.plural</span>\n                <span class="{{submissionList.status}}"\n                      ng-if="submissionList.isPeerGrading() && !(row.isMultipleStatus() || row.isStatusToPost() || row.overrideToPost()) && (row.isStatusAttemptsToGrade() || row.isStatusAttemptsToReconcile())"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.{{submissionList.getAttemptsPeerStatus()}}</span>\n                <span class="vertical-bar" ng-if="row.isMultipleStatus() && !submissionList.isPeerGrading()"></span>\n                <span class="status-to-post"\n                      ng-if="row.isMultipleStatus() || row.isStatusToPost() || row.overrideToPost()"\n                      bb-translate translate-values="::{postCount: 1}">\n                      components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n                <div class="{{submissionList.status}}"\n                      ng-if="submissionList.hasAttemptBeenPostedOrCompleted($index)">\n                      <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n                      <span bb-translate>components.directives.grade.submission-list.gradingStatus.{{submissionList.getPostedOrCompletedKey()}}</span>\n                </div>\n              </div>\n            <div ng-switch-default>\n              <span class="status-nothing-to-grade" ng-if="!row.isOverdue() && !row.isCurrentUserReconciler() && !submissionList.isPeerGrading()"\n                    bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n              <span class="status-nothing-to-grade" ng-if="!row.isOverdue() && row.isCurrentUserReconciler()  && !submissionList.isPeerGrading()"\n                    bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToReconcile</span>\n              <span class="status-no-submission" ng-if="row.isOverdue() || (!row.isOverdue() && submissionList.isPeerGrading())"\n                    bb-translate>components.directives.grade.submission-list.gradingStatus.noSubmission</span>\n              <span class="vertical-bar" ng-if="row.overrideToPost()"></span>\n              <span class="status-to-post"\n                    ng-if="row.overrideToPost()"\n                    bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n            </div>\n          </div>\n        </div>\n        </bb-submission-list-row>\n      </div>\n    </div>\n    <div ng-class="{\'last-tabular-row-container\':$last}"\n         ng-switch-when="Group"\n         ng-repeat="row in submissionList.rows | limitTo: submissionList.pageSize: submissionList.currentPage*submissionList.pageSize track by row.id">\n      <div bb-intersection-observable="{debounce:200}">\n        <bb-group-submission-list-row column="::submissionList.column" course="::submissionList.course"\n                                      user-course-available-map="submissionList.userCourseAvailableMap"\n                                      editing="submissionList.editing" row="row" index="$index"\n                                      ng-class="{\'bb-user-avatar-alert\': row.isLate()}"\n                                      ng-switch="submissionList.isExternalSubmission">\n          <span class="mobile-submissions-header status-header"\n                bb-translate="{{::!submissionList.isDiscussion ? \'course.grades.gradebook-item.headers.submission\' : \'course.engagement.grade.headers.participation\'}}"></span>\n          <div ng-switch-when="true">\n            <span class="status-to-grade" ng-if="!row.isGroupStatusComplete(submissionList.isExternalSubmission) && !row.isGroupStatusToPost()\n            && !row.overrideToPost() && row.isGroupStatusAttemptsToGrade(submissionList.isExternalSubmission)"\n                  bb-translate translate-values="{gradeCount: 1}">components.directives.grade.submission-list.gradingStatus.toGrade.plural</span>\n            <span class="status-to-post" ng-if="row.isGroupStatusToPost() || row.overrideToPost()"\n                  bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n            <div class="status-is-complete" ng-if="row.isGroupStatusComplete(submissionList.isExternalSubmission) && !row.overrideToPost()">\n              <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n              <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n            </div>\n          </div>\n          <div ng-switch-default>\n            <div ng-switch="row.hasGroupAttempts()">\n              \x3c!--TODO need to account for multiple attempts as a group; right now only looking at the single group attempt entry in code below--\x3e\n              <div ng-switch-when="true">\n                <span class="status-nothing-to-grade"\n                      ng-if="row.isGroupStatusNothingToGrade() && !row.isGroupStatusToPost() && !row.isGroupStatusComplete() && !row.overrideToPost()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n                <span class="status-to-grade"\n                      ng-if="row.isGroupStatusAttemptsToGrade()"\n                      bb-translate translate-values="{gradeCount: 1}">components.directives.grade.submission-list.gradingStatus.attemptsToGrade.plural</span>\n                <span class="vertical-bar" ng-if="row.isMultipleStatus()"></span>\n                <span class="status-to-post"\n                      ng-if="row.isMultipleStatus() || row.isGroupStatusToPost() || row.overrideToPost()"\n                      bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n                <div class="status-is-complete" ng-if="row.isGroupStatusComplete() && !row.overrideToPost()">\n                  <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n                </div>\n              </div>\n              <div ng-switch-default>\n                <span class="status-nothing-to-grade"\n                      ng-if="::!row.isOverdue()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n                <span class="status-no-submission"\n                      ng-if="::row.isOverdue()"\n                      bb-translate>components.directives.grade.submission-list.gradingStatus.noSubmission</span>\n                <span class="vertical-bar" ng-if="row.overrideToPost()"></span>\n                <span class="status-to-post"\n                      ng-if="row.overrideToPost()"\n                      bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural</span>\n              </div>\n            </div>\n          </div>\n        </bb-group-submission-list-row>\n      </div>\n    </div>\n    <div ng-class="{\'last-tabular-row-container\':$last}"\n         ng-switch-when="Discussion"\n         ng-repeat="row in submissionList.rows | limitTo: submissionList.pageSize: submissionList.currentPage*submissionList.pageSize track by row.id">\n      <div bb-intersection-observable="{debounce:200}">\n        <bb-submission-list-row column="submissionList.column" course="submissionList.course"\n                                user-course-available-map = "submissionList.userCourseAvailableMap"\n                                include-due-date-exception="submissionList.includeDueDateException()"\n                                is-group-discussion="submissionList.isGroupDiscussion()"\n                                editing="submissionList.editing" row="row" index="$index">\n          <span class="status-to-grade"\n                ng-if="row.isStatusAttemptsToGrade()"\n                bb-translate translate-values="{gradeCount: 1}">components.directives.grade.submission-list.gradingStatus.toGrade.plural</span>\n          <div class="status-is-complete" ng-if="row.isStatusComplete()">\n            <bb-svg-icon size="small" icon="check-circle" status="success"></bb-svg-icon>\n            <span bb-translate>components.directives.grade.submission-list.gradingStatus.complete</span>\n          </div>\n          <span class="status-nothing-to-grade"\n                ng-if="row.isStatusNothingToGrade() && !row.isOverdue() && !row.isStatusComplete()"\n                bb-translate>components.directives.grade.submission-list.gradingStatus.nothingToGrade</span>\n          <span class="status-no-participation"\n                ng-if="row.isStatusNothingToGrade() && row.isOverdue() && !row.isStatusComplete()"\n                bb-translate>components.directives.grade.submission-list.participation.noParticipation</span>\n          <span class="vertical-bar" ng-if="row.isStatusNothingToGrade() && row.isStatusToPost()"></span>\n          <span class="status-to-post" ng-if="(row.isStatusNothingToGrade() && row.isStatusToPost()) || (row.isStatusToPost())"\n                bb-translate translate-values="::{postCount: 1}">components.directives.grade.submission-list.gradingStatus.toPost.plural\n          </span>\n        </bb-submission-list-row>\n      </div>\n    </div>\n  </form>\n  <bb-pagination\n    total-items="submissionList.totalItems"\n    page-size="submissionList.pageSize"\n    current-page="submissionList.currentPage"\n    on-change-page="submissionList.onChangePage()"\n  ></bb-pagination>\n</div>\n'},RjZY:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("IEHd"),o="ultra.components.directives.bbUiIcon.Goal";Object(i.a)(s.a,o,"bbUiIconGoal")},S6sW:function(e,t){e.exports='<ng-switch on="displayGrade.shouldShowPointsPossible()">\n  <span ng-switch-when="true" ng-bind-html="displayGrade.fullDisplayGrade"></span>\n  <span ng-switch-default><strong>{{displayGrade.fullDisplayGrade}}</strong></span>\n</ng-switch>'},SE1T:function(e,t){e.exports='<button class="button-add-content js-show-add-options"\n        data-show-add-options\n        ng-click="addContentButton.addGroup()"\n        ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n        aria-label="{{addContentButton.addButtonAriaLabel}}"\n        ng-focus="addContentButton.showButton()"\n        ng-blur="addContentButton.hideButton()"\n        analytics-id="components.directives.add-content-button.course-group.button">\n</button>\n'},SHbF:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-attention",use:"icon-medium-attention-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attention"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12.75 18.5a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" /><path d="M12 15l-.5-10h1L12 15z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},SMOU:function(e,t,n){},SP9a:function(e,t,n){},Siqh:function(e,t,n){},Sq3Z:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-activity-indicator",use:"icon-small-activity-indicator-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-activity-indicator"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="2" stroke-width="4" /></symbol>'});s.add(o);e.exports=o},StCz:function(e,t,n){},StaB:function(e,t,n){},T0fj:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("uDsz"),n("7BzJ"),n("Vrsv");var i=n("5iHu"),s=n("wHJ2"),o=n("0JpG"),a=n("xqn/"),r=n("lEL+"),c=n("e6jQ"),l=n("yC9S"),d=n("oQrK"),u="ultra.components.directives.timepicker";i.fn.timepicker.Constructor.prototype.elementKeydown=i.fn.timepicker.Constructor.prototype.blurElement=i.fn.timepicker.Constructor.prototype.highlightUnit=function(){return!0};var p=function(){function e(e,t,n,s,a,r,u,p){var m=this;(this.scope=e,this.$element=t,this.attrs=n,this.model=s,this.bbLocalize=a,this.bbValidateTime=r,this.timeout=u,this.$compile=p,null==n.bbValidateTime)&&(n.bbValidateTime="short",this.bbValidateTime[0].compile(t,n,void 0)(e,t,n,s));if(!d.a.detect().desktop()&&window.Modernizr.inputtypes.time){if(n.$set("type","time"),t.removeAttr("placeholder"),n.bbTranslateAttrs){var h=e.$eval(n.bbTranslateAttrs);h.placeholder&&(delete h.placeholder,n.bbTranslateAttrs=JSON.stringify(h))}}else{var b;this.bbLocalize.loadBundle("components/directives/timepicker").then((function(){null==n.placeholder&&(null==n.placeholderDate?n.$set("placeholder",m.bbLocalize.translateSync({locale:m.bbLocalize.getLocale(m.scope),key:"components.directives.timepicker.timeFormatPlaceholder"})):(n.placeholderDate&&m.formatAndSetPlaceholder(new Date(n.placeholderDate.replace(/("|\')/g,""))),n.$observe("placeholderDate",(function(e){e&&(m.placeholderDate=new Date(e.replace(/("|\')/g,"")),m.formatAndSetPlaceholder(m.placeholderDate))}))));var e=m.bbLocalize.translateSync({locale:m.bbLocalize.getLocale(m.scope),key:"components.directives.timepicker.timeFormatHint"}),s="timepicker_"+c.a();b=i('<div class="hide" id="'+s+'">'+e+"</div>"),t.parent().append(b),t.attr("aria-labelledby",s)}));var g=this.$compile('<i aria-hidden="true"><bb-svg-icon size="small" icon="away"></bb-svg-icon></i>')(this.scope);t.before(g),t.keypress((function(e){13===e.which&&(e.preventDefault(),g.click())})),t.parent().addClass("input-group").find("i").addClass("input-group-addon");var v=this.bbLocalize.getLocale(this.scope),f=a.getTimePatternSync(o.ILocaleTimeFormat.Short,e).indexOf("a")>-1;"ar-sa"===v&&(f=!1);var y=t.timepicker({defaultTime:!1,disableMousewheel:!0,lockTabs:!0,minuteStep:1,showMeridian:f,showWidgetOnAddonClick:!0}).data("timepicker"),w=this.bbLocalize.getDayPeriodsFormatSync(v);y.meridianAm=w.am,y.meridianPm=w.pm;var C=function(){t.prop("disabled")||t.prop("readonly")?g.remove():t.prev()!==g&&(t.before(g),g.click((function(){y.showWidget()})))};n.$observe("disabled",(function(e){C()})),n.$observe("readonly",(function(e){C()})),y.$widget.attr("aria-hidden","true"),e.$watch((function(){return s.$modelValue}),(function(e,t){!e&&t?y.$element.val(""):!t&&e&&y.setDefaultTime(y.defaultTime)})),e.$watch((function(){return s.$viewValue}),(function(t){e.$emit("time-view-value-is-empty",s.$name,s.$dirty&&s.$isEmpty(t))})),y.defaultTime="current",y.$element.on("show.timepicker",(function(){y.$widget.find("a").attr("tabindex","-1"),y.$element.val()?y.setTime(y.$element.val()):y.setDefaultTime(m.placeholderDate||y.defaultTime),0===y.$widget.find(".timepicker-timezone").length&&y.$widget.append(m.$compile('<div class="divider"></div>\n                           <div class="timepicker-timezone" bb-translate translate-values="{datetime: timepicker.model.$modelValue}">global.timezone.short</div>')(m.scope))})),y.$element.on("focusin",(function(e){y.$element.prop("readonly")||y.$element.prop("disabled")||y.showWidget()})),y.$element.on("focusout",(function(t){m.timeout((function(){0===y.$widget.find(":focus").length&&!y.$element.is(":focus")&&i(":focus").length>0&&y.hideWidget()}),e,0,!1)})),y.$widget.on("focusin",(function(e){e.stopImmediatePropagation()})),y.$widget.on("focusout",(function(t){m.timeout((function(){0===y.$widget.find(":focus").length&&!y.$element.is(":focus")&&i(":focus").length>0&&y.hideWidget()}),e,0,!1)})),y.$element.on("hide.timepicker",(function(){y.$widget.find(":focus").length>0&&t.focus()}));var S=function(){y.place()};e.$on("$destroy",(function(){y.remove(),t.parents(".panel-wrap").eq(0).unbind("scroll",S),b&&b.remove()})),l.b.OnWindow("scroll",S,e),t.parents(".panel-wrap").eq(0).bind("scroll",S)}}return e.prototype.formatAndSetPlaceholder=function(e){var t=this.bbLocalize.formatTimeSync(e,o.ILocaleTimeFormat.Short,this.scope);this.attrs.$set("placeholder",t)},e.$inject=["scope","element","attrs","model",o.serviceName,a.a+"Directive",r.b,"$compile"],e}(),m=function(){function e(e){var t=this;this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.scope={},this.link=function(e,n,i,s){e.timepicker=t.$injector.instantiate(p,{scope:e,element:n,attrs:i,model:s})}}return e.$inject=["$injector"],e}();s.module(u,[o.moduleName,a.b,r.a]).directive("bbTimePicker",["$injector",function(e){return e.instantiate(m)}])},T1pL:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var i=n("wHJ2"),s=n("nsO7"),o=n("o5Lu"),a=n("3l3z"),r=n("LN5R"),c=n("TmUJ"),l=n("qH3X"),d=n("+4Px"),u=n("lEL+"),p=n("dF44"),m=n("TUWB"),h="ultra.components.directives.gradeGridOverallEditorReborn",b=function(){function t(e,t,n,i,s,o,a,r){var c=this;this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=s,this.gradeGridRebornController=o,this.gradeService=a,this.timeout=r,this.initialize(),n.$on(l.a.REFRESH_OVERALL_EDITOR,(function(){c.initialize()})),n.$on("$destroy",(function(){c.removeErrorMessage()}))}return t.prototype.initialize=function(){var e=this;this.score=this.scope.gradeGridColumnOverallReborn.score,this.element.find("input").focus(),this.element.find(".wrapping-input-style").css({"border-color":"#c36fd3"}),this.timeout((function(){e.element.find("input").select()}),this.scope,0,!1),this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.removeErrorMessage=function(){this.element.removeClass("validation-alert"),s.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),s.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)},t.prototype.createErrorMessage=function(){var e=this;if(this.messageElement&&this.removeErrorMessage(),s.isUndefined(this.messageElement)){this.element.addClass("validation-alert");var n=this.element.parent(".grade-grid-cell").offset();n.top+=60,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=function(t){var i=n.left+t.width(),s=n.top+t.height(),o=e.gradeGridRebornController.getGradeGridContainerElementRight(),a=e.gradeGridRebornController.getGradeGridContainerElementBottom();i>o&&(n.left-=i-o+Object(c.a)()),s>a&&(n.top-=t.height()+40),e.messageElement.offset(n)},this.$compile(t.CELL_MESSAGE_TEMPLATE)(this.messageScope,(function(t){e.messageElement=t,e.element.parents("bb-grade-grid-reborn").append(e.messageElement)}))}},Object.defineProperty(t.prototype,"isValidated",{get:function(){return this._isValidated},set:function(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage()},enumerable:!0,configurable:!0}),t.prototype.stopPropagation=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.mousedown=function(){e(this.window).trigger("click")},Object.defineProperty(t.prototype,"isHiddenPointsPossible",{get:function(){return!(s.isUndefined(this.score)||/^-?\d*(\.\d+)?$/.test(this.score))},enumerable:!0,configurable:!0}),t.prototype.onChange=function(){var e=this;this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.onInputBlur=function(){this.scope.gradeGridColumnOverallReborn.onInputBlur(this.isValidated,this.score)},t.prototype.checkValue=function(e){var t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)},t.prototype.onKeydown=function(t){d.y(t)?(this.scope.gradeGridColumnOverallReborn.gotoNextCell(),e(t.target).blur(),this.mousedown(),t.preventDefault(),t.stopPropagation()):t.keyCode===d.g?(e(t.target).blur(),this.mousedown(),this.scope.$emit(p.b.LEAVE_CELL)):d.x(t)&&(!this.score||t.keyCode!==d.j&&t.keyCode!==d.s?this.mousedown():t.stopPropagation())},t.$inject=["$compile","$window","scope","element","attrs","gradeGridRebornController",o.h,u.b],t.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>',t}(),g=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=m,this.require="^"+r.a,this.link=function(e,n,i,s){e.gradeGridOverallEditorReborn=t.$injector.instantiate(b,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();i.module(h,[a.a]).directive("bbGradeGridOverallEditorReborn",["$injector",function(e){return e.instantiate(g)}])}).call(this,n("5iHu"))},TCPR:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-time",use:"icon-small-time-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-time"><path d="M15 8c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7 7 3.134 7 7zM5 11l1-1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v4l3 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},TML7:function(e,t){e.exports='<div class="rb-grid">\n  <style scoped id="rb-grid"></style>\n  <style scoped id="rb-grid-rows-initial-position"></style>\n\n  <div ng-if="grid.containers.left" rb-grid-container="left" id="rb-grid-container-left"></div>\n\n  <div rb-grid-container="center"></div>\n\n  <div ng-if="grid.containers.right" rb-grid-container="right"></div>\n\n  <div ng-transclude></div>\n\n</div>\n'},TOu5:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},TR8k:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-conversation",use:"icon-medium-conversation-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-conversation"><path d="M4.5 18C6.433 18 8 16.433 8 14.5S6.433 11 4.5 11 1 12.567 1 14.5 2.567 18 4.5 18zM9 23c.2624-2.4862-1.873-5-4.5-5M23 7.5c0 3.5899-2.9101 6.5-6.5 6.5-1.0821 0-2.1025-.2644-3-.7322L11 15l.5-3.3464C10.5633 10.5273 10 9.0794 10 7.5 10 3.9101 12.9101 1 16.5 1S23 3.9101 23 7.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},TUWB:function(e,t){e.exports='<div class="wrapping-input-style no-hover">\n  <div>\n    <input autocomplete="off" pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px" pu-elastic-input-width-delta="8"\n           ng-blur="gradeGridOverallEditorReborn.onInputBlur()"\n           placeholder="--" ng-model="gradeGridOverallEditorReborn.score"\n           ng-mousedown="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-click="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-change="gradeGridOverallEditorReborn.onChange()"\n           ng-keydown="gradeGridOverallEditorReborn.onKeydown($event)" spellcheck="false" \n           analytics-id="components.directives.grade.grid.overAll.input.text"/>\n  </div>\n  <div ng-mousedown="gradeGridOverallEditorReborn.mousedown()" ng-class="{hidden: gradeGridOverallEditorReborn.isHiddenPointsPossible}">\n    <span class="slash"></span><span class="possible" ng-bind="gradeGridColumnOverallReborn.pointsPossible"></span>\n  </div>\n</div>\n'},TZd2:function(e,t){e.exports='<div class="pagination"\n  bb-load-bundle="components/directives/pagination"\n  ng-if="$ctrl.pageCount > 1"\n  >\n  <div>\n    <button ng-click="$ctrl.previousPage()"\n      class="prev-page"\n      ng-disabled="!$ctrl.canNavigate(-1)"\n      bb-translate-attrs="{\'aria-label\': \'components.directives.pagination.prevPage\'}"\n      analytics-id="components.directives.pagination.prevPage.button">\n      <bb-svg-icon size="small" icon="arrow-left" ></bb-svg-icon>\n    </button>\n    <span bb-translate="components.directives.pagination.page"></span>\n    <div bb-foundation-defer class="select-wrapper">\n      <button data-dropdown="{{::$ctrl.componentId}}"\n        bb-click-focus=".item-selected > a"\n        bb-translate-attrs="{\'aria-label\': \'components.directives.pagination.page\'}"\n        aria-describedby="{{::$ctrl.componentDescribeId}}"\n        analytics-id="components.directives.pagination.page.button">\n        <div class="select-value">\n          <span id="{{::$ctrl.componentDescribeId}}">{{$ctrl.mySelectedPage.name}}</span>\n        </div>\n      </button>\n      <bb-dropdown list-id="{{::$ctrl.componentId}}"\n        list-kind="filter"\n        item-list="$ctrl.availablePages"\n        selected-item="$ctrl.mySelectedPage"\n        simplified-max-items-per-page="$ctrl.maxItemsInDropdown || 10"\n        force-above="true"\n        click-function="$ctrl.changePage(item)"\n        analytics-id-tag-prefix="components.directives.pagination.changePage">\n      </bb-dropdown>\n    </div>\n    <span bb-translate="components.directives.pagination.ofPageCount"\n          translate-values="{pageCount: $ctrl.pageCount}"\n          class="js-page-count">\n    </span>\n    <button ng-click="$ctrl.nextPage()"\n      class="next-page"\n      ng-disabled="!$ctrl.canNavigate(1)"\n      bb-translate-attrs="{\'aria-label\': \'components.directives.pagination.nextPage\'}"\n      analytics-id="components.directives.pagination.nextPage.button">\n      <bb-svg-icon size="small" icon="arrow-right"></bb-svg-icon>\n    </button>\n  </div>\n</div>'},TmUJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i,s=n("5iHu");function o(){if(null==i){var e=s('<div style="width:100px; height:100px; overflow:hidden; position:absolute; top:-200px; left:-200px;"><div class="inner" style="height:200px;"></div>'),t=e.find(".inner");s("body").append(e);var n=t.innerWidth();e.css("overflow","auto");var o=t.innerWidth();s(e).remove(),i=n-o}return i}},Tn43:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));n("367g"),n("Aw+3"),n("8+lX"),n("aAQ7"),n("UyCM");var i=n("wHJ2"),s=n("nsO7"),o=n("en1n"),a=n("0JpG"),r=n("suMx"),c=n("jciN"),l=n("JNtI"),d=n("+e2k"),u=n("+g6d"),p=n("TnpK"),m=n("g7Mf"),h=n("r6lH"),b=n("ELoy"),g=n("pjml"),v=n("f4B+"),f=n("nmzr"),y=n("yC9S"),w=n("Wqh6"),C="ultra.components.directives.discussion",S=function(){function t(e,t,n,i,o,a,r,c,l,d){var u=this;this.$window=e,this.$sce=t,this.scope=n,this.element=i,this.$stateParams=o,this.bbLocalize=a,this.telemetry=r,this.discussion=c,this.ultraState=l,this.courseModel=d,n.isLoaded=!1,n.courseId=n.content().courseId,n.contentId=n.content().id,n.isGroupDiscussion=n.content().isGroupContent,this.createDfiReport(n.courseId,n.contentId),y.b.OnWindow("resize",s.debounce((function(){(u.scope.displayNonParticipants||u.scope.displayNonParticipantGroup)&&(u.updateNonParticipantView(),u.scope.$apply())}),150),n)}return t.prototype.createDfiReport=function(e,t,n){var i=this;(n?this.telemetry.loadDiscussionActivityData(e,t,n):this.telemetry.loadDiscussionActivityData(e,t)).then((function(e){i.scope.discussionData=e,i.scope.header=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.discussion.insights.header",params:{title:i.scope.content().title},noEscape:!0,noWrap:!0}),i.scope.course=i.courseModel.$find(i.scope.courseId),i.scope.isSingleGroup=!!n,i.scope.groups=i.scope.discussionData.groups,i.scope.isGradable=!!i.scope.discussionData.gradeColumnId,i.scope.gradingColumn=i.scope.discussionData.gradeColumnId,i.scope.viewedOnlyCount=i.scope.discussionData.viewedOnlyCount,i.scope.avgCommentsPerStudent=i.scope.discussionData.avgCommentsPerStudent?i.scope.discussionData.avgCommentsPerStudent:0,i.scope.avgWordCountPerComment=i.scope.discussionData.avgWordCountPerComment?i.scope.discussionData.avgWordCountPerComment:0,i.scope.avgGradeOfDiscussion=i.scope.discussionData.avgGrade?i.scope.discussionData.avgGrade/100:0,i.scope.numberOfCommentsToDisplay=1,i.scope.topComments=[],i.scope.displayTopComments=!1,i.scope.topParticipants=[],i.scope.displayTopParticipants=!1,i.scope.nonParticipants=[],i.scope.showNonparticipant=[],i.scope.showLargeNonparticipantPanel=!0,i.scope.minHeightForTopBoxes="auto",i.scope.nonParticipants=i.getNonParticipants(),i.scope.displayNonParticipants=!!i.scope.nonParticipants.length&&!i.scope.isGroupDiscussion,i.scope.displayNonParticipantGroups=!!i.scope.nonParticipants.length&&i.scope.isGroupDiscussion&&!i.scope.isSingleGroup,i.scope.displayNonParticipantGroup=!!i.scope.nonParticipants.length&&i.scope.isGroupDiscussion&&i.scope.isSingleGroup,i.scope.nonParticipantGroups=i.scope.displayNonParticipantGroups?i.getNonParticipantGroups():[],i.scope.totalNonParticipants=i.scope.nonParticipants.length,i.scope.totalParticipants=i.scope.discussionData.totalParticipants+i.scope.totalNonParticipants,i.scope.displayedNonParticipants=24,i.scope.additionalNonParticipants=i.scope.totalNonParticipants,i.scope.currentPanelWidth=0,i.scope.lastPanelWidth=-1,i.scope.isLoaded=!0;for(var t=0;t<i.scope.displayedNonParticipants;t++)i.scope.showNonparticipant[t]=!0;i.getTopComments(),i.getTopParticipants(),i.getParticipantBarChart(),i.updateNonParticipantView(),i.scope.overflowItems=i.getOverflowMenu(),i.scope.statisticsConfig=i.getSummaryInsightNumbers(),i.scope.topCommentsColumns=i.scope.displayTopComments&&i.scope.displayTopParticipants?"small-12 medium-8 large-9":"small-12",i.scope.topParticipantColumns=i.scope.displayTopComments&&i.scope.displayTopParticipants?"small-12 medium-4 large-3":"small-12"}))},t.prototype.getSummaryInsightNumbers=function(){var e=this.bbLocalize.getLocale(this.scope),t=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.numParticipants"}),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.formattedParticipation",params:{count:this.scope.totalParticipants-this.scope.totalNonParticipants,total:this.scope.totalParticipants},noWrap:!0}),i=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgComments"}),s=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgCount"}),o=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgGrade"}),a=this.scope.isGradable&&this.scope.avgGradeOfDiscussion>0?this.bbLocalize.formatPercentageSync(this.scope.avgGradeOfDiscussion,this.scope):this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.na"}),r=[];return r.push({title:t,data:n}),r.push({title:i,data:this.bbLocalize.formatNumberSync(this.scope.avgCommentsPerStudent,this.scope).toString()}),this.scope.avgWordCountPerComment&&this.scope.avgWordCountPerComment>0&&r.push({title:s,data:this.bbLocalize.formatNumberSync(this.scope.avgWordCountPerComment,this.scope).toString()}),this.scope.isGradable&&r.push({title:o,data:a}),r},t.prototype.getParticipantBarChart=function(){var t=0,n=0,i=100,s=this.scope.totalParticipants-this.scope.totalNonParticipants;this.scope.totalParticipants>0?i=100-((t=Math.floor((this.scope.totalParticipants-this.scope.totalNonParticipants)/this.scope.totalParticipants*100))+(n=Math.floor(this.scope.viewedOnlyCount/this.scope.totalParticipants*100))):(t=0,n=0,i=100),e(".bar-chart .participated").attr("style","width: "+t+"%"),e(".bar-chart .opened").attr("style","width: "+n+"%"),e(".bar-chart .unopened").attr("style","width: "+i+"%");var o=this.scope.totalNonParticipants-this.scope.viewedOnlyCount;this.scope.barchartNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartNonParticipants",params:{count:o},noWrap:!0}),this.scope.barchartOpenedNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartOpenedNonParticipants",params:{count:this.scope.viewedOnlyCount},noWrap:!0}),this.scope.barchartParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartParticipants",params:{count:s},noWrap:!0}),this.scope.percentParticipatedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentParticipated",params:{percent:this.bbLocalize.formatPercentageSync(t/100,this.scope)},noWrap:!0}),this.scope.percentOpenedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentOpened",params:{percent:this.bbLocalize.formatPercentageSync((n+t)/100,this.scope)},noWrap:!0})},t.prototype.getNonParticipantGroups=function(){var e=this,t=[];return this.scope.nonParticipants.length>0&&i.forEach(this.scope.groups,(function(n){var s={id:n.id,name:n.name,nonParticipants:[],total:0,hidden:0};i.forEach(e.scope.nonParticipants,(function(t){t.group.id===n.id&&(t.localizedName=e.bbLocalize.formatUsernameSync(t,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),s.nonParticipants.push(t),s.total++)})),s.hidden=s.total>4?s.total-4:0,s.total>0&&t.push(s)})),t},t.prototype.getTopComments=function(){var e=this;this.scope.numberOfCommentsToDisplay=o.h()?3:5,this.scope.discussionData.topComments.forEach((function(t){var n={user:t.user,message:v.a.text(t.message),messageId:t.messageId,numReplies:t.numReplies};n.user.localizedName=e.bbLocalize.formatUsernameSync(t.user,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.user.avatarData=t.user,e.scope.topComments.push(n),e.scope.displayTopComments=!0}))},t.prototype.getTopParticipants=function(){var e=this;this.scope.discussionData.topParticipants.forEach((function(t){var n={user:t.user,numComments:t.numComments,numReplies:t.numReplies};n.user.localizedName=e.bbLocalize.formatUsernameSync(t.user,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.user.avatarData=t.user,e.scope.topParticipants.push(n),e.scope.displayTopParticipants=!0}))},t.prototype.getNonParticipants=function(){var e=this,t=[];return this.scope.discussionData.nonParticipants.forEach((function(n){n.avatarData=n,n.localizedName=e.bbLocalize.formatUsernameSync(n,a.ILocaleUsernameFormat.Short,null,{noWrap:!1,noEscape:!0}),n.localizedNameWithoutWrap=e.bbLocalize.formatUsernameSync(n,a.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.push(n)})),t},t.prototype.toggleIndividualNonParticipantDisplay=function(){var e=this;s.defer((function(){var t=i.element("#discussion-insights").find(".non-participant-box").innerWidth()-30;t=t<1118?t:1118;var n=2*Math.ceil((t+20)/126);e.scope.displayedNonParticipants=0;for(var s=0;s<18;s++)s<n&&s<e.scope.totalNonParticipants?(e.scope.showNonparticipant[s]=!0,e.scope.displayedNonParticipants++):e.scope.showNonparticipant[s]=!1;e.scope.additionalNonParticipants=e.scope.totalNonParticipants>e.scope.displayedNonParticipants?e.scope.totalNonParticipants-e.scope.displayedNonParticipants:0,e.scope.nonParticipationSummary=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.discussion.insights.nonParticipationSummary",params:{count:e.scope.displayedNonParticipants,total:e.scope.totalNonParticipants},noWrap:!0}),e.setNonParticipantMargin(t)}))},t.prototype.setNonParticipantMargin=function(t){var n=e("li.non-participant"),i=Math.floor(t/126),s=126*i+106,o=i-1>0?20+(t-s-2)/i:20+t-s;e(n).css("margin-right",o),e(n[i]).css("margin-right","2px"),2*i+1<=n.length&&e(n[2*i+1]).css("margin-right","2px")},t.prototype.updateNonParticipantView=function(){var e=this.bbLocalize.getLocale(this.scope);this.scope.nonParticipantsOptions=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.nonparticipantsOptions"}),this.scope.numberOfCommentsToDisplay=o.h()?3:5,this.scope.currentPanelWidth=i.element("#discussion-insights").find(".non-participant-box").innerWidth(),this.scope.currentPanelWidth!==this.scope.lastPanelWidth&&(o.h()?this.scope.showLargeNonparticipantPanel=!1:(this.scope.showLargeNonparticipantPanel=!0,this.toggleIndividualNonParticipantDisplay())),this.scope.lastPanelWidth=this.scope.currentPanelWidth},t.prototype.getSafeHtml=function(e){return this.$sce.trustAsHtml(e)},t.prototype.hasNavScrollbar=function(){var e=i.element(".group-selector")[0];return!!(e&&e.scrollWidth>e.clientWidth)},t.prototype.goToDiscussion=function(e){e?(this.discussion.groupId=e,this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,disGroupId:e,courseId:this.scope.courseId})):this.ultraState.goPeekState("discussion.view.with-grading",{contentId:this.scope.contentId,courseId:this.scope.courseId})},t.prototype.goToGrade=function(e){this.scope.isGradable&&!this.scope.isGroupDiscussion&&this.ultraState.goPeekState("submission-list",{columnId:this.scope.gradingColumn,participantId:e,contentId:this.scope.contentId})},t.prototype.goToMessage=function(e){this.ultraState.goPeekState(f.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e})},t.prototype.isFocusedNonparticipant=function(t){return e(document.activeElement).is(i.element(e("a#non-participant-link-"+t)))},t.prototype.sortNamesAlphabetically=function(e){var t="";return e.sort((function(e,t){return e.givenName+e.familyName<t.givenName+t.familyName?-1:1})).forEach((function(e){t+=e.id+","})),t.slice(0,-1)},t.prototype.goToMessageAll=function(){var e=this.sortNamesAlphabetically(this.scope.nonParticipants);this.ultraState.goPeekState(f.CourseRoutes.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e,conversationPerRecipient:!0})},t.prototype.updateDfiPanel=function(t,n,i){e(".group-selector .selected").removeClass("selected"),e(t.target).addClass("selected"),n?(this.discussion.groupId=n,this.scope.currentGroupId=n,this.scope.currentGroupName=i,this.createDfiReport(this.scope.courseId,this.scope.contentId,n),this.updateNonParticipantView()):(this.discussion.groupId=void 0,this.scope.currentGroupId=void 0,this.scope.currentGroupName=void 0,this.createDfiReport(this.scope.courseId,this.scope.contentId))},t.prototype.updateMessagesCount=function(){i.element("bb-overflow-menu.ddm-nonparticipant-options:visible").find("#ddm-nonparticipant-options_messages span").text(this.scope.overflowItems[0].labelKey).attr("analytics-id",this.scope.overflowItems[0].labelKey)},t.prototype.getOverflowMenu=function(){var e=this;return[{icon:"messages",labelKey:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.messageNonParticipants",params:{count:this.scope.totalNonParticipants},noWrap:!0}),onClick:function(){e.goToMessageAll()}}]},t.$inject=["$window","$sce","scope","element","$stateParams",a.serviceName,h.b,m.c,p.d,g.o.serviceName],t}(),A=function(){function e(e){var t=this;this.$injector=e,this.restrict="EA",this.template=w,this.scope={content:"&"},this.link=function(e,n,i){e.discussionInsights=t.$injector.instantiate(S,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(C,[r.a,c.a,l.b,d.a,u.a,h.a,b.a,p.b]).directive("bbDiscussionInsights",["$injector",function(e){return e.instantiate(A)}])}).call(this,n("5iHu"))},Tt7N:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-calculation",use:"icon-small-calculation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calculation"><path d="M4 2v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="10" cy="10" r=".5" /><circle cx="14" cy="14" r=".5" /><path d="M2 10l4 4M2 14l4-4M14 10l-4 4M14 4h-4M6 4H2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},TuNX:function(e,t){e.exports='<bb-modal class="notification proctoring-modal" analytics-id-tag-prefix="components.services.proctoring">\n  <div name="modal-contents">\n    <p bb-translate>{{::requirementsText}}</p>\n    <p ng-bind-html="::downloadText"></p>\n    <p bb-translate>{{::browserText}}</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          role="button"\n          class="button js-primary-button proctoring-modal-button"\n          ng-click="$parent.$dismiss()"\n          bb-translate-attrs="{\'aria-label\':\'components.services.proctoring.modal.continue\'}"\n          analytics-id="components.services.proctoring.modal.continue.button"\n  >\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n    <bb-translate>components.services.proctoring.modal.continue</bb-translate>\n  </button>\n</bb-modal>\n'},"U+0H":function(e,t){e.exports='<div class="true-false-question-authoring true-false"  ng-class="::{\'editable\': assessmentQuestion.canEditQuestionText()}">\n  <div class="true-false-answers-container">\n    <ol class="true-false-answers">\n      <li class="true-false-answer js-true-false-answer-true">\n        <input ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               name="{{::assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{::assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               ng-disabled="::!assessmentQuestion.canModifyQuestionProperties()"\n               type="radio" ng-value="true" ng-model="question.answer"\n               analytics-id="assessment.question.true.false.answer.true.input.radio"/>\n        <label ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n               for="{{::assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n               ng-mousedown="assessmentQuestion.updateCorrectAnswer(true)">\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </label>\n        <span class="true-false-answer-option" ng-show="!assessmentQuestion.isEditState" ng-click="assessmentQuestion.edit()"\n              analytics-id="components.directives.assessmentQuestion.edit.label">\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </span>\n        <span class="correct-answer-text" ng-show="!assessmentQuestion.isEditState && question.answer"\n              bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n      <li class="true-false-answer js-true-false-answer-false">\n        <input ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               name="{{::assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n               aria-labelledby="{{::assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               ng-disabled="::!assessmentQuestion.canModifyQuestionProperties()"\n               type="radio" ng-value="false" ng-model="question.answer"\n               analytics-id="assessment.question.true.false.answer.false.input.radio"/>\n        <label ng-show="assessmentQuestion.isEditState"\n               id="{{::assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n               for="{{::assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n               ng-mousedown="assessmentQuestion.updateCorrectAnswer(false)">\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </label>\n        <span class="true-false-answer-option" ng-show="!assessmentQuestion.isEditState" ng-click="assessmentQuestion.edit()"\n              analytics-id="components.directives.assessmentQuestion.edit.label">\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </span>\n        <span class="correct-answer-text" ng-show="!assessmentQuestion.isEditState && !question.answer"\n              bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n    </ol>\n  </div>\n</div>\n'},U2yg:function(e,t){e.exports='<div class="content-navigator-container" ng-if="$ctrl.shouldShowNavigator()">\n  <div class="content-navigator-pre"> \n    <a ng-click="$ctrl.navigate(\'previous\')" \n       title="{{::$ctrl.sibling.previous.title}}" \n       ng-if="$ctrl.sibling.previous" \n       href="javascript:void(0);" \n       ng-disabled="!$ctrl.sibling.previous.canEdit() && $ctrl.sibling.previous.isConditionalReleaseLocked()"\n       analytics-id="components.directives.content.content-navigator.previous.link"\n    >\n      <bb-svg-icon icon="back-arrow" size="medium"></bb-svg-icon>\n      <span ng-if="!$ctrl.content.isTest() && !$ctrl.content.isGradedScorm()" class="ellipse" title="{{::$ctrl.sibling.previous.title}}">{{$ctrl.sibling.previous.title}}</span>\n      \n      <div ng-if="!$ctrl.sibling.previous.canEdit() && $ctrl.sibling.previous.isConditionalReleaseLocked()"\n           bb-complex-tooltip\n           enhanced-tooltip="true"\n           tooltip-position="bottom"\n           tooltip-open-on-activation="true"\n           tooltip-disable-on-mouse-over="true"\n           tooltip-scope="$ctrl.cr.previous.tooltipScope"\n           tooltip-template="{{::$ctrl.cr.previous.getConditionalReleaseComplexTooltipTemplate()}}"\n           tabindex="0" onclick="return false;">\n        <bb-svg-icon size="small" icon="lock"></bb-svg-icon>\n        <span class="sr-only">{{::$ctrl.cr.previous.tooltips}}</span>\n      </div>\n    </a>\n  </div>\n\n  <div class="content-navigator-next">\n    <a ng-click="$ctrl.navigate(\'next\')" \n       title="{{::$ctrl.sibling.next.title}}" \n       ng-if="$ctrl.sibling.next" \n       href="javascript:void(0);" \n       ng-disabled="!$ctrl.sibling.next.canEdit() && $ctrl.sibling.next.isConditionalReleaseLocked()"\n       analytics-id="components.directives.content.content-navigator.previous.link"\n    >\n      <div ng-if="!$ctrl.sibling.next.canEdit() && $ctrl.sibling.next.isConditionalReleaseLocked()"\n           bb-complex-tooltip\n           enhanced-tooltip="true"\n           tooltip-position="bottom"\n           tooltip-open-on-activation="true"\n           tooltip-disable-on-mouse-over="true"\n           tooltip-scope="$ctrl.cr.next.tooltipScope"\n           tooltip-template="{{::$ctrl.cr.next.getConditionalReleaseComplexTooltipTemplate()}}"\n           tabindex="0" onclick="return false;">\n        <bb-svg-icon size="small" icon="lock"></bb-svg-icon>\n        <span class="sr-only">{{::$ctrl.cr.next.tooltips}}</span>\n      </div>\n\n      <span ng-if="!$ctrl.content.isTest() && !$ctrl.content.isGradedScorm()" class="ellipse" title="{{::$ctrl.sibling.next.title}}">{{$ctrl.sibling.next.title}}</span>\n      <bb-svg-icon icon="forward-arrow" size="medium"></bb-svg-icon>\n    </a>\n  </div>\n</div>'},U2yl:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.kloudless.modal.errorTitle"\n          analytics-id-tag-prefix="components.directives.kloudless">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.kloudless.modal.errorFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.kloudless.modal.cancelUploadText">\n    <bb-translate>components.directives.kloudless.modal.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},U50L:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-aria-type="alertdialog"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-enough-submissions">\n  <div name="modal-contents">\n    <p bb-translate>{{::descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},UGfE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("wHJ2"),s=n("pjml"),o=n("/BCe"),a="ultra.directives.courseLinkItem",r=function(){function e(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=o,this.link=function(e,t){var n=e.$watch("targetContent.contentHandler",(function(t){null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())}));!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then((function(){e.content.description=e.targetContent.description}))),e.ariaDescribedBy="content-item-icon-"+e.content.id,e.content.ui.hasIndicator&&(e.ariaDescribedBy+=" activity-indicator-"+e.content.id)}}return e.$inject=[s.o.serviceName],e}();i.module(a,[]).directive("bbCourseLinkItem",["$injector",function(e){return e.instantiate(r)}])},UODz:function(e,t){e.exports='<div class="submission-card" ng-class="{\'is-late\': isLate, \'inline\': inline}" bb-load-bundle="components/directives/submission-card">\n  <div class="panel" ng-class="{\'clickable-panel\': clickable}">\n    <i ng-if="!inline" class="{{iconClass}}"></i>\n    <div class="info" ng-class="{\'completed\': submissionCard.attempt.isCompleted(), \'rubric-icon-spacing\': submissionCard.shouldExpandForRubricIcon()}">\n      <span class="name ellipsis" bb-translate ng-if="!inline">{{title}}</span>\n      <span class="detail">\n        <span class="test-status ellipsis" ng-show="!!status">\n          <span class="inline-status" ng-if="inline && !hasAttempt && showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.late\n          </span>\n          <span class="inline-status" ng-if="inline && !hasAttempt && !showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.new\n          </span>\n          <span ng-if="inline && !hasAttempt"> - </span>\n          <span bb-translate class="status">{{status}}</span>\n          <ng-switch on="submissionCard.attempt.status" ng-if="submissionCard.attempt">\n            <bb-datetime class="date" format="Short" ng-switch-when="COMPLETED" value="::submissionCard.attempt.attemptLastGradedDate"></bb-datetime>\n            <bb-datetime class="date" format="Short" ng-switch-default value="::submissionCard.attempt.attemptDate"></bb-datetime>\n          </ng-switch>\n          <bb-datetime class="date" format="Short" ng-if="!submissionCard.attempt && gradingColumn.dueDate" value="::gradingColumn.dueDate"></bb-datetime>\n        </span>\n      </span>\n    </div>\n    <div class="grade-container">\n      <ng-switch on="gradeDetail.isPosted()">\n        <bb-display-grade ng-switch-when="true"\n                          grade-detail="gradeDetail"\n                          column="gradingColumn"\n                          display-type="GradeColor"\n                          show-rubric-button="showRubricButton()"\n                          show-rubric-div="showRubricDiv()"></bb-display-grade>\n        <bb-display-grade ng-switch-default\n                          attempt="submissionCard.attempt"\n                          display-type="AttemptStatus"></bb-display-grade>\n      </ng-switch>\n    </div>\n  </div>\n</div>\n'},UQC1:function(e,t){e.exports='<div class="calculated-formula-question-container calculated-formula-attempt-review">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.viewHelper.questionTextWithVariableValues"\n    plugin-options="editorPluginOptions"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <div\n    ng-if="::assessmentQuestion.questionAttempt.question.displayFormulaToStudent"\n    class="formula-details"\n  >\n    <img\n      ng-src="{{::assessmentQuestion.questionAttempt.question.mathMLImageURL}}"\n      alt="{{::assessmentQuestion.questionAttempt.question.mathMLImageAltText}}"\n      class="formula-image" />\n    <ul class="variable-value-list">\n      <li class="variable-value-list-item" ng-repeat="(variable, value) in ::assessmentQuestion.questionAttempt.question.variableValues">\n        <span translate-values="{variableName: variable, variableValue: value}" bb-translate>\n          components.directives.assessment-question.calculated-formula.variableValue\n        </span>\n      </li>\n    </ul>\n  </div>\n  <div\n    ng-if="::assessmentQuestion.questionAttempt.question.correctAnswerPrecision"\n    bb-translate\n    translate-values="{scale: assessmentQuestion.questionAttempt.question.answerScale}"\n    class="rounding-instructions"\n  >\n    {{::assessmentQuestion.viewHelper.getRoundingInstructionsKey()}}\n  </div>\n  <div class="given-answer">\n    <span bb-translate class="given-answer-label">\n      components.directives.assessment-question.calculated-formula.yourAnswer\n    </span>\n    {{::assessmentQuestion.questionAttempt.givenAnswer}}\n  </div>\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    hide-correctness-text="::!assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    class="calculated-formula-question-answer"\n  >\n    <div ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail()">\n      <span ng-bind-html="::assessmentQuestion.viewHelper.getCorrectAnswerText()"></span>\n    </div>\n  </bb-question-answer-status>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n  />\n</div>\n'},UeHE:function(e,t){e.exports='<div ng-if="::addContentButton.isCloudServiceAvailable">\n  <bb-file-upload\n    allow-multiple="true"\n    monitor-leave="true"\n    target-div="{{\'#\' + fileListViewId}}"\n    hide-transclude-during-upload="false"\n    click-enabled="false"\n    primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n    skip-zip-file-check="true"\n    disable-drag="true"\n    is-third-party-upload="true"\n    third-party-download-handler="addContentButton.downloadFile"\n    ignored-states="::ignoredStates()">\n    <button ng-click="addContentButton.assignPosition()"\n            class="doc-add-media clear ng-scope"\n            bb-kloudless\n            primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n            attach-handler="addContentButton.cloudUploadAttachHandler"\n            web-location="{{webLocation}}"\n            file-location="{{fileLocation}}"\n            allow-multiple="true"\n            on-files-selected="addContentButton.onFilesSelectedHandler"\n            analytics-id="components.directives.add-content-button.cloud-upload.button">\n      <div class="import-action-header">\n        <i class="icon-cloud add-content-cloud-upload-icon"></i>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n        <div class="action-details" bb-translate="components.directives.add-content-button.importContentFromCloudStorage.description"></div>\n      </div>\n    </button>\n  </bb-file-upload>\n</div>'},Ui4O:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n  ng-click="gradeGridColumnReborn.enterEditor($event)"\n  analytics-id="components.directives.grade.grid.gradeGridColumnReborn.enterEdit"\n>\n  <div class="score hide" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n    <div id="displayedScore" class="hide">\n      <span id="display" class="hide"></span>\n      <span id="posted"  class="grade-posted-symbol hide" bb-translate>components.directives.grade.grid.postedLabel</span>\n      <span id="pastDueZero" class="past-due-zero-symbol hide" bb-translate>components.directives.grade.grid.pastDueZero</span>\n      <span id="slash" class="slash hide"></span>\n      <span id="pointsPossible" class="pointsPossible hide"></span>\n    </div>\n\n    <div id="gradeNow" class="hide" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n      <a href="javascript:void(0);"\n         tabindex="-1"\n         analytics-id="components.directives.grade.grid.gradeNow"\n         bb-translate>components.directives.grade.grid.gradeNow</a>\n    </div>\n\n    <div id="newSubmission" class="hide">\n      <span class="new-submission" bb-translate>components.directives.grade.grid.newSubmissionLabel</span>\n    </div>\n\n    <span id="blank" class="sr-only">\n        {{gradeGridColumnReborn.ariaLabelContent}}\n    </span>\n  </div>\n  <div id="group" class="group-label" ng-if="!gradeGridColumnReborn.isRestrictedGroupContent">{{gradeGridColumnReborn.group.groupTitle}}</div>\n  <div id="ungraded" class="ungraded hide">\n    <span class="ellipse">{{gradeGridColumnReborn.ungraded}}</span>\n  </div>\n  <div class="anonymous hide">\n    <div\n      bb-tooltip\n      enhanced-tooltip="true"\n      tooltip-position="bottom-center"\n      bb-translate-attrs="{ title: \'components.directives.grade.grid.anonymous.tooltip\' }">\n      <span bb-translate>components.directives.grade.grid.anonymous.label</span>\n    </div>\n  </div>\n</div>\n'},UyCM:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-messages",use:"icon-small-messages-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-messages"><path d="M1 3h14v10H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 3l7 7 7-7M1 13l5-5M15 13l-5-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"V/65":function(e,t,n){},VCKY:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},VPci:function(e,t,n){},VTbC:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("36Bh"),o="ultra.components.directives.bbUiIcon.Link";Object(i.a)(s.Link,o,"bbUiIconLink")},"VV+j":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("MTZf"),o="ultra.components.directives.bbUiIcon.Scormengine";Object(i.a)(s.Scormengine,o,"bbUiIconScormengine")},VcPJ:function(e,t,n){},Vrsv:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-away",use:"icon-small-away-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-away"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 10L8 8V4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"W5+i":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-invisible",use:"icon-medium-invisible-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-invisible"><circle cx="12" cy="12" r="2" stroke-width="2" /><path d="M12 6C7.1067 6 1 12 1 12s6.1067 6 11 6 11-6 11-6-6.1067-6-11-6zM1 23L23 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},W6wm:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.CourseOutline="course-outline",e.Discussions="discussions"}(i||(i={}))},WAgA:function(e,t){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.wrongDelimiter.title\'}" \n    modal-title-key="course.grades.grades-upload-settings.wrongFormat.title" aria-describedby="wrong-format-content"\n    analytics-id-tag-prefix="course.grades.gradesUploadSettingsWrongFormat">\n    <div name="modal-contents">\n        <p id="wrong-format-content" bb-translate="course.grades.grades-upload-settings.wrongFormat.content"></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettingsWrongFormat.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},WXD6:function(e,t,n){},Wqh6:function(e,t){e.exports='<div class="panel-wrap telemetry-panel">\n  <bb-telemetry-panel-header title="{{header}}"\n                           course="course"\n                           panel-data-loaded="true">\n  </bb-telemetry-panel-header>\n\n  <nav class="group-selector" ng-class="{\'horizontal-scroll\': discussionInsights.hasNavScrollbar()}" ng-if="isGroupDiscussion">\n    <ul class="group-list">\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.overall-link"\n          tabindex="0">\n        <a href="javascript:void(0);"\n           class="overall-link selected"\n           ng-click="discussionInsights.updateDfiPanel($event)"\n           bb-translate="components.directives.discussion.insights.overall"\n           analytics-id="components.directives.discussion.insights.overall">\n        </a>\n      </li>\n      <li class="group-item child-is-invokable"\n          bb-click-to-invoke-child="a.group-menu-link"\n          tabindex="0"\n          ng-repeat="group in ::groups">\n        <a href="javascript:void(0);"\n           class="group-menu-link"\n           ng-click="discussionInsights.updateDfiPanel($event, group.id, group.name)"\n           analytics-id="components.directives.discussion.insights.group.link">\n          {{group.name}}\n        </a>\n      </li>\n    </ul>\n  </nav>\n\n  <section id="discussion-insights" class="panel-content discussion-insights" bb-foundation-defer>\n    <div class="insights">\n      <div class="insight-summary row collapse summary-box">\n        <div class="column small-12">\n          <bb-statistics\n            config="statisticsConfig"\n            ng-if="isLoaded"\n            small-per-row="1"\n            large-per-row="4"></bb-statistics>\n        </div>\n      </div>\n\n      <div class="participation-chart-container">\n        <div class="bar-chart">\n          <span class="participated"\n                aria-label="{{barchartParticipants}}"\n                title="{{barchartParticipants}}"></span>\n          <span class="opened"\n                aria-label="{{barchartOpenedNonParticipants}}"\n                title="{{barchartOpenedNonParticipants}}"></span>\n          <span class="unopened"\n                aria-label="{{barchartNonParticipants}}"\n                title="{{barchartNonParticipants}}"></span>\n        </div>\n        <div class="legend">\n          <div class="participatedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentParticipatedCaption)"></div>\n          <div class="openedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentOpenedCaption)"></div>\n        </div>\n      </div>\n\n      <div class="non-participant-groups row" ng-if="displayNonParticipantGroups">\n        <div class="column small-12 non-participant-box clearfix" bb-foundation-defer>\n          <h3 class="stat-title"\n              bb-translate="components.directives.discussion.insights.groupNonParticipants"\n              translate-values="{count: totalNonParticipants}"></h3>\n          <div class="float-right">\n            <bb-overflow-menu class="ddm-nonparticipant-options"\n                              element-id="ddm-nonparticipant-options"\n                              element-name={{nonParticipantsOptions}}\n                              on-menu-toggle="discussionInsights.updateMessagesCount()"\n                              menu-items="discussionInsights.getOverflowMenu()"\n                              analytics-id-tag-prefix="components.directives.discussion.insights.nonParticipantsGroups.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n\n          <div class="group-nonparticipants" ng-repeat="nonParticipantGroup in nonParticipantGroups track by nonParticipantGroup.id">\n            <div class="group-heading child-is-invokable" bb-click-to-invoke-child="a.group-link">\n              <a class="group-link"\n                 href="javascript:void(0);"\n                 ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 analytics-id="components.directives.discussion.insights.nonParticipantGroup.link">\n                {{nonParticipantGroup.name}}\n              </a>\n            </div>\n            <div class="nonparticipant-in-group-container"\n                 ng-class="nonParticipantGroup.total > 3 ? \'space-evenly\' : \'set-margin\' ">\n              <div class="nonparticipant-in-group child-is-invokable"\n                   bb-click-to-invoke-child="a.group-non-participant-link"\n                   ng-repeat="nonParticipant in nonParticipantGroup.nonParticipants | limitTo: 4 track by nonParticipant.id">\n                <bb-avatar user="nonParticipant"></bb-avatar>\n                <a class="group-non-participant-link"\n                   href="javascript:void(0);"\n                   aria-label="{{nonParticipant.localizedName}}"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipant.link">\n                  {{nonParticipant.localizedName}}\n                </a>\n              </div>\n            </div>\n            <div class="count-link">\n              <a ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 ng-show="nonParticipantGroup.hidden > 0"\n                 href="javascript:void(0);"\n                 bb-translate="components.directives.discussion.insights.moreLink"\n                 translate-values="{count: nonParticipantGroup.hidden}"\n                 analytics-id="components.directives.discussion.insights.moreLink">\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="non-participants row" ng-show="(displayNonParticipants || displayNonParticipantGroup)">\n        <div class="column small-12 non-participant-box clearfix" ng-if="showLargeNonparticipantPanel" bb-foundation-defer>\n          <h3 class="stat-title" bb-translate="components.directives.discussion.insights.nonParticipants"></h3>\n          <div class="float-right">\n            <bb-overflow-menu class="ddm-nonparticipant-options"\n                              element-id="ddm-nonparticipant-options"\n                              element-name={{nonParticipantsOptions}}\n                              on-menu-toggle="discussionInsights.updateMessagesCount()"\n                              menu-items="discussionInsights.getOverflowMenu()"\n                              analytics-id-tag-prefix="components.directives.discussion.insights.nonParticipants.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n          <ul class="non-participant-list clearfix">\n            <li class="non-participant child-is-invokable"\n                bb-click-to-invoke-child="a.non-participant-link"\n                tabindex="-1"\n                ng-show="showNonparticipant[$index]"\n                ng-repeat="nonParticipant in nonParticipants | limitTo: 18 track by nonParticipant.id">\n              <div class="non-participant-cell"\n                   ng-class="{\'show-focus-outline\': discussionInsights.isFocusedNonparticipant(nonParticipant.id)}">\n                <a class="non-participant-link hide-focus-outline"\n                   bb-translate-attrs="{\'aria-label\':\'{{nonParticipant.localizedNameWithoutWrap}}\'}"\n                   id="non-participant-link-{{nonParticipant.id}}"\n                   tabindex="0"\n                   href="javascript:void(0);"\n                   ng-focus="true"\n                   ng-blur="true"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipantLink.link">\n                  <bb-avatar class="non-participant-avatar" user="nonParticipant.avatarData"></bb-avatar>\n                </a>\n                <span class="byline stacked" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.localizedName)"></span>\n              </div>\n            </li>\n          </ul>\n          <label class="summary-line">{{nonParticipationSummary}}</label>\n        </div>\n        <div class="column small-12 non-participant-box clearfix" ng-if="!showLargeNonparticipantPanel">\n          <h3 class="stat-title subheader">{{barchartNonParticipants}}</h3>\n          <button class="messageAllButton button"\n                  bb-translate="components.directives.discussion.insights.messageAll"\n                  bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageAll\'}"\n                  ng-click="discussionInsights.goToMessageAll()"\n                  analytics-id="components.directives.discussion.insights.messageAll">\n            </button>\n        </div>\n      </div>\n\n      <div class="row equal-height" ng-if="displayTopComments || displayTopParticipants">\n        <div class="top-comments column {{topCommentsColumns}} student-list-box" ng-if="displayTopComments">\n          <h3 class="stat-title subheader"\n              id="most-replies-heading"\n              bb-translate="components.directives.discussion.insights.mostReplies"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-comment-row child-is-invokable"\n                 bb-click-to-invoke-child="a.discussion-link"\n                 ng-class="{\'last\':$last}"\n                 ng-repeat="comment in topComments | limitTo: numberOfCommentsToDisplay | orderBy: \'-numReplies\'">\n              <a href="javascript:void(0);"\n                 class="discussion-link"\n                 ng-click="discussionInsights.goToDiscussion(comment.user.group.id)"\n                 aria-labelledby="comment-user-{{comment.user.id}} most-replies-heading"\n                 aria-describedby="comment-message-{{comment.user.id}}\n                 comment-replies-{{comment.user.id}}"\n                 analytics-id="components.directives.discussion.insights.goToDiscussion.link">\n                <bb-avatar class="top-participant-avatar" user="comment.user.avatarData"></bb-avatar>\n                <div class="comment-info">\n                  <div class="comment-message ellipsis" id="comment-message-{{comment.user.id}}">{{comment.message}}</div>\n                  <div class="byline ellipsis">\n                    <span id="comment-user-{{comment.user.id}}">\n                      <bb-translate>components.directives.discussion.insights.by</bb-translate> {{comment.user.localizedName}}\n                      <span ng-show="isGroupDiscussion"><bb-translate>components.directives.discussion.insights.inGroup</bb-translate> {{comment.user.group.name}}</span>\n                    </span> |\n                    <span id="comment-replies-{{comment.user.id}}"> {{comment.numReplies}} <bb-translate>components.directives.discussion.insights.replies</bb-translate></span>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class="top-participants column {{topParticipantColumns}} student-list-box" ng-if="displayTopParticipants">\n          <h3 id="top-heading" class="stat-title subheader" bb-translate="components.directives.discussion.insights.topParticipants"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-participants-row child-is-invokable"\n                 bb-click-to-invoke-child="a.grading-panel-link"\n                 ng-class="{\'last\':$last, \'not-graded\': (!isGradable || isGroupDiscussion), \'group-row\':isGroupDiscussion}"\n                 ng-repeat="participant in topParticipants | limitTo: numberOfCommentsToDisplay | orderBy: \'-numComments\'">\n              <a href="javascript:void(0);"\n                 class="grading-panel-link"\n                 aria-labelledby="user-{{participant.user.id}} top-heading"\n                 aria-describedby="span-replies-{{participant.user.id}} span-feedback-{{participant.user.id}}"\n                 ng-class="{\'not-graded\': (!isGradable || isGroupDiscussion)}"\n                 ng-click="discussionInsights.goToGrade(participant.user.id)"\n                 analytics-id="components.directives.discussion.insights.goToGrade.link">\n                <bb-avatar class="comment-avatar" user="participant.user.avatarData"></bb-avatar>\n                <div class="top-participant-info ellipsis" ng-class="{\'not-graded\': !isGradable}">\n                  <span class="discussion-insights-heading" id="user-{{participant.user.id}}">{{participant.user.localizedName}}</span><br>\n                  <span class="ellipsis" ng-show="isGroupDiscussion">{{participant.user.group.name}}</span><br ng-show="isGroupDiscussion">\n                  <span class="byline" id="span-feedback-{{participant.user.id}}">\n                    <bb-svg-icon class="top-participant-icon" size="small" icon="feedback" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.feedback\'}"></bb-svg-icon>\n                    {{participant.numComments}}\n                  </span>\n                  <span class="byline" id="span-replies-{{participant.user.id}}">\n                  <bb-svg-icon class="top-participant-icon" size="small" icon="replies" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.replies\'}"></bb-svg-icon>\n                    {{participant.numReplies}}\n                  </span>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ui-view="telemetry-discussion-forum-insights-base@"></div>\n  </section>\n</div>\n'},Xc1Q:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-arrow-down",use:"icon-small-arrow-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-down"><path d="M1 4l7 7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},Xcx3:function(e,t,n){"use strict";n.r(t),n.d(t,"controllerName",(function(){return _})),n.d(t,"INCORRECT_PASSWORD_ENTERED",(function(){return F})),n.d(t,"BLANK_PASSWORD_KEY",(function(){return B})),n.d(t,"INCORRECT_PASSWORD_KEY",(function(){return N})),n.d(t,"TOO_MANY_ATTEMPTS_KEY",(function(){return q})),n.d(t,"START_PEER_REVIEW_BUTTON_KEY",(function(){return z})),n.d(t,"START_NEXT_PEER_REVIEW_BUTTON_KEY",(function(){return V})),n.d(t,"AssessmentOverviewController",(function(){return H})),n.d(t,"Controller",(function(){return U}));var i=n("D57K"),s=(n("SMOU"),n("Mak1"),n("s5UK"),n("6BRP"),n("67oV"),n("l+9M"),n("GkCm"),n("ZKRZ"),n("KXuk"),n("yCl+"),n("dpCN"),n("D1Wg"),n("2MQt"),n("JbSi"),n("TR8k"),n("6ZXc"),n("xoIb"),n("dcnw"),n("sZYy"),n("v0wN"),n("QhTW"),n("H/8/"),n("Ycix"),n("4VOk"),n("9G/E"),n("HApu"),n("zpX8"),n("zIKm"),n("nsO7")),o=n("wHJ2"),a=n("8N5j"),r=n("5MwF"),c=n("IiJs"),l=n("vdfi"),d=n("nYZ0"),u=n("Fvsw"),p=n("bF8R"),m=n("X455"),h=n("fYJU"),b=n("k9iv"),g=n("oi1r"),v=n("o5Lu"),f=n("0JpG"),y=n("p7NW"),w=n("pjml"),C=n("12mu"),S=n("YHe3"),A=n("TnpK"),k=n("+O05"),I=n("JfV0"),O=n("94SL"),D=n("Kpdw"),T=n("aHpC"),$=n("nmzr"),x=n("Sa5G"),E=n("9hUw"),P=n("94iD"),R=n("5uPl"),L=n("9ah5");n.d(t,"template",(function(){return L}));var j=n("0B2D");n.d(t,"alreadySubmittedTemplate",(function(){return j}));var G=n("217T");n.d(t,"groupAlreadySubmittedTemplate",(function(){return G}));var M=n("Fv8s");n.d(t,"assessmentTimerModalTemplate",(function(){return M}));var _="ultra.features.course.content.assessmentOverview.controller",F="bb-assessment-password-incorrect",B="course.content.assessment.overview.passwordProtected.errors.empty",N="course.content.assessment.overview.passwordProtected.errors.incorrect",q="course.content.assessment.overview.passwordProtected.errors.tooManyAttempts",z="course.content.assessment.overview.assignedPeerReviews.startPeerReviews",V="course.content.assessment.overview.assignedPeerReviews.startNextReview",H=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g,v,f,y,C,S,A,k,I,O,D,T){var $,x,E=e.call(this,t,l,d,f)||this;E.contentData=t,E.course=n,E.$injector=i,E.$ngRedux=s,E.$scope=o,E.$q=a,E.$window=r,E.contentService=c,E.context=l,E.grade=d,E.ultraState=u,E.contentGoalAlignmentPeekStateService=p,E.AttemptModel=m,E.GroupAttemptModel=h,E.errorModalService=b,E.modal=g,E.courseContent=v,E.schemaService=f,E.bbLocalize=y,E.proctoring=C,E.rubricService=S,E.collabUltra=A,E.contextUser=k,E.contextCourseMembership=I,E.assessmentService=O,E.originalityReportService=D,E.peerService=T,E.alignedGoalsCount=0,E.customCategory="",E.detailsView=!1,E.goalAlignedContents=[],E.groupUsers=[],E.hideOverview=!1,E.showGoalDetails=!1,E.showRubricDetails=!1,E.showCollabLink=!1,E.hasGroupIndicator=!1,E.hasClassIndicator=!1,E.collabUltraEnabled=!1,E.isAssessmentPasswordProtected=!1,E.givenPassword="",E.passwordErrorMessageKey="",E.isPasswordCheckInProgress=!1,E.startPeerReviewsButtonVisible=!1,E.startPeerReviewsButtonEnabled=!1,E.startNextPeerReviewButtonKey="",E.navigateNextPeerReviewCallback=null,E.localizedCourseRoles={},E.peerReviewsComponentUpdatedCallback=function(e,t,n,i,s){E.startPeerReviewsButtonEnabled=t,E.startPeerReviewsButtonVisible=(e||t)&&i<n,E.startNextPeerReviewButtonKey=i>0?V:z,E.navigateNextPeerReviewCallback=s},o.assessmentOverview=E,E.content=t.courseContent,T.setContent(E.content,!0),E.content.ui.hasConversationAttached=!!E.content.attachedForumLink,E.groupUsers=t.groupMembers,E.isAssessmentPasswordProtected=null===(x=null===($=E.content.getDeployedAssessment())||void 0===$?void 0:$.deploymentSettings)||void 0===x?void 0:x.isPasswordRequired,E.contextCourseMembership.isActAsInstructorMembership()||E.content.updateState(w.r.StateType.Started),E.startModalTranslateOptions={instructions:{pluralize:!0,params:{totalTimeLimit:Math.floor(E.displayedTimeLimitSeconds/60)},noWrap:!0,noEscape:!0}},E.registerHandlers(),E.initAssessmentResultOptions(),E.content.$fetchIfNotExpanded({expand:"alignedGoals,assignedGroups"}).$then((function(e){p.resolveGoalAlignableContentsForStudent(n,t,E.currentAttempt).then((function(e){var t=e[0],n=e[1];E.goalAlignedContents=t,E.alignedGoalsCount=n})),E.content.courseId&&E.content.assignedGroups&&E.content.assignedGroups[0]&&E.collabUltra.getCollabSessionStatus(E.content.courseId,E.content.assignedGroups[0].groupId).then((function(e){E.runningSessionFlag=e,null!==e&&(E.collabUltraEnabled=!0)}))})),E.detailsView=!!E.ultraState.params.detailsView,E.detailsView&&(E.submitToGRD=!!E.ultraState.params.submitToGRD),E.calculateKeysAndIconsBasedOnCategory(),E.safeAssignEnabled&&E.content.canStudentViewReports()&&E.getOriginalityReportStatus(),E.content.isGroupContent&&E.content.ui.hasConversationAttached&&E.content.attachedForumLink&&E.loadCollabConfig(),E.content.ui.hasConversationAttached&&E.content.attachedForumLink&&E.updateIndicators();var P=E.contentService.indicatorCacheService.$onClassConversationIndicatorRemoved((function(e,t,n){t===E.content.courseId&&n===E.content.id&&(E.hasClassIndicator=!1)})),R=E.contentService.indicatorCacheService.$onGroupConversationIndicatorRemoved((function(e,t,n){t===E.content.courseId&&n===E.content.id&&(E.hasGroupIndicator=!1)}));return o.$on("$destroy",(function(){P(),R()})),E.contentData.gradingColumn.getAssociatedRubric()&&(E.rubricViewPayload={analyticsId:"assessmentOverview",criteria:S.getCriteriaPayload(E.contentData.gradingColumn)}),E.fetchOriginalityReportProviderType(),E}return Object(i.__extends)(t,e),t.prototype.fetchOriginalityReportProviderType=function(){return this.originalityReportService.retrieveOriginalityIntegration(this.content)},Object.defineProperty(t.prototype,"latestAttemptDate",{get:function(){return this.currentAttempt&&this.currentAttempt.attemptDate},enumerable:!0,configurable:!0}),t.prototype.getMembershipByUser=function(e){return s.find(this.course.memberships,(function(t){return t.user.id===e.id}))},t.prototype.getCourseRole=function(e){return this.getLocalizedRoleNameByCourseRole(this.getMembershipByUser(e).courseRole)},t.prototype.canSendMessage=function(e){var t=this.getMembershipByUser(e);return!(this.course.isPrivate()||this.course.isComplete())&&t.isAvailable&&t.user.isAvailable},t.prototype.gotoConversation=function(e){this.ultraState.goPeekState("conversations",{courseId:this.content.courseId,contentId:this.content.id,groupId:e||"default"})},t.prototype.startNextPeerReview=function(){this.startPeerReviewsButtonEnabled&&this.navigateNextPeerReviewCallback()},t.prototype.isInactive=function(e){var t=this.getMembershipByUser(e);return!t.isAvailable||!t.user.isAvailable},t.prototype.getLocalizedRoleNameByCourseRole=function(e){var t=e.identifier.toString();if(this.localizedCourseRoles[t])return this.localizedCourseRoles[t];if(t in w.y.toBeLocalizedRoleLabels){var n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:w.y.toBeLocalizedRoleLabels[t]});return this.localizedCourseRoles[t]=n,n}return e.courseName.rawValue},t.prototype.registerHandlers=function(){var e=this;this.$scope.$on("bb-assessment-attempt-save",(function(t,n,i,s){void 0===s&&(s=!1),e.refreshAttempt(n),e.refreshGrade(),e.peerService.peerGrading&&e.peerService.loadReviewableAttempts(),e.setAttemptCountsAndDate()}))},Object.defineProperty(t.prototype,"panelTitle",{get:function(){var e=this.content.getAssociatedGradingColumn().gradebookCategory,t=e&&!e.isUserDefined;return this.detailsView?"course.content.assessment.panelHeader.details."+(t?e.title:"custom"):"course.content.assessment.type."+(t?e.title:"custom")},enumerable:!0,configurable:!0}),t.prototype.getOriginalityReportStatus=function(){var e=this,t=new Array;this.contentData.gradeDetail&&(this.content.isGroupContent&&this.currentAttempt?this.currentAttempt.originality.$fetch().$then((function(t){t.hasAttachments()?e.originalityReportAvailable=t.overallOriginalityProcessed:e.originalityReportAvailable=null})):this.contentData.gradingColumn.grades.$buildRaw(this.contentData.gradeDetail).attempts.$fetch({fields:"id,status"}).$then((function(n){var i=[];s.forEach(n,(function(e){if(e.isSubmitted()){var n=e.originality.$fetch().$asPromise().then((function(e){e.hasAttachments()?t.push(e.overallOriginalityProcessed):t.push(void 0)}));i.push(n)}})),e.$q.all(i).then((function(){t.every((function(e){return o.isUndefined(e)}))?e.originalityReportAvailable=null:e.originalityReportAvailable=t.every((function(e){return o.isUndefined(e)||!0===e}))}))})))},t.prototype.calculateKeysAndIconsBasedOnCategory=function(){var e=this.content.getAssociatedGradingColumn().gradebookCategory,t=this.course.isOrganization?"organization":"course";e&&!e.isUserDefined?(this.completedCourseKey=t+".content.assessment.overview.completedCourseNotice."+e.title,this.groupAssessmentKey="course.content.assessment.overview.group.groupAssessment."+e.title,this.classConversationFtueKey=t+".content.assessment.overview.classConversationFtue."+e.title,this.groupConversationFtueKey="course.content.assessment.overview.groupConversationFtue."+e.title):(this.customCategory=e&&e.title||this.content.isScorm()&&this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"Scorm.name"}),this.completedCourseKey=t+".content.assessment.overview.completedCourseNotice.custom",this.groupAssessmentKey="course.content.assessment.overview.group.groupAssessment.custom",this.classConversationFtueKey=t+".content.assessment.overview.classConversationFtue.custom",this.groupConversationFtueKey="course.content.assessment.overview.groupConversationFtue.custom"),this.content.isGroupContent&&this.content.ui.hasConversationAttached&&this.content.attachedForumLink&&(e&&!e.isUserDefined?(this.classConversationFtueKey=t+".content.assessment.overview.classConversationFtue."+e.title,this.groupConversationFtueKey="course.content.assessment.overview.groupConversationFtue."+e.title):(this.classConversationFtueKey=t+".content.assessment.overview.classConversationFtue.custom",this.groupConversationFtueKey="course.content.assessment.overview.groupConversationFtue.custom"))},t.prototype.refreshAttempt=function(e){this.currentAttempt=e},t.prototype.refreshGrade=function(){var e=this;this.grade.loadGrade({courseId:this.course.id,userId:this.contextUser.userId,column:this.contentData.gradingColumn,gradeQueryParams:{expand:"attemptsLeft"}},!1).then((function(t){t.ui.attempt=e.currentAttempt,e.contentData.gradeDetail=t}))},Object.defineProperty(t.prototype,"showScoreCard",{get:function(){return!this.detailsView&&this.currentAttempt&&this.currentAttempt.isSubmitted()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAfterAttemptedFooter",{get:function(){if(this.showBeforeAttemptedFooter)return!1;if(!this.hideOverview&&!this.detailsView){var e=this.allowMultipleAttempts&&0===this.unsubmittedAttemptsLeft,t=!this.allowMultipleAttempts&&this.showScoreCard;return e||t||this.contentData.gradingColumn.peerGrading&&this.startPeerReviewsButtonVisible}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showBeforeAttemptedFooter",{get:function(){return!this.hideOverview&&!this.detailsView&&(this.contentData.gradingColumn.isSingleAttempt()?!this.currentAttempt||this.currentAttempt.isInProgress():!this.contentData.gradeDetail||this.unsubmittedAttemptsLeft>0||this.isUnlimitedAttempts())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasFooter",{get:function(){return this.showBeforeAttemptedFooter||this.showAfterAttemptedFooter},enumerable:!0,configurable:!0}),t.prototype.showProctoringAdditionalNotes=function(){return this.contentData.gradingColumn.isSingleAttempt()?!this.currentAttempt||this.currentAttempt.isInProgress():!this.contentData.gradeDetail||this.unsubmittedAttemptsLeft>0||this.isUnlimitedAttempts()},Object.defineProperty(t.prototype,"isCourseOpen",{get:function(){return(!0===this.course.effectiveAvailability||!0===this.course.isAvailable)&&!1===this.course.isClosed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMultipleAttempts",{get:function(){return this.contentData.gradingColumn.isMultipleAttempts()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAttemptNumber",{get:function(){return this.currentAttempt&&this.currentAttempt.isInProgress()?this.attemptCount:this.attemptCount+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasTimeLimit",{get:function(){return this.timedDetail.hasTimeLimit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayedTimeLimitSeconds",{get:function(){return this.timedDetail.displayedTimeLimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canContinue",{get:function(){return this.timedDetail.hasExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timedDetail",{get:function(){return this.contentData&&this.contentData.courseContent?this.contentData.courseContent.getTimedTestDetail():new P.a({timerCompletion:null,timeLimitSec:null,softLimitSec:null})},enumerable:!0,configurable:!0}),t.prototype.createAttemptWithTimer=function(){var e=this;return this.navigationPreCheck()?this.retrievePasswordCheckPromise().then((function(t){t.result?e.confirmTimerModal=e.modal.open({template:M,scope:e.$scope}):e.passwordErrorMessageKey=N})).catch((function(t){var n;(null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.status)===I.HttpStatus.TooManyRequests?e.passwordErrorMessageKey=q:e.errorModalService.handleApiError(t.error)})).finally((function(){e.isPasswordCheckInProgress=!1})):this.$q.resolve()},t.prototype.retrievePasswordCheckPromise=function(){var e,t;return this.isAssessmentPasswordProtected?(this.isPasswordCheckInProgress=!0,this.$q.when(Object(I.checkPassword)(this.course.id,null===(t=null===(e=this.content.getDeployedAssessment())||void 0===e?void 0:e.assessment)||void 0===t?void 0:t.id,(new a).update(this.givenPassword).digest("hex")))):this.$q.when(Promise.resolve({result:!0}))},t.prototype.closeModal=function(e){this.confirmTimerModal.close(),e&&this.navigateAttempt()},t.prototype.navigateAttempt=function(){var e=this;if(this.navigationPreCheck())if(k.a.isExternalSubmissionsAssessment(this.content)&&this.content.id)this.ultraState.goPeekState("assessment.external-overview",{contentId:this.content.id});else{var t=this.content.isGroupContent;if(t&&this.content.assignedGroups&&0===this.content.assignedGroups.length)this.modal.open({scope:this.$scope,template:G});else{var n={type:w.d.AssessmentType.Test};this.isAssessmentPasswordProtected&&(this.isPasswordCheckInProgress=!0,n.password=(new a).update(this.givenPassword).digest("hex"));var s=this.$q.defer();if(this.content.isSecureBrowserRequiredToTake())return this.navigateSecureAttempt(n.password),void(this.isPasswordCheckInProgress=!1);var o={scoreProviderHandle:x.B.Test,status:w.C.AttemptStatus.InProgress,toolAttemptDetail:{"resource/x-bb-assessment":Object(i.__assign)({},n)}},r=t?this.GroupAttemptModel.$build(o):this.AttemptModel.$build(o);this.contentData.gradingColumn.launchAttempt(r,{},t,t?this.content.assignedGroups[0].groupId:null).then((function(n){var i,o,a;if((null===(i=n.$response)||void 0===i?void 0:i.status)===I.HttpStatus.Forbidden&&n.$response.data)"bb-rest-max-group-attempt-reached"===(r=n.$response).data.code?e.courseContent.loadContentAndGrades({course:e.course,content:e.contentData.courseContent}).then((function(t){e.currentAttempt=t.groupAttempt,s.resolve(e.currentAttempt.id)})):"bb-rest-max-group-attempt-reached-and-all-group-attempts-submitted"===r.data.code?e.showAlreadySubmittedDialog():e.errorModalService.handleApiError(r);else if((null===(o=n.$response)||void 0===o?void 0:o.status)===I.HttpStatus.Unauthorized&&n.$response.data){var r;(r=n.$response).data.code===F?e.passwordErrorMessageKey=N:e.errorModalService.handleApiError(r)}else(null===(a=n.$response)||void 0===a?void 0:a.status)===I.HttpStatus.TooManyRequests?e.passwordErrorMessageKey=q:(s.resolve(n.id),e.$scope.$root.$broadcast("bb-assessment-attempt-save",n,e.contentData.gradingColumn.id,t));e.isPasswordCheckInProgress=!1})),s.promise.then((function(t){e.content.isSecureBrowserRequiredToTake()?e.navigateSecureAttempt(n.password):e.ultraState.goPeekState("assessment.overview.attempt",{attemptId:t})}))}}},t.prototype.navigateSecureAttempt=function(e){var t=this,n={password:e,attemptId:null};this.content.getProctoringLaunchLink(n).then((function(e){t.proctoring.openProctoringModal(t.content,t.bbLocalize.getLocale(t.$scope)),t.ultraState.leavePeekState(),t.openSecureLaunchLink(e)})).catch((function(e){var n,i;(null===(n=e.data)||void 0===n?void 0:n.status)===I.HttpStatus.Unauthorized?t.passwordErrorMessageKey=N:(null===(i=e.data)||void 0===i?void 0:i.status)===I.HttpStatus.TooManyRequests?t.passwordErrorMessageKey=q:t.errorModalService.handleApiError(e)}))},t.prototype.openSecureLaunchLink=function(e){this.proctoring.openRespondusProctoringLaunchLink(e)},t.prototype.navigateAttemptReview=function(){var e=this;this.courseContent.loadContentAndGrades({course:this.course,content:this.contentData.courseContent}).then((function(t){e.currentAttempt=t.groupAttempt,e.openAttemptReview()}))},t.prototype.navigationPreCheck=function(){return!this.isPasswordCheckInProgress&&(this.passwordErrorMessageKey="",!this.isAssessmentPasswordProtected||!this.isGivenPasswordBlank||(this.passwordErrorMessageKey=B,!1))},t.prototype.showAlreadySubmittedDialog=function(){return this.modal.open({scope:this.$scope,template:j})},Object.defineProperty(t.prototype,"viewAttemptButtonLabelKey",{get:function(){var e="course.content.assessment.overview.viewSubmittedAttemptButton";return e+=this.allowMultipleAttempts?".multiple":".single"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attemptButtonLabelKey",{get:function(){var e="course.content.assessment.overview.openAttemptButton.";return e+=this.hasTimeLimit?"timed.":"notTimed.",e+=this.attemptIsInProgress?"continue":"start",e+=this.allowMultipleAttempts&&(this.hasTimeLimit||this.isAssessmentSubmissionComplete)?".multiple":""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"safeAssignEnabled",{get:function(){return this.content.isSafeAssignEnabled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attemptIsInProgress",{get:function(){return this.currentAttempt&&this.currentAttempt.isInProgress()},enumerable:!0,configurable:!0}),t.prototype.showGoals=function(){this.hideOverview=!0,this.showGoalDetails=!0},t.prototype.hideGoals=function(){this.hideOverview=!1,this.showGoalDetails=!1},t.prototype.showRubricPanel=function(){this.showRubricDetails=!0,this.hideOverview=!0},t.prototype.hideRubricPanel=function(){this.showRubricDetails=!1,this.hideOverview=!1},t.prototype.openAttemptReview=function(e){void 0===e&&(e=!1),this.contentData.gradingColumn.isMultipleAttempts()?this.ultraState.goPeekState("assessment.overview.multiple-attempt",{columnId:this.contentData.gradingColumn.id,gradeId:this.contentData.gradeDetail.id,viewOriginalityReport:e,forceOpenFeedbackPanel:!e&&this.hasFeedback()}):this.ultraState.goPeekState($.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW,{attemptId:this.currentAttempt.id,columnId:this.contentData.gradingColumn.id,viewOriginalityReport:e,forceOpenFeedbackPanel:!e&&this.hasFeedback()})},t.prototype.openSafeAssign=function(){this.ultraState.goPeekState("attempt-safe-assign-setting",{submitToGRD:this.submitToGRD})},t.prototype.loadCollabConfig=function(){var e=this;this.collabUltra.getCollabB2Info().then((function(t){200===t.$response.status?e.showCollabLink=!0:e.showCollabLink=!1}),(function(t){e.showCollabLink=!1})),!this.forumId&&this.content.attachedForumLink&&this.content.attachedForumLink["resource/x-bb-courselink"]&&this.course.contents.$find(this.content.attachedForumLink["resource/x-bb-courselink"].courseContent).$then((function(t){e.forumId=t.contentDetail["resource/x-bb-forumlink"].id}))},Object.defineProperty(t.prototype,"shouldShowCollabLink",{get:function(){return this.showCollabLink&&o.isDefined(this.forumId)&&this.collabUltraEnabled},enumerable:!0,configurable:!0}),t.prototype.launchCollabSession=function(){var e=window.open();this.collabUltra.launchDiscussionSession(this.content.courseId,this.forumId,this.content.assignedGroups[0].groupId).then((function(t){e.location.href=t.url}),(function(t){e.close(),t.$response.status=null}))},t.prototype.isSubmittedLate=function(){var e=this.latestAttemptDate;return this.aggregationModelRelevantAttemptDate&&(e=this.contentData.gradeDetail&&!this.contentData.gradeDetail.isPosted()?this.latestAttemptDate:this.aggregationModelRelevantAttemptDate),this.dueDate&&e&&this.dueDate.getTime()-e.getTime()<0&&!this.contentData.courseContent.hasDueDateException()},t.prototype.hasPastDueZero=function(){return this.contentData.gradeDetail&&this.contentData.gradeDetail.isPastDueZero()},t.prototype.showPastDueForDueDate=function(){return this.isSubmissionLate},t.prototype.hasFeedback=function(){return k.a.attemptHasFeedback(this.currentAttempt)||this.hasGroupIndividualFeedback()},t.prototype.hasGroupIndividualFeedback=function(){return!(!this.content.isGroupContent||!k.a.groupAttemptHasIndividualFeedback(this.currentAttempt))},Object.defineProperty(t.prototype,"aggregationModelDescriptionKey",{get:function(){var e=this.contentData.gradingColumn;return e&&e.aggregationModel&&D.AttemptAggregationModel.parseModel(e.aggregationModel).getStudentLabelKey()||null},enumerable:!0,configurable:!0}),t.prototype.updateIndicators=function(){var e=this;this.content&&this.contentService.fetchIndicators(this.content.courseId).then((function(){var t=e.contentService.getCourseContentCache(e.content.courseId,e.content.id);t&&(e.hasClassIndicator=t.classConversationHasIndicator,e.hasGroupIndicator=!!t.groupIds)}))},t.prototype.getProctoringBrowserText=function(){return this.proctoring.getProctoringOverviewBrowserText(this.content)},t.prototype.getProctoringRequirementsText=function(){return this.proctoring.getProctoringOverviewRequirementsText(this.content)},t.prototype.getProctoringBrowserDownloadText=function(){return this.proctoring.getProctoringOverviewDownloadText(this.content)},Object.defineProperty(t.prototype,"isPeerGrading",{get:function(){return this.peerService.peerGrading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfPeerReviewsToComplete",{get:function(){return this.peerService.numOfPeerReviewsToComplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfPeerReviewsLeft",{get:function(){return this.numOfPeerReviewsToComplete-this.completedPeerReviews},enumerable:!0,configurable:!0}),t.prototype.numberOfLatePeerReviews=function(){return this.peerService.numberOfLatePeerReviews()},Object.defineProperty(t.prototype,"completedPeerReviews",{get:function(){return this.peerService.completedPeerReviews},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peerReviewDueDate",{get:function(){return this.peerService.peerReviewDueDate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAssessmentSubmissionComplete",{get:function(){return!!(this.attemptCount&&this.attemptCount>0&&this.attemptCountSubmitted&&this.attemptCountSubmitted>0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSubmissionLate",{get:function(){return!this.isAssessmentSubmissionComplete&&this.isOverdue||this.isSubmittedLate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowLatePeerReviews",{get:function(){return this.peerService.allowLatePeerReviews},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGradingConfigured",{get:function(){return this.peerService.isPeerGradingConfigured},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasDueDateAccommodation",{get:function(){return this.contextCourseMembership.isDueDateExcepted()},enumerable:!0,configurable:!0}),t.prototype.arePeerReviewsComplete=function(){return!!r.a.features.peerAssessmentFeatureFlag&&this.completedPeerReviews===this.numOfPeerReviewsToComplete},t.prototype.isPeerReviewsLate=function(){var e=this.context.getServerTime().getTime()>this.peerReviewDueDate.getTime();return!(!this.isPeerGrading||!e||this.hasDueDateAccommodation)&&(!this.arePeerReviewsComplete()||!(0===this.numberOfLatePeerReviews()))},Object.defineProperty(t.prototype,"isGivenPasswordBlank",{get:function(){return 0===this.givenPassword.length},enumerable:!0,configurable:!0}),t.prototype.onPasswordChange=function(){this.passwordErrorMessageKey=""},Object.defineProperty(t.prototype,"deployedAssessment",{get:function(){return this.content.getDeployedAssessment()},enumerable:!0,configurable:!0}),t.prototype.initAssessmentResultOptions=function(){var e,t,n,i,s,o=this,a=null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.assessment)||void 0===t?void 0:t.hasAnswerableQuestions;if(!(!(null===(n=this.currentAttempt)||void 0===n?void 0:n.isSubmitted())||!a)){this.initAssessmentResultOptionsVisibility();var r=null===(s=null===(i=this.deployedAssessment)||void 0===i?void 0:i.deploymentSettings)||void 0===s?void 0:s.feedbackSettings,c=this.getFeedbackOptionsToDisplay(),l=c.filter((function(e){return!1===o.assessmentResultOptionsVisibilityMap[e]}));this.assessmentService.getFeedbackModeLabels(l,r).then((function(e){o.assessmentResultOptions=c.map((function(t){var n,i=o.bbLocalize.getLocale(o.$scope),s=k.d[t],a=o.bbLocalize.translateSync({key:k.e+"."+t,locale:i}),r=!0===o.assessmentResultOptionsVisibilityMap[t];if(r)n=o.bbLocalize.translateSync({key:"course.content.assessment.overview.assessmentResults.availableNow",locale:i});else{var c=l.indexOf(t);n=e[c]}return{icon:s,modeLabel:n,option:t,optionLabel:a,visible:r}}))}))}},t.prototype.getFeedbackOptionsToDisplay=function(){var e,t,n=this,i=null===(t=null===(e=this.deployedAssessment)||void 0===e?void 0:e.deploymentSettings)||void 0===t?void 0:t.feedbackSettings;return k.c.filter((function(e){var t=k.a.isFeedbackOptionEnabled(e,i),s=e===I.FeedbackOption.InstructorFeedback&&n.deployedAssessment.assessment.hasAutomatedQuestionFeedback;return t&&(e!==I.FeedbackOption.InstructorFeedback||s)}))},t.prototype.initAssessmentResultOptionsVisibility=function(){var e,t,n,i,s=this.contentData.gradingColumn.scoreProviderHandle,o=this.currentAttempt.getToolAttemptDetailItem(s),a=k.a.studentCanViewAttemptResults(this.currentAttempt),r=null==o?void 0:o.questionAttempts[0];this.assessmentResultOptionsVisibilityMap=((e={})[I.FeedbackOption.InstructorFeedback]=null!==(t=null==r?void 0:r.isFeedbackVisible)&&void 0!==t&&t,e[I.FeedbackOption.Score]=null!==(n=(null==r?void 0:r.isScoreVisible)&&a)&&void 0!==n&&n,e[I.FeedbackOption.CorrectAnswers]=null!==(i=(null==r?void 0:r.isCorrectAnswersVisible)&&a)&&void 0!==i&&i,e)},Object.defineProperty(t.prototype,"showAssessmentResults",{get:function(){var e;return!!(null===(e=this.assessmentResultOptions)||void 0===e?void 0:e.length)},enumerable:!0,configurable:!0}),t=Object(i.__decorate)([Object(i.__param)(0,Object(T.b)("contentData")),Object(i.__param)(1,Object(T.b)("currentCourse")),Object(i.__param)(2,Object(T.b)("$injector")),Object(i.__param)(3,Object(T.b)("$ngRedux")),Object(i.__param)(4,Object(T.b)("$scope")),Object(i.__param)(5,Object(T.b)("$q")),Object(i.__param)(6,Object(T.b)("$window")),Object(i.__param)(7,Object(T.b)(d.f)),Object(i.__param)(8,Object(T.b)(u.b)),Object(i.__param)(9,Object(T.b)(v.h)),Object(i.__param)(10,Object(T.b)(A.d)),Object(i.__param)(11,Object(T.b)(l.d)),Object(i.__param)(12,Object(T.b)(w.C.serviceName)),Object(i.__param)(13,Object(T.b)(w.H.serviceName)),Object(i.__param)(14,Object(T.b)(b.c)),Object(i.__param)(15,Object(T.b)(C.b)),Object(i.__param)(16,Object(T.b)(p.b)),Object(i.__param)(17,Object(T.b)(g.b)),Object(i.__param)(18,Object(T.b)(f.serviceName)),Object(i.__param)(19,Object(T.b)(S.b)),Object(i.__param)(20,Object(T.b)(y.f)),Object(i.__param)(21,Object(T.b)(c.b)),Object(i.__param)(22,Object(T.b)(h.b)),Object(i.__param)(23,Object(T.b)(m.d)),Object(i.__param)(24,Object(T.b)(k.g)),Object(i.__param)(25,Object(T.b)(R.b)),Object(i.__param)(26,Object(T.b)(E.b))],t)}(O.a),U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(H)},XjwN:function(e,t){e.exports='<div class="panel-header persistent-white-header mode-{{mode}} panel-header-directive"\n  bb-load-bundle="components/directives/panel-header"\n  ng-class="{\'is-editable\' : panelHeader.editMode,\n   \'has-slider\': hasSlider(),\n   \'can-edit\': canEdit,\n   \'has-controls\': showConversations() || showDelete() || showParticipants() || showSettings(),\n   \'has-visibility-toggle\': showVisibility()}">\n  <div class="panel-titles-container">\n    <div ng-if="showCourse()">\n      <div class="panel-sub-title js-vr-remove-random">\n        <span ng-if="::!panelHeaderTitleTranslateKey">{{panelHeader.panelHeaderTitle}}</span>\n        <span ng-if="::panelHeaderTitleTranslateKey" bb-translate>{{::panelHeaderTitleTranslateKey}}</span>\n      </div>\n    </div>\n    <div class="panel-title-texteditor">\n      <div class="editable-title-container" ng-show="!panelHeader.editMode">\n        \x3c!-- ULTRA-13692 Since there\'s already an "Edit" button, we don\'t want keyboard users to be able to focus on the title to edit it,\n             otherwise there would be two ways to edit the title, which is confusing. However, since this title has an event listener, it\'s\n             announced as "clickable" by screenreaders, so let\'s hide it with aria-hidden and add another instance of the header just for\n             screenreaders instead. --\x3e\n        <h1 class="sr-only" bb-focus="panelHeader.focusReadonlyPanelTitle()" tabindex="-1">{{panelTitle}}</h1>\n        <h1 class="panel-title secondary-title" ng-click="panelHeader.onEditMode()" tabindex="-1" aria-hidden="true"\n            ng-class="{\'student\' : !canEdit, \'is-hovered\': panelHeader.isEditButtonHovering}" title="{{panelTitle}}"\n            analytics-id="components.directives.content.panelHeader.secondaryTitle.header">{{panelTitle}}\n        </h1>\n        <button ng-if="canEdit" class="button super-clear edit-title" type="button"\n                ng-click="panelHeader.onEditMode()"\n                ng-mouseover="panelHeader.onEditButtonMouseOver()"\n                ng-mouseleave="panelHeader.onEditButtonMouseLeave()"\n                aria-label="{{ panelHeader.getAriaLabel() }}"\n                analytics-id="course.content.panelHeader.edit.button">\n          <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n        </button>\n      </div>\n      <div class="panel-title-input-container" ng-show="panelHeader.editMode" bb-click-outside="panelHeader.onBlurTitle()">\n        <input\n          name="panel-title"\n          class="panel-header-title panel-title secondary-title"\n          type="text"\n          autocapitalize="off"\n          ng-keydown="panelHeader.pressKey($event)"\n          maxlength="{{maxLength}}"\n          ng-model ="panelTitle"\n          ng-model-options="{ getterSetter: true }"\n          ng-blur="panelHeader.onBlurTitle($event)"\n          ng-change="panelHeader.onChangeTitle()"\n          bb-translate-attrs="{\'aria-label\':\'{{::panelHeader.placeholderLocalizationKey}}\'}"\n          bb-placeholder="{{::panelHeader.translatedPlaceholder}}"\n          translate-attrs-values="{{::localizationAttrsValues}}"\n          id="{{::panelHeader.getTeachingBubbleTargetElementId()}}"\n          aria-describedby="{{::panelHeader.getTeachingBubbleTooltipId()}}"\n          analytics-id="course.content.panelHeader.title.input.text"\n          >\n          <bb-ui-teaching-bubble\n            show="panelHeader.shouldShowTeachingBubble()"\n            dismiss="panelHeader.dismissTeachingBubble"\n            headline="panelHeader.getTeachingBubbleHeadline()"\n            message="panelHeader.getTeachingBubbleMessage()"\n            target-id="panelHeader.getTeachingBubbleTargetElementId()"\n            tooltip-id="panelHeader.getTeachingBubbleTooltipId()"\n            analytics-id="panelHeader.getTeachingBubbleAnalyticsId()">\n          </bb-ui-teaching-bubble>\n      </div>\n    </div>\n  </div>\n\n  <div\n    class="header-actions-menu button-group header-group"\n    ng-class="panelHeader.getButtonGroupClass()"\n    bb-first-time-container>\n    <div ng-if="showVisibility()"\n         class="action-item item-visibility"\n         ng-class="{\'visibility-selector-disabled\': !panelHeader.isVisibilitySelectorEnabled()}">\n      <bb-content-visibility-selector ng-if="content" content="content"\n                                      is-visibility-selector-enabled="panelHeader.isVisibilitySelectorEnabled()"\n                                      onchange-func="panelHeader.onChangeVisibility()"\n                                      open-panel-on-restricted="openPanelOnRestricted()"\n                                      on-restricted-selected-func="panelHeader.onRestrictedSelected()"\n                                      validation-func="panelHeader.validateVisibilityChange(visibility)"\n                                      onblur-func="panelHeader.onBlurVisibility()"\n                                      disable-restricted="disableRestricted()"\n                                      has-medium-icon="false"></bb-content-visibility-selector>\n    </div>\n\n    <div class="ally-icons" ng-if="showAllyIcon() && panelHeader.canShowAlly">\n      <div class="small-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true" icon-size="small"\n          class="ally-icon"></bb-ally-show>\n      </div>\n      <div class="medium-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true" icon-size="medium"\n          class="ally-icon"></bb-ally-show>\n      </div>\n    </div>\n\n    <div ng-if="showConversations() && content.ui.hasConversationAttached && content.attachedForumLink"\n         class="action-item conversation"\n         ui-sref-active="active">\n      <button ng-click="panelHeader.gotoConversation()"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.conversationAriaLabel\', \'title\':\'components.directives.header.conversation\'}"\n         translate-attrs-values="{\'itemTitle\':\'{{panelTitle}}\'}"\n         class="button super-clear icon open-conversation"\n         type="button"\n         bb-guidance-target component-key="components.features.course.content.assessment.ftue.class-conversation"\n         analytics-id="panel.header.conversation.visibility.button">\n        <bb-svg-icon size="medium" icon="conversation"></bb-svg-icon>\n      </button>\n    </div>\n    <div ng-if="showDelete()"\n         class="action-item delete"\n         ng-class="{\'delete-button\': showDelete() && showSettings()}"\n         ui-sref-active="active">\n      <ng-switch on="panelHeader.getDeleteDirectiveArgumentType()">\n        <bb-delete ng-switch-when="ContentOnly" extra-class="standard-button" content="content" choices="choices" analytics-id="panel.header.content.only.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDelete" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" choices="choices" analytics-id="panel.header.content.delete.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndHandler" extra-class="standard-button" content="content" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.header.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDeleteAndHandler" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.delete.handler.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="DeleteAndHandler" extra-class="standard-button" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.delete.handler.button.switch"></bb-delete>\n      </ng-switch>\n    </div>\n    <div ng-if="showParticipants()"\n         class="action-item participants"\n         ui-sref-active="active">\n      \x3c!--TODO: need add real route here --\x3e\n      <a bb-peek-sref="discussion-participants"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.participants\'}"\n         class="button super-clear icon"\n         analytics-id="components.directives.discussion.participants.link">\n        <bb-svg-icon ng-if="!content.isGroupContent" size="medium" icon="people"></bb-svg-icon>\n        <bb-svg-icon ng-if="content.isGroupContent" size="medium" icon="groups"></bb-svg-icon>\n      </a>\n    </div>\n\n    <div ng-if="showSettings() && !!settingsPeekRef"\n         class="action-item settings"\n         ui-sref-active="active">\n      <a class="button super-clear icon assessment-settings-button"\n         href="javascript:void(0);"\n         ng-class="{\'disabled\': settingsDisabled()}"\n         ng-click="panelHeader.openSettingsPanel()"\n         bb-translate-attrs="{\'aria-label\':\'{{settingsLabel}}\'}"\n         analytics-id="panel.header.open.settings.panel.link">\n        <bb-svg-icon size="medium" icon="{{::panelHeader.getSettingsIcon()}}"></bb-svg-icon>\n      </a>\n    </div>\n    <ng-transclude ng-transclude-slot="panelHeaderCustomIcons" />\n  </div>\n  <div class="panel-header-controls graded-count-wrap right" ng-if="showSubmissionsGrading()"> \x3c!-- Used on View Submission page (aka: submission details) --\x3e\n    <div class="number-graded" ng-if="showSubmissionsGrading() && summary.$resolved"\n      bb-translate="components.directives.header.submissions-grading.gradedCount.plural"\n      translate-values="{gradedCount: summary.numStudentsGraded(), totalCount: summary.numEligibleToBeGraded}">\n    </div>\n  </div>\n</div>\n'},YGwN:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("fWA+"),o="ultra.components.directives.bbUiIcon.DocumentMultiple";Object(i.a)(s.a,o,"bbUiIconDocumentMultiple")},YHe3:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return b}));var i=n("D57K"),s=n("wHJ2"),o=n("pjml"),a=n("TnpK"),r=n("Q/M7"),c=n("12mu"),l=n("0JpG"),d=n("nYZ0"),u=n("Qbdf"),p=n("OMme"),m=n("TuNX"),h="ultra.components.services.proctoring",b="proctoring",g={Respondus:"respondus"},v=function(){function t(e,t,n,i,s,o,a,r,c,l,d,u){this.$q=e,this.$rootScope=t,this.$sce=n,this.$window=i,this.CourseModel=s,this.CourseContentModel=o,this.ProctoringServicesModel=a,this.modal=r,this.contentService=c,this.contextCourse=l,this.localize=d,this.ultraState=u}return t.prototype.getBooksAndToolsDescription=function(e){return"components.services.proctoring.booksAndTools."+g[e.vendor]+".description"},t.prototype.getProctoringServices=function(){var e=this.$q.defer();return this.ProctoringServicesModel.$search({"availability.available":"Yes"}).$allow(["400-599"]).$asPromise().then((function(t){t.$response&&t.$response.status>=400?e.resolve([]):e.resolve(t)}),(function(){return e.resolve([])})),e.promise},t.prototype.getProctoringOutlineSummaryText=function(e,t){var n="components.services.proctoring.outline.";if(e.getProctoringServiceHandle()){if(e.isSecureBrowserRequiredToTake()){var i=t?".instructor":".student";return e.isWebcamRequired()?n+g[e.getProctoringServiceVendor()]+i+".secureBrowserAndWebcamRequired":n+g[e.getProctoringServiceVendor()]+i+".secureBrowserRequired"}return null}return null},t.prototype.getProctoringAssessmentSettingsText=function(e){return"components.services.proctoring.settings."+g[e]+".toolLink"},t.prototype.getProctoringAssessmentSettingsRequirementsText=function(e){var t="components.services.proctoring.settings.";return e.getProctoringServiceHandle()&&e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+g[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+g[e.getProctoringServiceVendor()]+".secureBrowserRequired":null},t.prototype.getProctoringOverviewBrowserText=function(e){return e.isSecureBrowserRequiredToTake()?"components.services.proctoring.overview."+g[e.getProctoringServiceVendor()]+".browser":null},t.prototype.getProctoringOverviewRequirementsText=function(e){var t="components.services.proctoring.overview.";return e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?t+g[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":t+g[e.getProctoringServiceVendor()]+".secureBrowserRequired":null},t.prototype.getProctoringOverviewDownloadText=function(e){return e.getProctoringDownloadUrl()?"components.services.proctoring.overview."+g[e.getProctoringServiceVendor()]+".downloadBrowser":null},t.prototype.openProctoringLTITool=function(e,t){var n="/webapps/assessment/controller/proctoring/launchProctoringSettings?proctoring_svc_id="+e.id+"&course_id="+this.contextCourse.courseId;t&&(n+="&content_id="+t.id);var i={toolHref:r.c(n)};t&&t.title&&t.title.length>0&&(i.toolSubtitle=t.title),this.ultraState.goPeekState("proctoring-lti-tool",i)},t.prototype.getProctoringReviewButtonText=function(e){return"components.services.proctoring.delivery.review."+g[e]+".reviewResults"},t.prototype.getProctoringReviewDownloadText=function(e){return"components.services.proctoring.delivery.review."+g[e]+".download"},t.prototype.getProctoringModalRequirementsText=function(e){return"components.services.proctoring.modal."+g[e]+".requirements"},t.prototype.getProctoringModalDownloadText=function(e){return"components.services.proctoring.modal."+g[e]+".download"},t.prototype.getProctoringModalBrowserText=function(e){return"components.services.proctoring.modal."+g[e]+".browser"},t.prototype.openProctoringModal=function(e,t){var n=this,i=this.ultraState.getCurrentUrlParams();setTimeout((function(){var s=n.$rootScope.$new(!0);n.proctoringModal=n.modal.open({scope:s,template:m,backdrop:"static"});var o=n.ultraState.prev.name.lastIndexOf("peek.");n.peekState=o?n.ultraState.prev.name.substr(o+5):n.ultraState.prev.name,n.proctoringModal.dismiss=n.openOverviewPeekPanel.bind(n),n.courseId=i.courseId,n.contentId=i.contentId,s.requirementsText=n.getProctoringModalRequirementsText(e.getProctoringServiceVendor()),s.downloadText=n.$sce.trustAsHtml(n.localize.translateSync({key:n.getProctoringModalDownloadText(e.getProctoringServiceVendor()),params:{downloadUrl:e.getProctoringDownloadUrl()},locale:t,noWrap:!0,noEscape:!0})),s.browserText=n.getProctoringModalBrowserText(e.getProctoringServiceVendor())}),3e3)},t.prototype.openOverviewPeekPanel=function(){this.ultraState.goPeekState(this.peekState,this.ultraState.prevParams),this.proctoringModal.close()},t.prototype.getSecureBbEditorOptions=function(e){return this.ultraState.current.name===p.a&&(e.attachment=!1,e.image=!1,e.youtubeVideo=!1,e.video=!1,e.contentMarket=!1),e},t.prototype.handleProctoredAssessmentClose=function(e){"Respondus"===e.getProctoringServiceVendor()?r.p(r.c("/ultra/proctoring/close?rldbsm=1&rldbxb=1")):this.$window.close()},t.prototype.openRespondusProctoringLaunchLink=function(t){if(e("#respondus-iframe").remove(),t.startsWith("data:text/plain,")){var n='<iframe src="data://text/plain,'+t.substring("data:text/plain,".length)+'" id="respondus-iframe" style="display:none"></iframe>';this.createRespondusIFrameAndSetLocation(n)}else this.setRespondusWindowLocation(t)},t.prototype.createRespondusIFrameAndSetLocation=function(t){document.body.appendChild(e(t)[0])},t.prototype.setRespondusWindowLocation=function(e){this.$window.location.assign(e)},t.$inject=["$q","$rootScope","$sce","$window",o.o.serviceName,o.r.serviceName,o.nb.serviceName,c.b,d.f,u.e,l.serviceName,a.d],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(v);s.module(h,["ngSanitize",d.d,l.moduleName,c.a,a.b,u.b]).service(b,v)}).call(this,n("5iHu"))},YVjP:function(e,t,n){},Ybms:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-duplicate",use:"icon-small-duplicate-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-duplicate"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 4h11v11H1z" /><path d="M12 12h3V1H4v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},Ycix:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-people",use:"icon-medium-people-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-people"><path d="M1 23c1.096-4.3157 4.5473-7 9-7s7.904 2.6843 9 7M10 16c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8zM23 12c-.2345-1.9862-2.5-4-4.5-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},Yi7M:function(e,t,n){},Ylhg:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("13AT"),o="ultra.components.directives.bbUiIcon.Lti";Object(i.a)(s.Lti,o,"bbUiIconLti")},Youf:function(e,t){e.exports='<a class="content-title" \n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}" \n   ng-click="contentItemLtiLaunch.ltiLaunch()" \n   href="javascript:void(0);"\n   analytics-id="content.item.ltilaunch.link"><span>{{ content.title }}</span></a>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && !contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.broken-link</span>\n<span class="broken-lti-link" ng-if="contentItemBase.isUnlaunchableLtiLink() && contentItemBase.ltiLinkNeedsApproval() && contentItemBase.scope.content.canViewAsInstructor()"\n      bb-translate>components.directives.content-item-base.approval-required</span>'},ZKRZ:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-conversation",use:"icon-small-conversation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-conversation"><path d="M15 4.5C15 6.433 13.433 8 11.5 8c-.4457 0-.872-.0833-1.264-.2352L8 8l.25-2.1985A3.4905 3.4905 0 018 4.5C8 2.567 9.567 1 11.5 1S15 2.567 15 4.5zM7 15c0-2-2-4-4-4M3 11c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},Zahr:function(e,t,n){},ZjTk:function(e,t,n){},ZkU4:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var i=n("D57K"),s=(n("FwJ5"),n("nsO7")),o=n("dCrD"),a=n("Oyr+"),r="show-cloud-upload-progress",c=function(e){function t(t,n,i){var s=e.call(this,t,n,i)||this;if(s.uploadFile=function(){s.saveLocationForFileUpload(),s.element.find(".file-upload").click()},s.uploadCloudFile=function(){s.saveLocationForFileUpload(),s.scope.isButtonLocationChangable&&s.scope.$emit(r,s.positionForFiles.positionAfter),s.element.find(".doc-add-media").click()},s.openContentMarket=function(){var e=s.scope.rootContent(),t=s.getInsertLocationData();s.contentSvc.getParentFolder(t.parentId,s.contextCourse.courseId,e).$then((function(e){if(e.children){var n=""+e.children.getInsertionIndex(t.positionBefore,t.positionAfter,!0,e.hasMoreChildren);s.ultraState.goPeekState("content-market",{position:n,parentId:t.parentId,positionBefore:t.positionBefore,positionAfter:t.positionAfter,depth:t.depth})}}))},s.initContextMenuItems(),n.$on("always-show-time-expires",(function(){s.turnOffAlwaysShow()})),n.isButtonLocationChangable&&n.$on("change-add-content-button-position",(function(e,t){t.reopen&&!s.isMenuVisible&&s.toggleOverflowMenu()})),n.$on(a.e,(function(e,t,i){if(i===a.c.OutlineAddContentButtonFileSelected&&t===n.fileListViewLocalId){var o=s.positionForFiles||s.getInsertLocationData();s.closeMenu(),n.$emit(a.e,o.parentId,o.positionBefore,o.positionAfter,o.depth,t,n.content,a.c.AssignDropTarget),s.assignPosition()}})),s.scope.isRenderByDefault&&s.scope.isRenderByDefault())var o=s.scope.$watch("addContentButton.isMenuVisible",(function(e){e&&(s.scope.addContentButton.removeDefaultRenderClass=!0,o())}));return s.scope.$watch("parentId()",(function(e,t){e!==t&&s.initContextMenuItems()})),s}return Object(i.__extends)(t,e),t.prototype.toggleOverflowMenu=function(){var e=this;this.initContextMenuItems().then((function(){e.toggleMenu()})).catch((function(){}))},t.prototype.initContextMenuItems=function(){var e=this,t=this.element.closest("[data-base-state-name]").data("baseStateName"),n=this.getInsertLocationData();return this.$q.all({isCloudServiceAvailable:this.isCloudServiceAvailablePromise,createHref:this.ultraState.peekHref("content-manage.create",n,t),copyHref:this.ultraState.peekHref("content-manage.copy",n,t),contentCollectionHref:this.ultraState.peekHref("content-collection",n,t)}).then((function(t){var n=e.bbLocalize.getLocale(e.scope);e.items=[{key:"create",className:"js-create",href:t.createHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.create"}),iconProps:{iconName:"add",iconSize:"small"}},{key:"copy",className:"js-copy",href:t.copyHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.copy"}),iconProps:{iconName:"duplicate",iconSize:"small"}},{key:"upload-file",className:"js-upload-file",onClick:e.uploadFile,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.upload"}),iconProps:{iconName:"upload",iconSize:"small"}},{key:"content-market",className:"js-content-market",onClick:e.openContentMarket,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.contentMarket"}),iconProps:{iconName:"content-market",iconSize:"small"}},{key:"upload-cloud-file",className:"js-upload-cloud-file",onClick:e.uploadCloudFile,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.importContentFromCloudStorage.title"}),iconProps:{iconName:"upload-cloud",iconSize:"small"}},{key:"content-collection",className:"js-content-collection",href:t.contentCollectionHref,name:e.bbLocalize.translateSync({locale:n,key:"components.directives.add-content-button.contentCollection"}),iconProps:{iconName:"content-collection",iconSize:"small"}}],e.isCloudServiceAvailable||Object(s.remove)(e.items,(function(e){return"upload-cloud-file"===e.key})),e.currentCourse.canCopy()||Object(s.remove)(e.items,(function(e){return"copy"===e.key}))}))},t.prototype.saveLocationForFileUpload=function(){this.scope.isButtonLocationChangable&&(this.positionForFiles=this.getInsertLocationData())},t.$inject=["$injector","scope","element"],t}(o.a)},ZsPj:function(e,t,n){},Zy5h:function(e,t){e.exports='<div ng-if="$ctrl.showBanner" class="group-student-enrollment-asmt-banner">\n  <bb-ui-icon-attention color="primary" class-name="attention-icon"></bb-ui-icon-attention>\n  <div class="banner-text">\n    <span bb-translate>components.directives.content.assessment.group-student-enrollment-asmt-banner.available-to-groups</span>\n    <a ng-if="$ctrl.isOpenEnrollment()" href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" analytics-id="components.directives.content.assessment.open.content.enroll.panel.link">\n      <span bb-translate>components.directives.content.assessment.group-student-enrollment-asmt-banner.enroll-to-participate</span>\n    </a>\n  </div>\n</div>\n'},a8oS:function(e,t){e.exports='<div class="content-outline" bb-load-bundle="components/directives/content/content-outline">\n  <bb-add-content-button ng-if="!hideAddMenuOverride && canCreate"\n                         can-create-all-contents="canCreateAllContents"\n                         is-render-by-default="contentOutline.parentFolder.depth === 0"\n                         show-menu-override="contentOutline.shouldShowMenuOverride()"\n                         parent-id="contentOutline.parentFolder.id" root-content="contentOutline.parentFolder"\n                         position-before="\'start\'" item-name="contents[0].title"\n                         depth="(contentOutline.parentFolder.depth + 1)"\n                         always-show="contentOutline.shouldShowAddButton()" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport">\n  </bb-add-content-button>\n  <div class="add-element" ng-if="hideAddMenuOverride && !canCreate"> </div>\n  <div ng-if="contents">\n    <div class="content-outline-scroll-container"\n         bb-infinite-scroll="contentOutline.loadMoreChildren(contentOutline.parentFolder)"\n         infinite-scroll-immediate-check="true" infinite-scroll-disabled="contentOutline.isAllContentsLoaded()"\n         infinite-scroll-container="contentOutline.getScrollContainerSelector()"\n         infinite-scroll-listen-for-event="content-outline-infinite-scroll-check"\n         infinite-scroll-current-count="contents.length" infinite-scroll-total-count="contents.paging.count"\n         infinite-scroll-load-limit="contents.paging.limit"\n         infinite-scroll-tray-id="content-outline-{{::contentOutline.parentFolder.id}}"\n         infinite-scroll-focusable-children-selector=".content-title"\n         infinite-scroll-localization-keys-prefix="components.directives.content.content-outline.infiniteScroll.{{::contentOutline.contextArea === \'discussions\' ? \'discussions\' : \'content\'}}"\n         infinite-scroll-force-show-ancestor-selector="{{::contentOutline.getScrollForceShowSelector()}}"\n         sortable-parent>\n      <div class="content-outline-scroll-list" data-parent-id="{{::contentOutline.parentFolder.id}}">\n        <div class="js-content-div drag-element"\n             ng-class="{\'is-restricted\': content.canViewAsInstructor() && content.isHiddenFromStudents(), \'last\': $last, \'has-conversation-indicator\': content.ui.hasIndicator}"\n             ng-repeat="content in contents track by contentOutline.getContentTrackingId(content)" data-content-id="{{content.id}}"\n             ng-mouseenter="contentOutline.placeAddButton(content)">\n\n          <ng-switch on="(content.isFolder() && !content.isBbPage()) || content.isLearningModule()">\n            <div ng-switch-when="true">\n              <bb-folder root-content="contentOutline.parentFolder"\n                         on-file-drop-handler="contentOutline.onFileDropHandler"\n                         on-move-handler="contentOutline.onMoveHandler"\n                         on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" contents="contents"\n                         content="content" next-content-id="contents[$index + 1].id"\n                         previous-content-id="contents[$index - 1].id"\n                         load-more-children="contentOutline.loadMoreChildren" can-create="canCreate"\n                         can-move="contentOutline.canMove" context-area="contentOutline.contextArea"\n                         can-copy-import="canCopyImport"></bb-folder>\n            </div>\n            <div ng-switch-when="false" bb-drag drag-item="::content.id" can-move="contentOutline.canMove">\n              <div ng-if="!content.isGroupContent || content.assignedGroups.length >= 0 || contentOutline.canMove">\n                <div bb-drop-handler on-file-drop-handler="contentOutline.onFileDropHandler"\n                     on-move-handler="contentOutline.onMoveHandler"\n                     on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler" content="content"\n                     root-content="contentOutline.parentFolder" next-content-id="contents[$index + 1].id"\n                     previous-content-id="contents[$index - 1].id">\n                  <div class="row collapse element-list-row js-course-skip-link-target" can-create="canCreate"\n                       can-move="contentOutline.canMove" bb-content-item-mouseover>\n                    <bb-content-item-base contents="contents" content="content" context-area="contentOutline.contextArea"\n                                          can-move="contentOutline.canMove"></bb-content-item-base>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </ng-switch>\n          <div id="add-button-placeholder{{content.id}}"\n               class="add-element-container"\n               ng-if="::canCreate">\n            <div ng-if="contentOutline.isAddContentButtonUnattached(content.id)"\n                 id="add-button-line{{content.id}}" class="add-element" tabindex="0" role="button"\n                 ng-class="{\'mobile-center-content-button\': contentOutline.isMobileDevice()}"\n                 aria-label="{{::contentOutline.getAddButtonLineLabel(content.title)}}"\n                 ng-focus="contentOutline.placeAddButton(content, true)">\n              <bb-svg-icon size="small" icon="add" class="mobile-add-content-icon" ng-if="contentOutline.isMobileDevice()"></bb-svg-icon>\n            </div>\n          </div>\n          <bb-progress\n              ng-if="contentOutline.cloudUploadInProgress[content.id]"\n              target-div="#progress{{content.id}}"\n              primary-key="\'progress\' + content.id"\n              display-results="false"\n          >\n          </bb-progress>\n        </div>\n        <div class="drag-element">\n          <div drag-item-id="{{contentOutline.placeholderContent.id}}"></div>\n          <div class="drop-placeholder" bb-drop-handler content="contentOutline.placeholderContent"\n               on-move-handler="contentOutline.onMoveHandler"\n               on-move-into-folder-handler="contentOutline.onMoveIntoFolderHandler">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- LRN-123904: For file upload content items `positionAfter` is set to `content.id` in course-outline.html. But when file upload is\n  in progress, `content.id` stays undefined. As a result `positionAfter` receives undefined.\n  `positionAfter` value is not used when `content.id` is not available. i.e.: When upload-in-progress file is very first item - `positionAfter` value is not\n  available, therefore `positionBefore` is used instead. --\x3e\n  <bb-add-content-button\n    class="movable-add-content-button movable-add-content-button-folder{{::contentOutline.parentFolder.id}}"\n    ng-hide="!contentOutline.addContentButtonLocation"\n    ng-if="::canCreate && !content.ui.importPlaceholder"\n    can-create-all-contents="canCreateAllContents"\n    content="contentOutline.addContentButtonLocation"\n    root-content="contentOutline.parentFolder"\n    is-button-location-changable="true"\n    parent-id="contentOutline.parentFolder.id"\n    position-after="contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter"\n    position-before="(contentOutline.addContentButtonLocation.id || contentOutline.addContentButtonLocation.positionAfter) ? null : contentOutline.addContentButtonLocation.positionBefore"\n    item-name="contentOutline.addContentButtonLocation.title"\n    depth="contentOutline.addContentButtonLocation.depth"\n    context-area="contentOutline.contextArea"\n    can-copy-import="canCopyImport">\n  </bb-add-content-button>\n</div>\n'},aSyE:function(e,t){e.exports='<div class="test-grading uit-submission-grading-wrapper" ng-class="{\'slide-panel-open\': grading.isSlidePanelOpen()}">\n  <div class="panel-wrap">\n    <header class="panel-header">\n      <div class="columns medium-12 large-10">\n        <h1 class="panel-title" bb-translate>course.grades.submission-grading.title</h1>\n        <button class="left-off-canvas-toggle menu-toggle"\n                analytics-id="course.grades.submissionGrading.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>course.grades.submission-grading.menu</span>\n        </button>\n      </div>\n    </header>\n    <section class="panel-content slide names-slider">\n      \x3c!-- TODO: Check if title should be editable & update can-edit & max-length --\x3e\n      <bb-panel-header\n        content="grading.column"\n        panel-title="grading.column.columnName"\n        can-edit="false"\n        show-visibility="false"\n        disable-restricted="true"\n        show-conversations="false"\n        show-course="true"\n        show-delete="false"\n        has-slider="true"\n        show-submissions-grading="::!grading.isOpenFromStudentList"\n        summary="grading.column.summary"></bb-panel-header>\n\n      \x3c!-- START slide toggle --\x3e\n      <div class="panel-content-slide-toggle slide-toogle-container" ng-if="grading.canViewAttempts">\n        \x3c!-- left arrow --\x3e\n        <div class="panel-content-left-trigger center-icon carousel-arrow"\n             ng-attr-aria-disabled="{{!grading.carouselHelper.showPrevArrow()}}"\n             ng-disabled="!grading.carouselHelper.showPrevArrow()"\n             ng-if="::!grading.isOpenFromStudentList">\n          <button ng-show="grading.carouselHelper.showPrevArrow()"\n                  bb-translate-attrs="{\'aria-label\': \'course.grades.submission-grading.previous\'}"\n                  ng-click="grading.transitionTo(-1)"\n                  analytics-id="course.grades.submissionGrading.previousSubmission.button">\n            <bb-svg-icon size="medium" icon="back-arrow" role="presentation"></bb-svg-icon>\n          </button>\n        </div>\n\n        <div class="panel-content-center-trigger single-user" ng-if="!grading.groupId && grading.isOpenFromStudentList">\n          <span class="slider-name page-title assessment-exception">\n            <bb-username user="grading.carouselHelper.currentRow.user" format="short"></bb-username>\n          </span>\n        </div>\n\n        <div class="panel-content-center-trigger single-group" ng-if="grading.groupId && grading.isOpenFromStudentList">\n          <span class="slider-name" ng-class="\'slick_title\' + grading.groupId" bb-foundation-defer>\n            <bb-multi-user-usercard ng-show="grading.carouselHelper.currentRow.group.ui.users.length"\n                                    class="group-header"\n                                    users="grading.carouselHelper.currentRow.group.ui.users"\n                                    view="\'group-users\'"\n                                    group-users-title="grading.carouselHelper.currentRow.group.title"\n                                    list-header="grading.carouselHelper.currentRow.group.ui.membersText"\n                                    selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                    selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                    user-course-availabilities="grading.userCourseAvailabilities">\n            </bb-multi-user-usercard>\n            <span bb-feature-toggle="differentiatedFeedback" remove-from-dom="true"\n                  ng-if="grading.carouselHelper.currentRow.group.ui.users.length"\n                  bb-translate\n                  translate-values="{number: grading.carouselHelper.currentRow.group.ui.users.length}">\n              course.grades.submission-grading.members.pural\n            </span>\n          </span>\n        </div>\n\n        <div class="panel-content-center-trigger" ng-show="grading.carouselHelper.ready" ng-if="::!grading.isOpenFromStudentList">\n          <ul class="names-slide" ng-if="!grading.groupId"\n              bb-carousel="grading.namesCarousel"\n              slides-to-show="3"\n              before-slide-change="grading.contentCarousel.slide($direction)"\n              responsive="[{ media: \'small-only\', options: { slidesToShow: 1 } }]"\n              support-swipe="true"\n              initial-slide="grading.carouselHelper.initialSlide">\n            <li class="no-select" bb-carousel-slide ng-repeat="row in grading.carouselHelper.rows track by $index">\n              \x3c!-- since we use lazy loading (first show 1 row, then other rows), the data of $index = 0 will change, need auto-update="true" --\x3e\n              <button class="slider-name page-title"\n                      ng-if="$visible"\n                      ng-click="grading.onCarouselLabelClick($event, $index)"\n                      analytics-id="course.grades.submissionGrading.user.button">\n                \x3c!-- Peer grading has a unique label for anonymous "Peer X", so use that in this case instead\n                of the default anonymous handled by bb-username directive --\x3e\n                <span ng-if="::grading.isPeerGradingAndAnonymousUser(row.user)"\n                      class="js-carousel-peer-username"\n                      bb-translate="course.grades.submission-grading.peer"\n                      translate-values="{peerNumber: $index + 1}"></span>\n                <bb-username ng-if="::!grading.isPeerGradingAndAnonymousUser(row.user)"\n                             user="row.user"\n                             format="short"\n                             class="ellipse username js-carousel-username"\n                             ng-attr-auto-update="{{::$index === 0}}"></bb-username>\n              </button>\n              <span class="slider-name page-title assessment-exception"\n                    ng-if="$visible">\n                <span ng-if="::grading.isPeerGradingAndAnonymousUser(row.user)"\n                      class="js-carousel-peer-username"\n                      bb-translate\n                      translate-values="{peerNumber: $index + 1}">course.grades.submission-grading.peer</span>\n                <bb-username ng-if="::!grading.isPeerGradingAndAnonymousUser(row.user)"\n                             user="row.user"\n                             format="short"\n                             class="ellipse username js-carousel-username"\n                             ng-attr-auto-update="{{::$index === 0}}"></bb-username>\n              </span>\n            </li>\n          </ul>\n          \x3c!-- Group Card --\x3e\n          <ul class="names-slide" ng-if="grading.groupId && !grading.isOpenFromStudentList"\n              bb-carousel="grading.namesCarousel"\n              slides-to-show="3" focus-on-select="true"\n              before-slide-change="grading.contentCarousel.slide($direction)"\n              prev-arrow=".panel-content-left-trigger" next-arrow=".panel-content-right-trigger" as-nav-for=".student-submission-content-wrapper"\n              responsive="[{ media: \'small-only\', options: { slidesToShow: 1 } }]"\n              initial-slide="grading.carouselHelper.initialSlide">\n            <li class="no-select group" bb-carousel-slide ng-repeat="row in grading.carouselHelper.rows track by $index">\n              <button class="slider-name page-title ellipse"\n                      ng-if="$visible"\n                      analytics-id="course.grades.submissionGrading.group.button">\n                <bdi>{{row.group.title}}</bdi>\n              </button>\n              <span class="slider-name group-title ellipse" ng-if="grading.carouselHelper.isCurrent($index)" ng-class="\'slick_title\' + grading.groupId" bb-foundation-defer>\n                <bb-multi-user-usercard ng-show="grading.carouselHelper.currentRow.group.ui.users.length"\n                                        users="grading.carouselHelper.currentRow.group.ui.users"\n                                        view="\'group-users\'"\n                                        group-users-title="row.group.title"\n                                        list-header="grading.carouselHelper.currentRow.group.ui.membersText"\n                                        selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                        selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                        user-course-availabilities="grading.userCourseAvailabilities">\n                </bb-multi-user-usercard>\n                \x3c!-- Group submissions sub title --\x3e\n                <span bb-feature-toggle="differentiatedFeedback" remove-from-dom="true"\n                      ng-if="grading.carouselHelper.currentRow.group.ui.users.length"\n                      bb-translate\n                      translate-values="{number: grading.carouselHelper.currentRow.group.ui.users.length}">\n                  course.grades.submission-grading.members.pural\n                </span>\n              </span>\n            </li>\n          </ul>\n        </div>\n\n        \x3c!-- right arrow --\x3e\n        <div class="panel-content-right-trigger center-icon carousel-arrow"\n             ng-attr-aria-disabled="{{!grading.carouselHelper.showNextArrow()}}"\n             ng-disabled="!grading.carouselHelper.showNextArrow()"\n             ng-if="::!grading.isOpenFromStudentList">\n          <button ng-show="grading.carouselHelper.showNextArrow()"\n                  bb-translate-attrs="{\'aria-label\': \'course.grades.submission-grading.next\'}"\n                  ng-click="grading.transitionTo(1)"\n                  analytics-id="course.grades.submissionGrading.nextSubmission.button">\n            <bb-svg-icon size="medium" icon="forward-arrow" role="presentation"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n      \x3c!-- END slide toggle --\x3e\n\n      \x3c!-- submission content: single slide slick navigated by slick toggle above --\x3e\n      <div class="student-submission-content-wrapper" ready="{{grading.carouselHelper.ready}}" ng-show="grading.carouselHelper.ready"\n           bb-sliding="grading.contentCarousel"\n           after-sliding="grading.carouselHelper.updateSlide(grading.namesCarousel.currentSlide)"\n      >\n        <div class="slider-submission-content">\n            <div class="slider-bar-container" ng-if="grading.canRenderSubmission()"\n                 ng-switch="::grading.column.isMultipleAttempts() || grading.hasExceptionAttempts"\n                 ng-class="::{\'grading-bar-double\': grading.column.isMultipleAttempts() || grading.hasExceptionAttempts}">\n\n              <div class="grading-bar-wrapper">\n                \x3c!-- final score  & attempt grading bars for multiple attempt assessment --\x3e\n                <bb-grading-bar ng-switch-when="true"\n                                is-exception-attempt="grading.hasExceptionAttempts"\n                                is-privileged="true"\n                                column="::grading.column"\n                                grade-detail="grading.carouselHelper.currentRow.grade"\n                                user="grading.carouselHelper.currentRow.user"\n                                on-update="grading.afterGradingBarUpdate(newGrade)"\n                                on-delete="grading.afterGradingBarDelete()"\n                                has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                                hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"></bb-grading-bar>\n                <div ng-switch-when="true">\n                  <bb-grading-bar\n                    is-exception-attempt="grading.hasExceptionAttempts"\n                    is-privileged="true"\n                    disable-feedback-buttons="!grading.column.isScorm()"\n                    disable-rubric-action="!grading.column.isScorm()"\n                    column="grading.column"\n                    attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                    attempt-index="{{grading.getAttemptIndex(grading.carouselHelper.currentRow)}}"\n                    user="grading.carouselHelper.currentRow.user"\n                    save-as-override="grading.saveAsOverride"\n                    has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                    on-update="grading.afterGradingBarUpdate(newGrade)"\n                    on-delete="grading.afterGradingBarDelete()"\n                    hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"\n                    show-comment="!grading.isSlidePanelOpen()"\n                    show-overflow-menu="grading.showOverflowMenu()">\n                  </bb-grading-bar>\n                </div>\n\n                \x3c!-- grading bar for single attempt assessment --\x3e\n                <div ng-switch-default>\n                  \x3c!-- grading bar for non-peer single attempt assessments --\x3e\n                  <bb-grading-bar ng-if="!grading.isPeerGrading()"\n                                  is-exception-attempt="grading.hasExceptionAttempts"\n                                  is-privileged="true"\n                                  disable-feedback-buttons="!grading.column.isScorm()"\n                                  disable-rubric-action="!grading.column.isScorm()"\n                                  row="grading.carouselHelper.currentRow"\n                                  column="::grading.column"\n                                  grade-detail="grading.carouselHelper.currentRow.grade"\n                                  attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                                  user="grading.carouselHelper.currentRow.user"\n                                  on-update="grading.afterGradingBarUpdate(newGrade)"\n                                  on-delete="grading.afterGradingBarDelete()"\n                                  save-as-override="grading.saveAsOverride"\n                                  has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                                  hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"\n                                  show-comment="!grading.isSlidePanelOpen()"\n                                  show-overflow-menu="grading.showOverflowMenu()"\n                                  selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                  selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                  user-list="grading.carouselHelper.currentRow.group.ui.users"\n                                  user-course-availabilities="grading.userCourseAvailabilities"></bb-grading-bar>\n\n                  \x3c!-- grading bar for peer assessments --\x3e\n                  <bb-grading-bar ng-if="grading.isPeerGrading()"\n                                  is-exception-attempt="grading.hasExceptionAttempts"\n                                  is-privileged="true"\n                                  disable-feedback-buttons="!grading.column.isScorm()"\n                                  disable-rubric-action="!grading.column.isScorm()"\n                                  row="grading.carouselHelper.currentRow"\n                                  column="::grading.column"\n                                  peer-review-progress="::grading.getPeerReviewProgress()"\n                                  on-feedback-icon-click="::grading.onFeedbackIconClick()"\n                                  disable-feedback-input="::grading.disableFeedbackInput()"\n                                  grade-detail="grading.carouselHelper.currentRow.grade"\n                                  attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                                  user="grading.carouselHelper.currentRow.user"\n                                  on-update="grading.afterGradingBarUpdate(newGrade)"\n                                  on-delete="grading.afterGradingBarDelete()"\n                                  save-as-override="grading.saveAsOverride"\n                                  has-due-date-accommodation="grading.carouselHelper.currentRow.hasDueDateException"\n                                  hide-grade="grading.slideoutPanelService.isRubricState() && grading.isSlidePanelOpen()"\n                                  show-comment="!grading.isSlidePanelOpen()"\n                                  show-overflow-menu="grading.showOverflowMenu()"\n                                  selected-user="grading.carouselHelper.currentRow.group.ui.submittedUser"\n                                  selected-text="{{grading.carouselHelper.currentRow.group.ui.submittedDate}}"\n                                  user-list="grading.carouselHelper.currentRow.group.ui.users"\n                                  user-course-availabilities="grading.userCourseAvailabilities"></bb-grading-bar>\n                </div>\n              </div>\n\n              \x3c!-- assessment specific submission content --\x3e\n              <div class="slider-bar-content" ng-if="!grading.column.isScorm()" ng-switch="grading.isExternalSubmissions">\n                <div class="slider-bar-content-attempt" ng-switch-when="true">\n                  <bb-external-submission-canvas\n                    attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                    class="slider-bar-content-attempt"\n                    has-rubric-association="grading.column.hasRubricAssociation()"\n                    questions="::grading.getQuestionsForAttempt()"\n                    is-any-question-editing="grading.isAnyQuestionEditing"\n                    use-navigation="true"\n                  ></bb-external-submission-canvas>\n                </div>\n                <div class="slider-bar-content-attempt" ng-switch-default>\n                  <bb-attempt-canvas-with-navigation attempt="grading.getAttempt(grading.carouselHelper.currentRow)"\n                                                     has-rubric-association="grading.column.hasRubricAssociation()"\n                                                     class="submission-grading-attempt-canvas-with-navigation slider-bar-content-attempt"\n                                                     graded-question-attempts="grading.gradedQuestionAttempts"\n                                                     canvas-type="\'grade\'"\n                                                     is-any-question-editing="grading.isAnyQuestionEditing"\n                                                     score-provider-handle="grading.getScoreProviderHandle()"\n                                                     ng-if="grading.getAttempt(grading.carouselHelper.currentRow) && !grading.getAttempt(grading.carouselHelper.currentRow).isInProgress() && grading.getAttempt(grading.carouselHelper.currentRow).toolAttemptDetail">\n                  </bb-attempt-canvas-with-navigation>\n                </div>\n              </div>\n\n              <div ng-if="grading.column.isScorm() && grading.attemptDetail" id="scorm-report">\n                <bb-scorm-submission\n                  submission-detail="grading.attemptDetail"\n                  class-average-time="grading.classAverageTime"\n                  is-organization="grading.course.isOrganization">\n                </bb-scorm-submission>\n              </div>\n            </div>\n\n            <div class="is-empty-page is-empty-fade angular-animate" ng-if="!grading.isLoading && grading.carouselHelper.currentRow.hasNoSubmissions()">\n              <div class="is-empty-wrapper">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/delete-illustration.svg" bb-translate bb-translate-attrs="{\'alt\':\'course.grades.submission-grading.attemptDeleted\'}"/>\n                  <h1 class="is-empty-heading js-grading-attempt-deleted" bb-translate>course.grades.submission-grading.attemptDeleted</h1>\n                </div>\n              </div>\n            </div>\n        </div>\n\n      </div>\n\n      <div class="spinner bb-secondary-color-2" ng-if="grading.isLoading" aria-hidden="true"></div>\n    </section>\n  </div>\n\n  <div ui-view="submission-grading-peek"></div>\n  <footer ng-if="grading.showPeerSaveSubmitButtons()"  class="submit-footer panel-footer show-on-full autosave-footer">\n    <div class="panel-footer-right equal-buttons buttons-2 save-and-submit">\n      <button\n        ng-click="grading.saveFeedback()"\n        ng-class="{disabled: !grading.isFeedbackDirty}"\n        ng-disabled="!grading.isFeedbackDirty"\n        class="button button--secondary js-save-draft-button"\n        analytics-id="assessment.feedbackAuthoring.components.feedbackBody.content.primaryFeedback.graderFeedback.feedbackEditor.saveAndClose"\n        bb-translate>course.content.assessment.footer.buttons.saveAndClose</button>\n      <button class="button js-send-draft-button"\n        ng-click="grading.submitFeedback()"\n        ng-class="{disabled: grading.isFeedbackEmpty}"\n        ng-disabled="grading.isFeedbackEmpty"\n        analytics-id="assessment.feedbackAuthoring.components.feedbackBody.content.primaryFeedback.graderFeedback.feedbackEditor.submit"\n        bb-translate>course.content.assessment.footer.buttons.submit</button>\n    </div>\n  </footer>\n</div>\n<div class="hide"\n     bb-confirmation-needed="x-bb-close-without-saving"\n     show-type="always"\n     modal-name="submission-question-regrading"\n     ng-click="grading.closeWithoutSaving()"\n     analytics-id="course.grades.submission-grading.confirmClose"\n    ></div>\n<div class="hide"\n    bb-confirmation-needed="x-bb-save-changes"\n    show-type="always"\n    modal-name="assessment-feedback-save-changes"\n    other-choice-action="grading.doSlide()"\n    ng-click="grading.doSlide(true)"\n    analytics-id="course.content.assessment.assessmentFeedback.saveChanges"\n></div>\n'},aTRN:function(e,t,n){"use strict";var i=n("D57K"),s=n("pjml"),o=n("aHpC"),a=n("nbDY"),r=n.n(a),c=n("4GL6"),l=n("0JpG"),d=n("oi1r"),u=n("TnpK"),p=n("Qbdf"),m=n("X455"),h=n("nsO7"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Multiple=new t("multiple-conditions"),t.Performance=new t("performance"),t.ForcedSequence=new t("forced-sequence"),t.Date=new t("date"),t.None=new t("none"),t}(r.a),g=function(){function e(e,t,n,i,s,o,a){var r=this;this.localizeService=e,this.schemaService=t,this.courseModel=n,this.contextCourse=i,this.contextCourseMembership=s,this.scope=a,this.isPerformanceConditionInvalid=!1,this.role=h.memoize((function(){return r.contextCourseMembership.courseMembership&&r.contextCourseMembership.courseMembership.isActAsInstructorMembership()?"instructor":"student"})),this.courseId=i.courseId?i.courseId:o.params.courseId}return e.prototype.getConditions=function(e,t,n){this.content=e;var i=e.adaptiveReleaseRules&&e.adaptiveReleaseRules.rules;if(i&&i.length||e.isForcedSequenceModule())if(this.getConditionType(i),this.getPerformanceCriteria()?this.getPerformanceCondition(t,n):this.performanceToolTips=null,this.getDateCriteria()?this.getDateCondition():this.dateToolTips=null,e.isForcedSequenceModule()&&this.contextCourseMembership.courseMembership.isActAsInstructorMembership()||e.isForcedSequenceItem()){var s=e.isForcedSequenceModule()?"module":"item";e.isForcedSequenceItem()&&0===e.position&&(s="first-"+s),this.forcedSequenceTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.content-item-base.conditionalRelease."+this.role()+"-forced-sequence-"+s+"-tooltip",noWrap:!0,noEscape:!0}),this.updatetooltipScope()}else this.forcedSequenceTips=null},e.prototype.getConditionType=function(e){e&&e[0]&&e[0].criteria&&(this.allCriteria=e[0].criteria);var t=this.getPerformanceCriteria(),n=this.getDateCriteria(),i=this.content&&(this.content.isForcedSequenceModule()||this.content.isForcedSequenceItem()),s=[t,n,i].filter((function(e){return!!e})).length;this.conditionType=s>=2?b.Multiple.toString():t?b.Performance.toString():n?b.Date.toString():i?b.ForcedSequence.toString():b.None.toString()},e.prototype.getPerformanceCriteria=function(){return this.getCriteriaByType("Grade_Range")||this.getCriteriaByType("Grade_Range_Percentage")},e.prototype.getDateCriteria=function(){return this.getCriteriaByType("Date_Range")},e.prototype.getCriteriaByType=function(e){return this.allCriteria&&this.allCriteria.find((function(t){return t.type===e}))},e.prototype.getPerformanceCondition=function(e,t){var n=this;this.gradeCriteria=this.getPerformanceCriteria();var i=this.gradeCriteria&&this.gradeCriteria.minScore,o=this.gradeCriteria&&this.gradeCriteria.maxScore,a=this.gradeCriteria&&this.gradeCriteria.gradeColumnId,r="",c="";if(!a||t){var l="components.directives.content-item-base.conditionalRelease."+this.role()+"-missing-column-error";return this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:l,noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!0,void this.updatetooltipScope()}this.courseModel.$new(this.courseId||this.content.courseId).gradebook.columns.$find(a).$allow([403]).$then((function(t){if(t.$response&&403===t.$response.status)return n.performanceToolTips=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),key:"components.directives.content-item-base.conditionalRelease.student-missing-column-error",noWrap:!0,noEscape:!0}),n.isPerformanceConditionInvalid=!0,void n.updatetooltipScope();var a="components.directives.content-item-base.conditionalRelease."+n.role()+"-lock-tooltip";a+=void 0===o?"-common":i===o?"-equal":"-custom";var l=e||t&&t.columnName;n.schemaService.loadSchemas(n.courseId).then((function(e){var d=e&&e.find((function(e){return e.id===t.gradingSchemaId}))||{};n.gradeCriteria&&"Grade_Range"===n.gradeCriteria.type&&(void 0!==o||s.I.ScaleType.Score.isEqualTo(d.scaleType)||s.I.ScaleType.Complete.isEqualTo(d.scaleType))&&(r=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:i||0},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0}),c=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:o||t.possible},key:"components.directives.content-item-base.conditionalRelease.point.plural",noWrap:!0,noEscape:!0})),n.gradeCriteria&&"Grade_Range_Percentage"===n.gradeCriteria.type&&(void 0!==o||s.I.ScaleType.Percent.isEqualTo(d.scaleType)?(r=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:i||0},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0}),c=n.localizeService.translateSync({locale:n.localizeService.getLocale(n.scope),params:{score:o||t.possible},key:"components.directives.content-item-base.conditionalRelease.percentage",noWrap:!0,noEscape:!0})):s.I.ScaleType.Tabular.isEqualTo(d.scaleType)&&(d.symbols.sort((function(e,t){return e.absoluteTranslation-t.absoluteTranslation})),d.symbols.forEach((function(e){e.absoluteTranslation>=i&&(i=e.symbol,r=i)})))),n.getPerformanceToolTips(a,r,c,l)}))}))},e.prototype.getDateCondition=function(){if(this.dateCriteria=this.getDateCriteria(),this.dateCriteria){var e=null;this.dateCriteria.start&&this.dateCriteria.end?e="both":this.dateCriteria.start?e="showon":this.dateCriteria.end&&(e="hideafter");var t="components.directives.content-item-base.conditionalRelease."+this.role()+"-"+e+"-date-tooltip";this.dateToolTips=e&&this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:t,params:{showon:new Date(this.dateCriteria.start),hideafter:new Date(this.dateCriteria.end)},noWrap:!0,noEscape:!0}),this.updatetooltipScope()}},e.prototype.getPerformanceToolTips=function(e,t,n,i,s){void 0===s&&(s=""),this.performanceToolTips=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:e,params:{minScore:t,maxScore:n,title:i},noWrap:!0,noEscape:!0}),this.isPerformanceConditionInvalid=!1,this.updatetooltipScope()},e.prototype.updatetooltipScope=function(){angular.isUndefined(this.tooltipScope)&&(this.tooltipScope=this.scope.$new(!0)),this.tooltipScope.items=[],this.performanceToolTips&&(this.tooltipScope.items.push(this.performanceToolTips),this.isPerformanceConditionInvalid)?this.tooltips=this.performanceToolTips:(this.dateToolTips&&this.tooltipScope.items.push(this.dateToolTips),this.forcedSequenceTips&&this.tooltipScope.items.push(this.forcedSequenceTips),this.tooltips=this.tooltipScope.items.join(" "))},e.prototype.getConditionalReleaseComplexTooltipTemplate=function(){return c.a("conditional-release-tooltip")},e=Object(i.__decorate)([Object(i.__param)(0,Object(o.b)(l.serviceName)),Object(i.__param)(1,Object(o.b)(d.b)),Object(i.__param)(2,Object(o.b)(s.o.serviceName)),Object(i.__param)(3,Object(o.b)(p.e)),Object(i.__param)(4,Object(o.b)(m.d)),Object(i.__param)(5,Object(o.b)(u.d)),Object(i.__param)(6,Object(o.b)("scope"))],e)}();t.a=g},aZnd:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-time",use:"icon-medium-time-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-time"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12 5v7l4 4M10 14l-3 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},afiT:function(e,t){e.exports='<div class="question-answer-container matching-attempt-review">\n  <bb-rich-text-editor\n    plugin-options="editorPluginOptions"\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    is-read-only="true">\n  </bb-rich-text-editor>\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    hide-correctness-text="::!assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    class="matching-attempt-review__question-correctness">\n    <bb-translate\n      ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n      translate-values="{correctCount: assessmentQuestion.viewHelper.correctPairCount, totalCount: assessmentQuestion.viewHelper.totalPairCount}">\n      components.directives.assessment-question.matching.review.correct-answer-count.plural\n    </bb-translate>\n  </bb-question-answer-status>\n  <bb-matching-attempt\n    answers="assessmentQuestion.viewHelper.questionAttempt.question.answers"\n    given-answers="assessmentQuestion.viewHelper.questionAttempt.givenAnswers"\n    prompts="assessmentQuestion.viewHelper.questionAttempt.question.prompts"\n    show-results="assessmentQuestion.canShowCorrectAnswerRelatedDetail()"\n  >\n  </bb-matching-attempt>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n  />\n</div>\n'},ap1t:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return y}));var i=n("D57K"),s=(n("Q6Ow"),n("wHJ2")),o=n("en1n"),a=n("0JpG"),r=n("Fvsw"),c=n("X/qj"),l=n("yMoE"),d=n("pjml"),u=n("TnpK"),p=n("g66W"),m=n("fYJU"),h=n("ooAF"),b=n("nmzr"),g=n("aHpC"),v="ultra.components.directives.grade.displayGradePill",f="--",y="na",w=function(){function e(e,t,n,i,s,a,r,c,d){var u=this;this.$injector=e,this.$sce=t,this.scope=n,this.element=i,this.bbLocalize=s,this.context=a,this.ultraState=r,this.gradebookPermissionService=c,this.contextUser=d,this.colorCss="";var p=this.scope.column()&&this.scope.column().courseId;this.bundlePromise=s.loadBundle("components/directives/grade/display-grade"),this.canViewGradebook=this.hasViewGradebook(p),this.isStudent=d.userModel.isStudent(),this.canViewGrades=this.hasViewGrades(p),this.canViewGrades?(this.scope.$watch("::column()",(function(e){if(e)u.scope.$watchGroup(["attempt()","grade()"],(function(){var e=u.scope.attempt&&u.scope.attempt(),t=u.scope.grade&&u.scope.grade(),n=u.gradeDisplayItem=u.$injector.instantiate(l.a,{gradeDetail:t,scope:u.scope});n.init(u.scope.column()).then((function(){var i;u.schema=n.schema,u.schema&&(u.scaleType=n.schema.scaleType),e?i=e.displayGrade:t&&u.schema&&(i=t.displayGrade),n.displayGrade=i,u.setFullDisplayValue()}))}))})),this.scope.$watch((function(){return o.d()}),(function(){u.displayValue&&u.setFullDisplayValue()}))):(this.displayValue=f,this.colorCss=y)}return e.prototype.hasViewGradebook=function(e){return this.gradebookPermissionService.canView(e)},e.prototype.hasViewGrades=function(e){return this.isStudent||this.gradebookPermissionService.canViewGrades(e)},e.prototype.shouldShowPendingForGrade=function(){var e=this.scope.grade;return e&&e()&&!e().isPosted()&&e().hasAttempts()},e.prototype.shouldShowPendingForAttempt=function(){var e=this.scope.attempt;return e&&e()&&e().isNeedsGrading()},e.prototype.shouldRenderInlineRubric=function(){var e=this.scope.grade;return this.rubricEvaluationIsComplete()||this.shouldShowPendingForGrade()||this.shouldShowPendingForAttempt()||e().isPastDueZero()},e.prototype.setNoSubmitView=function(){var e=this;this.schema&&this.scaleType&&(d.I.ScaleType.Percent.isEqualTo(this.scaleType)?this.displayValue=f+" %":d.I.ScaleType.Score.isEqualTo(this.scaleType)?this.bundlePromise.then((function(){e.displayValue=f+e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.display-grade.total",params:{total:e.scope.grade&&e.scope.grade()&&e.scope.grade().pointsPossible||e.scope.column().possible},noWrap:!0})})):this.displayValue=f)},e.prototype.setFullDisplayValue=function(){var e=this;this.displayValue=this.gradeDisplayItem&&this.gradeDisplayItem.displayValue,this.gradeDisplayItem.displayValue?(this.shouldShowPossiblePoints()?this.bundlePromise.then((function(){e.displayValue=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.display-grade.score",params:{grade:e.gradeDisplayItem.displayValue,possible:e.scope.grade&&e.scope.grade().pointsPossible||e.scope.column().possible},noWrap:!0,noEscape:!0})})):this.displayValue=this.gradeDisplayItem.displayValue,this.colorCss=this.gradeDisplayItem.getGradeColor()):this.isStudent&&(this.shouldShowPendingForGrade()||this.shouldShowPendingForAttempt())?(this.colorCss=y+" pending",this.bundlePromise.then((function(){e.displayValue=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.display-grade.pending-grade",noWrap:!0})}))):(this.colorCss=this.isStudent?y+" no-attempt":"",this.setNoSubmitView())},Object.defineProperty(e.prototype,"cursorClass",{get:function(){return this.scope.cursor?"cursor-"+this.scope.cursor:""},enumerable:!0,configurable:!0}),e.prototype.shouldShowPossiblePoints=function(){return!this.isSmallBP()&&this.gradeDisplayItem&&this.gradeDisplayItem.shouldShowTotalPoints()},e.prototype.isSmallBP=function(){return o.a.Small.isEqualTo(o.c())},e.prototype.shouldShowRubricButton=function(){return!(this.scope.hideRubricIcon||!this.scope.column()||!this.scope.column().hasRubricAssociation())&&(!(!this.scope.column().isDiscussion()&&!this.scope.column().isJournal())||(null!=this.scope.attempt||!(!(this.scope.column().isSingleAttempt()&&this.scope.grade()&&this.scope.grade().ui.attempt)||d.C.AttemptStatus.InProgress.isEqualTo(this.scope.grade().ui.attempt.status))))},e.prototype.rubricEvaluationIsComplete=function(){var e=this.scope.column();if(e&&e.hasRubricAssociation()){var t=this.scope.attempt?this.scope.attempt():this.scope.grade().ui.attempt;return e.getRubricAssociation().isWithEvaluations&&(t&&t.isCompleted()||e.isDiscussion()||e.isJournal())}return!1},e.prototype.openRubricEvaluation=function(e){if(!this.scope.disableRubricEvalClick||!this.scope.disableRubricEvalClick()){e.stopPropagation();var t=this.getRubricStateRef();this.ultraState.current.name.endsWith("peek.assessment-submission-feedback")&&this.ultraState.leavePeekState(this.ultraState.current.name),this.ultraState.goPeekState(t.state,t.args)}},e.prototype.getRubricStateRef=function(){var e,t;(this.scope.grade||this.scope.attempt)&&(e=this.scope.attempt?this.scope.attempt().id:null,this.scope.grade&&this.scope.grade().ui&&this.scope.grade().ui.attempt&&this.scope.grade().ui.attempt.id&&(e=this.scope.grade().ui.attempt.id||this.scope.grade().ui.attempt.groupAttemptId),t=this.scope.attempt?this.scope.attempt().groupId:null,this.scope.grade&&this.scope.grade().ui.groupAttempt&&(t=this.scope.grade().ui.groupAttempt.groupId));var n={state:"",args:{attemptId:e||null,columnId:this.scope.column().id||null,contentId:this.scope.column().contentId||null,courseId:this.scope.column().courseId}},i="inline-rubric";if(this.scope.isManualStatusPosted||this.gradeDisplayItem.displayValue&&"0"!==this.gradeDisplayItem.displayValue||this.scope.isExternalSubmission||this.scope.column().isCollectExternalSubmissions()||(i=this.shouldRenderInlineRubric()?"inline-rubric":"peek.rubric-view"),this.canViewGradebook||this.scope.column().isDiscussion()||this.scope.column().isJournal()){var s=this.rubricEvaluationIsComplete()?"rubric-evaluation":"rubric-view";n.args.groupId=t||null,n.args.userId=this.scope.grade&&this.scope.grade().user&&(this.scope.grade().user.$pk||this.scope.grade().user.id)||null,n.state=s,this.scope.column().isDiscussion()&&(n.state="discussion.view.with-grading.peek."+s),this.scope.column().isJournal()&&(n.state=this.rubricEvaluationIsComplete()?b.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_EVALUATION:b.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_VIEW)}else n.args.groupId=t||null,n.state=b.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+"."+i;return p.e(this.ultraState.current.name,".peek.course.grades")&&(this.scope.column().isCollectExternalSubmissions()?(n.state=b.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW+".inline-rubric",n.args.skipTransitionEvents=!0):n.state="assessment.overview"),n},e=Object(i.__decorate)([Object(i.__param)(0,Object(g.b)("$injector")),Object(i.__param)(1,Object(g.b)("$sce")),Object(i.__param)(2,Object(g.b)("scope")),Object(i.__param)(3,Object(g.b)("element")),Object(i.__param)(4,Object(g.b)(a.serviceName)),Object(i.__param)(5,Object(g.b)(r.b)),Object(i.__param)(6,Object(g.b)(u.d)),Object(i.__param)(7,Object(g.b)(c.b)),Object(i.__param)(8,Object(g.b)(m.b))],e)}(),C=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=h,this.scope={attempt:"&?",column:"&",disableRubricEvalClick:"&?",grade:"&?",isManualStatusPosted:"<?",cursor:"@?",hideRubricIcon:"=?",isExternalSubmission:"=?",rubricStateOverride:"@?"},this.link=function(e,n){if(!e.attempt&&!e.grade)throw new Error("An attempt or grade must be included on scope");if(e.attempt&&e.grade)throw new Error("An attempt or grade should be included on scope, not both");if(!e.column)throw new Error("A column must be included on scope");e.displayGradePill=t.$injector.instantiate(w,{scope:e,element:n})}}return e.$inject=["$injector"],e}();s.module(v,[d.Q,c.a]).directive("bbDisplayGradePill",["$injector",function(e){return e.instantiate(C)}])},bBUr:function(e,t,n){},bVj5:function(e,t,n){},bhWV:function(e,t,n){"use strict";n("Sq3Z"),n("1NX5"),n("uAJz");var i=n("wHJ2"),s=n("wy9x"),o=n("ga7A"),a=n("Is+C"),r=n("yV5t"),c="ultra.components.directives.content.contentItem.contentItemType.contentItemScormlaunch",l=function(){function e(e,t){this.scope=e,this.scormService=t}return e.prototype.scormLaunch=function(){if(!this.scope.content.isScorm())throw new Error("Attempted to launch a non-SCORM content item. "+this.scope.content.contentHandler.toString());this.scormService.scormLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0})},e.$inject=["scope",a.c],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=r,this.scope=!1,this.link=function(e,n,i){e.contentItemScormLaunch=t.$injector.instantiate(l,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[a.b]).directive("bbContentItemScormlaunch",["$injector",function(e){return e.instantiate(d)}]);var u=n("z+6U"),p=n("jhBu"),m=n("YHe3"),h=n("TnpK"),b=n("pjml"),g=n("/R3n"),v=n("Sa5G");n.d(t,"a",(function(){return f}));var f="ultra.components.directives.content.contentItem.contentItemCourseOutline",y=function(){function e(e,t,n,i){var s=this;this.scope=e,this.entitlementService=t,this.proctoringService=n,this.ultraState=i,this.customCategory="",this.entitlementService.hasCourseEntitlement(v.f.ModifyContent,this.scope.content.courseId).then((function(e){s.entitledToModifyContent=e}))}return Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.shouldAlignMiddle=function(){var e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))},e.prototype.openConditionalRelease=function(){if(!this.isCourseCompletedAndInInstructorView()){var e=this.scope.content.id;this.scope.content&&this.scope.content.contentHandler&&this.scope.content.contentDetail&&b.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.getLinkContentSource().$then((function(t){e=t.id})),this.ultraState.goPeekState("conditional-release",{id:e})}},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()},e.prototype.getExtraRequirementsSummary=function(){return this.proctoringService.getProctoringOutlineSummaryText(this.scope.content,this.entitledToModifyContent)},e.$inject=["scope",p.b,m.b,h.d],e}(),w=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=g,this.scope=!1,this.link=function(e){if(e.contentItemCourseOutline=t.$injector.instantiate(y,{scope:e}),e.content.getAssociatedGradingColumn()){var n=e.content.getAssociatedGradingColumn().gradebookCategory;n&&!n.isUserDefined?(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+n.title,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+n.title):(e.contentItemCourseOutline.customCategory=n&&n.title,e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description.custom",e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title.custom")}else e.contentItemBase.courseLinkContentHandler.isEqualTo(e.content.contentHandler)&&(e.contentItemCourseOutline.groupAssessmentFtueKey="components.directives.content-item-base.group-assessment-description."+b.E.GradeCategoryTitleEnum.Discussion,e.contentItemCourseOutline.groupAssessmentFtueTitleKey="components.directives.content-item-base.group-assessment-title."+b.E.GradeCategoryTitleEnum.Discussion)}}return e.$inject=["$injector"],e}();i.module(f,[s.a,o.a,u.a,c,m.a,h.b]).directive("bbContentItemCourseOutline",["$injector",function(e){return e.instantiate(w)}])},"bs/4":function(e,t){e.exports='<bb-modal id="confirm-time-up-modal"\n          modal-title-key="course.content.assessment.test.modal.confirmTimeUpAlert.title"\n          class="notification hide-x-button"\n          bb-focus="true"\n          analytics-id-tag-prefix="course.content.assessment.test.modal.confirmTimeUpAlert">\n  <div name="modal-contents">\n    <p bb-translate ng-if="::!assessmentAttempt.hasUploadsInProgress">\n      course.content.assessment.test.modal.confirmTimeUpAlert.body\n    </p>\n    <p bb-translate ng-if="::assessmentAttempt.hasUploadsInProgress">\n      course.content.assessment.test.modal.confirmTimeUpAlert.cancelUploads\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">\n    global.ok\n  </button>\n</bb-modal>\n'},c2Z8:function(e,t){e.exports='<div class="bb-statistics">\n  <ul class="statistics-list total-items-{{::statistics.total}} small-per-row-{{::statistics.smallPerRow}} large-per-row-{{::statistics.largePerRow}}">\n    <li ng-repeat="item in statistics.config">\n      <div class="statistics-item-container" ng-class="{\'no-default-padding\': item.noDefaultPadding, \'full-height\': !item.complexScope}">\n        <div class="stat-title" ng-attr-title="{{ item.hover ? item.hover : undefined }}" bb-translate>{{::item.title}}</div>\n        <div ng-if="::!item.complexScope" bb-simple-statistic item="::item"></div>\n        <div ng-if="::item.complexScope" bb-complex-statistic item="::item"></div>\n      </div>\n    </li>\n  </ul>\n</div>'},"c7N/":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("D57K"),s=n("Fvsw"),o=n("jhBu"),a=n("aHpC"),r=n("Sa5G"),c="ultra.components.services.unsafe-html",l="unsafe-html",d=function(){function e(e,t){this.contextService=e,this.entitlementService=t}return e.prototype.hasEditUnsafeHtmlPermission=function(){return this.entitlementService.hasCourseEntitlement(r.H.Modify)},e.prototype.isAlternateDomainConfigured=function(){return this.contextService.getSystemInfo().alternateDomainConfigured},e.prototype.canEditUnsafeHtml=function(){var e=this;return this.hasEditUnsafeHtmlPermission().then((function(t){return t&&e.isAlternateDomainConfigured()}))},e=Object(i.__decorate)([Object(i.__param)(0,Object(a.b)(s.b)),Object(i.__param)(1,Object(a.b)(o.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(d);angular.module(c,[s.a,o.a]).service(l,d)},"cH+F":function(e,t){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.colorClass || \'na\'}} overall-grade"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target"\n       ng-class="{\'defaultCursor\': displayGrade.cursorDefault}">\n    <span ng-if="!displayGrade.noGradeToDisplay()" class="sr-only" bb-translate>{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}</span>\n    <span ng-if="!overallGradePeekSref" class="value">{{displayGrade.fullDisplayGrade}}</span>\n    <a class="overall-grade value" \n       ng-if="overallGradePeekSref" \n       bb-peek-sref="{{overallGradePeekSref}}"\n       analytics-id="components.directives.grade.display-grade.overallGrade.link">\n      {{displayGrade.fullDisplayGrade}}\n    </a>  \n  </div>\n</div>\n'},cH8o:function(e,t){e.exports='<div id="{{::bbmlEditor.bbmlEditorId}}" class="freeform-response-editor js-bbml-editor">\n  <div class="element-list-row">\n    <bb-rich-text-editor\n      ng-model="bbmlEditor.bbML.rawText"\n      is-read-only="true"\n      plugin-options="{attachment: true}"\n    ></bb-rich-text-editor>\n  </div>\n</div>\n'},cMgu:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("3yh1"),o="ultra.components.directives.bbUiIcon.LearningModule";Object(i.a)(s.LearningModule,o,"bbUiIconLearningModule")},cR84:function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.grades.settings.categorySettings.deleteAlert.title\'}"\n          modal-title-key="course.grades.settings.categorySettings.deleteAlert.title"\n          analytics-id-tag-prefix="course.grades.settings.categorySettings.deleteAlert">\n  <div name="modal-contents">\n    <bb-translate>course.grades.settings.categorySettings.deleteAlert.content</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$dismiss()" \n          class="button js-primary-button"\n          analytics-id="course.grades.settings.categorySettings.deleteAlert.ok.button">\n    <span bb-translate="course.grades.settings.categorySettings.deleteAlert.ok-button"></span>\n  </button>\n</bb-modal>'},cbVV:function(e,t,n){"use strict";(function(e){n.d(t,"l",(function(){return f})),n.d(t,"k",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return C})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return A})),n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return I})),n.d(t,"g",(function(){return O})),n.d(t,"h",(function(){return D})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return $}));var i=n("D57K"),s=n("nsO7"),o=n("yC9S"),a=n("Sa5G"),r=n("jhBu"),c=n("o5Lu"),l=n("X/qj"),d=n("vhkR"),u=n("Is+C"),p=n("Mc6f"),m=n("8jzW"),h=n("hkqm"),b=n("TnpK"),g=n("dF44"),v=function(){function t(e,t,n,i,s,o,r,c,l,d,u,p,m,h,b,g){var v=this;this.rootScope=e,this.gridData=t,this.data=n,this.headerTemplate=i,this.cellTemplate=s,this.columnWidth=o,this.position=r,this.border=c,this.ltiService=l,this.entitlementService=d,this.gradeService=u,this.gradebookPermissionService=p,this.scormService=m,this.scoreProviderHelper=h,this.toast=b,this.ultraState=g,this.id=n.id;var f=this.getCourse().id;this.entitlementService.hasCourseEntitlement(a.j.DeleteAssessment,f).then((function(e){v.canDeleteAssessment=e})),this.entitlementService.hasCourseEntitlement(a.f.DeleteContent,f).then((function(e){v.canDeleteContent=e})),this.entitlementService.hasCourseEntitlement(a.j.ModifyAssessment,f).then((function(e){v.canModifyAssessment=e})),this.entitlementService.hasCourseEntitlement(a.f.ModifyContent,f).then((function(e){v.canModifyContent=e})),this.entitlementService.hasCourseEntitlement(a.j.ViewAssessment,f).then((function(e){v.canViewAssessment=e})),this.entitlementService.hasCourseEntitlement(a.f.ViewAsDesigner,f).then((function(e){v.canViewContentDesigner=e}))}return t.prototype.getCourse=function(){return this.gridData.course},t.prototype.hasContextMenuOptions=function(){return this.isScorm()||this.canView()||this.gradeService.canPostGrades(this.gridData.course,this.data)||this.data.isQuestionAnalysisAvailable()&&this.canViewQuestionAnalysis()||this.canDelete()},t.prototype.isAssessment=function(){return a.B.Test.isEqualTo(this.data.scoreProviderHandle)},t.prototype.canView=function(){return!this.data.scoreProviderHandle||(this.isAssessment()?this.canViewAssessment:this.canViewContentDesigner)},t.prototype.canEdit=function(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canModifyAssessment:this.canModifyContent:this.gradebookPermissionService.canModify())},t.prototype.canDelete=function(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canDeleteAssessment:this.canDeleteContent:this.gradebookPermissionService.canModify())},t.prototype.deleteColumn=function(){throw new Error("Unsupported operation exception")},t.prototype.deleteColumnFromGridData=function(){this.gridData.deleteColumn(this)},t.prototype.getConfirmationMessage=function(){throw new Error("Unsupported operation exception")},t.prototype.viewOrEdit=function(){if(a.B.PartnerCloud.isEqualTo(this.data.scoreProviderHandle))this.ltiService.ltiLaunch({courseId:this.data.courseId,contentId:this.data.contentId,linkType:a.g.PartnerCloud,linkRefId:this.data.linkId});else{var e=this.data.scoreProviderHandle;e&&!this.scoreProviderHelper.supportsOverall(e)||(this.scoreProviderHelper.supportsExternalEdit(e)?this.ltiService.ltiEditColumn(this.data):this.openEditState())}},t.prototype.canViewQuestionAnalysis=function(){return this.gradebookPermissionService.canViewGrades()},t.prototype.openQuestionAnalysisOverview=function(){throw new Error("Unsupported operation exception")},t.prototype.hasDownloads=function(){return a.B.Test.isEqualTo(this.data.scoreProviderHandle)},t.prototype.canDownloadAll=function(){return!1},t.prototype.openDownloadAll=function(){this.ultraState.goPeekState("grades-bulk-download",{columnId:this.id})},t.prototype.previewScorm=function(){this.isScorm()&&this.scormService.scormLaunch({courseId:this.data.courseId,contentId:this.data.contentId,showPreLaunchPanel:!1})},t.prototype.openEditState=function(){throw new Error("Unsupported operation exception")},t.prototype.postGrades=function(){var e=this;this.data.postReadyGrades().then((function(){return e.toast.show({messageKey:"components.directives.grade.grid.gradesPosted",icon:"icon-check",toastStatus:"success"}),e.data.anonymousGrading?e.data.$fetch().$asPromise().then((function(){return e.data.summary.$fetch().$asPromise()})):e.data.summary.$fetch().$asPromise()})).then((function(){e.gridData.updateColumnByMetadata(e.data)&&e.rootScope.$broadcast(g.b.COLUMN)}))},t.prototype.isShowSummary=function(){return!0},t.prototype.isScorm=function(){return this.data&&this.data.isScorm()},t.prototype.onClick=function(){},t.prototype.triggerDelete=function(t){t.target===t.currentTarget&&(e(t.target).find("a").click(),t.preventDefault(),t.stopPropagation())},t.prototype.getMetadata=function(){return this.data},t.prototype.filterByColumId=function(e){return e.indexOf(this.id)>-1},t.prototype.filterByCategoryId=function(e){return!!this.data.gradebookCategory&&e.indexOf(this.data.gradebookCategoryId)>-1},t}(),f=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){return e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this}return Object(i.__extends)(t,e),t.prototype.addBorder=function(){this.border=!0},t.prototype.deleteBorder=function(){this.border=!1},t.prototype.filterByColumId=function(e){return!0},t.prototype.filterByCategoryId=function(e){return!0},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,b.d],t}(v),y=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g,v){var f=e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,b,g,v)||this;return f.notationService=h,f.gradeNotations=[],f.loadNotation(),f}return Object(i.__extends)(t,e),t.prototype.loadNotation=function(){var e=this;this.notationService.getGradeNotationsMap(this.gridData.course.id,!0).then((function(t){e.gradeNotations=t}))},t.prototype.openEditState=function(){this.ultraState.goPeekState("gradebook-item.overall-grade",{columnId:this.id,gradeitemView:"details"})},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.prototype.getConfirmationMessage=function(){return"x-bb-grade-calculation"},t.prototype.filterByColumId=function(e){return!0},t.prototype.filterByCategoryId=function(e){return!0},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,p.b,m.c,h.b,b.d],t}(v),w=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){return e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this}return Object(i.__extends)(t,e),t.prototype.refreshAffectedColumns=function(){var e=this;this.findAffectedColumns().forEach((function(t){return e.gridData.updateColumnByMetadata(t.data)}))},t.prototype.findAffectedColumns=function(e){var n=this;void 0===e&&(e=[]);var i=s.differenceBy(this.gridData.getColumns().filter((function(e){return e instanceof t&&e.isAffected(n)})),e,"id"),o=s.unionBy([],i,"id");return e=s.unionBy(i,e,"id"),i.forEach((function(t){o=s.unionBy(o,t.findAffectedColumns(e),"id")})),o},t}(v),C=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){return e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this}return Object(i.__extends)(t,e),t.prototype.isAffected=function(e){var t=this.data.calculatedFormula&&this.data.calculatedFormula.aliases;return!s.isUndefined(t)&&(!s.isUndefined(s.findKey(t,(function(t){return t===e.id})))||!s.isUndefined(s.findKey(t,(function(t){return e.data.gradebookCategory&&t===e.data.gradebookCategory.id}))))},t.prototype.openEditState=function(){this.ultraState.goPeekState("gradebook-item.calculation",{columnId:this.id,gradeitemView:"details"})},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.prototype.getConfirmationMessage=function(){return"x-bb-grade-calculation"},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,b.d],t}(w),S=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){var v=e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this;return v._affectedColumnsBeforeEdit=[],v}return Object(i.__extends)(t,e),t.prototype.getConfirmationMessage=function(){return"x-bb-grade-column"},t.prototype.stashAffectedColumnsBeforeEdit=function(){this._affectedColumnsBeforeEdit=this.findAffectedColumns()},Object.defineProperty(t.prototype,"affectedColumnsBeforeEdit",{get:function(){return this._affectedColumnsBeforeEdit},enumerable:!0,configurable:!0}),t.prototype.isAffected=function(e){return!1},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,b.d],t}(w),A=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){return e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this}return Object(i.__extends)(t,e),t.prototype.openEditState=function(){this.stashAffectedColumnsBeforeEdit(),this.ultraState.goPeekState("grade-item.edit",{id:this.id})},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,b.d],t}(S),k=function(e){function t(t,n,i,s,a,r,c,l,d,u,p,m,h,b,g,v){var f=e.call(this,t,n,i,s,a,r,c,l,d,u,p,m,h,b,g,v)||this;return f.checkIfAttendanceRecordsExist(),o.b.OnRootScope(t,"$stateChangeSuccess",(function(e,t,n,i){i.name.indexOf("attendance")>=0&&f.checkIfAttendanceRecordsExist()})),f}return Object(i.__extends)(t,e),t.prototype.canDelete=function(){return e.prototype.canDelete.call(this)&&this.showAttendanceDeleteOption},Object.defineProperty(t.prototype,"canBePost",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.openEditState=function(){this.stashAffectedColumnsBeforeEdit();var e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,m.a.GoToState)},t.prototype.deleteColumn=function(){this.data.forceDelete()},t.prototype.checkIfAttendanceIsAvailable=function(){if(this.gridData.course.tools){var e=this.gridData.course.tools.getToolById("bb-attendance");if(e&&e.toolEnabledSetting.isAvailable)return!0}return!1},t.prototype.checkIfAttendanceRecordsExist=function(){var e=this;this.showAttendanceDeleteOption=!1,this.checkIfAttendanceIsAvailable()&&this.gridData.course.attendanceRecordsExist().then((function(t){e.showAttendanceDeleteOption=!t}))},t}(S),I=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){return e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this}return Object(i.__extends)(t,e),t.prototype.canDownloadAll=function(){return(!this.data||!this.data.anonymousGrading)&&this.gradebookPermissionService.canViewBulkDownload()},t.prototype.openEditState=function(){this.stashAffectedColumnsBeforeEdit();var e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,m.a.GoToState)},t.prototype.deleteColumn=function(){this.rootScope.$broadcast("bb-delete-column",this.data)},t.prototype.openQuestionAnalysisOverview=function(){this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.data.contentId})},t.$inject=["$rootScope","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,b.d],t}(S),O=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g,v){var f=e.call(this,t,i,s,o,a,r,c,l,d,u,p,m,h,b,g,v)||this;return f.groups=n,f._userIdGroupIdMap={},f.initializeUserIdGroupIdMap(),f}return Object(i.__extends)(t,e),t.prototype.initializeUserIdGroupIdMap=function(){var e=this,t=this.gridData.getColumnIdGroupsMap()[this.id];s.isEmpty(t)||t.forEach((function(t){var n=e.gridData.getGroupIdUserIdMap()[t.groupId];s.isEmpty(n)||n.forEach((function(n){e._userIdGroupIdMap[n]=t.groupId}))}))},t.prototype.canDownloadAll=function(){return!1},Object.defineProperty(t.prototype,"userIdGroupIdMap",{get:function(){return this._userIdGroupIdMap},enumerable:!0,configurable:!0}),t.prototype.getGroupById=function(e){return s.find(this.groups,(function(t){return t.groupId===e}))},t.$inject=["$rootScope","groups","gridData","data","headerTemplate","cellTemplate","columnWidth","position","border",d.c,r.b,c.h,l.b,u.c,m.c,h.b,b.d],t}(I),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(O),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(O),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(I)}).call(this,n("5iHu"))},cghv:function(e,t){e.exports=' <div class="assigned-peer-reviews row collapse">\n  <div class="small-12 columns title">\n    <h2 bb-translate>course.content.assessment.overview.assignedPeerReviews.title</h2>\n  </div>\n   <div class="columns description">\n     <span bb-translate\n           translate-values="{datetime: assignedPeerReviews.submissionDueDate}">course.content.assessment.overview.assignedPeerReviews.description.{{assignedPeerReviews.getDescriptionTextKey()}}</span>\n   </div>\n  <div class="columns list">\n    <ul class="row">\n      <li ng-repeat="peerReview in assignedPeerReviews.peerReviews track by $index" class="item">\n        <div ng-class="{disabled: !assignedPeerReviews.isPeerReviewPeriodOpen}">\n          <span ng-switch on="assignedPeerReviews.getPeerReviewStatus(peerReview)">\n            \x3c!-- We set aria-hidden=true on these icons because they are always accompanies by user visible text for the state --\x3e\n            <bb-svg-icon ng-switch-default class="peer-review-icon disabled" size="small" aria-hidden="true" icon="lock"></bb-svg-icon>\n            \x3c!-- peer review not started --\x3e\n            <bb-svg-icon ng-switch-when="NotStarted" class="peer-review-icon disabled" size="small" aria-hidden="true" icon="unlocked"></bb-svg-icon>\n            \x3c!-- peer review late --\x3e\n            <bb-svg-icon ng-switch-when="PastDue" class="peer-review-icon past-due" size="small" aria-hidden="true" icon="attention"></bb-svg-icon>\n            \x3c!-- peer review started--\x3e\n            <bb-svg-icon ng-switch-when="Started" class="peer-review-icon" size="small" aria-hidden="true" icon="started"></bb-svg-icon>\n            \x3c!-- peer review complete --\x3e\n            <bb-svg-icon ng-switch-when="Completed" class="peer-review-icon completed" size="small" aria-hidden="true" icon="complete"></bb-svg-icon>\n          </span>\n          <div ng-if="assignedPeerReviews.isPeerReviewDisabled(peerReview)"\n               ng-switch on="assignedPeerReviews.getPeerReviewStatus(peerReview)"\n               class="disabled">\n            <span class="peer-review-number"\n                  bb-translate\n                  translate-values="{peerReviewIndex: {{$index + 1}}}">course.content.assessment.overview.assignedPeerReviews.submissionLabel</span>&nbsp;\n            <span ng-switch-when="NotStarted" class="peer-review-status not-started" bb-translate>course.content.assessment.overview.assignedPeerReviews.start</span>\n            <span ng-switch-default class="peer-review-status unavailable" bb-translate>course.content.assessment.overview.assignedPeerReviews.unavailable</span>\n          </div>\n          <a ng-if="!assignedPeerReviews.isPeerReviewDisabled(peerReview)"\n             ng-switch on="assignedPeerReviews.getPeerReviewStatus(peerReview)"\n             analytics-id="course.content.assessment.peer.assessment.peer.review.button"\n             ng-click="assignedPeerReviews.navigateToPeerReview($index)"\n             href="javascript:void(0);">\n            <span class="peer-review-number"\n                  bb-translate\n                  translate-values="{peerReviewIndex: {{$index + 1}}}">course.content.assessment.overview.assignedPeerReviews.submissionLabel</span>&nbsp;\n            \x3c!-- peer review late --\x3e\n            <span ng-switch-when="PastDue" class="peer-review-status past-due" bb-translate>course.content.assessment.overview.pastDue</span>\n            \x3c!-- peer review started--\x3e\n            <span ng-switch-when="Started">\n              <span bb-translate class="peer-review-status started"\n                    ng-if="!assignedPeerReviews.isPeerReviewSaved(peerReview)">course.content.assessment.overview.assignedPeerReviews.started</span>\n              <span bb-translate class="peer-review-status saved"\n                    ng-if="assignedPeerReviews.isPeerReviewSaved(peerReview)"\n                    translate-values="{datetime: peerReview.attemptLastGradedDate}">course.content.assessment.overview.assignedPeerReviews.draft</span>\n            </span>\n            \x3c!-- peer review complete --\x3e\n            <span ng-switch-when="Completed">\n              <span class="peer-review-status completed" ng-class="{\'vertical-bar\' : assignedPeerReviews.isPeerReviewLate(peerReview) }" bb-translate>course.content.assessment.overview.assignedPeerReviews.complete</span>\n              <span ng-if="assignedPeerReviews.isPeerReviewLate(peerReview)" class="peer-review-status late" bb-translate>course.content.assessment.overview.late</span>\n            </span>\n          </a>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n'},cpZm:function(e,t,n){"use strict";var i=n("D57K"),s=n("wHJ2"),o=n("ERkP"),a=n("8unJ"),r=n("1ZbL"),c=n("tN4z"),l=n("TUnR"),d=n("MC1S"),u=n("uDfI"),p=n("JfV0"),m="ultra.components.services.gradebookListViewTabs",h=function(e){var t=e.onChange,n=e.value,s=e.tabs,a=e.localize,r=e.analyticsId,m=e.ftue,h=o.useState(),b=h[0],g=h[1],v=Object(u.useDispatch)(),f=Object(l.useShowGuidance)(null==m?void 0:m.componentKey)[0];return o.createElement("div",{className:"gradebook-list-view-tabs"},o.createElement(c.AnalyticsJssThemeProvider,null,o.createElement(c.AnalyticsTabs,{onChange:t,value:n,analyticsId:r+".gradebook.listViewTabs"},s&&s.map((function(e){var t={analyticsId:r+".gradebook.listViewTab."+e.id,className:"js-gradebook-tab-"+e.id,key:e.id,value:e.id,label:a.translate(e.displayKey)};return e.id===(null==m?void 0:m.targetId)&&(t.innerRef=g),o.createElement(c.AnalyticsTab,Object(i.__assign)({},t))}))),f&&b&&o.createElement(l.GuidanceTeachingBubble,{componentKey:m.componentKey,onDismiss:function(){v(p.actions.userPreference.persistUserPreference({key:m.componentKey,value:"1"}))},targetElement:b,headline:a.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceHeader"),calloutProps:{directionalHint:d.DirectionalHint.bottomAutoEdge},analyticsId:r+".ftue"},a.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceBody"),o.createElement(c.AnalyticsPrimaryButton,{analyticsId:r+".gradebook.PrimaryButton",className:"ftue-action",onClick:function(){v(p.actions.userPreference.persistUserPreference({key:m.componentKey,value:"1"})),m.action()}},a.translate("components.directives.grade.course-grades-grader.views.studentListViewGuidanceTry")))))},b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return o.createElement(h,Object(i.__assign)({},this.props))},t}(o.Component),g={Class:Object(a.localizedComponentWrapper)(b),attributes:["analyticsId"],bindingNames:["value","onChange","tabs","ftue"],renderLocalized:!0,withProvider:!0};s.module(m,[]).component("bbUiGradebookListViewTabs",Object(r.a)(g));n("+Zd/");var v=n("aHpC");n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w}));var f="ultra.components.directives.gradebookListViewTabs",y={id:"assignments",ariaLabel:"components.directives.grade.course-grades-grader.views.gradableItemsListView",displayKey:"components.directives.grade.course-grades-grader.views.gradableItemsListViewTabLabel"},w={id:"students",ariaLabel:"components.directives.grade.course-grades-grader.views.studentListView",displayKey:"components.directives.grade.course-grades-grader.views.studentListViewTabLabel"},C=[y,w],S="students",A="ftue.grades.grader.studentlistview",k='<bb-ui-gradebook-list-view-tabs\n                            value="gradebookListViewTabs.scope.selectedTab"\n                            on-change="gradebookListViewTabs.onTabChange"\n                            tabs="gradebookListViewTabs.tabs"\n                            ftue="gradebookListViewTabs.ftue">\n                      </bb-ui-gradebook-list-view-tabs>',I=function(){function e(e){var t=this;this.scope=e,this.onTabChange=function(e,n){var i=t.tabs.find((function(e){return e.id===n}));t.scope.onTabChanged&&t.scope.onTabChanged(i.id),t.scope.$apply()},this.tabs=C,this.ftue={componentKey:A,targetId:S,action:function(){t.scope.onTabChanged(S)}}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(v.b)("scope"))],e)}(),O=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=k,this.scope={onTabChanged:"<?",selectedTab:"="},this.link=function(e){e.gradebookListViewTabs=t.$injector.instantiate(I,{scope:e})}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(v.b)("$injector"))],e)}();angular.module(f,[m]).directive("bbGradebookListViewTabs",["$injector",function(e){return e.instantiate(O)}])},cs5G:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var i=n("D57K"),s=n("nsO7"),o=n("t3aq"),a=n("Qbdf"),r=n("X455"),c=n("HAJP"),l=n("0JpG"),d=n("5MwF"),u=n("WSu0"),p=n("Q/M7"),m=n("pjml"),h=n("aHpC"),b=n("6fZB"),g="ultra.service.ally",v="ally",f=function(){function e(e,t,n,i,s,o,a,r){var c=this;this.$q=e,this.$timeout=t,this.$interval=n,this.allyModel=i,this.contextCourse=s,this.contextCourseMembership=o,this.bbLocalize=a,this.bbScriptLoader=r,this.cachedTokensMap=new Map,this._mockCourses={},this._xythosIdToContentIdMap={},this._xythosIdToInstructorFeedbackUpdateCallbackMap=new Map,this.getToken=function(e){var t=e?c._xythosIdToContentIdMap[e]:void 0;return c.cachedTokensMap.has(e)&&Date.now()<c.cachedTokensMap.get(e).exp?c.$q.resolve(c.cachedTokensMap.get(e).token):c.allyModel.getAllyToken(c.contextCourse.courseId,t).then((function(t){var n=c.getExpireMillisFromToken(t),i={bearer:t.authToken};return c.cachedTokensMap.set(e,{token:i,exp:n}),i}))}}return e.prototype.getAllySettings=function(){var e=this;return this._allyConfig?this.$q.resolve(this._allyConfig):this.allyModel.getAllyConfig().then((function(t){return e._allyConfig=t}))},e.prototype.getExpireMillisFromToken=function(e){return 1e3*u(e.authToken).exp},e.prototype.isAvailable=function(){return this.getAllySettings().then((function(e){return e.serviceAvailable}))},e.prototype.getXythosIdFromContentFileUrl=function(e){var t=/(?:xid|_xy)-([^&]*)/.exec(e),n=t&&t[1];return n&&"_"!==n.substr(0,1)&&(n="_"+n),n},e.prototype.getXythosIdFromContentItem=function(e){var t=s.get(e,"contentDetail['resource/x-bb-file'].file.permanentUrl");if(t)return this.getXythosIdFromContentFileUrl(t)},e.prototype.isAllySupportedContentItem=function(e){return e.isFile()&&!e.isConditionalReleaseLocked()},e.prototype.disable=function(){this._allyConfig?this._allyConfig.serviceAvailable=!1:this._allyConfig={serviceAvailable:!1}},e.prototype.ensureAlly=function(){var e=this,t=this,n=this.$q.defer();return this.ally?n.resolve():this.getAllySettings().then((function(i){if(i.serviceAvailable){var s,o=!1,a=function(t,i){o||(t?n.resolve():(e.disable(),i&&console.error(i),n.reject()),o=!0,e.$timeout.cancel(s))};s=e.$timeout((function(){a(!1,"Ally initialization timed out.  Disabling Ally Service.")}),d.a.allyInitializationTimeout||1e4),e.bbScriptLoader.getScript(i.javascriptUrl,{attributes:{"data-ally-loader":""},exports:"ally"}).then((function(e){t.ally=e;try{t.ally.ready((function(){a(!0)}))}catch(e){console.error(e),a(!1,"Ally initialization error.  Disabling Ally Service.")}})).catch((function(){a(!1,"Failed to load ally.js.  Disabling Ally Service.")}))}else n.resolve()})),n.promise},e.prototype.getRole=function(){return this.contextCourseMembership.isActAsInstructorMembership()?"privileged":"unprivileged"},e.prototype.destroyCurrentAllyInstance=function(){this.cachedTokensMap.clear();var e=this.$q.defer();return this._xythosIdToInstructorFeedbackUpdateCallbackMap.clear(),this.allyUI?this.allyUI.destroy().then((function(){e.resolve()})):e.resolve(),e.promise},e.prototype.ensureAllyUI=function(e){var t=this;if(this.allyLoadInProgressPromise)return this.allyLoadInProgressPromise;var n=this.$q.defer();return this.allyLoadInProgressPromise=n.promise,this.ensureAlly().then((function(){t.getAllySettings().then((function(i){if(!i.serviceAvailable||t.currentCourseId===t.contextCourse.courseId&&t.currentLocale===t.bbLocalize.getLocale(e))t.allyLoadInProgressPromise=void 0,n.resolve();else{t.currentCourseId!==t.contextCourse.courseId&&(t._xythosIdToContentIdMap={}),t.currentCourseId=t.contextCourse.courseId,t.currentLocale=t.bbLocalize.getLocale(e);var s={client:{auth:t.getToken.bind(t),baseUrl:p.i(i.ltiUrl),clientId:i.clientId},courseId:t.currentCourseId,locale:t.currentLocale,platformName:"learn",role:t.getRole(),instructorfeedback:{callbacks:{closed:function(){t.allyUI.client.clearAllFromCache(),t.allyUI.update()},deleted:function(e){},replacedFile:function(e,t){},updated:function(e){t.instructorFeedbackUpdateCallback(e)}}}};d.a.features.devtools_allyMock&&(t.allyMock=t.ally.ui.$mock(t._mockCourses,void 0),s.client.jQuery=t.allyMock),t.destroyCurrentAllyInstance().then((function(){t.allyUI=t.ally.ui(s),t.allyUI.autoUpdate({domWatch:d.a.allyAutoUpdateInterval||500}).then((function(){t.allyLoadInProgressPromise=void 0,n.resolve()}))}))}}))})).catch((function(){t.allyLoadInProgressPromise=void 0,n.reject()})),this.allyLoadInProgressPromise},e.prototype.update=function(e,t,n){var i=this;this.isAvailable().then((function(s){s&&i.ensureAllyUI(e).then((function(){t&&n&&(i._xythosIdToContentIdMap[n]=t,i.allyUI.client.clearFileIdFromCache(n)),i.registerMockFileReference(n)}))}))},e.prototype.registerMockFileReference=function(e){var t,n;d.a.features.devtools_allyMock&&e&&(s.merge(this._mockCourses,((t={})[this.currentCourseId]=((n={})[e]={availableAlternativeFormats:["Tts","Epub","Translation","Braille","Html"],creator:null,decorative:null,description:"mock file",id:e,isVersioned:!1,libraryReference:null,name:"mockfile",producer:null,results:{},score:.75,size:12345,suggestions:{},type:"pdf"},n),t)),this.allyMock.set(this._mockCourses))},e.prototype.fileUploadEvent=function(){var e=this;this._clearCacheInterval||"privileged"!==this.getRole()||(this._clearCacheInterval=this.$interval((function(){e.allyUI&&e.allyUI.client&&e.allyUI.client.clearAllFromCache()}),d.a.allyClearCacheInterval||1e4,0,!1))},e.prototype.getIndexMapFromBbML=function(e){var t=new Map,n=e.match(/(<a[^>]+)/gi)||[],i=0;return n.forEach((function(e){if(e.includes('data-bbfile="')){var n=e.match(/href="[^"]+xid-([0-9_]+)/)||[];n.length>=2&&("_"!==n[1].substr(0,1)&&(n[1]="_"+n[1]),t.set(n[1],i)),i++}})),t},e.prototype.instructorFeedbackUpdateCallback=function(e){var t=this._xythosIdToInstructorFeedbackUpdateCallbackMap.get(e.id);t&&t(e)},e.prototype.onUpdate=function(e,t,n){switch(e){case o.UpdateEvent.InstructorFeedback:this._xythosIdToInstructorFeedbackUpdateCallbackMap.set(t,n)}},e.prototype.destroyListeners=function(e){this._xythosIdToInstructorFeedbackUpdateCallbackMap.delete(e)},e.prototype.getReactService=function(e){var t=this;return{getXythosIdFromContentFileUrl:this.getXythosIdFromContentFileUrl.bind(this),update:function(n,i){return t.update(e,n,i)},isAvailable:function(){return Object(b.a)(t.isAvailable())},getIndexMapFromBbML:this.getIndexMapFromBbML.bind(this),onUpdate:this.onUpdate.bind(this),destroyListeners:this.destroyListeners.bind(this)}},e=Object(i.__decorate)([Object(i.__param)(0,Object(h.b)("$q")),Object(i.__param)(1,Object(h.b)("$timeout")),Object(i.__param)(2,Object(h.b)("$interval")),Object(i.__param)(3,Object(h.b)(m.a.serviceName)),Object(i.__param)(4,Object(h.b)(a.e)),Object(i.__param)(5,Object(h.b)(r.d)),Object(i.__param)(6,Object(h.b)(l.serviceName)),Object(i.__param)(7,Object(h.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(f);angular.module(g,[a.b,r.a,l.moduleName,c.a]).service(v,f)},dCrD:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("D57K"),s=n("nbDY"),o=n.n(s),a=n("Oyr+"),r=n("0JpG"),c=n("RPq7"),l=n("Qbdf"),d=n("nYZ0"),u=n("Vsv2"),p=n("A+IJ"),m=n("+4Px"),h=n("pjml"),b=n("3Jgm"),g=n("e6jQ"),v=n("lEL+"),f=n("TnpK"),y=n("PoQW"),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Unzip=new t("Unzip"),t.Website=new t("Website"),t.Default=new t("Default"),t}(o.a),C=function(){function e(e,t,n){var i=this;this.scope=t,this.element=n,this.alwaysShow=!1,this.isButtonVisible=!1,this.isMobile=!1,this.isUploadMultipleFiles=!1,this.removeDefaultRenderClass=!1,this.uuid=Object(g.b)(),this.downloadFile=function(e){i.scope.$broadcast("downloadFile",e,i.positionForFiles)},this.defaultAttachHandler=function(e,t,n,s,o){var a=s||i.$q.defer(),r={parentId:void 0,positionBefore:"start",positionAfter:void 0,depth:0};return i.isUploadMultipleFiles=n,i.insertLocation=o||i.getInsertLocationData(),r=t.ui&&t.ui.parentId?{parentId:t.ui.parentId,positionBefore:t.ui.positionBefore,positionAfter:t.ui.positionAfter,depth:t.ui.depth}:i.insertLocation,"folder"===t.type?(i.closeMenu(),!t.ui||t.ui.depth<=p.l?i._addFolderToCourseOutline(t,r).then((function(e){t.ui={parentId:e.id,positionBefore:"start",depth:1+Number(e.depth)},a.resolve(t)}),(function(e){a.reject(e)})):a.resolve()):i._addContentToCourseOutline(t,e,r).then((function(e){var n=null==o?void 0:o.positionAfter;i.scope.$root.$broadcast("uploadComplete",t,n),e.$save().$then((function(n){t.ui&&t.ui.needUnzip&&(e=n),a.resolve()}))})),a.promise},this.toggleAddContentMenu=function(){i.isEmptyFolder()?i.scope.$emit("toggle-folder-by-id",i.scope.content.id):i.isMenuVisible=!i.isMenuVisible,i.timeout((function(){i.scope.$apply()}),i.scope)},this.hideAddContentMenu=function(e){null===e.target.closest("#"+i.getButtonWrapperId())&&(i.isMenuVisible=!1,i.timeout((function(){i.scope.$apply()}),i.scope))},this.$q=e.get("$q"),this.$rootScope=e.get("$rootScope"),this.bbLocalize=e.get(r.serviceName),this.cloudDriveService=e.get(u.c),this.timeout=e.get(v.b),this.contentSvc=e.get(d.f),this.CourseModel=e.get(h.o.serviceName),this.PartnerService=e.get(b.b),this.ultraState=e.get(f.d),this.contextCourse=e.get(l.e),this.scope.addMenuId=g.a(),this.showMenuOverride=this.scope.showMenuOverride,this.alwaysShow=this.scope.alwaysShow,this.currentCourse=this.contextCourse.course,this.isMobile=!this.cloudDriveService.isShowOneDrive,this.isCloudServiceAvailablePromise=this.cloudDriveService.isCloudServiceAvailable(u.a.KLOUDLESS).then((function(e){return i.isCloudServiceAvailable=e})),this.bbLocalize.loadBundle("components/directives/add-content-button").then((function(){var e="content";i.scope.itemIndex&&null!=i.scope.itemIndex()?e="item-index":"grades"===i.scope.contextArea?e="grades":"course-group"===i.scope.contextArea?e="group":"bbml-editor-single-file"===i.scope.contextArea&&(i.scope.addContentButton.isMenuVisible=!0),i.isMenuVisible=!1,i.addButtonAriaLabel=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label"});var t="components.directives.add-content-button.aria-label.content."+(i.isMobile?"yourDevice":"yourComputer");if(i.uploadAriaLabel=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:t}),i.scope.itemName||i.scope.itemType){i.scope.$watchGroup(["itemName()","itemType()","itemIndex()"],(function(t){var n=t[0],s=t[1],o=t[2];if(n||s){var a=s?s+"-":"",r=i.scope.positionAfter?"after":"before";i.addButtonAriaLabel=i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(i.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label-item-name-"+a+r,params:{itemName:n,itemIndex:o},noWrap:!0,noEscape:!0})}}))}})),n.mouseover((function(){i.$rootScope.$broadcast("mouseover-add-content-button"),i.scope.$apply((function(){i.scope.addContentButton.showButton()}))})),this.scope.$on("close-all-add-menus",(function(){i.showMenuOverride?i.isEmptyFolder()&&i.scope.content.ui.isOpen&&(i.scope.addContentButton.isMenuVisible=!0):i.scope.addContentButton.isMenuVisible=!1})),this.scope.showBothButtons&&this.scope.showBothButtons()||this.scope.$on("mouseover-add-content-button",(function(){i.scope.addContentButton.hideButton()})),this.scope.$on("content-item-hover",(function(e,t){i.scope.addContentButton.hideButton();var s=function(){var e;return(e=n.closest(".folder-contents").find("bb-add-content-button").first().is(n)?n.closest(".folder-contents").find(".js-content-div .element-list-row").first():n.closest(".js-content-div").next(".js-content-div").find(".element-list-row").first()).hasClass("element-list-row")||(e=n.next().find(".js-content-div").first().find(".element-list-row")),!!e.is(t.element)&&i.scope.addContentButton.showButton()},o=function(){var e=!1;n.closest(".js-content-div").find(".element-list-row").first().is(t.element)&&(e=!0),n.closest(".folder").is(t.element.parent(".folder"))&&(e=!1),t.element.hasClass("js-parent")&&t.element.hasClass("open")&&(e=!1),i.scope.addContentButton.isButtonVisible!==e&&(i.scope.addContentButton.isButtonVisible=e)};i.scope.showBothButtons&&i.scope.showBothButtons()?s()||o():t.relativeMousePosition.isEqualTo(c.a.Top)?s():o()})),this.scope.$on("content-outline-hover-end",(function(){i.scope.addContentButton.hideButton()})),this.scope.$watch("alwaysShow",(function(e){i.alwaysShow=e})),n.on("drop",(function(e){i.closeMenu(),i.scope.$emit(a.e,i.scope.parentId(),i.scope.positionBefore&&i.scope.positionBefore(),i.scope.positionAfter&&i.scope.positionAfter(),i.scope.depth(),void 0,i.scope.content,a.c.AssignDropTarget)})),this.scope.$on("$stateChangeStart",(function(){i.ultraState.includes("**.content-manage.import.**")?i.isMenuVisible=i.isEmptyFolder():i.isEmptyFolder()?i.isMenuVisible=!0:i.isMenuVisible=!1,i.timeout((function(){i.scope.$apply()}),i.scope)})),this.scope.$on(a.b,(function(){i.closeMenu()})),this.isMenuVisible=this.scope.showMenuOverride,null!=this.scope.showMenuOverride&&this.scope.$watch((function(){return i.scope.showMenuOverride}),(function(e){i.scope.addContentButton.isMenuVisible=e,i.showMenuOverride=e})),this.getInsertLocationData()}return e.prototype.onKeydown=function(e){e.keyCode===m.g&&this.isMenuVisible&&(this.closeMenu(),this.element.find("a.js-show-add-options").focus(),e.stopPropagation(),e.preventDefault())},e.prototype.showButton=function(){this.isButtonVisible=!0},e.prototype.hideButton=function(){this.isButtonVisible=!1},e.prototype.turnOffAlwaysShow=function(){this.alwaysShow=!1},e.prototype.toggleMenu=function(){var e=this;if(this.showMenuOverride)this.showMenuOverride&&this.isEmptyFolder()&&this.scope.$emit("toggle-folder-by-id",this.scope.content.id);else{var t=this.isMenuVisible;t||this.$rootScope.$broadcast("close-all-add-menus"),this.isMenuVisible||this.timeout((function(){e.element.scrollintoview({duration:250})}),this.scope,0,!1),this.isMenuVisible=!t}},e.prototype.isForceShowAddButton=function(){return this.scope.forceShowAddButton},e.prototype.closeMenu=function(){this.isMenuVisible&&this.toggleMenu()},e.prototype.getInsertLocationData=function(){return this.insertLocation={parentId:this.scope.parentId(),positionBefore:this.scope.positionBefore&&this.scope.positionBefore(),positionAfter:this.scope.positionAfter&&this.scope.positionAfter(),depth:this.scope.depth(),contentId:"create"}},e.prototype.assignPosition=function(){this.closeMenu(),this.scope.$emit("bb-bbml-editor-assign-position",this.getInsertLocationData())},e.prototype._addFolderToCourseOutline=function(e,t){var n=this;return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,t.parentId,t.positionBefore,t.positionAfter,!0).then((function(i){var s=i.content;return s.parentId=t.parentId,s.positionBefore=t.positionBefore,s.positionAfter=t.positionAfter,s.isAvailable=!1,s.depth=t.depth,s.description="",s.title=e.name,s.contentDetail={"resource/x-bb-folder":{isFolder:!0}},s.courseId=n.contextCourse.courseId,s.contentHandler=h.r.ContentHandler.Folder,s.$save().$asPromise()}))},e.prototype._addContentToCourseOutline=function(e,t,n){var i=this;return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,n.parentId,n.positionBefore,n.positionAfter,!0).then((function(e){return e.content})).then((function(s){return s.parentId=n.parentId,s.positionBefore=n.positionBefore,s.positionAfter=n.positionAfter,s.isAvailable=!1,s.depth=n.depth,s.description="",s.title=t.fileName,s.contentHandler=h.r.ContentHandler.File,s.contentDetail={"resource/x-bb-file":{file:{fileName:t.fileName,fileLocation:t.fileLocation}}},e.ui&&e.ui.needUnzip&&(s.contentDetail["resource/x-bb-file"].action=w.Unzip.toString()),s.courseId=i.contextCourse.courseId,s.$asPromise()}))},e.prototype.getTargetId=function(){return"addContentButton-"+this.uuid},e.prototype.getButtonWrapperId=function(){return"addContentButtonWrapper-"+this.uuid},e.prototype.getDirectionalHint=function(){return y.DirectionalHint.bottomCenter},e.prototype.isEmptyFolder=function(){var e=this.scope,t=e.content,n=e.folderNestedButton;return!!(t&&t.isFolder()&&t.children&&0===t.children.length&&n&&n())},e}()},dEnf:function(e,t){e.exports='<div class="question-answer-container">\n  <bb-rich-text-editor\n    ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n    is-read-only="true"\n    plugin-options="editorPluginOptions">\n  </bb-rich-text-editor>\n</div>\n'},dF44:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c}));var i="rb_grid_",s={CELL_FOCUSED:i+"cell_focused",COLUMN:i+"column",DATA_UPDATE:i+"data_update",ENTER_CELL:i+"enter_cell",ENTER_NEXT_CELL:i+"enter_next_cell",FOCUS_CELL:i+"focus_cell",LEAVE_CELL:i+"leave_cell",LEAVE_GRID:i+"leave_grid",ROW:i+"row",SCROLL_H:i+"scroll_h",SCROLL_V:i+"scroll_v"},o=2,a=2,r=50,c=50},dJ97:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n("D57K"),s=(n("pGPW"),n("w0/N"),n("wHJ2")),o=n("nbDY"),a=n.n(o),r=n("Fvsw"),c=n("yMoE"),l=n("X/qj"),d=n("oi1r"),u=n("o5Lu"),p=n("0JpG"),m=n("pjml"),h=n("fYJU"),b=n("O3Pz"),g=n("cH+F"),v=n("6TNA"),f=n("S6sW"),y=n("pHHL"),w="ultra.grade.display",C=function(e){function t(t,n){var i=e.call(this,t)||this;return i.template=n,i}return Object(i.__extends)(t,e),t.prototype.getTemplateHtml=function(){return this.template.template},t.AttemptStatus=new t("AttemptStatus",{template:b}),t.FinalBase=new t("FinalBase",{template:g}),t.Column=new t("Column",{template:v}),t.Course=new t("Course",{template:f}),t.GradeColor=new t("GradeColor",{template:y}),t}(a.a),S=function(){function e(t,n,i,o,a,r,l,d,u,p){var m=this;this.scope=t,this.attrs=n,this.$q=i,this.$injector=o,this.gradebookPermissionService=r,this.localize=l,this.context=d,this.schemaService=u,this.contextUser=p,this.fullDisplayGrade=e.NO_GRADE_DISPLAY,this.bundlePromise=l.loadBundle("components/directives/grade/display-grade"),this.courseColorClass=t.courseColorClass,this.cursorPointer=t.cursorPointer&&t.cursorPointer(),this.cursorDefault=t.cursorDefault&&t.cursorDefault(),this.isStudent=p.userModel.isStudent(),this.isStudent||r.canViewGrades(this.scope.course&&this.scope.course().id)?(this.scope.$watch("::column",(function(e){if(e){var t=function(e){var t,n=m.scope.$watch("gradeDetail",(function(i){i&&(m.schemaGrade=a.getGradeToDisplay(i.displayGrade,m.scope,m.schema.scaleType),m.setFullDisplayGrade(),(C.GradeColor.isEqualTo(m.scope.gradeType)||C.FinalBase.isEqualTo(m.scope.gradeType))&&(m.gradeDisplayItem=o.instantiate(c.a,{gradeDetail:i,scope:m.scope}),m.scope.$watch("::column",(function(t){t&&m.gradeDisplayItem.init(t,e).then((function(){m.gradeDisplayItem.displayGrade=m.scope.showNotGraded&&m.scope.showNotGraded()?null:i.displayGrade,m.gradeDisplayItem.displayValue&&(m.colorClass=m.gradeDisplayItem.getGradeColor())}))}))),n(),t())}));t=m.scope.$watch("summary",(function(e){m.colorClass="na",e&&(m.schemaGrade=e.averageGradeForStudentsSchemaValue,m.setFullDisplayGrade(),C.FinalBase.isEqualTo(m.scope.gradeType)&&!s.isUndefined(e.averageGradeForStudents)&&(m.colorClass=a.getPercentileColor(e.averageGradeForStudents)),n())}),!0)};m.scope.schema?(m.schema=m.scope.schema,t(m.scope.schema)):u.loadGradeSchema(e).then((function(e){m.schema=e,t()}))}})),C.AttemptStatus.isEqualTo(this.scope.displayType)&&(this.courseColorClass="na",this.attempt?this.attempt.isNeedsGrading()?this.attemptStatus="components.directives.grade.display-grade.pending-grade":this.attempt.isInProgress()&&(this.attemptStatus="components.directives.grade.display-grade.NA"):this.attemptStatus="components.directives.grade.display-grade.NA")):(this.fullDisplayGrade=this.attemptStatus=e.NO_GRADE_DISPLAY,this.colorClass="na")}return e.prototype.setFullDisplayGrade=function(){var t,n=this;if(this.schema&&this.schema.scaleType&&(m.I.ScaleType.Tabular.isEqualTo(this.schema.scaleType)||m.I.ScaleType.Text.isEqualTo(this.schema.scaleType)||m.I.ScaleType.Complete.isEqualTo(this.schema.scaleType)))this.fullDisplayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.schemaGrade||e.NO_GRADE_DISPLAY;else if(t=this.scope.showNotGraded&&this.scope.showNotGraded()?e.NO_GRADE_DISPLAY:this.getSchemaGrade(),this.shouldShowPointsPossible()){var i="components.directives.grade.display-grade.";i+=C.Course.isEqualTo(this.scope.gradeType)?"course-score":"score",this.bundlePromise.then((function(){n.fullDisplayGrade=n.localize.translateSync({locale:n.localize.getLocale(n.scope),key:i,params:{grade:t,possible:n.scope.gradeDetail&&n.scope.gradeDetail.pointsPossible||n.scope.column.possible},noWrap:!0})}))}else this.schema&&m.I.ScaleType.Percent.isEqualTo(this.schema.scaleType)&&t!==e.NO_GRADE_DISPLAY?this.bundlePromise.then((function(){n.fullDisplayGrade=n.localize.translateSync({locale:n.localize.getLocale(n.scope),key:"components.directives.grade.display-grade.percent",params:{grade:t},noWrap:!0})})):this.fullDisplayGrade=t},Object.defineProperty(e.prototype,"attempt",{get:function(){return this.scope.attempt&&this.scope.attempt()||this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)},enumerable:!0,configurable:!0}),e.prototype.getSchemaGrade=function(){var t;try{var n=this.schemaGrade.replace(/[^0-9.,]/g,"");t=this.localize.parseNumberSync(n)}catch(e){t=null}return null!=t&&this.localize.formatNumberSync(t,this.scope,{maximumFractionDigits:u.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})||e.NO_GRADE_DISPLAY},e.prototype.shouldShowPointsPossible=function(){return this.schema&&this.schema.scaleType&&m.I.ScaleType.Score.isEqualTo(this.schema.scaleType)&&(m.F.CalculationType.NonCalculated.isEqualTo(this.scope.column.calculationType)||this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible>0)},e.prototype.getCourseColorClass=function(){return this.courseColorClass},e.prototype.noGradeToDisplay=function(){return this.fullDisplayGrade===e.NO_GRADE_DISPLAY},e.prototype.getNoGradeDisplay=function(){return e.NO_GRADE_DISPLAY},e.prototype.shouldShowRubricButton=function(){return this.scope.showRubricButton&&this.scope.showRubricButton()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricDiv=function(){return this.scope.showRubricDiv&&this.scope.showRubricDiv()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()},e.prototype.shouldShowRubricEvaluation=function(){return this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()&&null!=this.attempt&&this.attempt.isCompleted()&&!this.scope.gradeDetail.isOverrideGrade()},e.NO_GRADE_DISPLAY="--",e.$inject=["scope","attrs","$q","$injector",u.h,l.b,p.serviceName,r.b,d.b,h.b],e}(),A=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="E",this.scope={attempt:"&?",gradeDetail:"=",summary:"=",column:"=",schema:"=?",displayType:"@",finalGrade:"&?",translateKey:"@",courseColorClass:"=",isGroupGradeMultiple:"&?",showNotGraded:"&?",overallGradePeekSref:"@?",showRubricButton:"&?",showRubricDiv:"&?",cursorPointer:"&?",cursorDefault:"&?",course:"&?"},this.link=function(e,t,i){e.displayGrade=n.$injector.instantiate(S,{scope:e,attrs:i}),e.gradeType=C.parse(e.displayType)||C.Column,t.append(n.$compile(e.gradeType.getTemplateHtml())(e))}}return e.$inject=["$injector","$compile"],e}();s.module(w,[u.g,l.a]).directive("bbDisplayGrade",["$injector",function(e){return e.instantiate(A)}])},"dL5/":function(e,t){e.exports='<span class="group-count-directive" bb-load-bundle="components/directives/group/group-count">\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="!$ctrl.isSelfEnrollment()">components.directives.group-count.groups.plural</bb-translate>\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="$ctrl.isSelfEnrollment()">components.directives.group-count.groups.selfEnroll.plural</bb-translate>\n</span>\n'},dcnw:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-grade",use:"icon-medium-grade-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-grade"><path d="M21 11V1H3v22h8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M17.5 12l1.2348 3.8004h3.996l-3.2328 2.3488 1.2348 3.8004L17.5 19.6008l-3.2328 2.3488 1.2348-3.8004-3.2328-2.3488h3.996L17.5 12zM7 5h8M7 9h10M7 13h3M7 17h2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},dd1C:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));n("zAxy"),n("10QP");var i=n("wHJ2"),s=n("0JpG"),o=n("e6jQ"),a=n("GbAM"),r=n("3mUc"),c="ultra.components.directives.grade.inlineValidation",l=function(){function t(t,n,i,s,a){var r=this;this.scope=t,this.element=n,this.attrs=i,this.$compile=s,this.bbLocalize=a,this.scope.$on("$destroy",(function(){r.element.off(),r.element=null,e("#"+r.scope.tooltipId).remove()}));var c=o.a();t.tooltipId="inline-validation-tooltip-"+c,t.alertTextId="inline-validation-alert-text-"+c,this.updateErrorMessage(),this.scope.focusableElement=this.element.find(":tabbable, input:enabled"),this.setupEventHandlers(),t.$watch((function(){return r.scope.focusableElement.val()}),(function(e){null!=e&&r.checkErrors()})),t.$watch((function(){return r.scope.showError()}),(function(e){r.checkErrors()})),t.$watch("errorMessage",(function(e){return r.updateErrorMessage()}))}return t.prototype.tooltipExists=function(){return 0!==e("#"+this.scope.tooltipId).length},t.prototype.updateErrorMessage=function(){var e=this;this.scope.errorMessage?this.scope.errorMessageRefined=this.scope.errorMessage:this.bbLocalize.loadBundle("components/directives/grade/inline-validation").then((function(){e.scope.errorMessageRefined=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.grade.inline-validation.default"})}))},t.prototype.checkErrors=function(){this.scope.showError()?this.showErrorTip():this.hideErrorTip()},t.prototype.setupEventHandlers=function(){var e=this;this.scope.focusableElement.on("focus",(function(){e.checkErrors()})).on("blur",(function(){e.hideErrorTip()})),this.scope.$on("bb-inline-validation-check",(function(){e.checkErrors()}))},t.prototype.showErrorTip=function(){if(this.scope.focusableElement[0]===document.activeElement){this.tooltipExists()||e("body").append(this.$compile('\n          <div id="'+this.scope.tooltipId+'"\n            class="tooltip inline-validation f-dropdown content inline-validation-tooltip">\n            <span class="validation-message" ng-bind="errorMessageRefined" aria-role="text"></span>\n            <span class="nub"></span>\n          </div>\n        ')(this.scope));var t=this.element.children().first(),n=e("#"+this.scope.tooltipId);window.Foundation.libs.tooltip.reposition(t,n,t.attr("class")),n.show(),this.scope.$root.$broadcast(a.a,this.scope.errorMessageRefined)}},t.prototype.hideErrorTip=function(){e("#"+this.scope.tooltipId).hide()},t.$inject=["scope","element","attrs","$compile",s.serviceName],t}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.transclude=!0,this.template=r,this.scope={showError:"&",errorMessage:"@"},this.link=function(e,n,i,s){e.inlineValidation=t.$injector.instantiate(l,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[s.moduleName]).directive("bbInlineValidation",["$injector",function(e){return e.instantiate(d)}])}).call(this,n("5iHu"))},dkOF:function(e,t,n){},dpCN:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-attempts",use:"icon-medium-attempts-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attempts"><rect x="1" y="4" width="19" height="19" rx="2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M20 20h1c1.1046 0 2-.8954 2-2V3c0-1.1046-.8954-2-2-2H6c-1.1046 0-2 .8954-2 2v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 14l4 4 7-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},e0uO:function(e,t,n){"use strict";var i=n("D57K"),s=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.QuestionReview=new t("QuestionReview"),t.AttemptAuthoring=new t("AttemptAuthoring"),t.AttemptGrading=new t("AttemptGrading"),t.AttemptReview=new t("AttemptReview"),t}(n.n(s).a);t.a=o},e6qG:function(e,t,n){"use strict";var i=n("wHJ2"),s=n("YHe3"),o=n("Sa5G"),a=n("D57K"),r=n("bd9L"),c=n("DYK3"),l=n("FHk9"),d=n("5MwF"),u=n("vYaK"),p=n("X/qj"),m=n("0JpG"),h=n("+IM5"),b=n("lEL+"),g=n("TnpK"),v=n("Qbdf"),f=n("Fvsw"),y=n("Ed3w"),w=n("R+Yw"),C=n("vhkR"),S=n("5dtR"),A=n("iJ4p"),k=n("7b1Y"),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.createQuestion=function(t,n,i){var s=e.prototype.createQuestion.call(this,t,n);return s.questionType=h.QuestionType.Essay,s.isShortAnswer=!0,s},t.prototype.getAttemptAuthoringHandler=function(e,t,n){return this.$injector.instantiate(O,{attrs:n,element:t,scope:e})},t.prototype.getAttemptGradingHandler=function(e,t,n){return this.$injector.instantiate(D,{attrs:n,element:t,scope:e})},t.prototype.getAttemptReviewHandler=function(e,t,n){return this.$injector.instantiate(T,{attrs:n,element:t,scope:e})},t}(c.a),O=function(e){function t(t,n,i,s,o,a,r,c,u,p,m,h){var b=e.call(this,t,i,s,o,a,r,c,p,m,h)||this;if(b.$compile=t,b.$q=n,b.$window=i,b.attrs=s,b.CourseModel=o,b.element=a,b.gradebookPermissionService=r,b.localizeService=c,b.proctoringService=u,b.scope=p,b.timeout=m,b.ultraState=h,b.isEditorActive=!1,b.isInitializing=!0,b.isSaving=!1,b.suppressAutosave=!0,b.pluginOptions=u.getSecureBbEditorOptions({attachment:!0,image:!0,math:!0,video:!0,contentMarket:!0}),!p.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");if(b.insertQuestionSpecificTemplate(S),d.a.features.questionResponseTextAttachmentUpload){var g={deleteOnNoText:!1,focusOnInit:!1,maintainOriginalTextOnRefresh:!0,onChangeFunc:function(){return b.scope.$broadcast(l.EVENT_BBML_EDITOR_FORCE_UPDATE)},placeholderKey:"components.directives.assessment-question.essay.placeholder.attempt",saveOnBlur:function(){return!0},showCancelButton:function(){return!1},showDeleteButton:function(){return!1},showEditButton:function(){return!1},showSaveButton:function(){return!1},watchReadonly:"true"};b.scope.questionTextEditorOptions=g}return b}return Object(a.__extends)(t,e),t.prototype.onEditorBlur=function(){var e=this;this.persist().then((function(){e.isEditorActive=!1}))},t.prototype.onEditorFocus=function(){this.isInitializing=!1,this.isEditorActive=!0},t.prototype.initializeGivenAnswer=function(){var e=this;this.scope.$watch("questionAttempt.givenAnswer",(function(t){null!=t&&(e.givenAnswer=t)})),this.scope.$watch("assessmentQuestion.givenAnswer.rawText",(function(){e.isInitializing||e.isSaving||(e.attemptIsDirty=!0,e.scope.$emit("bb-autosave-form",r.a.Change))}))},t.prototype.persist=function(){return this.attemptIsDirty&&!this.isSaving?(this.attemptIsDirty=!1,e.prototype.persist.call(this)):this.$q.resolve(null)},t.prototype.validate=function(){return!1},t.prototype.prepareGivenAnswer=function(e){this.isSaving=!0,""===e.givenAnswer.rawText&&(e.givenAnswer.rawText=null)},t.prototype.setDirtyAndUpdateGivenAnswer=function(e){var t=this;return this.attemptIsDirty=!1,this.scope.$emit("bb-autosave-form",r.a.Saved),this.timeout((function(){t.isSaving=!1}),this.scope),e},t.$inject=["$compile","$q","$window","attrs",u.serviceName,"element",p.b,m.serviceName,s.b,"scope",b.b,g.d],t}(c.e),D=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b){var g=e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b)||this;if(g.$compile=t,g.$sce=n,g.$window=i,g.attrs=s,g.element=o,g.gradebookPermissionService=a,g.scope=r,g.timeout=c,g.localizeService=l,g.contextCourse=d,g.$ngRedux=u,g.scheduleTask=p,g.ltiService=m,g.KloudlessModalService=h,g.contextService=b,!r.gradedQuestionAttempt)throw new Error("Graded Question attempt must be provided in attempt grading mode.");return g.insertQuestionSpecificTemplate(A),g.constructViewHelper(),g}return Object(a.__extends)(t,e),t.prototype.constructViewHelper=function(){},t.$inject=["$compile","$sce","$window","attrs","element",p.b,"scope",b.b,m.serviceName,v.e,"$ngRedux",y.c,C.c,w.b,f.b],t}(c.f),T=function(e){function t(t,n,i,s,o,a,r,c,l,d){var u=e.call(this,t,n,i,s,o,a,r,c,l,d)||this;if(u.$compile=t,u.$sce=n,u.$window=i,u.attrs=s,u.element=o,u.gradebookPermissionService=a,u.scope=r,u.timeout=c,u.ultraState=l,u.localizeService=d,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return u.insertQuestionSpecificTemplate(k),u}return Object(a.__extends)(t,e),t.$inject=["$compile","$sce","$window","attrs","element",p.b,"scope",b.b,g.d,m.serviceName],t}(c.g),$=(n("FPJ0"),n("nsO7")),x=n("pjml"),E=n("g66W"),P=n("aHpC"),R=function(){function e(e,t,n){var i=this;this.scope=e,this.localizeService=t,this.questionAttempt=n,this.orderedIdentifiers=[],this.translatedIdentifiers=new Map,this.questionTextElement=document.createElement("div");var s=this.questionAttempt.question.questionText.rawText;this.questionTextElement.innerHTML=s,this.answerElements.forEach((function(e){var t=e.innerHTML,o=E.a(t,/(^\[|]$)/g),a=i.translateIdentifier(o);if(o in n.givenAnswers){i.orderedIdentifiers.push(o),i.translatedIdentifiers.set(o,a);var r=i.questionAttempt.givenAnswers[o];e.innerHTML=r||a,s=s.replace(t,r||a)}})),this.questionText=s}return e.prototype.translateIdentifier=function(e){var t=e.split("-")[1];return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"assessments.canvas.question.fimb.blank",params:{count:t},noEscape:!1,noWrap:!0})},Object.defineProperty(e.prototype,"answerElements",{get:function(){return Array.from(this.questionTextElement.querySelectorAll("a[data-bbfile]")).filter((function(e){return-1!==e.dataset.bbfile.indexOf("fimb-answer-value")&&0!==e.innerHTML.trim().length}))},enumerable:!0,configurable:!0}),e}(),L=function(e){function t(t,n,i){var s=e.call(this,t,n,i)||this;return s.scope=t,s.localizeService=n,s.questionAttempt=i,s}return Object(a.__extends)(t,e),t.prototype.replaceAnswerInQuestionTextWithText=function(e,t){var n=this.answerElements;if(null==t||""===t){var i=this.orderedIdentifiers[e],s=this.translatedIdentifiers.get(i);n[e].innerHTML=s}else $.unescape(n[e].innerHTML)!==t&&(n[e].innerHTML=$.escape(t));this.questionText=this.questionTextElement.innerHTML},t.prototype.shouldShowFTUEOnAnswer=function(e){return 0===this.questionAttempt.question.ui.questionTypePosition&&(1===e||1===this.orderedIdentifiers.length)},t=Object(a.__decorate)([Object(a.__param)(0,Object(P.b)("scope")),Object(a.__param)(1,Object(P.b)(m.serviceName)),Object(a.__param)(2,Object(P.b)("questionAttempt"))],t)}(R),j=function(e){function t(t,n,i,s,o){var a=e.call(this,t,n,i.questionAttempt)||this;return a.scope=t,a.localizeService=n,a.gradedQuestionAttempt=i,a.showAnswerCorrectness=s,a.isCorrect=o,a.answersMap={},(a.questionAttempt.question.answers||[]).forEach((function(e){a.answersMap[e.ident]={values:e.answerValues.map((function(e){return e.value})),evaluationType:e.answerValues[0].evaluationType,caseSensitive:e.answerValues[0].caseSensitive}})),null!=a.questionAttempt.answerCorrectness?(a.answerElements.forEach((function(e,t){var n=e.dataset.bbfile,i=n.indexOf("fimb-answer-value"),o=a.orderedIdentifiers[t];if(s){var r=a.questionAttempt.answerCorrectness[o]?"correct":"incorrect";e.dataset.bbfile=n.slice(0,i)+" "+r+" "+n.slice(i)}})),a.questionText=a.questionTextElement.innerHTML):!a.showAnswerCorrectness&&a.isCorrect&&(a.answerElements.forEach((function(e){var t=e.dataset.bbfile,n=t.indexOf("fimb-answer-value");if(s){e.dataset.bbfile=t.slice(0,n)+" correct "+t.slice(n)}})),a.questionText=a.questionTextElement.innerHTML),a}return Object(a.__extends)(t,e),t.prototype.alignIconTop=function(){return this.orderedIdentifiers.length>1||this.answersMap[this.orderedIdentifiers[0]]&&this.answersMap[this.orderedIdentifiers[0]].evaluationType.toString()!==x.ob.FIMBAnswerEvaluationType.Matches.toString()},t.prototype.showDetailsForAnswer=function(e){var t=this.answersMap[e];return null!=t&&(t.evaluationType.toString()===x.ob.FIMBAnswerEvaluationType.Exact.toString()||t.evaluationType.toString()===x.ob.FIMBAnswerEvaluationType.Contains.toString())},t=Object(a.__decorate)([Object(a.__param)(0,Object(P.b)("scope")),Object(a.__param)(1,Object(P.b)(m.serviceName)),Object(a.__param)(2,Object(P.b)("gradedQuestionAttempt")),Object(a.__param)(3,Object(P.b)("showAnswerCorrectness")),Object(a.__param)(4,Object(P.b)("isCorrect"))],t)}(R),G=n("/UyG"),M=n("7TUR"),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.createQuestion=function(t,n,i){var s=e.prototype.createQuestion.call(this,t,n);return s.questionType=h.QuestionType.FIMB,s},t.prototype.getAttemptAuthoringHandler=function(e,t,n){return this.$injector.instantiate(B,{attrs:n,element:t,scope:e})},t.prototype.getAttemptGradingHandler=function(e,t,n){return this.$injector.instantiate(N,{attrs:n,element:t,scope:e})},t.prototype.getAttemptReviewHandler=function(e,t,n){return this.$injector.instantiate(q,{attrs:n,element:t,scope:e})},t}(c.a);function F(e){var t=e;for(var n in e)null!=e[n]&&(t[n]=$.unescape(e[n]));return t}var B=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,l,d,u)||this;if(p.$compile=t,p.$injector=n,p.$window=i,p.attrs=s,p.CourseModel=o,p.element=a,p.gradebookPermissionService=r,p.localizeService=c,p.scope=l,p.timeout=d,p.ultraState=u,!l.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");return p.insertQuestionSpecificTemplate(G),p.viewHelper=n.instantiate(L,{questionAttempt:p.scope.questionAttempt,scope:l}),p}return Object(a.__extends)(t,e),t.prototype.initializeGivenAnswer=function(){var e=this;this.scope.questionAttempt.givenAnswers=F(this.scope.questionAttempt.givenAnswers),this.givenAnswer=this.scope.questionAttempt.givenAnswers,this.scope.$watchCollection("assessmentQuestion.givenAnswer",(function(){e.scope.questionAttempt.givenAnswers=e.givenAnswer}))},t.prototype.prepareGivenAnswer=function(e){e.givenAnswers=$.mapValues(e.givenAnswers,(function(e){return null==e?"":e}))},t.prototype.setDirtyAndUpdateGivenAnswer=function(e){return this.attemptIsDirty=!$.isEqual(e.givenAnswers,this.givenAnswer),e.givenAnswers=this.givenAnswer,e},t.$inject=["$compile","$injector","$window","attrs",u.serviceName,"element",p.b,m.serviceName,"scope",b.b,g.d],t}(c.e),N=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){var v=e.call(this,t,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this;if(v.$compile=t,v.$injector=n,v.$sce=i,v.$window=s,v.attrs=o,v.element=a,v.gradebookPermissionService=r,v.scope=c,v.timeout=l,v.localizeService=d,v.contextCourse=u,v.$ngRedux=p,v.scheduleTask=m,v.ltiService=h,v.KloudlessModalService=b,v.contextService=g,!c.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return v.insertQuestionSpecificTemplate(M),v.constructViewHelper(),v}return Object(a.__extends)(t,e),t.prototype.constructViewHelper=function(){this.questionAttempt.givenAnswers=F(this.questionAttempt.givenAnswers),this.viewHelper=this.$injector.instantiate(j,{gradedQuestionAttempt:this.scope.gradedQuestionAttempt,showAnswerCorrectness:this.canShowCorrectAnswerRelatedDetail(),isCorrect:this.isCorrect(),scope:this.scope})},t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,"scope",b.b,m.serviceName,v.e,"$ngRedux",y.c,C.c,w.b,f.b],t}(c.f),q=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,l,d,u)||this;if(p.$compile=t,p.$injector=n,p.$sce=i,p.$window=s,p.attrs=o,p.element=a,p.gradebookPermissionService=r,p.scope=c,p.timeout=l,p.ultraState=d,p.localizeService=u,!c.gradedQuestionAttempt)throw new Error("Question attempt must be provided in attempt grading mode.");return p.insertQuestionSpecificTemplate(M),p.questionAttempt.givenAnswers=F(p.questionAttempt.givenAnswers),p.viewHelper=n.instantiate(j,{gradedQuestionAttempt:p.scope.gradedQuestionAttempt,showAnswerCorrectness:p.canShowCorrectAnswerRelatedDetail(),isCorrect:p.isCorrect(),scope:p.scope}),p}return Object(a.__extends)(t,e),t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,"scope",b.b,g.d,m.serviceName],t}(c.g),z=(n("kHnH"),n("JfV0")),V=function(){function e(e,t,n){this.scope=e,this.questionAttempt=t,this.bbLocalize=n,this.attempt=this.scope.attempt,this.prepareQuestionText()}return e.prototype.prepareQuestionText=function(){var e=this,t=this.questionAttempt.question.questionText.rawText;Object.keys(this.questionAttempt.question.variableValues).forEach((function(n){var i=new RegExp("\\["+n+"\\]","g");t=t.replace(i,""+e.questionAttempt.question.variableValues[n])})),this.questionTextWithVariableValues=t},e.prototype.getCorrectAnswerText=function(){return this.bbLocalize.translateSync({key:"components.directives.assessment-question.calculated-formula.review.correctAnswer",locale:this.bbLocalize.getLocale(this.scope),noEscape:!0,params:{correctAnswer:this.questionAttempt.correctAnswer}})},e.prototype.getRoundingInstructionsKey=function(){return"components.directives.assessment-question.calculated-formula.roundingInstructions."+(this.questionAttempt.question.correctAnswerPrecision===z.CalculatedFormulaAnswerPrecisionType.Decimal?"decimal":"significantFigures")+".plural"},e.$inject=["scope","questionAttempt",m.serviceName],e}(),H=n("5O3l"),U=n("UQC1"),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.createQuestion=function(t,n,i){var s=e.prototype.createQuestion.call(this,t,n);return s.questionType=h.QuestionType.CalculatedFormula,s},t.prototype.getAttemptAuthoringHandler=function(e,t,n){return this.$injector.instantiate(K,{attrs:n,element:t,scope:e})},t.prototype.getAttemptGradingHandler=function(e,t,n){return this.$injector.instantiate(W,{attrs:n,element:t,scope:e})},t.prototype.getAttemptReviewHandler=function(e,t,n){return this.$injector.instantiate(J,{attrs:n,element:t,scope:e})},t}(c.a),K=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p){var m=e.call(this,t,s,o,a,r,c,l,d,u,p)||this;if(m.$compile=t,m.$q=n,m.$injector=i,m.$window=s,m.attrs=o,m.CourseModel=a,m.element=r,m.gradebookPermissionService=c,m.localizeService=l,m.scope=d,m.timeout=u,m.ultraState=p,!d.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");return m.insertQuestionSpecificTemplate(H),m.constructViewHelper(),m}return Object(a.__extends)(t,e),t.prototype.constructViewHelper=function(){var e={questionAttempt:this.scope.questionAttempt,scope:this.scope},t=this.$injector.instantiate(V,e);this.viewHelper=t},t.prototype.initializeGivenAnswer=function(){var e=this,t=this.scope.$watch("questionAttempt.givenAnswer",(function(n){e.givenAnswer||(e.givenAnswer=n,t())}));this.scope.$watch("assessmentQuestion.givenAnswer",(function(t){e.scope.questionAttempt.givenAnswer=t||""}))},t.prototype.setDirtyAndUpdateGivenAnswer=function(e){return this.attemptIsDirty=e.givenAnswer!==this.givenAnswer,e},t.prototype.persist=function(){return this.attemptIsDirty?(this.attemptIsDirty=!1,e.prototype.persist.call(this)):this.$q.resolve(null)},t.$inject=[],t=Object(a.__decorate)([Object(a.__param)(0,Object(P.b)("$compile")),Object(a.__param)(1,Object(P.b)("$q")),Object(a.__param)(2,Object(P.b)("$injector")),Object(a.__param)(3,Object(P.b)("$window")),Object(a.__param)(4,Object(P.b)("attrs")),Object(a.__param)(5,Object(P.b)(u.serviceName)),Object(a.__param)(6,Object(P.b)("element")),Object(a.__param)(7,Object(P.b)(p.b)),Object(a.__param)(8,Object(P.b)(m.serviceName)),Object(a.__param)(9,Object(P.b)("scope")),Object(a.__param)(10,Object(P.b)(b.b)),Object(a.__param)(11,Object(P.b)(g.d))],t)}(c.e),W=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){var v=e.call(this,t,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this;if(v.$compile=t,v.$injector=n,v.$sce=i,v.$window=s,v.attrs=o,v.element=a,v.gradebookPermissionService=r,v.scope=c,v.timeout=l,v.localizeService=d,v.contextCourse=u,v.$ngRedux=p,v.scheduleTask=m,v.ltiService=h,v.KloudlessModalService=b,v.contextService=g,!c.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return v.insertQuestionSpecificTemplate(U),v.constructViewHelper(),v}return Object(a.__extends)(t,e),t.prototype.constructViewHelper=function(){this.viewHelper=this.$injector.instantiate(V,{questionAttempt:this.questionAttempt,scope:this.scope})},t.$inject=[],t=Object(a.__decorate)([Object(a.__param)(0,Object(P.b)("$compile")),Object(a.__param)(1,Object(P.b)("$injector")),Object(a.__param)(2,Object(P.b)("$sce")),Object(a.__param)(3,Object(P.b)("$window")),Object(a.__param)(4,Object(P.b)("attrs")),Object(a.__param)(5,Object(P.b)("element")),Object(a.__param)(6,Object(P.b)(p.b)),Object(a.__param)(7,Object(P.b)("scope")),Object(a.__param)(8,Object(P.b)(b.b)),Object(a.__param)(9,Object(P.b)(m.serviceName)),Object(a.__param)(10,Object(P.b)(v.e)),Object(a.__param)(11,Object(P.b)("$ngRedux")),Object(a.__param)(12,Object(P.b)(y.c)),Object(a.__param)(13,Object(P.b)(C.c)),Object(a.__param)(14,Object(P.b)(w.b)),Object(a.__param)(15,Object(P.b)(f.b))],t)}(c.f),J=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,l,d,u)||this;if(p.$compile=t,p.$injector=n,p.$sce=i,p.$window=s,p.attrs=o,p.element=a,p.gradebookPermissionService=r,p.scope=c,p.timeout=l,p.ultraState=d,p.localizeService=u,!c.gradedQuestionAttempt)throw new Error("Question attempt must be provided in attempt grading mode.");return p.insertQuestionSpecificTemplate(U),p.viewHelper=n.instantiate(V,{questionAttempt:p.questionAttempt,scope:c}),p}return Object(a.__extends)(t,e),t.$inject=[],t=Object(a.__decorate)([Object(a.__param)(0,Object(P.b)("$compile")),Object(a.__param)(1,Object(P.b)("$injector")),Object(a.__param)(2,Object(P.b)("$sce")),Object(a.__param)(3,Object(P.b)("$window")),Object(a.__param)(4,Object(P.b)("attrs")),Object(a.__param)(5,Object(P.b)("element")),Object(a.__param)(6,Object(P.b)(p.b)),Object(a.__param)(7,Object(P.b)("scope")),Object(a.__param)(8,Object(P.b)(b.b)),Object(a.__param)(9,Object(P.b)(g.d)),Object(a.__param)(10,Object(P.b)(m.serviceName))],t)}(c.g),Z=(n("r5z9"),function(){function e(e,t){this.scope=e,this.questionAttempt=t,this.correctPairCount=this.calculateCorrectPairCount()}return Object.defineProperty(e.prototype,"totalPairCount",{get:function(){return this.questionAttempt.question.prompts.length},enumerable:!0,configurable:!0}),e.prototype.calculateCorrectPairCount=function(){var e=this,t=0;return this.questionAttempt.question.prompts.forEach((function(n,i){n.matchingAnswerIndex===e.questionAttempt.givenAnswers[i]&&t++})),t},e.$inject=["scope","questionAttempt"],e}()),Y=n("1ZbL"),X=n("ERkP"),ee=n("E1pj"),te=n("kBJj"),ne=n("Q/M7"),ie=n("MC1S"),se=function(e){var t=e.answeredCorrectly,n=e.localize,i=e.locale,s=t?"correct":"incorrect";return X.createElement("div",{className:"matching-attempt-review-pair__correctness-label"},n.translateSync({locale:i,key:"components.directives.assessment-question.status."+s}))},oe=function(e){var t=e.submittedAnswer,n=e.bbEditorPlugins,i=e.showTitle,s=e.localize,o=e.locale;return X.createElement("div",null,i&&X.createElement("div",null,s.translateSync({locale:o,key:"components.directives.assessment-question.matching.review.submitted-answer"})),t?X.createElement(de,{plugins:n,bbml:t.answerText.rawText}):X.createElement("div",null,s.translateSync({locale:o,key:"components.directives.assessment-question.matching.review.none-selected"})))},ae=function(e){var t=e.acceptableAnswer,n=e.bbEditorPlugins,i=e.localize,s=e.locale;return X.createElement("div",null,X.createElement("div",null,i.translateSync({locale:s,key:"components.directives.assessment-question.matching.review.acceptable-answer"})),X.createElement(de,{plugins:n,bbml:t.answerText.rawText}))},re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.answers,i=t.bbEditorPlugins,s=t.givenAnswer,o=t.showResults,a=t.locale,r=t.localize,c=t.prompt,l=void 0!==c.matchingAnswerIndex&&o,d=s===c.matchingAnswerIndex;e=l?d?"correct":"incorrect":"ungraded";var u=d?"check-circle":"close-circle";return X.createElement("div",{className:"matching-attempt-review-pair"},X.createElement("div",{className:"matching-attempt-review-pair__prompt"},X.createElement(de,{plugins:i,bbml:c.promptText.rawText,allyService:this.props.allyService,rootContentId:this.props.rootContentId})),X.createElement("div",{className:"matching-attempt-review-pair__answer matching-attempt-review-pair--"+e},l&&X.createElement(ie.SvgIcon,{className:"matching-attempt-review-pair__correctness-icon",iconName:u,iconSize:"small"}),X.createElement("div",null,l&&X.createElement(se,{answeredCorrectly:d,localize:r,locale:a}),(!d||!l)&&X.createElement(oe,{submittedAnswer:n[s],bbEditorPlugins:i,showTitle:l,localize:r,locale:a}),l&&X.createElement(ae,{acceptableAnswer:n[c.matchingAnswerIndex],bbEditorPlugins:i,localize:r,locale:a}))))},t}(X.Component),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){var n=t.props;(0,n.onChange)(n.index,e.key)},t}return Object(a.__extends)(t,e),t.prototype.onRichContentClick=function(e){"A"===e.target.nodeName&&e.stopPropagation()},t.prototype.render=function(){var e=this,t=this.props,n=t.answers,i=t.bbEditorPlugins,s=t.givenAnswer,o=t.locale,a=t.localize,r=t.prompt,c=t.questionIndex,l=t.UltraWindowSize,d=X.createElement("div",null,X.createElement("div",{className:"sr-only"},a.translateSync({locale:o,key:"components.directives.assessment-question.question-title",params:{index:c},noWrap:!0})),l.isSmallBreakpoint()&&X.createElement("div",{className:"matching-attempt-authoring-pair__prompt-label",role:"presentation"},a.translateSync({locale:o,key:"components.directives.assessment-question.matching.headers.prompt"})),X.createElement("div",{className:"matching-attempt-authoring-pair__prompt"},X.createElement(de,{bbml:r.promptText.rawText,plugins:i,allyService:this.props.allyService,rootContentId:this.props.rootContentId})),l.isSmallBreakpoint()&&X.createElement("div",{className:"matching-attempt-authoring-pair__answer-label",role:"presentation"},a.translateSync({locale:o,key:"components.directives.assessment-question.matching.headers.answer"}))),u=n.map((function(t,n){return{key:n,content:X.createElement(de,{plugins:i,bbml:t.answerText.rawText,allyService:e.props.allyService,rootContentId:e.props.rootContentId})}}));return X.createElement("div",{className:"matching-attempt-authoring-pair"},X.createElement(ie.RichDropdown,{calloutProps:{className:"matching-answer-rich-dropdown",directionalHintFixed:!1},defaultSelectedKey:s,label:d,onChanged:this.onChange,options:u,placeHolder:a.translateSync({locale:o,key:"components.directives.assessment-question.matching.answer-dropdown-placeholder"}),analyticsId:"components.directives.assessmentQuestion.matching.richDropdown"}))},t}(X.Component),le=Object(ee.windowResizingResponsiveComponentWrapper)(ce),de=function(e){var t=e.bbml,n=e.plugins,i=e.rootContentId,s={service:e.allyService,indexMap:new Map};return X.createElement(te.BbEditor,{bbml:t,isReadOnly:!0,plugins:n,rootContentId:i,ally:s})},ue=function(e){function t(t){var n=e.call(this,t)||this;return n.givenAnswers=[],n.localize=n.props[m.serviceName],n.context=n.props[f.b],n.contextCourse=n.props[v.e],n.toolbarPlugins=[Object(te.link)(),Object(te.image)(),Object(te.video)()],n.onChange=function(e,t){n.givenAnswers[e]=t,n.props.onChange(n.givenAnswers)},n.givenAnswers=t.givenAnswers,n.toolbarPlugins.push(Object(te.math)({apiBasePath:Object(ne.c)(d.a.apiBasePath),courseId:n.contextCourse.courseId,xsrfToken:n.context.xsrfToken,locale:n.localize.getLocale(t.$scope)})),n.toolbarPlugins.push(Object(te.insertLocalFile)({apiBasePath:Object(ne.c)(d.a.apiBasePath),xsrfToken:n.context.xsrfToken,babelfishInstance:n.localize.intl,babelfishFormatInstance:n.localize.frmt})),n.allyService=n.props.ally.getReactService(n.props.$scope),n}return Object(a.__extends)(t,e),t.prototype.render=function(){var e,t=this,n=this.props,i=n.answers,s=n.givenAnswers,o=n.prompts,a=n.questionIndex,r=n.UltraWindowSize,c=this.localize.getLocale(this.props.$scope);this.props.ultraState&&this.props.ultraState.getCurrentResolvedValues&&this.props.ultraState.getCurrentResolvedValues().currentContent&&(e=this.props.ultraState.getCurrentResolvedValues().currentContent.id);var l=o.map((function(n,o){return X.createElement("li",{key:n.id,className:"matching-attempt__list-item"},X.createElement(pe,{answers:i,bbEditorPlugins:t.toolbarPlugins,index:o,givenAnswer:s[o],showResults:t.props.showResults,locale:c,localize:t.localize,onChange:t.props.onChange&&t.onChange,questionIndex:a,prompt:n,UltraWindowSize:r,allyService:t.allyService,rootContentId:e}))})),d=!!o.find((function(e){return void 0!==e.matchingAnswerIndex}))?"components.directives.assessment-question.matching.headers.answers":"components.directives.assessment-question.matching.headers.submitted-answers";return X.createElement("div",{className:"matching-attempt__pairs"},!r.isSmallBreakpoint()&&X.createElement("div",{className:"matching-attempt__column-titles-container"},X.createElement("div",{className:"matching-attempt__column-title"},this.localize.translateSync({locale:c,key:"components.directives.assessment-question.matching.headers.prompts"})),X.createElement("div",{className:"matching-attempt__column-title"},this.localize.translateSync({locale:c,key:d}))),X.createElement("ol",{className:"matching-attempt__list"},l))},t}(X.Component),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){return null!=this.props.onChange?X.createElement(le,Object(a.__assign)({},this.props,{onChange:this.props.onChange})):X.createElement(re,Object(a.__assign)({},this.props))},t}(X.Component),me=Object(ee.windowResizingResponsiveComponentWrapper)(ue),he=n("/qTg"),be=n("afiT"),ge=n("cs5G"),ve="ultra.components.directives.assessment.assessment-question.question-handlers.matching-question-handler",fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.createQuestion=function(t,n,i){var s=e.prototype.createQuestion.call(this,t,n);return s.questionType=h.QuestionType.Matching,s},t.prototype.getAttemptAuthoringHandler=function(e,t,n){return this.$injector.instantiate(ye,{attrs:n,element:t,scope:e})},t.prototype.getAttemptGradingHandler=function(e,t,n){return this.$injector.instantiate(we,{attrs:n,element:t,scope:e})},t.prototype.getAttemptReviewHandler=function(e,t,n){return this.$injector.instantiate(Ce,{attrs:n,element:t,scope:e})},t}(c.a),ye=function(e){function t(t,n,i,s,o,a,r,c,l,d){var u=e.call(this,t,n,i,s,o,a,r,c,l,d)||this;if(u.$compile=t,u.$window=n,u.attrs=i,u.CourseModel=s,u.element=o,u.gradebookPermissionService=a,u.localizeService=r,u.scope=c,u.timeout=l,u.ultraState=d,u.onAnswersChange=function(e){u.scope.questionAttempt.givenAnswers=e,u.givenAnswer=e,u.attemptIsDirty=!0,u.scope.$broadcast("bb-autosave-save-trigger-debounce")},!c.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");return u.insertQuestionSpecificTemplate(he),u}return Object(a.__extends)(t,e),t.prototype.initializeGivenAnswer=function(){var e=this;$.isEmpty(this.scope.questionAttempt.givenAnswers)&&$.times(this.scope.questionAttempt.question.prompts.length,(function(){e.scope.questionAttempt.givenAnswers.push(null)})),this.givenAnswer=this.scope.questionAttempt.givenAnswers},t.prototype.setDirtyAndUpdateGivenAnswer=function(e){return this.attemptIsDirty=!$.isEqual(e.givenAnswers,this.givenAnswer),e.givenAnswers=this.givenAnswer,e},t.$inject=["$compile","$window","attrs",u.serviceName,"element",p.b,m.serviceName,"scope",b.b,g.d],t}(c.e),we=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){var v=e.call(this,t,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this;if(v.$compile=t,v.$injector=n,v.$sce=i,v.$window=s,v.attrs=o,v.element=a,v.gradebookPermissionService=r,v.scope=c,v.timeout=l,v.localizeService=d,v.contextCourse=u,v.$ngRedux=p,v.scheduleTask=m,v.ltiService=h,v.KloudlessModalService=b,v.contextService=g,!c.gradedQuestionAttempt)throw new Error("Graded Question attempt must be provided in attempt grading mode.");return v.insertQuestionSpecificTemplate(be),v.constructViewHelper(),v}return Object(a.__extends)(t,e),t.prototype.constructViewHelper=function(){this.viewHelper=this.$injector.instantiate(Z,{questionAttempt:this.questionAttempt,scope:this.scope})},t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,"scope",b.b,m.serviceName,v.e,"$ngRedux",y.c,C.c,w.b,f.b],t}(c.f),Ce=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,l,d,u)||this;if(p.$compile=t,p.$injector=n,p.$sce=i,p.$window=s,p.attrs=o,p.element=a,p.gradebookPermissionService=r,p.scope=c,p.timeout=l,p.ultraState=d,p.localizeService=u,!c.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return p.insertQuestionSpecificTemplate(be),p.viewHelper=n.instantiate(Z,{questionAttempt:p.questionAttempt,scope:c}),p}return Object(a.__extends)(t,e),t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,"scope",b.b,g.d,m.serviceName],t}(c.g),Se={Class:me,bindingNames:["answers","givenAnswers","showResults","onChange","prompts","questionIndex"],injectNames:["$scope",f.b,m.serviceName,v.e,g.d,ge.b]};i.module(ve,[]).component("bbMatchingAttempt",Object(Y.a)(Se));n("QWY5"),n("xXFZ"),n("2MQt"),n("uEsA"),n("LRgG"),n("gORw"),n("dV61");var Ae=n("nbDY"),ke=n.n(Ae),Ie=n("Xq/A"),Oe=n("Fdwu"),De=function(){function e(e,t,n,i,s,o){this.questionAttempt=e,this.showCorrectAnswer=t,this.isCorrect=n,this.scope=i,this.bbLocalize=s,this.bbmlEditor=o,this.correctAnswers=[],this.setupCorrectAnswers(),this.hideAnswerOptions=this.isCorrect}return e.prototype.isOnlyPartialCredit=function(){return!this.questionAttempt.correct&&this.questionAttempt.partiallyCorrect},e.prototype.toggleAnswerOptions=function(){this.hideAnswerOptions=!this.hideAnswerOptions},e.prototype.showIncorrectIndicator=function(e){var t,n=this.questionAttempt.givenAnswer[e],i=null===(t=this.questionAttempt.question.answers[e])||void 0===t?void 0:t.correctAnswer;return this.showCorrectAnswer&&n&&!i},e.prototype.getTruncatedAnswerText=function(e){return E.h(e,25)},e.prototype.setupCorrectAnswers=function(){var e=this;return this.questionAttempt.question.answers.forEach((function(t,n){if(t.correctAnswer){var i=e.bbmlEditor.convertBbMLToContentBlocks(t.answerText.rawText).contentBlocks[0];e.correctAnswers.push({answer:t,index:n,displayText:i?i.textBlock.replace(Oe.a,""):""})}})),this.formatAnswerString(),this.correctAnswers},e.prototype.formatAnswerString=function(){var e=this,t=[];this.correctAnswers.forEach((function(n){var i="("+e.getOptionLabelByIndex(n.index)+") "+e.getTruncatedAnswerText(n.displayText);t.push(i)})),this.bbLocalize.formatItems(t,t.length,null,!1,{noWrap:!0}).then((function(t){t="<strong>"+t+"</strong>",e.isCorrect?e.formattedAnswerString=t:e.formattedAnswerString=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.assessment-question.multiple-answer.review.correct-answer.plural",params:{count:e.correctAnswers.length,answer:t},noWrap:!0,noEscape:!0})}))},e.prototype.getOptionLabelByIndex=function(e){return String.fromCharCode(65+e)},e=Object(a.__decorate)([Object(a.__param)(0,Object(P.b)("questionAttempt")),Object(a.__param)(1,Object(P.b)("showCorrectAnswer")),Object(a.__param)(2,Object(P.b)("isCorrect")),Object(a.__param)(3,Object(P.b)("scope")),Object(a.__param)(4,Object(P.b)(m.serviceName)),Object(a.__param)(5,Object(P.b)(Ie.c))],e)}(),Te=n("+sRu"),$e=n("LQXi"),xe=n("I5V3"),Ee=n("+O05"),Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.createQuestion=function(t,n,i){var s=e.prototype.createQuestion.call(this,t,n);return s.questionType=h.QuestionType.Multiple,s.singleCorrectAnswer=!0,s},t.prototype.getAttemptAuthoringHandler=function(e,t,n){return this.$injector.instantiate(Re,{attrs:n,element:t,scope:e})},t.prototype.getAttemptGradingHandler=function(e,t,n){return this.$injector.instantiate(Le,{attrs:n,element:t,scope:e})},t.prototype.getAttemptReviewHandler=function(e,t,n){return this.$injector.instantiate(je,{attrs:n,element:t,scope:e})},t}(c.a),Re=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(a.__extends)(t,e),t.NoPartialCredit=new t("NO_PARTIAL_CREDIT"),t.PartialCreditNoPenalty=new t("PARTIAL_CREDIT_NO_PENALTY"),t.PartialCreditWithPenalty=new t("PARTIAL_CREDIT_WITH_PENALTY")}(ke.a),function(e){function t(t,n,i,s,o,a,r,c,l,d){var u=e.call(this,t,n,i,s,o,a,r,c,l,d)||this;if(u.$compile=t,u.$window=n,u.attrs=i,u.CourseModel=s,u.element=o,u.gradebookPermissionService=a,u.localizeService=r,u.scope=c,u.timeout=l,u.ultraState=d,!c.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");return u.insertQuestionSpecificTemplate($e),u}return Object(a.__extends)(t,e),t.prototype.onRadioButtonChange=function(e){var t=this;this.givenAnswer.forEach((function(n,i){n&&e!==i&&(t.givenAnswer[i]=!1)}))},t.prototype.initializeGivenAnswer=function(){var e=this;$.isEmpty(this.scope.questionAttempt.givenAnswer)&&$.times(this.scope.questionAttempt.question.answersCount,(function(){e.scope.questionAttempt.givenAnswer.push(!1)})),this.givenAnswer=this.scope.questionAttempt.givenAnswer,this.scope.$watchCollection("assessmentQuestion.givenAnswer",(function(){e.scope.questionAttempt.givenAnswer=e.givenAnswer}))},t.prototype.setDirtyAndUpdateGivenAnswer=function(e){return this.attemptIsDirty=!$.isEqual(e.givenAnswer,this.givenAnswer),e.givenAnswer=this.givenAnswer,e},t.$inject=["$compile","$window","attrs",u.serviceName,"element",p.b,m.serviceName,"scope",b.b,g.d],t}(c.e)),Le=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){var v=e.call(this,t,i,s,o,a,r,c,l,d,u,p,m,h,b,g)||this;if(v.$compile=t,v.$injector=n,v.$sce=i,v.$window=s,v.attrs=o,v.element=a,v.gradebookPermissionService=r,v.scope=c,v.timeout=l,v.localizeService=d,v.contextCourse=u,v.$ngRedux=p,v.scheduleTask=m,v.ltiService=h,v.KloudlessModalService=b,v.contextService=g,!c.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return v.insertQuestionSpecificTemplate(xe),v.constructViewHelper(),v}return Object(a.__extends)(t,e),t.prototype.showAnswerOptions=function(){return!this.viewHelper.hideAnswerOptions},t.prototype.getAnswerChoiceStyles=function(e){var t=this.questionAttempt.givenAnswer[e],n=this.questionAttempt.question.answers[e].correctAnswer;return this.getAnswerStyles(t,n,!0)},t.prototype.constructViewHelper=function(){this.viewHelper=this.$injector.instantiate(De,{questionAttempt:this.questionAttempt,showCorrectAnswer:!0,isCorrect:this.isCorrect(),scope:this.scope})},t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,"scope",b.b,m.serviceName,v.e,"$ngRedux",y.c,C.c,w.b,f.b],t}(c.f),je=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,l,d,u)||this;if(p.$compile=t,p.$injector=n,p.$sce=i,p.$window=s,p.attrs=o,p.element=a,p.gradebookPermissionService=r,p.scope=c,p.timeout=l,p.ultraState=d,p.localizeService=u,!c.gradedQuestionAttempt)throw new Error("Question attempt must be provided in attempt grading mode.");return p.insertQuestionSpecificTemplate(xe),p.viewHelper=n.instantiate(De,{questionAttempt:p.questionAttempt,showCorrectAnswer:p.canShowCorrectAnswerRelatedDetail(),isCorrect:p.isCorrect(),scope:c}),p}return Object(a.__extends)(t,e),t.prototype.getAnswerChoiceStyles=function(e){var t=this.questionAttempt.givenAnswer[e];if(!Ee.a.studentCanViewAttemptResults(this.attempt))return t?Te.a.IsSelected+" "+Te.a.AnswerSelectedNotPosted:Te.a.AnswerNotSelected;var n=this.questionAttempt.question.answers[e].correctAnswer,i=this.canShowCorrectAnswerRelatedDetail();return this.getAnswerStyles(t,n,i)},t.prototype.showAnswerOptions=function(){return!Ee.a.studentCanViewAttemptResults(this.attempt)||!this.viewHelper.hideAnswerOptions||this.canShowCorrectAnswerRelatedDetail()&&!this.canShowQuestionScoreRelatedDetail()},t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,"scope",b.b,g.d,m.serviceName],t}(c.g),Ge=n("r8DE"),Me=n("nvgb"),_e=n("APyD"),Fe=n("dEnf");!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(a.__extends)(t,e),t.FileAttachment=new t("presentation-file-attachment"),t.FileInline=new t("presentation-file-inline"),t.FileInlineAudio=new t("presentation-file-inline-audio"),t.Text=new t("presentation-text")}(ke.a);var Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.createQuestion=function(t,n,i){var s=e.prototype.createQuestion.call(this,t,n);return s.questionType=h.QuestionType.PresentationOnly,s.subType=i?i.subType:o.z.Text,i&&i.file&&(s.initialUploadFile=i.file),s},t.prototype.getQuestionReviewHandler=function(e,t,n){return this.$injector.instantiate(Ne,{attrs:n,element:t,scope:e})},t.prototype.getAttemptAuthoringHandler=function(e,t,n){return this.$injector.instantiate(qe,{attrs:n,element:t,scope:e})},t.prototype.getAttemptGradingHandler=function(e,t,n){return this.$injector.instantiate(ze,{attrs:n,element:t,scope:e})},t.prototype.getAttemptReviewHandler=function(e,t,n){return this.$injector.instantiate(Ve,{attrs:n,element:t,scope:e})},t}(c.a),Ne=function(e){function t(t,n,i,s,o,a,r,c,l,d){var u=e.call(this,t,n,i,s,o,a,r,c,l,d,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1})||this;if(u.$compile=t,u.$sce=n,u.$window=i,u.attrs=s,u.element=o,u.gradebookPermissionService=a,u.scope=r,u.timeout=c,u.localizeService=l,u.ultraState=d,!r.question)throw new Error("Question must be provided in question review mode.");return u.insertQuestionSpecificTemplate(Ge),u}return Object(a.__extends)(t,e),t.$inject=["$compile","$sce","$window","attrs","element",p.b,"scope",b.b,m.serviceName,g.d],t}(c.h),qe=function(e){function t(t,n,i,s,o,a,r,c,l,d){var u=e.call(this,t,n,i,s,o,a,r,c,l,d,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1})||this;if(u.$compile=t,u.$window=n,u.attrs=i,u.CourseModel=s,u.element=o,u.gradebookPermissionService=a,u.localizeService=r,u.scope=c,u.timeout=l,u.ultraState=d,!c.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");return u.insertQuestionSpecificTemplate(Me),u}return Object(a.__extends)(t,e),t.prototype.initializeGivenAnswer=function(){},t.prototype.setDirtyAndUpdateGivenAnswer=function(){},t.$inject=["$compile","$window","attrs",u.serviceName,"element",p.b,m.serviceName,"scope",b.b,g.d],t}(c.e),ze=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b){var g=e.call(this,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1})||this;if(g.$compile=t,g.$sce=n,g.$window=i,g.attrs=s,g.element=o,g.gradebookPermissionService=a,g.scope=r,g.timeout=c,g.localizeService=l,g.contextCourse=d,g.$ngRedux=u,g.scheduleTask=p,g.ltiService=m,g.KloudlessModalService=h,g.contextService=b,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return g.insertQuestionSpecificTemplate(_e),g}return Object(a.__extends)(t,e),t.prototype.constructViewHelper=function(){},t.$inject=["$compile","$sce","$window","attrs","element",p.b,"scope",b.b,m.serviceName,v.e,"$ngRedux",y.c,C.c,w.b],t}(c.f),Ve=function(e){function t(t,n,i,s,o,a,r,c,l,d){var u=e.call(this,t,n,i,s,o,a,r,c,l,d,{hasPoints:!1,hasQuestionCountTitle:!1,points:0,showQuestionControls:!1})||this;if(u.$compile=t,u.$sce=n,u.$window=i,u.attrs=s,u.element=o,u.gradebookPermissionService=a,u.scope=r,u.timeout=c,u.ultraState=l,u.localizeService=d,!r.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return u.insertQuestionSpecificTemplate(Fe),u}return Object(a.__extends)(t,e),t.$inject=["$compile","$sce","$window","attrs","element",p.b,"scope",b.b,g.d,m.serviceName],t}(c.g),He=(n("fbNg"),function(){function e(e,t,n,i,s){this.scope=e,this.bbLocalize=t,this.question=n,this.questionAttempt=i,this.showCorrectAnswer=s,this.setAnswerStringLabels()}return e.prototype.setAnswerStringLabels=function(){this.hasUserEnteredLabels()?(this.trueAnswerOptionLabel=this.question.userEnteredCorrectAnswerLabel,this.falseAnswerOptionLabel=this.question.userEnteredIncorrectAnswerLabel):(this.trueAnswerOptionLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.assessment-question.true-false.answer-type."+this.question.answerType+".true.label"}),this.falseAnswerOptionLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.assessment-question.true-false.answer-type."+this.question.answerType+".false.label"}))},e.prototype.isAnswerChoiceCorrect=function(e){return this.questionAttempt.question.answer===e},e.prototype.isAnswerChoiceSelected=function(e){return this.questionAttempt.givenAnswer===e},e.prototype.showIncorrectIndicator=function(e){var t=this.isAnswerChoiceSelected(e),n=this.isAnswerChoiceCorrect(e);return this.showCorrectAnswer&&t&&!n},e.prototype.hasUserEnteredLabels=function(){return x.ob.TrueFalseAnswerType.UserEnteredLabels.isEqualTo(this.question.answerType)},Object.defineProperty(e.prototype,"answerDescriptionKey",{get:function(){return this.question.answer?"components.directives.assessment-question.true-false.review.description-true":"components.directives.assessment-question.true-false.review.description-false"},enumerable:!0,configurable:!0}),e.$inject=["scope",m.serviceName,"question","questionAttempt","showCorrectAnswer"],e}()),Ue=(n("U+0H"),n("Ee/I")),Qe=n("ys4f"),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.createQuestion=function(t,n,i){var s=e.prototype.createQuestion.call(this,t,n);return s.questionType=h.QuestionType.Either,s.answer=!0,s.answerType=h.TrueFalseAnswerType.TrueFalse,s},t.prototype.getAttemptAuthoringHandler=function(e,t,n){return this.$injector.instantiate(We,{attrs:n,element:t,scope:e})},t.prototype.getAttemptGradingHandler=function(e,t,n){return this.$injector.instantiate(Je,{attrs:n,element:t,scope:e})},t.prototype.getAttemptReviewHandler=function(e,t,n){return this.$injector.instantiate(Ze,{attrs:n,element:t,scope:e})},t}(c.a),We=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,c,l,d,u)||this;if(p.$compile=t,p.$injector=n,p.$window=i,p.attrs=s,p.CourseModel=o,p.element=a,p.gradebookPermissionService=r,p.localizeService=c,p.scope=l,p.timeout=d,p.ultraState=u,!l.questionAttempt)throw new Error("Question attempt must be provided in attempt authoring mode.");return p.scope.$watch((function(){return p.scope.questionAttempt.givenAnswer}),(function(e,t){e!==t&&$.isUndefined(t)&&p.getCurrentForm()[p.getFormInputName()].$setDirty(!0)})),p.insertQuestionSpecificTemplate(Ue),p.viewHelper=n.instantiate(He,{question:p.scope.questionAttempt.question,questionAttempt:null,showCorrectAnswer:null,scope:l}),p}return Object(a.__extends)(t,e),t.prototype.getFormInputName=function(){return this.elementId+"true-false-answers-choice"},t.prototype.initializeGivenAnswer=function(){var e=this;this.givenAnswer=this.scope.questionAttempt.givenAnswer,this.scope.$watch("assessmentQuestion.givenAnswer",(function(){e.scope.questionAttempt.givenAnswer=e.givenAnswer}))},t.prototype.setDirtyAndUpdateGivenAnswer=function(e){return this.attemptIsDirty=e.givenAnswer!==this.givenAnswer,e.givenAnswer=this.givenAnswer,e},t.$inject=["$compile","$injector","$window","attrs",u.serviceName,"element",p.b,m.serviceName,"scope",b.b,g.d],t}(c.e),Je=function(e){function t(t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){var v=e.call(this,t,i,s,o,a,r,c,l,d,u,p,b,m,h,g)||this;if(v.$compile=t,v.$injector=n,v.$sce=i,v.$window=s,v.attrs=o,v.element=a,v.gradebookPermissionService=r,v.scope=c,v.timeout=l,v.localizeService=d,v.contextCourse=u,v.$ngRedux=p,v.ltiService=m,v.KloudlessModalService=h,v.scheduleTask=b,v.contextService=g,!c.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return v.insertQuestionSpecificTemplate(Qe),v.constructViewHelper(),v}return Object(a.__extends)(t,e),t.prototype.getAnswerChoiceStyles=function(e){var t=this.viewHelper.isAnswerChoiceSelected(e),n=this.viewHelper.isAnswerChoiceCorrect(e);return this.getAnswerStyles(t,n,!0)},t.prototype.constructViewHelper=function(){this.viewHelper=this.$injector.instantiate(He,{question:this.questionAttempt.question,questionAttempt:this.questionAttempt,showCorrectAnswer:!0,scope:this.scope})},t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,"scope",b.b,m.serviceName,v.e,"$ngRedux",C.c,w.b,y.c,f.b],t}(c.f),Ze=function(e){function t(t,n,i,s,o,a,r,c,l,d,u){var p=e.call(this,t,i,s,o,a,r,l,d,u,c)||this;if(p.$compile=t,p.$injector=n,p.$sce=i,p.$window=s,p.attrs=o,p.element=a,p.gradebookPermissionService=r,p.localizeService=c,p.scope=l,p.timeout=d,p.ultraState=u,!l.gradedQuestionAttempt)throw new Error("Graded question attempt must be provided in attempt grading mode.");return p.insertQuestionSpecificTemplate(Qe),p.viewHelper=n.instantiate(He,{question:p.questionAttempt.question,questionAttempt:p.questionAttempt,showCorrectAnswer:p.canShowCorrectAnswerRelatedDetail(),scope:l}),p}return Object(a.__extends)(t,e),t.prototype.getAnswerChoiceStyles=function(e){var t=this.viewHelper.isAnswerChoiceSelected(e);if(!Ee.a.studentCanViewAttemptResults(this.attempt))return t?Te.a.IsSelected+" "+Te.a.AnswerSelectedNotPosted:Te.a.AnswerNotSelected;var n=this.viewHelper.isAnswerChoiceCorrect(e),i=this.canShowCorrectAnswerRelatedDetail();return this.getAnswerStyles(t,n,i)},t.$inject=["$compile","$injector","$sce","$window","attrs","element",p.b,m.serviceName,"scope",b.b,g.d],t}(c.g);n.d(t,"a",(function(){return Ye})),n.d(t,"b",(function(){return Xe}));var Ye="ultra.components.directives.assessment.assessment-question.question-handlers",Xe="questionFactory";i.module(Ye,[s.a,m.moduleName,ve,y.b]).factory(Xe,["$injector",m.serviceName,function(e,t){var n=t.loadBundle("components/directives/assessment/assessment-question");return{getQuestionHandler:function(t,i,s){return n.then((function(){return function(t){switch(t.toString()){case o.A.Essay.toString():return e.instantiate(I);case o.A.PresentationOnly.toString():return e.instantiate(Be);case o.A.Multiple.toString():return e.instantiate(Pe);case o.A.Either.toString():return e.instantiate(Ke);case o.A.FIMB.toString():return e.instantiate(_);case o.A.Matching.toString():return e.instantiate(fe);case o.A.CalculatedFormula.toString():return e.instantiate(Q);default:throw new Error("Unsupported question type:"+t.toString())}}(t.gradedQuestionAttempt?t.gradedQuestionAttempt.questionAttempt.questionType:t.question?t.question.questionType:t.questionAttempt.questionType).getHandlerByMode(t,i,s)}))}}}])},e7Kn:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O}));var i=n("D57K"),s=(n("1/hr"),n("wHJ2")),o=n("lx16"),a=n("0JpG"),r=n("kC07"),c=n("RPq7"),l=n("nYZ0"),d=n("LdA1"),u=n("sLTT"),p=n("D8d/"),m=n("L+81"),h=n("lr7J"),b=n("aHpC"),g=n("pjml"),v=n("rtZE"),f=n("ZkU4"),y=n("lEL+"),w=n("gkef"),C=n("5MwF"),S=n("oQrK"),A=n("EcEN"),k=n("a8oS"),I=n("W6wm"),O="ultra.directives.contentOutline",D=function(){function t(t,n,i,s,o,a,r,c){var l=this;this.scope=t,this.element=n,this.attrs=i,this.ContentService=s,this.CourseContentModel=o,this.timeout=a,this.windowService=r,this.localizeService=c,this.cloudUploadInProgress={},this.showContentImportProgress=!1,this.LARGE_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap",this.SMALL_CONTAINER_SELECTOR=".bb-offcanvas-panel-wrap .panel-wrap .panel-content",this.getContentTrackingId=function(e){return null!=e.id?e.id:(e.ui.tempId||(e.ui.tempId=l.getTempId()),e.ui.tempId)},this.contextArea=t.contextArea,this.addContentButtonLocation=null,this.loadMoreChildren=t.loadMoreChildren,this.parentFolder=t.parentFolder,this.onFileDropHandler=t.onFileDropHandler,this.onMoveHandler=t.onMoveHandler,this.onMoveIntoFolderHandler=t.onMoveIntoFolderHandler,this.canMove=t.canMove&&(!t.contents.permissions||t.contents.permissions.move),this.showMenuOverride=!1,null!=t.contents&&"function"==typeof t.contents.$asPromise&&t.contents.$asPromise().then((function(){l.showMenuOverride=0===t.contents.length})),this.placeholderContent=this.CourseContentModel.$buildRaw({id:this.parentFolder&&this.parentFolder.id&&this.parentFolder.id+"_placeholder",parentId:this.parentFolder&&this.parentFolder.id,contentHandler:g.r.ContentHandler.Unknown.toString(),depth:this.parentFolder&&this.parentFolder.depth&&this.parentFolder.depth+1}),t.$watch("contents.length",(function(i,s){l.showMenuOverride=0===i,l.placeholderContent.id=l.parentFolder&&l.parentFolder.id&&l.parentFolder.id+"_placeholder",l.placeholderContent.parentId=l.parentFolder&&l.parentFolder.id,l.resetMovableAddContentButton(n),i<s&&(t.$emit("content-outline-infinite-scroll-check"),e("#add-button"+l.scope.parentFolder.id).appendTo(e("#add-button-container"+l.scope.parentFolder.id)))})),t.$eval(i.showContentImportProgress)&&this.addImportPlaceholder(),t.$on("bb-drag-start",(function(){l.resetMovableAddContentButton(n)})),t.$on("keyboard-drag-start",(function(){l.resetMovableAddContentButton(n)})),t.$on("showContentImportProgress",(function(e,t,n){"-1"!==n&&l.parentFolder.id!==n||l.addImportPlaceholder()})),t.$on(f.b,(function(e,t){l.cloudUploadInProgress[t]||(l.cloudUploadInProgress[t]=!0)}))}return t.prototype.resetMovableAddContentButton=function(e){this.addContentButtonLocation=null,e.append(this.getMovableAddContentButton())},t.prototype.addImportPlaceholder=function(){var t=this;this.ContentService.getOrMakeContentInContentTree(this.parentFolder,this.parentFolder.courseId,void 0,this.parentFolder.id,"start").then((function(n){n.content.ui.importPlaceholder=!0,t.timeout((function(){e(".placeholder-container").closest(".js-content-div").scrollintoview({duration:300})}),t.scope,0,!1)}))},t.prototype.getScrollContainerSelector=function(){return this.windowService.isLargeBreakpoint()?this.LARGE_CONTAINER_SELECTOR:this.SMALL_CONTAINER_SELECTOR},t.prototype.getScrollForceShowSelector=function(){return"."+r.a},t.prototype.isAllContentsLoaded=function(){return!!(this.scope.contents&&this.scope.contents.paging&&this.scope.contents.paging.count)&&this.scope.contents.length>=this.scope.contents.paging.count},t.prototype.isAddContentButtonUnattached=function(e){return!this.addContentButtonLocation||e!==this.addContentButtonLocation.id},t.prototype.placeAddButton=function(t,n){void 0===n&&(n=!1);var i=this.parentFolder?".movable-add-content-button-folder"+this.parentFolder.id:"";if(this.isAddContentButtonUnattached(t.id)&&this.contextArea!==I.a.Discussions&&void 0!==t.id){var s=!!document.querySelector(".ms-ContextualMenu-list.is-open");!n&&s||(this.getMovableAddContentButton().appendTo(e("#add-button-placeholder"+t.id)),this.addContentButtonLocation=t,this.scope.$broadcast("change-add-content-button-position",{reopen:s}),n&&this.element.find(".movable-add-content-button.movable-add-content-button"+i+" .button-add-content.js-show-add-options").focus())}},t.prototype.getMovableAddContentButton=function(){var e=this.parentFolder?".movable-add-content-button-folder"+this.parentFolder.id:"";return this.element.find(".movable-add-content-button"+e)},t.prototype.getAddButtonLineLabel=function(e){return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.add-content-button.aria-label.content.add-button-label-item-name-after",params:{itemName:e},noWrap:!0,noEscape:!0})},t.prototype.isMobileDevice=function(){return S.a.detect().mobile()},t.prototype.shouldShowMenuOverride=function(){return this.parentFolder&&0===this.parentFolder.depth?!C.a.features.learningModule&&this.showMenuOverride:this.showMenuOverride},t.prototype.shouldShowAddButton=function(){return this.scope.isFirst||this.scope.contents&&0===this.scope.contents.length},t.prototype.hasId=function(e){return this.scope.contents.some((function(t){return t.ui.tempId===e||t.id===e}))},t.prototype.getTempId=function(){for(var e,t=!1;!t;)e=Object(A.v4)(),t=!this.hasId(e);return e},t=Object(i.__decorate)([Object(i.__param)(0,Object(b.b)("scope")),Object(i.__param)(1,Object(b.b)("element")),Object(i.__param)(2,Object(b.b)("attrs")),Object(i.__param)(3,Object(b.b)(l.f)),Object(i.__param)(4,Object(b.b)(g.r.serviceName)),Object(i.__param)(5,Object(b.b)(y.b)),Object(i.__param)(6,Object(b.b)(w.b)),Object(i.__param)(7,Object(b.b)(a.serviceName))],t)}(),T=function(){function e(e,t){var n=this;this.link=e,this.recursionHelper=t,this.replace=!0,this.restrict="E",this.scope={canCreate:"=",contents:"=",contextArea:"=",loadMoreChildren:"=",isFirst:"=",parentFolder:"=",onFileDropHandler:"=?",onMoveHandler:"=",onMoveIntoFolderHandler:"=?",canMove:"=",canCreateAllContents:"=?",canCopyImport:"=?",hideAddMenuOverride:"=?"},this.compile=function(e){return n.recursionHelper.compile("content-outline-directive",e,n.link)},this.template=k}return e.$inject=["link",v.b],e}();s.module(O,[o.a,r.b,u.a,d.a,c.b,l.d,p.a,m.a,h.b,v.a,w.a]).directive("bbContentOutline",["$injector",l.f,function(e,t){return e.instantiate(T,{link:function(t,n,i){t.contentOutline=e.instantiate(D,{scope:t,element:n,attrs:i})}})}])}).call(this,n("5iHu"))},eAnr:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u}));var i=n("D57K"),s=n("wHJ2"),o=n("BOxd"),a=n("g7Mf"),r=n("TnpK"),c=n("uFkY"),l="ultra.services.feedback",d="feedbackService",u="engagement-submissions-list:reload-on-feedback-save",p=function(){function e(e,t){var n=this;this.$q=e,this.$sce=t,this.emptyFeedback=function(){return n.$q.when({})},this.fetchAttemptFeedback=function(e){return e.grade.attempts.$fetch().$asPromise().then((function(t){return e.grade.attempts=t,{feedbackToUser:t[0]&&t[0].feedbackToUser,feedback:n.$sce.trustAsHtml(t[0]&&t[0].feedbackToUser?t[0].feedbackToUser.rawText:"")}}))},this.findAttemptFeedback=function(e){var t=e.attemptsReadyToPost[0];return e.grade.attempts.$find(t.id).$asPromise().then((function(e){return e.feedbackToUser?{feedbackToUser:e.feedbackToUser,feedback:e.feedbackToUser.rawText}:n.emptyFeedback()}))},this.resolveGradeFeedback=function(e){return n.$q.when({feedbackToUser:e.grade.instructorFeedback,feedback:n.$sce.trustAsHtml(e.grade.instructorFeedback.rawText)})}}return e.$inject=["$q","$sce"],e}(),m=function(){function e(e,t,n,i,s){var a=this;this.$injector=e,this.$q=t,this.$rootScope=n,this.discussionService=i,this.ultraStateService=s,this.loadFeedbackFromRow=function(e){return e&&e.grade?a.hasGradeFeedback(e)?a.loadHelper.resolveGradeFeedback(e):a.needsGrading(e)&&a.hasAttemptReadyToPost(e)?a.loadHelper.findAttemptFeedback(e):a.loadHelper.fetchAttemptFeedback(e):a.loadHelper.emptyFeedback()},this.needsGrading=function(e){return e.grade&&o.a.NeedsGrading.isEqualTo(e.grade.status)},this.hasAttemptReadyToPost=function(e){return e.attemptsReadyToPost&&e.attemptsReadyToPost[0]},this.hasGradeFeedback=function(e){return e.grade&&e.grade.instructorFeedback},this.refreshDiscussionPanel=function(){a.$rootScope.$broadcast("reload-discussion-panel")},this.refreshAfterEngagementFeedbackSave=function(e){a.$rootScope.$broadcast(u,e)},this.refreshAfterAssessmentAttemptFeedbackSave=function(e,t){return Object(c.b)(a.$rootScope,e,t)},this.refreshAfterIndividualfeedbackSave=function(e){return Object(c.c)(a.$rootScope,e)},this.refreshGradeGridView=function(e,t){a.$rootScope.$broadcast(c.a,a.getCurrentColumn().id,t,null,e)},this.getCurrentColumn=function(){return a.discussionService.column},this.getOrCreateGrade=function(e){var t=a.getCurrentColumn().grades,n=t.find((function(t){return t.user.$pk===e.user.id}));return n?a.$q.when(n):t.$new().withParams({userId:e.user.id}).$save().$asPromise()},this.loadHelper=e.instantiate(p)}return e.$inject=["$injector","$q","$rootScope",a.c,r.d],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(m);s.module(l,[]).service(d,m)},eWdw:function(e,t,n){},f1fJ:function(e,t,n){},fGDP:function(e,t,n){"use strict";var i=n("D57K"),s=(n("HwkA"),n("CG4K"),n("8wib"),n("6ZXc"),n("3Lzw"),n("5m/6"),n("nsO7")),o=n("wHJ2"),a=n("en1n"),r=n("5MwF"),c=(n("s4xR"),n("lx16")),l=n("RPq7"),d=n("D8d/"),u=n("pKNj"),p=n("X/qj"),m=n("o5Lu"),h=n("P2dS"),b=n("ujI6"),g=n("0JpG"),v=n("lEL+"),f=n("Efpj"),y="ultra.components.directives.grade.courseGradesGraderList",w=function(){function e(e,t,n,i,s){var o=this;this.scope=e,this.attrs=t,this.gradebookPermissionService=n,this.grade=i,this.categoryService=s,this.categoryMap={},this.onMoveGraderItem=function(e){var t=o.findGraderItemById(e.dragContentId),n=t.positionBeforeId?t.positionBeforeId:null,i=t.positionAfterId?t.positionAfterId:null,s=o.columns.indexOfItemById(e.dragContentId),a=null;return e.positionBeforeId?(-1!==(a=o.columns.indexOfItemById(e.positionBeforeId))&&-1!==s&&s<a&&a--,t.positionBeforeId=e.positionBeforeId):e.positionAfterId&&(-1!==(a=o.columns.indexOfItemById(e.positionAfterId))&&-1!==s&&s>a&&a++,t.positionAfterId=e.positionAfterId),null==a||s===a||-1===s||-1===a?(t.positionBeforeId=n,void(t.positionAfterId=i)):(o.columns.splice(a,0,o.columns.splice(s,1)[0]),t.$patch())},this.canModify=this.gradebookPermissionService.canModify(),this.contextArea="grades",this.columns=e.columns,this.course=e.course(),this.hasColumns=!0,this.categoryService.getOrLoadCategoriesForCourse(this.scope.course().id).then((function(e){e.forEach((function(e){o.categoryMap[e.id]=e}))})),e.$watch("columns",(function(t){t&&(o.columns=t,o.hasColumns=0!==t.length,o.attendanceColumnExists=!!o.columns.find((function(e){return e.isAttendance()})),e.$broadcast("update-content-menu"))})),e.$watch("columns.length",(function(t){o.attendanceColumnExists=!!o.columns.find((function(e){return e.isAttendance()})),o.hasColumns=0!==t,e.$broadcast("update-content-menu")})),e.$on("content-item-mouseover",(function(t,n){e.$apply((function(){e.$broadcast("content-item-hover",n)}))})),e.$on("course-gradebook-mouse-leave",(function(){e.$broadcast("content-outline-hover-end")})),e.$on("attempt-base-content-update",(function(e,t){var n=o.columns.filter((function(e){return t.id===e.contentId}));n.length>0&&n.forEach((function(e){e.$fetch()}))}))}return e.prototype.findGraderItemById=function(e){return s.find(this.columns,(function(t){return t.id===e}))},e.$inject=["scope","attrs",p.b,m.h,h.b],e}(),C=function(){function e(e,t){var n=this;this.$injector=e,this.timeout=t,this.restrict="E",this.template=f,this.scope={course:"&",columns:"=",showSetupOverallColumn:"=",isFirst:"=",attendanceIsAvailable:"&"},this.link=function(e,t,i){n.timeout((function(){e.courseGradesGraderList=n.$injector.instantiate(w,{scope:e,element:t,attrs:i})}),e)}}return e.$inject=["$injector",v.b],e}();o.module(y,[u.a,b.c,c.a,l.b,d.a]).directive("bbCourseGradesGraderList",["$injector",g.serviceName,function(e,t){return t.loadBundle("components/directives/grade/course-grades-grader-list"),e.instantiate(C)}]);var S=n("jhBu"),A=n("lr7J"),k=n("pjml"),I=n("TnpK"),O=n("yC9S"),D=n("aHpC"),T=n("oQrK"),$=n("LN5R"),x=n("qH3X"),E=n("2o5C"),P=n("kp/p"),R=n("ERkP"),L=n("1ZbL"),j=n("tN4z"),G=n("ZQFV"),M={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.analyticsId,n=e.courseId,i=e.currentUserId;return R.createElement(j.AnalyticsJssThemeProvider,null,R.createElement(G.StudentListView,{analyticsId:t,courseId:n,currentUserId:i}))},t}(R.Component),attributes:["analyticsId"],bindingNames:["courseId","currentUserId"],renderLocalized:!0,withProvider:!0};o.module("ultra.directives.grade.studentListViewTable",[]).component("bbStudentListViewTable",Object(L.a)(M));var _=n("fYJU"),F='<bb-student-list-view-table\n                        analytics-id="components.directives.grades.studentListView"\n                        course-id="studentListView.scope.courseId"\n                        current-user-id="studentListView.currentUserId"\n                      ></bb-student-list-view-table>',B=function(){function e(e,t){this.scope=e,this.currentUserId=t.userId}return e=Object(i.__decorate)([Object(i.__param)(0,Object(D.b)("scope")),Object(i.__param)(1,Object(D.b)(_.b))],e)}(),N=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=F,this.scope={courseId:"<"},this.link=function(e){e.studentListView=t.$injector.instantiate(B,{scope:e})}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(D.b)("$injector"))],e)}();angular.module("ultra.components.directives.studentListView",["ultra.directives.grade.studentListViewTable"]).directive("bbStudentListView",["$injector",function(e){return e.instantiate(N)}]);var q={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.analyticsId,n=e.showFixedView;return R.createElement(G.OverallGradeSetup,{analyticsId:t,showFixedView:n})},t}(R.Component),attributes:["analyticsId"],bindingNames:["showFixedView"],renderLocalized:!0,withProvider:!0};o.module("ultra.directives.grade.overallGradeSetup",[]).component("bbOverallGradeSetup",Object(L.a)(q));var z='<bb-overall-grade-setup\n                        analytics-id="components.directives.grade.overall-panel"\n                        show-fixed-view="showFixedView">\n                      </bb-overall-grade-setup>',V=function(){function e(e){this.$injector=e,this.restrict="E",this.template=z,this.scope={showFixedView:"<"}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(D.b)("$injector"))],e)}();angular.module("ultra.components.directives.setupOverallGrade",["ultra.directives.grade.overallGradeSetup"]).directive("bbSetupOverallGrade",["$injector",function(e){return e.instantiate(V)}]);var H=n("cpZm"),U=n("Sa5G"),Q=n("po/h");n.d(t,"c",(function(){return W})),n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return K}));var K,W="ultra.directives.grade.courseGradesGrader",J="after-update-grades";!function(e){e.List="list",e.Grid="grid"}(K||(K={}));var Z=new Set([K.List,K.Grid]),Y=K.List,X=new Set([H.a.id,H.b.id]),ee=H.a.id,te=function(){function e(e,t,n,i,s,o,a,c,l,d){var u=this;this.$modal=e,this.$location=t,this.scope=n,this.$q=i,this.entitlementService=s,this.grade=o,this.gradebookPermissionService=a,this.categoryService=c,this.ultraState=l,this.timeout=d,this.GRADE_COLUMN_LOAD_LIMIT=1e3,this.GRADE_COLUMN_RENDER_LIMIT=50,this.currentlyLoading=!1,this.categoryTitleMap={},this.allCategoriesLoaded=!1,this.isDesktop=!1,this.firstRender=!0,this.canDownloadGradebook=!1,this.canUploadGradebook=!1,this.showFilterCriteriaSettings=!1,this.mergedCourses=[],this.changeListViewType=function(e){X.has(e)&&(u.currentTabId=e)},this.handleLocationChanged=function(){var e,t=null===(e=u.$location.search())||void 0===e?void 0:e.gradebookView;Z.has(t)?u.view=t:u.view=Y};var p=l.params.gradebookView,h=l.params.listViewType;Z.has(p)?this.view=p:this.view=Y,X.has(h)?this.currentTabId=h:this.currentTabId=ee,this._setupColumnUpdateResponder(),this._setupColumnDeleteResponder(),this._setupViewChange(),this._setupBreakpointChange(),this._setupListViewTypeChange(),this.isDesktop=T.a.detect().desktop(),this.userHasViewGradebookPermission=this.gradebookPermissionService.canView(),n.$on("bb-update-category-icon",(function(e,t,n){t.categoryTitle=u.categoryTitleMap[n]})),n.$on(E.b,(function(){u.expandColumnSummaries(u.allColumns)})),n.$on(x.a.CLOSE_FILTER_PANEL,(function(e,t){u.showFilterCriteriaSettings=t,u.scope.$root.$broadcast(x.a.SHOW_FILTER_CRITERIA,u.showFilterCriteriaSettings)})),n.$on(x.a.UPDATED_FILTER_CONDITION,(function(e){u.updateFilteredCount()})),n.$on(x.a.GRADEBOOK_CLEAR_SELECTED,(function(e){u.updateFilteredCount()})),O.b.OnRootScope(n,m.b,(function(e,t){var n=u.allColumns.find((function(e){return e.id===t.columnId}));n&&(n.summary.$fetch(),u.scope.$root.$broadcast("bb-update-summary"),u.scope.$root.$broadcast("bb-update-category-icon",n),u._replaceOrInsertColumnWrapper(n),n.$fetch())})),this.canUploadGradebook=a.canModify(),this.scope.courseGrades.course.$then((function(e){e.isToolAvailable("bb-attendance").then((function(e){u.attendanceIsAvailable=e})),u._loadColumns(),u.course=e,r.a.features.gradebookSearchFilterM3&&u._loadMergedCourse(),u.canDownloadGradebook=a.canViewGrades()&&u.entitlementService.isEntitled("course.gradebook-data.export.EXECUTE",u.course.id)}))}return Object.defineProperty(e.prototype,"squareToggleValue",{get:function(){return this.isGridView?K.Grid:K.List},set:function(e){this.view=e},enumerable:!0,configurable:!0}),e.prototype.renderMoreColumns=function(){if(this.currentlyLoading||this.firstRender)this.firstRender=!1;else if(this.columns.length<this.allColumns.length){var e=this.addColumns();this.scope.$root.$broadcast(A.a,"course-grades-grader",e)}},e.prototype.addColumns=function(){var e=this,t=this.$q.defer();return this.timeout((function(){var n,i=e.columns.length;e.allColumns.length-i>e.GRADE_COLUMN_RENDER_LIMIT?(n=e.columns).push.apply(n,e.allColumns.$slice(i,i+e.GRADE_COLUMN_RENDER_LIMIT)):e.columns=e.allColumns,t.resolve()}),this.scope,1e3),t.promise},e.prototype.showFilterCriteriaPanel=function(){this.showFilterCriteriaSettings=!this.showFilterCriteriaSettings,this.scope.$root.$broadcast(x.a.SHOW_FILTER_CRITERIA,this.showFilterCriteriaSettings)},e.prototype.updateFilteredCount=function(){this.filteredCount=this.mergedCourses.filter((function(e){return!0===e.ui.checked})).length},e.prototype.calculateCanAddOverallGrade=function(e,t){this.gradebookPermissionService.canModify()?(!t||this.course.id===t)&&!this.course.isComplete()?this.showSetupOverallColumn=e:this.showSetupOverallColumn=!1:this.showSetupOverallColumn=!1},e.prototype._loadColumns=function(){var e=this;this.currentlyLoading=!0;var t=this.grade.loadColumns(this.scope.courseGrades.course,!0,{expand:"collectExternalSubmissions",limit:this.GRADE_COLUMN_LOAD_LIMIT,offset:this.allColumns?this.allColumns.length:0});this.scope.$root.$broadcast(A.a,"course-grades-grader",t),t.then((function(e){return e.attachRelatedContentsByScoreProviderHandle(U.B.Scorm)})).then((function(t){e.allColumns&&e.allColumns.length>0?e.allColumns.concat(t):e.allColumns=t,e.totalColumnCount=t.paging.count,t.paging.nextPage?e._loadColumns():(e.currentlyLoading=!1,e.loadCategories(),e.grade.needsToSetupOverall(e.allColumns,e.course.id).then((function(t){e.calculateCanAddOverallGrade(t)})),e.allColumns.length>e.GRADE_COLUMN_RENDER_LIMIT?e.columns=e.allColumns.$slice(0,e.GRADE_COLUMN_RENDER_LIMIT):e.columns=e.allColumns,e.expandColumnSummaries(e.allColumns))}))},e.prototype.expandColumnSummaries=function(e){var t=e.paging&&e.paging.count||1e3,n=this.course.gradebook.summaries.expandingColumns(e);return this.$q.all(s.range(0,t,1e3).map((function(e){return n.$fetch({limit:1e3,offset:e,excludeCalculations:!0}).$asPromise()}))).then((function(){return e}))},e.prototype.loadCategories=function(){var e=this;this.categoryService.getOrLoadCategoriesForCourse(this.scope.courseGrades.course.id).then((function(t){t.forEach((function(t){e.categoryTitleMap[t.id]=t.title})),e.allColumns&&e.allColumns.forEach((function(t){t.gradebookCategoryId&&(t.categoryTitle=e.categoryTitleMap[t.gradebookCategoryId])})),e.allCategoriesLoaded=!0}))},e.prototype._loadMergedCourse=function(){var e=this;this.entitlementService.isEntitled(U.j.ViewChildCourse,this.course.id)&&this.course.getChildrenCourses().then((function(t){var n,i=s.sortBy(t,(function(e){return e.childCourse.name}));(n=e.mergedCourses).push.apply(n,i),e.mergedCourses.forEach((function(e){e.ui={checked:!1,hidden:!1}}))}))},e.prototype._setupColumnUpdateResponder=function(){var e=this;this.scope.$on(m.c,(function(t,n){e._replaceOrInsertColumnWrapper(n),n.summary.$fetch()})),this.scope.$on("content-update",(function(t,n){n.isScorm()&&n.getScormGradebookItems().forEach((function(t){var i=e.course.gradebook.columns.$buildRaw(t.gradingColumn);i.ui={content:n},e._replaceOrInsertColumnWrapper(i),i.summary.$fetch()}))})),this.scope.$on("bb-change-overall-panel-visibility",(function(t,n,i){e.calculateCanAddOverallGrade(i,n)})),this.scope.$on("$stateChangeStart",(function(t,n,i,s){s.name.indexOf("attendance")>-1&&!e.columns.find((function(e){return e.isAttendance()}))&&e._loadColumns()})),this.scope.$on(P.b,(function(t,n){e.grade.loadColumns(e.scope.courseGrades.course,!0).then((function(t){e.allColumns=t,e.allColumns.forEach((function(e){return e.summary.$fetch()})),e.scope.$broadcast(J,n)}))}))},e.prototype._replaceOrInsertColumnWrapper=function(e){var t=this._replaceOrInsertColumn(this.allColumns,e);this.columns!==this.allColumns&&t<this.columns.length&&this._replaceOrInsertColumn(this.columns,e)},e.prototype._replaceOrInsertColumn=function(e,t){var n=s.findIndex(e,(function(e){return e.id===t.id}));return n>-1?e[n]=t:(t.positionBeforeId?n="start"===o.lowercase(t.positionBeforeId)?0:s.findIndex(e,(function(e){return t.positionBeforeId===e.id})):t.positionAfterId&&("start"===o.lowercase(t.positionAfterId)?n=0:"end"===o.lowercase(t.positionAfterId)?n=e.length:(n=s.findIndex(e,(function(e){return t.positionAfterId===e.id})))>=0&&n++),n>=e.length||n<0?e.push(t):e.splice(n,0,t),this.totalColumnCount++),n>-1?n:0},e.prototype._removeColumn=function(e,t){var n=s.findIndex(e,(function(e){return e.id===t.id}));n>-1&&e.splice(n,1)},e.prototype._setupColumnDeleteResponder=function(){var e=this;this.scope.$on("bb-delete-column",(function(t,n){e.removeColumn(n),n.externalGrade&&(e.scope.$root.$broadcast("bb-reload-grid-view"),e.scope.$root.$broadcast("bb-change-overall-panel-visibility",n.courseId,!0))}))},e.prototype.removeColumn=function(e){if(this._removeColumn(this.allColumns,e),this.columns!==this.allColumns&&this._removeColumn(this.columns,e),this.totalColumnCount--,e&&e.contentId){var t=this.allColumns&&this.allColumns.find((function(t){return t.contentId===e.contentId}));t&&this.removeColumn(t)}},e.prototype._refreshColumnMap=function(){this.columnMap=s.keyBy(this.columns,(function(e){return e.id}))},e.prototype._setupViewChange=function(){var e=this;this.scope.$watch("courseGradesGrader.view",(function(){var t,n=!(null===(t=e.$location.search())||void 0===t?void 0:t.gradebookView);e.ultraState.search("gradebookView",e.view,{location:!n||"replace",notify:!1}),e.showFilterCriteriaSettings&&e.timeout((function(){e.scope.$root.$broadcast(x.a.SHOW_FILTER_CRITERIA,e.showFilterCriteriaSettings)}),e.scope,0,!1),e.scope.$root.$broadcast(x.a.GRADEBOOK_CLEAR_SELECTED,!0)})),this.scope.$on("$locationChangeSuccess",this.handleLocationChanged)},e.prototype._setupListViewTypeChange=function(){var e=this;this.scope.$watch("courseGradesGrader.currentTabId",(function(){e.ultraState.search("listViewType",e.currentTabId)}))},e.prototype._setupBreakpointChange=function(){var e=this;O.b.OnWindow("resize",s.debounce((function(){a.h()&&e.isGridView&&(e.view=K.List)}),100),this.scope)},Object.defineProperty(e.prototype,"isSmallScreen",{get:function(){return a.h()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGridView",{get:function(){return this.view===K.Grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGradableItemsListView",{get:function(){return this.view===K.List&&this.currentTabId===H.a.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStudentListView",{get:function(){return this.view===K.List&&this.currentTabId===H.b.id},enumerable:!0,configurable:!0}),e=Object(i.__decorate)([Object(i.__param)(0,Object(D.b)("$modal")),Object(i.__param)(1,Object(D.b)("$location")),Object(i.__param)(2,Object(D.b)("scope")),Object(i.__param)(3,Object(D.b)("$q")),Object(i.__param)(4,Object(D.b)(S.b)),Object(i.__param)(5,Object(D.b)(m.h)),Object(i.__param)(6,Object(D.b)(p.b)),Object(i.__param)(7,Object(D.b)(h.b)),Object(i.__param)(8,Object(D.b)(I.d)),Object(i.__param)(9,Object(D.b)(v.b))],e)}(),ne=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=Q,this.scope=!0,this.link=function(e){e.courseGradesGrader=t.$injector.instantiate(te,{scope:e})}}return e=Object(i.__decorate)([Object(i.__param)(0,Object(D.b)("$injector"))],e)}();o.module(W,["mm.foundation.modal",y,b.c,m.g,p.a,A.b,g.moduleName,k.Q,$.b,H.c,"ultra.components.directives.studentListView","ultra.components.directives.setupOverallGrade"]).directive("bbCourseGradesGrader",["$injector",g.serviceName,function(e,t){return t.loadBundle("components/directives/grade/course-grades-grader"),e.instantiate(ne)}])},fbNg:function(e,t,n){},ftvW:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("D57K"),s=(n("f1fJ"),n("r+pC"),n("2szi"),n("lwNT"),n("yC9S")),o=n("nYZ0"),a=n("Qbdf"),r=n("X455"),c=n("TnpK"),l=n("aTRN"),d=n("Is+C"),u=n("pjml"),p=n("Q/M7"),m=n("U2yg"),h=n("nmzr"),b="ultra.components.directives.content.contentNavigator";!function(){function e(e,t,n,i,s,o,a,r){this.scope=e,this.$state=t,this.timeout=n,this.contentService=i,this.contextCourse=s,this.contextCourseMembership=o,this.$injector=a,this.scormService=r,this.sibling={next:null,previous:null},this.cr={next:null,previous:null}}e.prototype.$onChanges=function(){this.init()},e.prototype.isStudent=function(){return this.contextCourseMembership.isStudentMembership()},e.prototype.init=function(){var e=this;this.content&&this.isStudent()&&1!==this.content.depth&&this.$state.includes("**.outline.**")&&(this.scope.content=this.content,this.getLearningModuleContent().then((function(t){t.isLearningModule()&&(e.learningModuleContent=t,e.scope.$on("update-state",(function(t,n,i){i===u.r.StateType.Completed&&e.getSibling("next")})),e.getSibling("next"),e.getSibling("previous"))})))},e.prototype.getSibling=function(e){var t=this;this.content.getSibling(e,this.learningModuleContent.id).then((function(n){n&&(t.sibling[e]=n,t.cr[e]=t.$injector.instantiate(l.a,{scope:t.scope}),t.cr[e].getConditions(n))}))},e.prototype.getLearningModuleContent=function(){var e=this,t=this.contextCourse.course,n=this.contentService.findRootNode(t,u.r.ContentRootNode.ROOT),i=function(s){return e.contentService.getParentFolder(s.parentId,t.id,n).$asPromise().then((function(e){return e.isRoot()?s:i(e)}))};return i(this.content)},e.prototype.shouldShowNavigator=function(){return this.isStudent()&&(!!this.sibling.next||!!this.sibling.previous)},e.prototype.navigate=function(e){var t=this;if(this.sibling[e].canEdit()||!this.sibling[e].isConditionalReleaseLocked()){var n=this.$state.current.name.split("."),i=n.length-n.lastIndexOf("peek")-1,s=this.sibling[e],o="content-navigator-transition-"+(s.isTest()?"peek":"full");this.$state.go("^.".repeat(i)+o).then(this.timeout).then((function(){if(s.isDiscussionInOutline()){var e=s.contentDetail[u.r.ContentHandler.CourseLink.toString()].linkSourceId;t.$state.go("^.discussion.view.with-grading",{contentId:e})}else if(s.isTest())t.$state.go("^.assessment.overview",{contentId:s.id});else if(s.isDocument())t.$state.go("^.content-manage.edit.document",{id:s.id});else if(s.isJournal())t.$state.go("^."+h.Routes.Journal.JOURNAL_VIEW_WITH_PARTICIPATION,{contentId:s.id});else if(s.isPlaceHolderContent())t.$state.go("^.content-navigator-placeholder",{contentId:s.id});else if(s.isScorm())if(s.getAssociatedGradingColumn())t.$state.go("^.scorm-overview.student",{contentId:s.id});else{var n=p.c(t.scormService.getLaunchLinkFromContent(s));n=p.a(n,"from_ultra","true"),t.$state.go("^.scorm-launch-frame",{toolHref:n,contentId:s.id})}}))}},e.$inject=["$scope",c.d,"$timeout",o.f,a.e,r.d,"$injector",d.c],e=Object(i.__decorate)([Object(s.a)({moduleName:b,componentName:"bbContentNavigator",template:m,bindings:{content:"<"},requireModules:[o.d,a.b,r.a,c.b,d.b]})],e)}()},g5ln:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("D57K"),s=(n("SP9a"),n("s5UK"),n("A51O"),n("nsO7")),o=n("yC9S"),a=n("TZd2"),r="ultra.components.directives.pagination";!function(){function e(){this.pageCount=1,this.componentId="pagination-id-"+t.idCounter,this.componentDescribeId="pagination-describe-id-"+t.idCounter++,this.firstPage=0,this.generatePageItems=s.memoize((function(e){return s.range(1,e+1).map((function(e){return{index:e-1,name:e.toString(),nature:"_"+e,value:e.toString()}}))}))}var t;t=e,e.prototype.$onChanges=function(e){e.pageSize&&this.reset(),e.totalItems&&(this.resetPageCount(),this.currentPage*this.pageSize>=this.totalItems&&(this.currentPage=this.lastPage))},Object.defineProperty(e.prototype,"lastPage",{get:function(){return Math.max(this.firstPage,Math.ceil(this.totalItems/this.pageSize)-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availablePages",{get:function(){return this.generatePageItems(this.pageCount)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mySelectedPage",{get:function(){return this.availablePages[this.currentPage]},enumerable:!0,configurable:!0}),e.prototype.canNavigate=function(e){var t=this.currentPage+e;return t>=this.firstPage&&t<=this.lastPage},e.prototype.changePage=function(e){var t=this.currentPage;this.currentPage=e.index,t!==this.currentPage&&this.onChangePage&&this.onChangePage({currentPage:this.currentPage,previousPage:t})},e.prototype.previousPage=function(){this.changePage(this.availablePages[this.currentPage-1])},e.prototype.nextPage=function(){this.changePage(this.availablePages[this.currentPage+1])},e.prototype.reset=function(){this.resetPageCount(),this.currentPage=0},e.prototype.resetPageCount=function(){this.pageCount=this.lastPage+1},e.idCounter=1,e=t=Object(i.__decorate)([Object(o.a)({moduleName:r,componentName:"bbPagination",template:a,bindings:{totalItems:"<",pageSize:"<",currentPage:"=",onChangePage:"&?",maxItemsInDropdown:"@?"}})],e)}()},"gK/k":function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return h}));n("kgZF");var i=n("nsO7"),s=n("wHJ2"),o=n("9Fiv"),a=n("L2Kv"),r=n("TmUJ"),c=n("yC9S"),l=n("5Dl8"),d=n("lEL+"),u=n("dF44"),p=n("TML7"),m="ultra.components.directives.gridReborn",h="bbGridReborn",b=function(){function e(e,t,n,o,a,l){var d=this;this.$scope=e,this.$element=t,this.$attrs=n,this.$injector=o,this.$q=a,this.timeout=l,this.containers=Object.create(null),this.afterCellDataUpdatedHooks=[],this.debounceRefresh=i.debounce((function(){i.forEach(d.containers,(function(e){return e.applyData()}));var e=i.values(d.containers).reduce((function(e,t){return e.concat(t.renderedColumns)}),[]);(d.options.callbacks.data||s.noop)(d.containers.center.renderedRows,e),d.$scope.$apply(),d.applyAfterCellUpdatedOnce()}),u.d),this.notifyScrollHorizontally=i.throttle(this.$scope.$broadcast.bind(this.$scope.$root,u.b.SCROLL_H),u.d),this.notifyScrollVertically=i.throttle(this.$scope.$broadcast.bind(this.$scope.$root,u.b.SCROLL_V),u.d),this.id="rb-grid-"+n.id,t.addClass(this.id),this.scrollbarWidth=Object(r.a)();var p=a.defer();this.initPromise=p.promise;var m=e.$watch(n[h],(function(e){e&&(d.options=e,d.setDefaultValues(),d.initStyles(),d.createContainers(),d.initRowsPosition(),d.initColumnsPosition(),p.resolve(),m())}));c.b.OnWindow("resize",i.debounce((function(){e.$apply((function(){i.forEach(d.containers,(function(e){e.adjustRows(),e.adjustColumns()}))}))}),u.d),e),e.$on(u.b.COLUMN,(function(e,t){t&&(d.options.columns=t),d.setDefaultValues(),d.afterCellDataUpdated((function(){d.initStyles(),i.forEach(d.containers,(function(e){return e.initColumnsPosition()}))})),i.forEach(d.splitColumns(),(function(e,t){d.containers[t].resetColumns(e)}))})),e.$on(u.b.ROW,(function(e,t){t&&(d.options.rows=t),d.setDefaultValues(),d.initStyles(),d.initRowsPosition(),i.forEach(d.containers,(function(e){return e.resetRows(t)}))})),e.$on(u.b.DATA_UPDATE,(function(){d.debounceRefresh()}))}return e.prototype.initStyles=function(){var e=this,t=[],n=this.$element.find("style#rb-grid");t.push("."+this.id+" .rb-header-row {height: "+Object(l.b)(this.options.headerHeight)+";}"),t.push("."+this.id+" .column-header-button-wrapper, ."+this.id+" .rb-add-column-placeholder {height: "+Object(l.b)(this.options.headerContentHeight)+";}"),t.push("."+this.id+" .rb-cell-row {height: "+Object(l.b)(this.options.rowHeight)+";}"),Array.prototype.push.apply(t,this.options.columns.map((function(t){return"."+e.id+" .rb-col-"+t.id+" {width: "+Object(l.b)(t.columnWidth)+";}"}))),t.push("."+this.id+" .rb-grid-scrollbar-placeholder-x {height: "+Object(l.b)(this.scrollbarWidth)+";}"),t.push("."+this.id+" .rb-grid-scrollbar-placeholder-y {width: "+Object(l.b)(this.scrollbarWidth)+";}"),n.text(t.join("\n"))},e.prototype.initRowsPosition=function(){for(var e=this.options.rows,t=[],n=this.$element.find("style#rb-grid-rows-initial-position"),i=0;i<e.length;i++)t.push("."+this.id+" .rb-row-position-"+e[i].id+" {top: "+Object(l.b)(i*this.options.rowHeight)+";}");n.text(t.join("\n"))},e.prototype.initColumnsPosition=function(){i.values(this.containers).forEach((function(e){return e.initColumnsPosition()}))},e.prototype.createContainers=function(){var e=this;i.forEach(this.splitColumns(),(function(t,n){return e.containers[n]=e.$injector.instantiate(o.a,{position:n,columns:t,grid:e})})),this.containers.center.hasHScrollbar=!0,(this.containers.right||this.containers.center).hasVScrollbar=!0},e.prototype.setDefaultValues=function(e){void 0===e&&(e=this.options),e.headerContentHeight=e.headerContentHeight||e.headerHeight,e.headerBorder=!1!==e.headerBorder,e.rowBorder=!1!==e.rowBorder,e.columns.forEach((function(e){e.position=e.position||"center",e.border=!1!==e.border,e.focusable=!1!==e.focusable}))},e.prototype.getFocusableColumns=function(){var e=this.containers.left,t=this.containers.right;return(e&&e.columns||[]).concat(this.containers.center.columns,t&&t.columns||[]).filter((function(e){return e.focusable}))},e.prototype.splitColumns=function(e){void 0===e&&(e=this.options.columns);var t=i.groupBy(e,(function(e){return e.position}));return t.center=t.center||[],t},e.prototype.scrollContainers=function(e){var t=e.scrollTop,n=void 0===t?-1:t,s=e.scrollLeft,o=void 0===s?-1:s;n>=0&&(this.notifyScrollVertically(n),i.forEach(this.containers,(function(e){e.scrollVertically(n)}))),o>=0&&(this.notifyScrollHorizontally(o),this.containers.center.scrollHorizontally(o))},e.prototype.scrollToLeft=function(e){this.scroll({scrollLeft:0},e)},e.prototype.scrollToRight=function(e){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft()},e)},e.prototype.scrollToRightWithTop=function(e,t){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft(),scrollTop:e},t)},e.prototype.scrollToTop=function(e){this.scroll({scrollTop:0},e)},e.prototype.scrollToBottom=function(e){this.scroll({scrollTop:this.containers.center.getMaxScrollTop()},e)},e.prototype.scroll=function(e,t){t&&this.afterCellDataUpdated(t),this.scrollContainers(e)},e.prototype.canAddColumn=function(){return!!this.options.callbacks.column},e.prototype.afterCellDataUpdated=function(e){this.afterCellDataUpdatedHooks.push(e)},e.prototype.applyAfterCellUpdatedOnce=function(){for(var e=0;e<this.afterCellDataUpdatedHooks.length;e++)try{this.afterCellDataUpdatedHooks[e]()}catch(e){console.error(e)}this.afterCellDataUpdatedHooks.length=0},e.$inject=["$scope","$element","$attrs","$injector","$q",d.b],e}(),g=function(){function e(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=p,this.transclude=!0,this.controller=b,this.controllerAs="grid",this.scope=!0}return e.$inject=["$injector"],e}();s.module(m,[]).directive(h,["$injector",function(e){return e.instantiate(g)}]).directive(o.c,["$injector",function(e){return e.instantiate(o.b)}]).directive(a.b,["$injector",function(e){return e.instantiate(a.a)}])},gORw:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"gW+2":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-documents",use:"icon-small-documents-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-documents"><path d="M1 4h7.0084L11 7v8H1V4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8.0005 4v3h3.0015M4 8h1M4 11h3.9722" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 1h11v12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},ga7A:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("wHJ2"),s=n("pjml"),o=n("vhkR"),a=n("X455"),r=n("Youf"),c="ultra.components.directives.content.contentItem.contentItemType.contentItemLtilaunch",l=function(){function e(e,t,n){this.scope=e,this.ltiService=t,this.contextCourseMembership=n}return e.prototype.ltiLaunch=function(){var e=this;if(!this.scope.content.getContentDisplay().isLtiLink())throw new Error("Attempted to LTI launch a non-LTI content item. "+this.scope.content.contentHandler.toString());this.ltiService.ltiLaunch({courseId:this.scope.content.courseId,contentId:this.scope.content.id,content:this.scope.content,showPreLaunchPanel:!0}).then((function(){return e.markStart()}))},e.prototype.ltiLinkNeedsApproval=function(){var e=this.ltiService.getDomainConfigStatusType(this.scope.content);return s.N.LTIStatusType.NeedsApproval.isEqualTo(e)},e.prototype.markStart=function(){this.contextCourseMembership.isActAsInstructorMembership()||this.scope.content.state===s.r.StateType.Started||this.scope.content.updateState(s.r.StateType.Started,!0)},e.$inject=["scope",o.c,a.d],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=r,this.scope=!1,this.link=function(e,n,i){e.contentItemLtiLaunch=t.$injector.instantiate(l,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(c,[o.b,a.a]).directive("bbContentItemLtilaunch",["$injector",function(e){return e.instantiate(d)}])},hG4E:function(e,t){e.exports='<div id="{{::bbmlEditor.bbmlEditorId}}" class="freeform-response-editor js-bbml-editor">\n  <button\n    ng-show="!bbmlEditor.hasContent() && !bbmlEditor.isEditing"\n    class="js-add-text-block button--dashed add-content-button"\n    ng-click="bbmlEditor.activateEditor()"\n    bb-translate analytics-id="components.directives.attempt-canvas.freeform-response.add-content">\n    components.directives.attempt-canvas.freeform-response.add-content\n  </button>\n  <div ng-show="bbmlEditor.showOverflowMenu()" class="content-item-controls overflow-menu-container" bb-foundation-defer>\n    <bb-overflow-menu\n      ng-if="bbmlEditor.overflowMenuItems"\n      ng-hide="!bbmlEditor.hasContent()"\n      element-id="{{\'overflow-menu\' + bbmlEditor.bbmlEditorId}}"\n      menu-items="bbmlEditor.overflowMenuItems"\n      analytics-id-tag-prefix="components.directives.attempt-canvas.freeform-response.overflowMenu">\n    </bb-overflow-menu>\n  </div>\n  <form name="editorForm">\n    <bb-rich-text-editor\n      ng-show="bbmlEditor.hasContent() || bbmlEditor.isEditing"\n      ng-class="{\'bb-editor-read-only-with-overflow-menu\': !bbmlEditor.isEditing && bbmlEditor.showOverflowMenu()}"\n      class="bb-text-editor-controls-wrapper"\n      name="responseEditor"\n      ng-model="bbmlEditor.bbML.rawText"\n      is-toolbar-hidden="!bbmlEditor.isEditing"\n      is-disabled="bbmlEditor.isSaving"\n      on-blur="bbmlEditor.onBlur()"\n      on-focus="bbmlEditor.focusEditor()"\n      plugin-options="bbmlEditor.pluginOptions"\n      show-word-count="isPrivileged"\n    ></bb-rich-text-editor>\n  </form>\n</div>\n'},ho2F:function(e,t){e.exports='<ul id="performanceCodes-{{gradeInput.id}}" class="f-dropdown performance-code-options bb-foundation-dropdown-close-esc-override" data-dropdown-content>\n  <li class="performance-option-header" bb-translate>components.directives.grade.grade-input.selectPerformanceCode</li>\n  <li ng-repeat="perfCode in gradeNotations()" bb-click-to-invoke-child="a.performance-code-potion">\n    <a href="javascript:void(0);" \n       role="menuitem" \n       ng-click="gradeInput.clickGradeNotation(perfCode,$event)" \n       class="performance-code-potion"\n       analytics-id="directives.gradeInput.selectPerformanceCode.item.link">\n      <span class="code" title="{{perfCode.code}}">{{perfCode.code}}</span>\n      <span class="description" title="{{perfCode.description}}">{{perfCode.description}}</span>\n    </a>\n  </li>\n  <li ng-if="gradeDetail.displayGrade.isOverride" class="undo-override" bb-click-to-invoke-child="button.js-undo-override">\n    <a href="javascript:void(0);" \n       role="menuitem" \n       class="js-undo-override performance-code-potion" \n       ng-click="gradeInput.undoOverride()"\n       analytics-id="directives.grade-input.undoOverride.link">\n      <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n      <span bb-translate>components.directives.grade.grade-input.undoOverride</span>\n    </a>\n  </li>\n</ul>\n\n'},hpcp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("5ikY"),o="ultra.components.directives.bbUiIcon.Blog";Object(i.a)(s.a,o,"bbUiIconBlog")},iAHr:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("D57K"),s=(n("StaB"),n("SMOU"),n("Mak1"),n("s5UK"),n("xjJw"),n("ZKRZ"),n("dpCN"),n("D1Wg"),n("JbSi"),n("TR8k"),n("sZYy"),n("v0wN"),n("QhTW"),n("H/8/"),n("4VOk"),n("HApu"),n("zpX8"),n("nsO7")),o=n("wHJ2"),a=n("Y/dt"),r=n("ihlU"),c=n("QW6a"),l=n("bd9L"),d=n("w9Zy"),u=n("mCEN"),p=n("IiJs"),m=n("vdfi"),h=n("ftvW"),b=n("nYZ0"),g=n("Fvsw"),v=n("NxQJ"),f=n("ZzYr"),y=n("X455"),w=n("ap1t"),C=n("QyCV"),S=n("oi1r"),A=n("o5Lu"),k=n("0JpG"),I=n("pjml"),O=n("u4ux"),D=n("YHe3"),T=n("6mvz"),$=n("zjPK"),x=n("lEL+"),E=n("TnpK"),P=n("Sa5G"),R=n("94SL"),L=n("Oyr+"),j=n("mxgC"),G=n("9hUw"),M=n("3PCF"),_=n("wNBd"),F=n("bs/4"),B=n("3LmG"),N=n("B5op"),q=n("ifgA"),z=n("BLb8"),V=n("5uPl"),H="ultra.components.directives.assessment.assessmentAttempt",U=function(e){function t(t,n,i,s,o,r,l,d,u,p,m,h,b,g,v,f,y,w,C){var S=e.call(this,n.contentData(),m,l,v)||this;return S.$injector=t,S.scope=n,S.$rootScope=i,S.$q=s,S.$modal=o,S.bbOffcanvas=r,S.grade=l,S.localize=d,S.timeout=u,S.contentService=p,S.context=m,S.proctoring=h,S.ultraState=b,S.contentGoalAlignmentPeekStateService=g,S.schemaService=v,S.collabUltra=f,S.currentMembership=y,S.originalityReportService=w,S.peerService=C,S.alignedGoalsCount=0,S.customCategory="",S.confirmedToClose=!1,S.hideOverview=!1,S.preventAutoSubmit=!1,S.submitToGRD=!1,S.showCollabLink=!1,S.hasGroupIndicator=!1,S.hasClassIndicator=!1,S._saveInProgress=!1,S._submitInProgress=!1,S.collabUltraEnabled=!1,S.localizedCourseRoles={},S.submitConfirmedAttempt=function(){S.preventAutoSubmit=!0;var e={type:j.b.AttemptSubmitted,status:j.a.Fail};return Object(z.a)(S.$rootScope,S.contentData.gradingColumn.id),S.patchAttempt().then((function(){S.scope.$broadcast(L.a),S.scope.$broadcast("cancel-upload-all"),S.currentMembership.isActAsInstructorMembership()&&S.content.updateState(I.r.StateType.Completed),S.redirectFromAttempt().then((function(){S.submitInProgress=!1}))}),(function(){S.submitInProgress=!1,Object(j.f)(e)}))},S.patchAttempt=function(){return S.assessmentAttemptRequest.submitAttempt(S.submitToGRD)},S.attempt=n.attempt(),S.contentData=n.contentData(),S.course=n.course(),S.redirect=n.redirect,S.scoreProviderHandle=S.contentData.gradingColumn.scoreProviderHandle||P.B.Test,S.peerService.setContent(S.contentData.courseContent),m.userHasGradebookModificationEntitlement().then((function(e){if(e)S.ultraState.goPeekState("course.outline",{courseId:S.course.id});else{n.assessmentAttempt=S,S.toolAttemptDetail=S.attempt.getToolAttemptDetailItem(S.scoreProviderHandle),P.B.Test.isEqualTo(S.scoreProviderHandle)&&(S.timedTestAttemptDetail=S.attempt.getTimedTestAttemptDetail(),S.hasTimeLimit=S.timedTestAttemptDetail.hasTimeLimit,S.hasTimeLimit&&(S.canContinue=S.timedTestAttemptDetail.hasExtraTime,S.hasUnlimitedExtraTime=S.timedTestAttemptDetail.hasUnlimitedExtraTime,S.hasLimitedExtraTime=S.timedTestAttemptDetail.hasLimitedExtraTime,S.willAutoSubmit=S.timedTestAttemptDetail.willAutoSubmit,S.displayedTimeLimit=Math.floor(S.timedTestAttemptDetail.displayedTimeLimitSeconds/60),S.displayedExtraTime=Math.floor(S.timedTestAttemptDetail.displayedExtraTimeSeconds/60))),S.attemptHandlers=t.instantiate(K),n.$on("bb-register-question-attempt-handlers",(function(e,t,n,i){S.attemptHandlers.registerHandler(t,n,i)})),S.safeAssignEnabled=S.content.isSafeAssignEnabled(),S.assessmentAttemptRequest=new Q(S.attempt,S.safeAssignEnabled,S.attemptHandlers),S.registerAutoSaveEventsAndHandlers(),null==S.contentData.gradingColumn.rubricAssociations&&S.contentData.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise().then((function(e){S.contentData.gradingColumn.rubricAssociations=e.rubricAssociations})),S.content.$fetchIfNotExpanded({expand:"assignedGroups,alignedGoals"}).$then((function(e){g.resolveGoalAlignableContentsForStudent(S.course,S.contentData,S.attempt).then((function(e){var t=e[0],n=e[1];S.goalAlignedContents=t,S.alignedGoalsCount=n}));var t=S.content.assignedGroups&&S.content.assignedGroups[0];S.content.courseId&&t&&S.collabUltra.getCollabSessionStatus(S.content.courseId,t.groupId).then((function(e){null!==e&&(S.collabUltraEnabled=!0)}))})),S.calculateKeysAndIconsBasedOnCategory(),S.content.canSubmitToGlobalReferenceDatabase()&&S.context.getPreference(c.b).then((function(e){e&&(S.submitToGRD="true"===e.value)})),n.$on(a.e,(function(){S.save()})),n.$on("$stateChangeStart",(function(e,t,i,s,o){var a=t.name;if(s.name!==a&&a.indexOf("attempt")<0&&a.indexOf("assessment-details")<0){var r={type:j.b.AttemptSaveAndClosed,status:j.a.Success},c={type:j.b.AttemptSubmitted,status:j.a.Success};if(S.confirmedToClose)return void Object(j.f)(r);if(n.currentRemainingSeconds>0&&!S.submitInProgress)return e.preventDefault(),S.confirmLeavingModal&&S.confirmLeavingModal.dismiss(),void S.showConfirmLeavingModal();if(S.submitInProgress)return void Object(j.f)(c);Object(j.f)(r)}})),n.$on("bb-test-resumed",(function(e){S.context.getPreference(S.extraTimeAcknowledgedKey).catch((function(e){404===e.$response.status&&(S.extraTimeAcknowledged="true",S.showResumeTestModal())}))})),n.$on("bb-time-is-up",(function(e,t){if(!S.preventAutoSubmit){S.submitModalInstance&&S.submitModalInstance.dismiss(),S.softTimeUpModal&&S.softTimeUpModal.dismiss(),S.confirmLeavingModal&&S.confirmLeavingModal.dismiss(),S.resumeTestModal&&S.resumeTestModal.dismiss();var n=S.$q.defer();n.promise.then((function(){if("hard"===t.stopMode)S.showTimeUpModal(),S.safeAutoSave();else if("soft"===t.stopMode){S.scope.showTimeUpIndicator=!0,S.timeout((function(){S.scope.showTimeUpIndicator=!1}),S.scope,6e4),S.extraTimeAcknowledged="true",S.showSoftTimeUpModal()}})),S.autoSaveMonitorDeferred?S.scope.$broadcast("bb-start-auto-submission",n):n.resolve()}})),n.$on("submit-to-global-reference",(function(e,t){S.submitToGRD=t.submitToGRD})),S.content.isGroupContent&&S.content.ui.hasConversationAttached&&S.content.attachedForumLink&&S.loadCollabConfig(),S.showConversations()&&S.updateIndicators();var i=S.contentService.indicatorCacheService.$onClassConversationIndicatorRemoved((function(e,t,n){t===S.content.courseId&&n===S.content.id&&(S.hasClassIndicator=!1)})),s=S.contentService.indicatorCacheService.$onGroupConversationIndicatorRemoved((function(e,t,n){t===S.content.courseId&&n===S.content.id&&(S.hasGroupIndicator=!1)}));n.$on("$destroy",(function(){i(),s()}))}S.fetchOriginalityReportProviderType()})),S}return Object(i.__extends)(t,e),t.prototype.fetchOriginalityReportProviderType=function(){return this.originalityReportService.retrieveOriginalityIntegration(this.content)},Object.defineProperty(t.prototype,"isPeerGrading",{get:function(){return this.peerService.peerGrading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peerReviewDueDate",{get:function(){return this.peerService.peerReviewDueDate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfPeerReviewsToComplete",{get:function(){return this.peerService.numOfPeerReviewsToComplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowLatePeerReviews",{get:function(){return this.peerService.allowLatePeerReviews},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGradingConfigured",{get:function(){return this.peerService.isPeerGradingConfigured},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSubmissionLate",{get:function(){return this.isOverdue&&!this.isAssessmentSubmissionComplete||this.attemptCountSubmittedLate>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAssessmentSubmissionComplete",{get:function(){return!!(this.attemptCount&&this.attemptCount>0&&this.attemptCountSubmitted&&this.attemptCountSubmitted>0)},enumerable:!0,configurable:!0}),t.prototype.getMembershipByUser=function(e){return s.find(this.course.memberships,(function(t){return t.user.id===e.id}))},t.prototype.getCourseRole=function(e){return this.getLocalizedRoleNameByCourseRole(this.getMembershipByUser(e).courseRole)},t.prototype.canSendMessage=function(e){var t=this.getMembershipByUser(e);return!(this.course.isPrivate()||this.course.isComplete())&&t.isAvailable&&t.user.isAvailable},t.prototype.isInactive=function(e){var t=this.getMembershipByUser(e);return!t.isAvailable||!t.user.isAvailable},t.prototype.getLocalizedRoleNameByCourseRole=function(e){var t=e.identifier.toString();if(this.localizedCourseRoles[t])return this.localizedCourseRoles[t];if(t in I.y.toBeLocalizedRoleLabels){var n=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:I.y.toBeLocalizedRoleLabels[t]});return this.localizedCourseRoles[t]=n,n}return e.courseName.rawValue},Object.defineProperty(t.prototype,"extraTimeAcknowledged",{set:function(e){this.context.setPreference(this.extraTimeAcknowledgedKey,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraTimeAcknowledgedKey",{get:function(){return"attempt"+this.attempt.id.split("_").join(".")+".extra.time.acknowledged"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentRemainingMinutes",{get:function(){return Math.ceil(this.scope.currentRemainingSeconds/60)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupId",{get:function(){return this.content&&this.content.assignedGroups&&this.content.assignedGroups[0].groupId},enumerable:!0,configurable:!0}),t.prototype.initExecAutoSubmitDeferred=function(){this.execAutoSubmitDeferred||(this.execAutoSubmitDeferred=this.$q.defer())},t.prototype.safeAutoSave=function(){var e=this;this.autoSaveMonitorDeferred?(this.initExecAutoSubmitDeferred(),this.autoSaveMonitorDeferred.promise.then((function(){e.autoSubmit()}))):this.autoSubmit()},t.prototype.calculateKeysAndIconsBasedOnCategory=function(){var e=this.contentData.gradingColumn.gradebookCategory,t=e&&!e.isUserDefined,n=(this.course.isOrganization?"organization":"course")+".content.assessment.modal.confirmSubmitAttemptAlert",i=t?e.title:"custom",s="body";this.isOverdue&&(s="late"),this.customCategory=t?"":e&&e.title,this.iconClass=t?i.split(".")[0].toLowerCase():"custom-item",this.groupAssessmentKey="course.content.assessment.settings.groupAssessment."+i,this.headerKey="course.content.assessment.type."+i,this.content.isGroupContent&&(i=t?"group"+i:"groupCustom"),this.submitModalHeaderKey=n+".title."+i,this.submitModalBodyKey=n+"."+s+"."+i,t||(this.submitModalTranslateOptions={title:{locale:this.localize.getLocale(this.scope),key:this.submitModalHeaderKey,params:{title:this.customCategory},noWrap:!0,noEscape:!0}})},Object.defineProperty(t.prototype,"content",{get:function(){return this.contentData.courseContent},enumerable:!0,configurable:!0}),t.prototype.closePanel=function(){this.confirmedToClose=!0,this.redirectFromAttempt()},t.prototype.showConfirmLeavingModal=function(){var e=this;this.confirmLeavingModal=this.$modal.open({template:N,scope:this.scope}),this.confirmLeavingModal.result.then((function(){e.closePanel()}))},t.prototype.showSoftTimeUpModal=function(){var e=this;this.softTimeUpModal=this.$modal.open({template:B,backdrop:"static",scope:this.scope}),this.softTimeUpModal.result.then((function(){e.safeAutoSave(),e.execAutoSubmitDeferred.promise.then((function(){e.redirectFromAttempt().then((function(){e.submitInProgress=!1}))}))}),(function(){e.scope.showTimeUpIndicator=!1,e.scope.$broadcast("bb-cancel-auto-submission")}))},t.prototype.showResumeTestModal=function(){var e=this;this.resumeTestModal=this.$modal.open({template:B,backdrop:"static",scope:this.scope}),this.resumeTestModal.result.then((function(){e.safeAutoSave(),e.execAutoSubmitDeferred.promise.then((function(){e.redirectFromAttempt().then((function(){e.submitInProgress=!1}))}))}))},t.prototype.showTimeUpModal=function(){var e=this;this.$modal.open({template:F,backdrop:"static",scope:this.scope}).result.then((function(){e.execAutoSubmitDeferred.promise.then((function(){e.redirectFromAttempt()}))}),(function(){e.execAutoSubmitDeferred.promise.then((function(){e.redirectFromAttempt()}))}))},t.prototype.save=function(){var e=this;if(!this.saveInProgress)if(this.saveDeferred)this.saveInProgress=!0,this.attemptHandlers.patchAllDirtyAttempts().then((function(){e.waitForDeferredSaveAndredirectFromAttempt()}));else{var t={type:j.b.AttemptSaveAndClosed,status:j.a.Fail};this.attemptHandlers.patchAllDirtyAttempts().then((function(){e.redirectFromAttempt()}),(function(){Object(j.f)(t)}))}},t.prototype.waitForDeferredSaveAndredirectFromAttempt=function(){var e=this,t={type:j.b.AttemptSaveAndClosed,status:j.a.Fail};this.saveDeferred.promise.then((function(){e.redirectFromAttempt(),e.saveInProgress=!1}),(function(){e.saveInProgress=!1,Object(j.f)(t)}))},t.prototype.submit=function(){var e=this;this.saveInProgress||(this.saveDeferred?(this.saveInProgress=!0,this.saveDeferred.promise.then((function(){e.doSubmit(),e.saveInProgress=!1}),(function(){e.saveInProgress=!1}))):this.doSubmit())},t.prototype.doSubmit=function(){var e=this;this.submitInProgress=!0,this.calculateKeysAndIconsBasedOnCategory(),this.submitModalInstance=this.$modal.open({template:_,scope:this.scope}),this.submitModalInstance.result.then(this.submitConfirmedAttempt,(function(){e.submitInProgress=!1}))},t.prototype.getStudentSubmissionRawText=function(e){return e.studentSubmission&&e.studentSubmission.rawText||""},t.prototype.disableButtonsOnEmptySubmission=function(){return""===this.getStudentSubmissionRawText(this.attempt)},t.prototype.disableButtonsOnNoAttempt=function(){var e=this.attempt.toolAttemptDetail,t=e&&e[this.scoreProviderHandle.toString()],n=t&&t.status,i=t&&t.questionAttempts;return I.C.AttemptStatus.Completed.isEqualTo(n)?!!Array.isArray(i)&&i.every((function(e){return P.A.PresentationOnly.isEqualTo(e.questionType)})):I.C.AttemptStatus.NotAttempted.isEqualTo(n)},t.prototype.shouldDisableSaveSubmitButtons=function(){return this.saveInProgress||this.assessmentAttemptRequest&&this.assessmentAttemptRequest.isRequestInProgress()||this.disableButtonsOnEmptySubmission()&&this.disableButtonsOnNoAttempt()&&!this.lastSaved},t.prototype.autoSubmit=function(){var e,t=this,n={type:j.b.AttemptSubmitted,status:j.a.Fail};this.submitInProgress=!0,this.attempt.status=I.C.AttemptStatus.NeedsGrading,this.attempt.toolAttemptDetail={},this.attempt.toolAttemptDetail[this.scoreProviderHandle.toString()]={type:P.c.Test},this.safeAssignEnabled&&(this.attempt.submissionParams=((e={})[M.b]={globalReferenceDatabase:this.submitToGRD},e)),this.initExecAutoSubmitDeferred(),this.attempt.$patch().$then((function(){t.scope.$broadcast(L.a),t.scope.$broadcast("cancel-upload-all"),t.execAutoSubmitDeferred.resolve()}),(function(e){Object(j.d)()&&401!==e.$response.status&&(e.$response.status=null),Object(j.f)(n)}))},Object.defineProperty(t.prototype,"saveInProgress",{get:function(){return this._saveInProgress},set:function(e){this._saveInProgress=e,this.$rootScope.$broadcast(e?a.b:a.a),this.scope.$broadcast("bb-assessment-attempt-question-readonly",this._saveInProgress)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"submitInProgress",{get:function(){return this._submitInProgress},set:function(e){this.$rootScope.$broadcast(e?a.d:a.c),this._submitInProgress=e},enumerable:!0,configurable:!0}),t.prototype.redirectFromAttempt=function(){var e=this,t=this.$q.defer();return this.assessmentAttemptRequest.refreshAttempt().then((function(){e.redirect().then((function(){return t.resolve()}))})),t.promise},t.prototype.registerAutoSaveEventsAndHandlers=function(){var e=this;this.scope.$on("bb-autosave-form",(function(t,n){switch(n){case l.a.Change:e.saveInProgress||(e.saveDeferred=e.$q.defer(),e.autoSaveMonitorDeferred=e.$q.defer());break;case l.a.Saved:e.saveDeferred&&e.timeout((function(){e.saveDeferred.resolve(),e.lastSaved=new Date}),e.scope),e.autoSaveMonitorDeferred&&e.autoSaveMonitorDeferred.resolve()}}))},t.prototype.showGoals=function(){this.hideOverview=!0},t.prototype.hideGoals=function(){this.hideOverview=!1},t.prototype.showConversations=function(){return v.a.showConversations(this.content)},t.prototype.openRubricView=function(){var e=this;this.timeout((function(){var t={columnId:e.contentData.gradingColumn.id};e.ultraState.goPeekState("rubric-view",t)}),this.scope,0,!1)},t.prototype.openSafeAssignView=function(){this.ultraState.goPeekState("attempt-safe-assign-setting",{submitToGRD:this.submitToGRD})},t.prototype.loadCollabConfig=function(){var e=this;this.collabUltra.getCollabB2Info().then((function(t){200===t.$response.status?e.showCollabLink=!0:e.showCollabLink=!1}),(function(t){e.showCollabLink=!1})),!this.forumId&&this.content.attachedForumLink&&this.content.attachedForumLink["resource/x-bb-courselink"]&&this.course.contents.$find(this.content.attachedForumLink["resource/x-bb-courselink"].courseContent).$then((function(t){e.forumId=t.contentDetail["resource/x-bb-forumlink"].id}))},Object.defineProperty(t.prototype,"shouldShowCollabLink",{get:function(){return this.showCollabLink&&o.isDefined(this.forumId)&&this.collabUltraEnabled},enumerable:!0,configurable:!0}),t.prototype.launchCollabSession=function(){var e=window.open();this.collabUltra.launchDiscussionSession(this.content.courseId,this.forumId,this.content.assignedGroups[0].groupId).then((function(t){e.location.href=t.url}),(function(t){e.close(),t.$response.status=null}))},t.prototype.updateIndicators=function(){var e=this;this.content&&this.contentService.fetchIndicators(this.content.courseId).then((function(){var t=e.contentService.getCourseContentCache(e.content.courseId,e.content.id);t&&(e.hasClassIndicator=t.classConversationHasIndicator,e.hasGroupIndicator=!!t.groupIds)}))},t.prototype.getProctoringBrowserText=function(){return this.proctoring.getProctoringOverviewBrowserText(this.content)},t.$inject=["$injector","scope","$rootScope","$q","$modal",d.e,A.h,k.serviceName,x.b,b.f,g.b,D.b,E.d,m.d,S.b,p.b,y.d,V.b,G.b],t}(R.a),Q=function(){function e(e,t,n){this.attempt=e,this.isSafeAssignEnabled=t,this.attemptHandlers=n,this.isAttemptPatchInProgress=!1,this.isAttemptRefreshInProgress=!1}return e.prototype.waitForInProgressAttemptPatch=function(){return this.attempt.$asPromise()},e.prototype.refreshAttempt=function(){var e=this;return this.isAttemptRefreshInProgress=!0,this.attempt.$fetch({expand:"toolAttemptDetail"}).$asPromise().finally((function(t){return e.isAttemptRefreshInProgress=!1,t}))},e.prototype.submitAttempt=function(e){var t=this;return this.isAttemptPatchInProgress=!0,this.attemptHandlers.patchAllDirtyAttempts().then((function(){return t.waitForInProgressAttemptPatch().then((function(){var n;return t.attempt.status=I.C.AttemptStatus.NeedsGrading,t.attempt.toolAttemptDetail={},t.attempt.toolAttemptDetail[P.B.Test.toString()]={type:P.c.Test},t.isSafeAssignEnabled&&(t.attempt.submissionParams=((n={})[M.b]={globalReferenceDatabase:e},n)),t.attempt.$patch().$asPromise()})).finally((function(e){return t.isAttemptPatchInProgress=!1,e}))}))},e.prototype.isRequestInProgress=function(){return this.isAttemptPatchInProgress||this.isAttemptRefreshInProgress},e}(),K=function(){function e(e){this.$q=e,this.attempts=[]}return e.prototype.registerHandler=function(e,t,n){this.attempts.push(new W(e,t,n))},e.prototype.patchAllDirtyAttempts=function(){var e=[];return this.attempts.forEach((function(t){t.isDirty()&&(t.getAttempt().$cancel(),t.prepareGivenAnswer(),e.push(t.getAttempt().$patch(["questionType","givenAnswer","givenAnswers"]).$asPromise()))})),this.$q.all(e)},e.prototype.length=function(){return this.attempts.length},e.$inject=["$q"],e}(),W=function(){function e(e,t,n){this.isDirty=e,this.getAttempt=t,this.prepareQuestionAttemptGivenAnswer=n}return e.prototype.prepareGivenAnswer=function(){return this.prepareQuestionAttemptGivenAnswer(this.getAttempt())},e}(),J=function(){function e(e,t){var n=this;this.$compile=e,this.$injector=t,this.restrict="E",this.scope={attempt:"&",contentData:"&",course:"&",redirect:"&"},this.template=q,this.link=function(e,t,i){e.assessmentAttempt=n.$injector.instantiate(U,{scope:e,element:t,attrs:i})}}return e.$inject=["$compile","$injector"],e}();o.module(H,[r.a,f.a,w.c,C.a,O.b,T.a,$.a,p.a,h.a,D.a,G.a,u.a]).directive("bbAssessmentAttempt",["$injector",function(e){return e.instantiate(J)}])},iJ4p:function(e,t){e.exports='<bb-rich-text-editor\n  plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}"\n  ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n  is-read-only="true">\n</bb-rich-text-editor>\n\n<bb-question-answer-status was-late="::assessmentQuestion.wasAnsweredLate()"\n                           hide-correctness-text="true"\n                           class="essay-attention">\n</bb-question-answer-status>\n<div class="panel">\n  <span class="answer-panel-heading" bb-translate>components.directives.assessment-question.essay.answer-header</span>\n  <bb-rich-text-editor\n    plugin-options="{\'attachment\': true, \'math\': true}"\n    ng-model="assessmentQuestion.questionAttempt.givenAnswer.rawText"\n    is-read-only="true">\n  </bb-rich-text-editor>\n</div>\n'},iViV:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var i=n("wHJ2"),s=n("nsO7"),o=n("o5Lu"),a=n("3l3z"),r=n("LN5R"),c=n("TmUJ"),l=n("qH3X"),d=n("+4Px"),u=n("lEL+"),p=n("dF44"),m=n("lEWr"),h="ultra.components.directives.gradeGridCellEditorReborn",b=function(){function t(e,t,n,i,s,o,a,r){var c=this;this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=s,this.gradeGridRebornController=o,this.gradeService=a,this.timeout=r,this.initialize(),n.$on(l.a.REFRESH_CELL_EDITOR,(function(){c.initialize(),c.scope.gradeGridColumnReborn.getIsOtherGroupMemberGraded()})),n.$on("$destroy",(function(){c.removeErrorMessage()}))}return t.prototype.initialize=function(){var e=this;this.score=this.scope.gradeGridColumnReborn.score,this.element.find("input").focus(),this.element.addClass("purple-outline"),this.timeout((function(){e.element.find("input").select()}),this.scope,0,!1),this.userName=this.scope.gradeGridColumnReborn.userName,this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.removeErrorMessage=function(){this.element.removeClass("validation-alert"),s.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),s.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)},t.prototype.createErrorMessage=function(){var e=this;if(this.messageElement&&this.removeErrorMessage(),s.isUndefined(this.messageElement)){this.element.addClass("validation-alert");var n=this.element.parent(".grade-grid-cell").offset();n.top+=80,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=function(t){var i=n.left+t.width(),s=n.top+t.height(),o=e.gradeGridRebornController.getGradeGridContainerElementRight();s>e.gradeGridRebornController.getGradeGridContainerElementBottom()&&(n.top-=t.height()+80),i>o&&(n.left-=i-o+Object(c.a)()),e.messageElement.offset(n)},this.$compile(t.CELL_MESSAGE_TEMPLATE)(this.messageScope,(function(t){e.messageElement=t,e.element.parents("bb-grade-grid-reborn").append(e.messageElement)}))}},Object.defineProperty(t.prototype,"isValidated",{get:function(){return this._isValidated},set:function(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage(),this.scope.gradeGridColumnReborn.isReadyToPost=this.score&&this.isValidated},enumerable:!0,configurable:!0}),t.prototype.stopPropagation=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.mousedown=function(){e(this.window).trigger("click")},t.prototype.onChange=function(){var e=this;this.checkValue(this.score).then((function(t){e.isValidated=t}))},t.prototype.onInputBlur=function(e){this.scope.gradeGridColumnReborn.isPastDueZero&&""===this.score&&(this.score=this.scope.gradeGridColumnReborn.score),this.scope.gradeGridColumnReborn.onInputBlur(e,this.isValidated,this.score)},t.prototype.checkValue=function(e){var t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)},t.prototype.onKeydown=function(t){d.y(t)?(this.scope.gradeGridColumnReborn.gotoNextCell(),e(t.target).blur(),this.mousedown(),t.preventDefault(),t.stopPropagation()):t.keyCode===d.g?(e(t.target).blur(),this.mousedown(),this.scope.$emit(p.b.LEAVE_CELL)):d.x(t)&&(!this.score||t.keyCode!==d.j&&t.keyCode!==d.s?this.mousedown():t.stopPropagation())},t.$inject=["$compile","$window","scope","element","attrs","gradeGridRebornController",o.h,u.b],t.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>',t}(),g=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.template=m,this.require="^"+r.a,this.link=function(e,n,i,s){e.gradeGridCellEditorReborn=t.$injector.instantiate(b,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();i.module(h,[a.a]).directive("bbGradeGridCellEditorReborn",["$injector",function(e){return e.instantiate(g)}])}).call(this,n("5iHu"))},ifgA:function(e,t){e.exports='<div class="tests test-attempt assessment-attempt" ng-class="{\'late-attempt\': assessmentAttempt.isOverdue }"\n     bb-timed-test-indicator="assessmentAttempt.timedTestAttemptDetail">\n  <div class="panel-wrap panel-wrap-flex has-bb-panel-header has-autosave-footer" ng-class="{\'over-close-button-small\': assessmentAttempt.hideOverview, \'has-footer\': !assessmentAttempt.hideOverview}">\n    <header class="black-panel-header">\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background" type="button" analytics-id="course.content.assessment.left.canvas.toggle.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>course.content.assessment.attempt.menu</span>\n        </button>\n        <h1 class="panel-title" bb-translate="{{::assessmentAttempt.headerKey}}" translate-values="{\'title\': assessmentAttempt.customCategory}"></h1>\n        <button bb-peek-sref="conversations({courseId: assessmentAttempt.content.courseId, contentId: assessmentAttempt.content.id})"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.header.openAria\'}"\n                class="open-conversation standard-button dark-background" ng-show="assessmentAttempt.showConversations()"\n                analytics-id="course.content.assessment.conversation.button">\n          <bb-svg-icon size="small" icon="conversation" ng-class="{\'has-indicator\': assessmentAttempt.hasClassIndicator}"></bb-svg-icon>\n        </button>\n        <button class="standard-button dark-background" id="details-info-button" type="button" tabindex="0"\n                bb-translate-attrs="{\'aria-label\': \'course.content.assessment.overview.detailsAriaLabel\'}"\n                bb-peek-sref="assessment-details({courseId: assessmentAttempt.content.courseId, contentId: assessmentAttempt.content.id, submitToGRD: assessmentAttempt.submitToGRD})"\n                analytics-id="course.content.assessment.details.button">\n          <bb-svg-icon size="small" icon="information"></bb-svg-icon>\n        </button>\n      </div>\n    </header>\n    <header class="row panel-header show-for-small-only" ng-show="assessmentAttempt.hideOverview">\n      <div class="goal-small-panel">\n        <button class="button super-clear icon" ng-click="assessmentAttempt.hideGoals()" analytics-id="course.content.assessment.goals.button">\n          <bb-svg-icon size="small" icon="arrow-left"></bb-svg-icon>\n          <span class="sr-only" bb-translate>course.goal-alignment.goal.sr-only.closeGoals</span>\n        </button>\n        <div class="goal-head">\n          <span class="goal-title" bb-translate>course.goal-alignment.goal.header</span>\n        </div>\n      </div>\n    </header>\n    <section class="panel-content has-slide-up-section" ng-class="{\'section-slide\': assessmentAttempt.hideOverview}">\n      \x3c!-- do not hide header on small - it is needed --\x3e\n      <bb-panel-header\n        show-course="true"\n        show-conversations="assessmentAttempt.showConversations()"\n        ng-class="{\'has-indicator\': assessmentAttempt.hasClassIndicator}"\n        content="assessmentAttempt.content"\n        panel-title="assessmentAttempt.content.title"\n        can-edit="false">\n      </bb-panel-header>\n      <div ng-if="::assessmentAttempt.contentData.gradingColumn.anonymousGrading" class="assessment-attempt__anonymous-grading-info" bb-translate>course.content.assessment.overview.anonymousGrading</div>\n      <div class="panel-content-flex panel-content-inner assessment-overview-panel">\n        <div class="panel-content-full panel-content-separator">\n          <bb-attempt-canvas attempt="assessmentAttempt.attempt"\n                             score-provider-handle="assessmentAttempt.contentData.gradingColumn.scoreProviderHandle"\n                             canvas-type="\'author\'"\n                             gradebook-category="assessmentAttempt.contentData.gradingColumn.gradebookCategory"\n                             ng-if="assessmentAttempt"></bb-attempt-canvas>\n        </div>\n        <div class="panel-content-info assessment-summary">\n          <div class="row collapse">\n            <div class="small-10 columns">\n              <h2 bb-translate>course.content.assessment.overview.detailsHeader</h2>\n            </div>\n          </div>\n          <ul class="row">\n            <li>\n              <bb-svg-icon size="medium" icon="calendar"></bb-svg-icon>\n              <div class="js-date-box"\n                   ng-switch="assessmentAttempt.dueDate != null">\n                <span class="settings-label" bb-translate>course.content.assessment.overview.dueDate</span>\n                <span class="settings-link" ng-switch-when="true">\n                  <bb-datetime class="js-due-date"\n                               value="::assessmentAttempt.dueDate"\n                               format="Short"\n                               timezone-format="Short"\n                  >\n                  </bb-datetime>\n                </span>\n                <span class="settings-link" ng-switch-default bb-translate>course.content.assessment.overview.noDueDate</span>\n              </div>\n            </li>\n\n            \x3c!--Time Limit --\x3e\n            <li ng-if="assessmentAttempt.hasTimeLimit" class="js-time-limit-type">\n              <bb-svg-icon size="medium" icon="time-limit"></bb-svg-icon>\n              <div>\n                <span class="settings-label" bb-translate>course.content.assessment.test.settings.timeLimit.label</span>\n                <span class="settings-link">\n                  <span class="js-time-limit-info">{{assessmentAttempt.displayedTimeLimit * 60 | timeSpan: "m": this}}</span>\n                  <bb-translate ng-if="!assessmentAttempt.canContinue">course.content.assessment.test.settings.timeLimit.autoSubmission</bb-translate>\n                </span>\n              </div>\n            </li>\n\n            \x3c!--Rubric--\x3e\n            <li class="js-rubric-view" ng-if="assessmentAttempt.rubricViewIsVisible">\n              <bb-svg-icon size="medium" icon="rubric"></bb-svg-icon>\n              <div class="tool-text">\n                <span class="settings-label" bb-translate>course.content.assessment.overview.rubric</span>\n                <span class="settings-link">\n                  <button class="button button--text" ng-click="assessmentAttempt.openRubricView()" bb-translate analytics-id="course.content.assessment.overview.gradedWithRubric">course.content.assessment.overview.gradedWithRubric</button>\n                </span>\n              </div>\n            </li>\n\n            \x3c!--Goals--\x3e\n            <li class="goal-alignment-li" ng-if="assessmentAttempt.alignedGoalsCount">\n              <div class="goal-icon" bb-translate-attrs="{\'alt\': \'course.goal-alignment.goal.sr-only.goalImage\'}">\n                <bb-svg-icon size="medium" icon="goal"></bb-svg-icon>\n              </div>\n              <div class="goal-text">\n                <span class="settings-label" bb-translate>course.goal-alignment.goal.header</span>\n                <span class="settings-link">\n                  <a class="show-for-large-up" role="button" tabindex="0" bb-peek-sref="content-goal-alignment-for-student" bb-translate\n                     translate-values="{number: assessmentAttempt.alignedGoalsCount}" analytics-id="course.goal-alignment.goal.alignedGoals.plural">\n                    course.goal-alignment.goal.alignedGoals.plural\n                  </a>\n                  <a href="javascript:void(0);" class="hide-for-large-up" role="button" ng-click="assessmentAttempt.showGoals()" bb-translate\n                     translate-values="{number: assessmentAttempt.alignedGoalsCount}" analytics-id="course.goal-alignment.goal.alignedGoals.plural">\n                    course.goal-alignment.goal.alignedGoals.plural\n                  </a>\n                </span>\n              </div>\n            </li>\n\n            \x3c!--Attempt Count--\x3e\n            <li>\n              <bb-svg-icon size="medium" icon="attempts"></bb-svg-icon>\n              <div ng-if="assessmentAttempt.showAttemptDescription()">\n                <span class="settings-label" bb-translate>course.content.assessment.overview.attempts</span>\n                <span class="settings-link">\n                  <span ng-class="{\'vertical-bar\' : assessmentAttempt.showAttemptsSubmittedDescription() }"\n                        bb-translate translate-values="{count: assessmentAttempt.unsubmittedAttemptsLeft}">\n                    {{::assessmentAttempt.attemptsRemainingDescriptionKey}}\n                  </span>\n                  <span ng-if="::assessmentAttempt.showAttemptsSubmittedDescription()">\n                    <span bb-translate translate-values="{submitted: assessmentAttempt.attemptCountSubmitted, late: assessmentAttempt.attemptCountSubmittedLate}">\n                      {{::assessmentAttempt.attemptsSubmittedDescriptionKey}}\n                    </span>\n                  </span>\n                </span>\n              </div>\n            </li>\n\n            \x3c!--Group--\x3e\n            <li ng-if="assessmentAttempt.content.isGroupContent">\n              <bb-svg-icon size="medium" icon="groups"></bb-svg-icon>\n              <div>\n                <span class="settings-label" bb-translate="{{::assessmentAttempt.groupAssessmentKey}}" translate-values="{title: assessmentAttempt.customCategory}"></span>\n                <span class="settings-link ellipsis" title="{{assessmentAttempt.content.assignedGroups[0].groupTitle}}">{{assessmentAttempt.content.assignedGroups[0].groupTitle}}</span>\n              </div>\n            </li>\n\n            \x3c!--Safe Assign--\x3e\n            <li ng-if="assessmentAttempt.originalityReportService.isOriginalityReportEnabled() &&\n                       assessmentAttempt.originalityReportService.isSafeAssignActiveOriginalityProvider()">\n              <bb-svg-icon size="medium" icon="safe-assign"></bb-svg-icon>\n              <div class="tool-text">\n                <span class="settings-label" bb-translate>course.content.originalityReport.settings.label</span>\n                <span class="settings-link">\n                  \x3c!-- htmlhint:analytics-id:disable --\x3e\n                  <a href="javascript:void(0);"\n                    class="js-setting-safeAssign"\n                    ng-click="assessmentAttempt.openSafeAssignView()"\n                    role="button"\n                    tabindex="0"\n                    analytics-id="course.content.assessment.test.settings.safeAssign.enabled">\n                      {{assessmentAttempt.originalityReportService.getOriginalityReportLinkText(false)}}\n                  </a>\n                  \x3c!-- htmlhint:analytics-id:enable --\x3e\n                </span>\n              </div>\n            </li>\n\n            \x3c!--Originality Integration--\x3e\n            <li ng-if="assessmentAttempt.originalityReportService.isOriginalityReportEnabled() &&\n                       assessmentAttempt.originalityReportService.isIntegrationActiveOriginalityProvider()">\n              <bb-svg-icon size="medium" icon="safe-assign"></bb-svg-icon>\n              <div class="tool-text">\n                <span class="settings-label" bb-translate>course.content.originalityReport.settings.label</span>\n                <span class="js-setting-originality-integration">\n                  {{assessmentAttempt.originalityReportService.getOriginalityReportLinkText(false)}}\n                </span>\n              </div>\n            </li>\n\n            \x3c!--Proctoring--\x3e\n            <li class="proctoring-summary" ng-if="::assessmentAttempt.content.isSecureBrowserRequiredToTake()">\n              <bb-svg-icon size="medium" icon="privacy-policy"></bb-svg-icon>\n              <div class="proctoring-peek-container">\n                <span class="settings-label" bb-translate>components.services.proctoring.overview.label</span>\n                <span class="settings-link">\n                  <span bb-translate>{{assessmentAttempt.getProctoringBrowserText()}}</span>\n                </span>\n              </div>\n            </li>\n\n            \x3c!--Peer review--\x3e\n            <li bb-feature-toggle="peerAssessmentFeatureFlag" remove-from-dom="true"\n                ng-if="assessmentAttempt.isPeerGradingConfigured">\n              <bb-svg-icon icon="peer-review" size="medium"></bb-svg-icon>\n              <div class="peer-review-container">\n                <span bb-translate class="settings-label">course.content.assessment.test.settings.peerGrading.summary.label</span>\n                <span class="settings-link">\n                  <span bb-translate\n                        translate-values="{numOfPeersToReview: assessmentAttempt.numOfPeerReviewsToComplete, datetime: assessmentAttempt.peerReviewDueDate}">\n                    course.content.assessment.test.settings.peerGrading.summary.formattedDate\n                  </span>\n                </span>\n              </div>\n            </li>\n          </ul>\n          <div class="row">\n            <span class="settings-label" bb-translate>course.content.assessment.overview.gradingHeader</span>\n            <div class="no-submission-card">\n              <bb-ui-content-icon class="no-submission-icon" icon="assessmentAttempt.iconClass" color="primary"></bb-ui-content-icon>\n              <div class="no-submission-text">\n                <span class="no-submission-label" bb-translate>course.content.assessment.overview.highestPossible</span>\n              </div>\n              <div class="no-submission-value" bb-translate translate-values="{point: assessmentAttempt.highestPossibleScore}">course.content.assessment.overview.maxPoint.plural</div>\n            </div>\n          </div>\n          \x3c!--Assigned Peer Reviews--\x3e\n          <bb-assigned-peer-grading bb-feature-toggle="peerAssessmentFeatureFlag" remove-from-dom="true"\n                                    ng-if="assessmentAttempt.isPeerGradingConfigured"\n                                    submission-due-date="::assessmentAttempt.dueDate"\n                                    peer-review-due-date="::assessmentAttempt.peerReviewDueDate"\n                                    peer-reviews-per-student="::assessmentAttempt.numOfPeerReviewsToComplete"\n                                    allow-late-peer-reviews="::assessmentAttempt.allowLatePeerReviews"\n                                    is-submission-complete="assessmentAttempt.isPeerReviewComplete"\n                                    is-submission-late="assessmentAttempt.isSubmissionLate"\n                                    content="assessmentAttempt.content">\n          </bb-assigned-peer-grading>\n\n          <div class="row" ng-if="assessmentAttempt.content.description">\n            <span class="settings-label" bb-translate>course.content.assessment.overview.descriptionHeader</span>\n            <span>\n              {{assessmentAttempt.content.description}}\n            </span>\n          </div>\n          \x3c!--Additional Notes --\x3e\n          <div class="proctoring-additional-notes" ng-if="::assessmentAttempt.content.isSecureBrowserRequiredToTake()">\n            <span class="settings-label" bb-translate>components.services.proctoring.delivery.attempt.additionalNotes.label</span>\n            <span class="desc-content" bb-translate>components.services.proctoring.delivery.attempt.additionalNotes.description</span>\n          </div>\n\n          <div class="row group-assignment-members" ng-if="assessmentAttempt.content.isGroupContent">\n            <h2 class="peek-title-h2">\n              <bb-translate translate-values="{number: assessmentAttempt.contentData.groupMembers.length}">course.content.assessment.test.group.assignmentGroupMembers.plural</bb-translate>\n              <div class="group-buttons">\n                <button ng-show="assessmentAttempt.shouldShowCollabLink" ng-click="assessmentAttempt.launchCollabSession()"\n                        bb-translate-attrs="{\'aria-label\':\'course.content.conversation.collaborate\', \'title\': \'course.content.conversation.collaborate\'}"\n                        class="button super-clear icon" analytics-id="course.content.conversation.collaborate.button">\n                  <bb-svg-icon size="medium" icon="collab-session"></bb-svg-icon>\n                </button>\n                <button ng-if="assessmentAttempt.showConversations()"\n                        bb-peek-sref="conversations({courseId: assessmentAttempt.content.courseId, contentId: assessmentAttempt.content.id, groupId: assessmentAttempt.groupId})"\n                        bb-translate-attrs="{\'aria-label\':\'components.directives.header.openAriaGroup\', \'title\': \'components.directives.header.openAriaGroup\'}"\n                        class="button super-clear icon" analytics-id="components.directives.header.openAriaGroup.button">\n                  <bb-svg-icon\n                    ng-class="{\'has-indicator\': assessmentAttempt.hasGroupIndicator}"\n                    size="medium"\n                    icon="group-conversation">\n                  </bb-svg-icon>\n                </button>\n              </div>\n            </h2>\n\n            <div class="member-container">\n              <div class="member" ng-repeat="member in assessmentAttempt.contentData.groupMembers track by member.id">\n                <bb-usercard usercard-show="avatar"\n                             user="member" course-id="{{assessmentAttempt.course.id}}"\n                             course-role="assessmentAttempt.getCourseRole(member)"\n                             can-send-message="assessmentAttempt.canSendMessage(member)"\n                             inactive="assessmentAttempt.isInactive(member)">\n                </bb-usercard>\n                <bb-username class="member-name" user="member" format="short" tabindex="-10" has-title-attr="false"></bb-username>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="goals-panel slide-small-container slide-animation hide-for-large-up" ng-class="{slideUp: assessmentAttempt.hideOverview}">\n        <bb-goal-alignment contents="assessmentAttempt.goalAlignedContents"\n                           hide-goals="assessmentAttempt.hideGoals()"\n                           class="content-assessment-goal-peek"\n                           ng-show="assessmentAttempt.hideOverview"\n                           analytics-id="course.content.assessment.goalAlignedContents.goalAlignment">\n        </bb-goal-alignment>\n      </div>\n    </section>\n  </div>\n  <footer class="submit-footer panel-footer show-on-full autosave-footer">\n    <p ng-if="assessmentAttempt.isOverdue || footerNoticeShow" class="footer-notice footer-notice-small-up late-notice late-notice-small-up">\n      <span ng-if="assessmentAttempt.hasTimeLimit" bb-timed-test-indicator-label></span>\n      <span ng-if="assessmentAttempt.isOverdue" class="due-date-span">\n        <bb-svg-icon size="small" icon="calendar"></bb-svg-icon>\n        <span bb-translate="course.content.assessment.overview.markedLateNotice"></span>\n      </span>\n    </p>\n\n    <div class="autosave-footer-right">\n      <span class="last-saved-notice js-last-saved" ng-if="assessmentAttempt.lastSaved">\n        <span bb-translate>course.content.assessment.footer.lastSaved</span>\n        <span bb-time="{{assessmentAttempt.lastSaved}}" auto-update="true" format="Medium"></span>\n      </span>\n\n      <div class="panel-footer-right equal-buttons buttons-2">\n\n        <button\n          ng-click="assessmentAttempt.save($event)"\n          ng-class="{disabled: assessmentAttempt.shouldDisableSaveSubmitButtons()}"\n          ng-disabled="assessmentAttempt.shouldDisableSaveSubmitButtons()"\n          ng-attr-tabindex="{{assessmentAttempt.shouldDisableSaveSubmitButtons() ? -1 : undefined}}"\n          class="button button--secondary js-save-draft-button"\n          analytics-id="course.content.assessment.footer.buttons.saveAndClose"\n          bb-translate>course.content.assessment.footer.buttons.saveAndClose</button>\n\n        <button\n          ng-click="assessmentAttempt.submit($event)"\n          ng-class="{disabled: assessmentAttempt.shouldDisableSaveSubmitButtons()}"\n          ng-attr-tabindex="{{assessmentAttempt.shouldDisableSaveSubmitButtons() ? -1 : undefined}}"\n          ng-disabled="assessmentAttempt.shouldDisableSaveSubmitButtons()"\n          class="button js-send-draft-button"\n          analytics-id="{{!assessmentAttempt.isOverdue ? \'course.content.assessment.footer.buttons.submit\' : \'course.content.assessment.footer.buttons.submitLate\'}}">\n          <bb-translate ng-if="!assessmentAttempt.isOverdue">course.content.assessment.footer.buttons.submit</bb-translate>\n          <bb-translate ng-if="assessmentAttempt.isOverdue">course.content.assessment.footer.buttons.submitLate</bb-translate>\n        </button>\n\n      </div>\n    </div>\n\n    <p ng-if="assessmentAttempt.isOverdue || footerNoticeShow" class="footer-notice footer-notice-large-up late-notice late-notice-large-up" aria-hidden="true">\n      <span ng-if="assessmentAttempt.hasTimeLimit" bb-timed-test-indicator-label></span>\n      <span  class="due-date-span" ng-if="assessmentAttempt.isOverdue">\n         <bb-svg-icon size="small" icon="calendar"></bb-svg-icon>\n         <span bb-translate="course.content.assessment.overview.markedLateNotice"></span>\n      </span>\n    </p>\n  </footer>\n</div>\n'},ihlU:function(e,t,n){"use strict";var i=n("D57K"),s=(n("DD3f"),n("wHJ2")),o=n("JfV0"),a=n("e0uO"),r=n("A0nf"),c=n("e6qG"),l=n("jWRJ"),d=(n("scfL"),n("Xq/A")),u=n("YHe3"),p=n("jbaE"),m=n("bd9L"),h=n("pjml"),b=n("lEL+"),g=n("e6jQ"),v=n("0JpG"),f=n("JNtI"),y=n("g66W"),w=n("QJ+g"),C=n("hG4E"),S=n("cH8o"),A="ultra.components.directives.freeformResponseEditor",k=function(){function e(e,t,n,i,s,o,a,r,c){var l=this;this.scope=e,this.element=t,this.attrs=n,this._bbMLEditorService=i,this.$q=s,this.$compile=o,this.timeout=a,this.bbLocalize=r,this.proctoringService=c,this.isEditing=!1,this.isSaving=!1,this.isInitializing=!0,this.insertDocumentEditorTemplate=function(e){l.element.find(".freeform-response-editor-template").prepend(l.$compile(l.template)(l.scope))},this.bbmlEditorId="BBML_Editor_ID_"+g.b(),this.template=e.isPrivileged()?C:S,this.insertDocumentEditorTemplate(t),this.overflowMenuItems=this.getOverflowMenuItems(),e.isPrivileged&&e.isPrivileged()&&this.setUpForPrivilegedUser(),this.pluginOptions=c.getSecureBbEditorOptions({attachment:!0,image:!0,math:!0,video:!0,contentMarket:!0}),this.initializeAndSetUpBbMLWatchers()}return e.prototype.initializeAndSetUpBbMLWatchers=function(){var e=this;this.scope.$watch("bbml()",(function(t){null!=t&&(e.bbML=t)})),this.scope.$watch("bbmlEditor.bbML.rawText",(function(){e.isInitializing||e.isSaving?e.isInitializing=!1:e.scope.$emit("bb-autosave-form",m.a.Change)}))},Object.defineProperty(e.prototype,"truncatedViewValue",{get:function(){return this._truncatedViewValue},set:function(e){var t=this.element.find(".bb-editor"),n=t.length?t.text():void 0;this._truncatedViewValue=y.h(n,100)},enumerable:!0,configurable:!0}),e.prototype.onBlur=function(){var e=this;this.save().then((function(){e.isEditing=!1}))},e.prototype.focusEditor=function(){var e=this;this.isEditing=!0,this.timeout((function(){e.element.find(".bb-editor").first().focus()}),this.scope,0)},e.prototype.activateEditor=function(){this.scope.editorForm.responseEditor.$setPristine(),this.focusEditor()},e.prototype.getOverflowMenuItems=function(){var e=this,t=[];t.push({labelKey:"global.edit",icon:"draw",show:function(){return e.showEditButton()},onClick:function(){return e.activateEditor()},ariaLabel:function(){return e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.textEditor.overflowMenu.aria.edit",params:{truncatedText:e.truncatedViewValue},noWrap:!0})}});var n={labelKey:"global.delete",icon:"trash",show:function(){return e.showDeleteButton()},onClick:function(){return e.onDelete()},ariaLabel:function(){return e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.textEditor.overflowMenu.aria.delete",params:{truncatedText:e.truncatedViewValue},noWrap:!0})}};return t.push(n),n.confirmationOptions={},n.confirmationOptions.lazyLoadTitleKeyAndInstructionsKey=function(){return e.$q.when(f.a("content"))},this.scope.choices&&(n.confirmationOptions.choices=this.scope.choices()),t},e.prototype.showOverflowMenu=function(){return!(this.isEditing||!this.showEditButton()&&!this.showDeleteButton())},e.prototype.setUpForPrivilegedUser=function(){var e=this;this.scope.$on(h.f.EVENT_BBML_EDITOR_FORCE_UPDATE,(function(){e.save()})),this.scope.$watch("bbmlEditor.hasContent()",(function(t){e.scope.hasContent=t}))},e.prototype.matchesBbMLEditorId=function(e){return this.bbmlEditorId&&this.bbmlEditorId===e},e.prototype.save=function(e){var t=this;return void 0===e&&(e=!1),(e||this.scope.editorForm.responseEditor.$dirty&&!this.isSaving)&&this.scope.saveFunc?(this.isSaving=!0,this.scope.saveFunc().then((function(){t.scope.$emit("bb-autosave-form",m.a.Saved),t.scope.editorForm.responseEditor.$setPristine(),t.timeout((function(){t.isSaving=!1}),t.scope)}))):this.$q.resolve()},e.prototype.isValid=function(){return!0},e.prototype.hasContent=function(){return this.isEditing||this.bbML&&this.bbML.rawText&&this.bbML.rawText.length>0},e.prototype.onDelete=function(){this.bbML.rawText="",this.save(!0)},e.prototype.showEditButton=function(){return this.scope.isPrivileged()},e.prototype.showDeleteButton=function(){return this.scope.isPrivileged()},e.$inject=["scope","element","attrs",d.c,"$q","$compile",b.b,v.serviceName,u.b],e}(),I=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=w,this.scope={bbml:"&",hasContent:"=?",isPrivileged:"&",saveFunc:"&?"},this.link=function(e,n,i){e.bbmlEditor=t.$injector.instantiate(k,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();s.module(A,["ngSanitize",d.b,u.a,p.a,b.a]).directive("bbFreeformResponseEditor",["$injector",function(e){return e.instantiate(I)}]);var O=n("TnpK"),D=n("gkef"),T=n("fYJU"),$=n("Qbdf"),x=n("36CG"),E=n("mxgC"),P=n("5MwF"),R=n("Y3OE"),L=n("0V7O"),j=n("HF29"),G=n("FVIt"),M=n("aHpC");n.d(t,"a",(function(){return _}));var _="ultra.components.directives.assessment.attemptCanvas",F=function(){function e(e,t,n,i,s,a,r,c,l){var d,u=this;if(this.scope=e,this.element=t,this.$q=n,this.$ngRedux=i,this.ultraState=s,this.windowSizeService=a,this.contextUser=r,this.contextContent=c,this.contextCourse=l,this.customCategory="",this.hasContentBlocks=!1,this.assessmentId="",P.a.features.questionRegrading){if(this.contextUser.userModel.isInstructor()&&!this.isCurrentCourseComplete){var p=c.content;p&&p.contentDetail&&(this.assessmentId=p.contentDetail[R.a.TestLink.toString()].test.assessment.id,this.$ngRedux.dispatch(o.actions.content.loadContents({courseId:p.courseId,contentId:s.params.contentId})))}this.isSmallBreakpoint=a.isSmallBreakpoint(),this.scope.$on("window-resize",(function(){u.isSmallBreakpoint=a.isSmallBreakpoint()}))}if(e.gradebookCategory()&&!e.gradebookCategory().isUserDefined?this.headerKey="components.directives.attempt-canvas.header."+e.gradebookCategory().title:(this.customCategory=e.gradebookCategory()&&e.gradebookCategory().title,this.headerKey="components.directives.attempt-canvas.header.custom"),this.scope.attempt&&!this.scope.attempt.studentSubmission&&(this.scope.attempt.studentSubmission={}),this.scope.gradedQuestionAttempts&&this.scope.$watch("gradedQuestionAttempts()",(function(e){u.gradedQuestionAttempts=e})),null===(d=this.toolAttemptDetail)||void 0===d?void 0:d.questionAttempts){var m={};this.toolAttemptDetail.questionAttempts.forEach((function(e){var t=e.questionType.toString();t in m||(m[t]=0),null==e.question.ui&&(e.question.ui={}),e.question.ui.questionTypePosition=m[t],m[t]+=1}))}}return Object.defineProperty(e.prototype,"isCurrentCourseComplete",{get:function(){return this.contextCourse.course.isComplete()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolAttemptDetail",{get:function(){var e=this.scope.scoreProviderHandle()||r.a.Test.toString();if(!this._toolAttemptDetail&&this.scope.attempt){var t=this.scope.attempt;t.attempts&&t.attempts.length>0?this._toolAttemptDetail=t.attempts[0].toolAttemptDetail[e]:this._toolAttemptDetail=t.getToolAttemptDetailItem(r.a.parse(e))}return this._toolAttemptDetail},enumerable:!0,configurable:!0}),e.prototype.textEditorOptions=function(){return{placeholderKey:"components.directives.attempt-canvas.freeform-response.author.placeholder"}},e.prototype.fileEditorOptions=function(){var e=this;return{showViewButton:function(){return"grade"===e.scope.canvasType().toLowerCase()||"review"===e.scope.canvasType().toLowerCase()}}},e.prototype.studentSubmission=function(){return this.scope.attempt.studentSubmission},e.prototype.save=function(){if(this.scope.attempt.$pk){var e=this.scope.attempt.toolAttemptDetail;return e&&e["resource/x-bb-assessment"]&&e["resource/x-bb-assessment"].questionAttempts&&e["resource/x-bb-assessment"].questionAttempts.forEach((function(e){e.question&&e.question.alignedGoals&&(e.question.alignedGoals=[])})),this.scope.attempt.$patch().$asPromise()}return this.$q.resolve(this.scope.attempt)},e.prototype.getFreeformResponseBundleKey=function(e){if(void 0===e&&(e="header"),!this.hasQuestions())return"";var t=this.hasOnlyPresentationQuestions()?"submission":"additional-content";return"components.directives.attempt-canvas.freeform-response."+this.scope.canvasType().toLowerCase()+"."+e+"."+t},e.prototype.hasFreeformResponse=function(){return!!this.hasContentBlocks},e.prototype.hasQuestions=function(){var e,t;return!!(null===(t=null===(e=this.toolAttemptDetail)||void 0===e?void 0:e.assessment)||void 0===t?void 0:t.questionCount)},e.prototype.hasOnlyPresentationQuestions=function(){var e;return!(null===(e=this.toolAttemptDetail)||void 0===e||!e.assessment)&&!this.toolAttemptDetail.assessment.hasAnswerableQuestions},e.prototype.persist=function(){return this.scope.$broadcast(h.f.EVENT_BBML_EDITOR_FORCE_UPDATE),this.$q.when(this.scope.attempt)},e.prototype.GradingMode=function(){return a.a.AttemptGrading},e.prototype.ReviewMode=function(){return a.a.AttemptReview},e.prototype.AttemptMode=function(){return a.a.AttemptAuthoring},e=Object(i.__decorate)([Object(i.__param)(0,Object(M.b)("scope")),Object(i.__param)(1,Object(M.b)("element")),Object(i.__param)(2,Object(M.b)("$q")),Object(i.__param)(3,Object(M.b)("$ngRedux")),Object(i.__param)(4,Object(M.b)(O.d)),Object(i.__param)(5,Object(M.b)(D.b)),Object(i.__param)(6,Object(M.b)(T.b)),Object(i.__param)(7,Object(M.b)(x.d)),Object(i.__param)(8,Object(M.b)($.e))],e)}(),B=function(){function e(e,t,n){var i=this;this.$compile=e,this.$injector=t,this.timeout=n,this.restrict="E",this.scope={attempt:"=",canvasType:"&",gradebookCategory:"&",gradedQuestionAttempts:"&",isAnyQuestionEditing:"=",scoreProviderHandle:"&"},this.link=function(e,t,n){var s=i.getTemplate(e),o=i.$compile(s)(e);t.append(o),e.attemptCanvas=i.$injector.instantiate(F,{scope:e,element:t,attrs:n}),Object(E.d)()&&i.timeout((function(){e.$digest()}),e,0)}}return e.prototype.getTemplate=function(e){var t=e.canvasType().toLowerCase();if("author"===t)return L;if("grade"===t)return j;if("review"===t)return G;throw new Error("Invalid canvas type provided")},e.$inject=["$compile","$injector",b.b],e}();s.module(_,[l.a,h.Q,A,c.a,O.b,D.a,x.a,$.b]).directive("bbAttemptCanvas",["$injector",function(e){return e.instantiate(B)}])},jMVO:function(e,t,n){},jO50:function(e,t){e.exports='<div class="slider-tab-navigation-desktop">\n  <div class="slider-tab-navigation-desktop__main-section">\n    <div ng-transclude></div>\n  </div>\n\n  <div class="slider-tab-navigation-desktop__browsable-section">\n    <div ng-if="sliderTabNavigation.shouldRenderTabs()">\n      <div bb-first-time-container class="guidance-wrapper">\n        <div bb-guidance-target component-key="components.directives.slider-tab-navigation.ftue.browsable-tabs">\n          <ul\n            class="slider-tab-navigation-desktop__browsable-tabs"\n            bb-arrow-key-navigation="{ tabDirection: \'vertical\', layout: \'rows\'}"\n          >\n            <li\n              class="slider-tab-navigation-desktop__tab-container"\n              ng-repeat="tab in sliderTabNavigation.scope.tabs.browsableSection.browsableTabs"\n              bb-arrow-key-container\n            >\n              <button\n                id="{{\'slider-tab-\' + tab.nameId}}"\n                class="slider-tab-navigation-desktop__tab"\n                ng-click="sliderTabNavigation.goToTab(tab)"\n                analytics-id="{{::tab.analyticsIdPrefix}}.li"\n                bb-arrow-key-destination\n                ng-keydown="sliderTabNavigation.handleTabKeyDown($event, tab)"\n                bb-focus="tab.nameId === sliderTabNavigation.nextTabFocusNameId"\n              >\n                <div class="slider-tab-navigation-desktop__tab-details">\n                  <bb-svg-icon size="medium" icon="{{tab.iconName}}"></bb-svg-icon>\n\n                  <div class="slider-tab-navigation-desktop__browsable-section-title">\n                    {{tab.title}}\n                  </div>\n                </div>\n\n                <i\n                  class="icon-chevron-right slider-tab-navigation-desktop__tab-navigation-icon"\n                  ng-class="{\'slider-tab-navigation-desktop__tab-navigation-icon_is-rtl\': sliderTabNavigation.isRTL}"\n                  role="presentation"\n                >\n                </i>\n              </button>\n            </li>\n          </ul>\n        </div>\n\n        <bb-guidance\n          class="guidance-element-overlay slider-tab-navigation-desktop__browsable-section-guidance"\n          component-key="components.directives.slider-tab-navigation.ftue.browsable-tabs"\n        >\n          <div ng-if="!sliderTabNavigation.isStudent">\n            <div class="slider-tab-navigation-desktop__browsable-section-guidance-title" bb-translate>\n              components.directives.slider-tab-navigation.ftue.instructor-title\n            </div>\n            <span class="slider-tab-navigation-desktop__browsable-section-guidance-message" bb-translate>\n              components.directives.slider-tab-navigation.ftue.instructor-message\n            </span>\n          </div>\n\n          <div ng-if="sliderTabNavigation.isStudent">\n            <div class="slider-tab-navigation-desktop__browsable-section-guidance-title" bb-translate>\n              components.directives.slider-tab-navigation.ftue.student-title\n            </div>\n            <span class="slider-tab-navigation-desktop__browsable-section-guidance-message" bb-translate>\n              components.directives.slider-tab-navigation.ftue.student-message\n            </span>\n          </div>\n        </bb-guidance>\n      </div>\n    </div>\n\n    <div class="slider-tab-navigation-desktop__browsable-main-section" ng-if="sliderTabNavigation.activeTab">\n      <div class="slider-tab-navigation-desktop__browsable-section-header">\n        <button\n          analytics-id="{{::sliderTabNavigation.activeTab.analyticsIdPrefix}}.activeTab.goBack.button"\n          ng-click="sliderTabNavigation.goBack()"\n          ng-if="sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId"\n          class="slider-tab-navigation-desktop__browsable-section-go-back"\n          ng-keydown="sliderTabNavigation.handleBackArrowKeyDown($event)"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.slider-tab-navigation.ax-only.back-arrow\'}"\n        >\n          <bb-svg-icon size="medium" icon="back-arrow"></bb-svg-icon>\n        </button>\n\n        <div\n          class="slider-tab-navigation-desktop__browsable-section-details"\n          ng-class="{\'slider-tab-navigation-desktop__browsable-section-details_is-active\': sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId}"\n        >\n          <bb-svg-icon size="medium" icon="{{sliderTabNavigation.activeTab.iconName}}"></bb-svg-icon>\n\n          <h2\n            ng-if="sliderTabNavigation.activeTab.nameId === sliderTabNavigation.scope.tabs.browsableSection.main.nameId"\n            tabindex="-1"\n            class="slider-tab-navigation-desktop__browsable-section-title slider-tab-navigation-desktop__browsable-section-title_is-header"\n          >\n            {{sliderTabNavigation.activeTab.title}}\n          </h2>\n\n          <h1\n            ng-if="sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId"\n            bb-focus\n            tabindex="-1"\n            class="slider-tab-navigation-desktop__browsable-section-title slider-tab-navigation-desktop__browsable-section-title_is-header"\n          >\n            {{sliderTabNavigation.activeTab.title}}\n          </h1>\n        </div>\n      </div>\n\n      <div ng-if="!sliderTabNavigation.showLoader" class="slider-tab-navigation-desktop__browsable-section-content">\n        <div ui-view="slider-tab-navigation-view@"></div>\n        <div ng-if="sliderTabNavigation.activeTab.nameId !== sliderTabNavigation.scope.tabs.browsableSection.main.nameId" tabindex="0" ng-focus="sliderTabNavigation.handleLastElementFocus()"></div>\n      </div>\n      <div ng-if="sliderTabNavigation.showLoader" class="spinner bb-secondary-color-2"></div>\n    </div>\n  </div>\n</div>\n'},jOWO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("SBxA"),o="ultra.components.directives.bbUiIcon.Survey";Object(i.a)(s.a,o,"bbUiIconSurvey")},jWRJ:function(e,t,n){"use strict";n("ZjTk");var i=n("wHJ2"),s=n("e6qG"),o=n("0JpG"),a=n("1ZbL"),r="ultra.components.directives.assessment.asessmentQuestion.automatedQuestionFeedback",c={Class:n("3ZJq").AutomatedQuestionFeedbackAttemptReview,bindingNames:["feedback","isCollapsible"],renderLocalized:!0};i.module(r,[o.moduleName]).component("bbAutomatedQuestionFeedback",Object(a.a)(c));var l=n("jbaE"),d=n("JNtI"),u=n("/qpZ"),p=(n("dY8P"),n("Fvsw")),m=n("ZzYr"),h=n("o5Lu"),b=n("dd1C"),g=n("+4Px"),v=n("12mu"),f=n("nthy"),y=n("fYJU"),w=n("kQ1d"),C=function(){function e(e,t,n,i,s,o,a,r){var c=this;this.scope=e,this.element=t,this.attrs=n,this.$modal=i,this.context=s,this._gradeService=o,this.bbLocalize=a,this.contextUser=r,this.isValidGrade=!0,this.bbLocalize.loadBundle("components/directives/grade/question-grade"),e.questionGrade=this,this.gradebookSettings=this._gradeService.loadDefaultGradebookSettings(),this.isStudent=this.contextUser.userModel.isStudent(),!this.isStudent&&this.scope.hideGrade()?this.gradeColor="na":(e.$watch("gradedQuestionAttempt",(function(){c.afterModelChange()})),this.isStudent||this.addEventListeners())}return e.prototype.validate=function(){var e=this._gradeService.parseGrade(this.inputValue);this.isValidGrade=this.isClearingGrade(e)||this._gradeService.isValidNumericGrade(this.inputValue,this.gradebookSettings)},Object.defineProperty(e.prototype,"parsedInputPoint",{get:function(){var e=null==this.inputValue?"":this.inputValue;return this.bbLocalize.parseNumberSync(e,this.scope)},enumerable:!0,configurable:!0}),e.prototype.getFormattedPoint=function(e){if(null!=e&&(this.isStudent||!this.scope.hideGrade()))return this.bbLocalize.formatNumberSync(e,this.scope)},e.prototype.inputChanged=function(){var e=this.parsedInputPoint;return(!Number.isNaN(Number(this.initValue))||null!=e)&&((null!=this.initValue||!Number.isNaN(Number(e)))&&!i.equals(this.initValue,e))},e.prototype.isDisabled=function(){return!this.scope.isPrivileged()||this.isAutoGraded},e.prototype.ariaLabel=function(){if(this.scope.gradedQuestionAttempt)return this.isAutoGraded?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.question-grade.auto-graded-aria-label",params:{questionNumber:this.scope.gradedQuestionAttempt.questionAttempt.visibleQuestionNumber}}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.question-grade.input-aria-label",params:{totalPoints:this.scope.gradedQuestionAttempt.questionAttempt.question.points,questionNumber:this.scope.gradedQuestionAttempt.questionAttempt.visibleQuestionNumber}})},e.prototype.sanitizeToModel=function(e){return null==e||Number.isNaN(Number(e))?"":e},e.prototype.save=function(){var e=this;this.inputChanged()&&this.isValidGrade&&(this.scope.gradedQuestionAttempt.ui&&this.scope.gradedQuestionAttempt.ui.isPosted?this.$modal.open({template:f,scope:this.scope}).result.then((function(){e.scope.gradedQuestionAttempt.manualPoints=e.sanitizeToModel(e.parsedInputPoint),e.doSave()}),(function(){})):(this.scope.gradedQuestionAttempt.manualPoints=this.sanitizeToModel(this.parsedInputPoint),this.doSave()))},e.prototype.doSave=function(){var e=this;this.scope.gradedQuestionAttempt.withParams({groupAttemptId:this.scope.gradedQuestionAttempt.ui.groupAttemptId}).$patch().$then((function(){e.scope.$emit("bb-update-question-grade",e.scope.gradedQuestionAttempt),e.afterModelChange()}))},e.prototype.isClearingGrade=function(e){return null==e||0===e.length},e.prototype.toSafeString=function(e){return null!=e?e.toString():""},e.prototype.afterModelChange=function(){this.scope.gradedQuestionAttempt&&(this.isAutoGraded=this.scope.gradedQuestionAttempt.questionAttempt.question.isAutoGraded,this.initValue=this.scope.gradedQuestionAttempt.points,this.inputValue=this.getFormattedPoint(this.initValue),this.updateGradeColor())},e.prototype.updateGradeColor=function(){var e=this.scope.gradedQuestionAttempt;if(null!=e.points){var t=e.points/e.questionAttempt.question.points*100;this.gradeColor=this._gradeService.getPercentileColor(t)}else this.scope.isPrivileged()?this.gradeColor="":this.gradeColor="na"},e.prototype.addEventListeners=function(){var e=this.element.find('input[name="question-grade"]');e.on("keydown",(function(t){t.keyCode!==g.f&&t.keyCode!==g.m||(t.preventDefault(),e.blur())}));var t=this.element.find("div.wrapping-input-style");t.on("click",(function(){e.focus()})),e.on("focus",(function(){t.addClass("wrapping-input-style-focus"),e.select()})),e.on("blur",(function(){t.removeClass("wrapping-input-style-focus")}))},e.$inject=["scope","element","attrs","$modal",p.b,h.h,o.serviceName,y.b],e}(),S=function(){function e(e,t){var n=this;this.$compile=e,this.$injector=t,this.restrict="E",this.scope={gradedQuestionAttempt:"=",hideGrade:"&",inputId:"@",isPrivileged:"&"},this.link=function(e,t,i){t.append(n.$compile(w)(e)),e.questionGrade=n.$injector.instantiate(C,{scope:e,element:t,attrs:i})}}return e.$inject=["$compile","$injector"],e}();i.module("ultra.components.directives.grade.questionGrade",["puElasticInput",m.a,h.g,b.a,v.a]).directive("bbQuestionGrade",["$injector",function(e){return e.instantiate(S)}]);n("nFxZ"),n("2MQt"),n("uEsA"),n("LRgG"),n("SHbF");var A=n("0vQT"),k=n("3Uvi"),I=function(){function e(e){this.scope=e}return e.prototype.getCorrectnessIcon=function(){var e=this.scope.correctness&&this.scope.correctness();return this.scope.wasLate&&this.scope.wasLate()?"attention":A.a.Correct.isEqualTo(e)||A.a.FullCredit.isEqualTo(e)?"check-circle":A.a.Partial.isEqualTo(e)?"partial-credit":"close-circle"},e.prototype.shouldShowText=function(){return!(this.scope.hideCorrectnessText&&this.scope.hideCorrectnessText())},e.prototype.getCorrectnessTextKey=function(){if(this.scope.correctness){var e=this.scope.correctness&&this.scope.correctness();return A.a.Correct.isEqualTo(e)?"components.directives.assessment-question.status.correct":A.a.Partial.isEqualTo(e)?"components.directives.assessment-question.status.partial":A.a.FullCredit.isEqualTo(e)?"components.directives.assessment-question.status.full-credit":"components.directives.assessment-question.status.incorrect"}},e.prototype.getBackgroundClass=function(){var e=this.scope.correctness&&this.scope.correctness();return this.scope.wasLate&&this.scope.wasLate()?"question-answer-status--attention":A.a.Correct.isEqualTo(e)||A.a.FullCredit.isEqualTo(e)?"question-answer-status--correct":A.a.Partial.isEqualTo(e)?"question-answer-status--partial":"question-answer-status--incorrect"},e.$inject=["scope"],e}(),O=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=k,this.transclude=!0,this.replace=!0,this.scope={hideCorrectnessText:"&?",wasLate:"&?",correctness:"&?",alignIconToTop:"&?"},this.link=function(e){e.questionAnswerStatus=t.$injector.instantiate(I,{scope:e})}}return e.$inject=["$injector"],e}();i.module("ultraUi.components.directives.grade.questionAnswerStatus",[]).directive("bbQuestionAnswerStatus",["$injector",function(e){return e.instantiate(O)}]);var D=n("lEL+"),T=n("TnpK");n.d(t,"a",(function(){return $}));var $="ultra.components.directives.assessment.assessment-question",x=function(){function e(e){var t=this;this.QuestionFactory=e,this.restrict="E",this.scope={attempt:"=?",question:"=?",questionAttempt:"=?",gradedQuestionAttempt:"=?",mode:"&",index:"&",assessmentId:"&?",isAnyQuestionEditing:"&?",isSmallBreakpoint:"=?",editorPluginOptions:"&?"},this.link=function(e,n,i){if(e.question&&(e.questionAttempt||e.gradedQuestionAttempt)||!e.question&&!e.questionAttempt&&!e.gradedQuestionAttempt||e.gradedQuestionAttempt&&e.questionAttempt)throw new Error("Please provide a question or question attempt/graded question attempt");e.editorPluginOptions=e.editorPluginOptions||{attachment:!0,math:!0,contentMarket:!0},t.QuestionFactory.getQuestionHandler(e,n,i).then((function(t){e.assessmentQuestion=t}))}}return e.$inject=[s.b],e}();i.module($,[r,l.a,d.b,u.a,o.moduleName,d.b,"ultra.components.directives.grade.questionGrade","ultraUi.components.directives.grade.questionAnswerStatus",s.a,D.a,T.b]).directive("bbAssessmentQuestion",["$injector",function(e){return e.instantiate(x)}])},jbaE:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var i=n("D57K"),s=(n("ph44"),n("vhkR")),o=n("cs5G"),a=n("wHJ2"),r=n("Fvsw"),c=n("Qbdf"),l=n("0JpG"),d=n("R+Yw"),u=n("TnpK"),p=n("5MwF"),m=n("kBJj"),h=n("Q/M7"),b=n("pjml"),g=n("mxgC"),v=n("aHpC"),f="ultraUi.components.directives.editor.richTextEditor",y=function(){function t(e,t,n,i,s,o,a,r,c,l,d,u,p,m){var h=this;this.$q=e,this.$scope=t,this.element=n,this.attrs=i,this.controllers=s,this.BbEditorFactory=o,this.bbLocalize=a,this.bbContext=r,this.ltiService=c,this.KloudlessModalService=l,this.AnnotationsModel=d,this.contextCourse=u,this.allyService=p,this.ultraState=m;var b=this.$scope.$watch("pluginOptions",(function(e){e&&(b(),h.initEditor())}));this.reactAllyService=this.allyService.getReactService(this.$scope),t.$on("$destroy",(function(){t.editor&&t.editor.destroy()}))}return t.prototype.initEditor=function(){var e=this,t=null,n=!1,i=null,s=this.controllers.ngModel,o=s.$setPristine;s.$viewChangeListeners.push((function(){n||o()})),s.$setPristine=function(){o(),i&&i(s.$modelValue)};var a=function(t){e.$scope.editor&&e.$scope.editor.update(t)};this.$scope.$watch((function(){return s.$modelValue}),(function(e){e!==t&&a({bbml:e})})),this.$scope.$watchGroup(["isDisabled","isReadOnly","isToolbarHidden","allyIndexMap"],(function(t){var n=t[0],i=t[1],s=t[2],o=t[3];e.$scope.editor&&a({isDisabled:n,isReadOnly:i,isToolbarHidden:s,ally:{service:e.reactAllyService,indexMap:o}})}));var r=function(e,t){return void 0!==e?e:t},c=function(t){e.$scope.fileLocation=t.data?t.data.fileLocation:t.fileLocation,e.$scope.webLocation=t.data?t.data.webLocation:t.webLocation},l=function(e){n=e.isDirty,i=e.setPristine;var o=e.toBbML();t=o,s.$setViewValue(o)},d={placeholderText:this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.placeholder})};this.$scope.pluginOptions&&this.$scope.pluginOptions.attachment&&(d.kloudless=this.KloudlessModalService.initialize()),this.$q.all(d).then((function(t){var n=[Object(m.customClass)()];if(e.$scope.pluginOptions){!1!==e.$scope.pluginOptions.link&&n.push(Object(m.link)()),!1!==e.$scope.pluginOptions.image&&n.push(Object(m.image)()),!1!==e.$scope.pluginOptions.video&&n.push(Object(m.video)()),e.$scope.pluginOptions.math&&n.push(Object(m.math)({apiBasePath:Object(h.c)(p.a.apiBasePath),courseId:e.contextCourse.courseId,xsrfToken:e.bbContext.xsrfToken,locale:e.bbLocalize.getLocale(e.$scope)})),e.$scope.pluginOptions.attachment&&n.push(Object(m.insertLocalFile)({apiBasePath:Object(h.c)(p.a.apiBasePath),xsrfToken:e.bbContext.xsrfToken,babelfishInstance:e.bbLocalize.intl,babelfishFormatInstance:e.bbLocalize.frmt,webLocation:e.$scope.webLocation||"",fileLocation:e.$scope.fileLocation||"",onUploadSuccess:c,buttonId:Object(g.d)()?"insertFile":""}));var i=!0;!1===e.$scope.pluginOptions.youtubeVideo&&(i=!1),i&&n.push(Object(m.insertYoutubeVideo)({apiBasePath:Object(h.c)(p.a.apiBasePath),babelfishInstance:e.bbLocalize.intl,babelfishFormatInstance:e.bbLocalize.frmt,getEmbedSrc:e.ltiService.configureAndInitInlineLaunch.bind(e.ltiService),locale:e.bbLocalize.getLocale(e.$scope),xsrfToken:e.bbContext.xsrfToken,courseId:e.contextCourse.courseId})),e.$scope.pluginOptions.demoMashup&&n.push(Object(m.demoMashup)()),e.$scope.pluginOptions.attachment&&e.KloudlessModalService.isCloudServiceAvailable&&!Object(g.d)()&&n.push(Object(m.insertKloudlessFile)({openKloudlessModal:e.KloudlessModalService.getModalCallback(e.$scope),apiBasePath:Object(h.c)(p.a.apiBasePath),xsrfToken:e.bbContext.xsrfToken,babelfishInstance:e.bbLocalize.intl,babelfishFormatInstance:e.bbLocalize.frmt,webLocation:e.$scope.webLocation||"",fileLocation:e.$scope.fileLocation||""})),e.$scope.pluginOptions.contentMarket&&n.push(Object(m.contentMarket)({apiBasePath:Object(h.c)(p.a.apiBasePath),babelfishInstance:e.bbLocalize.intl,babelfishFormatInstance:e.bbLocalize.frmt,getEmbedSrc:e.ltiService.configureAndInitInlineLaunch.bind(e.ltiService),locale:e.bbLocalize.getLocale(e.$scope),noInsert:e.$scope.contentMarketIsReadOnly,openContentMarket:e.ltiService.getOpenContentMarketConf(e.$scope),xsrfToken:e.bbContext.xsrfToken}))}var o=e.$scope.rootContentId;!o&&e.ultraState&&e.ultraState.getCurrentResolvedValues&&e.ultraState.getCurrentResolvedValues().currentContent&&(o=e.ultraState.getCurrentResolvedValues().currentContent.id);var a={bbml:s.$modelValue||"",isDisabled:r(e.$scope.isDisabled,!1),isReadOnly:r(e.$scope.isReadOnly,!1),isToolbarHidden:r(e.$scope.isToolbarHidden,!1),onChange:l,placeholder:t.placeholderText,plugins:n,locale:e.bbLocalize.getLocale(e.$scope),editorId:e.$scope.editorId,ariaLabelledBy:e.$scope.editorAriaLabelledBy,ariaDescribedBy:e.$scope.editorAriaDescribedBy,onDownloadWithAnnotations:e.getOnDownloadWithAnnotations(),showWordCount:e.$scope.showWordCount,ally:{service:e.reactAllyService,indexMap:e.$scope.allyIndexMap||new Map},rootContentId:o};e.$scope.onFocus&&(a.onFocus=function(){return e.$scope.$applyAsync(e.$scope.onFocus)}),e.$scope.onBlur&&(s.$setTouched(),a.onBlur=function(){return e.$scope.$applyAsync(e.$scope.onBlur)}),e.$scope.editor=e.BbEditorFactory(e.element[0],a)}))},t.prototype.getOnDownloadWithAnnotations=function(){var t=this;return function(n){var i=!!n.groupAttemptFileId,s=n.attemptFileId||n.groupAttemptFileId,o={systemInfo:t.bbContext.getSystemInfo().$asPromise(),annotations:t.AnnotationsModel.downloadWithAnnotations(s,i,t.contextCourse.courseId).$asPromise()};t.$q.all(o).then((function(t){var n=t.systemInfo.annotationRendererUrl;if(!(n&&n.length>0))throw new Error("Annotation Service url is not defined.");var i=e("#annotationIframe");null!==i&&i.remove();var s=e("#annotationForm");null!==s&&s.remove();var o=e(document.createElement("iframe"));o.attr("src","about:blank"),o.attr("id","annotationIframe"),o.attr("name","annotationIframe"),o.css("display","none");var a=e(document.createElement("form"));a.attr("target","annotationIframe"),a.attr("method","POST"),a.attr("action",n+"/annotation/token"),a.attr("id","annotationForm"),a.attr("name","annotationForm");var r=e(document.createElement("input"));r.attr("type","hidden"),r.attr("name","jwt"),r.attr("value",t.annotations.jwt),r.appendTo(a);var c=e("body");a.appendTo(c),o.appendTo(c),a.submit()}))}},t=Object(i.__decorate)([Object(i.__param)(0,Object(v.b)("$q")),Object(i.__param)(1,Object(v.b)("scope")),Object(i.__param)(2,Object(v.b)("element")),Object(i.__param)(3,Object(v.b)("attrs")),Object(i.__param)(4,Object(v.b)("controllers")),Object(i.__param)(5,Object(v.b)("BbEditorFactory")),Object(i.__param)(6,Object(v.b)(l.serviceName)),Object(i.__param)(7,Object(v.b)(r.b)),Object(i.__param)(8,Object(v.b)(s.c)),Object(i.__param)(9,Object(v.b)(d.b)),Object(i.__param)(10,Object(v.b)(b.c.serviceName)),Object(i.__param)(11,Object(v.b)(c.e)),Object(i.__param)(12,Object(v.b)(o.b)),Object(i.__param)(13,Object(v.b)(u.d))],t)}(),w=function(){function e(e){var t=this;this.$injector=e,this.link=function(e,n,i,s){n.addClass("rich-text-editor"),e.richTextEditor=t.$injector.instantiate(y,{scope:e,element:n,attrs:i,controllers:s})},this.require={ngModel:"ngModel"},this.restrict="E",this.scope={contentMarketIsReadOnly:"<?",fileLocation:"=?",isDisabled:"<?",isReadOnly:"<?",isToolbarHidden:"<?",onBlur:"&?",onFocus:"&?",placeholder:"@?editorPlaceholderKey",pluginOptions:"<?",webLocation:"=?",editorId:"@?",editorAriaLabelledBy:"@?",editorAriaDescribedBy:"@?",showWordCount:"<?",allyIndexMap:"=?",rootContentId:"@?"}}return e.$inject=["$injector"],e}();a.module(f,[l.moduleName,r.a,d.a,s.b,o.a]).value("BbEditorFactory",m.BbEditorFactory).directive("bbRichTextEditor",["$injector",function(e){return e.instantiate(w)}])}).call(this,n("5iHu"))},jlIo:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-code",use:"icon-small-code-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-code"><path d="M4 3L1 8l3 5M12 3l3 5-3 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},k1CA:function(e,t){e.exports='<bb-modal id="remove-fs-confirmation-modal" class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.conditionalRelease.removeFSModal.title\'}"\n          modal-title-key="course.conditionalRelease.removeFSModal.title"\n          analytics-id-tag-prefix="course.conditionalRelease.removeFSModal">\n  <div name="modal-contents">\n    <p bb-translate course-org-token-resolver>course.conditionalRelease.removeFSModal.instructions</p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="button js-primary-button" \n          ng-click="$parent.$close()" \n          bb-translate\n          analytics-id="global.remove">\n    global.remove\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="button button--secondary js-secondary-button" \n          ng-click="$parent.$dismiss()" \n          bb-translate\n          analytics-id="global.cancel">\n    global.cancel\n  </button>\n</bb-modal>\n'},k5nV:function(e,t){e.exports='<ng-switch on="displayMode" bb-load-bundle="components/directives/delete">\n  <a href="javascript:void(0);"\n    ng-switch-when="controls"\n    ng-if="delete.requiredArgumentsSupplied"\n    bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n    choices="{{choices}}"\n    show-type="{{ delete.modalShowType }}"\n    ng-click="delete.deleteElement()"\n    bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\'}"\n    ng-disabled="savingInProgress"\n    class="{{extraClass}}" role="button"\n    analytics-id="components.directives.delete.deleteElement.link" \n  >\n    <span class="valign">\n      <span class="valign-content">\n        <bb-svg-icon size="small" icon="trash" class="icon-fw replaced"></bb-svg-icon>\n        <span class="ellipse" bb-translate="components.directives.delete.control-delete-label"></span>\n      </span>\n    </span>\n  </a>\n  <button ng-if="delete.requiredArgumentsSupplied"\n          bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n          choices="{{choices}}"\n          ng-click="delete.deleteElement()"\n          ng-disabled="delete.isDeleteDisabled"\n          bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\', \'title\': \'{{attrTranslateKey}}\'}"\n          ng-switch-default\n          class="button clear icon {{extraClass}}" type="button"\n          analytics-id="components.directives.delete.deleteElement.button"\n  >\n    <bb-svg-icon size="small" icon="trash"></bb-svg-icon>\n  </button>\n</ng-switch>'},kC07:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return J})),n.d(t,"a",(function(){return Z}));var i=n("D57K"),s=(n("DXZ4"),n("vgq2"),n("v0wN"),n("LC/l"),n("rElr"),n("lwNT"),n("ZKRZ"),n("yCl+"),n("gW+2"),n("/oLk"),n("8sWK"),n("gORw"),n("TOu5"),n("nsO7")),o=n("wHJ2"),a=n("yC9S"),r=n("+O05"),c=n("FpRh"),l=n("laCM"),d=n("cs5G"),u=n("nYZ0"),p=n("bhWV"),m=n("xAaQ"),h=n("ga7A"),b=n("z+6U"),g=n("Fvsw"),v=n("Et3n"),f=n("5Tom"),y=n("Qbdf"),w=n("X455"),C=n("bF8R"),S=n("UioO"),A=n("jhBu"),k=n("Oyr+"),I=n("ujI6"),O=n("0JpG"),D=n("vhkR"),T=n("w9Zy"),$=n("r6lH"),x=n("lEL+"),E=n("Tn43"),P=n("lmMM"),R=n("4nF1"),L=n("IWgv"),j=n("LecS"),G=n("UGfE"),M=n("VdDF"),_=n("Ocaa"),F=n("Sa5G"),B=n("oi1r"),N=n("pjml"),q=n("JNtI"),z=n("0rzL"),V=n("nmzr"),H=n("TnpK"),U=n("r/An"),Q=n("aTRN"),K=n("+4Px"),W=n("BLb8"),J="ultra.directives.contentItemBase",Z="base-content-item",Y=function(){function t(e,t,n,i,o,r,c,l,d,u,p,m,h,b,g,v,f,y,w,C){var S=this;this.$q=e,this.$rootScope=t,this.element=n,this.scope=i,this.CourseModel=o,this.schemaService=r,this.contentService=c,this.contextService=l,this.contextCourse=d,this.contextCourseMembership=u,this.courseContentService=p,this.entitlementService=m,this.localizeService=h,this.ltiService=b,this.offcanvasService=g,this.telemetryService=v,this.timeoutService=f,this.ultraState=y,this.allyService=w,this.courseLinkContentHandler=N.r.ContentHandler.CourseLink,this.disableRestricted=!1,this.displayTelemetryUserActivity=!1,this.displayTelemetryDiscussionActivity=!1,this.entitledToDesignAssessment=!1,this.isModifyPermissionLoaded=!1,this.isGettingConfirmationOptions=!1,this.displayGradeInfo=!1,this.isLate=!1,this.scope.shouldShowContent=!0,this.canViewGroups=this.entitlementService.isEntitled(F.v.ViewGroups),this.hasViewGroupsAsAdmin=this.entitlementService.isEntitled(F.v.ViewGroupsAsAdmin),this.courseId=d.courseId?d.courseId:this.ultraState.params.courseId,this.conditionalRelease=C.instantiate(Q.a,{scope:i}),this.scope.content.$then((function(e){S.entitlementService.hasAnyCourseEntitlement([F.j.ModifyAssessment,F.j.ViewAssessment],e.courseId).then((function(t){if(S.entitledToDesignAssessment=t,S.isModifyPermissionLoaded=!0,e.canHaveAttempts()&&!S.entitledToDesignAssessment&&e.contentDetail){var n=e.getAssociatedGradingColumn(),i=o.$new(e.courseId).gradebook.columns.$buildRaw(n);S.scope.gradingColumn=i;(S.displayGradeInfo?S.courseContentService.loadContentAndGrades({course:S.CourseModel.$buildRaw({id:e.courseId}),content:e,column:i}):S.$q.when({courseContent:e,gradingColumn:i})).then((function(e){S.displayGradeInfo&&S.scope.gradingColumn.isLate()&&(!e.gradeDetail||e.gradeDetail.ui.attempt.isInProgress())&&(S.isLate=!0),S.isGradeLoaded=!0,e.gradeDetail&&e.gradeDetail.column.id===i.id&&(S.scope.gradeDetail=e.gradeDetail)}))}else S.isLate=!1,S.isGradeLoaded=!0})),S.entitlementService.hasAnyCourseEntitlement([F.u.ViewGrades],e.courseId).then((function(e){S.canViewQuestionAnalysis=e})),S.contextService.getSystemInfo().$asPromise().then((function(e){e.telemetryEnabled&&(S.telemetryService.determineContentSupportsActivityData(S.scope.content).then((function(e){S.displayTelemetryUserActivity=e&&!S.contextCourseMembership.isStudentMembership()})),S.displayTelemetryDiscussionActivity=S.shouldShowDiscussionAnalytics()&&!S.contextCourseMembership.isStudentMembership())})),S.allyService.isAvailable().then((function(e){e&&S.allyService.isAllySupportedContentItem(S.scope.content)?(S.canShowAlly=!0,S.updateAlly()):S.canShowAlly=!1})),i.content.title||N.r.ContentHandler.UltraAssignment.isEqualTo(S.scope.content.contentHandler)||N.r.ContentHandler.TestLink.isEqualTo(S.scope.content.contentHandler)||S.localizeService.loadBundle("features/course/content/course-content").then((function(){i.content.title=S.localizeService.translateSync({locale:S.localizeService.getLocale(S.scope),key:"course.content.contentTitlePlaceholder"})}));var t=function(e){e.getLinkContentSource().$then((function(e){S.targetContent=e,S.contentHandler=e.contentHandler&&e.contentHandler.toString()}),(function(t){403===t.$response.status&&s.remove(S.scope.contents,(function(t){return t.$pk===e.$pk}))}))};S.scope.$watch("::content.id",(function(){if(N.r.ContentHandler.CourseLink.isEqualTo(S.scope.content.contentHandler))if(S.scope.content.contentDetail)t(S.scope.content);else var e=S.scope.$watch("content.isConditionalReleaseUnlocked()",(function(n){n&&(t(S.scope.content),e())}))})),Object(W.c)(S.scope,(function(e,t){S.scope.content.isConditionalReleaseLocked()&&S.scope.content.containsCriteriaWithGradeColumnId(t)&&Object(W.d)(S.scope,t)})),Object(W.b)(S.scope,(function(e){S.scope.content.isConditionalReleaseLocked()&&Object(W.d)(S.scope)})),a.b.OnRootScope(S.scope,"grade-attempt",(function(e,t,n){S.scope.content.id===t&&(S.scope.gradeDetail=n)})),i.content.contentHandler?i.content.isBbPage()?S.contentHandler=N.r.ContentHandler.Document.toString():S.contentHandler=i.content.contentHandler.toString():S.contentHandler=N.r.ContentHandler.Document.toString(),S.disableRestricted=N.r.ContentHandler.PartnerCloud.isEqualTo(S.contentHandler),S.conditionalRelease.getConditions(S.scope.content)})),this.scope.$on("refresh-conditional-release-rules",(function(e,t){S.scope.content.id===t.id&&S.conditionalRelease.getConditions(t)})),this.scope.$on("content-update",(function(e,t){S.scope.content.id!==t.id||S.scope.content.ui.linkSource||(S.scope.content=t),S.scope.content.ui.linkSource&&S.scope.content.ui.linkSource.id===t.id&&(S.scope.content.ui.linkSource=t);var n=S.scope.content.getDueDate();S.scope.dueDate=n&&new Date(n)})),this.scope.$on("bb-update-CR-tooltip",(function(e,t,n,i){t&&(S.conditionalRelease.gradeCriteria&&S.conditionalRelease.gradeCriteria.gradeColumnId)===t.id&&S.conditionalRelease.getConditions(S.scope.content,n,i)})),this.scope.$on("show-override-message",(function(e,t,n){S.scope.content&&S.scope.content.id===n&&(t?(S.scope.shouldShowContent=!1,S.overrideMessage=t):S.scope.shouldShowContent=!0)}));var A=s.once((function(){S.scope.$watch((function(){return S.scope.content.getDueDate()}),(function(e){S.scope.dueDate=e&&new Date(e)}))}));this.scope.$watch("content.contentHandler",(function(){i.content.ui.importPlaceholder||A()})),this.scope.$on("discussion-group-content-update",(function(e,t){S.scope.content&&N.r.ContentHandler.CourseLink.isEqualTo(S.scope.content.contentHandler)&&S.scope.content.contentDetail&&S.scope.content.getLinkContentSource().$then((function(e){e.id===t.id&&S.scope.content.applyGroupSettings(t)}))}))}return t.prototype.isEngagementOutline=function(){return"discussions"===this.scope.contextArea},t.prototype.getDescription=function(){return this.scope.content.systemGeneratedLocalizableDescription?this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:this.scope.content.systemGeneratedLocalizableDescription.languageKey}):this.scope.content.description},t.prototype.getAriaDescribedBy=function(){var e="content-item-icon-"+this.scope.content.id;return this.scope.content.ui.hasIndicator&&(e+=" activity-indicator-"+this.scope.content.id),e},Object.defineProperty(t.prototype,"peerReviews",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment().peerSettings&&this.scope.content.getDeployedAssessment().peerSettings.peerReviewsPerStudent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peerDueDate",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment().peerSettings&&M.a.parseStringToDate(this.scope.content.getDeployedAssessment().peerSettings.peerReviewDueDate)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGrading",{get:function(){return this.scope.content.contentDetail&&this.scope.content.getDeployedAssessment()&&this.scope.content.getDeployedAssessment().gradingColumn.peerGrading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPeerGradingConfigured",{get:function(){return this.isPeerGrading&&null!=this.peerDueDate&&null!=this.peerReviews},enumerable:!0,configurable:!0}),t.prototype.getDeleteConfirmationKeyAndShowType=function(){var e=this;return this.contentService.generateDeleteConfirmationKey(this.scope.content,this.scope.contextArea).then((function(t){return{confirmationKey:e.scope.content.ui.deleteConfirmationKey,showType:e.scope.content.ui.modalShowType}}))},t.prototype.deleteContent=function(){var e=this;N.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)?this.scope.content.getLinkContentSource().$then((function(t){e._deleteContent(t)})):(this._deleteContent(this.scope.content),this.$rootScope.$broadcast("bb-update-CR-tooltip",this.scope.content.getAssociatedGradingColumn(),"",!0))},t.prototype._deleteContent=function(t){var n=this;N.r.ContentHandler.Discussion.isEqualTo(t.contentHandler)?t.getSoftLinks().$asPromise().then((function(e){e.length?n.$q.all(e.map((function(e){return n.CourseModel.$new(t.courseId).contents.$new(e.courseContent).$fetch().$asPromise().then((function(e){n.$rootScope.$broadcast("deleteContent",e,!1)}))}))).then((function(){n.$rootScope.$broadcast("deleteContent",t)})):n.$rootScope.$broadcast("deleteContent",t)})):this.$rootScope.$broadcast("deleteContent",t);var i=this.element.closest(".js-content-div"),s=i.next(".js-content-div");if(s.length>0)s.find(".js-content-item-base").first().find(".content-title").focus();else{var o=i.prev(".js-content-div");if(o.length>0)o.find(".js-content-item-base").first().find(".content-title").focus();else{var a=i.closest(".folder");a.length>0?a.find(".js-content-item-base").first().find(".content-title").focus():this.timeoutService((function(){e(".js-create").focus()}),this.scope.$root,0,!1)}}},t.prototype.hasSupportedConversation=function(){return!!this.scope.content.hasConversation()&&R.a.create(this.scope.content).supportsConversations()},t.prototype.shouldShowAlertIcon=function(){return this.isLate||this.scope.content.canViewAsInstructor()&&this.isUnlaunchableLtiLink()},t.prototype.shouldShowDiscussionAnalytics=function(){return this.scope.content.contentHandler&&F.g.Discussion.isEqualTo(R.a.create(this.scope.content).viewHandler())},t.prototype.shouldShowScormAnalysisReport=function(){return this.scope.content&&this.entitlementService.isEntitled("course.gradebook.MODIFY",this.scope.content.courseId||this.courseId)&&this.scope.content.isScorm()&&this.scope.content.hasReport()},t.prototype.isUnlaunchableLtiLink=function(){return this.scope.content.id&&this.scope.content.getContentDisplay().isLtiLink()&&!this.scope.content.getContentDisplay().isXplorLtiLink()&&!this.ltiService.getLaunchLinkFromContent(this.scope.content)},t.prototype.showVisibility=function(){return!this.isUnlaunchableLtiLink()},t.prototype.usesEditButton=function(){var e=this.scope.content.getContentDisplay();return e.usesEditButton()&&e.canUseEditButton()},t.prototype.openEditContentPanel=function(){this.ultraState.goPeekState(this.scope.content.getContentDisplay().getEditState(),this.scope.content.getContentDisplay().getEditStateParams())},t.prototype.updateContentVisibility=function(){this.targetContent&&this.scope.content?(this.targetContent.applyAvailabilitySettings(this.scope.content),this._updateVisibility(this.targetContent),this._updateVisibility(this.scope.content)):this.scope.content&&this._updateVisibility(this.scope.content)},t.prototype._updateVisibility=function(e){var t=this;e.visibility=this.contentService.determineVisibility(e.isAvailable);var n=["isAvailable","isPartiallyVisible","adaptiveReleaseRules"],i=e.getAssociatedGradingColumn();i&&(i.visible=e.isAvailable,n.push("contentDetail")),e.withParams({fields:"id"}).$save(n).$asPromise().then((function(){t.$rootScope.$broadcast("content-update",e)}))},t.prototype.updateAlly=function(){this.canShowAlly&&this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content))},t.prototype.getOverflowMenu=function(){var e=this;return[{icon:"draw",labelKey:"global.edit",show:function(){var t=e.isGettingConfirmationOptions?e.lastIsEditButtonShow:e.usesEditButton();return e.lastIsEditButtonShow=t,t},onClick:this.openEditContentPanel.bind(this)},{icon:"conversation",labelKey:"components.directives.content-item-base.overflow-menu.open-conversation",show:this.hasSupportedConversation.bind(this),onClick:function(){e.ultraState.goPeekState("conversations",{courseId:e.scope.content.courseId,contentId:e.scope.content.id})}},{icon:"beast-analytics",labelKey:"components.directives.content-item-base.overflow-menu.student-activity",show:function(){return e.displayTelemetryUserActivity&&!e.isAnonymouslyGraded()},onClick:function(){e.ultraState.goPeekState(V.TelemetryRoutes.CONTENT_ACTIVITY_IN_DETAIL,{contentId:e.scope.content.id})}},{icon:"beast-analytics",uniqueId:"scorm-analytics-report",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:function(){return e.shouldShowScormAnalysisReport()&&!e.contextCourseMembership.isStudentMembership()},onClick:function(){e.ultraState.goPeekState("scorm-analytics-report",{courseId:e.scope.content.courseId,contentId:e.scope.content.id})}},{icon:"beast-analytics",uniqueId:"discussion-insights",labelKey:"components.directives.content-item-base.overflow-menu.view-analytics",show:function(){return e.displayTelemetryDiscussionActivity},onClick:function(){var t=e.scope.content.contentDetail["resource/x-bb-courselink"]?e.scope.content.contentDetail["resource/x-bb-courselink"].linkSourceId:e.scope.content.id;e.ultraState.goPeekState(V.TelemetryRoutes.DISCUSSION_FORUM_INSIGHTS,{contentId:t,forumContentId:e.scope.content.id})}},{icon:"question-analysis",labelKey:"components.directives.content-item-base.overflow-menu.question-analysis",show:function(){return e.canViewQuestionAnalysis&&e.scope.content.isQuestionAnalysisAvailable()},onClick:function(){e.ultraState.goPeekState("question-analysis.report",{qaContentId:e.scope.content.id})}},{icon:"trash",labelKey:"global.delete",show:function(){return e.scope.content.canDelete()},disable:function(){return e.scope.content.isInForcedSequenceModule()},disableInfo:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"course.content.deleteDisabledDueToFS"}),onClick:this.deleteContent.bind(this),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){return e.isGettingConfirmationOptions=!0,e.getDeleteConfirmationKeyAndShowType().then((function(t){var n=t.confirmationKey.replace(/^resource\//,"");return e.isGettingConfirmationOptions=!1,e.$q.when(q.a(n))}))}}},{icon:"download",labelKey:"ally.context_menu.download_original_file",show:function(){return e.canShowAlly},onClick:function(){window.open(e.scope.content.getContentDisplay().contentUrl(),"_blank")}},{labelKey:"ally.context_menu.view_accessibility_score",icon:"ally-indicator-unscored",show:function(){return e.canShowAlly},onClick:function(){},additionalAttributes:{"data-ally-show":"instructorfeedback","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"instructorfeedback",style:"display:none;",onkeydown:"(function(e) {\n              if (e.keyCode === "+K.f+" || e.keyCode === "+K.t+') {\n                $(e.target).closest("li").click();\n              }\n              })(event)'}},{icon:"ally-alt-formats",labelKey:"ally.context_menu.download_alternative_formats",show:function(){return e.canShowAlly},onClick:function(){},additionalAttributes:{"data-ally-show":"alternativeformats","data-ally-content-ref":this.scope.content.id,"data-ally-invoke":"alternativeformats",style:"display:none;",onkeydown:"(function(e) {\n                if (e.keyCode === "+K.f+" || e.keyCode === "+K.t+') {\n                 $(e.target).closest("li").click();\n                }\n              })(event)'}}]},Object.defineProperty(t.prototype,"deployedAssessment",{get:function(){return this.scope.content&&this.scope.content.getDeployedAssessment()},enumerable:!0,configurable:!0}),t.prototype.isAnonymouslyGraded=function(){var e=this.scope.content.getAssociatedGradingColumn();return e&&e.anonymousGrading},t.prototype.editGroups=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t,n;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=this.scope.content.id,this.scope.content.isAssignment()||this.scope.content.isTest()?(e=this.deployedAssessment.gradingColumn.id,[3,3]):[3,1];case 1:return e=this.scope.gradeColumn&&this.scope.gradeColumn.id,N.r.ContentHandler.CourseLink.isEqualTo(this.scope.content.contentHandler)&&this.scope.content.contentDetail?[4,this.scope.content.getLinkContentSource().$asPromise()]:[3,3];case 2:n=i.sent(),t=n.id,i.label=3;case 3:return this.ultraState.goPeekState("course-group",{groupCourseId:this.scope.content.courseId||this.ultraState.params.courseId,groupContentId:t,groupColumnId:e}),[2]}}))}))},t.prototype.showOverflowMenu=function(){var e=this.scope.content;return e.canDelete()||e.canViewAsInstructor()||this.usesEditButton()||e.hasConversation()||this.canShowAlly&&!e.isConditionalReleaseLocked()},t.prototype.openAssessmentItem=function(){r.a.isExternalSubmissionsAssessment(this.scope.content)?this.ultraState.goPeekState("assessment.external-overview",{contentId:this.scope.content.id}):this.ultraState.goPeekState("assessment.overview",{contentId:this.scope.content.id})},t.prototype.markCompleted=function(){this.contextCourseMembership.isActAsInstructorMembership()||this.scope.content.state===N.r.StateType.Completed||this.scope.content.updateState(N.r.StateType.Completed,!0)},t.prototype.getRootClassName=function(){return Z},t.$inject=["$q","$rootScope","element","scope",N.o.serviceName,B.b,u.f,g.b,y.e,w.d,C.b,A.b,O.serviceName,D.c,T.e,$.b,x.b,H.d,d.b,"$injector"],t}(),X=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.scope={content:"=",contents:"=",contextArea:"=",canMove:"="},this.template=U,this.link=function(e,n){e.contentItemBase=t.$injector.instantiate(Y,{scope:e,element:n}),e.$on(k.e,(function(t,i,s,o){o===k.c.FileDrop&&e.content===s.content&&(s.targetElement=n.find(".bb-progress"),e.$root.$broadcast(k.e,i,s,e.content.ui.fileUploadId,s.targetElement,k.c.LinkProgress))}))}}return e.$inject=["$injector"],e}();o.module(J,[p.a,m.a,h.a,b.a,S.a,v.a,f.b,D.b,T.d,P.d,L.a,G.a,j.a,_.a,I.c,O.moduleName,u.d,C.a,B.a,q.b,z.a,E.a,c.a,l.a]).directive("bbContentItemBase",["$injector",function(e){return e.instantiate(X)}])}).call(this,n("5iHu"))},kHnH:function(e,t,n){},kN1T:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var i=n("D57K"),s=n("wHJ2"),o=n("nsO7"),a=n("0JpG"),r=n("LN5R"),c=n("BMpZ"),l=n("o5Lu"),d=n("lEL+"),u=n("jhBu"),p=n("dF44"),m=n("+4Px"),h=n("qH3X"),b=n("s1u2"),g=n("6PP7"),v=n("cbVV"),f=n("TmUJ"),y=n("LTOG"),w=n("aHpC"),C=n("Sa5G"),S="ultra.components.directives.gradeGridColumnHeaderReborn",A=function(t){function n(n,i,s,a,r,c,l,d,u,b){var g=t.call(this,i,d)||this;return g.rootScope=n,g.element=s,g.attrs=a,g.$compile=r,g.gradeGridRebornController=c,g.grade=l,g.bbLocalize=u,g.entitlementService=b,g.initializeEventHandler(),g.toolAvailable=!0,g.menuScope=i.$new(!0),Object.defineProperty(i,"possible",{get:function(){return g.possible}}),i.$watch("col",(function(e){i.columnMetadata=e.data,g.col=e,o.debounce((function(){return g.highlight(g.col)}),1e3)(),g.element.data("col",g.col),i.isGroupTest=g.col instanceof v.h,i.showAlertIcon=function(){return i.columnMetadata.getNumMissingIfLate()>0},g.element.find(".content").removeClass("is-active"),c.activeColumnId===e.id&&g.element.find(".content").addClass("is-active"),i.columnMetadata.isAttendance()&&!c.attendanceIsAvailable&&(g.toolAvailable=!1)})),i.$on(h.a.FOCUSIN_CELL,(function(e,t){t.columnId===g.col.id&&(g.gradeGridRebornController.getElement().find(".is-active").removeClass("is-active"),g.toolAvailable&&g.element.find(".content").addClass("is-active"))})),i.$on(h.a.FOCUSOUT_CELL,(function(e,t){t.columnId===g.col.id&&g.element.find(".content").removeClass("is-active")})),i.$on(p.b.CELL_FOCUSED,(function(){s.find(".content").focus()})),s.find(".content").on("keydown",(function(t){if(t.keyCode===m.g)g.scope.$emit(p.b.LEAVE_GRID);else{if(!m.y(t))return;e(t.target).click()}t.preventDefault(),t.stopPropagation()})),s.find(".content").on("keyup",(function(e){m.y(e)&&(e.preventDefault(),e.stopPropagation())})),g}return Object(i.__extends)(n,t),n.prototype.initializeEventHandler=function(){var e=this;this.element.find(".content-header-bg").focusin((function(){e.focusin()})).focusout((function(){e.focusout()}))},n.prototype.focusin=function(){this.rootScope.$broadcast(h.a.FOCUSIN_CELL,{columnId:this.col.id})},n.prototype.focusout=function(){this.rootScope.$broadcast(h.a.FOCUSOUT_CELL,{columnId:this.col.id})},Object.defineProperty(n.prototype,"possible",{get:function(){if(this.scope.columnMetadata&&!o.isUndefined(this.scope.columnMetadata.possible))return Math.round(100*this.scope.columnMetadata.possible)/100},enumerable:!0,configurable:!0}),n.prototype.popupMenu=function(t){var n=this,i="grade-grid-column-header-menu-reborn-"+this.col.id,s=this.grade.canPostGrades(this.col.gridData.course,this.col.data);if((!this.isGroupContent()||this.hasEntitlementsToViewGroups())&&!this.gradeGridRebornController.isMenuExisting(i)&&this.toolAvailable){var o=e(t.target).closest(".grade-grid-header-cell").offset();o.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.canPostGrades=s,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=function(e){var t=o.left+e.width(),i=n.gradeGridRebornController.getGradeGridContainerElementRight();t>i&&(o.left-=t-i+Object(f.a)()),e.offset(o)},this.gradeGridRebornController.popupMenu(i,g,this.menuScope),this.timeout((function(){var e=n.gradeGridRebornController.getPopupMenu();e.on("keydown",(function(t){t.keyCode===m.g||t.keyCode===m.u?(e.data("destroy")(),n.scope.$emit(p.b.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):m.y(t)&&n.scope.$emit(p.b.CELL_FOCUSED)})),n.gradeGridRebornController.getMenuitems().first().focus()}),this.menuScope,0,!1),t.preventDefault(),t.stopPropagation()}},n.prototype.hasEntitlementsToViewGroups=function(){return this.col&&this.entitlementService.isEntitled(C.v.ViewGroups,this.col.getCourse().id)},n.prototype.isGroupContent=function(){return this.col&&this.col instanceof v.g&&null!==this.col.groups||this.col.data&&this.col.data.groupContent},n.prototype.isRestricted=function(){return!!this.isGroupContent()&&!this.hasEntitlementsToViewGroups()},n.prototype.getToolTipTemplate=function(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'},n.prototype.getSchemaText=function(){var e=this,t="components.directives.grade.grid.points.plural";if(this.scope.columnMetadata&&this.scope.columnMetadata.isScorm()){var n=this.scope.columnMetadata.ui&&this.scope.columnMetadata.ui.content||null,i=n&&n.getScormGradebookItems()||[],s=i&&i.find((function(t){return t.columnId===e.scope.columnMetadata.id}));t="course.content.scorm.settings.gradeSchema."+(s&&s.scoringMethod&&s.scoringMethod.toString().toLowerCase()||"score")+"Overview.plural"}return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:t,params:{point:this.possible,count:this.possible},noWrap:!0})},n.$inject=["$rootScope","scope","element","attrs","$compile","gradeGridRebornController",l.h,d.b,a.serviceName,u.b],Object(i.__decorate)([Object(w.d)("possible","locale","columnMetadata.scoreProviderHandle")],n.prototype,"getSchemaText",null),n}(y.a),k=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=b,this.scope=!0,this.require="^"+r.a,this.link=function(e,n,i,s){e.gradeGridColumnHeaderReborn=t.$injector.instantiate(A,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();s.module(S,[c.a]).directive("bbGradeGridColumnHeaderReborn",["$injector",function(e){return e.instantiate(k)}])}).call(this,n("5iHu"))},kQ1d:function(e,t){e.exports='<bb-inline-validation show-error="!questionGrade.isValidGrade" bb-load-bundle="components/directives/grade/question-grade">\n  <div class="wrapping-input-style show-total {{questionGrade.gradeColor}}" ng-class="{\'readonly\': questionGrade.isDisabled()}" tabindex="-1">\n    <input id="{{::inputId}}" name="question-grade" type="text" placeholder="--"  tabindex="0"\n          aria-label="{{questionGrade.ariaLabel()}}"\n          style="min-width: 10px; max-width: 100px; width: 10px;" pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="100px" pu-elastic-input-width-delta="8" class="uit-question-grade-input"\n          ng-disabled="questionGrade.isDisabled()" ng-model="questionGrade.inputValue" ng-blur="questionGrade.save()" ng-change="questionGrade.validate()"\n          analytics-id="components.directives.grade.questionGrade.input.text" >\n    <span ng-if="gradedQuestionAttempt && (!questionGrade.scope.hideGrades || questionGrade.isStudent)" class="points-text" bb-translate translate-values="{total: gradedQuestionAttempt.questionAttempt.question.points}">components.directives.grade.question-grade.points</span>\n  </div>\n</bb-inline-validation>\n'},kbFs:function(e,t,n){},kgZF:function(e,t,n){},kkz3:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu student-card" tabindex="-1">\n  <div class="student-info">\n    <bb-user-avatar class="avatar" user="user"></bb-user-avatar>\n    <div class="info">\n      <bb-username class="ellipse username" user="user" auto-update="true" title="{{fullName}}" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n      <div class="profile ellipse" ng-if="user.userName && !user.studentId" title="{{user.userName}}">{{user.userName}}</div>\n      <div class="profile ellipse" ng-if="!user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n      <div class="profile ellipse" ng-if="user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ username: user.userName, studentId: user.studentId }">components.directives.usercard.usernameAndId</div>\n      <div class="profile" ng-bind="courseRole"></div>\n    </div>\n  </div>\n</div>\n'},"kp/p":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return A}));var i=n("D57K"),s=n("wHJ2"),o=n("0JpG"),a=n("TnpK"),r=n("hkqm"),c=n("sgjL"),l=n("lEL+"),d=n("g66W"),u=n("12mu"),p=n("Oyr+"),m=n("o5Lu"),h=n("yC9S"),b=n("en1n"),g=n("nsO7"),v=n("WAgA"),f=n("o9hD"),y=n("NZ4S"),w=n("0BVo"),C="ultra.features.course.grades.gradesUploadSettings.controller",S="refresh-after-upload",A=function(){function t(t,n,i,s,o,a,r,c,l,u,m){var v=this;this.$scope=t,this.$rootScope=n,this.postMessageDispatcher=i,this.timeoutService=s,this.course=o,this.ultraState=a,this.toast=r,this.modalService=c,this.contentCollectionAvailability=l,this.bbLocalize=u,this.grade=m,this.confirmedToClose=!1,this.fileName="",this.hasDroppedClass=!1,this.selectAll=!1,this.showErrorDetail=!1,this.afterImported=!1,this.showContentCollection=!1,this.uploadErrorFileTypeTemplate=y,this.invalidUserNames="",this.invalidUserNamesCount=0,this.failedItems="",this.failedItemsCount=0,t.gradesUploadSettings=this,this.showContentCollection=this.contentCollectionAvailability.toolEnabledSetting.isAvailable,this.modalScope=this.$rootScope.$new(),h.b.OnWindow("resize",g.debounce((function(){b.h()&&v.ultraState.leavePeekState(v.ultraState.current.name)}),100),this.$scope),t.$on(p.e,(function(t,n,i,s){if(s===p.c.Uploaded){v.source="LOCAL";var o={source:v.source,name:i.fileName,location:i.fileLocation};v.parseUploadGradebook(o),e(".upload-gradebook-panel .help-link").focus()}})),this.postMessageDispatcher.registerEventHandler("classic-picker-submit",(function(e){var t=e.items[0];if(!/(\.xls|\.csv)$/i.exec(t.linkTitle))return v.showErrorModal(y),!1;v.source="CONTENT_COLLECTION";var n=t&&t.url||"",i=n.substr(n.lastIndexOf("/")),s={source:v.source,name:t.linkTitle||"",location:i};v.parseUploadGradebook(s)}),this.$scope),this.postMessageDispatcher.registerEventHandler("classic-picker-cancel",(function(e,t){v.timeoutService((function(){d.e(v.ultraState.current.name,"peek.content-collection-picker")&&v.closePanel(),window!==t&&t.close()}),v.$scope,0)}),this.$scope),this.uploadAction=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.grades.grades-upload-settings.upload"}),this.completedModalTitleKey=(this.course.isOrganization?"course":"organization")+".grades.grades-upload-settings.courseComplete.title",this.registerStateChangeListener()}return t.prototype.parseUploadGradebook=function(e){var t=this;this.course.gradebook.parseUploadedGradebook(e).then((function(n){if(400===n.$response.status)return t.showErrorModal(v),!1;t.timeoutService((function(){d.e(t.ultraState.current.name,"peek.content-collection-picker")&&t.closePanel()}),t.$scope,0),t.hasDroppedClass=!0,t.invalidUserNames=n.invalidUserNames,t.invalidUserNamesCount=t.invalidUserNames&&t.invalidUserNames.split(",").filter((function(e){return e.trim()})).length,t.fileName=e.name,t.changedList=n.changedList,t.selectAll=!0,t.checkAll(!0)}))},t.prototype.checkAll=function(e){var t=this;this.columnList=[],this.errorColumnList=[],s.forEach(this.changedList,(function(n){if(!n.columnTitle)return!1;n.isError?(n.message.languageKey=n.message.languageKey.replace(/\./g,"_"),n.message.params&&t.getColumnErrorMessage(n.message),n.message.translatedLanguageKey=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(t.$scope),key:n.message.languageKey,params:{data:n.message.detailErrorMessageKey},noWrap:!0,noEscape:!0}),t.errorColumnList.push(n)):(n.checked=e,n.clearGradeOption=n.needOverrideAndAttemptsChoices?"OVERRIDE":"DO_NOTHING",t.updateColumnList(n,n.checked))}))},t.prototype.updateColumnList=function(e,t){t?this.columnList.push(e):this.columnList.splice(this.columnList.indexOf(e),1)},t.prototype.validate=function(){return this.columnList&&this.columnList.length>0},t.prototype.cancelClicked=function(){this.closePanel()},t.prototype.chooseDestination=function(){this.ultraState.goPeekState("content-collection-picker",{pickerType:"File",multi:"false"})},t.prototype.closePanel=function(){this.ultraState.leavePeekState(this.ultraState.current.name)},t.prototype.deleteFile=function(){this.hasDroppedClass=!1,this.columnList=[],this.changedList=[],this.errorColumnList=[],this.selectAll=!1},t.prototype.showErrorModal=function(e){this.modalService.open({scope:this.modalScope,template:e})},t.prototype.confirmToClose=function(){this.confirmedToClose=!0,this.ultraState.leavePeekState(this.ultraState.current.name)},t.prototype.registerStateChangeListener=function(){var e=this;this.stateChangeListener=this.$scope.$on("$stateChangeStart",(function(t,n,i,s,o){n.name.indexOf("grade-upload-setting")<0&&e.hasDroppedClass&&!e.afterImported&&(e.confirmedToClose||(t.preventDefault(),e.$scope.$broadcast("show-confirmation","grades-upload-setting")))}))},t.prototype.importGradebook=function(e){var t=this;if(this.invalidUserNames&&!e)return this.$scope.$broadcast("show-confirmation","grades-upload-continue-with-errors"),!1;var n={changedList:this.columnList};this.course.gradebook.importGradebook(n).then((function(e){if(t.afterImported=!0,"bb-rest-course-is-closed"===e.$response.data.code)return t.showErrorModal(f),!1;e.errorItem?(t.modalScope.failedItems=e.errorItem,t.modalScope.failedItemsCount=e.errorItem&&e.errorItem.split(",").filter((function(e){return e.trim()})).length,t.showErrorModal(w),t.ultraState.leavePeekState(t.ultraState.current.name)):(t.$rootScope.$broadcast(S,e.savedItemsIds),t.ultraState.leavePeekState(t.ultraState.current.name),t.toast.show({messageKey:"course.grades.grades-upload-settings.complete",icon:"icon-check",toastStatus:"success"}))}))},t.prototype.getColumnErrorMessage=function(e){e.params[0].rawValue?e.detailErrorMessageKey=e.params[0].rawValue:e.params.forEach((function(t){e.languageKey===t.localizableMessage.languageKey.replace(/\./g,"_")&&(e.detailErrorMessageKey=t.localizableMessage.params?t.localizableMessage.params[0].rawValue:"")}))},t.$inject=["$scope","$rootScope",c.b,l.b,"currentCourse",a.d,r.b,u.b,"contentCollectionAvailability",o.serviceName,m.h],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(A)}).call(this,n("5iHu"))},lEWr:function(e,t){e.exports='<div class="input-wrapper">\n  <input translate-attrs-values="{userName: gradeGridCellEditorReborn.userName}"\n        bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grid.scoreInputAriaLabel\'}"\n        ng-blur="gradeGridCellEditorReborn.onInputBlur($event)" \n        placeholder="--" ng-model="gradeGridCellEditorReborn.score"\n        ng-click="gradeGridCellEditorReborn.stopPropagation($event)"\n        ng-change="gradeGridCellEditorReborn.onChange()"\n        aria-describedby="totalPoints"\n        ng-keydown="gradeGridCellEditorReborn.onKeydown($event)" spellcheck="false" autocomplete="off"\n        analytics-id="components.directives.grade.gradeGridCellEditorReborn.input.text" />\n</div>\n<div class="possible-wrapper" ng-mousedown="gradeGridCellEditorReborn.mousedown()">\n  <span class="slash"></span><span id="totalPoints" class="possible" ng-bind="col.data.possible"></span>\n</div>'},lLJW:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("4iFr"),o="ultra.components.directives.bbUiIcon.Discussion";Object(i.a)(s.Discussion,o,"bbUiIconDiscussion")},laCM:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("D57K"),s=n("t3aq"),o=n.n(s),a=n("cs5G"),r=n("0JpG"),c=n("yC9S"),l=n("aHpC"),d="ultra.directives.bbAllyShow";!function(){function e(e,t,n){this.$element=e,this.$scope=t,this.localize=n,this.showIcon=!1}e.prototype.$postLink=function(){var e={contentRef:this.contentId,widgetType:this.showViewScoreLink?s.WidgetType.ScoreIndicator:s.WidgetType.AlternativeFormats},t=this.localize.getLocale(this.$scope);this.showIcon?this.iconSize&&(e.iconSize=this.iconSize):e.text=this.localize.translateSync({locale:t,key:this.showViewScoreLink?"ally.open_feedback_panel":"ally.download_alternative_formats"}),this.showAlternativeFormatsLink&&(e.ariaLabel=this.localize.translateSync({locale:t,key:"ally.download_alternative_formats"})),o.a.renderWidget(this.$element[0],e)},e.prototype.$onDestroy=function(){o.a.destroyComponent(this.$element[0])},e=Object(i.__decorate)([Object(c.a)({module:angular.module(d,[a.a,r.moduleName]),componentName:"bbAllyShow",bindings:{contentId:"@",showViewScoreLink:"<?",showAlternativeFormatsLink:"<?",showIcon:"<?",iconSize:"@?"}}),Object(i.__param)(0,Object(l.b)("$element")),Object(i.__param)(1,Object(l.b)("$scope")),Object(i.__param)(2,Object(l.b)(r.serviceName))],e)}()},lwNT:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-lock",use:"icon-small-lock-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock"><path d="M3 8h10v7H3V8zM5 8V4c0-1.5 1-3 3-3m0 0c.5 0-.5 0 0 0zm0 0c2 0 3 1.5 3 3v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},lx16:function(e,t,n){"use strict";n("zhNR"),n("JzsJ"),n("KmIE"),n("VCKY"),n("BiyI"),n("jlIo"),n("qzMN"),n("2i58"),n("Ybms"),n("P2DR"),n("wKTs"),n("vgq2");var i=n("wHJ2"),s=n("D57K"),o=n("dCrD"),a=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return Object(s.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(o.a),r=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return Object(s.__extends)(t,e),t.$inject=["$injector","scope","element"],t}(o.a),c=n("Sa5G"),l=n("aHpC"),d=n("c7N/"),u=function(e){function t(t,n,i){var s=e.call(this,t,n,i)||this;return s.canEditUnsafeHtml=!1,s.isCloudServiceAvailable=!1,s.initializeItems=function(){s.items=[{key:"addText",className:"js-add-content",name:s.bbLocalize.translateSync({locale:s.bbLocalize.getLocale(s.scope),key:"components.directives.add-content-button.addContent"}),iconProps:{iconName:"notes",iconSize:"small"},onClick:s.addTextBlock}],s.canEditUnsafeHtml&&s.items.push({key:"addHtml",className:"js-add-html",name:s.bbLocalize.translateSync({locale:s.bbLocalize.getLocale(s.scope),key:"components.directives.add-content-button.addHtml"}),iconProps:{iconName:"code",iconSize:"small"},onClick:s.addHtmlBlock}),s.items.push({key:"addLocalFile",className:"js-add-local-file",name:s.bbLocalize.translateSync({locale:s.bbLocalize.getLocale(s.scope),key:"components.directives.add-content-button."+(s.isMobile?"uploadFromDevice":"uploadFromComputer")}),iconProps:{iconName:"upload-file",iconSize:"small"},onClick:s.uploadLocalFile}),s.isCloudServiceAvailable&&s.items.push({key:"addCloudFile",className:"js-add-cloud-file",name:s.bbLocalize.translateSync({locale:s.bbLocalize.getLocale(s.scope),key:"components.directives.add-content-button.uploadFromCloudStorage"}),iconProps:{iconName:"upload-cloud",iconSize:"small"},onClick:s.uploadCloudFile})},s.addTextBlock=function(){s.scope.$emit("bb-bbml-editor-add-block",c.d.Text,s.getInsertLocationData())},s.addHtmlBlock=function(){s.scope.$emit("bb-bbml-editor-add-block",c.d.Html,s.getInsertLocationData())},s.uploadLocalFile=function(){s.element.find(".file-upload-button").click()},s.uploadCloudFile=function(){s.element.find(".js-upload-from-kloudless").click()},s.focusAddButton=function(){s.element.find("button").focus()},s.$q=t.get("$q"),s.unsafeHtmlService=t.get(d.b),s.initialize(),s}return Object(s.__extends)(t,e),t.prototype.initialize=function(){var e=this;return this.$q.all({canEditUnsafeHtml:this.unsafeHtmlService.canEditUnsafeHtml(),isCloudServiceAvailable:this.isCloudServiceAvailablePromise}).then((function(t){var n=t.canEditUnsafeHtml,i=t.isCloudServiceAvailable;e.canEditUnsafeHtml=n,e.isCloudServiceAvailable=i})).finally(this.initializeItems)},t=Object(s.__decorate)([Object(s.__param)(0,Object(l.b)("$injector")),Object(s.__param)(1,Object(l.b)("scope")),Object(s.__param)(2,Object(l.b)("element"))],t)}(o.a),p=n("HjsN"),m=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return Object(s.__extends)(t,e),t.prototype.addGroup=function(){this.toggleMenu();var e=this.scope.positionBefore?this.scope.positionBefore():this.scope.positionAfter()+1;this.scope.createFunction(e),this.closeMenu()},t.$inject=["$injector","scope","element"],t}(o.a),h=n("ZkU4"),b=function(e){function t(t,n,i){var s=e.call(this,t,n,i)||this,o=i.closest("[data-base-state-name]").data("baseStateName");return s.$q.all([s.ultraState.peekHref("grade-item.create",s.getInsertLocationData(),o),s.ultraState.peekHref("gradebook-item.calculation",s.getInsertLocationData(),o),s.ultraState.peekHref("attendance",null,o)]).then((function(e){s.attendanceHref=e[2],s.items=[{key:"addGradebookItem",href:e[0],className:"doc-add-grade",name:s.bbLocalize.translateSync({locale:s.bbLocalize.getLocale(s.scope),key:"components.directives.grade.grader-column.actions.addItem"}),iconProps:{iconName:"add",iconSize:"small"}},{key:"addCalculation",href:e[1],className:"doc-add-calc",name:s.bbLocalize.translateSync({locale:s.bbLocalize.getLocale(s.scope),key:"components.directives.grade.grader-column.actions.addCalculation"}),iconProps:{iconName:"calculation",iconSize:"small"}}],s.addOrRemoveAddAttendanceMenuItem()})),n.$on("always-show-time-expires",(function(){n.addContentButton.alwaysShow=!1})),n.$on("update-content-menu",(function(){s.items&&s.addOrRemoveAddAttendanceMenuItem()})),s}return Object(s.__extends)(t,e),t.prototype.addOrRemoveAddAttendanceMenuItem=function(){var e=null==this.scope.showAddAttendance||!this.scope.showAddAttendance(),t=this.doesMenuItemExistByKey("addAttendance");e?this.removeMenuItemByKey("addAttendance"):t||this.addAttendanceMenuItem()},t.prototype.doesMenuItemExistByKey=function(e){return this.items.some((function(t){return t.key===e}))},t.prototype.removeMenuItemByKey=function(e){this.items=this.items.filter((function(t){return t.key!==e}))},t.prototype.addAttendanceMenuItem=function(){this.items.push({key:"addAttendance",href:this.attendanceHref,className:"doc-add-attendance",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addAttendance"}),iconProps:{iconName:"attendance",iconSize:"small"}})},t.$inject=["$injector","scope","element"],t}(o.a),g=n("J8YL"),v=n("tTiy"),f=n("1Niw"),y=n("UeHE"),w=n("9hp7"),C=n("SE1T"),S=n("6xt4"),A=n("07HN"),k=function(){function e(e){this.$injector=e,this.handlersAndTemplateTexts={assignment:{handler:a,templateText:g},attempts:{handler:r,templateText:v},"bbml-editor":{handler:u,templateText:f},"cloud-upload":{handler:p.b,templateText:y},"course-group":{handler:m,templateText:C},"course-outline":{handler:h.a,templateText:S},grades:{handler:b,templateText:A}}}return e.prototype.getTemplateText=function(e){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");if(null==this.handlersAndTemplateTexts[e].templateText)throw new Error("No template for context area: "+e);return w.replace("<template></template>",this.handlersAndTemplateTexts[e].templateText)},e.prototype.getHandler=function(e,t,n){if(null==e||!(e in this.handlersAndTemplateTexts))throw new Error("valid contextArea must be provided");return this.$injector.instantiate(this.handlersAndTemplateTexts[e].handler,{scope:t,element:n})},e.$inject=["$injector"],e}(),I=n("2E9T"),O=n("+e2k"),D="ultra.components.directives.content.buttonAddContent",T=function(){function e(){this.restrict="C",this.template=I}return e.$inject=["$injector"],e}();i.module(D,[O.a]).directive("buttonAddContent",["$injector",function(e){return e.instantiate(T)}]);var $=n("0JpG"),x=n("qgBt"),E=n("IR+Z"),P=n("H/mg"),R=n("nYZ0"),L=n("3Jgm"),j=n("TnpK");n.d(t,"a",(function(){return G}));var G="ultra.directives.addContentButton",M=function(){function e(e,t,n){var i=this;this.$injector=e,this.$rootScope=t,this.ultraState=n,this.compiled=Object.create(null),this.restrict="E",this.scope={attachHandler:"=?",disableDrag:"&?",content:"=",createFunction:"=?",hideDividerLines:"&?",rootContent:"&?",contextArea:"=",alwaysShow:"=",showAddAttendance:"&?",showBothButtons:"&?",showMenuOverride:"=",positionBefore:"&?",positionAfter:"&?",parentId:"&",depth:"&",canCreateAllContents:"=?",canCopyImport:"=?",folderNestedButton:"&?",fileLocation:"@?",webLocation:"@?",initialUpload:"&?",primaryKey:"&?",ignoredStates:"&?",itemName:"&?",itemType:"&?",itemIndex:"&?",isButtonLocationChangable:"<?",isRenderByDefault:"&?"},this.compile=function(){return function(e,t){var n;n=e.contextArea?e.contextArea:e.$parent.contextArea?e.$parent.contextArea:"course-outline";var s=i.$injector.instantiate(k,{});null==i.compiled[n]&&(i.compiled[n]=i.$injector.get("$compile")(s.getTemplateText(n))),e.addContentButton=s.getHandler(n,e,t),e.fileListViewId="fileListView-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.fileListViewLocalId=e.fileListViewId+"Local",i.compiled[n](e,(function(e,n){t.append(e)})),i.$rootScope.$broadcast("add-content-button-ready")}}}return e.$inject=["$injector","$rootScope",j.d,R.f],e}();i.module(G,["ngAnimate",D,E.a,$.moduleName,x.a,P.a,R.d,L.a,j.b,d.a]).directive("bbAddContentButton",["$injector",function(e){return e.instantiate(M)}])},m2KQ:function(e,t){e.exports='<div class="grade-input-wrapper" ng-class="{\'has-validation-error\': !!gradeInput.form[gradeInput.id].$invalid}">\n  <div class="left">\n    <bb-inline-validation\n      show-error="!!gradeInput.form[gradeInput.id].$invalid"\n      bb-translate-attrs="{ \'error-message\': errorMessageKey }"\n      ng-show="!gradeInput.isRubricEvalMode()">\n      <div ng-class="{\'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown(), \'is-in-progress\': gradeInput.isInProgressShown(), \'group-grade-input\': !!forGroup}"\n           class="wrapping-input-style" data-dropdown="performanceCodes-{{gradeInput.id}}">\n        <div bb-foundation-defer>\n\n          <input name="{{gradeInput.id}}" autocomplete="off" ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}"\n                 pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px"  pu-elastic-input-width-delta="8"\n                 type="text" placeholder="--"\n                 bb-translate-attrs="{ \'aria-label\': gradeInput.getGradeInputAriaLabelKey() }"\n                 translate-attrs-values="{ user: forUser, group_name: forGroup && forGroup.title, grade: gradeInput.gradeDisplayItem.displayValue, total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}"\n                 ng-model="gradeInput.gradeDisplayItem.displayValue" ng-readonly="gradeInput.isReadOnly()"\n                 title="{{gradeInput.gradeDisplayItem.perfCodeDesc}}"\n                 ng-blur="gradeInput.onBlur($event)" ng-change="gradeInput.gradeValueOnChange()" ng-focus="gradeInput.onFocus()"\n                 class="js-grade-input" analytics-id="directives.grade-input.grade.display.item.input"\n                 aria-invalid="{{!!gradeInput.form[gradeInput.id].$invalid ? \'true\' : \'false\'}}"\n                 aria-describedby="{{!!gradeInput.form[gradeInput.id].$invalid ? gradeInput.getAriaDescribeById(): undefined}}">\n        </div>\n\n        \x3c!--TOTAL POINTS--\x3e\n        \x3c!-- Fix ULTRA-15280.\n        If there is gradeDetail, we should use its pointsPossible as the total.\n        If there is no gradeDetail, which means it is not graded yet, there are tow cases:\n         for overall grade (and calculations), we use the default value 100,\n         for common column, assignment, etc. we use column.possible. --\x3e\n        <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n              translate-values="{total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}">\n          components.directives.grade.grade-input.points\n        </span>\n      </div>\n      <div class="alert-icon" ng-if="!!gradeInput.form[gradeInput.id].$invalid">\n        <bb-svg-icon size="small" icon="attention" status="alert"></bb-svg-icon>\n      </div>\n    </bb-inline-validation>\n    <a ng-show="gradeInput.isRubricEvalMode()" class="button super-clear has-rubric wrapping-input-style"\n       ng-class="{\'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown(), \'is-in-progress\': gradeInput.isInProgressShown(), \'group-grade-input\': !!forGroup, \'disable-click\': disableRubricEvalClick()}"\n       ng-click="gradeInput.openRubricEvaluation()"\n       aria-disabled="{{disableRubricEvalClick()}}"\n       href="javascript:void(0);" analytics-id="directives.grade-input.rubric.evaluation.link">\n      <span class="sr-only" bb-translate translate-values="{user: forUser}">components.directives.grade.grade-input.rubricButtonAlt</span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span name="{{gradeInput.id}}" class="grade-point-value" ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}">\n        {{gradeInput.gradeDisplayItem.displayValue || \'--\'}}&nbsp;\n      </span>\n\n      \x3c!--TOTAL POINTS--\x3e\n      <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n            translate-values="{total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}">\n        components.directives.grade.grade-input.points\n      </span>\n    </a>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowOverrideIndicator()" class="left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.overrideIndicator</span>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowPastDueZeroIndicator()" class="left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.pastDueZero</span>\n  </div>\n\n  <div ng-if="gradeInput.alertScreenReaderNewGrade"\n        bb-ax-alert\n        id="gradeInput.getAriaDescribeById()"\n        class="sr-only"\n        bb-translate translate-values="{grade: gradeInput.gradeDisplayItem.displayValue}">\n    components.directives.grade.grade-input.screenReaderEnteredGrade\n  </div>\n</div>\n'},mCEN:function(e,t,n){"use strict";var i=n("D57K"),s=n("yC9S"),o=n("aHpC"),a=n("0JpG"),r=n("7u+5"),c=n("zYa8"),l=n("me+T"),d="ultra.components.directives.bbUiIcon.Attendance";Object(c.a)(l.a,d,"bbUiIconAttendance");var u=n("FvSu");Object(c.a)(u.Audio,"ultra.components.directives.bbUiIcon.Audio","bbUiIconAudio");var p=n("hpcp"),m=n("cXGx");Object(c.a)(m.a,"ultra.components.directives.bbUiIcon.Calculation","bbUiIconCalculation");var h=n("lLJW"),b=n("MlM1");Object(c.a)(b.DocumentBlank,"ultra.components.directives.bbUiIcon.DocumentBlank","bbUiIconDocumentBlank");var g=n("HCOL"),v=n("00V8"),f=n("K16Q");Object(c.a)(f.Homework,"ultra.components.directives.bbUiIcon.Homework","bbUiIconHomework");var y=n("KKAh"),w=n("cMgu"),C=n("VTbC"),S=n("Ylhg"),A=n("y8aX");Object(c.a)(A.a,"ultra.components.directives.bbUiIcon.OverallGrade","bbUiIconOverallGrade");var k=n("i+uu");Object(c.a)(k.Pdf,"ultra.components.directives.bbUiIcon.Pdf","bbUiIconPdf");var I=n("r7jL");Object(c.a)(I.Photo,"ultra.components.directives.bbUiIcon.Photo","bbUiIconPhoto");var O=n("k6dK");Object(c.a)(O.Presentation,"ultra.components.directives.bbUiIcon.Presentation","bbUiIconPresentation");var D=n("VV+j"),T=n("HGKz"),$=n("sOA/"),x=n("5L1M"),E=n("Uw7Y");Object(c.a)(E.Video,"ultra.components.directives.bbUiIcon.Video","bbUiIconVideo");var P=n("HiQ9"),R=n("jOWO"),L=n("FH9J");n.d(t,"a",(function(){return j}));var j="ultra.components.directives.bbUiContentIcon";!function(){function e(e,t){this.$scope=e,this.localize=t}e.prototype.$onChanges=function(){this.setTitleAccess()},e.prototype.setTitleAccess=function(){this.notDecorative&&this.icon&&(this.titleAccess=this.localize.translateSync({key:"components.directives.element-image.element-image-accessibility.img-icon-"+this.icon,locale:this.localize.getLocale(this.$scope)}))},e=Object(i.__decorate)([Object(s.a)({moduleName:j,componentName:"bbUiContentIcon",bindings:{icon:"<",color:"@?",notDecorative:"<?"},template:L,requireModules:[a.moduleName,h.a,r.a,d,"ultra.components.directives.bbUiIcon.Audio",p.a,"ultra.components.directives.bbUiIcon.Calculation",h.a,"ultra.components.directives.bbUiIcon.DocumentBlank",g.a,v.a,"ultra.components.directives.bbUiIcon.Homework",y.a,w.a,C.a,S.a,"ultra.components.directives.bbUiIcon.OverallGrade","ultra.components.directives.bbUiIcon.Pdf","ultra.components.directives.bbUiIcon.Photo","ultra.components.directives.bbUiIcon.Presentation",D.a,T.a,$.a,x.a,"ultra.components.directives.bbUiIcon.Video",P.a,R.a]}),Object(i.__param)(0,Object(o.b)("$scope")),Object(i.__param)(1,Object(o.b)(a.serviceName))],e)}()},mJUP:function(e,t,n){"use strict";n.r(t),n.d(t,"controllerName",(function(){return c})),n.d(t,"AssessmentAttemptController",(function(){return l})),n.d(t,"Controller",(function(){return d}));var i=n("D57K"),s=(n("s5UK"),n("xjJw"),n("ZKRZ"),n("dpCN"),n("JbSi"),n("TR8k"),n("D1Wg"),n("sZYy"),n("v0wN"),n("QhTW"),n("zpX8"),n("w9Zy")),o=n("TnpK"),a=n("mxgC"),r=n("rNTV");n.d(t,"template",(function(){return r}));var c="ultra.features.course.content.assessment.attempt.assessmentAttempt.controller",l=function(){function e(e,t,n,i,s,o,r){this.$rootScope=e,this.$scope=t,this.attempt=n,this.contentData=i,this.course=s,this.bbOffcanvas=o,this.ultraState=r,t.assessmentAttempt=this;var c={type:a.b.AttemptOpened,status:a.a.Success};Object(a.f)(c)}return e.prototype.returnToOverview=function(){var e=this;return this.ultraState.goPeekState("assessment.overview").then((function(){e.bbOffcanvas.shrinkTopPanel(),e.$rootScope.$broadcast("bb-assessment-attempt-save",e.attempt,e.contentData.gradingColumn.id,!!e.contentData.courseContent.isGroupContent)}))},e.$inject=["$rootScope","$scope","attempt","contentData","currentCourse",s.e,o.d],e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(l)},mWXo:function(e,t){e.exports='\n<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride || col.gradeNotations.length" class="f-dropdown f-dropdown-overflow-menu reborn-dropdown performance-code-options show notation-no-border notation-max-height " role="menu">\n\n    <li ng-if="col.gradeNotations.length" class="performance-option-header">\n        <span bb-translate>components.directives.grade.grade-input.selectPerformanceCode</span>\n    </li>\n    <li ng-repeat="notation in col.gradeNotations" class="performance-code-potion">\n      <a role="menuitem" \n         ng-click="gradeGridColumnOverallReborn.selectNotation(notation)" \n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.notation.link">\n        <span class="code" aria-label="{{notation.code}}">{{notation.code}}</span>\n        <span class="description notation-description-max-width" aria-label="{{notation.description}}">{{notation.description}}</span>\n      </a>\n    </li>\n    <li ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride" class="undo-override">\n      <a role="menuitem" \n         ng-click="gradeGridColumnOverallReborn.undoOverride()" \n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grade-input.undoOverride">\n        <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grade-input.undoOverride</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>'},mbXE:function(e,t,n){},mnBQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("wHJ2"),s=n("0JpG"),o=n("kwLz"),a=n("1ZbL"),r="ultra.components.directives.feedback.feedbackAuthoring",c={Class:o.FeedbackAuthoring,bindingNames:["analyticsId","panelTitle","panelSubtitle","primaryGraderFeedback","secondaryGradersFeedback","configProps","isInlineMode"],renderLocalized:!0,withThemeProvider:!0};i.module(r,[s.moduleName]).component("bbFeedbackAuthoring",Object(a.a)(c))},nFxZ:function(e,t,n){},nfUd:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-visible",use:"icon-medium-visible-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-visible"><circle cx="12" cy="12" r="2" stroke-width="2" /><path d="M12 6C7.1067 6 1 12 1 12s6.1067 6 11 6 11-6 11-6-6.1067-6-11-6z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},nfhp:function(e,t){e.exports='<div bb-cache-compilation="assessment-feedback">\n  <div id="react-assessment-feedback-target">\n    <div ng-class="{\'panel-wrap\': !assessmentFeedback.isInlineMode}">\n      <div ng-if="assessmentFeedback.isFeedbackAuthoringPayloadLoaded">\n        <bb-feedback-authoring\n          ng-if="!assessmentFeedback.isLoading"\n          panel-title="assessmentFeedback.feedbackAuthoringPayload.panelTitle"\n          panel-subtitle="assessmentFeedback.feedbackAuthoringPayload.panelSubtitle"\n          primary-grader-feedback="assessmentFeedback.feedbackAuthoringPayload.primaryGraderFeedback"\n          secondary-graders-feedback="assessmentFeedback.feedbackAuthoringPayload.secondaryGradersFeedback"\n          config-props="assessmentFeedback.feedbackAuthoringPayload.configProps"\n          analytics-id="assessmentFeedback.feedbackAuthoringPayload.analyticsId"\n          is-inline-mode="assessmentFeedback.isInlineMode"\n        ></bb-feedback-authoring>\n      </div>\n      <div ng-if="assessmentFeedback.isLoading" class=\'spinner bb-secondary-color-2\'></div>\n    </div>\n  </div>\n\n  <div\n    class="hide"\n    bb-confirmation-needed="x-bb-save-feedback"\n    modal-name="assessment-feedback"\n    show-type="always"\n    ng-click="assessmentFeedback.onClickSave(true);"\n    dismiss-callback="assessmentFeedback.closeConfirmationModalDismissed()"\n    other-choice-action="assessmentFeedback.dontSaveAction()"\n    analytics-id="course.content.assessment.assessmentFeedback.saveChanges"\n  ></div>\n</div>\n'},nsQ1:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-timer",use:"icon-small-timer-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-timer"><path d="M8 4V1c4 0 7 3.134 7 7s-3.134 7-7 7-7-3.134-7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8.5 8.5l-1 1L3 4l5.5 4.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},nthy:function(e,t){e.exports='<bb-modal id="confirm-question-grade-save-modal"\n          class="notification"\n          modal-title-key="course.content.assessment.test.modal.repostSubmissionGradeAlert.title"\n          analytics-id-tag-prefix="course.content.assessment.test.modal.repostSubmissionGradeAlert">\n  <div name="modal-contents">\n    <p bb-translate course-org-token-resolver>course.content.assessment.test.modal.repostSubmissionGradeAlert.body</p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="button confirm-ok js-primary-button" \n          ng-click="$parent.$close()" \n          analytics-id="global.continue"\n          bb-translate>global.continue</button>\n  <button name="modal-footer-button-secondary" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="$parent.$dismiss()" \n          analytics-id="global.cancel"\n          bb-translate>global.cancel</button>\n</bb-modal>'},nvgb:function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="questionAttempt.question.questionText.rawText"\n    is-read-only="true"\n    plugin-options="editorPluginOptions">\n  </bb-rich-text-editor>\n</div>\n'},o9hD:function(e,t){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': {{::gradesUploadSettings.completedModalTitleKey}}}"\n          modal-title-key="{{::gradesUploadSettings.completedModalTitleKey}}" aria-describedby="course-is-complete"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n    <div name="modal-contents">\n        <p id="course-is-complete" bb-translate="course.grades.grades-upload-settings.courseComplete.content" course-org-token-resolver></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkCourseComplete\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettings.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},ooAF:function(e,t){e.exports='<div class="grade-color">\n    <div class="wrapping-input-style readonly pill-style {{displayGradePill.colorCss}} {{displayGradePill.cursorClass}}">\n      <div ng-if="!displayGradePill.shouldShowRubricButton()">\n        <span class="grade-input-display grade-ellipsis">{{displayGradePill.displayValue}}</span>\n      </div>\n      <div ng-if="displayGradePill.shouldShowRubricButton()">\n        <a ng-click="displayGradePill.openRubricEvaluation($event)"\n           ng-class="{\'disable-click\': !!disableRubricEvalClick()}"\n           class="grade-rubric-detail"\n           aria-disabled="{{!!disableRubricEvalClick()}}"\n           href=""\n           analytics-id="components.directives.grade.gradePill.showRubric.link">\n          <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n          <span class="grade-input-display ready grade-ellipsis">{{displayGradePill.displayValue}}</span>\n        </a>\n      </div>\n    </div>\n</div>\n'},pBKf:function(e,t,n){},pF15:function(e,t){e.exports='\n<div class="filter-list-content">\n  <div class="filter-panel-container">\n    <div class="filter-panel-header">\n      <div class="filter-panel-title-wrapper">\n        <h3 class="filter-panel-title" bb-translate>components.directives.grade.filter-panel.title</h3>\n        <button type="button"\n          class="filter-panel-close-button"\n          data-is-visible="true"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.grade.filter-panel.closeFilterPanel\'}"\n          ng-click="gradeGridSearchFilterReborn.closeFilterCriteria()"\n          analytics-id="components.directives.grade.filterPanel.close.button"\n        >\n          <div>\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </div>\n        </button>\n      </div>\n      <button class="filter-panel-clear-all is-disabled"\n              ng-disabled= "!gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0"\n              ng-class="{\'filter-panel-clear-all-active\': gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0}"\n              ng-click="gradeGridSearchFilterReborn.clearAll()"\n              analytics-id="components.directives.grade.filter-panel.clearAll"\n              bb-translate>\n              components.directives.grade.filter-panel.clearAll\n      </button>\n    </div>\n    \x3c!-- TODO Container(style protoType) for search-box, enable in furture\n    <div class="filter-panel-block" id="keyword-block">\n        <div class="filter-panel-block-header">\n          <h4 class="filter-panel-block-title">Keyword Search</h4>\n          <button type="button filter-panel-toggle-button">\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n          </button>\n        </div>\n        <div class="filter-panel-search-box">\n            <bb-typeahead-search-box id="student-search-box"\n                                     input-placeholder="components.directives.grade.search-box.placeholder"\n                                     sr-empty-results="components.directives.grade.search-box.emptyResults"\n                                     sr-results-found="components.directives.grade.search-box.resultsFound"\n                                     sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                                     sr-label="components.directives.grade.search-box.placeholder"\n                                     clear-aria-label="components.directives.grade.search-box.clear"\n                                     icon="search">\n            </bb-typeahead-search-box>\n        </div>\n    </div>\n    --\x3e\n    <div class="filter-panel-block" id="sources-block" ng-repeat="criteriaBlock in gradeGridSearchFilterReborn.criteriaBlocks ">\n        <div class="filter-panel-block-header" id ={{::criteriaBlock.id}}>\n            <h4 class="filter-panel-block-title" course-org-token-resolver bb-translate>components.directives.grade.filter-panel.mergedCourseTitle</h4>\n            <button type="button" class="filter-panel-toggle-button"\n                    ng-class="{\'filter-panel-block-toggle-close\': !criteriaBlock.expanded }"\n                    ng-click="gradeGridSearchFilterReborn.collapseMergedCourse(criteriaBlock)"\n                    aria-label="{{gradeGridSearchFilterReborn.getToggleButtonLabel(criteriaBlock)}}"\n                    analytics-id="components.directives.grade.filterPanel.mergedCourse.collapse.button"\n            >\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n            </button>\n          </div>\n        <div class="filter-panel-groups" ng-show="criteriaBlock.expanded">\n          <div class="filter-panel-group">\n            <div class="filter-panel-item" ng-repeat="criteriaDetail in criteriaBlock.criteriaDetails track by $index" >\n              <div class="is-enabled filter-panel-item-checkbox" ng-show="!criteriaDetail.ui.hidden">\n                <input type="checkbox" id={{::criteriaDetail.id}}\n                  class="bb-Checkbox-checkboxInput foundation-overrides"\n                  ng-model="criteriaDetail.ui.checked"\n                  ng-change="gradeGridSearchFilterReborn.filterMergedCourse(criteriaDetail)"\n                  analytics-id="components.directives.grade.filterPanel.mergedCourse.input.checkbox">\n                  <label class="foundation-overrides" for={{::criteriaDetail.id}}>\n                    <div class="check-box-label">\n                      <span>{{::criteriaDetail.childCourse.name}}</span>\n                      <bb-svg-icon icon="check" size="inline"></bb-svg-icon>\n                    </div>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>'},pGPW:function(e,t,n){},pHHL:function(e,t){e.exports='<div class="grade-color">\n  <div ng-if="!displayGrade.shouldShowRubricButton() && !displayGrade.shouldShowRubricDiv()">\n    <div ng-if="!(isGroupGradeMultiple() && !showNotGraded())"\n         ng-class="{ \'show-total\': displayGrade.gradeDisplayItem.shouldShowTotalPoints(),\n                     \'final-grade\': finalGrade(),\n                     \'na\': displayGrade.gradeDisplayItem.displayValue == null,\n                     \'cursor-pointer\': displayGrade.cursorPointer,\n                     \'defaultCursor\': displayGrade.cursorDefault}"\n         class="wrapping-input-style {{displayGrade.colorClass}}"\n         ready="{{::displayGrade.fullDisplayGrade && !displayGrade.noGradeToDisplay() || undefined}}">\n      <ng-switch on="displayGrade.schema.scaleType">\n        <span ng-switch-default>\n          <span ng-if="displayGrade.fullDisplayGrade != null && !overallGradePeekSref" class="grade-input-display ready" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{displayGrade.fullDisplayGrade}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.fullDisplayGrade.link">\n            {{displayGrade.fullDisplayGrade}}\n          </a>\n          <span ng-if="displayGrade.fullDisplayGrade == null && !overallGradePeekSref" class="grade-input-display" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}" \n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n        </span>\n        <span ng-switch-when="SCORE">\n          \x3c!-- Accommodate for hiding of points possible in small format --\x3e\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue != null && !overallGradePeekSref" class="grade-input-display ready">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue != null && overallGradePeekSref" \n             class="grade-input-display ready" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.fullDisplayGrade.link">\n            {{displayGrade.gradeDisplayItem.displayValue}}\n          </a>\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue == null && !overallGradePeekSref" class="grade-input-display">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue == null && overallGradePeekSref" \n             class="grade-input-display" \n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n          <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n        </span>\n      </ng-switch>\n    </div>\n    <div ng-if="isGroupGradeMultiple() && !showNotGraded()" class="wrapping-input-style is-multiple">\n      <div ng-if="overallGradePeekSref" class="group-multiple" bb-peek-sref="{{overallGradePeekSref}}" bb-translate>components.directives.grade.display-grade.multiple</div>\n      <div ng-if="!overallGradePeekSref" class="group-multiple" bb-translate>components.directives.grade.display-grade.multiple</div>\n    </div>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricButton()">\n    <a ng-if="!displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-view"\n       class="js-rubric-view wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubric.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n    <a ng-if="displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-evaluation({groupId: displayGrade.attempt.groupId})"\n       class="js-rubric-evaluation wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubricEvaluation.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}&nbsp</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricDiv() && displayGrade.shouldShowRubricEvaluation()"\n       class="wrapping-input-style clear"\n       ng-class="displayGrade.colorClass">\n    <span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n      <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n    </span>\n  </div>\n</div>'},pKNj:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));n("towz"),n("zAxy"),n("s4xR"),n("KXuk"),n("gORw"),n("TOu5");var i=n("wHJ2"),s=n("yC9S"),o=n("9zo4"),a=n("vhkR"),r=n("tqR7"),c=n("ZzN+"),l=n("lmMM"),d=n("e7Kn"),u=n("nYZ0"),p=n("dJ97"),m=n("Ocaa"),h=n("r133"),b=n("BMpZ"),g=n("Sa5G"),v=n("ujI6"),f=n("jhBu"),y=n("X/qj"),w=n("o5Lu"),C=n("0JpG"),S=n("pjml"),A=n("JNtI"),k=n("u4ux"),I=n("e6jQ"),O=n("8jzW"),D=n("hkqm"),T=n("TnpK"),$=n("W6wm"),x=n("EGJL"),E="ultra.directives.grade.graderColumn",P=function(){function t(e,t,n,i,o,a,r,c,l,d,u,p,m,h){var b=this;this.scope=e,this.$q=t,this.ContentService=n,this.courseConversionService=i,this.CourseModel=o,this.entitlementService=a,this.grade=r,this.gradebookPermissionService=c,this.bbLocalize=l,this.ultraState=d,this.accessibility=u,this.scoreProviderHelper=p,this.ltiService=m,this.toast=h,this.hasDesignerViewEntitlement=!1,this.hasViewAssessmentEntitlement=!1,this.hasViewAttendanceEntitlement=!1,this.isRestrictedGroupContent=!1,this.numMissingStudents=0,this.showConversionMessage=!1,this.canModify=this.gradebookPermissionService.canModify(e.course().id),this.canPostGrades=this.gradebookPermissionService.canPostGrades(e.course().id),this.canViewAttempts=this.gradebookPermissionService.canViewAttempts(e.course().id),this.canViewGrades=this.gradebookPermissionService.canViewGrades(e.course().id),this.column=e.column,this.course=e.course(),this.isCourseView=e.isCourseView,this.contextArea="grades",this.index=e.$parent.$index+1,this.column.isGroupContent()&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(g.v.ViewGroups,this.course.id)),this.bbLocalize.loadBundle("components/directives/grade/grader-column").then((function(){b.column.externalGrade&&(e.column.columnName=b.bbLocalize.translateSync({locale:b.bbLocalize.getLocale(b.scope),key:"components.directives.grade.grader-column.actions.overall.label"}))})),this.entitlementService.hasAnyCourseEntitlement([g.j.ViewAssessment,g.j.ModifyAssessment],this.course.id).then((function(e){b.hasViewAssessmentEntitlement=e})),this.entitlementService.hasCourseEntitlement(g.j.ViewAttendance,this.course.id).then((function(e){b.hasViewAttendanceEntitlement=e})),this.entitlementService.hasCourseEntitlement(g.f.ViewAsDesigner,this.course.id).then((function(e){b.hasDesignerViewEntitlement=e})),this.column.$resolve().$then((function(e){b.grade.setDeleteConfirmationHandle(b.column),b.overflowMenuId="grader-column-open-button-"+I.a(),b.checkIfAttendanceRecordsExist()}));var v=e.$watch("column.summary.$resolved",(function(){b.column.summary&&b.column.summary.$resolved&&(b.updateNumMissingStudents(),v(),b.isRestrictedGroupContent&&(b.column.summary.restricted=!0,b.column.restricted=!0))}));s.b.OnRootScope(e,"bb-grade-input-save",(function(e,t,n,i){b.column.id===i&&b.column.summary.$fetch()})),s.b.OnRootScope(e,"bb-update-category-icon",(function(e,t){b.column.id===t.id&&(b.scope.categoryMap&&t.gradebookCategoryId&&(b.column.gradebookCategory=b.scope.categoryMap[t.gradebookCategoryId],b.column.categoryTitle=b.column.gradebookCategory&&b.column.gradebookCategory.title),(null===t.dueDate||t.dueDate&&t.dueDate instanceof Date)&&(b.column.dueDate=t.dueDate),b.column.visible=t.visible,b.updateNumMissingStudents())})),this.scope.column.isAttendance()&&s.b.OnRootScope(e,"$stateChangeSuccess",(function(e,t,n,i){i.name.indexOf("attendance")>=0&&b.checkIfAttendanceRecordsExist()})),e.$watch("column",(function(e){b.column=e})),this.registerPostGradesWatchers()}return t.prototype.updateNumMissingStudents=function(){this.numMissingStudents=this.column.getNumMissingIfLate()},t.prototype.openAddItemPanel=function(t){this.whichAddItemPanelOpen=t,e(t).addClass("is-active").find(".element-list-add-menu").slideToggle(300)},t.prototype.closeAddItemPanel=function(t){this.whichAddItemPanelOpen===t&&(this.whichAddItemPanelOpen=null),e(t).removeClass("is-active").find(".element-list-add-menu").slideUp(300)},t.prototype.toggleAddItemPanel=function(e){this.whichAddItemPanelOpen===e?this.closeAddItemPanel(e):this.openAddItemPanel(e)},t.prototype.registerPostGradesWatchers=function(){var e=this;this.scope.$watchGroup([function(){return e.column.summary.hasGradesToPost()},function(){return e.course.isComplete()}],(function(){e.canPostGrades=e.grade.canPostGrades(e.course,e.column)}))},t.prototype.postGrades=function(){var e=this;this.column.postReadyGrades().then((function(t){e.toast.show({messageKey:"components.directives.grade.grader-column.actions.gradesPosted",icon:"icon-check",toastStatus:"success"}),e.column.summary.$fetch().$asPromise().then((function(t){e.scope.$emit(w.c,e.column),e.scope.$root.$broadcast("bb-update-summary")}))}))},t.prototype.deleteColumn=function(){return this.column.forceDelete()},t.prototype.deleteContent=function(){var e=this;this.column.courseId&&this.column.contentId&&this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then((function(t){e.ContentService.deleteContent(t).then((function(){e.deleteContentCallback()}))}))},t.prototype.deleteContentCallback=function(){this.scope.$root.$broadcast("bb-delete-column",this.column)},t.prototype.viewEditColumn=function(){this.accessibility.setFocusOverrideOnPanel("#"+this.overflowMenuId,".grades-list");var e=this.column.scoreProviderHandle;e&&!this.scoreProviderHelper.supportsOverall(e)||(S.r.ContentHandler.PartnerCloud.isEqualTo(e)||S.r.ContentHandler.LtiLink.isEqualTo(e)?this.ltiService.ltiEditColumn(this.column):this.openViewEditState())},t.prototype.openViewEditState=function(){var e=this.column,t=e.contentId,n=e.courseId,i=e.externalGrade,s=e.id,o=e.linkId,a=e.scoreProviderHandle,r=!this.column.isAssignment()&&!this.column.isTest();if(i)this.ultraState.goPeekState("gradebook-item.overall-grade",{columnId:s,gradeitemView:"details"});else if(this.column.isCalculated())this.ultraState.goPeekState("gradebook-item.calculation",{columnId:s,gradeitemView:"details"});else if(a&&this.column.seemsAttemptBased()&&(this.hasViewAssessmentEntitlement||r)){var c={courseId:n,contentId:t,linkRefId:o};this.scoreProviderHelper.editStateRef(a,c,O.a.GoToState)}else if(a&&this.column.isAttendance()){c={courseId:n,contentId:t};this.scoreProviderHelper.editStateRef(a,c,O.a.GoToState)}else this.ultraState.goPeekState("grade-item.edit",{id:this.column.id})},t.prototype._openColumn=function(){var e,t,n,s,o,a=this.column,r=a.contentId,c=a.courseId,l=a.id,d=a.linkId,u=a.scoreProviderHandle;if(this.course.isUltra()){var p=this.hasViewAssessmentEntitlement&&(this.column.isTest()||this.column.isAssignment());if(this.isLTILink())return void this.launchLti();if(this.column.isAttendance()){var m={contentId:r,courseId:c,columnId:l,linkRefId:d};s=(e=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(u,m,O.a.GenerateStateParams))).state,o=e.args}else if(this.column.externalGrade)s="gradebook-item.overall-grade",o={columnId:l};else if(this.column.isCalculated())s="gradebook-item.calculation",o={columnId:l,courseId:c};else if(u&&!this.column.isOffline()&&(this.canViewGrades||this.canViewAttempts)){m={contentId:r,courseId:c,columnId:l,linkRefId:d};s=(t=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(this.column.scoreProviderHandle,m,O.a.GenerateStateParams))).state,o=t.args}else if(u&&(this.column.isDiscussion()||this.column.isScorm()||this.column.isScormSCO()||p)){m={courseId:c,contentId:r,linkRefId:d};s=(n=i.fromJson(this.scoreProviderHelper.editStateRef(this.column.scoreProviderHandle,m,O.a.GenerateStateParams))).state,o=n.args}else this.canViewGrades?(s="gradebook-item.offline",o={columnId:l,courseId:c,gradeitemView:"students"}):(s="grade-item.edit",o={id:l})}else s="course.outline",o={courseId:c,legacyUrl:this.getLegacyUrl()};this.ultraState.goPeekState(s,o)},t.prototype.handleColumnClick=function(){var e=this;this.itemLinkIsClickable&&!this.isRestrictedGroupContent&&(this.isCourseView?this._openColumn():this.course.refreshConvertToUltraStatus().then((function(){e.courseConversionService.isConversionComplete(e.course.ui.convertToUltraTaskStatus)?e._openColumn():e.showConversionTooltip()})))},t.prototype.showConversionTooltip=function(){this.showConversionMessage=!0},t.prototype.closeConversionTooltip=function(){this.showConversionMessage=!1},t.prototype.getAlertType=function(){return g.i.ConversionInProgress},t.prototype.launchLti=function(){this.ltiService.ltiLaunch({courseId:this.column.courseId,contentId:this.column.contentId,linkType:g.g.parse(this.column.scoreProviderHandle.toString()),linkRefId:this.column.linkId})},t.prototype.showAlertIcon=function(){return this.column.getNumMissingIfLate()>0},t.prototype.getLegacyUrl=function(){return"/webapps/gradebook/do/instructor/enterGradeCenter?course_id="+this.column.courseId},t.prototype.isLTILink=function(){return this.ltiService.isLTILink(this.column)},t.prototype.showMarkAttendance=function(){return this.column.isAttendance()&&this.hasViewAttendanceEntitlement},t.prototype.showDelete=function(){return this.column.isAttendance()?this.canModify&&this.showAttendanceDeleteOption:this.canModify},t.prototype.openAttendance=function(){this.ultraState.goPeekState("attendance")},t.prototype.showQuestionAnalysis=function(){return this.column.isQuestionAnalysisAvailable()&&this.canViewGrades},t.prototype.showViewEdit=function(){return!(!this.column.isOffline()&&null!=this.column.scoreProviderHandle&&!this.scoreProviderHelper.supportsEdit(this.column.scoreProviderHandle))&&(!(!this.column.isOffline()&&!this.column.isCalculated())||(this.hasDesignerViewEntitlement||this.canModify))},t.prototype.hasContentId=function(){return!!this.column.contentId},t.prototype.getConfirmationKeyAndShowType=function(){var e,t=this;return this.ultraState.includes("**.outline.**")?e=$.a.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=$.a.Discussions),this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then((function(n){return t.ContentService.generateDeleteConfirmationKey(n,e).then((function(e){return{confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType}}))}))},t.prototype.getOverflowMenuItems=function(){var e=this;return[{icon:this.canModify?"draw":"visible",labelKey:this.canModify?"global.edit":"global.view",show:function(){return e.showViewEdit()},onClick:function(){return e.viewEditColumn()}},{icon:"attendance",labelKey:"components.directives.grade.grader-column.attendance.markAttendance",show:function(){return e.showMarkAttendance()},onClick:function(){return e.openAttendance()}},{icon:"question-analysis",labelKey:"components.directives.grade.grader-column.questionAnalysisOverflowMenuLabel",show:function(){return e.showQuestionAnalysis()},onClick:function(){e.ultraState.goPeekState("question-analysis.report",{qaContentId:e.column.contentId})}},{icon:"trash",labelKey:"global.delete",onClick:function(){e.hasContentId()?e.deleteContent():e.deleteColumn()},show:function(){return e.showDelete()},confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:function(){var t;return e.hasContentId()?e.getConfirmationKeyAndShowType().then((function(n){return t=n.confirmationKey.replace(/^resource\//,""),e.$q.when(A.a(t))})):e.column&&e.column.ui&&e.column.ui.deleteConfirmationHandle?(t=e.column.ui.deleteConfirmationHandle.replace(/^resource\//,""),e.$q.when(A.a(t))):(t="generic-content",e.$q.when(A.a(t)))}}}]},Object.defineProperty(t.prototype,"itemLinkIsClickable",{get:function(){return this.isActionable&&(!this.column.isAttendance()||this.hasViewAttendanceEntitlement)&&(!this.isLTILink()||this.hasDesignerViewEntitlement)&&!this.isRestrictedGroupContent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActionable",{get:function(){return!this.column.isAttendance()||this.scope.attendanceIsAvailable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showOverflowMenu",{get:function(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&(this.showViewEdit()||this.showDelete()||this.showMarkAttendance()||this.showQuestionAnalysis())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDragControls",{get:function(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&this.canModify},enumerable:!0,configurable:!0}),t.prototype.checkIfAttendanceIsAvailable=function(){return!(!this.scope.attendanceIsAvailable||!this.scope.attendanceIsAvailable())},t.prototype.checkIfAttendanceRecordsExist=function(){var e=this;this.showAttendanceDeleteOption=!1,this.column.isAttendance()&&this.checkIfAttendanceIsAvailable()&&this.CourseModel.$new(this.column.courseId).attendanceRecordsExist().then((function(t){e.showAttendanceDeleteOption=!t}))},t.prototype.getNumberEligibleToBeGradedExternalSubmissions=function(){return i.isUndefined(this.column.summary.numGroupsNeedsGrading)?this.column.summary.numStudentsEligibleToBeGradedExternalSubmission:this.column.summary.numGroupsEligibleToBeGradedExternalSubmission},t.prototype.getNumberOfSubmissionsNeedsGrading=function(){return null==this.column.summary.numSubmissionsNeedsGrading?this.column.summary.numSubmissionsNeedsReconciling:this.column.summary.numSubmissionsNeedsGrading},t.prototype.getToolTipTemplate=function(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'},t.$inject=["scope","$q",u.f,c.b,S.o.serviceName,f.b,w.h,y.b,C.serviceName,T.d,o.c,O.c,a.c,D.b],t}(),R=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=x,this.scope={assessment:"<?",column:"=",course:"&",isCourseView:"=",categoryMap:"=?",attendanceColumnExists:"&?",attendanceIsAvailable:"&"},this.link=function(e,n,i){e.graderColumn=t.$injector.instantiate(P,{scope:e})}}return e.$inject=["$injector"],e}();i.module(E,[r.a,u.d,d.a,l.d,c.a,p.a,h.a,m.a,v.c,C.moduleName,O.b,T.b,k.b,a.b,A.b,D.a,b.a]).directive("bbGraderColumn",["$injector",C.serviceName,function(e,t){return t.loadBundle("components/directives/grade/grader-column"),e.instantiate(R)}])}).call(this,n("5iHu"))},ph44:function(e,t,n){},"po/h":function(e,t){e.exports='<div class="base-grades course-grades-instructor" ng-class="{\'grades-list-view\': courseGradesGrader.isGradableItemsListView}">\n  <div ng-if="courseGradesGrader.isDesktop && !courseGradesGrader.isSmallScreen" class="guidance-wrapper"\n    aria-describedby="guidance-moment-grade-settings">\n\n    <div class="row collapse course-grades-header-buttons-wrapper js-course-skip-link-target" tabindex="-1">\n      <bb-square-toggle one-icon-class="toggle-table"\n                        one-aria-label="components.directives.grade.course-grades-grader.views.list-button"\n                        one-view-value="list"\n                        two-icon-class="toggle-grid"\n                        two-aria-label="components.directives.grade.course-grades-grader.views.grid-button"\n                        two-view-value="grid"\n                        property="courseGradesGrader.squareToggleValue"\n                        analytics-id-tag-prefix="components.directives.grade.view.courseGrader">\n      </bb-square-toggle>\n      <div bb-feature-toggle="gradebookSearchFilterM3" remove-from-dom="true">\n        <button ng-show="courseGradesGrader.isGridView && courseGradesGrader.mergedCourses.length" class="filter-panel-button super-clear"\n          ng-class="{\'filter-panel-button-on\': courseGradesGrader.showFilterCriteriaSettings}" ng-click="courseGradesGrader.showFilterCriteriaPanel()"\n          aria-expanded="{{courseGradesGrader.showFilterCriteriaSettings}}" bb-guidance-target component-key="grades.grader.search.filter" analytics-id="components.directives.grade.search.filter.button">\n          <bb-svg-icon size="small" icon="filter-options"></bb-svg-icon>\n          <span bb-translate>components.directives.grade.course-grades-grader.actions.filter</span>\n          <span class="filter-count" ng-show="courseGradesGrader.filteredCount > 0" bb-translate translate-values="{count:courseGradesGrader.filteredCount}">components.directives.grade.course-grades-grader.actions.filterCount</span>\n        </button>\n      </div>\n      <div ng-if="courseGradesGrader.canDownloadGradebook">\n        <a class="open-downLoad-settings button super-clear" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.download\'}"\n          bb-peek-sref="grade-download-setting" ng-if="!courseGradesGrader.course.isComplete()" analytics-id="components.directives.grade.actions.download.link">\n          <bb-svg-icon size="medium" icon="download"></bb-svg-icon>\n        </a>\n      </div>\n\n      <div ng-if="courseGradesGrader.canUploadGradebook">\n        <a class="open-upload-settings button super-clear" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.upload\'}"\n          bb-peek-sref="grade-upload-setting" ng-if="!courseGradesGrader.course.isComplete()" analytics-id="components.directives.grade.actions.upload.link">\n          <bb-svg-icon size="medium" icon="upload"></bb-svg-icon>\n        </a>\n      </div>\n\n      <div ng-if="courseGradesGrader.userHasViewGradebookPermission" course-id="course.model.id">\n        <a class="open-gradebook-settings button super-clear js-open-settings" bb-guidance-target component-key="grades.grader.course.settings"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.openSettings\'}"\n          bb-peek-sref="grade-setting" analytics-id="components.directives.grade.actions.openSettings.link">\n          <bb-svg-icon size="medium" icon="settings"></bb-svg-icon>\n        </a>\n      </div>\n    </div>\n    <div bb-feature-toggle="gradebookSearchFilterM3" remove-from-dom="true">\n      <bb-guidance ng-if="courseGradesGrader.isGridView && courseGradesGrader.mergedCourses.length"\n      component-key="grades.grader.search.filter" class="guidance-element-overlay push-left push-bottom" role="tooltip">\n      <p>\n        <bb-translate>components.directives.grade.course-grades-grader.ftue.filter</bb-translate>\n      </p>\n    </bb-guidance>\n    </div>\n    <bb-guidance id="guidance-moment-grade-settings" component-key="grades.grader.course.settings" class="guidance-element-overlay push-left push-bottom"\n      role="tooltip">\n      <p>\n        <bb-translate>components.directives.grade.course-grades-grader.ftue.setting</bb-translate>\n      </p>\n    </bb-guidance>\n\n  </div>\n  <bb-gradebook-list-view-tabs\n    bb-feature-toggle="studentListView"\n    on-tab-changed="courseGradesGrader.changeListViewType"\n    selected-tab="courseGradesGrader.currentTabId"\n    ng-if="!courseGradesGrader.isGridView"\n  ></bb-gradebook-list-view-tabs>\n\n  <div ng-if="courseGradesGrader.isGridView || courseGradesGrader.isGradableItemsListView">\n    \x3c!-- Empty state template: this section of the page will be displayed when there is no content, and will invite users to create content --\x3e\n    <div class="is-empty-page js-course-skip-link-target" ng-if="courseGradesGrader.columns.$resolved && courseGradesGrader.columns.length === 0">\n      <div class="is-empty-wrapper">\n        <div class="is-empty-explanation">\n          <img src="./static/images/ftue/course-grades-instructor.svg" bb-translate-attrs="{alt: \'components.directives.grade.course-grades-grader.empty.addItems\'}" />\n          <h1 class="is-empty-heading" bb-translate>components.directives.grade.course-grades-grader.empty.header</h1>\n          <p bb-translate>components.directives.grade.course-grades-grader.empty.description</p>\n        </div>\n        <div class="add-element">\n          <ul role="menu" class="element-list-add-menu small-block-grid-1 medium-block-grid-3 large-block-grid-4">\n            <li>\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addCalculation\'}"\n                 bb-peek-sref="gradebook-item.calculation" analytics-id="components.directives.grade.addCalculation.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addCalculation</span>\n                </div>\n              </a>\n            </li>\n            <li>\n              <a role="menuitem" class="js-empty-add-item" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addItem\'}"\n                 bb-peek-sref="grade-item.create" analytics-id="components.directives.addItem.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addItem</span>\n                </div>\n              </a>\n            </li>\n            <li ng-if="courseGradesGrader.attendanceIsAvailable">\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addAttendance\'}"\n                 bb-peek-sref="attendance" analytics-id="components.directives.grade.addAttendance.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addAttendance</span>\n                </div>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Only show the spinner on the initial load, the infinite-scroll directive will show the save tray on additional loads --\x3e\n    <div class="spinner bb-secondary-color-2" ng-if="!courseGradesGrader.columns" aria-hidden="true"></div>\n\n    <div class="grade-list-container" ng-if="courseGradesGrader.columns.length > 0 && courseGradesGrader.allCategoriesLoaded">\n      <div bb-infinite-scroll="courseGradesGrader.renderMoreColumns()" infinite-scroll-container="\'.bb-offcanvas-panel-wrap .panel-wrap\'"\n           infinite-scroll-current-count="courseGradesGrader.columns.length" infinite-scroll-focusable-children-selector=".grader-column .name a, .floating-headers .item-headers .grade-grid-header-content-wrapper"\n           infinite-scroll-load-limit="courseGradesGrader.GRADE_COLUMN_LOAD_LIMIT" infinite-scroll-localization-keys-prefix="components.directives.grade.course-grades-grader.infiniteScroll"\n           infinite-scroll-total-count="courseGradesGrader.totalColumnCount" infinite-scroll-tray-id="course-grades-grader">\n        <bb-course-grades-grader-list\n          ng-if="courseGradesGrader.isGradableItemsListView"\n          course="courseGrades.course"\n          is-first="true"\n          columns="courseGradesGrader.columns"\n          show-setup-overall-column="courseGradesGrader.showSetupOverallColumn"\n          attendance-is-available="courseGradesGrader.attendanceIsAvailable">\n        </bb-course-grades-grader-list>\n      </div>\n      <div ng-if="courseGradesGrader.isGridView">\n        <bb-grade-grid-reborn course="courseGrades.course"\n                              columns="courseGradesGrader.allColumns"\n                              attendance-is-available="courseGradesGrader.attendanceIsAvailable"\n                              merged-courses="courseGradesGrader.mergedCourses">\n        </bb-grade-grid-reborn>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- Student List View handles its own loading indicator and empty state --\x3e\n  <div ng-if="courseGradesGrader.isStudentListView">\n    <bb-student-list-view course-id="courseGrades.course.id"\n                          bb-feature-toggle="studentListView"\n                          remove-from-dom="true">\n    </bb-student-list-view>\n  </div>\n</div>\n'},px9Z:function(e,t,n){},q0yA:function(e,t){e.exports='<div bb-foundation-defer bb-load-bundle="components/directives/content-visibility" dev-suppress-hide="true">\n  <div class="panel-block restricted-form content-visibility-rules-container">\n    <div class="row collapse">\n      <div class="columns small-12 js-from-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.startDateSelect"\n               class="from-check"\n               id="from-check-{{contentVisibilityRulesOptions.id}}"\n               name="fromCheck"\n               ng-click="contentVisibilityRulesOptions.handleCheckClick($event)"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.startDateSelect.input.checkbox"/>\n        <label class="date-time-label" for="from-check-{{contentVisibilityRulesOptions.id}}" ng-show="!isReadOnlyMode()"\n          bb-translate>components.directives.content-visibility.startDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.startDateSelect || isAllowedEmpty)"\n          bb-translate>\n          components.directives.content-visibility.startDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.startDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateFromContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()}">\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <input id="date-from"\n              bb-date-picker\n              orientation="auto left"\n              container=".{{contentVisibilityRulesOptions.dateFromContainer}}"\n              ng-model="startDate" name="dateFrom" aria-describedby="date-from-error"\n              first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n              bb-validate-date\n              ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'start-date\')"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(true)"\n              ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-disabled="!contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startDateAria\',\n                   \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n              analytics-id="content.visibility.rules.options.startDate.input.text"/>\n              \x3c!-- htmlhint:analytics-id:enable --\x3e\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()}">\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <input type="text" id="time-from" bb-time-picker ng-model="startTime" name="timeFrom"\n              aria-describedby="time-from-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(true)"\n              ng-disabled="!contentVisibilityRulesOptions.startDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startTimeAria\',\n                   \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n              analytics-id="content.visibility.rules.options.startDate.input.text"\n            />\n            \x3c!-- htmlhint:analytics-id:enable --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateFrom" class="row collapse" id="date-from-error">\n            <span ng-message="required">\n                <bb-translate>components.directives.content-visibility.startDateError</bb-translate>\n              </span>\n          <span ng-message="date" bb-translate>\n            {{::contentVisibilityRulesOptions.setErrorString(true, true)}}\n          </span>\n          <span ng-message="startAndOrEndDate">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startAndOrEndDateOnsubmit">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startBeforeDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateBeforeError</bb-translate>\n          </span>\n          <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeFrom" class="row collapse" id="time-from-error">\n          <span ng-message="required">\n              <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n          </span>\n        <span ng-message="time">\n            {{::contentVisibilityRulesOptions.setErrorString(false, true)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12 js-until-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.untilDateSelect"\n               class="until-check"\n               id="until-check-{{contentVisibilityRulesOptions.id}}"\n               name="untilCheck"\n               ng-click="contentVisibilityRulesOptions.handleCheckClick($event)"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.untilDate.input.checkbox"/>\n        <label class="date-time-label" for="until-check-{{contentVisibilityRulesOptions.id}}"\n          ng-show="!isReadOnlyMode()" bb-translate>components.directives.content-visibility.endDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.untilDateSelect || isAllowedEmpty)" bb-translate>\n          components.directives.content-visibility.endDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.untilDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateUntilContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()}">\n            \x3c!-- htmlhint:analytics-id:disable --\x3e\n            <input id="date-until"\n              bb-date-picker\n              orientation="auto left"\n              container=".{{contentVisibilityRulesOptions.dateUntilContainer}}"\n              ng-model="endDate"\n              first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n              bb-validate-date\n              name="dateUntil"\n              aria-describedby="date-until-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'end-date\')"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(false)"\n              ng-disabled="!contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endDateAria\',\n                   \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n              analytics-id="content.visiblity.rules.options.endDate.input.input.text"/>\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': !contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()}">\n            <input type="text" id="time-until" bb-time-picker ng-model="endTime" name="timeUntil"\n              aria-describedby="time-until-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n              ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n              ng-required="contentVisibilityRulesOptions.isDateRequired(false)"\n              ng-disabled="!contentVisibilityRulesOptions.untilDateSelect || isReadOnlyMode()"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endTimeAria\',\n                   \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n              analytics-id="content.visibility.rules.options.endDate.input.text"/>\n              \x3c!-- htmlhint:analytics-id:enable --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateUntil" class="row collapse" id="date-until-error">\n          <span ng-message="required">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="date">\n            {{::contentVisibilityRulesOptions.setErrorString(true, false)}}\n          </span>\n          <span ng-message="requiredOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStart">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStartOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateAfterError</bb-translate>\n          </span>\n          <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeUntil" class="row collapse" id="time-until-error">\n        <span ng-message="time">\n           {{::contentVisibilityRulesOptions.setErrorString(false, false)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.endTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n  </div>\n</div>\n'},qH3X:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i="rb_grade_grid_",s={REFRESH_OVERALL_EDITOR:i+"refresh_overall_editor",REFRESH_CELL_EDITOR:i+"refresh_cell_editor",SELECT_GROUP:i+"select_group",REFRESH:i+"refresh",FOCUSIN_CELL:i+"focusin",FOCUSOUT_CELL:i+"focusout",ENTER_EDITOR:i+"enter_editor",CLOSE_EDITOR:i+"close_editor",SHOW_FILTER_CRITERIA:i+"show-filter-criteria",UPDATED_FILTER_CONDITION:i+"update-filter-condition",HIDDEN_MERGED_COURSE:i+"hidden-merged-course",CLOSE_FILTER_PANEL:i+"close-filter-criteria",GRADEBOOK_CLEAR_SELECTED:i+"gradebook-clear-selected",GRADEBOOK_USER_SELECTED:i+"gradebook-user-selected",GRADEBOOK_COLUMN_SELECTED:i+"gradebook-column-selected",GRADEBOOK_CATEGORY_SELECTED:i+"gradebook-category-selected"}},qgBt:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("wHJ2"),s="ultra.directives.bbOneDrive",o=function(){this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?"},this.restrict="A",this.link=function(e,t){e.isInitialized=!1,t.is("a")&&t.attr("tabindex",-1),t.attr("disabled","disabled")}};i.module(s,[]).directive("bbOneDrive",["$injector",function(e){return e.instantiate(o)}])},qzMN:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-content-collection",use:"icon-small-content-collection-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-collection"><path d="M14 15H2V9h3v1h6V9h3v6zM13 9V4H3v5M4 4V1h8v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"r+pC":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-back-arrow",use:"icon-medium-back-arrow-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-back-arrow"><path d="M11 23L1 12 11 1M1 12h22" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"r/An":function(e,t){e.exports='<div bb-load-bundle="components/directives/content-item-base" ng-class="::contentItemBase.getRootClassName()" bb-cache-compilation="content-item-base">\n  <div class="content-item-base-container guidance-overflow-fix js-content-item-base" bb-click-to-invoke-child=".content-title">\n    <div ng-switch on="content.ui.importPlaceholder">\n      <div ng-switch-when="true" class="placeholder-container" bb-focus>\n        <div class="placeholder-text" bb-translate>components.directives.content-item-base.copy-placeholder</div>\n        <div class="sr-only" bb-translate>components.directives.content-item-base.please-wait</div>\n      </div>\n      <div ng-switch-default class="row drag-element-row" ng-class="{\n        \'is-restricted\': content.canViewAsInstructor() && content.isHiddenFromStudents(),\n        \'hidden-from-student-cr\': content.canViewAsInstructor() && content.isConditionalReleaseWithHiddenFromStudent(),\n        \'isNotClickable\': content.isConditionalReleaseLocked() || content.isRestricted() && !content.canViewAsInstructor()}">\n        <div class="content-item-row">\n          <div class="content-item-details" ng-class="{\'is-uploading\':content.ui.isUploading}">\n            <div class="element-card outline-item">\n              <ng-switch on="content.ui.isUploading">\n                <div ng-switch-when="true" class="upload-file">\n                  <bb-progress displayResults="false" id="{{content.ui.fileUploadId}}" class="bb-progress"></bb-progress>\n                </div>\n\n                <div class="outline-item-inner" ng-switch-default>\n                  <div class="element-image" ng-if="contentItemBase.isGradeLoaded" bb-content-item-icon="content" show-alert-icon="contentItemBase.shouldShowAlertIcon()">\n                  </div>\n                  <div class="element-details">\n                    <div ng-if="shouldShowContent">\n                      <bb-content-item-course-outline ng-if="!contentItemBase.isEngagementOutline()"></bb-content-item-course-outline>\n                      <bb-content-item-engagement-outline ng-if="contentItemBase.isEngagementOutline()"></bb-content-item-engagement-outline>\n                    </div>\n                    <div ng-if="!contentItemBase.shouldShowContent">\n                      {{contentItemBase.overrideMessage}}\n                    </div>\n                  </div>\n                </div>\n              </ng-switch>\n            </div>\n          </div>\n          <div ng-if="content.id" class="item-controls">\n            \x3c!-- Show this if the user has edit permissions on the content and it is movable //--\x3e\n            <button bb-drag-handle\n                    drag-item-id="{{content.id}}"\n                    drag-item-name="{{content.title}}"\n                    drag-item-type="{{contentItemBase.contentHandler}}"\n                    drag-item-context="{{contextArea}}"\n                    class="super-clear small button icon js-drag-handle"\n                    ng-if="canMove && content.canEdit() && !content.isInForcedSequenceModule()"\n                    translate-attrs-values="{contentTitle: content.title}"\n                    bb-translate-attrs="{\'title\': \'components.directives.content-item-base.move\', \'aria-label\': \'components.directives.content-item-base.aria-label.move\'}"\n                    analytics-id="content.item.base.move.button"\n                    >\n\n              <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n            </button>\n            <bb-ally-content-ref\n                ng-if="contentItemBase.canShowAlly"\n                content-id="{{content.id}}"\n                file-id="{{::contentItemBase.allyService.getXythosIdFromContentItem(content)}}"\n                file-preview-url="{{::content.getContentDisplay().contentUrl()}}"\n            ></bb-ally-content-ref>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly"\n              content-id="{{content.id}}"\n              show-view-score-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            <bb-ally-show\n              ng-if="contentItemBase.canShowAlly"\n              content-id="{{content.id}}"\n              show-alternative-formats-link="true"\n              show-icon="true"\n              class="ally-icon"\n            ></bb-ally-show>\n            \x3c!-- Show this if the user has edit or delete permissions //--\x3e\n            <div class="right" bb-foundation-defer>\n              <bb-overflow-menu ng-show="contentItemBase.showOverflowMenu()"\n                                element-id="{{content.id}}"\n                                element-name="{{content.title}}"\n                                menu-items="contentItemBase.getOverflowMenu()"\n                                on-menu-toggle="contentItemBase.updateAlly()"\n                                analytics-id-tag-prefix="components.directives.content-item-base.overflowMenu">\n              </bb-overflow-menu>\n            </div>\n          </div>\n        </div>\n        <div ng-if="contentItemBase.getDescription()" class="content-item-description">\n          <p class="js-description" ng-bind="contentItemBase.getDescription()"></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},r133:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("wHJ2"),s=n("Fvsw"),o=n("0JpG"),a=n("0+Qs"),r=n("BXQP"),c="ultra.directives.bbDuration",l="refresh.relative.dates",d=function(){function e(t,n,i,s){var o=this;this.scope=t,this.bbContext=n,this.bbLocalize=i,this.interval=s,this.date="",this.time="",this.lessThanOneDay=!1;var a=t.$watch("date",(function(){o._localizeRelativeDate(),t.autoUpdate&&!t.autoUpdate()&&t.date&&a()}));t.$on(l,(function(){o._localizeRelativeDate()})),this.interval((function(){o._localizeRelativeDate()}),this.scope,e.DEFAULT_REFRESH_INTERVAL)}return e.prototype.needAgo=function(){return!!(this.scope.hasAgo&&this.scope.hasAgo()&&this.lessThanOneDay)},e.prototype.separateDatetime=function(){return!(!this.scope.separateDatetime||!this.scope.separateDatetime())},e.prototype._localizeRelativeDate=function(){var e=this;if(this.scope.date){var t={},n=new Date,i=this.scope.isRelativeToServerDate&&this.scope.isRelativeToServerDate();(null==i||i)&&(t={relativeTo:this.bbContext.getServerTime()},n=this.bbContext.getServerTime());var s=n.getTime()-this.scope.date.getTime();if(s>=6e4&&this.scope.date.setSeconds(30),this.lessThanOneDay=s<=864e5,this.needAgo()||this.separateDatetime()){var a=this.bbLocalize.getFormatEnum(o.ILocaleDateFormat,this.scope.dateFormat)||o.ILocaleDateFormat.Short;this.bbLocalize.formatDuration(this.scope.date,this.scope,t,a).then((function(t){e.date=t.date||"",e.time=t.time||""}))}}},e.DEFAULT_REFRESH_INTERVAL=18e4,e.$inject=["scope",s.b,o.serviceName,a.b],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.replace=!0,this.template=r,this.scope={date:"=",autoUpdate:"&?",isRelativeToServerDate:"&?",dateFormat:"@?",hasAgo:"&?",separateDatetime:"&?"},this.link=function(e){e.duration=t.$injector.instantiate(d,{scope:e})}}return e.$inject=["$injector"],e}();i.module(c,[s.a,o.moduleName,a.a]).directive("bbDuration",["$injector",function(e){return e.instantiate(u)}])},r5z9:function(e,t,n){},r6lH:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h}));var i=n("D57K"),s=n("nsO7"),o=n("wHJ2"),a=n("jhBu"),r=n("Sa5G"),c=n("0JpG"),l=n("pjml"),d=n("wgY5"),u=n("nmzr"),p=n("+O05"),m="ultra.service.telemetry",h="telemetry",b=function(){function e(e,t,n,i,s,o,a,r,c,l,d,u,p,m,h,b,g){this.cacheFactory=e,this.$q=t,this.entitlement=n,this.bbLocalize=i,this.ActivityVsGradeModel=s,this.ContentActivityInDetailModel=o,this.CourseActivityModel=a,this.CourseGradesModel=r,this.CourseNotificationsModel=c,this.MultimediaActivityInDetailModel=l,this.MultimediaStatisticsModel=d,this.NotificationUsers=u,this.StudentActivityModel=p,this.StudentGradesModel=m,this.SufficientDataModel=h,this.TelemetryDiscussionActivityModel=b,this.TelemetryDiscussionXrayModel=g,this.SUFFICIENT_DATA_KEY="SufficientData",this.sufficientDataCache=e.createCache("sufficientTelemetryData"),this.notificationsCache=e.createCache("notifications")}return e.prototype.loadActivityVsGradeData=function(e){return this.ActivityVsGradeModel.$find(e).$allow([404]).$asPromise()},e.prototype.loadStudentGradeData=function(e,t){return this.StudentGradesModel.$find(e,t?{userId:t}:{}).$allow([404,400]).$asPromise()},e.prototype.loadCourseGradeData=function(e){return this.CourseGradesModel.$find(e).$allow([404,400]).$asPromise()},e.prototype.loadStudentActivityData=function(e,t){return this.StudentActivityModel.$find(e,t?{userId:t}:{}).$allow([400]).$asPromise()},e.prototype.loadContentActivityInDetailData=function(e,t){return this.ContentActivityInDetailModel.$collection().getContentActivityInDetail(e,t).$asPromise()},e.prototype.loadMultimediaActivityInDetailData=function(e,t){return this.MultimediaActivityInDetailModel.$collection().getMultimediaActivityInDetail(e,t).$asPromise()},e.prototype.loadMultimediaStatisticsData=function(e,t){return this.MultimediaStatisticsModel.getMultimediaStatistics(e,t).$asPromise()},e.prototype.loadCourseActivityData=function(e){return this.CourseActivityModel.$find(e).$allow([400]).$asPromise()},e.prototype.loadNotificationUsers=function(e,t,n){var i={};return t&&(i.limit=t),n&&(i.offset=n),this.NotificationUsers.$find(e,i).$asPromise().then((function(e){return s.keyBy(e.users,"userId")}))},e.prototype.loadNotifications=function(e,t,n,i){return this.getNotificationsPromise(e,t,n,i).promise},e.prototype.loadDiscussionActivityData=function(e,t,n){return n?this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t,n).$asPromise():this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t).$asPromise()},e.prototype.loadDiscussionXrayReport=function(e,t,n){return this.TelemetryDiscussionXrayModel.getDiscussionXrayReport(e,t,n).$asPromise()},e.prototype.hasSufficientActivityData=function(e){return this.getSufficientDataPromise().promise.then((function(t){return!(!t||!t.coursesWithActivity)&&s.includes(t.coursesWithActivity,e)}))},e.prototype.hasSufficientGradeData=function(e){return this.getSufficientDataPromise().promise.then((function(t){return!(!t||!t.coursesWithGrades)&&s.includes(t.coursesWithGrades,e)}))},e.prototype.canViewAllUserData=function(e){return this.entitlement.hasCourseEntitlement(r.u.ViewGrades,e)},e.prototype.formatMessageRecipients=function(e){return(e||[]).map((function(e){return e.id})).join(",")},e.prototype.determineContentSupportsActivityData=function(e){var t=this.$q.defer();return p.a.isExternalSubmissionsAssessment(e)?t.resolve(!1):this.contentSupportsActivityData(e)?this.canViewAllUserData(e.courseId).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)})):t.resolve(!1),t.promise},e.prototype.contentSupportsActivityData=function(e){return(r.g.TestLink.isEqualTo(e.contentHandler)||r.g.UltraAssignment.isEqualTo(e.contentHandler))&&e.hasGradingColumn()},e.prototype.determinePanelSref=function(e,t){var n=this,i=this.$q.defer(),s={hasGrades:this.hasSufficientGradeData(e),hasActivity:this.hasSufficientActivityData(e),canViewAllUserData:this.canViewAllUserData(e)};return this.$q.all(s).then((function(s){s.hasGrades&&s.hasActivity?s.canViewAllUserData?i.resolve(n.createPanelSref(u.TelemetryViewType.INSTRUCTOR_CLASS,e,t)):i.resolve(n.createPanelSref(u.TelemetryViewType.STUDENT_PROGRESS,e,t)):i.reject()})).catch((function(e){i.reject(e)})),i.promise},e.prototype.createPanelSref=function(e,t,n){var i='({ courseId: "'+t+'"';return n&&(i+=', notificationId: "'+n+'"'),e.toString()+(i+=" })")},e.prototype.exportFilename=function(e,t,n,i,s){var o="";e&&(o=e.courseId+"_");var a=this.bbLocalize.formatDateSync(new Date,c.ILocaleDateFormat.ISO).replace(/[^0-9]/g,""),r="";t&&n&&t.id!==n.id&&(r=t.userName+"_");var l=i?"_"+i:"",d="";return s&&(d=s.replace(/\s+/g,"_")+"_"),o+r+d+a+l},e.prototype.getSufficientDataPromise=function(){var e=this.sufficientDataCache.get(this.SUFFICIENT_DATA_KEY);return e||(e={promise:this.SufficientDataModel.$new().$fetch().$allow([404,400]).$asPromise()},this.sufficientDataCache.put(this.SUFFICIENT_DATA_KEY,e)),e},e.prototype.getNotificationsPromise=function(e,t,n,i){var s=e+t+n+i,o=this.notificationsCache.get(s);if(!o){var a={};t&&(a.userId=t),n&&(a.includeDismissed=n),i&&(a.notificationType=i),(o={promise:this.CourseNotificationsModel.$find(e,a).$asPromise()}).promise.then((function(e){return e.currentStudent.forEach((function(e){e.ui={createdDay:d.utc(e.created).startOf("day").toDate()}})),e})),this.notificationsCache.put(s,o)}return o},e.$inject=["DSCacheFactory","$q",a.b,c.serviceName,l.yb.serviceName,l.zb.serviceName,l.Ab.serviceName,l.Bb.serviceName,l.Cb.serviceName,l.Fb.serviceName,l.Gb.serviceName,l.Ib.serviceName,l.Jb.serviceName,l.Kb.serviceName,l.Lb.serviceName,l.Db.serviceName,l.Eb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(b);o.module(m,[l.Q,a.a]).service(h,b)},r8DE:function(e,t){e.exports='<div class="question-container">\n  <bb-rich-text-editor\n    ng-model="question.questionText.rawText"\n    is-read-only="true"\n    plugin-options="editorPluginOptions">\n  </bb-rich-text-editor>\n</div>\n'},rElr:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-chat",use:"icon-small-chat-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-chat"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},rNTV:function(e,t){e.exports='<div>\n  <bb-assessment-attempt\n    attempt="assessmentAttempt.attempt"\n    content-data="assessmentAttempt.contentData"\n    course="assessmentAttempt.course"\n    redirect="assessmentAttempt.returnToOverview()"\n  ></bb-assessment-attempt>\n\n  <div ui-view="assessment-attempt-peek"></div>\n</div>\n'},rtZE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var i=n("D57K"),s=n("nsO7"),o=n("wHJ2"),a="ultra.service.RecursionHelper",r="recursionHelper",c=function(){function e(e){this.$compile=e,this.compileContents=s.memoize(this.compileContents)}return e.prototype.compileContents=function(e,t){return this.$compile(t)},e.prototype.compile=function(e,t,n){var s=this;o.isFunction(n)&&(n={post:n});var a=t.contents();return t.empty(),{pre:n&&n.pre?n.pre:null,post:function(t,o){for(var r=[],c=2;c<arguments.length;c++)r[c-2]=arguments[c];var l=s.compileContents(e,a);l(t,(function(e){o.append(e)})),n&&n.post&&n.post.apply(null,Object(i.__spreadArrays)([t,o],r))}}},e.$inject=["$compile"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.__extends)(t,e)}(c);o.module(a,[]).service(r,c)},"s+Z7":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("st/R"),n("sg6B");var i=n("5iHu"),s=n("wHJ2"),o=n("+wu9"),a="ultra.components.directives.typeahead-selected-options",r=function(){function e(e){this.scope=e}return e.prototype.removeOption=function(e){this.scope.removeOption({item:e}),this.scope.focusElementId&&i("#typeahead-search-box-"+this.scope.focusElementId).focus()},e.$inject=["scope"],e}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.replace=!0,this.template=o,this.scope={selectedOptions:"=",removeOption:"&",selectedOptionsListLabel:"@",focusElementId:"@?"},this.link=function(e){e.typeaheadSelectedOptions=t.$injector.instantiate(r,{scope:e})}}return e.$inject=["$injector"],e}();s.module(a,[]).directive("bbTypeaheadSelectedOptions",["$injector",function(e){return e.instantiate(c)}])},s0ts:function(e,t){e.exports='<div bb-foundation-defer bb-load-bundle="components/directives/content-visibility" class="item-selector-container content-visibility-selector" bb-cache-compilation="content-visibility-selector">\n  \x3c!-- To allow instructors to see visibility status in a completed course --\x3e\n  <div ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isVisibleToStudents()" class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible" class="visibility-icon"></bb-svg-icon>\n    <span class="js-visibility js-visible-option vert-centered-label-text" bb-translate course-org-token-resolver>\n      components.directives.content-visibility.visible\n    </span>\n  </div>\n  \x3c!-- To allow instructors to see visibility status in a completed course --\x3e\n  <div ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isHiddenFromStudents()" class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible" class="visibility-icon"></bb-svg-icon>\n    <span bb-translate course-org-token-resolver>components.directives.content-visibility.hidden</span>\n  </div>\n  \x3c!-- To allow instructors to see visibility status in a completed course --\x3e\n  <div ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isConditionalRelease()" class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock" class="visibility-icon"></bb-svg-icon>\n    <span class="js-visibility js-restricted-option js-conditional-release-option" bb-translate>components.directives.content-visibility.conditional-availability</span>\n  </div>\n  <button name="visibility-content" ng-model="content.visible" ng-show="contentVisibilitySelector.isEditable()"\n          ng-disabled="content.isInForcedSequenceModule()"\n          bb-prevent-click-if="!contentVisibilitySelector.isVisibilitySelectorEnabled()" type="button"\n          class="button dropdown" aria-controls="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}"\n          data-dropdown="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}" aria-expanded="false"\n          analytics-id="course.content.visibility.button">\n    <div class="visibility-label" ng-if="content.isVisibleToStudents()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible" class="visibility-icon"></bb-svg-icon>\n      <span class="js-visibility js-visible-option vert-centered-label-text" bb-translate course-org-token-resolver>\n        components.directives.content-visibility.visible\n      </span>\n    </div>\n    <div class="visibility-label" ng-if="content.isHiddenFromStudents()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible" class="visibility-icon"></bb-svg-icon>\n      <span class="js-visibility js-hidden-option vert-centered-label-text" bb-translate course-org-token-resolver>\n        components.directives.content-visibility.hidden\n      </span>\n    </div>\n    <div class="visibility-label" ng-if="content.isConditionalRelease()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock" class="visibility-icon"></bb-svg-icon>\n      <span class="js-visibility js-restricted-option vert-centered-label-text" bb-translate>components.directives.content-visibility.conditional-availability</span>\n    </div>\n    \x3c!-- LRN-114090 The native mobile select works by covering the button to intercept the click.\n          It needs to be nested inside the button properly fill the entirety of the button. --\x3e\n    <select ng-if="::contentVisibilitySelector.useNativeSelect()" class="button"\n            ng-model="contentVisibilitySelector.selectedVisibilityOption"\n            ng-options="option.text for option in contentVisibilitySelector.visibilityOptions | filter: {show: true}"\n            ng-change="contentVisibilitySelector.selectedVisibilityOption.onSelect()"\n            analytics-id="course.content.visibility.select">\n    </select>\n  </button>\n\n  <ul ng-if="::!contentVisibilitySelector.useNativeSelect()" ng-show="contentVisibilitySelector.isEditable()"\n      id="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}" class="f-dropdown item-visibility-selector selection-full-width"\n      data-dropdown-content aria-hidden="true">\n    <li ng-class="{\'item-selected\': content.isVisibleToStudents()}" ng-if="contentVisibilitySelector.showVisibleHiddenMenuOptions()">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectVisible()" class="visible-option visibility-label"\n         analytics-id="components.directives.content-visibility.visible.link">\n        <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible"></bb-svg-icon>\n        <span bb-translate course-org-token-resolver>components.directives.content-visibility.visible</span>\n      </a>\n    </li>\n    <li ng-class="{\'item-selected\': content.isHiddenFromStudents()}" ng-if="contentVisibilitySelector.showVisibleHiddenMenuOptions()">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectHidden()" class="hidden-option visibility-label"\n         analytics-id="components.directives.content-visibility.hidden.link">\n          <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible"></bb-svg-icon>\n          <span bb-translate course-org-token-resolver>components.directives.content-visibility.hidden</span>\n      </a>\n    </li>\n    <li ng-if="contentVisibilitySelector.showConditionalReleaseMenuOption()" ng-class="{\'item-selected\': content.isConditionalRelease()}">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectConditionalRelease()" class="restricted-option visibility-label conditional-release-restricted-option"\n         analytics-id="components.directives.content-visibility.conditional-availability.link">\n          <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock"></bb-svg-icon>\n          <span bb-translate>components.directives.content-visibility.conditional-availability</span>\n      </a>\n    </li>\n  </ul>\n</div>\n'},s1u2:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content content-header-bg" tabindex="0" role="columnheader"\n       ng-class="{\'is-restricted\': columnMetadata.isHiddenFromStudents(), \'is-unavailable\': !gradeGridColumnHeaderReborn.toolAvailable || !col.hasContextMenuOptions()}"\n       ng-click="gradeGridColumnHeaderReborn.popupMenu($event)"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderReborn.popupMenu">\n    <div bb-content-item-icon content-column="columnMetadata" show-alert-icon="showAlertIcon()" class="element-image" role="presentation"></div>\n    <div class="ellipse grade-name" title="{{columnMetadata.columnName}}" aria-labelledby="summary-info-{{columnMetadata.id}}">{{columnMetadata.columnName}}</div>\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="0" id="summary-points-{{columnMetadata.id}}">\n    <span class="sr-only">{{columnMetadata.columnName}}</span>\n    <span class="ellipse points" title="{{gradeGridColumnHeaderReborn.getSchemaText()}}">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && !columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-count"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.gradedTip\'}" translate-attrs-values="{count: isGroupTest ? columnMetadata.summary.numStudentsGradedNeedsPosting + columnMetadata.summary.numStudentsPosted + columnMetadata.summary.numberOfStudentsOverriddenGradesToPost : columnMetadata.summary.numStudentsGraded()}"\n            bb-translate translate-values="{count: isGroupTest ? columnMetadata.summary.numStudentsGradedNeedsPosting + columnMetadata.summary.numStudentsPosted + columnMetadata.summary.numberOfStudentsOverriddenGradesToPost : columnMetadata.summary.numStudentsGraded()}">components.directives.grade.grid.graded</span>\n      <span class="grade-pipe"></span>\n      <span class="ellipse grade-posted-count"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.postedTip\'}" translate-attrs-values="{count: isGroupTest ? columnMetadata.summary.numStudentsPosted : columnMetadata.summary.numPosted}"\n            bb-translate translate-values="{count: isGroupTest ? columnMetadata.summary.numStudentsPosted : columnMetadata.summary.numPosted}">components.directives.grade.grid.posted</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    ng-class="{\'grade-complete-status\': !gradeGridColumnHeaderReborn.isRestricted()}"\n    tabindex="0"\n    bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()" class="grade-grid-header-summary"\n    tabindex="0"\n    bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    bb-translate-attrs="{\'title\': \'components.directives.grade.grid.completeLabel\'}"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="(!col.isShowSummary() || !columnMetadata.isVisibleToStudents()) && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-status"></span>\n    </div>\n  </div>\n\n  <div ng-if="columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()">\n      <span class="sr-only">{{columnMetadata.columnName}}</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse items-count" ng-if="columnMetadata.itemsCount !== undefined"\n        bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}"\n        translate-attrs-values="{count: columnMetadata.itemsCount}" bb-translate\n        translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n    </div>\n  </div>\n</div>\n'},s4xR:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-attendance",use:"icon-small-attendance-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attendance"><path d="M15 15V2H1v13h14zM4.5 1v1h7V1h-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 9l2 2 4-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},s52B:function(e,t){e.exports='<div class="rb-grid-container" ng-style="container.getContainerStyle()" role="grid">\n  <div class="rb-ax-focus-placeholder sr-only" tabindex="-1"></div>\n  <div class="rb-grid-header-wrapper">\n    <div class="rb-grid-header">\n      <div class="rb-grid-canvas" ng-style="container.getHeaderCanvasStyle()" role="rowgroup">\n        <div class="rb-row rb-header-row" ng-class="::container && {\'rb-row-border\': container.headerBorder} || undefined" role="row">\n          <div rb-grid-cell="col.headerTemplate" \n               class="rb-cell rb-header-cell" \n               ng-class="[\'rb-col-\' + col.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]" \n               role="columnheader"\n               ng-repeat="col in container.renderedColumns track by $index" \n               ng-click="container.callbacks.header($event)"\n               analytics-id="components.directives.gridContainer.header.{{::col.id}}.button">\n            <div class="rb-add-column-placeholder" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event, col)"></div>\n          </div>\n          <div class="rb-add-column-placeholder first" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event)"></div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="container.hasVScrollbar" class="rb-grid-scrollbar-placeholder-y"></div>\n  </div>\n  <div class="rb-grid-body" ng-style="container.getBodyStyle()">\n    <div class="rb-grid-canvas" ng-style="container.getBodyCanvasStyle()" role="rowgroup">\n      <div class="rb-row rb-cell-row" ng-repeat="row in container.renderedRows track by $index" role="row"\n          ng-class="[\'rb-row-position-\' + row.id, container && {\'rb-row-border\': container.rowBorder} || undefined]">\n        <div rb-grid-cell="col.cellTemplate"\n             class="rb-cell"\n             ng-class="[\'rb-col-\' + col.id, \'rb-row-\' + row.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]"\n             role="gridcell"\n             ng-repeat="col in container.renderedColumns track by $index"\n             ng-click="container.callbacks.cell($event)"\n             analytics-id="components.directives.gridContainer.callback"\n        ></div>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!container.hasHScrollbar" class="rb-grid-scrollbar-placeholder-x"></div>\n  <div class="rb-add-column" ng-if="::container && container.canAddColumn()">\n    <div class="column-header-button-wrapper" ng-mouseleave="container.columnAdder.leave()">\n      <a class="small button clear icon button-add-content hide" \n         href="javascript:void(0);" \n         ng-click="container.columnAdder.onClick($event)" \n         role="button" \n         aria-haspopup="true"\n         analytics-id="components.directives.grade.grid.addBtuAriaLabel.link">\n        <span class="sr-only" bb-translate>components.directives.grade.grid.addBtuAriaLabel</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},s5UK:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-arrow-left",use:"icon-small-arrow-left-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-left"><path d="M11 1L4 8l7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},sB2Z:function(e,t){e.exports='<div class="content-wrapper name" ng-class="{\'nocontent\': !content.canViewAsInstructor()}">\n  <ng-switch on="content.getContentDisplay().viewHandler()" ng-class="{\'has-indicator\': content.ui.hasIndicator}">\n    <div ng-switch-when="resource/x-bb-folder" class="engagement-folder">\n      <bb-content-item-folder></bb-content-item-folder>\n    </div>\n    <a ng-switch-when="resource/x-bb-forumlink"\n       bb-peek-sref="discussion.view.with-grading({contentId:content.id})"\n       bb-prevent-click-if="content.isConditionalReleaseLocked()"\n       ng-attr-tabindex="{{ content.isConditionalReleaseLocked() ? -1 : 0 }}"\n       class="content-title"\n       analytics-id="content.item.engagement.outline.forumLink.link"\n       aria-describedby="activity-indicator-{{::content.id}}"\n    >\n      <span>{{ content.title }}</span>\n    </a>\n    <div ng-switch-default class="content-title">{{ content.title }}</div>\n    <bb-svg-icon role="img" aria-hidden="false" bb-translate-attrs="::{\'aria-label\':\'components.directives.content-item-base.aria-label.indicator\'}" ng-if="content.ui.hasIndicator" id="activity-indicator-{{::content.id}}" class="indicator" size="small" icon="activity-indicator" status="active"></bb-svg-icon>\n  </ng-switch>\n  <div ng-if="content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date">\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-if="!dueDate" class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-if="dueDate && !gradeDetail" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-if="dueDate && !gradeDetail" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.canHaveAttempts() && content.hasDueDate()" class="due-date"\n       ng-class="{\'is-late\': contentItemBase.isLate}" ng-switch="dueDate != null">\n    \x3c!-- submission card --\x3e\n    \x3c!--  TODO: submissionCard is disabled until LRN-101279 is fixed --\x3e\n    \x3c!-- <bb-submission-card ng-if="gradeDetail"  grade-detail="gradeDetail" inline="true"></bb-submission-card>\n    <bb-submission-card ng-if="!gradeDetail" grading-column="gradingColumn" inline="true"></bb-submission-card> --\x3e\n    \x3c!-- no due date --\x3e\n    <span bb-translate ng-switch-default class="content-no-due-date-label">components.directives.content-item-base.no-due-date</span>\n    \x3c!-- due date --\x3e\n    <span bb-translate ng-switch-when="true" class="content-due-date-label">components.directives.content-item-base.due-date</span>\n    <bb-datetime format="Short" value="dueDate" ng-switch-when="true" class="content-due-date"></bb-datetime>\n  </div>\n  <div ng-if="contentItemBase.isModifyPermissionLoaded && content.canHaveAttempts() && content.isGroupContent" class="group-info">\n    <div class="group-name">\n      <span><bb-svg-icon size="small" icon="groups"></bb-svg-icon></span>\n      <a href="javascript:void(0);"\n         ng-if="contentItemBase.hasViewGroupsAsAdmin"\n         ng-click="contentItemBase.editGroups()"\n         analytics-id="content.item.engagement.outline.contentItemBase.editGroups.link"\n      >\n        <bb-group-count content="content"></bb-group-count>\n      </a>\n      <span ng-if="contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin">\n        <bb-group-count content="content"></bb-group-count>\n      </span>\n      <div ng-if="!contentItemBase.canViewGroups && !contentItemBase.hasViewGroupsAsAdmin" class="title">\n        <bb-group-student-enrollment content="content"></bb-group-student-enrollment>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!content.canViewAsInstructor() && content.isConditionalReleaseLocked()"\n    role="tooltip"\n    class="lock-info"\n    tabindex="0"\n    bb-complex-tooltip\n    enhanced-tooltip="true"\n    tooltip-position="bottom"\n    tooltip-open-on-activation="true"\n    tooltip-disable-on-mouse-over="true"\n    tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n    tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}">\n    <span bb-translate="components.directives.content-item-base.conditionalRelease.lock-info"></span>\n    <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n  </div>\n  <div class="student-created-info" ng-if="::contentItemEngagementOutline.isDiscussionCreatedByStudent()">\n    <span bb-translate="components.directives.content-item-base.content.discussionAuthorship.student"></span>\n  </div>\n  <div class="name-controls stop-click-propagation"\n    ng-class="{\n      \'name-conditional-release\': !content.canViewAsInstructor() && content.isConditionalReleaseLocked(),\n      \'selector-disabled\': content.isInForcedSequenceModule()\n    }"\n    ng-if="contentItemBase.showVisibility()">\n    <bb-content-visibility-selector content="content"\n                                    link-content="contentItemBase.targetContent"\n                                    onchange-func="contentItemBase.updateContentVisibility()"\n                                    disable-restricted="contentItemBase.disableRestricted"\n                                    open-panel-on-restricted="true"\n                                    verbose-restricted-label="true"></bb-content-visibility-selector>\n  </div>\n  <div ng-if="content.canViewAsInstructor() && content.isConditionalRelease()" class="conditional-release-control">\n    <div class="rules">\n      <a href="javascript:void(0);"\n        ng-click="contentItemEngagementOutline.openConditionalRelease()"\n        bb-complex-tooltip\n        enhanced-tooltip="true"\n        tooltip-position="bottom"\n        tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n        tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n        tooltip-auto-update="true"\n        tooltip-scope="contentItemBase.conditionalRelease.tooltipScope"\n        tooltip-template="{{::contentItemBase.conditionalRelease.getConditionalReleaseComplexTooltipTemplate()}}"\n        analytics-id="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}.link">\n        <span bb-translate="components.directives.content-item-base.conditionalRelease.{{contentItemBase.conditionalRelease.conditionType}}"></span>\n        <span class="sr-only">{{contentItemBase.conditionalRelease.tooltips}}</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},sLTT:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n("KCTV"),n("StCz"),n("TCPR"),n("Vdys"),n("RJjh"),n("lwNT"),n("aZnd"),n("nfUd"),n("W5+i"),n("FFRk");var i=n("wHJ2"),s=n("nsO7"),o=n("Sa5G"),a=n("jhBu"),r=n("0JpG"),c=n("oQrK"),l=n("+4Px"),d=n("pjml"),u=n("e6jQ"),p=n("TnpK"),m=n("ZzYr"),h=n("Qbdf"),b=n("s0ts"),g=n("k1CA"),v="ultra.directives.contentVisibilitySelector",f=function(){function e(e,t,n,i,a,r,c,p,m){var h=this;if(this.iScope=e,this.element=t,this.$q=n,this.$ngRedux=i,this.bbLocalize=a,this.entitlementService=r,this.ultraState=c,this.$modal=p,this.currentCourse=m,this.contentHandler="",this.isBbPage=!1,this.todayDate=new Date,this.visibilityOptions=[],this.scope=e,this.scope.contentVisibilitySelector=this,this.visibleOptionKey="components.directives.content-visibility."+(m.course.isOrganization?"organization.":"")+"visible",this.hiddenOptionKey="components.directives.content-visibility."+(m.course.isOrganization?"organization.":"")+"hidden",this.contentId=this.scope.content.id,this.contentHandler=this.scope.content.contentHandler?this.scope.content.contentHandler.toString():"",null==this.contentId)var b=this.scope.$watch((function(){return h.scope.content.id}),(function(e){e&&(null==h.contentId&&(h.contentId=e),b())}));if(this.selectorId=u.a(),this.contentHandler&&(d.r.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&null!=this.scope.content.contentDetail&&this.scope.content.getLinkContentSource().$then((function(e){h.contentHandler=e.contentHandler&&e.contentHandler.toString(),h.contentId=e.id})),d.r.ContentHandler.Folder.isEqualTo(this.contentHandler)&&null!=this.scope.content.contentDetail)){var g=this.scope.content.contentDetail[d.r.ContentHandler.Folder.toString()];g&&g.isBbPage&&(this.isBbPage=!0)}if(this.useNativeSelect()&&this.initVisibilityOptions(),this.scope.content.permissions){var v=this.scope.content.permissions;this.entitledToViewDesigner=s.isFunction(this.scope.content.canViewAsInstructor)&&this.scope.content.canViewAsInstructor(),v.adaptiveRelease?(this.entitledToViewConditionalRelease=v.adaptiveRelease.view,this.entitledToDeleteConditionalRelease=v.adaptiveRelease.delete):this.loadAdaptiveReleaseEntitlements()}else this.entitlementService.hasCourseEntitlement(o.f.ViewAsDesigner,this.scope.content.courseId).then((function(e){h.entitledToViewDesigner=e})),this.loadAdaptiveReleaseEntitlements();t.find(".item-visibility-selector, .item-visibility-selector a").on("keydown",(function(e){e.keyCode===l.f&&e.preventDefault()}))}return e.prototype.getIconSize=function(){return this.scope.hasMediumIcon?"medium":"small"},e.prototype.loadAdaptiveReleaseEntitlements=function(){var e=this,t=this.entitlementService.hasCourseEntitlement(o.j.ViewAdaptiveRelease,this.scope.content.courseId).then((function(t){e.entitledToViewConditionalRelease=t})),n=this.entitlementService.hasCourseEntitlement(o.j.DeleteAdaptiveRelease,this.scope.content.courseId).then((function(t){e.entitledToDeleteConditionalRelease=t}));return this.$q.all([t,n])},e.prototype.onChange=function(){this.scope.onchangeFunc&&this.scope.onchangeFunc()},e.prototype.onBlur=function(){this.scope.onblurFunc&&this.scope.onblurFunc()},e.prototype.disableRestricted=function(){return!!this.scope.disableRestricted&&this.scope.disableRestricted()},e.prototype.onRestrictedSelected=function(){this.scope.onRestrictedSelectedFunc&&this.scope.onRestrictedSelectedFunc()},e.prototype.selectVisible=function(){this.visibilitySelected(d.r.Visibility.Visible)},e.prototype.selectHidden=function(){this.visibilitySelected(d.r.Visibility.Hidden)},e.prototype.selectConditionalRelease=function(){var e={id:this.contentId};this.ultraState.goPeekState("conditional-release",e)},e.prototype.isEditable=function(){if(!this.isVisibilitySelectorMenuEmpty()){if(this.scope.content.canEdit())return!0;if(this.scope.content.canEditAvailability&&this.scope.content.canEditAvailability())return!0;if(!this.scope.content.id)return!0}return!1},e.prototype.validateChange=function(e){if(this.scope.validationFunc){var t=this.scope.validationFunc({visibility:e});return void 0===t||t}return!0},e.prototype.visibilitySelected=function(e){var t=this;if(this.validateChange(e)){if(this.scope.content&&this.scope.content.isForcedSequenceModule&&this.scope.content.isForcedSequenceModule())return void this.bbLocalize.loadBundle("features/course/conditional-release/conditional-release").then((function(){return t.$modal.open({template:g,scope:t.scope}).result})).then((function(){t.changeVisibility(e)}));this.changeVisibility(e)}},e.prototype.changeVisibility=function(e){this.scope.content&&this.scope.content.isConditionalRelease&&this.scope.content.isConditionalRelease()&&this.scope.content.conditionalReleaseAsync("DELETE"),this.scope.content.setVisibility(e),d.r.Visibility.Restricted.isEqualTo(e)&&this.onRestrictedSelected(),this.onChange(),this.onBlur()},e.getAdaptiveReleaseCriteria=function(e){return e&&e.rules?e.rules.map((function(e){return e.criteria})).reduce((function(e,t){return t.concat(e)}),[]):null},e.prototype.canDeleteCriteria=function(e){switch(e.type){case"Grade_Range":case"Grade_Range_Percentage":return this.scope.content.permissions.adaptiveRelease.criteria.performance.delete;case"Date_Range":return this.scope.content.permissions.adaptiveRelease.criteria.dates.delete;default:return this.scope.content.permissions.adaptiveRelease.delete}},e.prototype.canDeleteAllCriteria=function(e){var t=this;return e.every((function(e){return t.canDeleteCriteria(e)}))},e.prototype.canShowVisibleHidden=function(){var t=e.getAdaptiveReleaseCriteria(this.scope.content.adaptiveReleaseRules);return this.entitledToDeleteConditionalRelease||!t||this.canDeleteAllCriteria(t)},e.prototype.showVisibleHiddenMenuOptions=function(){var e=this.scope.content.isConditionalRelease&&this.scope.content.isConditionalRelease();return!e||e&&this.canShowVisibleHidden()},e.prototype.showConditionalReleaseMenuOption=function(){return!this.disableRestricted()&&this.scope.content.id&&this.entitledToViewConditionalRelease},e.prototype.isVisibilitySelectorMenuEmpty=function(){return!this.showVisibleHiddenMenuOptions()&&!this.showConditionalReleaseMenuOption()},e.prototype.isVisibilitySelectorEnabled=function(){return!this.scope.isVisibilitySelectorEnabled||this.scope.isVisibilitySelectorEnabled()},e.prototype.useNativeSelect=function(){return!c.a.detect().desktop()},e.prototype.initVisibilityOptions=function(){var e=this;this.bbLocalize.loadBundle("components/directives/content-visibility").then((function(){e.visibilityOptions=[{show:!0,visibility:d.r.Visibility.Visible,text:e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:e.visibleOptionKey}),onSelect:function(){e.selectVisible()}},{show:!0,visibility:d.r.Visibility.Hidden,text:e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:e.hiddenOptionKey}),onSelect:function(){e.selectHidden()}},{show:e.showConditionalReleaseMenuOption(),visibility:d.r.Visibility.Restricted,text:e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.content-visibility.conditional-availability"}),onSelect:function(){e.selectConditionalRelease()}}],e.selectedVisibilityOption=s.find(e.visibilityOptions,(function(t){return t.visibility===e.scope.content.getVisibilityAsStudent()}))}))},e.$inject=["scope","element","$q","$ngRedux",r.serviceName,a.b,p.d,"$modal",h.e],e}(),y=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.scope={content:"=",onblurFunc:"&?",onchangeFunc:"&?",onRestrictedSelectedFunc:"&?",openPanelOnRestricted:"&?",disableRestricted:"&?",validationFunc:"&?",isVisibilitySelectorEnabled:"&?",hasMediumIcon:"=?"},this.template=b,this.link=function(e,n,i){e.contentVisibilitySelector=t.$injector.instantiate(f,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(v,[m.a,h.b]).directive("bbContentVisibilitySelector",["$injector",function(e){return e.instantiate(y)}])},"sOA/":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("RrOo"),o="ultra.components.directives.bbUiIcon.Test";Object(i.a)(s.Test,o,"bbUiIconTest")},sZYy:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-goal",use:"icon-medium-goal-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-goal"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 1h22v4H1zM6 20h12v3H6z" /><path d="M10 14v6M14 14v6" stroke-width="2" /><path d="M4 5c0 6 3 9 8 9s8-3 8-9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 8H1c0 9.5 9 9 9 9M20 8h3c0 9.5-9 9-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},sa5q:function(e,t){e.exports='<div ng-switch on="content.canViewAsInstructor() || !content.shouldRestrict()">\n  \x3c!-- Center content title when it is only one line of text (without edit capability, description, or date restrictions). --\x3e\n  <a class="content-title"\n     bb-peek-sref="content-manage.edit.document({id:content.id})"\n     ng-switch-when="true"\n     ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}"\n     aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n     analytics-id="content.item.page.edit.document.link"><span>{{ content.title }}</span></a>\n  <span class="content-title"\n        ng-switch-default\n        ng-class="{\'name-middle\': contentItemBase.shouldAlignMiddle()}">{{ content.title }}</span>\n</div>'},scfL:function(e,t,n){},sg6B:function(e,t,n){},"st/R":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-clear",use:"icon-small-clear-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-clear"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM10 6l-4 4M6 6l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},suMx:function(e,t,n){"use strict";n("WXD6"),n("q1bP");var i=n("wHJ2"),s=n("Nyb7"),o="ultra.components.directives.statistics.complexStatistic",a=function(){function e(e,t,n){this.scope=e,this.element=t,this.$compile=n;var i=this.$compile(this.scope.item().complexTemplate)(this.scope.item().complexScope);t.append(i)}return e.$inject=["scope","element","$compile"],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="A",this.template=s,this.scope={item:"&"},this.link=function(e,n){e.complexStatistic=t.$injector.instantiate(a,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(o,[]).directive("bbComplexStatistic",["$injector",function(e){return e.instantiate(r)}]);var c=n("zphb"),l=function(){function e(e,t){this.scope=e,this.$sce=t,this.scope.item().trusted=t.trustAsHtml(this.scope.item().data)}return e.$inject=["scope","$sce"],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="A",this.template=c,this.scope={item:"&"},this.link=function(e){e.simpleStatistic=t.$injector.instantiate(l,{scope:e})}}return e.$inject=["$injector"],e}();i.module("ultra.components.directives.statistics.simpleStatistic",[]).directive("bbSimpleStatistic",["$injector",function(e){return e.instantiate(d)}]);var u=n("c2Z8");n.d(t,"a",(function(){return p}));var p="ultra.components.directives.statistics",m=function(){function e(e){var t=this;this.scope=e,this.smallPerRow=e.smallPerRow()||1,this.largePerRow=e.largePerRow()||4,this.scope.$watch("config()",(function(e){e&&(t.config=e.length>10?e.slice(0,10):e,t.total=t.config.length)}))}return e.$inject=["scope"],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="AE",this.template=u,this.scope={config:"&",smallPerRow:"&",largePerRow:"&"},this.link=function(e){e.statistics=t.$injector.instantiate(m,{scope:e})}}return e.$inject=["$injector"],e}();i.module(p,["dibari.angular-ellipsis",o,"ultra.components.directives.statistics.simpleStatistic"]).directive("bbStatistics",["$injector",function(e){return e.instantiate(h)}])},tTiy:function(e,t){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options"\n          data-show-add-options ng-click="addContentButton.toggleMenu()"\n          ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n          aria-expanded="{{addContentButton.isMenuVisible}}"\n          aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n          aria-label="{{addContentButton.addButtonAriaLabel}}"\n          ng-focus="addContentButton.showButton()"\n          ng-blur="addContentButton.hideButton()"\n          analytics-id="components.directives.add-content-button.attempts.button">\n  </button>\n  \x3c!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        monitor-leave="true"\n        allow-multiple="true"\n        target-div="{{\'#\' + fileListViewId}}"\n        disable-drag="disableDrag && disableDrag()"\n        hide-transclude-during-upload="false"  is-third-party-upload="false"\n        third-party-download-handler="addContentButton.downloadFile"\n        skip-zip-file-check="true">\n        <div class="columns medium-12" ng-class="{\'medium-center\': attempt.isMobile}">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n             ng-click="addContentButton.toggleMenu()"\n             analytics-id="components.directives.add-content-button.attempts.fileUpload.link">\n            <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n            <span bb-translate>course.content.fileUpload.addFiles</span>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n    <li ng-if="::!addContentButton.isMobile">\n      \x3c!-- Skip zip file check, assignment does not support unzip file(LRN-101238) --\x3e\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}">\n        <div class="columns medium-12">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-one-drive\n             is-flatten="false"\n             primary-key="fileListViewId"\n             attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n             bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n             ng-click="addContentButton.toggleMenu(\'OneDriveUpload\')"\n             analytics-id="components.directives.add-content-button.attempts.oneDrive.link">\n            <div>\n              <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n            </div>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},tcMd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("D57K"),s=(n("wItK"),n("6Fqm"),n("67oV"),n("nsO7")),o=n("+brj"),a=n("yC9S"),r=n("aHpC"),c=n("9cvu"),l="ultra.components.directives.pageSizeSelector";!function(){function e(e){this.browserStorage=e,this.componentId="page-size-selector-id-"+t.idCounter,this.componentDescribeId="page-size-selector-describe-id-"+t.idCounter++}var t;t=e,e.prototype.$onInit=function(){var e=this;this.localStorageKey?this.browserStorage.getFromStorage(this.localStorageKey,o.a.LocalStorage).then((function(t){e.initPagination(t)})):this.initPagination()},e.prototype.initPagination=function(e){this.availablePageSizes=t.AVAILABLE_PAGE_SIZES.map((function(e){return{index:e,name:e.toString(),nature:"_"+e,value:e.toString()}})),this.mySelectedPageSize=e&&s.find(this.availablePageSizes,(function(t){return t.value===e}))||this.availablePageSizes[t.DEFAULT_PAGE_SIZE_INDEX],this.onChange({pageSize:this.mySelectedPageSize.index})},e.prototype.changePageSize=function(e){this.mySelectedPageSize=e,this.onChange({pageSize:this.mySelectedPageSize.index}),this.localStorageKey&&this.browserStorage.saveToStorage(this.localStorageKey,this.mySelectedPageSize.value,o.a.LocalStorage)},e.AVAILABLE_PAGE_SIZES=[25,50,100],e.DEFAULT_PAGE_SIZE_INDEX=0,e.idCounter=1,e=t=Object(i.__decorate)([Object(a.a)({moduleName:l,componentName:"bbPageSizeSelector",template:c,bindings:{onChange:"&",localStorageKey:"@?"},requireModules:[o.b]}),Object(i.__param)(0,Object(r.b)(o.c))],e)}()},tecA:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return p}));var i=n("wHJ2"),s=n("+4Px"),o=n("g66W"),a="down",r="text-editor-update-original-value",c="text-editor-reset-to-original-value",l="text-editor-viewValue-initialized",d="text-editor-set-pristine",u="text-editor-empty",p=function(){function e(e,t,n,i,s){var o=this;this.scope=e,this.element=t,this.ctrl=n,this.bbLocalize=i,this.bbUltraState=s,this.focusOnAuthorControls=!1,this.isTextTouched=!1,this.myDirection=a,this.preventBlur=!1,this.currentStateName=s.current.name,e.disableInlineEditing=null!=e.disableInlineEditing&&e.disableInlineEditing,this.scope.$stopDigestPropagation=!0,this.originalNgModel=this.scope.ngModel,e.direction&&null!=e.direction()&&(this.myDirection=e.direction());var p=!(this.scope.ngModel&&this.scope.ngModel.length);e.$emit(u,{textEditor:this,isEmpty:p}),e.$root.$on("bb-bbml-editor-bbml-pre-redraw",(function(){o.updateOriginalValues()})),e.$on(d,(function(){o.isTextTouched=!1})),e.$on(l,(function(){o.truncatedViewValue=o.ctrl.$viewValue})),e.$on(c,(function(){o.isDirty()&&o.updateOriginalValues(),o.resetEditor(!1)})),e.$on(r,(function(){o.updateOriginalValues(),o.isTextTouched=!1})),e.$on("$destroy",(function(){o.isTextTouched=!1}))}return e.prototype.isEditorDirty=function(){return this.isTextTouched},e.prototype.getContentLabel=function(){var e=this.getPlaceholderKey();return this.truncatedViewValue||e},e.prototype.getPlaceholderKey=function(){return this.scope.placeholderAttrsValues===this.originalPlaceholderAttrValues&&null!=this.placeholderText||(this.placeholderText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.scope.placeholderKey,params:this.scope.$eval(this.scope.placeholderAttrsValues)}),this.originalPlaceholderAttrValues=this.scope.placeholderAttrsValues),this.placeholderText},Object.defineProperty(e.prototype,"truncatedViewValue",{get:function(){return this._truncatedViewValue},set:function(e){var t=this.element.find(".editor-element"),n=t.length?t.text():void 0;this._truncatedViewValue=o.h(n,100)},enumerable:!0,configurable:!0}),e.prototype.onChange=function(e){e&&e.keyCode===s.u||this.scope.hasFocus&&(this.isTextTouched=!0,this.scope.onchangeFunc&&this.scope.onchangeFunc({event:e}))},e.prototype.onKeydown=function(e){},e.prototype.isUploadProgressModalOpen=function(){var e=i.element(".progress-indicator-modal");return e&&e.length>0},e.prototype.isAddContentSelectorOpened=function(){return this.bbUltraState.current.name.length>this.currentStateName.length&&o.k(this.bbUltraState.current.name,this.currentStateName)},e.prototype.onBeforeBlur=function(){return!this.preventBlur&&!this.scope.disableInlineEditing},e.prototype.onBlur=function(){return this.scope.hasFocus=!1,this.ctrl.$focused=!1,this.scope.onblurFunc&&this.scope.onblurFunc(),!0},e.prototype.onFocus=function(){this.focusOnAuthorControls=!1,this.scope.readonly()||this.scope.hasFocus||(this.scope.hasFocus=!0,this.ctrl.$focused=!0,this.scope.onFocusFunc&&this.scope.onFocusFunc(),this.scope.$emit("entering-edit-state"))},e.prototype.isDirty=function(){return!(this.originalText||this.isTextTouched)},e.prototype.updateOriginalValues=function(){this.scope.ngModel===this.originalNgModel&&(this.originalText=this.scope.ngModel,this.originalPlainText=this.scope.plainText)},e.prototype.restoreFromOriginalValues=function(){this.originalText||(this.originalText="",this.originalPlainText=""),this.scope.ngModel=this.originalText,this.scope.plainText=this.originalPlainText},e.prototype.resetEditor=function(e){this.restoreFromOriginalValues()},e.prototype.isValidInputLength=function(){var e=null;if(null!=this.scope.getInputMaxLength&&(e=this.scope.getInputMaxLength()),null==e)return!0;if(e){var t=this.scope.plainText;return!!t&&t.trim().length<=e}return!0},e}()},tka7:function(e,t,n){"use strict";var i=n("D57K"),s=n("nbDY"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Assign=new t("assign"),t.Unassign=new t("unassign"),t.Delete=new t("delete"),t.Retain=new t("retain"),t}(n.n(s).a);t.a=o},tmbA:function(e,t){e.exports='<bb-modal class="notification automatic-zero-setting-confirmation"\n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZeroSettings">\n  <div name="modal-contents">\n    \x3c!-- Instructions --\x3e\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n    \x3c!-- Past due zero: Unassign zero --\x3e\n    <div ng-if="!pastDueZero.isPastZeroAssigned">\n      <fieldset ng-if="modalTranslateOptions.choices && modalTranslateOptions.choices.length > 0"\n                class="fieldset-options">\n        <legend class="sr-only" bb-translate="{{ modalTranslateOptions.title.key }}"></legend>\n        <div class="option-item" ng-repeat="option in modalTranslateOptions.choices">\n          <input type="radio" \n                 name="{{ ::option.name }}" \n                 id="{{ ::option.id }}"\n                 ng-model="modalTranslateOptions.choiceModal"\n                 ng-value="option.value"\n                 analytics-id="components.directives.grade.pastDueZero.option.input.radio">\n          <label for="{{ ::option.id }}" bb-translate>{{ ::option.localizedKey }}</label>\n          <p ng-if="!!option.descriptionKey"\n             class="past-due-unassign-description"\n             bb-translate>\n            {{ ::option.descriptionKey }}\n          </p>\n        </div>\n      </fieldset>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="{{modalTranslateOptions.confirm.key}}"\n          bb-translate>\n    {{modalTranslateOptions.confirm.key}}\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="{{modalTranslateOptions.cancel.key}}"\n          bb-translate>\n    {{modalTranslateOptions.cancel.key}}\n  </button>\n</bb-modal>'},towz:function(e,t,n){},tqR7:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("wHJ2"),s=n("lEL+"),o="ultra.components.directives.clickOutside",a=function(){function e(e,t,n,i,s){var o=this;this.scope=e,this.element=t,this.attrs=n,this.$document=i,this.timeout=s;var a=function(e){return o.applyExpression(e)},r=this.getContainer()||i;this.scope.$watch(this.attrs.isActive,(function(e,t){e?o.timeout((function(){r.on("click",a)}),o.scope,0,!1):r.off("click",a)})),this.scope.$on("$destroy",(function(){r.off("click",a)}))}return e.prototype.applyExpression=function(e){var t=this.element.is(e.target),n=this.element.has(e.target).length>0;t||n||this.scope.$apply(this.attrs.bbClickOutside)},e.prototype.getContainer=function(){if("currentPanelOnly"in this.attrs)for(var e=this.element;e.parent().length;)if((e=e.parent()).is(".bb-offcanvas-panel,#main-content-inner"))return e},e.$inject=["scope","element","attrs","$document",s.b],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.priority=100,this.restrict="A",this.compile=function(e,n){return{pre:function(e,n,i){return t.$injector.instantiate(a,{scope:e,element:n,attrs:i})}}}}return e.$inject=["$injector"],e}();i.module(o,[]).directive("bbClickOutside",["$injector",function(e){return e.instantiate(r)}])},trPQ:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li ng-if="cell.canBeView" \n        role="presentation">\n        <button role="menuitem" \n                class="js-view-submission button clear"  \n                ng-click="cell.view()"\n                analytics-id="components.directives.grade.grid.viewItem">\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n        </button>\n    </li>\n    <li ng-class="{disable: !isReadyToPost()}"\n        ng-if="cell.canPost()"\n        role="presentation">\n        <button role="menuitem" \n                class="js-post-grade button clear" \n                ng-click="post()" \n                ng-disabled="!isReadyToPost()"\n                analytics-id="components.directives.grade.grid.post">\n          <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n          <bb-translate class="ellipse" bb-translate>components.directives.grade.grid.post</bb-translate>\n        </button>\n    </li>\n  </ul>\n</div>'},u4ux:function(e,t,n){"use strict";var i=n("D57K"),s=(n("IcHz"),n("ZKRZ"),n("yCl+"),n("l+9M"),n("1NX5"),n("TR8k"),n("vgq2"),n("DUMb"),n("v0wN"),n("Ycix"),n("8wib"),n("wHJ2")),o=n("nsO7"),a=n("9zo4"),r=n("FpRh"),c=n("laCM"),l=n("cs5G"),d=n("nbDY"),u=n.n(d),p=n("0JpG"),m=n("w9Zy"),h=n("sLTT"),b=n("Fvsw"),g=n("Qbdf"),v=n("vYaK"),f=n("Ij+l"),y=n("7/CN"),w=n("Fdwu"),C=n("+4Px"),S=n("pjml"),A=n("zmy6"),k=n("lEL+"),I=n("TnpK"),O=n("ERkP"),D=n("1ZbL"),T=n("BEvj"),$=n("PoQW"),x="ultra.components.directives.react-toolkit.teaching-bubble",E={Class:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=document.getElementById(this.props.targetId);if(!this.props.show)return null;var t=this.props.calloutProps||{},n=Object(i.__assign)({directionalHint:$.DirectionalHint.bottomLeftEdge,directionalHintFixed:!0,minPagePadding:0,preventDismissOnResize:!0},t);return O.createElement(T.TeachingBubble,{analyticsId:this.props.analyticsId,targetElement:e,headline:this.props.headline,onDismiss:this.props.dismiss,calloutProps:n,teachingBubbleTooltipId:this.props.tooltipId},this.props.message)},t}(O.Component),bindingNames:["analyticsId","targetId","tooltipId","headline","message","show","dismiss","calloutProps"]};s.module(x,[]).component("bbUiTeachingBubble",Object(D.a)(E));var P=n("e6jQ"),R=n("XjwN");n.d(t,"b",(function(){return L})),n.d(t,"a",(function(){return G}));var L="ultra.components.directives.content.panelHeader",j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.ContentOnly=new t("ContentOnly"),t.ContentAndDelete=new t("ContentAndDelete"),t.ContentAndHandler=new t("ContentAndHandler"),t.ContentAndDeleteAndHandler=new t("ContentAndDeleteAndHandler"),t.DeleteAndHandler=new t("DeleteAndHandler"),t.None=new t("None"),t}(u.a),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.Gear=new t("settings"),t.Info=new t("information"),t}(u.a),M=function(){function e(e,t,n,i,s,a,r,c,l,d,u,p){var m,h=this;if(this.scope=e,this.element=t,this.attrs=n,this.accessibility=i,this.timeout=s,this.bbOffcanvas=a,this.context=r,this.CourseModel=c,this.localize=l,this.ultraState=d,this.contextCourse=u,this.allyService=p,this.isEditButtonHovering=!1,this.inputId="bb-panel-header-input-"+Object(P.b)(),this.teachingBubbleTooltipId="bb-panel-header-tooltip-"+Object(P.b)(),this.teachingBubbleHasBeenShown=!0,this.teachingBubbleAnalyticsId="bb-panel-header-tooltip-"+Object(P.b)(),this.dismissTeachingBubble=function(){h.teachingBubbleHasBeenShown=!0,h.scope.$apply()},this.getAriaLabel=(m=o.memoize((function(e){return h.localize.translateSync({locale:h.localize.getLocale(h.scope),key:"components.directives.header.aria.edit",params:{title:e},noWrap:!0,noEscape:!0})})),function(){return m(h.scope.panelTitle)}),this.scope.panelHeader=this,this.accessibility.isFocusDelayed=!0,this.configure(),l.loadBundle("components/directives/panel-header").then((function(){h.placeholderLocalizationKey&&(h.translatedPlaceholder=h.localize.translateSync({locale:h.localize.getLocale(h.scope),key:h.placeholderLocalizationKey,params:{date:h.context.getServerTime()},noWrap:!0})),(!h.scope.panelTitle||h.scope.focusTitleForEdit&&h.scope.focusTitleForEdit())&&h.scope.canEdit?(h.onEditMode(),h.scope.keepTitleOnEdit&&h.scope.keepTitleOnEdit()?h.element.find(".panel-header-title").get(0).setSelectionRange(0,0):h.scope.panelTitle&&(h.scope.panelTitle=""),h.timeout((function(){h.teachingBubbleHasBeenShown=!1}),h.scope,0)):(h.editMode=!1,h.focusReadonlyPanelTitle()&&h.forceTitleFocus())})),this.scope.setPlaceholderAsDefaultTitle&&this.scope.setPlaceholderAsDefaultTitle()&&!this.scope.panelTitle)e.$watch((function(){return h.element.find("input.panel-title").attr("placeholder")}),(function(e){e&&(h.scope.panelTitle=e)}));this.scope.$on("panel-header-force-edit-mode",(function(e,t){h.editMode=t}))}return e.prototype.configure=function(){var e=this;this.configureLocalizationKeys(),this.element.closest(".panel-wrap").addClass("has-bb-panel-header"),this.contextCourse.course?this.courseName=this.contextCourse.course.displayName:this.scope.$watch("::content",(function(t){t&&e.CourseModel.$find(t.courseId).$then((function(t){e.courseName=t.displayName}))})),this.scope.$watch("::content",(function(t){t&&e.allyService.isAvailable().then((function(t){t&&(e.canShowAlly=!0,e.allyService.update(e.scope,e.scope.content.id,e.allyService.getXythosIdFromContentItem(e.scope.content)))}))}))},e.prototype.focusReadonlyPanelTitle=function(){var e=this.scope,t=e.disableTitleAutofocus,n=e.focusTitleForEdit;return!t&&!(null==n?void 0:n())},e.prototype.forceTitleFocus=function(){var e=this;if(null!=this.scope.panelTitle)this.accessibility.focusCorrectElementOnPanel();else var t=this.scope.$watch("panelTitle",(function(n){null!=n&&(e.accessibility.focusCorrectElementOnPanel(),t())}))},Object.defineProperty(e.prototype,"panelHeaderTitle",{get:function(){return this.scope.panelHeaderTitle?this.scope.panelHeaderTitle:this.courseName},enumerable:!0,configurable:!0}),e.prototype.getTeachingBubbleTargetElementId=function(){return this.inputId},e.prototype.getTeachingBubbleTooltipId=function(){return this.teachingBubbleTooltipId},e.prototype.getTeachingBubbleAnalyticsId=function(){return this.teachingBubbleAnalyticsId},e.prototype.inputExists=function(){return this.element.find("#"+this.getTeachingBubbleTargetElementId()).length>0},e.prototype.getTeachingBubbleHeadline=function(){return this.localize.translateSync({key:this.teachingBubbleHeadlineLocalizationKey,locale:this.localize.getLocale(this.scope)})},e.prototype.getTeachingBubbleMessage=function(){return this.localize.translateSync({key:"components.directives.header.teachingBubble."+(this.contextCourse.course&&this.contextCourse.course.isOrganization?"organization.":"")+"message",locale:this.localize.getLocale(this.scope)})},e.prototype.onBlurTitle=function(e){var t=e.target,n=e.relatedTarget;t&&n&&y.c(t)!==y.c(n)?this.scope.panelTitle&&this.scope.panelTitle.length||(this.scope.panelTitle=this.translatedPlaceholder,this.delayedTitleBlur()):(this.onReadMode(),this.scope.hasError||this.delayedTitleBlur())},e.prototype.delayedTitleBlur=function(){var e=this;this.scope.onblurFuncTitle&&this.timeout((function(){e.scope.onblurFuncTitle()}),this.scope,0)},e.prototype.onChangeTitle=function(){this.teachingBubbleHasBeenShown=!0,this.scope.onchangeFuncTitle&&!this.scope.hasError&&this.scope.onchangeFuncTitle()},e.prototype.onBlurVisibility=function(){this.onReadMode(),this.scope.onblurFuncVisibility&&!this.scope.hasError&&this.scope.onblurFuncVisibility()},e.prototype.onChangeVisibility=function(){this.scope.onchangeFuncVisibility&&!this.scope.hasError&&this.scope.onchangeFuncVisibility()},e.prototype.onRestrictedSelected=function(){this.scope.onRestrictedSelectedFuncTitle&&!this.scope.hasError&&this.scope.onRestrictedSelectedFuncTitle()},e.prototype.validateVisibilityChange=function(e){if(this.scope.validationFuncVisibility){var t=this.scope.validationFuncVisibility({visibility:e});return void 0===t||t}return!0},e.prototype.onEditButtonMouseOver=function(){this.isEditButtonHovering=!0},e.prototype.onEditButtonMouseLeave=function(){this.isEditButtonHovering=!1},e.prototype.validateTitle=function(){this.autoTitle(),this.scope.panelTitle?this.editMode=!1:this.editMode=!0},e.prototype.onEditMode=function(){this.scope.canEdit?(this.editMode=!0,this.panelTitleOrig=this.scope.panelTitle,this.bbOffcanvas.safeFocus(this.element.find(".panel-header-title"))):this.editMode=!1},e.prototype.pressKey=function(e){13===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.element.find(".panel-header-title").get(0).blur()):e.keyCode===C.g&&this.editMode&&this.scope.panelTitle!==this.panelTitleOrig&&(e.preventDefault(),e.stopPropagation(),this.scope.panelTitle=this.panelTitleOrig,this.editMode||this.bbOffcanvas.safeFocus(this.element.find(".panel-title")))},e.prototype.onReadMode=function(){this.scope.filterTitleTags&&this.scope.filterTitleTags()&&this.filterTitleTags(),this.validateTitle()},e.prototype.filterTitleTags=function(){this.scope.panelTitle&&(this.scope.panelTitle=this.scope.panelTitle.replace(w.a,""))},e.prototype.configureLocalizationKeys=function(){var e=this,t="components.directives.header";this.scope.localizationKey?(this.placeholderLocalizationKey=t+".placeholder."+this.scope.localizationKey,this.teachingBubbleHeadlineLocalizationKey=t+".teachingBubble.headline."+this.scope.localizationKey):this.scope.content&&this.scope.content.$then((function(){if(e.scope.content.contentHandler){var n=e.scope.content.contentHandler.toString().replace("resource/","");e.placeholderLocalizationKey=t+".placeholder."+n,e.teachingBubbleHeadlineLocalizationKey=t+".teachingBubble.headline."+n}}))},e.prototype.gotoConversation=function(e){this.ultraState.goPeekState("conversations",{courseId:this.scope.content.courseId,contentId:this.scope.content.id,groupId:e||"default"})},e.prototype.autoTitle=function(){if(!this.scope.panelTitle&&this.scope.autoTitle&&this.scope.autoTitle()){var e=this.translatedPlaceholder;this.scope.panelTitle=e}},e.prototype.shouldShowTeachingBubble=function(){return!this.teachingBubbleHasBeenShown&&this.scope.showEmptyTitleReminder&&this.inputExists()},e.prototype.getDeleteDirectiveArgumentType=function(){var e=j.None;return this.scope.content&&this.scope.content.contentHandler?(e=j.ContentOnly,this.attrs.ondeleteFunc?(e=j.ContentAndDelete,this.scope.ondeleteConfirmHandler&&(e=j.ContentAndDeleteAndHandler)):this.scope.ondeleteConfirmHandler&&(e=j.ContentAndHandler)):this.attrs.ondeleteFunc&&this.scope.ondeleteConfirmHandler&&(e=j.DeleteAndHandler),e},e.prototype.getButtonGroupClass=function(){var e=0,t=0;return this.scope.showConversations&&this.scope.showConversations()&&(e+=1,t+=1),this.scope.showParticipants&&this.scope.showParticipants()&&(e+=1),this.scope.showSettings&&this.scope.showSettings()&&(e+=1,t+=1),this.scope.showDelete&&this.scope.showDelete()&&(this.scope.showSettings&&this.scope.showSettings()||(e+=1),t+=1),"small-buttons-"+e+" large-buttons-"+t},e.prototype.getSettingsIcon=function(){return this.scope.settingsIcon?this.scope.settingsIcon:G.Gear.toString()},e.prototype.openSettingsPanel=function(){null!=this.scope.settingsDisabled&&this.scope.settingsDisabled()||this.ultraState.goPeekState(this.scope.settingsPeekRef)},e.prototype.isVisibilitySelectorEnabled=function(){return!this.scope.isVisibilitySelectorEnabled||this.scope.isVisibilitySelectorEnabled()},e.$inject=["scope","element","attrs",a.c,k.b,m.e,b.b,S.o.serviceName,p.serviceName,I.d,g.e,l.b],e}(),_=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=R,this.transclude={panelHeaderCustomIcons:"?bbPanelHeaderCustomIcons"},this.scope={showCourse:"&?",panelHeaderTitle:"@?",panelHeaderTitleTranslateKey:"@?",content:"=",contentId:"=?",canEdit:"=",mode:"@?",hasError:"=?",hasSlider:"&?",showDelete:"&?",ondeleteFunc:"&?",ondeleteConfirmHandler:"@?",choices:"=?",showConversations:"&?",onconversationsFunc:"&?",showVisibility:"&?",onchangeFuncVisibility:"&?",onblurFuncVisibility:"&?",disableRestricted:"&?",openPanelOnRestricted:"&?",validationFuncVisibility:"&?",panelTitle:"=?",setPlaceholderAsDefaultTitle:"&?",localizationKey:"@",localizationAttrsValues:"@",onchangeFuncTitle:"&?",onblurFuncTitle:"&?",onRestrictedSelectedFuncTitle:"&?",maxLength:"=?",autoTitle:"&?",disableTitleAutofocus:"<?",focusTitleForEdit:"&?",keepTitleOnEdit:"&?",showSubmissionsGrading:"&?",summary:"=?",showAllyIcon:"&?",showSettings:"&?",settingsDisabled:"&?",settingsIcon:"@?",settingsPeekRef:"@?",settingsLabel:"@?",showParticipants:"&?",isVisibilitySelectorEnabled:"&?",filterTitleTags:"&?",showEmptyTitleReminder:"&?"},this.link=function(e,n,i){e.panelHeader=t.$injector.instantiate(M,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector",v.serviceName,S.o.serviceName],e}();s.module(L,[a.b,m.d,h.a,f.a,A.a,I.b,x,r.a,c.a]).directive("bbPanelHeader",["$injector",function(e){return e.instantiate(_)}])},uAJz:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-peer-review",use:"icon-small-peer-review-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-peer-review"><path d="M6.5 10C7.8807 10 9 8.8807 9 7.5S7.8807 5 6.5 5 4 6.1193 4 7.5 5.1193 10 6.5 10zM6.5 10C3.2288 10 1 12.5 1 15M11.5 6C12.8807 6 14 4.8807 14 3.5S12.8807 1 11.5 1 9 2.1193 9 3.5 10.1193 6 11.5 6zM12 6c.7226 0 1.4451.464 2 1.0569M10 13l2 2 3-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},uEsA:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-close-circle",use:"icon-medium-close-circle-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-close-circle"><circle cx="12" cy="12" r="11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M16 8l-8.005 7.9949M8 8l8 8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},uFkY:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l}));var i="assessment:reload-on-attempt-feedback-save",s="single-attempt-grading-list:reload-on-feedback-save",o="grade-comment-update";function a(e,t,n){return e.$broadcast(i,t,n)}function r(e,t){return e.$on(i,t)}function c(e,t){return e.$broadcast(s,t)}function l(e,t){return e.$on(s,t)}},ujI6:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));n("RB+a"),n("Qc1G");var i=n("wHJ2"),s=n("5iHu"),o=n("tqR7"),a=n("H8CZ"),r=n("lEL+"),c=n("+4Px"),l=n("ytQ2"),d="ultra.components.directives.foundationOffcanvas",u="OFFCANVASE-TOGGLE-CLOSE",p="OFFCANVAS-TOGGLE-OPEN",m=function(){function e(e,t,n,i,o,a,r){var l=this;this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$parse=o,this.$q=a,this.timeout=r,this.overrideButtonClass=!1,this.isPanelOpen=!1,this.justOpenedPanel=!1,this.isFromKeyBoard=!1,this.wiredup=!1,this.position="right",this.dialogModel=!1,this.initialProperties(),r((function(){if(l.openButtonElement=s("#"+l.attrs.bbFoundationOffcanvasOpenButton),0===l.openButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find an "Open Menu" button with an ID of '+l.attrs.bbFoundationOffcanvasOpenButton);l.openButtonElement.on("click.bbFoundationOffcanvas",(function(){l.scope.$apply((function(){l.togglePanel()}))})),l.openButtonElement.on("keydown.bbFoundationOffcanvas",(function(e){e.keyCode===c.f&&(l.isFromKeyBoard=!0)}))}),e,0,!1)}return e.prototype.initialProperties=function(){var e=this;this.attrs.bbFoundationOffcanvasPosition&&(this.position=this.attrs.bbFoundationOffcanvasPosition),this.attrs.bbFoundationOffcanvasEventDelegate&&(this.scope.$on(p,(function(){e.openPanel()})),this.scope.$on(u,(function(){e.closePanel()}))),this.attrs.bbFoundationOffcanvasDialogModel&&(this.dialogModel=this.attrs.bbFoundationOffcanvasDialogModel)},e.prototype.wireup=function(){var e=this;return this.wiredup=!0,this.timeout((function(){if(e.closeButtonElement=s("#"+e.attrs.bbFoundationOffcanvasCloseButton),0===e.closeButtonElement.length)throw new Error('The bbFoundationOffcanvas directive couldn\'t find a "Close Menu" button with an ID of '+e.attrs.bbFoundationOffcanvasCloseButton);if(e.wrapperElement=e.element,e.offcanvasPanelElement=e.element.children().children(),1!==e.offcanvasPanelElement.length)throw new Error("bbFoundationOffcanvas directive must have exactly one child element. Fix the usage in the html template.");if(e.offcanvasPanelElement.addClass(e.position+"-off-canvas-menu"),e.attrs.bbFoundationOffcanvasOverrideButtonClass&&(e.overrideButtonClass=e.$parse(e.attrs.bbFoundationOffcanvasOverrideButtonClass)(e.scope)),e.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),e.closeButtonElement.addClass("exit-off-canvas-overlay").on("click.bbFoundationOffcanvas",(function(){e.scope.$apply((function(){e.closePanel()}))})),e.offcanvasPanelElement.find("a, button").last().on("keydown.bbFoundationOffcanvas",(function(t){t.keyCode!==c.u||t.shiftKey||(t.preventDefault(),e.scope.$apply((function(){e.closePanel()})))})),e.offcanvasPanelElement.find("a, button").first().on("keydown.bbFoundationOffcanvas",(function(t){t.keyCode===c.u&&t.shiftKey&&(t.preventDefault(),e.scope.$apply((function(){e.closePanel()})))})),e.scope.$on("foundation-offcanvas-close-panel",(function(){e.closePanel()})),null!=e.attrs.bbFoundationOffcanvasCommonParent){if(e.commonParent=s("#"+e.attrs.bbFoundationOffcanvasCommonParent),0===e.commonParent.length)throw new Error("The bbFoundationOffcanvas directive couldn't find a common parent element with an ID of "+e.attrs.bbFoundationOffcanvasCommonParent)}else e.commonParent=s(e.wrapperElement).parents().has(e.closeButtonElement).first();if(e.commonParent.hasClass("group-list")||e.commonParent.addClass("off-canvas-wrap off-canvas-overlay"),!e.overrideButtonClass){var t=e.offcanvasPanelElement.find("li").not(".ng-hide").length;e.commonParent.addClass("buttons-"+t)}a.b(e.commonParent,(function(t){return e.isPanelOpen&&(t.data.noTransitions||"right"===t.originalEvent.propertyName)&&(e.isFromKeyBoard?e.offcanvasPanelElement.find("a, button").first().focus():(e.offcanvasPanelElement.parent().attr("tabindex",0),e.offcanvasPanelElement.parent().focus())),!1})),e.element.foundation(),e.scope.$on("$destroy",(function(){e.element.off("click.bbFoundationOffcanvas"),e.closeButtonElement.off("click.bbFoundationOffcanvas"),e.offcanvasPanelElement.find("a, button").last().off("keydown.bbFoundationOffcanvas"),e.offcanvasPanelElement.find("a, button").first().off("keydown.bbFoundationOffcanvas"),e.commonParent.removeClass("off-canvas-wrap off-canvas-overlay")}))}),this.scope,0,!1)},e.prototype.getPosition=function(){switch(this.position){case"right":return"left";case"top":return"bottom";case"bottom":return"top";case"left":default:return"right"}},e.prototype._openPanel=function(){var e=this;this.offcanvasPanelElement.css("display","block"),this.justOpenedPanel=!0,this.timeout((function(){e.offcanvasPanelElement.foundation("offcanvas","show","move-"+e.getPosition()),e.isPanelOpen=!0,e.offcanvasPanelElement.find("a, button").attr("tabindex","0"),e.justOpenedPanel=!1}),this.scope,0,!1)},e.prototype.openPanel=function(){var e=this;if(this.wiredup)this._openPanel();else{var t=this.$q.defer();this.scope.$watch("::foundationOffcanvas.wiredup",(function(e){e&&t.resolve()})),this.$q.all([this.wireup(),t.promise]).then((function(){e._openPanel()}))}},e.prototype.closePanel=function(){var e=this;this.offcanvasPanelElement.foundation("offcanvas","hide","move-"+this.getPosition()),this.isPanelOpen=!1,this.isFromKeyBoard=!1,this.offcanvasPanelElement.parent().removeAttr("tabindex"),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.openButtonElement.focus(),this.timeout((function(){e.isPanelOpen||e.offcanvasPanelElement.css("display","none")}),this.scope,300,!1)},e.prototype.handleClickOutside=function(){this.dialogModel||s("body").hasClass("modal-open")||this.justOpenedPanel||this.closePanel()},e.prototype.togglePanel=function(){this.isPanelOpen?this.closePanel():this.openPanel()},e.$inject=["scope","element","attrs","$compile","$parse","$q",r.b],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.transclude=!0,this.restrict="E",this.link=function(e,n,i){if(null==i.bbFoundationOffcanvasOpenButton||null==i.bbFoundationOffcanvasCloseButton)throw new Error('Please provide jQuery selectors for both the "Open Menu" and "Close Menu" buttons');var s=i.$observe("bbFoundationOffcanvasCloseButton",(function(o){o&&(e.foundationOffcanvas=t.$injector.instantiate(m,{scope:e,element:n,attrs:i}),s())}))},this.template=l}return e.$inject=["$injector"],e}();i.module(d,[o.a,r.a]).directive("bbFoundationOffcanvas",["$injector",function(e){return e.instantiate(h)}])},v0wN:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-groups",use:"icon-medium-groups-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-groups"><g clip-path="url(#icon-medium-groups_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 23.0644C17.3246 21.1155 14.8704 20 12 20s-5.3246 1.1155-7 3.0644M12 20c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8z" /><path d="M23 11s-1-3-4.5-3c-2.1456 0-3.3517 1.1274-3.9639 2M5.5 8C3.567 8 2 6.433 2 4.5S3.567 1 5.5 1 9 2.567 9 4.5 7.433 8 5.5 8zM1 11s1-3 4.5-3c2.1456 0 3.3517 1.1274 3.9639 2" /></g><defs><clipPath id="icon-medium-groups_clip0"><path d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(o);e.exports=o},vcLy:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-started",use:"icon-small-started-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-started"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 8H4s0 4 4 4 4-4 4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10.8247 9a3.594 3.594 0 01-.2191.5528c-.1907.3814-.461.7323-.8478.9901C9.3773 10.7966 8.825 11 8 11c-.825 0-1.3773-.2034-1.7578-.4571-.3868-.2578-.657-.6087-.8478-.9901A3.5857 3.5857 0 015.1754 9h5.6493z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},vgq2:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-discussion",use:"icon-medium-discussion-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-discussion"><path d="M8 21.4025a10.4446 10.4446 0 01-1.75-.8072L1 22l1.4318-5.2034C1.5217 15.2417 1 13.4318 1 11.5 1 5.701 5.701 1 11.5 1c4.5718 0 8.4611 2.9218 9.9025 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M9 16c0 3.866 3.134 7 7 7 1.3878 0 2.6812-.3803 3.7692-1.0769L23 23l-1.0769-3.2308C22.6197 18.6812 23 17.3878 23 16c0-3.866-3.134-7-7-7s-7 3.134-7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="13" cy="16" r=".5" /><circle cx="16" cy="16" r=".5" /><circle cx="19" cy="16" r=".5" /></symbol>'});s.add(o);e.exports=o},viYV:function(e,t){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li role=“presentation”>\n        <button role="menuitem" \n                class="js-view-submission button clear" \n                ng-click="cell.view()" \n                ng-disabled="!cell.canBeView"\n                analytics-id="components.directives.grade.grid.viewItemRecord" >\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  course-org-token-resolver class="ellipse">components.directives.grade.grid.viewItemRecord</bb-translate>\n        </button>\n    </li>\n  </ul>\n</div>'},"w0/N":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-rubric",use:"icon-small-rubric-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-rubric"><path d="M11 12h4v3h-4v-3zM4 12h4v3H4v-3zM1 12v3M1 5v3M11 5h4v3h-4V5zM4 5h4v3H4V5zM8 1H4M15 1h-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},wAzH:function(e,t,n){},wItK:function(e,t,n){},wJOA:function(e,t){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n     tabindex="0"\n     ng-click="gradeGridColumnOverallReborn.enterEditor($event)"\n     analytics-id="components.directives.grade.grid.gradeGridColumnOverallReborn.enterEdit"\n>\n  <div class="overall-display-grade" ng-class="{\'editor-disable\': gradeGridColumnOverallReborn.disabledEditor}"\n       aria-label="{{gradeGridColumnOverallReborn.ariaLabelContent}}">\n    \x3c!--<bb-display-grade column="col.data" display-type="GradeColor" grade-detail="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade>--\x3e\n    <bb-display-grade-pill column="col.data" grade="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade-pill>\n  </div>\n</div>'},wKTs:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-upload",use:"icon-small-upload-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload"><path d="M14 5h1v9H1V5h1M6 4l2-2 2 2M8 10V2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},wNBd:function(e,t){e.exports='<bb-modal id="confirm-submit-attempt-modal" class="notification success"\n          modal-title-key="{{assessmentAttempt.submitModalHeaderKey}}"\n          modal-translate-options="assessmentAttempt.submitModalTranslateOptions"\n          analytics-id-tag-prefix="course.content.assessment.test.modal.confirmSubmitAttemptAlert">\n  <div name="modal-contents">\n    <p bb-translate="{{::assessmentAttempt.submitModalBodyKey}}" translate-values="{\'title\': assessmentAttempt.customCategory}"></p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate course-org-token-resolver analytics-id="course.content.assessment.test.modal.confirmSubmitAttemptAlert.submit">\n    course.content.assessment.test.modal.confirmSubmitAttemptAlert.submit\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="$parent.$dismiss()" bb-translate analytics-id="global.cancel">global.cancel</button>\n</bb-modal>\n'},wnWX:function(e,t,n){},wtKk:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return g}));var i=n("D57K"),s=(n("dkOF"),n("r+pC"),n("wHJ2")),o=n("jO50"),a=n("+fEV"),r=n("0JpG"),c=n("+e2k"),l=n("TnpK"),d=n("QaOk"),u=n("+4Px"),p=n("X455"),m=n("oQrK"),h=n("aHpC"),b="ultra.components.directives.sliderTabNavigation",g="consultTabStatus",v=function(){function t(e,t,n,i,s,o,a){var r=this;this.scope=e,this.$rootScope=t,this.tabElement=n,this.$q=i,this.ultraState=s,this.membership=o,this.localizeService=a,this.isDesktop=m.a.detect().desktop(),this.navigationBlocker={navigationPromise:null},this.closeParentPeek=!1,this.navigationBlockedWasHandled=!1,this.showLoader=!1,this.nextTabFocusNameId="",this.isStudent=this.membership.isStudentMembership(),this.isRTL=this.localizeService.isRTL(this.scope),this.registerStateListener(),this.scope.$watch("tabs",(function(){r.initTemplateView()}),!0)}return t.prototype.initTemplateView=function(){var e=this.getTabFromState();e?this.isDesktop&&e.nameId===this.scope.tabs.transcludedSection.nameId?this.ultraState.goPeekState(this.scope.tabs.browsableSection.main.stateRoute,this.scope.tabs.browsableSection.main.stateArgs):this.activeTab=e:this.activeTab=this.isDesktop?this.scope.tabs.browsableSection.main:this.scope.tabs.transcludedSection},t.prototype.getTabFromState=function(e){var t=this,n=e?e.name:this.ultraState.current.name;return this.stateMatches(this.scope.tabs.transcludedSection.stateRoute,n)?this.scope.tabs.transcludedSection:this.stateMatches(this.scope.tabs.browsableSection.main.stateRoute,n)?this.scope.tabs.browsableSection.main:this.scope.tabs.browsableSection.browsableTabs.find((function(e){return t.stateMatches(e.stateRoute,n)}))},t.prototype.stateMatches=function(e,t){return new RegExp(e+"$").test(t)},t.prototype.registerStateListener=function(){var e=this;this.scope.$on("$stateChangeStart",(function(t,n,i,s,o){return e.isClosingParent(n)||e.getTabFromState(n)?e.isDesktop&&e.stateMatches(e.scope.tabs.browsableSection.main.stateRoute,s.name)&&e.stateMatches(e.scope.tabs.transcludedSection.stateRoute,n.name)?(e.closeParentPeek=!0,e.checkTabStatusAndBlockNavigation(t)):e.isClosingParent(n)&&e.activeTab.enableModalBlockNavigation?(e.closeParentPeek=!0,e.checkTabStatusAndBlockNavigation(t)):!e.isClosingParent(n)&&e.isChangingTab(n)&&(e.closeParentPeek=!1,e.activeTab.enableModalBlockNavigation&&e.getTabFromState(s))?(e.nextTab=e.getTabFromState(n),e.checkTabStatusAndBlockNavigation(t)):(e.activeTab=e.getTabFromState(n),e.showLoader=!0,e.$q.resolve(void 0)):e.$q.resolve(void 0)})),this.scope.$on("$stateChangeSuccess",(function(){e.navigationBlockedWasHandled=!1,e.showLoader=!1}))},t.prototype.isClosingParent=function(e){return!this.navigationBlockedWasHandled&&e.name.indexOf(this.scope.tabs.transcludedSection.stateRoute)<0},t.prototype.isChangingTab=function(e){return!this.navigationBlockedWasHandled&&this.activeTab&&!this.stateMatches(this.activeTab.stateRoute,e.name)},t.prototype.checkTabStatusAndBlockNavigation=function(e){var t=this;return e.preventDefault(),this.$rootScope.$broadcast(g,this.activeTab.nameId,this.navigationBlocker),this.navigationBlocker.navigationPromise?this.navigationBlocker.navigationPromise.then((function(){t.resumeNavigation()})):(this.resumeNavigation(),this.$q.resolve(void 0))},t.prototype.resumeNavigation=function(){this.navigationBlockedWasHandled=!0,this.closeParentPeek?this.ultraState.leavePeekState(this.ultraState.current.name):(this.activeTab=this.nextTab,this.showLoader=!0,this.ultraState.goPeekState(this.activeTab.stateRoute,this.activeTab.stateArgs))},t.prototype.goToTab=function(e){this.ultraState.goPeekState(e.stateRoute,e.stateArgs)},t.prototype.goBack=function(){this.nextTabFocusNameId=this.activeTab.nameId,this.ultraState.goPeekState(this.scope.tabs.browsableSection.main.stateRoute,this.scope.tabs.browsableSection.main.stateArgs)},t.prototype.shouldRenderTranscludedElement=function(){return this.activeTab&&this.activeTab.title===this.scope.tabs.transcludedSection.title},t.prototype.shouldRenderPeekRoutedElement=function(){return this.activeTab&&this.activeTab.title!==this.scope.tabs.transcludedSection.title},t.prototype.shouldRenderTabs=function(){return this.activeTab&&this.activeTab.nameId===this.scope.tabs.browsableSection.main.nameId&&this.scope.tabs.browsableSection.browsableTabs.length>0},t.prototype.handleTabKeyDown=function(t,n){if(t.keyCode===u.t)return t.preventDefault(),void this.goToTab(n);if(t.keyCode!==u.i){if(t.keyCode===u.e){t.preventDefault();var i=this.scope.tabs.browsableSection.browsableTabs.length;if(i>0)return void e("#slider-tab-"+this.scope.tabs.browsableSection.browsableTabs[i-1].nameId).focus();e("#slider-tab-"+this.scope.tabs.browsableSection.main.nameId).focus()}}else{t.preventDefault();var s=this.isDesktop?this.scope.tabs.browsableSection.browsableTabs[0].nameId:this.scope.tabs.transcludedSection.nameId;e("#slider-tab-"+s).focus()}},t.prototype.handleBackArrowKeyDown=function(e){e.keyCode===u.u&&e.shiftKey&&e.preventDefault()},t.prototype.handleLastElementFocus=function(){this.tabElement.find(".slider-tab-navigation-desktop__browsable-section-go-back").focus()},t=Object(i.__decorate)([Object(i.__param)(0,Object(h.b)("$scope")),Object(i.__param)(1,Object(h.b)("$rootScope")),Object(i.__param)(2,Object(h.b)("$element")),Object(i.__param)(3,Object(h.b)("$q")),Object(i.__param)(4,Object(h.b)(l.d)),Object(i.__param)(5,Object(h.b)(p.d)),Object(i.__param)(6,Object(h.b)(r.serviceName))],t)}(),f=function(){this.controller=v,this.controllerAs="sliderTabNavigation",this.template=m.a.detect().desktop()?o:a,this.transclude=!0,this.scope={tabs:"="}};s.module(b,[c.a,d.a]).directive("bbSliderTabNavigation",["$injector",function(e){return e.instantiate(f)}])}).call(this,n("5iHu"))},wy9x:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("wHJ2"),s=n("Jwnl"),o="ultra.components.directives.content.contentItem.contentItemType.contentItemFolder",a=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n}return e.prototype.toggleFolder=function(){this.scope.$emit("toggle-folder",this.scope.content)},e.prototype.shouldAlignMiddle=function(){var e=this.scope.content;return!e.canViewAsInstructor()&&(!e.description&&(!e.isVisible()||!e.adaptiveReleaseRules))},e.$inject=["scope","element","attrs"],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=s,this.scope=!1,this.link=function(e,n,i){e.contentItemFolder=t.$injector.instantiate(a,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(o,[]).directive("bbContentItemFolder",["$injector",function(e){return e.instantiate(r)}])},xAaQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("wHJ2"),s=n("wy9x"),o=n("jhBu"),a=n("Sa5G"),r=n("TnpK"),c=n("sB2Z"),l="ultra.components.directives.content.contentItem.contentItemEngagementOutline",d=function(){function e(e,t,n){var i=this;this.scope=e,this.entitlementService=t,this.ultraState=n,this.entitlementService.hasCourseEntitlement(a.f.ModifyContent,this.scope.content.courseId).then((function(e){i.entitledToModifyContent=e}))}return Object.defineProperty(e.prototype,"canOpenConditionalRelease",{get:function(){return!!(this.scope.content&&this.scope.content.permissions&&this.scope.content.permissions.adaptiveRelease&&this.scope.content.permissions.adaptiveRelease.view)},enumerable:!0,configurable:!0}),e.prototype.openConditionalRelease=function(){this.isCourseCompletedAndInInstructorView()||this.ultraState.goPeekState("conditional-release",{id:this.scope.content.id})},e.prototype.isCourseCompletedAndInInstructorView=function(){return!this.scope.content.canEdit()&&this.scope.content.canViewAsInstructor()},e.prototype.isDiscussionCreatedByStudent=function(){var e,t=!1,n=null===(e=this.scope.content.contentDetail)||void 0===e?void 0:e["resource/x-bb-forumlink"];return n&&(t=n.isDiscussionCreatedByStudent),!!t},e.$inject=["scope",o.b,r.d],e}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=c,this.scope=!1,this.link=function(e){e.contentItemEngagementOutline=t.$injector.instantiate(d,{scope:e})}}return e.$inject=["$injector"],e}();i.module(l,[s.a,r.b]).directive("bbContentItemEngagementOutline",["$injector",function(e){return e.instantiate(u)}])},xS64:function(e,t,n){},xXFZ:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-custom-arrow-up",use:"icon-custom-arrow-up-usage",viewBox:"0 0 9 9",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" id="icon-custom-arrow-up"><path fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M8 6.09L4.476 2.91 1 6.09" /></symbol>'});s.add(o);e.exports=o},xcel:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return A}));var i=n("wHJ2"),s=n("nsO7"),o=n("LN5R"),a=n("o5Lu"),r=n("lEL+"),c=n("0JpG"),l=n("jhBu"),d=n("iViV"),u=n("pjml"),p=n("+4Px"),m=n("cbVV"),h=n("TmUJ"),b=n("C2vp"),g=n("Sa5G"),v=n("dF44"),f=n("qH3X"),y=n("Ui4O"),w=n("trPQ"),C=n("viYV"),S=n("E7GM"),A="ultra.components.directives.gradeGridColumnReborn",k=function(){function t(e,t,n,i,o,a,r,c,l,d,u,p,h){var b=this;this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=o,this.$compile=a,this.scope=r,this.element=c,this.attrs=l,this.gradeGridRebornController=d,this.timeout=u,this.bbLocalize=p,this.entitlementService=h,this.isRestrictedGroupContent=!1,this.hasEntitlementsToGradeCell=function(){if(b.isRestrictedGroupContent)return!1;if(!b.cell.canBeEdited)return!1;var e=b.cell;return e.data&&e.data.grade?b.gradeService.canGrade(e.data.grade.gradeScoreDesignation):!(!e.column||!e.column.data)&&b.gradeService.canGrade(e.column.data.gradeScoreDesignation)},this.isCellGradeable=function(e){return!b.isRestrictedGroupContent&&(!s.isUndefined(e)&&(!b.gridData.course.isComplete()&&(!(s.isUndefined(b.group)&&e.column instanceof m.g)&&e.canBeEdited)))},this.canGradeCell=function(){return b.isCellGradeable(b.cell)&&b.hasEntitlementsToGradeCell()},this._isUpdating=!1,this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),r.$watchGroup(["row","col"],(function(e){var t=e[0],n=e[1];b.initializeCell(t.id,n.id),b.initializeState(),b.initializeUI()})),r.$on(f.a.REFRESH,(function(e,t){b._isUpdating=!1;var n=t.rowId,i=t.columnIds;s.forEach(i,(function(e){b.scope.row.id===n&&b.cell.column.id===e&&(b.initializeCell(n,e,!1),b.initializeUI(),b.scope.$broadcast(f.a.REFRESH_CELL_EDITOR))}))})),r.$on(v.b.ENTER_CELL,(function(e,t){return t.find(".grade-grid-cell").click()})),r.$on("$destroy",(function(){})),r.$on(f.a.ENTER_EDITOR,(function(e,t){s.isUndefined(t.group)||s.isUndefined(b.group)||t.group.groupId!==b.group.groupId||b.cell.column.id!==t.columnId||(b._freezeGroup=!0)})),r.$on(f.a.CLOSE_EDITOR,(function(e,t){b.group&&b._freezeGroup&&(b._freezeGroup=!1)}))}return t.prototype.initializeState=function(){this._isEditing=!1,this.resetGradePost()},t.prototype.initializeCell=function(e,t,n){void 0===n&&(n=!0),this.cell=this.gridData.getCell(e,t),this.setUpScreenReader(this.cell,this.score),this._oldScore=this._score=void 0,this.group&&n&&this.element.children(".grade-grid-cell").removeClass("group-id-"+this.group.groupId+" group-grade-cell selected"),this._group=void 0,this._isOtherGroupMemberGraded=void 0,this.cell instanceof b.e&&(this._group=this.cell.group,this.element.children(".grade-grid-cell").addClass("group-id-"+this.group.groupId+" group-grade-cell")),this.setSelectEventListener()},t.prototype.setSelectEventListener=function(){var e=this;this.group&&s.isUndefined(this.unbindSelectEvent)&&!this.isRestrictedGroupContent?this.unbindSelectEvent=this.scope.$on(f.a.SELECT_GROUP,(function(t,n){e.group.groupId===n.groupId&&e.cell.column.id===n.columnId&&n.enter?e.element.children(".group-grade-cell").addClass("selected"):e.element.children(".group-grade-cell").removeClass("selected")})):s.isUndefined(this.group)&&!s.isUndefined(this.unbindSelectEvent)&&(this.unbindSelectEvent(),this.unbindSelectEvent=void 0)},t.prototype.initializeEventHandler=function(){var e=this;this.element.parents(".rb-cell").mouseenter((function(){return e.mouseEnterHandler()})).mouseleave((function(){return e.mouseLeaveHandler()})).focusin((function(){e.focusin(),e.mouseEnterHandler(),e.showPointsPossible()})).focusout((function(){e.focusout(),e.mouseLeaveHandler(),e.hidePointsPossible()})).click((function(){e.showPointsPossible()}))},t.prototype.focusin=function(){this.isRestrictedGroupContent||this.rootScope.$broadcast(f.a.FOCUSIN_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.focusout=function(){this.isRestrictedGroupContent||this.rootScope.$broadcast(f.a.FOCUSOUT_CELL,{rowId:this.scope.row.id,columnId:this.cell.column.id})},t.prototype.showElement=function(e){e.removeClass("hide")},t.prototype.hideElement=function(e){e.addClass("hide")},t.prototype.initializeUI=function(){var e=this.element.constructor.fn,t=e.show,n=e.hide;e.show=function(){return this.removeClass("hide")},e.hide=function(){return this.addClass("hide")},(this.group||this.cell.column.data&&this.cell.column.data.groupContent)&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(g.v.ViewGroups,this.gridData.course.id));var i=this.element.children(".grade-grid-cell");if(this.isLoading)i.removeClass("grade-now-bg").find(".score, .ungraded, .anonymous").hide();else if(!this.gridData.canViewGrades||this.isRestrictedGroupContent){if(this.cell.data)i.addClass("grade-now-bg"),i.find(".score").show().find("#displayedScore").show().find("#display").text("--").show();else(o=i.find("#displayedScore")).children("#display").text("").hide(),o.hide()}else{var o,a=this.displayedScore;if(this.cell.isAnonymousGrading||a?i.removeClass("grade-now-bg"):i.addClass("grade-now-bg"),this.isEditing||this.cell.isAnonymousGrading?i.children(".score").hide():i.children(".score").show(),a)(o=i.find("#displayedScore")).children("#display").text(a).show(),o.show();else(o=i.find("#displayedScore")).children("#display").text("").hide(),o.hide();if(this.isPastDueZero?i.find("#pastDueZero").show():i.find("#pastDueZero").hide(),this.isPosted&&!this.isPastDueZero?i.find("#posted").show():i.find("#posted").hide(),this.canGradeCell()&&!a?i.find("#gradeNow").show():i.find("#gradeNow").hide(),this.hasNewSubmission?i.find("#newSubmission").show():i.find("#newSubmission").hide(),this.canGradeCell()?i.find("#blank").hide():i.find("#blank").show(),this.cell instanceof b.c&&this.ungradedItemCount&&this.ungradedItemCount>0?(this.ungraded=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.ungraded",params:{count:this.ungradedItemCount},noWrap:!0,noEscape:!0}),i.find("#ungraded").show()):i.find("#ungraded").hide(),this.cell instanceof b.c){var r=this.pointsPossible;i.find("#pointsPossible").text(s.isUndefined(r)?"":r.toString())}this.cell.isAnonymousGrading?i.find(".anonymous").show():i.find(".anonymous").hide()}e.show=t,e.hide=n},t.prototype.showPointsPossible=function(){var e=this;if(this.cell instanceof b.c){var t=this.element.children(".grade-grid-cell");t.addClass("purple-outline"),t.find("#displayedScore").children("#display").text(this.score),this.showElement(t.find("#displayedScore")),this.showElement(t.find("#slash")),this.showElement(t.find("#pointsPossible")),this.timeout((function(){var t=e.scope.$on(v.b.SCROLL_H,(function(){e.hidePointsPossible(),t(),n()})),n=e.scope.$on(v.b.SCROLL_V,(function(){e.hidePointsPossible(),n(),t()}))}),this.scope,200)}},t.prototype.hidePointsPossible=function(){if(this.cell instanceof b.c){var e=this.element.children(".grade-grid-cell");e.removeClass("purple-outline"),e.find("#displayedScore").children("#display").text(this.displayedScore),this.hideElement(e.find("#slash")),this.hideElement(e.find("#pointsPossible"))}},t.prototype.resetGradePost=function(){this._isReadyToPost=void 0},Object.defineProperty(t.prototype,"isReady",{get:function(){return!s.isUndefined(this.cell)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return!this.isReady||!this.cell.isLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPosted",{get:function(){return!s.isUndefined(this.cell)&&this.cell.isPosted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNewSubmission",{get:function(){return!s.isUndefined(this.cell)&&this.cell.hasNewSubmission},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPastDueZero",{get:function(){return!s.isUndefined(this.cell)&&this.cell.isPastDueZero},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayedScore",{get:function(){if(!this.isLoading)return this.formatScore()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ungradedItemCount",{get:function(){if(this.isReady){if(this.cell.data)return this.cell.data.grade.ungradedItemCount;if(this.gridData.getColumnMetadata(this.cell.column.id))return this.gridData.getColumnMetadata(this.cell.column.id).itemsCount}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointsPossible",{get:function(){if(this.isReady&&this.cell.data&&this.displayedScore){var e=this.cell.data.grade.pointsPossible;return s.isUndefined(e)?e:Math.round(100*e)/100}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){if(this.isReady){if(s.isUndefined(this._score)){var e=this.cell.getScore(this.scope);this._oldScore=this._score=e}return this._score}},set:function(e){this._score=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadonly",{get:function(){if(this.isReady)return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditing",{get:function(){return this._isEditing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return this._group},enumerable:!0,configurable:!0}),t.prototype.mouseEnterHandler=function(){this.group&&!this.isRestrictedGroupContent&&this.rootScope.$broadcast(f.a.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!0})},t.prototype.mouseLeaveHandler=function(){!this.group||this._freezeGroup||this.isRestrictedGroupContent||this.rootScope.$broadcast(f.a.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!1})},t.prototype.insertCellEditor=function(){var e=this;this.editorScope=this.scope.$new(!1,this.scope),this.$compile(t.CELL_EDITOR_TEMPLATE)(this.editorScope,(function(t){return e.element.children(".grade-grid-body-cell").append(t)})),this.timeout((function(){e.addInputKeyEventListeners();var t=e.scope.$on(v.b.SCROLL_H,(function(){s.isEmpty(e.score)&&e.element.children(".grade-grid-cell").addClass("grade-now-bg"),e.closeEditor(),t(),n()})),n=e.scope.$on(v.b.SCROLL_V,(function(){s.isEmpty(e.score)&&e.element.children(".grade-grid-cell").addClass("grade-now-bg"),e.closeEditor(),n(),t()}))}),this.scope,200)},t.prototype.removeCellEditor=function(){this.element.find("#bb-grade-grid-cell-editor-reborn").remove()},t.prototype.isConfirmDialogExisting=function(){return!!e(".grade-grid-group-confirm-dialog").length},t.prototype.enterEditor=function(e){if(!this.isConfirmDialogExisting()&&this.isCellGradeable(this.cell)&&!this.isLoading&&!this._isEditing){if(this.cell.column.data.isAttendance())this.gradeGridRebornController.attendanceIsAvailable&&(this.cell.canBeView&&this.popupMenu(e,!1),this.rootScope.$broadcast(f.a.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}));else{var t=this.hasEntitlementsToGradeCell();(this.cell.canBeView||this.cell.canPost())&&(t||(this.isReadyToPost=!!this.score),this.popupMenu(e,!0)),t&&(this._isEditing=!0,this.hideElement(this.element.find(".score")),this.element.children(".grade-grid-cell").removeClass("grade-now-bg"),this.insertCellEditor(),this.group?this.rootScope.$broadcast(f.a.ENTER_EDITOR,{group:this.group,columnId:this.cell.column.id}):this.rootScope.$broadcast(f.a.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}))}this.getIsOtherGroupMemberGraded()}},t.prototype.getIsOtherGroupMemberGraded=function(){var e=this;this.group&&this.getGroupGrades(this.cell.column.id).then((function(){e.isOtherGroupMemberGraded()}))},Object.defineProperty(t.prototype,"isReadyToPost",{get:function(){return this._isReadyToPost},set:function(e){this._isReadyToPost=e},enumerable:!0,configurable:!0}),t.prototype.post=function(e,t){return t?this.cell.column.data.postReadyGroupAttempts({groupAssociationId:this.group.groupAssociationId}):this.cell.column.data.grades.$new(e.id).postReadyGrades()},t.prototype.fetchSummary=function(e){return this.cell.column.data.summary.$fetch(e).$asPromise()},t.prototype.popupMenu=function(t,n){var i=this,s="grade-grid-cell-menu-reborn-"+this.scope.row.id+"-"+this.scope.col.id;if(!this.gradeGridRebornController.isMenuExisting(s)){var o=e(t.target).closest(".grade-grid-cell").offset();o.top+=80;var a=this.scope.$new(!0);a.cell=this.cell,a.post=function(){(i.savePromise||i.$q.when()).then((function(e){void 0===e&&(e=i.cell.getGrade()),i.postDefer&&(i.postDefer.resolve(!0),i.timeout.cancel(i.postDeferTimeout)),e&&(i.isGroupAssessment()?i.post(e,!0).then((function(){return i.fetchSummary({timestamp:Date.now()})})).then((function(){i.gridData.getGroupIdUserIdMap()[i.group.groupId].forEach((function(e){i.gridData.refreshDataCell(i.gridData.getRowByUserId(e),i.cell.column)})),i.rootScope.$broadcast(v.b.DATA_UPDATE),i.resetGradePost()})):i.post(e,!1).then((function(){return i.fetchSummary({timestamp:Date.now()})})).then((function(){i.gridData.refreshDataCell(i.cell.row,i.cell.column),i.rootScope.$broadcast(v.b.DATA_UPDATE),i.resetGradePost()})))}))},a.isReadyToPost=function(){return!i._isUpdating&&i.cell.isReadyToPost&&i.isReadyToPost&&(!i.isGroupAssessment()||i._isOtherGroupMemberGraded)},a.adjustPosition=function(e){o.top+e.height()>i.gradeGridRebornController.getGradeGridContainerElementBottom()&&(o.top-=80+e.height()),e.offset(o)},n?this.gradeGridRebornController.popupMenu(s,w,a):this.gradeGridRebornController.popupMenu(s,C,a),this.addMenuKeyEventListeners(),t.preventDefault(),t.stopPropagation()}},t.prototype.popupConfirmDialog=function(t){var n=this,i="group-cell-confirm-dialog-reborn-"+this.scope.row.id+"-"+this.scope.col.id,s=this.$q.defer();if(!this.gradeGridRebornController.isMenuExisting(i)){var o=this.scope.$new(!0);o.waiting=200,o.onBeforeDestroy=function(e){s.resolve(!0)},o.saveGroup=function(){s.resolve(!0)},o.saveOne=function(){s.resolve(!1)},o.isSaveOneDisabled=""===this.score,t.top+=80,o.adjustPosition=function(e){var i=t.left+e.width(),s=t.top+e.height(),o=n.gradeGridRebornController.getGradeGridContainerElementRight(),a=n.gradeGridRebornController.getGradeGridContainerElementBottom();i>o&&(t.left-=i-o+Object(h.a)()),s>a&&(t.top-=e.height()+80),e.offset(t)},o.$on("$destroy",(function(){n.scope.$emit(v.b.LEAVE_CELL)})),this.gradeGridRebornController.popupMenu(i,S,o),this.timeout((function(){var t=e("#"+i).find("button");t.on("keydown",(function(n){if(p.A(n))t.eq((t.index(this)+1)%t.length).focus();else if(p.z(n))t.eq((t.index(this)-1+t.length)%t.length).focus();else{if(n.keyCode!==p.g)return;e(window).click()}n.preventDefault(),n.stopPropagation()})),t.first().focus()}),this.scope,0,!1)}return s.promise},t.prototype.isOtherGroupMemberGraded=function(){var e=this;this._isOtherGroupMemberGraded=s.isUndefined(s.findKey(this.studentIdGradeMap,(function(t,n){var i=t.getScore();return e.cell.row.metadata.user.id!==n&&(""===i||s.isNull(i)||s.isUndefined(i))})))},t.prototype.addInputKeyEventListeners=function(){var e=this;this.element.find("#bb-grade-grid-cell-editor-reborn input").on("keydown",(function(t){var n=e.gradeGridRebornController.getMenuitems();if(p.A(t))n.first().focus();else{if(!p.z(t))return;n.last().focus()}t.preventDefault(),t.stopPropagation()}))},t.prototype.addMenuKeyEventListeners=function(){var t=this;this.timeout((function(){var n=t.gradeGridRebornController.getPopupMenu();n.on("keydown",(function(i){var s=t.gradeGridRebornController.getMenuitems();if(p.A(i))(o=s.index(e(i.target))+1)<s.length?s.eq(o).focus():t.element.find(".grade-grid-cell").trigger("click",!0);else if(p.z(i)){var o;(o=s.index(e(i.target))-1)>=0?s.eq(o).focus():t.element.find(".grade-grid-cell").trigger("click",!0)}else if(p.y(i))t.scope.$emit(v.b.LEAVE_CELL);else{if(i.keyCode!==p.g)return;n.data("destroy")(),t.scope.$emit(v.b.LEAVE_CELL)}i.preventDefault(),i.stopPropagation()}))}),this.scope,0,!1)},t.prototype.gotoNextCell=function(){var e=this;this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then((function(){e.scope.$emit(v.b.ENTER_NEXT_CELL)}))},t.prototype.onInputBlur=function(t,n,i){var o=this;if(!this.isLoading&&this._isEditing)if(this.savePromise=this.$q.when(),this.postDefer=this.$q.defer(),this.postPromise=this.postDefer.promise,n){var a;this.score=i,s.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.isDirty()?(a=this.$q.defer(),this.savePromise=a.promise):this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0);var r=this.$q.when(!1);this.isGroupAssessment()&&this.isDirty()&&(r=this.popupConfirmDialog(e(t.target).closest(".grade-grid-cell").offset())),r.then((function(e){o.showScoreTemporarily(),o.saveGrade(e,a),o.closeEditor()}))}else s.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("grade-now-bg"),this.closeEditor(),this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)},t.prototype.showScoreTemporarily=function(){if(this.isDirty()){var e=this.element.find("#display");e.text(this.score);var t=this.element.find("#posted");s.isEmpty(this.score)?(this.hideElement(t),this.hideElement(this.element.find("#displayedScore")),this.showElement(this.element.find("#gradeNow"))):(this.hideElement(this.element.find("#gradeNow")),this.showElement(this.element.find("#displayedScore")),this.showElement(e))}},t.prototype.closeEditor=function(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.showElement(this.element.find(".score")),this.rootScope.$broadcast(f.a.CLOSE_EDITOR,{group:this.group,columnId:this.cell.column.id}))},t.prototype.formatScore=function(){var e,t=this.cell.data;return!s.isNull(t)&&t.grade&&t.grade.displayGrade&&(e=this.gradeService.getGradeToDisplay(t.grade.displayGrade,this.scope,this.gridData.getSchema()[this.cell.column.data.gradingSchemaId].scaleType),this.setUpScreenReader(this.cell,e)),e},t.prototype.isDirty=function(){return s.isUndefined(this._oldScore)&&!s.isEmpty(this.score)||!s.isUndefined(this._oldScore)&&this.bbLocalize.parseNumberSync(this._oldScore,this.scope).toString()!==this.bbLocalize.parseNumberSync(this.score,this.scope).toString()},t.prototype.createGradeSubmission=function(){var e=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],t=this.gradeService.createGradeSubmission(this.cell.column.data,this.gradeService.parseGrade(this.score,e,this.scope),e);return t.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),t},t.prototype.getGroupGrades=function(e){var t=this;this.studentIdGradeMap={};var n=this.gridData.getGroupIdUserIdMap()[this.group.groupId].map((function(e){return t.gridData.getRowByUserId(e).metadata.id}));return this.CourseModel.$new(this.gridData.course.id).gradebook.bulkView.$fetch({membershipIds:n,columnIds:[e]}).$asPromise().then((function(e){e.bulkViewUsers.forEach((function(e){t.studentIdGradeMap[e.studentId]=e.grades[0].grade}))}))},t.prototype.prepareSaveGroupGrade=function(){var e=this;return this.$q.when().then((function(){e.gridData.getGroupById(e.group.groupId).memberships.forEach((function(t){t.ui={gradeDetail:e.studentIdGradeMap[t.userId]}}))}))},t.prototype.saveGrade=function(e,t){var n=this;if(this.isDirty()){this._oldScore=this._score,s.isUndefined(t)&&(t=this.$q.defer(),this.savePromise=t.promise);var i=this.createGradeSubmission(),o=this.$q.when();i.clearGrade&&this.cell.isCleanAttemptGrade&&(o=this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.cell.column.id).grades.$new(this.cell.data.grade.id).attempts.$fetch().$asPromise().then((function(e){return e[0]}))),o.then((function(t){return(e?n.prepareSaveGroupGrade():n.$q.when()).then((function(){return n.gradeService.saveGrade(i,n.cell.data&&n.cell.data.grade,t,e?{group:n.gridData.getGroupById(n.group.groupId)}:{userId:n.cell.row.metadata.user.id})}))})).then((function(s){!i.clearGrade&&n.cell.isPosted&&n.cell.isNeedAutoPost?n.post(s,e):t.resolve(s)})).then((function(){return n.postDeferTimeout=n.timeout((function(){n.postDefer.resolve(!1)}),n.scope,100,!1),n.postPromise.then((function(e){return e?void 0:n.fetchSummary()}))})).then((function(){n.refresh(e),n.nextDeferred&&(n.nextDeferred.resolve(),n.nextDeferred=void 0)}))}},t.prototype.refresh=function(e){var t=this,n=this.getAffectedColumns().concat([this.cell.column]),i=this.getOverallColumn();i&&n.push(i);var o=[this.cell.row];e&&this.gridData.getGroupIdUserIdMap()[this.group.groupId].forEach((function(e){var n=t.gridData.getRowByUserId(e);n!==t.cell.row&&o.push(n)})),s.forEach(o,(function(e){s.forEach(n,(function(n){t.gridData.refreshDataCell(e,n)}))})),this._isUpdating=!0,this.rootScope.$broadcast(v.b.DATA_UPDATE)},t.prototype.getAffectedColumns=function(){return this.cell.column instanceof m.c?this.cell.column.findAffectedColumns():[]},t.prototype.getOverallColumn=function(){return s.find(this.gridData.getColumns(),(function(e){return e instanceof m.k}))},t.prototype.setUpScreenReader=function(e,t){this.userName=e.row.metadata.user.givenName+" "+e.row.metadata.user.familyName;var n=e.column.data.columnName;if(this.ariaLabelContent=t?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:this.userName,assignmentName:n,grade:t},noWrap:!0,noEscape:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:this.userName,assignmentName:n},noWrap:!0,noEscape:!0}),this.isPosted){var i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.postedLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=this.ariaLabelContent+" "+i}if(this.isPastDueZero){var s=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.pastDueZero",noWrap:!0,noEscape:!0});this.ariaLabelContent=this.ariaLabelContent+" "+s}if(this.group&&(this.ariaLabelContent=this.ariaLabelContent+" "+this.group.groupTitle),this.hasNewSubmission){var o=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.newSubmissionLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=o+" "+this.ariaLabelContent}},t.prototype.isGroupAssessment=function(){return this.group&&this.cell instanceof b.e&&!(this.cell instanceof b.f)},t.CELL_EDITOR_TEMPLATE='<div bb-grade-grid-cell-editor-reborn id="bb-grade-grid-cell-editor-reborn" class="editor"></div>',t.$inject=["$rootScope","$window","$q",u.o.serviceName,a.h,"$compile","scope","element","attrs","gradeGridRebornController",r.b,c.serviceName,l.b],t}(),I=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=y,this.scope=!0,this.require="^"+o.a,this.link=function(e,n,i,s){e.gradeGridColumnReborn=t.$injector.instantiate(k,{scope:e,element:n,attrs:i,gradeGridRebornController:s})}}return e.$inject=["$injector"],e}();i.module(A,[d.a]).directive("bbGradeGridColumnReborn",["$injector",function(e){return e.instantiate(I)}])}).call(this,n("5iHu"))},xoIb:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-feedback",use:"icon-medium-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM6 6h12M6 9h12M6 12h12M6 15h7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},"y+vt":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("67oV"),n("bVj5");var i=n("wHJ2"),s=n("qH3X"),o=n("0JpG"),a=n("pF15"),r="ultra.components.directives.gradeSearchFilterReborn",c=function(){function e(e,t,n){this.scope=e,this.$rootScope=t,this.bbLocalize=n,this.initial()}return e.prototype.initial=function(){this.getCheckedMergedCourse()||this.clearAll(),this.criteriaBlocks=[{id:"merged_course",expanded:!0,name:"merged_course",criteriaDetails:this.scope.mergedCourses}]},e.prototype.closeFilterCriteria=function(){this.$rootScope.$broadcast(s.a.CLOSE_FILTER_PANEL,!1)},e.prototype.clearAll=function(){this.$rootScope.$broadcast(s.a.GRADEBOOK_CLEAR_SELECTED,!0)},e.prototype.collapseMergedCourse=function(e){this.criteriaBlocks.some((function(t){return t.id===e.id}))&&(e.expanded=!e.expanded)},e.prototype.filterMergedCourse=function(){this.$rootScope.$broadcast(s.a.UPDATED_FILTER_CONDITION)},e.prototype.getCheckedMergedCourse=function(){return this.scope.mergedCourses&&this.scope.mergedCourses.filter((function(e){return!0===e.ui.checked})).length},e.prototype.getToggleButtonLabel=function(e){return e.expanded?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.collapse"}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.expand"})},e.$inject=["scope","$rootScope",o.serviceName],e}(),l=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.scope={mergedCourses:"<"},this.link=function(e,n,i){e.gradeGridSearchFilterReborn=t.$injector.instantiate(c,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(r,[]).directive("bbGradeGridSearchFilterReborn",["$injector",function(e){return e.instantiate(l)}])},y0xW:function(e,t){e.exports='<div class="assessment-question" ng-if="::!assessmentQuestion.questionRegradingEnabled">\n  <fieldset>\n    <div class="question-header"\n         ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n         ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle">\n      <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                   class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                   aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                   size="medium"\n                   icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n      <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle" bb-translate="components.directives.assessment-question.question-title" translate-values="{index: assessmentQuestion.questionAttempt.visibleQuestionNumber}"></legend>\n      <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                         hide-grade="!assessmentQuestion.canViewGrades"\n                         input-id="{{::assessmentQuestion.elementId}}"\n                         is-privileged="assessmentQuestion.canEnterGrades"\n                         ng-if="assessmentQuestion.questionConfig.hasPoints">\n      </bb-question-grade>\n    </div>\n    <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n  </fieldset>\n</div>\n\n<div class="assessment-question" ng-if="::assessmentQuestion.questionRegradingEnabled">\n  <fieldset ng-show="!assessmentQuestion.isEditing">\n    <div class="question-header question-header-grading"\n         ng-class="{\'has-question-title\': assessmentQuestion.questionConfig.hasQuestionCountTitle, \'is-read-only\': !isPrivileged() || readOnly()}"\n         ng-if="assessmentQuestion.questionConfig.hasPoints || assessmentQuestion.questionConfig.hasQuestionCountTitle"\n         ng-switch="assessmentQuestion.questionAttempt.question.fullCredit"\n    >\n      <div bb-foundation-defer ng-if="isSmallBreakpoint" ng-switch-default>\n        <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                     class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                     aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                     size="medium"\n                     icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n        <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle">{{::assessmentQuestion.questionTitle}}</legend>\n        <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                           hide-grade="!assessmentQuestion.canViewGrades"\n                           input-id="{{::assessmentQuestion.elementId}}"\n                           is-privileged="assessmentQuestion.canEnterGrades"\n                           ng-if="assessmentQuestion.questionConfig.hasPoints"\n                           >\n        </bb-question-grade>\n        <bb-overflow-menu ng-show="!isAnyQuestionEditing() && !assessmentQuestion.isCurrentCourseComplete"\n                          element-id="{{::assessmentQuestion.elementId}}"\n                          element-name="{{::assessmentQuestion.questionTitle}}"\n                          menu-items="assessmentQuestion.getQuestionRegradingOverflowMenu()"\n                          analytics-id-tag-prefix="components.directives.attempt-canvas.getQuestionRegradingOverflowMenu"\n                          >\n        </bb-overflow-menu>\n      </div>\n      <div bb-foundation-defer ng-if="isSmallBreakpoint" ng-switch-when="true">\n        <div class="question-header-column question-header-first-column">\n          <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                       class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                       aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                       size="medium"\n                       icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n          <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle">{{::assessmentQuestion.questionTitle}}</legend>\n          <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                    hide-grade="!assessmentQuestion.canViewGrades"\n                    input-id="{{::assessmentQuestion.elementId}}"\n                    is-privileged="assessmentQuestion.canEnterGrades"\n                    ng-if="assessmentQuestion.questionConfig.hasPoints">\n          </bb-question-grade>\n          <bb-overflow-menu ng-show="!isAnyQuestionEditing() && !assessmentQuestion.isCurrentCourseComplete"\n                            element-id="{{::assessmentQuestion.elementId}}"\n                            element-name="{{::assessmentQuestion.questionTitle}}"\n                            menu-items="assessmentQuestion.getQuestionRegradingOverflowMenu()"\n                            analytics-id-tag-prefix="components.directives.attempt-canvas.getQuestionRegradingOverflowMenu"\n          >\n          </bb-overflow-menu>\n        </div>\n        <div class="question-header-column question-header-secondary-column">\n          <span class="question-full-credit-label"\n                bb-translate>\n            components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given\n          </span>\n        </div>\n      </div>\n      <div bb-foundation-defer ng-if="!isSmallBreakpoint">\n        <bb-svg-icon ng-if="assessmentQuestion.canShowQuestionScoreRelatedDetail()"\n                     class="question-indicator {{::assessmentQuestion.getCorrectnessColor()}}"\n                     aria-label="{{::assessmentQuestion.getCorrectnessName()}}"\n                     size="medium"\n                     icon="{{::assessmentQuestion.getCorrectnessIcon()}}"></bb-svg-icon>\n        <legend class="question-label" ng-if="assessmentQuestion.questionConfig.hasQuestionCountTitle">{{::assessmentQuestion.questionTitle}}</legend>\n        <span class="question-full-credit-label" bb-translate ng-if="assessmentQuestion.questionAttempt.question.fullCredit">components.directives.attempt-canvas.freeform-response.grade.question.full-credit-given</span>\n        <bb-question-grade graded-question-attempt="gradedQuestionAttempt"\n                           hide-grade="!assessmentQuestion.canViewGrades"\n                           input-id="{{::assessmentQuestion.elementId}}"\n                           is-privileged="assessmentQuestion.canEnterGrades"\n                           ng-if="assessmentQuestion.questionConfig.hasPoints">\n        </bb-question-grade>\n        <bb-overflow-menu ng-show="!isAnyQuestionEditing() && !assessmentQuestion.isCurrentCourseComplete"\n                          element-id="{{::assessmentQuestion.elementId}}"\n                          element-name="{{::assessmentQuestion.questionTitle}}"\n                          menu-items="assessmentQuestion.getQuestionRegradingOverflowMenu()"\n                          analytics-id-tag-prefix="components.directives.attempt-canvas.getQuestionRegradingOverflowMenu"\n                          >\n        </bb-overflow-menu>\n      </div>\n    </div>\n    <div class="question-content" ng-show="assessmentQuestion.questionSpecificTemplateReady"></div>\n  </fieldset>\n  <fieldset ng-if="assessmentQuestion.isEditing" class="regrading-container assessment-canvas-react"></fieldset>\n</div>\n'},"yCl+":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-discussion",use:"icon-small-discussion-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-discussion"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="5" cy="8" r=".5" /><circle cx="8" cy="8" r=".5" /><circle cx="11" cy="8" r=".5" /></symbol>'});s.add(o);e.exports=o},yGpi:function(e,t){e.exports='<div bb-load-bundle="components/directives/folder" class="folder" ng-class="{\'is-empty-folder\': content.children.length === 0 && folder.showEmptyMenu, \'learning-module\': content.isLearningModule()}" bb-cache-compilation="content-folder">\n  <div bb-drop-handler on-move-handler="onMoveHandler" on-move-into-folder-handler="onMoveIntoFolderHandler" on-file-drop-handler="onFileDropHandler" content="content" is-folder-open="folder.isOpen" next-content-id="nextContentId" previous-content-id="previousContentId">\n    <div ng-if="::(!content.isLearningModule())" class="row collapse element-list-row folder-row-container js-parent js-course-skip-link-target" can-create="canCreate" bb-content-item-mouseover ng-class="{open: folder.isOpen, \'is-conditional-release\': content.isConditionalReleaseLocked()}" bb-click-to-invoke-child="button.content-title">\n      <bb-content-item-base contents="contents" content="content" context-area="folder.contextArea" can-move="canMove"></bb-content-item-base>\n      <div class="list-tree-toggle" ng-if="folder.canToggle()">\n        <button class="button super-clear"\n                ng-click="folder.toggleFolder()"\n                aria-controls="{{::\'folder-contents-\' + content.id}}"\n                aria-expanded="{{folder.isOpen}}"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.folder.aria-label.toggle-folder\'}"\n                translate-attrs-values="{folderName: content.title}"\n                analytics-id="course.content.folder.toggle.button">\n          <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n        </button>\n      </div>\n    </div>\n\n    <div ng-if="::(content.isLearningModule())" ng-class="{open: folder.isOpen}">\n      <bb-learning-module-base-item content="content" contents="contents" context-area="folder.contextArea" can-toggle="::folder.canToggle()"\n        toggle-func="folder.toggleFolder()" can-move="canMove" is-open="folder.isOpen">\n      </bb-learning-module-base-item>\n    </div>\n  </div>\n  <div ng-attr-id="{{::(content.isLearningModule() ? \'learning-module-contents-\' : \'folder-contents-\') + content.id}}" class="folder-contents" aria-expanded="{{folder.isOpen}}" ng-class="{\'not-empty\': content.children && content.children.length > 0}">\n    <div ng-if="(content.children.length > 0 || folder.showOutlineOverride) && folder.isOpen">\n      <bb-content-outline hide-add-menu-override="folder.showOutlineOverride" on-file-drop-handler="onFileDropHandler" on-move-handler="onMoveHandler"\n                          on-move-into-folder-handler="onMoveIntoFolderHandler" load-more-children="loadMoreChildren" parent-folder="folder.content"\n                          contents="folder.content.children" can-create="canCreate" can-move="canMove" context-area="folder.contextArea"\n                          can-copy-import="canCopyImport"></bb-content-outline>\n    </div>\n    <div class=\'drag-element\'>\n      <div bb-drop-handler\n        ng-show="content.children.length === 0"\n        on-move-handler="onMoveHandler"\n        on-move-into-folder-handler="onMoveIntoFolderHandler"\n        on-file-drop-handler="onFileDropHandler"\n        content="{id: content.id + \'blank\', parentId: content.id, depth: content.depth + 1}"\n        empty-target\n      >\n        <span class="empty-message" ng-if="content.children.length === 0  && folder.showEmptyMenu"\n          ng-class="{\'foder-in-force-sequence-empty-message\': content.isForcedSequenceItem()}"\n          bb-translate="{{\n            content.isForcedSequenceItem() && canCreate? \'components.directives.folder.emptyInSequence\':\n              (content.isLearningModule() ? \'components.directives.learning-module.empty\' : \'components.directives.folder.empty\')\n          }}">\n        </span>\n        \x3c!-- (|| false) keep showMenuOverride in watch status in add-content-button directive --\x3e\n        \x3c!-- use ng-show instead of ng-if to keep the element when close add buttons, make sure the upload directive handlers will not be lost --\x3e\n        <ng-switch on="::content.isLearningModule()">\n          <bb-add-content-button ng-switch-when="false" show-menu-override="folder.showMenuOverride || false" depth="(content.depth + 1)" content="content"\n                                 root-content="rootContent()" parent-id="content.id" position-before="\'start\'"\n                                 ng-show="canCreate && folder.showEmptyMenu && !content.isForcedSequenceItem()" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n          <bb-add-content-button ng-switch-when="true" show-menu-override="false" depth="(content.depth + 1)" content="content"\n                                 root-content="content" parent-id="content.id" position-before="\'start\'"\n                                 is-render-by-default="true"\n                                 class="empty-lm-add-content-btn"\n                                 ng-show="canCreate && folder.showEmptyMenu && !content.isForcedSequenceItem()" context-area="folder.contextArea"\n                                 can-copy-import="canCopyImport" folder-nested-button="true"></bb-add-content-button>\n        </ng-switch>\n      </div>\n    </div>\n  </div>\n</div>\n'},yMoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("D57K"),s=n("pjml"),o=n("oi1r"),a=n("o5Lu"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t}(s.I.ScaleType),c=function(){function e(e,t,n,i,s){this.grade=e,this.$q=t,this.gradeDetail=n,this.scope=i,this.schemaService=s,this.wasValueErased=!1}return e.prototype.init=function(e,t){var n=this;this.column=e;var i=function(e){n.schema=e,n.scaleType=null==e?void 0:e.scaleType};return t?this.$q.when(i(t)):this.schemaService.loadGradeSchema(e).then((function(e){i(e)}))},e.prototype.shouldShowTotalPoints=function(){return null!=this._displayValue&&(this.schema&&this.schema.scaleType&&s.I.ScaleType.Score.isEqualTo(this.schema.scaleType)&&!this.isDisplayValueTooLargeForTotalPoints())},e.prototype.isDisplayValueTooLargeForTotalPoints=function(){return this._displayValue&&this._displayValue.toString().length>a.f.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL},Object.defineProperty(e.prototype,"displayGrade",{set:function(e){var t,n;if(e)switch(this._nonFormattedScore=e.score,this._perfCode=e.perfCode,this._perfCode?this.perfCodeDesc=this._perfCode.description:this.perfCodeDesc="",this.displayValue=this.grade.getGradeToDisplay(e,this.scope,null===(t=this.schema)||void 0===t?void 0:t.scaleType),null===(n=this.schema)||void 0===n?void 0:n.scaleType){case s.I.ScaleType.Tabular.toString():var o=null;if(this._perfCode)o={perfCode:this._perfCode};else if(this.column.externalGrade&&this.gradeDetail&&this.gradeDetail.isOverrideGrade()){var a=this.gradeDetail.pointsPossible||this.column.possible||100;o={score:r=this._nonFormattedScore&&this._nonFormattedScore*a/100}}else o={score:this._nonFormattedScore};this._parsedValue=this.grade.getGradeToDisplay(o,this.scope,s.I.ScaleType.Score.toString());break;case s.I.ScaleType.Percent.toString():var r=this._nonFormattedScore&&this._nonFormattedScore/100*this.column.possible;this._parsedValue=this.grade.getGradeToDisplay({score:r},this.scope,s.I.ScaleType.Score.toString());break;case s.I.ScaleType.Score.toString():this._parsedValue=this.displayValue;break;case s.I.ScaleType.Complete.toString():this._parsedValue=this.grade.getGradeToDisplay(Object(i.__assign)(Object(i.__assign)({},e),{grade:null}),this.scope,this.schema.scaleType);break;case s.I.ScaleType.Text.toString():this._parsedValue=e.grade}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayValue",{get:function(){return this._displayValue},set:function(e){this.wasValueErased=this.grade.wasGradeCleared(this.displayValue,e),this._displayValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parsedValue",{get:function(){return this._parsedValue},set:function(e){this._parsedValue=e},enumerable:!0,configurable:!0}),e.prototype.hasPerfCode=function(){return!!this._perfCode},e.prototype.getGradeColor=function(){var e,t;return(null===(t=null===(e=this.gradeDetail)||void 0===e?void 0:e.displayGrade)||void 0===t?void 0:t.isOverride)&&this.column.externalGrade||r.Text.isEqualTo(this.scaleType)?"gray":this.displayValue?r.Percent.isEqualTo(this.scaleType)?this.grade.getPercentileColor(this._nonFormattedScore):this.getGradeColorScoreSchema():void 0},e.prototype.getGradeColorScoreSchema=function(){var e=this.gradeDetail?this.gradeDetail.pointsPossible:this.column.possible;if(e>0){var t=this._nonFormattedScore/e*100;return this.grade.getPercentileColor(t)}return"na"},e.$inject=[a.h,"$q","gradeDetail","scope",o.b],e}()},yV5t:function(e,t){e.exports='<a class="content-title" \n   ng-click="contentItemScormLaunch.scormLaunch()" \n   href="javascript:void(0);"\n   aria-describedby="{{contentItemBase.getAriaDescribedBy()}}"\n   analytics-id="content.item.scormlaunch.link">\n  <span>{{ content.title }}</span>\n</a>'},"ykC+":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-goal",use:"icon-small-goal-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-goal"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 1h14v3H1zM4 12h8v3H4z" /><path d="M14 4s0 5-6 5-6-5-6-5M8 9v3" stroke-width="2" /></symbol>'});s.add(o);e.exports=o},ys4f:function(e,t){e.exports='<div class="true-false-attempt-review true-false">\n  <div class="true-false-question">\n    <bb-rich-text-editor\n      ng-model="assessmentQuestion.questionAttempt.question.questionText.rawText"\n      is-read-only="true"\n      plugin-options="{\'attachment\': true, \'math\': true, \'contentMarket\': true}">\n    </bb-rich-text-editor>\n  </div>\n  \x3c!--In review as instructor or as student with posted grade--\x3e\n  <bb-question-answer-status\n    correctness="::assessmentQuestion.getAnswerResult()"\n    was-late="::assessmentQuestion.wasAnsweredLate()"\n    hide-correctness-text="true"\n    class="true-false-question-answer">\n    <div bb-translate="{{::assessmentQuestion.viewHelper.answerDescriptionKey}}"></div>\n  </bb-question-answer-status>\n  <div class="true-false-answers-container">\n    <ol class="true-false-answers">\n      <li class="true-false-answer-true {{::assessmentQuestion.getAnswerChoiceStyles(true)}}">\n        <div class="answer-circle" bb-translate>components.directives.assessment-question.true-false.abbreviated-true</div>\n        <input type="radio"\n                id="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n                name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n                aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n                aria-describedby="{{(assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(true)) ? \'correct-notification\': null }}"\n                ng-model="assessmentQuestion.questionAttempt.givenAnswer"\n                ng-value="true"\n                disabled\n                analytics-id="assessment.question.true.false.answer.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-true-label\' }}"\n                for="{{assessmentQuestion.elementId + \'true-false-answer-true\' }}"\n                class="checkbox-label">\n          <span ng-if="assessmentQuestion.viewHelper.showIncorrectIndicator(true)"\n                class="correctness-label" bb-translate>\n            components.directives.assessment-question.true-false.incorrect-label\n          </span>\n          {{::assessmentQuestion.viewHelper.trueAnswerOptionLabel}}\n        </label>\n        <span id="correct-notification" class="correct-answer-text" ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(true)" bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n      <li class="true-false-answer-false {{::assessmentQuestion.getAnswerChoiceStyles(false)}}">\n        <div class="answer-circle" bb-translate>components.directives.assessment-question.true-false.abbreviated-false</div>\n        <input type="radio"\n                id="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n                name="{{assessmentQuestion.elementId + \'true-false-answers-choice\' }}"\n                aria-labelledby="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n                aria-describedby="{{(assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(false)) ? \'correct-notification\': null}}"\n                ng-model="assessmentQuestion.questionAttempt.givenAnswer"\n                ng-value="false"\n                disabled\n                analytics-id="assessment.question.true.false.answer.givenAnswer.input.radio"/>\n        <label id="{{assessmentQuestion.elementId + \'true-false-answer-false-label\' }}"\n                for="{{assessmentQuestion.elementId + \'true-false-answer-false\' }}"\n                class="checkbox-label">\n          <span ng-if="assessmentQuestion.viewHelper.showIncorrectIndicator(false)"\n                class="correctness-label" bb-translate>\n            components.directives.assessment-question.true-false.incorrect-label\n          </span>\n          {{::assessmentQuestion.viewHelper.falseAnswerOptionLabel}}\n        </label>\n        <span id="correct-notification" class="correct-answer-text" ng-if="assessmentQuestion.canShowCorrectAnswerRelatedDetail() && assessmentQuestion.viewHelper.isAnswerChoiceCorrect(false)" bb-translate>components.directives.assessment-question.true-false.correct-label</span>\n      </li>\n    </ol>\n  </div>\n  <bb-automated-question-feedback\n    feedback="assessmentQuestion.getAutomatedQuestionFeedback()"\n    is-collapsible="assessmentQuestion.allowCollapsingOfAutomatedFeedbackIfShown()"\n  />\n</div>\n'},ytQ2:function(e,t){e.exports='<div ng-if="::foundationOffcanvas.wiredup || undefined"\n      class="bb-foundation-offcanvas"\n      ng-transclude\n      bb-click-outside="foundationOffcanvas.handleClickOutside()"\n      is-active="foundationOffcanvas.isPanelOpen"\n      aria-hidden="{{!foundationOffcanvas.isPanelOpen}}"\n      current-panel-only>\n</div>'},"z+6U":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("wHJ2"),s=n("sa5q"),o="ultra.components.directives.content.contentItem.contentItemType.contentItemPage",a=function(){function e(e){this.scope=e}return e.prototype.shouldAlignMiddle=function(){return!this.scope.content.canViewAsInstructor()},e.$inject=["scope"],e}(),r=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=s,this.scope=!1,this.link=function(e,n,i){e.contentItemPage=t.$injector.instantiate(a,{scope:e,element:n,attrs:i})}}return e.$inject=["$injector"],e}();i.module(o,[]).directive("bbContentItemPage",["$injector",function(e){return e.instantiate(r)}])},zIKm:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-time-limit",use:"icon-medium-time-limit-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-time-limit"><path d="M5 1l6 11-6 11M19 1l-6 11 6 11M4 1h16M4 23h16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},zexu:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-undo",use:"icon-small-undo-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-undo"><path d="M3 3L1 5l2 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 5h11c2 0 3 2.0474 3 4s-1 4-3 4H4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},zjPK:function(e,t,n){"use strict";n("ZsPj"),n("nsQ1");var i=n("nsO7"),s=n("wHJ2"),o=n("0+Qs"),a=n("0JpG"),r=n("94iD"),c=n("D57K"),l=1e4,d=function(){function e(e,t,n,i,s){this.tickInterval=l,this.bbInterval=e,this.scope=t,this.localize=n,this.fetchedAttemptTime=i,this.continuedFromLastStage=s,this.remainSecondsWhenFetch=this.calcRemainSecondsWhenFetch(),this.usedSecondsWhenFetch=this.calcUsedSecondsWhenFetch(),this.fetchTime=(new Date).getTime()}return e.prototype.updateCurrentMessage=function(){this.scope.currentRemainingSeconds<=60?this.scope.currentTimerMessage=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"course.content.assessment.test.settings.timeLimit.remainingTimeSeconds.plural",params:{secondsRemaining:Math.floor(this.scope.currentRemainingSeconds)},noWrap:!0}):this.scope.currentTimerMessage=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"course.content.assessment.test.settings.timeLimit.remainingTime.plural",params:{minutesRemaining:Math.ceil(this.scope.currentRemainingSeconds/60)},noWrap:!0})},e.prototype.tick=function(){var e=((new Date).getTime()-this.fetchTime)/1e3;if(this.scope.currentRemainingSeconds=this.remainSecondsWhenFetch-e,this.scope.currentUsedSeconds=this.usedSecondsWhenFetch+e,this.scope.currentRemainingSeconds<=60&&this.tickInterval>1e3&&(this.tickInterval=1e3,this.bbInterval.cancel(this.timer),this.timer=this.bbInterval(this.tick.bind(this),this.scope,this.tickInterval)),this.updateCurrentMessage(),this.scope.currentRemainingSeconds<=0&&(null!=this.endEmission&&(this.scope.$broadcast("bb-time-is-up",this.endEmission),this.bbInterval.cancel(this.timer)),null!=this.next)){new this.next(this.bbInterval,this.scope,this.localize,this.fetchedAttemptTime,!0).start()}},e.prototype.start=function(){this.scope.currentTestStage=this.currentTestStage,this.continuedFromLastStage||null==this.resumeEmission||this.scope.$broadcast("bb-test-resumed",this.resumeEmission),this.timer=this.bbInterval(this.tick.bind(this),this.scope,this.tickInterval),this.tick()},e}();function u(e){return Math.max(e.elapsedSeconds,0)}function p(e){return Math.max(e.softlimitSeconds-Math.max(e.elapsedSeconds,0),0)}function m(e){return Math.max(e.elapsedSeconds-e.softlimitSeconds,0)}var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTestStage=r.b.Stage0NoExtraTime,t.endEmission={stopMode:"hard"},t}return Object(c.__extends)(t,e),t.prototype.calcRemainSecondsWhenFetch=function(){return p(this.fetchedAttemptTime)},t.prototype.calcUsedSecondsWhenFetch=function(){return u(this.fetchedAttemptTime)},t}(d),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTestStage=r.b.Stage0UnlimitedExtraTime,t.endEmission={stopMode:"soft"},t.next=g,t}return Object(c.__extends)(t,e),t.prototype.calcRemainSecondsWhenFetch=function(){return p(this.fetchedAttemptTime)},t.prototype.calcUsedSecondsWhenFetch=function(){return u(this.fetchedAttemptTime)},t}(d),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTestStage=r.b.Stage1UnlimitedExtraTime,t.resumeEmission=!0,t}return Object(c.__extends)(t,e),t.prototype.calcRemainSecondsWhenFetch=function(){return Number.POSITIVE_INFINITY},t.prototype.calcUsedSecondsWhenFetch=function(){return m(this.fetchedAttemptTime)},t.prototype.updateCurrentMessage=function(){this.scope.currentTimerMessage=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"course.content.assessment.test.settings.timeLimit.usedExtraTime.plural",params:{usedExtraTime:Math.floor(this.scope.currentUsedSeconds/60)},noWrap:!0})},t}(d),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTestStage=r.b.Stage0LimitedExtraTime,t.endEmission={stopMode:"soft"},t.next=f,t}return Object(c.__extends)(t,e),t.prototype.calcRemainSecondsWhenFetch=function(){return p(this.fetchedAttemptTime)},t.prototype.calcUsedSecondsWhenFetch=function(){return u(this.fetchedAttemptTime)},t}(d),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTestStage=r.b.Stage1LimitedExtraTime,t.resumeEmission=!0,t.endEmission={stopMode:"hard"},t}return Object(c.__extends)(t,e),t.prototype.calcRemainSecondsWhenFetch=function(){return e=this.fetchedAttemptTime,Math.max(e.hardlimitSeconds-Math.max(e.softlimitSeconds,e.elapsedSeconds),0);var e},t.prototype.calcUsedSecondsWhenFetch=function(){return m(this.fetchedAttemptTime)},t.prototype.updateCurrentMessage=function(){this.scope.currentRemainingSeconds<=60?this.scope.currentTimerMessage=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"course.content.assessment.test.settings.timeLimit.extraRemainingTimeSeconds.plural",params:{secondsRemaining:Math.floor(this.scope.currentRemainingSeconds)},noWrap:!0}):this.scope.currentTimerMessage=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"course.content.assessment.test.settings.timeLimit.extraRemainingTime.plural",params:{minutesRemaining:Math.ceil(this.scope.currentRemainingSeconds/60)},noWrap:!0})},t}(d),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentTestStage=r.b.StageE,t.endEmission={stopMode:"hard"},t}return Object(c.__extends)(t,e),t.prototype.calcRemainSecondsWhenFetch=function(){return 0},t.prototype.calcUsedSecondsWhenFetch=function(){return NaN},t}(d);n.d(t,"a",(function(){return w}));var w="ultra.features.course.content.assessment.attempt.assessmentAttempt.timedIndicator",C="bbTimedTestIndicator",S=s.module(w,[o.a]);S.directive(C,["$compile",o.b,"$filter",a.serviceName,function(e,t,n,s){return{restrict:"A",link:function(e,n,o){e.getCurrentLevelClass=function(){if(e.showTimeUpIndicator)return C+"-lv-0";if(null==e.currentRemainingSeconds)return"";var t=[0,300,600,Number.POSITIVE_INFINITY],n=i.findIndex(t,(function(t){return e.currentRemainingSeconds<=t}));return C+"-lv-"+n.toString()};var a=e.$watch(o[C],(function(i){if(i&&(a(),e.footerNoticeShow=i.hasTimeLimit,e.footerNoticeShow)){n.addClass("is-timed-test");var o=void 0;switch(i.testStage){case r.b.Stage0NoExtraTime:o=h;break;case r.b.Stage0UnlimitedExtraTime:o=b;break;case r.b.Stage1UnlimitedExtraTime:o=g;break;case r.b.Stage0LimitedExtraTime:o=v;break;case r.b.Stage1LimitedExtraTime:o=f;break;case r.b.StageE:o=y}new o(t,e,s,i.adaptedTime).start()}}))}}}]),S.directive(C+"Label",["$compile",o.b,function(e,t){return{restrict:"A",link:function(t,n,i){e('\n        <span class="label-timed-indicator" ng-class="getCurrentLevelClass()" aria-live="polite" role="timer">\n          <bb-svg-icon ng-show="currentRemainingSeconds > 600 && !showTimeUpIndicator" size="small" icon="timer" status="active"></bb-svg-icon>\n          <bb-svg-icon ng-show="currentRemainingSeconds <= 600 || showTimeUpIndicator" size="small" icon="timer" status="alert"></bb-svg-icon>\n          <span ng-show="currentRemainingSeconds <= 0 || showTimeUpIndicator" bb-translate="course.content.assessment.test.settings.timeLimit.timeIsUp"></span>\n          <span ng-show="currentRemainingSeconds > 0 && !showTimeUpIndicator" class="js-remaining-time" >{{ currentTimerMessage }}</span>\n        </span>\n      ')(t).prependTo(n)}}}])},zmy6:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("jMVO");var i=n("wHJ2"),s=n("lEL+"),o="ultra.components.directives.placeholder",a=function(){function t(t,n){var i=this;this.$injector=t,this.timeout=n,this.restrict="A",this.scope=!1,this.require="?ngModel",this.link=function(t,n,s,o){if("input"!==n.prop("tagName").toLowerCase())throw new Error("Attempted to use bb-placeholder directive on a non-input element");var a=function(){var s=n,o=s.attr("title"),a=s.prev("span");i.timeout((function(){s.val()&&s.val()!==o?a.css("visibility","hidden"):(a.css("visibility",""),o&&a.css("margin-left",function(t){var n=e("<div></div>").text(t).css("visibility","hidden").appendTo(document.body),i=n.width();return n.remove(),i}(o)+2+"px"))}),t,0,!1)};n.wrap('<div class="bb-placeholder"></div>'),n.before('<span class="panel-title bb-placeholder__text">'+s.bbPlaceholder+"</span>"),n.on("cut",a),n.on("keydown",a),n.on("keyup",a),n.on("paste",a),n.on("change",a),n.on("blur",a),n.on("focus click",a),s.$observe("bbPlaceholder",(function(e){n.prev("span").text(e),i.timeout((function(){n.trigger("keydown")}),t,0,!1)})),o&&t.$watch((function(){return o.$modelValue}),(function(){a()}))}}return t.$inject=["$injector",s.b],t}();i.module(o,[s.a]).directive("bbPlaceholder",["$injector",function(e){return e.instantiate(a)}])}).call(this,n("5iHu"))},zpX8:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-safe-assign",use:"icon-medium-safe-assign-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-safe-assign"><path d="M21 11V1H3v22h7M7 5h8M7 9h10M7 13h9M7 17h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 19l4 4 7-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},zphb:function(e,t){e.exports='<div class="simple-statistic-contents" ng-class="::item().cssClass">\n  <div bb-tooltip enhanced-tooltip="true" data-tooltip-on-overflow-only="true" title="{{ ::item().data }}">\n    <div class="stat-data"\n         ng-attr-aria-label="{{ item().aria ? item().aria : undefined }}"\n         data-ng-bind-html="::item().trusted"\n         data-ellipsis></div>\n  </div>\n  <div ng-if="::item().subtext" class="stat-sub-text" bb-translate>{{ ::item().subtext }}</div>\n  <div ng-if="::!item().subtext && item().reserveSubtextSpace" class="stat-sub-text" aria-hidden="true">&nbsp;</div>\n</div>'}}]);